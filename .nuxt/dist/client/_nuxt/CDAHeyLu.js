import{H as B}from"./BDp76w7U.js";import{_ as M}from"./Cx2pMvRd.js";import{r as C,f as _,i as k,o as s,c as i,a as t,t as a,j as m,g as D,h as q,k as N,l as E,F as h,m as A,b as x,w as L,d as w,n as v,p as P,q as j}from"./vwRdSaPh.js";import{S}from"./BVHvhCMQ.js";import{_ as R}from"./DlAUqK2U.js";const V={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},H={class:"text-4xl font-bold my-4"},O={class:"bg-[#10673b] rounded-lg p-6"},F=["value"],Q={__name:"Balances",setup(o){const u=C(""),g=["Environmental Conservation","Education for All","Healthcare Access","Animal Welfare","Hunger Relief"],{state:p}=_(),f=k(()=>p.balance);return(r,e)=>{const c=M;return s(),i(h,null,[t("div",V,[e[2]||(e[2]=t("div",{class:"flex justify-between items-center"},[t("h2",{class:"text-2xl font-bold"},"Balance")],-1)),t("div",H,"TB$ "+a(m(f)),1)]),t("div",O,[e[6]||(e[6]=t("h2",{class:"text-xl font-semibold mb-4"},"Donate",-1)),t("form",{onSubmit:e[1]||(e[1]=D((...d)=>r.submitDonation&&r.submitDonation(...d),["prevent"])),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{for:"cause",class:"block text-sm font-medium mb-1"},"Cause",-1)),q(t("select",{"onUpdate:modelValue":e[0]||(e[0]=d=>E(u)?u.value=d:null),id:"cause",class:"w-full px-3 py-2 border border-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-green-700",required:""},[e[3]||(e[3]=t("option",{value:""},"Select a cause",-1)),(s(),i(h,null,A(g,d=>t("option",{key:d,value:d},a(d),9,F)),64))],512),[[N,m(u)]])]),x(c,{to:"/donate",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full"},{default:L(()=>e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 mr-2"},[t("path",{d:"m22 2-7 20-4-9-9-4Z"}),t("path",{d:"M22 2 11 13"})],-1),w(" Donate ")])),_:1})],32)])],64)}}},U={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},Z={key:0},z={key:1},I={__name:"Credentials",setup(o){const{state:u,renderCredential:g}=_(),p=k(()=>u.customerCredentials.map(f=>g(f)));return(f,r)=>(s(),i("div",U,[r[4]||(r[4]=t("h2",{class:"text-2xl font-bold mb-4"},"Credentials",-1)),m(p).length?(s(),i("div",Z,[(s(!0),i(h,null,A(m(p),(e,c)=>(s(),i("div",{key:c,class:"mb-4 p-4 border rounded-lg lg:w-1/2 w-full"},[t("p",null,[t("strong",null,a(e.title),1)]),t("p",null,[r[0]||(r[0]=t("strong",null,"Name:",-1)),w(" "+a(e.name),1)]),t("p",null,[r[1]||(r[1]=t("strong",null,"Country Code:",-1)),w(" "+a(e.countryCode),1)]),t("p",null,[r[2]||(r[2]=t("strong",null,"Date:",-1)),w(" "+a(e.issuanceDate),1)])]))),128))])):(s(),i("div",z,r[3]||(r[3]=[t("p",null,"No credentials found.",-1)])))]))}},W={class:"grid gap-6"},X={class:"flex items-center gap-4"},Y={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"green","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},G={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"red","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},J={key:2,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},K={class:"flex-1"},tt={class:"text-sm font-medium"},et={class:"text-xs text-gray-500 dark:text-gray-400"},nt={class:"flex-1"},st={class:"text-XL font-medium text-right"},ot={class:"grid gap-2"},it={class:"flex"},at={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},rt={class:"grid gap-2"},lt={class:"flex"},dt={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},ut={key:0,class:"grid gap-2"},ct={class:"flex"},mt={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},gt={key:1,class:"flex justify-end gap-2"},ft={key:2},pt={__name:"TransactionModal",props:{transaction:{type:Object,required:!0}},emits:["close"],setup(o,{emit:u}){const{state:g,addOrder:p,addClose:f,deductAmount:r}=_(),e=C(!1),c=o,d=u,$=()=>{d("close")},n=async()=>{e.value=!0,await f(c.transaction.id,c.transaction.pfiDid,"user cancelled"),e.value=!1,d("close")},y=async()=>{e.value=!0,await p(c.transaction.id,c.transaction.pfiDid),await r(c.transaction.payinAmount),e.value=!1,window.location.reload(),d("close")};return(b,l)=>(s(),i("div",{class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onClick:$},[t("div",{class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6 w-full max-w-md",onClick:l[0]||(l[0]=D(()=>{},["stop"]))},[t("div",W,[t("div",X,[t("div",null,[o.transaction.status==="completed"?(s(),i("svg",Y,l[1]||(l[1]=[t("path",{d:"M20 6 9 17l-5-5"},null,-1)]))):o.transaction.status==="failed"||o.transaction.status==="cancelled"?(s(),i("svg",G,l[2]||(l[2]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):(s(),i("svg",J,l[3]||(l[3]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M12 6v6l4 2"},null,-1)])))]),t("div",K,[t("p",tt,a(m(g).pfiAllowlist.find(T=>T.pfiUri===o.transaction.pfiDid).pfiName),1),t("p",et,"Exchange from "+a(o.transaction.payinCurrency)+" to "+a(o.transaction.payoutCurrency),1)]),t("div",nt,[t("p",st,a(o.transaction.payinAmount)+" "+a(o.transaction.payinCurrency),1)])]),l[7]||(l[7]=t("div",{class:"grid gap-2"},[t("label",{class:"text-sm font-medium leading-none"},"Sender"),t("div",{class:"flex"},[t("span",{class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"}," You ")])],-1)),t("div",ot,[l[4]||(l[4]=t("label",{class:"text-sm font-medium leading-none"},"Recipient Details",-1)),t("div",it,[t("span",at,a(o.transaction.to),1)])]),t("div",rt,[l[5]||(l[5]=t("label",{class:"text-sm font-medium leading-none"},"Amount",-1)),t("div",lt,[t("span",dt,a(o.transaction.payoutAmount)+" "+a(o.transaction.payoutCurrency),1)])]),o.transaction.status==="quote"&&o.transaction.expirationTime?(s(),i("div",ut,[l[6]||(l[6]=t("label",{class:"text-sm font-medium leading-none"},"Expires",-1)),t("div",ct,[t("span",mt,a(new Date(o.transaction.expirationTime).toLocaleDateString(void 0,{dateStyle:"medium"})),1)])])):v("",!0),o.transaction.status==="quote"&&!m(e)?(s(),i("div",gt,[t("button",{onClick:n,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-red-500 hover:text-white h-10 px-4 py-2"}," Cancel "),t("button",{onClick:y,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-500 text-white hover:bg-blue-700 h-10 px-4 py-2"}," Pay "+a(o.transaction.payinAmount)+" "+a(o.transaction.payinCurrency),1)])):v("",!0),m(e)?(s(),i("div",ft,[x(S)])):v("",!0)])])]))}},yt=R(pt,[["__scopeId","data-v-5b7f50a3"]]),bt={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},xt={key:0},vt=["onClick"],wt={class:"flex items-center gap-4"},kt={class:"font-medium"},ht={class:"text-[gray-500] dark:text-white text-sm"},_t={key:0,className:"w-1/5 flex items-center justify-end"},$t={key:1,class:"text-center text-gray-500"},Ct={key:1},At={__name:"Transactions",setup(o){const{state:u,selectTransaction:g,pollExchanges:p}=_(),f=k(()=>u.transactions),r=k(()=>u.transactionsLoading),e=C(null),c=n=>{e.value=n,g(n)},d=()=>{e.value=null,g(null)},$=n=>{switch(n.status){case"rfq":return`Requested ${n.payinAmount} ${n.payinCurrency}`;case"quote":return`Quoted ${n.payinAmount} ${n.payinCurrency}`;case"order":return`Payment for ${n.payinAmount} ${n.payinCurrency} submitted`;case"orderstatus":return`Payment processing for ${n.payinAmount} ${n.payinCurrency}...`;case"completed":return`Sent ${n.payinAmount} ${n.payinCurrency}`;case"expired":return`Quote for ${n.payinAmount} ${n.payinCurrency} expired`;case"cancelled":return`Exchange for ${n.payinAmount} ${n.payinCurrency} was cancelled`;case"failed":return`Payment for ${n.payinAmount} ${n.payinCurrency} failed`;default:return n.status}};return P(()=>{console.log("Polling exchanges..."),p()}),(n,y)=>(s(),i("div",bt,[y[1]||(y[1]=t("h2",{class:"text-2xl font-bold mb-4"},"Recent Transactions",-1)),t("div",null,[m(f).length?(s(),i("ul",xt,[(s(!0),i(h,null,A(m(f),b=>(s(),i("li",{key:b.id,onClick:l=>c(b),class:"flex items-center justify-between rounded-lg bg-gray-100 dark:bg-[#39b34d] p-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer mb-2"},[t("div",wt,[y[0]||(y[0]=t("div",{class:"bg-gray-200 dark:bg-[#10673b] rounded-full p-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 text-gray-500 dark:text-gray-400"},[t("path",{d:"m22 2-7 20-4-9-9-4Z"}),t("path",{d:"M22 2 11 13"})])],-1)),t("div",null,[t("div",kt,a($(b)),1),t("div",ht,a(new Date(b.createdTime).toLocaleDateString(void 0,{dateStyle:"medium"})),1)])]),b.status==="quote"?(s(),i("div",_t)):v("",!0)],8,vt))),128))])):(s(),i("div",$t,[m(r)?(s(),j(S,{key:0})):(s(),i("p",Ct,"No transactions available"))]))]),e.value?(s(),j(yt,{key:0,transaction:e.value,onClose:d},null,8,["transaction"])):v("",!0)]))}},jt={class:"flex flex-col min-h-screen"},Dt={class:"flex-1 bg-[#39b34d] dark:bg-[#ffffff] py-8 px-6 md:px-8 dark:text-white"},St={class:"max-w-3xl mx-auto grid gap-8"},Et={__name:"dashboard",setup(o){return(u,g)=>(s(),i("div",jt,[x(B),t("main",Dt,[t("div",St,[x(Q),x(I),x(At)])])]))}};export{Et as default};
