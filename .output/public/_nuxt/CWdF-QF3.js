import{H as D}from"./BIONW9Jj.js";import{_ as S}from"./qjVbr_oA.js";import{f as w,i as k,o as n,c as o,a as t,t as a,j as m,b as x,w as M,d as _,F as C,k as j,r as A,l as v,g as N,m as q,n as $}from"./DGuyXcn4.js";import{S as T}from"./BAXhlMnO.js";import{_ as L}from"./DlAUqK2U.js";const E={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},P={class:"text-4xl font-bold my-4"},O={__name:"Balances",setup(s){const{state:u}=w(),g=k(()=>u.balance);return(f,d)=>{const l=S;return n(),o("div",E,[d[1]||(d[1]=t("div",{class:"flex justify-between items-center"},[t("h2",{class:"text-2xl font-bold"},"Balance")],-1)),t("div",P,"TB$ "+a(m(g)),1),x(l,{to:"/donate",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full"},{default:M(()=>d[0]||(d[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 mr-2"},[t("path",{d:"m22 2-7 20-4-9-9-4Z"}),t("path",{d:"M22 2 11 13"})],-1),_(" Donate ")])),_:1})])}}},V={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},F={key:0},H={key:1},Q={__name:"Credentials",setup(s){const{state:u,renderCredential:g}=w(),f=k(()=>u.customerCredentials.map(d=>g(d)));return(d,l)=>(n(),o("div",V,[l[3]||(l[3]=t("h2",{class:"text-2xl font-bold mb-4"},"Credentials",-1)),m(f).length?(n(),o("div",F,[(n(!0),o(C,null,j(m(f),(r,c)=>(n(),o("div",{key:c,class:"mb-4 p-4 border rounded-lg lg:w-1/2 w-full"},[t("p",null,[t("strong",null,a(r.title),1)]),t("p",null,[l[0]||(l[0]=t("strong",null,"Country Code:",-1)),_(" "+a(r.countryCode),1)]),t("p",null,[l[1]||(l[1]=t("strong",null,"Date:",-1)),_(" "+a(r.issuanceDate),1)])]))),128))])):(n(),o("div",H,l[2]||(l[2]=[t("p",null,"No credentials found.",-1)])))]))}},R={class:"grid gap-6"},U={class:"flex items-center gap-4"},Z={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"green","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},z={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"red","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},I={key:2,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},X={class:"flex-1"},Y={class:"text-sm font-medium"},G={class:"text-xs text-gray-500 dark:text-gray-400"},J={class:"flex-1"},K={class:"text-XL font-medium text-right"},W={class:"grid gap-2"},tt={class:"flex"},et={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},nt={class:"grid gap-2"},st={class:"flex"},ot={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},it={key:0,class:"grid gap-2"},at={class:"flex"},rt={class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"},lt={key:1,class:"flex justify-end gap-2"},dt={key:2},ct={__name:"TransactionModal",props:{transaction:{type:Object,required:!0}},emits:["close"],setup(s,{emit:u}){const{state:g,addOrder:f,addClose:d,deductAmount:l}=w(),r=A(!1),c=s,b=u,h=()=>{b("close")},e=async()=>{r.value=!0,await d(c.transaction.id,c.transaction.pfiDid,"user cancelled"),r.value=!1,b("close")},y=async()=>{r.value=!0,await f(c.transaction.id,c.transaction.pfiDid),c.transaction.payinCurrency==="TB$"&&c.transaction.payoutCurrency==="USDC"&&(l(c.transaction.payinAmount),location.reload()),r.value=!1,b("close")};return(p,i)=>(n(),o("div",{class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onClick:h},[t("div",{class:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 w-full max-w-md",onClick:i[0]||(i[0]=N(()=>{},["stop"]))},[t("div",R,[t("div",U,[t("div",null,[s.transaction.status==="completed"?(n(),o("svg",Z,i[1]||(i[1]=[t("path",{d:"M20 6 9 17l-5-5"},null,-1)]))):s.transaction.status==="failed"||s.transaction.status==="cancelled"?(n(),o("svg",z,i[2]||(i[2]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):(n(),o("svg",I,i[3]||(i[3]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("path",{d:"M12 6v6l4 2"},null,-1)])))]),t("div",X,[t("p",Y,a(m(g).pfiAllowlist.find(B=>B.pfiUri===s.transaction.pfiDid).pfiName),1),t("p",G,"Exchange from "+a(s.transaction.payinCurrency)+" to "+a(s.transaction.payoutCurrency),1)]),t("div",J,[t("p",K,a(s.transaction.payinAmount)+" "+a(s.transaction.payinCurrency),1)])]),i[7]||(i[7]=t("div",{class:"grid gap-2"},[t("label",{class:"text-sm font-medium leading-none"},"Sender"),t("div",{class:"flex"},[t("span",{class:"flex-1 rounded-md bg-gray-100 px-3 py-2 text-sm text-gray-900 dark:bg-gray-800 dark:text-gray-100"}," You ")])],-1)),t("div",W,[i[4]||(i[4]=t("label",{class:"text-sm font-medium leading-none"},"Recipient Details",-1)),t("div",tt,[t("span",et,a(s.transaction.to),1)])]),t("div",nt,[i[5]||(i[5]=t("label",{class:"text-sm font-medium leading-none"},"Amount",-1)),t("div",st,[t("span",ot,a(s.transaction.payoutAmount)+" "+a(s.transaction.payoutCurrency),1)])]),s.transaction.status==="quote"&&s.transaction.expirationTime?(n(),o("div",it,[i[6]||(i[6]=t("label",{class:"text-sm font-medium leading-none"},"Expires",-1)),t("div",at,[t("span",rt,a(new Date(s.transaction.expirationTime).toLocaleDateString(void 0,{dateStyle:"medium"})),1)])])):v("",!0),s.transaction.status==="quote"&&!m(r)?(n(),o("div",lt,[t("button",{onClick:e,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-red-500 hover:text-white h-10 px-4 py-2"}," Cancel "),t("button",{onClick:y,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-500 text-white hover:bg-blue-700 h-10 px-4 py-2"}," Pay "+a(s.transaction.payinAmount)+" "+a(s.transaction.payinCurrency),1)])):v("",!0),m(r)?(n(),o("div",dt,[x(T)])):v("",!0)])])]))}},ut=L(ct,[["__scopeId","data-v-24ac657c"]]),gt={class:"bg-white dark:bg-[#10673b] rounded-lg shadow p-6"},mt={key:0},ft=["onClick"],yt={class:"flex items-center gap-4"},pt={class:"font-medium"},xt={class:"text-gray-500 dark:text-gray-400 text-sm"},bt={key:0,className:"w-1/5 flex items-center justify-end"},vt={key:1,class:"text-center text-gray-500"},kt={key:1},wt={__name:"Transactions",setup(s){const{state:u,selectTransaction:g,pollExchanges:f}=w(),d=k(()=>u.transactions),l=k(()=>u.transactionsLoading),r=A(null),c=e=>{r.value=e,g(e)},b=()=>{r.value=null,g(null)},h=e=>{switch(e.status){case"rfq":return`Requested ${e.payinAmount} ${e.payinCurrency}`;case"quote":return`Quoted ${e.payinAmount} ${e.payinCurrency}`;case"order":return`Payment for ${e.payinAmount} ${e.payinCurrency} submitted`;case"orderstatus":return`Payment processing for ${e.payinAmount} ${e.payinCurrency}...`;case"completed":return`Sent ${e.payinAmount} ${e.payinCurrency}`;case"expired":return`Quote for ${e.payinAmount} ${e.payinCurrency} expired`;case"cancelled":return`Exchange for ${e.payinAmount} ${e.payinCurrency} was cancelled`;case"failed":return`Payment for ${e.payinAmount} ${e.payinCurrency} failed`;default:return e.status}};return q(()=>{console.log("Polling exchanges..."),f()}),(e,y)=>(n(),o("div",gt,[y[1]||(y[1]=t("h2",{class:"text-2xl font-bold mb-4"},"Transactions",-1)),t("div",null,[m(d).length?(n(),o("ul",mt,[(n(!0),o(C,null,j(m(d),p=>(n(),o("li",{key:p.id,onClick:i=>c(p),class:"flex items-center justify-between rounded-lg bg-gray-100 dark:bg-gray-800 p-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer mb-2"},[t("div",yt,[y[0]||(y[0]=t("div",{class:"bg-gray-200 dark:bg-gray-700 rounded-full p-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 text-gray-500 dark:text-gray-400"},[t("path",{d:"m22 2-7 20-4-9-9-4Z"}),t("path",{d:"M22 2 11 13"})])],-1)),t("div",null,[t("div",pt,a(h(p)),1),t("div",xt,a(new Date(p.createdTime).toLocaleDateString(void 0,{dateStyle:"medium"})),1)])]),p.status==="quote"?(n(),o("div",bt)):v("",!0)],8,ft))),128))])):(n(),o("div",vt,[m(l)?(n(),$(T,{key:0})):(n(),o("p",kt,"No transactions available"))]))]),r.value?(n(),$(ut,{key:0,transaction:r.value,onClose:b},null,8,["transaction"])):v("",!0)]))}},ht={class:"flex flex-col min-h-screen"},_t={class:"flex-1 bg-[#39b34d] dark:bg-[#ffffff] py-8 px-6 md:px-8 dark:text-white"},$t={class:"max-w-3xl mx-auto grid gap-8"},Dt={__name:"dashboard",setup(s){return(u,g)=>(n(),o("div",ht,[x(D),t("main",_t,[t("div",$t,[x(O),x(Q),x(wt)])])]))}};export{Dt as default};
