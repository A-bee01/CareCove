const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CkJ-HxsR.js","./BIONW9Jj.js","./DlAUqK2U.js","./CWdF-QF3.js","./qjVbr_oA.js","./BAXhlMnO.js","./Spinner.-d7mfuZZ.css","./dashboard.C1k2wrhJ.css","./DGtAAYo-.js","./D7efB6VW.js","./error-404.DXySnQZL.css","./B-2PopZT.js","./error-500.CIkJDsQj.css"])))=>i.map(i=>d[i]);
var Nj=Object.defineProperty;var Rj=(e,t,r)=>t in e?Nj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ge=(e,t,r)=>Rj(e,typeof t!="symbol"?t+"":t,r);/**
* @vue/shared v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sS(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const gr={},Sp=[],$a=()=>{},Mj=()=>!1,p0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),oS=e=>e.startsWith("onUpdate:"),mn=Object.assign,aS=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},jj=Object.prototype.hasOwnProperty,nr=(e,t)=>jj.call(e,t),et=Array.isArray,xp=e=>lh(e)==="[object Map]",ch=e=>lh(e)==="[object Set]",jD=e=>lh(e)==="[object Date]",Uj=e=>lh(e)==="[object RegExp]",pt=e=>typeof e=="function",Tr=e=>typeof e=="string",Ba=e=>typeof e=="symbol",pr=e=>e!==null&&typeof e=="object",JI=e=>(pr(e)||pt(e))&&pt(e.then)&&pt(e.catch),GI=Object.prototype.toString,lh=e=>GI.call(e),Kj=e=>lh(e).slice(8,-1),XI=e=>lh(e)==="[object Object]",uS=e=>Tr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$p=sS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bb=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Lj=/-(\w)/g,To=bb(e=>e.replace(Lj,(t,r)=>r?r.toUpperCase():"")),qj=/\B([A-Z])/g,If=bb(e=>e.replace(qj,"-$1").toLowerCase()),_b=bb(e=>e.charAt(0).toUpperCase()+e.slice(1)),T1=bb(e=>e?`on${_b(e)}`:""),Cl=(e,t)=>!Object.is(e,t),Dp=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},ZI=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},pw=e=>{const t=parseFloat(e);return isNaN(t)?e:t},YI=e=>{const t=Tr(e)?Number(e):NaN;return isNaN(t)?e:t};let UD;const QI=()=>UD||(UD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Eb(e){if(et(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],s=Tr(n)?Wj(n):Eb(n);if(s)for(const i in s)t[i]=s[i]}return t}else if(Tr(e)||pr(e))return e}const Vj=/;(?![^(]*\))/g,Hj=/:([^]+)/,zj=/\/\*[^]*?\*\//g;function Wj(e){const t={};return e.replace(zj,"").split(Vj).forEach(r=>{if(r){const n=r.split(Hj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ab(e){let t="";if(Tr(e))t=e;else if(et(e))for(let r=0;r<e.length;r++){const n=Ab(e[r]);n&&(t+=n+" ")}else if(pr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Jj(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Tr(t)&&(e.class=Ab(t)),r&&(e.style=Eb(r)),e}const Gj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xj=sS(Gj);function eB(e){return!!e||e===""}function Zj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=vf(e[n],t[n]);return r}function vf(e,t){if(e===t)return!0;let r=jD(e),n=jD(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Ba(e),n=Ba(t),r||n)return e===t;if(r=et(e),n=et(t),r||n)return r&&n?Zj(e,t):!1;if(r=pr(e),n=pr(t),r||n){if(!r||!n)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!vf(e[o],t[o]))return!1}}return String(e)===String(t)}function cS(e,t){return e.findIndex(r=>vf(r,t))}const tB=e=>!!(e&&e.__v_isRef===!0),Yj=e=>Tr(e)?e:e==null?"":et(e)||pr(e)&&(e.toString===GI||!pt(e.toString))?tB(e)?Yj(e.value):JSON.stringify(e,rB,2):String(e),rB=(e,t)=>tB(t)?rB(e,t.value):xp(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,s],i)=>(r[I1(n,i)+" =>"]=s,r),{})}:ch(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>I1(r))}:Ba(t)?I1(t):pr(t)&&!et(t)&&!XI(t)?String(t):t,I1=(e,t="")=>{var r;return Ba(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let es;class nB{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=es,!t&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=es;try{return es=this,t()}finally{es=r}}}on(){es=this}off(){es=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Qj(e){return new nB(e)}function iB(){return es}let yr;const B1=new WeakSet;class sB{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,es&&es.active&&es.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,B1.has(this)&&(B1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Yy,Yy=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,KD(this),aB(this);const t=yr,r=Co;yr=this,Co=!0;try{return this.fn()}finally{uB(this),yr=t,Co=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fS(t);this.deps=this.depsTail=void 0,KD(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?B1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){JE(this)&&this.run()}get dirty(){return JE(this)}}let oB=0,Yy;function lS(){oB++}function dS(){if(--oB>0)return;let e;for(;Yy;){let t=Yy;for(Yy=void 0;t;){const r=t.nextEffect;if(t.nextEffect=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function aB(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function uB(e){let t,r=e.depsTail;for(let n=r;n;n=n.prevDep)n.version===-1?(n===r&&(r=n.prevDep),fS(n),e9(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0;e.deps=t,e.depsTail=r}function JE(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&cB(t.dep.computed)||t.dep.version!==t.version)return!0;return!!e._dirty}function cB(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cm))return;e.globalVersion=Cm;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&!JE(e)){e.flags&=-3;return}const r=yr,n=Co;yr=e,Co=!0;try{aB(e);const s=e.fn(e._value);(t.version===0||Cl(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{yr=r,Co=n,uB(e),e.flags&=-3}}function fS(e){const{dep:t,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r),!t.subs&&t.computed){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)fS(s)}}function e9(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let Co=!0;const lB=[];function Rl(){lB.push(Co),Co=!1}function Ml(){const e=lB.pop();Co=e===void 0?!0:e}function KD(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=yr;yr=void 0;try{t()}finally{yr=r}}}let Cm=0;class pS{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0}track(t){if(!yr||!Co||yr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==yr)r=this.activeLink={dep:this,sub:yr,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},yr.deps?(r.prevDep=yr.depsTail,yr.depsTail.nextDep=r,yr.depsTail=r):yr.deps=yr.depsTail=r,yr.flags&4&&dB(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=yr.depsTail,r.nextDep=void 0,yr.depsTail.nextDep=r,yr.depsTail=r,yr.deps===r&&(yr.deps=n)}return r}trigger(t){this.version++,Cm++,this.notify(t)}notify(t){lS();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()}finally{dS()}}}function dB(e){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)dB(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}const hw=new WeakMap,Yd=Symbol(""),GE=Symbol(""),Pm=Symbol("");function ci(e,t,r){if(Co&&yr){let n=hw.get(e);n||hw.set(e,n=new Map);let s=n.get(r);s||n.set(r,s=new pS),s.track()}}function Lu(e,t,r,n,s,i){const o=hw.get(e);if(!o){Cm++;return}const a=c=>{c&&c.trigger()};if(lS(),t==="clear")o.forEach(a);else{const c=et(e),l=c&&uS(r);if(c&&r==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===Pm||!Ba(h)&&h>=u)&&a(d)})}else switch(r!==void 0&&a(o.get(r)),l&&a(o.get(Pm)),t){case"add":c?l&&a(o.get("length")):(a(o.get(Yd)),xp(e)&&a(o.get(GE)));break;case"delete":c||(a(o.get(Yd)),xp(e)&&a(o.get(GE)));break;case"set":xp(e)&&a(o.get(Yd));break}}dS()}function t9(e,t){var r;return(r=hw.get(e))==null?void 0:r.get(t)}function Lf(e){const t=Ht(e);return t===e?t:(ci(t,"iterate",Pm),Ws(e)?t:t.map(ai))}function Sb(e){return ci(e=Ht(e),"iterate",Pm),e}const r9={__proto__:null,[Symbol.iterator](){return F1(this,Symbol.iterator,ai)},concat(...e){return Lf(this).concat(...e.map(t=>et(t)?Lf(t):t))},entries(){return F1(this,"entries",e=>(e[1]=ai(e[1]),e))},every(e,t){return Za(this,"every",e,t,void 0,arguments)},filter(e,t){return Za(this,"filter",e,t,r=>r.map(ai),arguments)},find(e,t){return Za(this,"find",e,t,ai,arguments)},findIndex(e,t){return Za(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Za(this,"findLast",e,t,ai,arguments)},findLastIndex(e,t){return Za(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Za(this,"forEach",e,t,void 0,arguments)},includes(...e){return N1(this,"includes",e)},indexOf(...e){return N1(this,"indexOf",e)},join(e){return Lf(this).join(e)},lastIndexOf(...e){return N1(this,"lastIndexOf",e)},map(e,t){return Za(this,"map",e,t,void 0,arguments)},pop(){return Ph(this,"pop")},push(...e){return Ph(this,"push",e)},reduce(e,...t){return LD(this,"reduce",e,t)},reduceRight(e,...t){return LD(this,"reduceRight",e,t)},shift(){return Ph(this,"shift")},some(e,t){return Za(this,"some",e,t,void 0,arguments)},splice(...e){return Ph(this,"splice",e)},toReversed(){return Lf(this).toReversed()},toSorted(e){return Lf(this).toSorted(e)},toSpliced(...e){return Lf(this).toSpliced(...e)},unshift(...e){return Ph(this,"unshift",e)},values(){return F1(this,"values",ai)}};function F1(e,t,r){const n=Sb(e),s=n[t]();return n!==e&&!Ws(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const n9=Array.prototype;function Za(e,t,r,n,s,i){const o=Sb(e),a=o!==e&&!Ws(e),c=o[t];if(c!==n9[t]){const d=c.apply(e,i);return a?ai(d):d}let l=r;o!==e&&(a?l=function(d,h){return r.call(this,ai(d),h,e)}:r.length>2&&(l=function(d,h){return r.call(this,d,h,e)}));const u=c.call(o,l,n);return a&&s?s(u):u}function LD(e,t,r,n){const s=Sb(e);let i=r;return s!==e&&(Ws(e)?r.length>3&&(i=function(o,a,c){return r.call(this,o,a,c,e)}):i=function(o,a,c){return r.call(this,o,ai(a),c,e)}),s[t](i,...n)}function N1(e,t,r){const n=Ht(e);ci(n,"iterate",Pm);const s=n[t](...r);return(s===-1||s===!1)&&gS(r[0])?(r[0]=Ht(r[0]),n[t](...r)):s}function Ph(e,t,r=[]){Rl(),lS();const n=Ht(e)[t].apply(e,r);return dS(),Ml(),n}const i9=sS("__proto__,__v_isRef,__isVue"),fB=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ba));function s9(e){Ba(e)||(e=String(e));const t=Ht(this);return ci(t,"has",e),t.hasOwnProperty(e)}class pB{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?v9:gB:i?mB:yB).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=et(t);if(!s){let c;if(o&&(c=r9[r]))return c;if(r==="hasOwnProperty")return s9}const a=Reflect.get(t,r,kn(t)?t:n);return(Ba(r)?fB.has(r):i9(r))||(s||ci(t,"get",r),i)?a:kn(a)?o&&uS(r)?a:a.value:pr(a)?s?vB(a):tc(a):a}}class hB extends pB{constructor(t=!1){super(!1,t)}set(t,r,n,s){let i=t[r];if(!this._isShallow){const c=Pl(i);if(!Ws(n)&&!Pl(n)&&(i=Ht(i),n=Ht(n)),!et(t)&&kn(i)&&!kn(n))return c?!1:(i.value=n,!0)}const o=et(t)&&uS(r)?Number(r)<t.length:nr(t,r),a=Reflect.set(t,r,n,kn(t)?t:s);return t===Ht(s)&&(o?Cl(n,i)&&Lu(t,"set",r,n):Lu(t,"add",r,n)),a}deleteProperty(t,r){const n=nr(t,r);t[r];const s=Reflect.deleteProperty(t,r);return s&&n&&Lu(t,"delete",r,void 0),s}has(t,r){const n=Reflect.has(t,r);return(!Ba(r)||!fB.has(r))&&ci(t,"has",r),n}ownKeys(t){return ci(t,"iterate",et(t)?"length":Yd),Reflect.ownKeys(t)}}class o9 extends pB{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const a9=new hB,u9=new o9,c9=new hB(!0);const hS=e=>e,xb=e=>Reflect.getPrototypeOf(e);function G0(e,t,r=!1,n=!1){e=e.__v_raw;const s=Ht(e),i=Ht(t);r||(Cl(t,i)&&ci(s,"get",t),ci(s,"get",i));const{has:o}=xb(s),a=n?hS:r?vS:ai;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function X0(e,t=!1){const r=this.__v_raw,n=Ht(r),s=Ht(e);return t||(Cl(e,s)&&ci(n,"has",e),ci(n,"has",s)),e===s?r.has(e):r.has(e)||r.has(s)}function Z0(e,t=!1){return e=e.__v_raw,!t&&ci(Ht(e),"iterate",Yd),Reflect.get(e,"size",e)}function qD(e,t=!1){!t&&!Ws(e)&&!Pl(e)&&(e=Ht(e));const r=Ht(this);return xb(r).has.call(r,e)||(r.add(e),Lu(r,"add",e,e)),this}function VD(e,t,r=!1){!r&&!Ws(t)&&!Pl(t)&&(t=Ht(t));const n=Ht(this),{has:s,get:i}=xb(n);let o=s.call(n,e);o||(e=Ht(e),o=s.call(n,e));const a=i.call(n,e);return n.set(e,t),o?Cl(t,a)&&Lu(n,"set",e,t):Lu(n,"add",e,t),this}function HD(e){const t=Ht(this),{has:r,get:n}=xb(t);let s=r.call(t,e);s||(e=Ht(e),s=r.call(t,e)),n&&n.call(t,e);const i=t.delete(e);return s&&Lu(t,"delete",e,void 0),i}function zD(){const e=Ht(this),t=e.size!==0,r=e.clear();return t&&Lu(e,"clear",void 0,void 0),r}function Y0(e,t){return function(n,s){const i=this,o=i.__v_raw,a=Ht(o),c=t?hS:e?vS:ai;return!e&&ci(a,"iterate",Yd),o.forEach((l,u)=>n.call(s,c(l),c(u),i))}}function Q0(e,t,r){return function(...n){const s=this.__v_raw,i=Ht(s),o=xp(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...n),u=r?hS:t?vS:ai;return!t&&ci(i,"iterate",c?GE:Yd),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function cc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function l9(){const e={get(i){return G0(this,i)},get size(){return Z0(this)},has:X0,add:qD,set:VD,delete:HD,clear:zD,forEach:Y0(!1,!1)},t={get(i){return G0(this,i,!1,!0)},get size(){return Z0(this)},has:X0,add(i){return qD.call(this,i,!0)},set(i,o){return VD.call(this,i,o,!0)},delete:HD,clear:zD,forEach:Y0(!1,!0)},r={get(i){return G0(this,i,!0)},get size(){return Z0(this,!0)},has(i){return X0.call(this,i,!0)},add:cc("add"),set:cc("set"),delete:cc("delete"),clear:cc("clear"),forEach:Y0(!0,!1)},n={get(i){return G0(this,i,!0,!0)},get size(){return Z0(this,!0)},has(i){return X0.call(this,i,!0)},add:cc("add"),set:cc("set"),delete:cc("delete"),clear:cc("clear"),forEach:Y0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Q0(i,!1,!1),r[i]=Q0(i,!0,!1),t[i]=Q0(i,!1,!0),n[i]=Q0(i,!0,!0)}),[e,r,t,n]}const[d9,f9,p9,h9]=l9();function yS(e,t){const r=t?e?h9:p9:e?f9:d9;return(n,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(nr(r,s)&&s in n?r:n,s,i)}const y9={get:yS(!1,!1)},m9={get:yS(!1,!0)},g9={get:yS(!0,!1)};const yB=new WeakMap,mB=new WeakMap,gB=new WeakMap,v9=new WeakMap;function w9(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function b9(e){return e.__v_skip||!Object.isExtensible(e)?0:w9(Kj(e))}function tc(e){return Pl(e)?e:mS(e,!1,a9,y9,yB)}function Uu(e){return mS(e,!1,c9,m9,mB)}function vB(e){return mS(e,!0,u9,g9,gB)}function mS(e,t,r,n,s){if(!pr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=b9(e);if(o===0)return e;const a=new Proxy(e,o===2?n:r);return s.set(e,a),a}function Qd(e){return Pl(e)?Qd(e.__v_raw):!!(e&&e.__v_isReactive)}function Pl(e){return!!(e&&e.__v_isReadonly)}function Ws(e){return!!(e&&e.__v_isShallow)}function gS(e){return e?!!e.__v_raw:!1}function Ht(e){const t=e&&e.__v_raw;return t?Ht(t):e}function _9(e){return!nr(e,"__v_skip")&&Object.isExtensible(e)&&ZI(e,"__v_skip",!0),e}const ai=e=>pr(e)?tc(e):e,vS=e=>pr(e)?vB(e):e;function kn(e){return e?e.__v_isRef===!0:!1}function Da(e){return wB(e,!1)}function km(e){return wB(e,!0)}function wB(e,t){return kn(e)?e:new E9(e,t)}class E9{constructor(t,r){this.dep=new pS,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Ht(t),this._value=r?t:ai(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Ws(t)||Pl(t);t=n?t:Ht(t),Cl(t,r)&&(this._rawValue=t,this._value=n?t:ai(t),this.dep.trigger())}}function Or(e){return kn(e)?e.value:e}const A9={get:(e,t,r)=>t==="__v_raw"?e:Or(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const s=e[t];return kn(s)&&!kn(r)?(s.value=r,!0):Reflect.set(e,t,r,n)}};function bB(e){return Qd(e)?e:new Proxy(e,A9)}class S9{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return t9(Ht(this._object),this._key)}}class x9{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $9(e,t,r){return kn(e)?e:pt(e)?new x9(e):pr(e)&&arguments.length>1?D9(e,t,r):Da(e)}function D9(e,t,r){const n=e[t];return kn(n)?n:new S9(e,t,r)}class C9{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new pS(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cm-1,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){this.flags|=16,yr!==this&&this.dep.notify()}get value(){const t=this.dep.track();return cB(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function P9(e,t,r=!1){let n,s;return pt(e)?n=e:(n=e.get,s=e.set),new C9(n,s,r)}const eg={},yw=new WeakMap;let Sd;function k9(e,t=!1,r=Sd){if(r){let n=yw.get(r);n||yw.set(r,n=[]),n.push(e)}}function O9(e,t,r=gr){const{immediate:n,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=r,l=m=>s?m:Ws(m)||s===!1||s===0?Fu(m,1):Fu(m);let u,d,h,f,p=!1,y=!1;if(kn(e)?(d=()=>e.value,p=Ws(e)):Qd(e)?(d=()=>l(e),p=!0):et(e)?(y=!0,p=e.some(m=>Qd(m)||Ws(m)),d=()=>e.map(m=>{if(kn(m))return m.value;if(Qd(m))return l(m);if(pt(m))return c?c(m,2):m()})):pt(e)?t?d=c?()=>c(e,2):e:d=()=>{if(h){Rl();try{h()}finally{Ml()}}const m=Sd;Sd=u;try{return c?c(e,3,[f]):e(f)}finally{Sd=m}}:d=$a,t&&s){const m=d,w=s===!0?1/0:s;d=()=>Fu(m(),w)}const _=iB(),b=()=>{u.stop(),_&&aS(_.effects,u)};if(i)if(t){const m=t;t=(...w)=>{m(...w),b()}}else{const m=d;d=()=>{m(),b()}}let v=y?new Array(e.length).fill(eg):eg;const g=m=>{if(!(!(u.flags&1)||!u.dirty&&!m))if(t){const w=u.run();if(s||p||(y?w.some((x,S)=>Cl(x,v[S])):Cl(w,v))){h&&h();const x=Sd;Sd=u;try{const S=[w,v===eg?void 0:y&&v[0]===eg?[]:v,f];c?c(t,3,S):t(...S),v=w}finally{Sd=x}}}else u.run()};return a&&a(g),u=new sB(d),u.scheduler=o?()=>o(g,!1):g,f=m=>k9(m,!1,u),h=u.onStop=()=>{const m=yw.get(u);if(m){if(c)c(m,4);else for(const w of m)w();yw.delete(u)}},t?n?g(!0):v=u.run():o?o(g.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function Fu(e,t=1/0,r){if(t<=0||!pr(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,kn(e))Fu(e.value,t,r);else if(et(e))for(let n=0;n<e.length;n++)Fu(e[n],t,r);else if(ch(e)||xp(e))e.forEach(n=>{Fu(n,t,r)});else if(XI(e)){for(const n in e)Fu(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Fu(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function h0(e,t,r,n){try{return n?e(...n):e()}catch(s){dh(s,t,r)}}function Io(e,t,r,n){if(pt(e)){const s=h0(e,t,r,n);return s&&JI(s)&&s.catch(i=>{dh(i,t,r)}),s}if(et(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Io(e[i],t,r,n));return s}}function dh(e,t,r,n=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||gr;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,c,l)===!1)return}a=a.parent}if(i){Rl(),h0(i,null,10,[e,c,l]),Ml();return}}T9(e,r,s,n,o)}function T9(e,t,r,n=!0,s=!1){if(s)throw e;console.error(e)}let Om=!1,XE=!1;const _i=[];let aa=0;const Cp=[];let el=null,op=0;const _B=Promise.resolve();let wS=null;function fh(e){const t=wS||_B;return e?t.then(this?e.bind(this):e):t}function I9(e){let t=Om?aa+1:0,r=_i.length;for(;t<r;){const n=t+r>>>1,s=_i[n],i=Tm(s);i<e||i===e&&s.flags&2?t=n+1:r=n}return t}function $b(e){if(!(e.flags&1)){const t=Tm(e),r=_i[_i.length-1];!r||!(e.flags&2)&&t>=Tm(r)?_i.push(e):_i.splice(I9(t),0,e),e.flags|=1,EB()}}function EB(){!Om&&!XE&&(XE=!0,wS=_B.then(AB))}function ZE(e){et(e)?Cp.push(...e):el&&e.id===-1?el.splice(op+1,0,e):e.flags&1||(Cp.push(e),e.flags|=1),EB()}function WD(e,t,r=Om?aa+1:0){for(;r<_i.length;r++){const n=_i[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;_i.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&=-2}}}function mw(e){if(Cp.length){const t=[...new Set(Cp)].sort((r,n)=>Tm(r)-Tm(n));if(Cp.length=0,el){el.push(...t);return}for(el=t,op=0;op<el.length;op++){const r=el[op];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}el=null,op=0}}const Tm=e=>e.id==null?e.flags&2?-1:1/0:e.id;function AB(e){XE=!1,Om=!0;try{for(aa=0;aa<_i.length;aa++){const t=_i[aa];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),h0(t,t.i,t.i?15:14),t.flags&=-2)}}finally{for(;aa<_i.length;aa++){const t=_i[aa];t&&(t.flags&=-2)}aa=0,_i.length=0,mw(),Om=!1,wS=null,(_i.length||Cp.length)&&AB()}}let Ei=null,SB=null;function gw(e){const t=Ei;return Ei=e,SB=e&&e.type.__scopeId||null,t}function xB(e,t=Ei,r){if(!t||e._n)return e;const n=(...s)=>{n._d&&o5(-1);const i=gw(t);let o;try{o=e(...s)}finally{gw(i),n._d&&o5(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Kve(e,t){if(Ei===null)return e;const r=Tb(Ei),n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=gr]=t[s];i&&(pt(i)&&(i={mounted:i,updated:i}),i.deep&&Fu(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function la(e,t,r,n){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[n];c&&(Rl(),Io(c,r,8,[e.el,a,e,t]),Ml())}}const B9=Symbol("_vte"),$B=e=>e.__isTeleport,tl=Symbol("_leaveCb"),tg=Symbol("_enterCb");function F9(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cb(()=>{e.isMounted=!0}),Pb(()=>{e.isUnmounting=!0}),e}const _s=[Function,Array],DB={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_s,onEnter:_s,onAfterEnter:_s,onEnterCancelled:_s,onBeforeLeave:_s,onLeave:_s,onAfterLeave:_s,onLeaveCancelled:_s,onBeforeAppear:_s,onAppear:_s,onAfterAppear:_s,onAppearCancelled:_s},CB=e=>{const t=e.subTree;return t.component?CB(t.component):t},N9={name:"BaseTransition",props:DB,setup(e,{slots:t}){const r=Ob(),n=F9();return()=>{const s=t.default&&OB(t.default(),!0);if(!s||!s.length)return;const i=PB(s),o=Ht(e),{mode:a}=o;if(n.isLeaving)return R1(i);const c=JD(i);if(!c)return R1(i);let l=YE(c,o,n,r,h=>l=h);c.type!==Dn&&Up(c,l);const u=r.subTree,d=u&&JD(u);if(d&&d.type!==Dn&&!_o(c,d)&&CB(r).type!==Dn){const h=YE(d,o,n,r);if(Up(d,h),a==="out-in"&&c.type!==Dn)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave},R1(i);a==="in-out"&&c.type!==Dn&&(h.delayLeave=(f,p,y)=>{const _=kB(n,d);_[String(d.key)]=d,f[tl]=()=>{p(),f[tl]=void 0,delete l.delayedLeave},l.delayedLeave=y})}return i}}};function PB(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Dn){t=r;break}}return t}const R9=N9;function kB(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function YE(e,t,r,n,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:y,onBeforeAppear:_,onAppear:b,onAfterAppear:v,onAppearCancelled:g}=t,m=String(e.key),w=kB(r,e),x=(A,$)=>{A&&Io(A,n,9,$)},S=(A,$)=>{const I=$[1];x(A,$),et(A)?A.every(T=>T.length<=1)&&I():A.length<=1&&I()},E={mode:o,persisted:a,beforeEnter(A){let $=c;if(!r.isMounted)if(i)$=_||c;else return;A[tl]&&A[tl](!0);const I=w[m];I&&_o(e,I)&&I.el[tl]&&I.el[tl](),x($,[A])},enter(A){let $=l,I=u,T=d;if(!r.isMounted)if(i)$=b||l,I=v||u,T=g||d;else return;let R=!1;const L=A[tg]=j=>{R||(R=!0,j?x(T,[A]):x(I,[A]),E.delayedLeave&&E.delayedLeave(),A[tg]=void 0)};$?S($,[A,L]):L()},leave(A,$){const I=String(e.key);if(A[tg]&&A[tg](!0),r.isUnmounting)return $();x(h,[A]);let T=!1;const R=A[tl]=L=>{T||(T=!0,$(),L?x(y,[A]):x(p,[A]),A[tl]=void 0,w[I]===e&&delete w[I])};w[I]=e,f?S(f,[A,R]):R()},clone(A){const $=YE(A,t,r,n,s);return s&&s($),$}};return E}function R1(e){if(y0(e))return e=Wu(e),e.children=null,e}function JD(e){if(!y0(e))return $B(e.type)&&e.children?PB(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&pt(r.default))return r.default()}}function Up(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Up(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function OB(e,t=!1,r){let n=[],s=0;for(let i=0;i<e.length;i++){let o=e[i];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===ss?(o.patchFlag&128&&s++,n=n.concat(OB(o.children,t,a))):(t||o.type!==Dn)&&n.push(a!=null?Wu(o,{key:a}):o)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function ph(e,t){return pt(e)?mn({name:e.name},t,{setup:e}):e}function bS(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function vw(e,t,r,n,s=!1){if(et(e)){e.forEach((p,y)=>vw(p,t&&(et(t)?t[y]:t),r,n,s));return}if(ef(n)&&!s)return;const i=n.shapeFlag&4?Tb(n.component):n.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===gr?a.refs={}:a.refs,d=a.setupState,h=Ht(d),f=d===gr?()=>!1:p=>nr(h,p);if(l!=null&&l!==c&&(Tr(l)?(u[l]=null,f(l)&&(d[l]=null)):kn(l)&&(l.value=null)),pt(c))h0(c,a,12,[o,u]);else{const p=Tr(c),y=kn(c);if(p||y){const _=()=>{if(e.f){const b=p?f(c)?d[c]:u[c]:c.value;s?et(b)&&aS(b,i):et(b)?b.includes(i)||b.push(i):p?(u[c]=[i],f(c)&&(d[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else p?(u[c]=o,f(c)&&(d[c]=o)):y&&(c.value=o,e.k&&(u[e.k]=o))};o?(_.id=-1,Wn(_,r)):_()}}}let GD=!1;const qf=()=>{GD||(console.error("Hydration completed but contains mismatches."),GD=!0)},M9=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",j9=e=>e.namespaceURI.includes("MathML"),rg=e=>{if(e.nodeType===1){if(M9(e))return"svg";if(j9(e))return"mathml"}},gp=e=>e.nodeType===8;function U9(e){const{mt:t,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=e,u=(g,m)=>{if(!m.hasChildNodes()){r(null,g,m),mw(),m._vnode=g;return}d(m.firstChild,g,null,null,null),mw(),m._vnode=g},d=(g,m,w,x,S,E=!1)=>{E=E||!!m.dynamicChildren;const A=gp(g)&&g.data==="[",$=()=>y(g,m,w,x,S,A),{type:I,ref:T,shapeFlag:R,patchFlag:L}=m;let j=g.nodeType;m.el=g,L===-2&&(E=!1,m.dynamicChildren=null);let U=null;switch(I){case nf:j!==3?m.children===""?(c(m.el=s(""),o(g),g),U=g):U=$():(g.data!==m.children&&(qf(),g.data=m.children),U=i(g));break;case Dn:v(g)?(U=i(g),b(m.el=g.content.firstChild,g,w)):j!==8||A?U=$():U=i(g);break;case em:if(A&&(g=i(g),j=g.nodeType),j===1||j===3){U=g;const te=!m.children.length;for(let z=0;z<m.staticCount;z++)te&&(m.children+=U.nodeType===1?U.outerHTML:U.data),z===m.staticCount-1&&(m.anchor=U),U=i(U);return A?i(U):U}else $();break;case ss:A?U=p(g,m,w,x,S,E):U=$();break;default:if(R&1)(j!==1||m.type.toLowerCase()!==g.tagName.toLowerCase())&&!v(g)?U=$():U=h(g,m,w,x,S,E);else if(R&6){m.slotScopeIds=S;const te=o(g);if(A?U=_(g):gp(g)&&g.data==="teleport start"?U=_(g,g.data,"teleport end"):U=i(g),t(m,te,null,w,x,rg(te),E),ef(m)){let z;A?(z=Kr(ss),z.anchor=U?U.previousSibling:te.lastChild):z=g.nodeType===3?h8(""):Kr("div"),z.el=g,m.component.subTree=z}}else R&64?j!==8?U=$():U=m.type.hydrate(g,m,w,x,S,E,e,f):R&128&&(U=m.type.hydrate(g,m,w,x,rg(o(g)),S,E,e,d))}return T!=null&&vw(T,null,x,m),U},h=(g,m,w,x,S,E)=>{E=E||!!m.dynamicChildren;const{type:A,props:$,patchFlag:I,shapeFlag:T,dirs:R,transition:L}=m,j=A==="input"||A==="option";if(j||I!==-1){R&&la(m,null,w,"created");let U=!1;if(v(g)){U=e8(x,L)&&w&&w.vnode.props&&w.vnode.props.appear;const z=g.content.firstChild;U&&L.beforeEnter(z),b(z,g,w),m.el=g=z}if(T&16&&!($&&($.innerHTML||$.textContent))){let z=f(g.firstChild,m,g,w,x,S,E);for(;z;){ng(g,1)||qf();const ee=z;z=z.nextSibling,a(ee)}}else T&8&&g.textContent!==m.children&&(ng(g,0)||qf(),g.textContent=m.children);if($){if(j||!E||I&48){const z=g.tagName.includes("-");for(const ee in $)(j&&(ee.endsWith("value")||ee==="indeterminate")||p0(ee)&&!$p(ee)||ee[0]==="."||z)&&n(g,ee,null,$[ee],void 0,w)}else if($.onClick)n(g,"onClick",null,$.onClick,void 0,w);else if(I&4&&Qd($.style))for(const z in $.style)$.style[z]}let te;(te=$&&$.onVnodeBeforeMount)&&Ni(te,w,m),R&&la(m,null,w,"beforeMount"),((te=$&&$.onVnodeMounted)||R||U)&&a8(()=>{te&&Ni(te,w,m),U&&L.enter(g),R&&la(m,null,w,"mounted")},x)}return g.nextSibling},f=(g,m,w,x,S,E,A)=>{A=A||!!m.dynamicChildren;const $=m.children,I=$.length;for(let T=0;T<I;T++){const R=A?$[T]:$[T]=os($[T]),L=R.type===nf;g?(L&&!A&&T+1<I&&os($[T+1]).type===nf&&(c(s(g.data.slice(R.children.length)),w,i(g)),g.data=R.children),g=d(g,R,x,S,E,A)):L&&!R.children?c(R.el=s(""),w):(ng(w,1)||qf(),r(null,R,w,null,x,S,rg(w),E))}return g},p=(g,m,w,x,S,E)=>{const{slotScopeIds:A}=m;A&&(S=S?S.concat(A):A);const $=o(g),I=f(i(g),m,$,w,x,S,E);return I&&gp(I)&&I.data==="]"?i(m.anchor=I):(qf(),c(m.anchor=l("]"),$,I),I)},y=(g,m,w,x,S,E)=>{if(ng(g.parentElement,1)||qf(),m.el=null,E){const I=_(g);for(;;){const T=i(g);if(T&&T!==I)a(T);else break}}const A=i(g),$=o(g);return a(g),r(null,m,$,A,w,x,rg($),S),A},_=(g,m="[",w="]")=>{let x=0;for(;g;)if(g=i(g),g&&gp(g)&&(g.data===m&&x++,g.data===w)){if(x===0)return i(g);x--}return g},b=(g,m,w)=>{const x=m.parentNode;x&&x.replaceChild(g,m);let S=w;for(;S;)S.vnode.el===m&&(S.vnode.el=S.subTree.el=g),S=S.parent},v=g=>g.nodeType===1&&g.tagName.toLowerCase()==="template";return[u,d]}const XD="data-allow-mismatch",K9={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ng(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(XD);)e=e.parentElement;const r=e&&e.getAttribute(XD);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return t===0&&n.includes("children")?!0:r.split(",").includes(K9[t])}}function L9(e,t){if(gp(e)&&e.data==="["){let r=1,n=e.nextSibling;for(;n;){if(n.nodeType===1)t(n);else if(gp(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else t(e)}const ef=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function ZD(e){pt(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=e;let l=null,u,d=0;const h=()=>(d++,l=null,f()),f=()=>{let p;return l||(p=l=t().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),c)return new Promise((_,b)=>{c(y,()=>_(h()),()=>b(y),d+1)});throw y}).then(y=>p!==l&&l?l:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return ph({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,y,_){const b=i?()=>{const v=i(_,g=>L9(p,g));v&&(y.bum||(y.bum=[])).push(v)}:_;u?b():f().then(()=>!y.isUnmounted&&b())},get __asyncResolved(){return u},setup(){const p=yn;if(bS(p),u)return()=>M1(u,p);const y=g=>{l=null,dh(g,p,13,!n)};if(a&&p.suspense||g0)return f().then(g=>()=>M1(g,p)).catch(g=>(y(g),()=>n?Kr(n,{error:g}):null));const _=Da(!1),b=Da(),v=Da(!!s);return s&&setTimeout(()=>{v.value=!1},s),o!=null&&setTimeout(()=>{if(!_.value&&!b.value){const g=new Error(`Async component timed out after ${o}ms.`);y(g),b.value=g}},o),f().then(()=>{_.value=!0,p.parent&&y0(p.parent.vnode)&&$b(p.parent.update)}).catch(g=>{y(g),b.value=g}),()=>{if(_.value&&u)return M1(u,p);if(b.value&&n)return Kr(n,{error:b.value});if(r&&!v.value)return Kr(r)}}})}function M1(e,t){const{ref:r,props:n,children:s,ce:i}=t.vnode,o=Kr(e,n,s);return o.ref=r,o.ce=i,delete t.vnode.ce,o}const y0=e=>e.type.__isKeepAlive,q9={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=Ob(),n=r.ctx;if(!n.renderer)return()=>{const v=t.default&&t.default();return v&&v.length===1?v[0]:v};const s=new Map,i=new Set;let o=null;const a=r.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:d}}}=n,h=d("div");n.activate=(v,g,m,w,x)=>{const S=v.component;l(v,g,m,0,a),c(S.vnode,v,g,m,S,a,w,v.slotScopeIds,x),Wn(()=>{S.isDeactivated=!1,S.a&&Dp(S.a);const E=v.props&&v.props.onVnodeMounted;E&&Ni(E,S.parent,v)},a)},n.deactivate=v=>{const g=v.component;bw(g.m),bw(g.a),l(v,h,null,1,a),Wn(()=>{g.da&&Dp(g.da);const m=v.props&&v.props.onVnodeUnmounted;m&&Ni(m,g.parent,v),g.isDeactivated=!0},a)};function f(v){j1(v),u(v,r,a,!0)}function p(v){s.forEach((g,m)=>{const w=oA(g.type);w&&!v(w)&&y(m)})}function y(v){const g=s.get(v);g&&(!o||!_o(g,o))?f(g):o&&j1(o),s.delete(v),i.delete(v)}wl(()=>[e.include,e.exclude],([v,g])=>{v&&p(m=>ky(v,m)),g&&p(m=>!ky(g,m))},{flush:"post",deep:!0});let _=null;const b=()=>{_!=null&&(_w(r.subTree.type)?Wn(()=>{s.set(_,ig(r.subTree))},r.subTree.suspense):s.set(_,ig(r.subTree)))};return Cb(b),FB(b),Pb(()=>{s.forEach(v=>{const{subTree:g,suspense:m}=r,w=ig(g);if(v.type===w.type&&v.key===w.key){j1(w);const x=w.component.da;x&&Wn(x,m);return}f(v)})}),()=>{if(_=null,!t.default)return o=null;const v=t.default(),g=v[0];if(v.length>1)return o=null,v;if(!Bm(g)||!(g.shapeFlag&4)&&!(g.shapeFlag&128))return o=null,g;let m=ig(g);if(m.type===Dn)return o=null,m;const w=m.type,x=oA(ef(m)?m.type.__asyncResolved||{}:w),{include:S,exclude:E,max:A}=e;if(S&&(!x||!ky(S,x))||E&&x&&ky(E,x))return m.shapeFlag&=-257,o=m,g;const $=m.key==null?w:m.key,I=s.get($);return m.el&&(m=Wu(m),g.shapeFlag&128&&(g.ssContent=m)),_=$,I?(m.el=I.el,m.component=I.component,m.transition&&Up(m,m.transition),m.shapeFlag|=512,i.delete($),i.add($)):(i.add($),A&&i.size>parseInt(A,10)&&y(i.values().next().value)),m.shapeFlag|=256,o=m,_w(g.type)?g:m}}},V9=q9;function ky(e,t){return et(e)?e.some(r=>ky(r,t)):Tr(e)?e.split(",").includes(t):Uj(e)?(e.lastIndex=0,e.test(t)):!1}function TB(e,t){BB(e,"a",t)}function IB(e,t){BB(e,"da",t)}function BB(e,t,r=yn){const n=e.__wdc||(e.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Db(t,n,r),r){let s=r.parent;for(;s&&s.parent;)y0(s.parent.vnode)&&H9(n,t,r,s),s=s.parent}}function H9(e,t,r,n){const s=Db(t,e,n,!0);NB(()=>{aS(n[t],s)},r)}function j1(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ig(e){return e.shapeFlag&128?e.ssContent:e}function Db(e,t,r=yn,n=!1){if(r){const s=r[e]||(r[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Rl();const a=m0(r),c=Io(t,r,e,o);return a(),Ml(),c});return n?s.unshift(i):s.push(i),i}}const rc=e=>(t,r=yn)=>{(!g0||e==="sp")&&Db(e,(...n)=>t(...n),r)},z9=rc("bm"),Cb=rc("m"),W9=rc("bu"),FB=rc("u"),Pb=rc("bum"),NB=rc("um"),J9=rc("sp"),G9=rc("rtg"),X9=rc("rtc");function RB(e,t=yn){Db("ec",e,t)}const MB="components";function Lve(e,t){return UB(MB,e,!0,t)||e}const jB=Symbol.for("v-ndc");function Z9(e){return Tr(e)?UB(MB,e,!1)||e:e||jB}function UB(e,t,r=!0,n=!1){const s=Ei||yn;if(s){const i=s.type;{const a=oA(i,!1);if(a&&(a===t||a===To(t)||a===_b(To(t))))return i}const o=YD(s[e]||i[e],t)||YD(s.appContext[e],t);return!o&&n?i:o}}function YD(e,t){return e&&(e[t]||e[To(t)]||e[_b(To(t))])}function qve(e,t,r,n){let s;const i=r,o=et(e);if(o||Tr(e)){const a=o&&Qd(e);let c=!1;a&&(c=!Ws(e),e=Sb(e)),s=new Array(e.length);for(let l=0,u=e.length;l<u;l++)s[l]=t(c?ai(e[l]):e[l],l,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(pr(e))if(e[Symbol.iterator])s=Array.from(e,(a,c)=>t(a,c,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];s[c]=t(e[u],u,c,i)}}else s=[];return s}const QE=e=>e?y8(e)?Tb(e):QE(e.parent):null,Qy=mn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>QE(e.parent),$root:e=>QE(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_S(e),$forceUpdate:e=>e.f||(e.f=()=>{$b(e.update)}),$nextTick:e=>e.n||(e.n=fh.bind(e.proxy)),$watch:e=>vU.bind(e)}),U1=(e,t)=>e!==gr&&!e.__isScriptSetup&&nr(e,t),Y9={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return s[t];case 4:return r[t];case 3:return i[t]}else{if(U1(n,t))return o[t]=1,n[t];if(s!==gr&&nr(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&nr(l,t))return o[t]=3,i[t];if(r!==gr&&nr(r,t))return o[t]=4,r[t];eA&&(o[t]=0)}}const u=Qy[t];let d,h;if(u)return t==="$attrs"&&ci(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(r!==gr&&nr(r,t))return o[t]=4,r[t];if(h=c.config.globalProperties,nr(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:s,ctx:i}=e;return U1(s,t)?(s[t]=r,!0):n!==gr&&nr(n,t)?(n[t]=r,!0):nr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!r[o]||e!==gr&&nr(e,o)||U1(t,o)||(a=i[0])&&nr(a,o)||nr(n,o)||nr(Qy,o)||nr(s.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:nr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function QD(e){return et(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let eA=!0;function Q9(e){const t=_S(e),r=e.proxy,n=e.ctx;eA=!1,t.beforeCreate&&e5(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:y,deactivated:_,beforeDestroy:b,beforeUnmount:v,destroyed:g,unmounted:m,render:w,renderTracked:x,renderTriggered:S,errorCaptured:E,serverPrefetch:A,expose:$,inheritAttrs:I,components:T,directives:R,filters:L}=t;if(l&&eU(l,n,null),o)for(const te in o){const z=o[te];pt(z)&&(n[te]=z.bind(r))}if(s){const te=s.call(r,r);pr(te)&&(e.data=tc(te))}if(eA=!0,i)for(const te in i){const z=i[te],ee=pt(z)?z.bind(r,r):pt(z.get)?z.get.bind(r,r):$a,q=!pt(z)&&pt(z.set)?z.set.bind(r):$a,O=Eo({get:ee,set:q});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>O.value,set:Y=>O.value=Y})}if(a)for(const te in a)KB(a[te],n,r,te);if(c){const te=pt(c)?c.call(r):c;Reflect.ownKeys(te).forEach(z=>{rf(z,te[z])})}u&&e5(u,e,"c");function U(te,z){et(z)?z.forEach(ee=>te(ee.bind(r))):z&&te(z.bind(r))}if(U(z9,d),U(Cb,h),U(W9,f),U(FB,p),U(TB,y),U(IB,_),U(RB,E),U(X9,x),U(G9,S),U(Pb,v),U(NB,m),U(J9,A),et($))if($.length){const te=e.exposed||(e.exposed={});$.forEach(z=>{Object.defineProperty(te,z,{get:()=>r[z],set:ee=>r[z]=ee})})}else e.exposed||(e.exposed={});w&&e.render===$a&&(e.render=w),I!=null&&(e.inheritAttrs=I),T&&(e.components=T),R&&(e.directives=R),A&&bS(e)}function eU(e,t,r=$a){et(e)&&(e=tA(e));for(const n in e){const s=e[n];let i;pr(s)?"default"in s?i=zi(s.from||n,s.default,!0):i=zi(s.from||n):i=zi(s),kn(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[n]=i}}function e5(e,t,r){Io(et(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function KB(e,t,r,n){let s=n.includes(".")?n8(r,n):()=>r[n];if(Tr(e)){const i=t[e];pt(i)&&wl(s,i)}else if(pt(e))wl(s,e.bind(r));else if(pr(e))if(et(e))e.forEach(i=>KB(i,t,r,n));else{const i=pt(e.handler)?e.handler.bind(r):t[e.handler];pt(i)&&wl(s,i,e)}}function _S(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!r&&!n?c=t:(c={},s.length&&s.forEach(l=>ww(c,l,o,!0)),ww(c,t,o)),pr(t)&&i.set(t,c),c}function ww(e,t,r,n=!1){const{mixins:s,extends:i}=t;i&&ww(e,i,r,!0),s&&s.forEach(o=>ww(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const a=tU[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const tU={data:t5,props:r5,emits:r5,methods:Oy,computed:Oy,beforeCreate:pi,created:pi,beforeMount:pi,mounted:pi,beforeUpdate:pi,updated:pi,beforeDestroy:pi,beforeUnmount:pi,destroyed:pi,unmounted:pi,activated:pi,deactivated:pi,errorCaptured:pi,serverPrefetch:pi,components:Oy,directives:Oy,watch:nU,provide:t5,inject:rU};function t5(e,t){return t?e?function(){return mn(pt(e)?e.call(this,this):e,pt(t)?t.call(this,this):t)}:t:e}function rU(e,t){return Oy(tA(e),tA(t))}function tA(e){if(et(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function pi(e,t){return e?[...new Set([].concat(e,t))]:t}function Oy(e,t){return e?mn(Object.create(null),e,t):t}function r5(e,t){return e?et(e)&&et(t)?[...new Set([...e,...t])]:mn(Object.create(null),QD(e),QD(t??{})):t}function nU(e,t){if(!e)return t;if(!t)return e;const r=mn(Object.create(null),e);for(const n in t)r[n]=pi(e[n],t[n]);return r}function LB(){return{app:null,config:{isNativeTag:Mj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iU=0;function sU(e,t){return function(n,s=null){pt(n)||(n=mn({},n)),s!=null&&!pr(s)&&(s=null);const i=LB(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:iU++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:g8,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&pt(u.install)?(o.add(u),u.install(l,...d)):pt(u)&&(o.add(u),u(l,...d))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,d){return d?(i.components[u]=d,l):i.components[u]},directive(u,d){return d?(i.directives[u]=d,l):i.directives[u]},mount(u,d,h){if(!c){const f=l._ceVNode||Kr(n,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),d&&t?t(f,u):e(f,u,h),c=!0,l._container=u,u.__vue_app__=l,Tb(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Io(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,d){return i.provides[u]=d,l},runWithContext(u){const d=tf;tf=l;try{return u()}finally{tf=d}}};return l}}let tf=null;function rf(e,t){if(yn){let r=yn.provides;const n=yn.parent&&yn.parent.provides;n===r&&(r=yn.provides=Object.create(n)),r[e]=t}}function zi(e,t,r=!1){const n=yn||Ei;if(n||tf){const s=tf?tf._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return r&&pt(t)?t.call(n&&n.proxy):t}}function qB(){return!!(yn||Ei||tf)}const VB={},HB=()=>Object.create(VB),zB=e=>Object.getPrototypeOf(e)===VB;function oU(e,t,r,n=!1){const s={},i=HB();e.propsDefaults=Object.create(null),WB(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);r?e.props=n?s:Uu(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function aU(e,t,r,n){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=Ht(s),[c]=e.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(kb(e.emitsOptions,h))continue;const f=t[h];if(c)if(nr(i,h))f!==i[h]&&(i[h]=f,l=!0);else{const p=To(h);s[p]=rA(c,a,p,f,e,!1)}else f!==i[h]&&(i[h]=f,l=!0)}}}else{WB(e,t,s,i)&&(l=!0);let u;for(const d in a)(!t||!nr(t,d)&&((u=If(d))===d||!nr(t,u)))&&(c?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=rA(c,a,d,void 0,e,!0)):delete s[d]);if(i!==a)for(const d in i)(!t||!nr(t,d))&&(delete i[d],l=!0)}l&&Lu(e.attrs,"set","")}function WB(e,t,r,n){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if($p(c))continue;const l=t[c];let u;s&&nr(s,u=To(c))?!i||!i.includes(u)?r[u]=l:(a||(a={}))[u]=l:kb(e.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(i){const c=Ht(r),l=a||gr;for(let u=0;u<i.length;u++){const d=i[u];r[d]=rA(s,c,d,l[d],e,!nr(l,d))}}return o}function rA(e,t,r,n,s,i){const o=e[r];if(o!=null){const a=nr(o,"default");if(a&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&pt(c)){const{propsDefaults:l}=s;if(r in l)n=l[r];else{const u=m0(s);n=l[r]=c.call(null,t),u()}}else n=c;s.ce&&s.ce._setProp(r,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===If(r))&&(n=!0))}return n}const uU=new WeakMap;function JB(e,t,r=!1){const n=r?uU:t.propsCache,s=n.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!pt(e)){const u=d=>{c=!0;const[h,f]=JB(d,t,!0);mn(o,h),f&&a.push(...f)};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return pr(e)&&n.set(e,Sp),Sp;if(et(i))for(let u=0;u<i.length;u++){const d=To(i[u]);n5(d)&&(o[d]=gr)}else if(i)for(const u in i){const d=To(u);if(n5(d)){const h=i[u],f=o[d]=et(h)||pt(h)?{type:h}:mn({},h),p=f.type;let y=!1,_=!0;if(et(p))for(let b=0;b<p.length;++b){const v=p[b],g=pt(v)&&v.name;if(g==="Boolean"){y=!0;break}else g==="String"&&(_=!1)}else y=pt(p)&&p.name==="Boolean";f[0]=y,f[1]=_,(y||nr(f,"default"))&&a.push(d)}}const l=[o,a];return pr(e)&&n.set(e,l),l}function n5(e){return e[0]!=="$"&&!$p(e)}const GB=e=>e[0]==="_"||e==="$stable",ES=e=>et(e)?e.map(os):[os(e)],cU=(e,t,r)=>{if(t._n)return t;const n=xB((...s)=>ES(t(...s)),r);return n._c=!1,n},XB=(e,t,r)=>{const n=e._ctx;for(const s in e){if(GB(s))continue;const i=e[s];if(pt(i))t[s]=cU(s,i,n);else if(i!=null){const o=ES(i);t[s]=()=>o}}},ZB=(e,t)=>{const r=ES(t);e.slots.default=()=>r},YB=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},lU=(e,t,r)=>{const n=e.slots=HB();if(e.vnode.shapeFlag&32){const s=t._;s?(YB(n,t,r),r&&ZI(n,"_",s,!0)):XB(t,n)}else t&&ZB(e,t)},dU=(e,t,r)=>{const{vnode:n,slots:s}=e;let i=!0,o=gr;if(n.shapeFlag&32){const a=t._;a?r&&a===1?i=!1:YB(s,t,r):(i=!t.$stable,XB(t,s)),o=t}else t&&(ZB(e,t),o={default:1});if(i)for(const a in s)!GB(a)&&o[a]==null&&delete s[a]},Wn=a8;function fU(e){return QB(e)}function pU(e){return QB(e,U9)}function QB(e,t){const r=QI();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=$a,insertStaticContent:p}=e,y=(F,M,re,N=null,D=null,k=null,X=void 0,se=null,le=!!M.dynamicChildren)=>{if(F===M)return;F&&!_o(F,M)&&(N=Q(F),Y(F,D,k,!0),F=null),M.patchFlag===-2&&(le=!1,M.dynamicChildren=null);const{type:ue,ref:Ae,shapeFlag:ye}=M;switch(ue){case nf:_(F,M,re,N);break;case Dn:b(F,M,re,N);break;case em:F==null&&v(M,re,N,X);break;case ss:T(F,M,re,N,D,k,X,se,le);break;default:ye&1?w(F,M,re,N,D,k,X,se,le):ye&6?R(F,M,re,N,D,k,X,se,le):(ye&64||ye&128)&&ue.process(F,M,re,N,D,k,X,se,le,he)}Ae!=null&&D&&vw(Ae,F&&F.ref,k,M||F,!M)},_=(F,M,re,N)=>{if(F==null)n(M.el=a(M.children),re,N);else{const D=M.el=F.el;M.children!==F.children&&l(D,M.children)}},b=(F,M,re,N)=>{F==null?n(M.el=c(M.children||""),re,N):M.el=F.el},v=(F,M,re,N)=>{[F.el,F.anchor]=p(F.children,M,re,N,F.el,F.anchor)},g=({el:F,anchor:M},re,N)=>{let D;for(;F&&F!==M;)D=h(F),n(F,re,N),F=D;n(M,re,N)},m=({el:F,anchor:M})=>{let re;for(;F&&F!==M;)re=h(F),s(F),F=re;s(M)},w=(F,M,re,N,D,k,X,se,le)=>{M.type==="svg"?X="svg":M.type==="math"&&(X="mathml"),F==null?x(M,re,N,D,k,X,se,le):A(F,M,D,k,X,se,le)},x=(F,M,re,N,D,k,X,se)=>{let le,ue;const{props:Ae,shapeFlag:ye,transition:V,dirs:W}=F;if(le=F.el=o(F.type,k,Ae&&Ae.is,Ae),ye&8?u(le,F.children):ye&16&&E(F.children,le,null,N,D,K1(F,k),X,se),W&&la(F,null,N,"created"),S(le,F,F.scopeId,X,N),Ae){for(const ve in Ae)ve!=="value"&&!$p(ve)&&i(le,ve,null,Ae[ve],k,N);"value"in Ae&&i(le,"value",null,Ae.value,k),(ue=Ae.onVnodeBeforeMount)&&Ni(ue,N,F)}W&&la(F,null,N,"beforeMount");const pe=e8(D,V);pe&&V.beforeEnter(le),n(le,M,re),((ue=Ae&&Ae.onVnodeMounted)||pe||W)&&Wn(()=>{ue&&Ni(ue,N,F),pe&&V.enter(le),W&&la(F,null,N,"mounted")},D)},S=(F,M,re,N,D)=>{if(re&&f(F,re),N)for(let k=0;k<N.length;k++)f(F,N[k]);if(D){let k=D.subTree;if(M===k||_w(k.type)&&(k.ssContent===M||k.ssFallback===M)){const X=D.vnode;S(F,X,X.scopeId,X.slotScopeIds,D.parent)}}},E=(F,M,re,N,D,k,X,se,le=0)=>{for(let ue=le;ue<F.length;ue++){const Ae=F[ue]=se?rl(F[ue]):os(F[ue]);y(null,Ae,M,re,N,D,k,X,se)}},A=(F,M,re,N,D,k,X)=>{const se=M.el=F.el;let{patchFlag:le,dynamicChildren:ue,dirs:Ae}=M;le|=F.patchFlag&16;const ye=F.props||gr,V=M.props||gr;let W;if(re&&Zl(re,!1),(W=V.onVnodeBeforeUpdate)&&Ni(W,re,M,F),Ae&&la(M,F,re,"beforeUpdate"),re&&Zl(re,!0),(ye.innerHTML&&V.innerHTML==null||ye.textContent&&V.textContent==null)&&u(se,""),ue?$(F.dynamicChildren,ue,se,re,N,K1(M,D),k):X||z(F,M,se,null,re,N,K1(M,D),k,!1),le>0){if(le&16)I(se,ye,V,re,D);else if(le&2&&ye.class!==V.class&&i(se,"class",null,V.class,D),le&4&&i(se,"style",ye.style,V.style,D),le&8){const pe=M.dynamicProps;for(let ve=0;ve<pe.length;ve++){const xe=pe[ve],ht=ye[xe],wt=V[xe];(wt!==ht||xe==="value")&&i(se,xe,ht,wt,D,re)}}le&1&&F.children!==M.children&&u(se,M.children)}else!X&&ue==null&&I(se,ye,V,re,D);((W=V.onVnodeUpdated)||Ae)&&Wn(()=>{W&&Ni(W,re,M,F),Ae&&la(M,F,re,"updated")},N)},$=(F,M,re,N,D,k,X)=>{for(let se=0;se<M.length;se++){const le=F[se],ue=M[se],Ae=le.el&&(le.type===ss||!_o(le,ue)||le.shapeFlag&70)?d(le.el):re;y(le,ue,Ae,null,N,D,k,X,!0)}},I=(F,M,re,N,D)=>{if(M!==re){if(M!==gr)for(const k in M)!$p(k)&&!(k in re)&&i(F,k,M[k],null,D,N);for(const k in re){if($p(k))continue;const X=re[k],se=M[k];X!==se&&k!=="value"&&i(F,k,se,X,D,N)}"value"in re&&i(F,"value",M.value,re.value,D)}},T=(F,M,re,N,D,k,X,se,le)=>{const ue=M.el=F?F.el:a(""),Ae=M.anchor=F?F.anchor:a("");let{patchFlag:ye,dynamicChildren:V,slotScopeIds:W}=M;W&&(se=se?se.concat(W):W),F==null?(n(ue,re,N),n(Ae,re,N),E(M.children||[],re,Ae,D,k,X,se,le)):ye>0&&ye&64&&V&&F.dynamicChildren?($(F.dynamicChildren,V,re,D,k,X,se),(M.key!=null||D&&M===D.subTree)&&t8(F,M,!0)):z(F,M,re,Ae,D,k,X,se,le)},R=(F,M,re,N,D,k,X,se,le)=>{M.slotScopeIds=se,F==null?M.shapeFlag&512?D.ctx.activate(M,re,N,X,le):L(M,re,N,D,k,X,le):j(F,M,le)},L=(F,M,re,N,D,k,X)=>{const se=F.component=FU(F,N,D);if(y0(F)&&(se.ctx.renderer=he),NU(se,!1,X),se.asyncDep){if(D&&D.registerDep(se,U,X),!F.el){const le=se.subTree=Kr(Dn);b(null,le,M,re)}}else U(se,F,M,re,D,k,X)},j=(F,M,re)=>{const N=M.component=F.component;if(SU(F,M,re))if(N.asyncDep&&!N.asyncResolved){te(N,M,re);return}else N.next=M,N.update();else M.el=F.el,N.vnode=M},U=(F,M,re,N,D,k,X)=>{const se=()=>{if(F.isMounted){let{next:ye,bu:V,u:W,parent:pe,vnode:ve}=F;{const jt=r8(F);if(jt){ye&&(ye.el=ve.el,te(F,ye,X)),jt.asyncDep.then(()=>{F.isUnmounted||se()});return}}let xe=ye,ht;Zl(F,!1),ye?(ye.el=ve.el,te(F,ye,X)):ye=ve,V&&Dp(V),(ht=ye.props&&ye.props.onVnodeBeforeUpdate)&&Ni(ht,pe,ye,ve),Zl(F,!0);const wt=L1(F),Rr=F.subTree;F.subTree=wt,y(Rr,wt,d(Rr.el),Q(Rr),F,D,k),ye.el=wt.el,xe===null&&SS(F,wt.el),W&&Wn(W,D),(ht=ye.props&&ye.props.onVnodeUpdated)&&Wn(()=>Ni(ht,pe,ye,ve),D)}else{let ye;const{el:V,props:W}=M,{bm:pe,m:ve,parent:xe,root:ht,type:wt}=F,Rr=ef(M);if(Zl(F,!1),pe&&Dp(pe),!Rr&&(ye=W&&W.onVnodeBeforeMount)&&Ni(ye,xe,M),Zl(F,!0),V&&Ie){const jt=()=>{F.subTree=L1(F),Ie(V,F.subTree,F,D,null)};Rr&&wt.__asyncHydrate?wt.__asyncHydrate(V,F,jt):jt()}else{ht.ce&&ht.ce._injectChildStyle(wt);const jt=F.subTree=L1(F);y(null,jt,re,N,F,D,k),M.el=jt.el}if(ve&&Wn(ve,D),!Rr&&(ye=W&&W.onVnodeMounted)){const jt=M;Wn(()=>Ni(ye,xe,jt),D)}(M.shapeFlag&256||xe&&ef(xe.vnode)&&xe.vnode.shapeFlag&256)&&F.a&&Wn(F.a,D),F.isMounted=!0,M=re=N=null}};F.scope.on();const le=F.effect=new sB(se);F.scope.off();const ue=F.update=le.run.bind(le),Ae=F.job=le.runIfDirty.bind(le);Ae.i=F,Ae.id=F.uid,le.scheduler=()=>$b(Ae),Zl(F,!0),ue()},te=(F,M,re)=>{M.component=F;const N=F.vnode.props;F.vnode=M,F.next=null,aU(F,M.props,N,re),dU(F,M.children,re),Rl(),WD(F),Ml()},z=(F,M,re,N,D,k,X,se,le=!1)=>{const ue=F&&F.children,Ae=F?F.shapeFlag:0,ye=M.children,{patchFlag:V,shapeFlag:W}=M;if(V>0){if(V&128){q(ue,ye,re,N,D,k,X,se,le);return}else if(V&256){ee(ue,ye,re,N,D,k,X,se,le);return}}W&8?(Ae&16&&Z(ue,D,k),ye!==ue&&u(re,ye)):Ae&16?W&16?q(ue,ye,re,N,D,k,X,se,le):Z(ue,D,k,!0):(Ae&8&&u(re,""),W&16&&E(ye,re,N,D,k,X,se,le))},ee=(F,M,re,N,D,k,X,se,le)=>{F=F||Sp,M=M||Sp;const ue=F.length,Ae=M.length,ye=Math.min(ue,Ae);let V;for(V=0;V<ye;V++){const W=M[V]=le?rl(M[V]):os(M[V]);y(F[V],W,re,null,D,k,X,se,le)}ue>Ae?Z(F,D,k,!0,!1,ye):E(M,re,N,D,k,X,se,le,ye)},q=(F,M,re,N,D,k,X,se,le)=>{let ue=0;const Ae=M.length;let ye=F.length-1,V=Ae-1;for(;ue<=ye&&ue<=V;){const W=F[ue],pe=M[ue]=le?rl(M[ue]):os(M[ue]);if(_o(W,pe))y(W,pe,re,null,D,k,X,se,le);else break;ue++}for(;ue<=ye&&ue<=V;){const W=F[ye],pe=M[V]=le?rl(M[V]):os(M[V]);if(_o(W,pe))y(W,pe,re,null,D,k,X,se,le);else break;ye--,V--}if(ue>ye){if(ue<=V){const W=V+1,pe=W<Ae?M[W].el:N;for(;ue<=V;)y(null,M[ue]=le?rl(M[ue]):os(M[ue]),re,pe,D,k,X,se,le),ue++}}else if(ue>V)for(;ue<=ye;)Y(F[ue],D,k,!0),ue++;else{const W=ue,pe=ue,ve=new Map;for(ue=pe;ue<=V;ue++){const Lr=M[ue]=le?rl(M[ue]):os(M[ue]);Lr.key!=null&&ve.set(Lr.key,ue)}let xe,ht=0;const wt=V-pe+1;let Rr=!1,jt=0;const rr=new Array(wt);for(ue=0;ue<wt;ue++)rr[ue]=0;for(ue=W;ue<=ye;ue++){const Lr=F[ue];if(ht>=wt){Y(Lr,D,k,!0);continue}let vt;if(Lr.key!=null)vt=ve.get(Lr.key);else for(xe=pe;xe<=V;xe++)if(rr[xe-pe]===0&&_o(Lr,M[xe])){vt=xe;break}vt===void 0?Y(Lr,D,k,!0):(rr[vt-pe]=ue+1,vt>=jt?jt=vt:Rr=!0,y(Lr,M[vt],re,null,D,k,X,se,le),ht++)}const Ga=Rr?hU(rr):Sp;for(xe=Ga.length-1,ue=wt-1;ue>=0;ue--){const Lr=pe+ue,vt=M[Lr],Mr=Lr+1<Ae?M[Lr+1].el:N;rr[ue]===0?y(null,vt,re,Mr,D,k,X,se,le):Rr&&(xe<0||ue!==Ga[xe]?O(vt,re,Mr,2):xe--)}}},O=(F,M,re,N,D=null)=>{const{el:k,type:X,transition:se,children:le,shapeFlag:ue}=F;if(ue&6){O(F.component.subTree,M,re,N);return}if(ue&128){F.suspense.move(M,re,N);return}if(ue&64){X.move(F,M,re,he);return}if(X===ss){n(k,M,re);for(let ye=0;ye<le.length;ye++)O(le[ye],M,re,N);n(F.anchor,M,re);return}if(X===em){g(F,M,re);return}if(N!==2&&ue&1&&se)if(N===0)se.beforeEnter(k),n(k,M,re),Wn(()=>se.enter(k),D);else{const{leave:ye,delayLeave:V,afterLeave:W}=se,pe=()=>n(k,M,re),ve=()=>{ye(k,()=>{pe(),W&&W()})};V?V(k,pe,ve):ve()}else n(k,M,re)},Y=(F,M,re,N=!1,D=!1)=>{const{type:k,props:X,ref:se,children:le,dynamicChildren:ue,shapeFlag:Ae,patchFlag:ye,dirs:V,cacheIndex:W}=F;if(ye===-2&&(D=!1),se!=null&&vw(se,null,re,F,!0),W!=null&&(M.renderCache[W]=void 0),Ae&256){M.ctx.deactivate(F);return}const pe=Ae&1&&V,ve=!ef(F);let xe;if(ve&&(xe=X&&X.onVnodeBeforeUnmount)&&Ni(xe,M,F),Ae&6)B(F.component,re,N);else{if(Ae&128){F.suspense.unmount(re,N);return}pe&&la(F,null,M,"beforeUnmount"),Ae&64?F.type.remove(F,M,re,he,N):ue&&!ue.hasOnce&&(k!==ss||ye>0&&ye&64)?Z(ue,M,re,!1,!0):(k===ss&&ye&384||!D&&Ae&16)&&Z(le,M,re),N&&H(F)}(ve&&(xe=X&&X.onVnodeUnmounted)||pe)&&Wn(()=>{xe&&Ni(xe,M,F),pe&&la(F,null,M,"unmounted")},re)},H=F=>{const{type:M,el:re,anchor:N,transition:D}=F;if(M===ss){C(re,N);return}if(M===em){m(F);return}const k=()=>{s(re),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(F.shapeFlag&1&&D&&!D.persisted){const{leave:X,delayLeave:se}=D,le=()=>X(re,k);se?se(F.el,k,le):le()}else k()},C=(F,M)=>{let re;for(;F!==M;)re=h(F),s(F),F=re;s(M)},B=(F,M,re)=>{const{bum:N,scope:D,job:k,subTree:X,um:se,m:le,a:ue}=F;bw(le),bw(ue),N&&Dp(N),D.stop(),k&&(k.flags|=8,Y(X,F,M,re)),se&&Wn(se,M),Wn(()=>{F.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Z=(F,M,re,N=!1,D=!1,k=0)=>{for(let X=k;X<F.length;X++)Y(F[X],M,re,N,D)},Q=F=>{if(F.shapeFlag&6)return Q(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const M=h(F.anchor||F.el),re=M&&M[B9];return re?h(re):M};let oe=!1;const fe=(F,M,re)=>{F==null?M._vnode&&Y(M._vnode,null,null,!0):y(M._vnode||null,F,M,null,null,null,re),M._vnode=F,oe||(oe=!0,WD(),mw(),oe=!1)},he={p:y,um:Y,m:O,r:H,mt:L,mc:E,pc:z,pbc:$,n:Q,o:e};let _e,Ie;return t&&([_e,Ie]=t(he)),{render:fe,hydrate:_e,createApp:sU(fe,_e)}}function K1({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Zl({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function e8(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function t8(e,t,r=!1){const n=e.children,s=t.children;if(et(n)&&et(s))for(let i=0;i<n.length;i++){const o=n[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=rl(s[i]),a.el=o.el),!r&&a.patchFlag!==-2&&t8(o,a)),a.type===nf&&(a.el=o.el)}}function hU(e){const t=e.slice(),r=[0];let n,s,i,o,a;const c=e.length;for(n=0;n<c;n++){const l=e[n];if(l!==0){if(s=r[r.length-1],e[s]<l){t[n]=s,r.push(n);continue}for(i=0,o=r.length-1;i<o;)a=i+o>>1,e[r[a]]<l?i=a+1:o=a;l<e[r[i]]&&(i>0&&(t[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=t[o];return r}function r8(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:r8(t)}function bw(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const yU=Symbol.for("v-scx"),mU=()=>zi(yU);function gU(e,t){return AS(e,null,t)}function wl(e,t,r){return AS(e,t,r)}function AS(e,t,r=gr){const{immediate:n,deep:s,flush:i,once:o}=r,a=mn({},r);let c;if(g0)if(i==="sync"){const h=mU();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!t||n)a.once=!0;else return{stop:$a,resume:$a,pause:$a};const l=yn;a.call=(h,f,p)=>Io(h,l,f,p);let u=!1;i==="post"?a.scheduler=h=>{Wn(h,l&&l.suspense)}:i!=="sync"&&(u=!0,a.scheduler=(h,f)=>{f?h():$b(h)}),a.augmentJob=h=>{t&&(h.flags|=4),u&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const d=O9(e,t,a);return c&&c.push(d),d}function vU(e,t,r){const n=this.proxy,s=Tr(e)?e.includes(".")?n8(n,e):()=>n[e]:e.bind(n,n);let i;pt(t)?i=t:(i=t.handler,r=t);const o=m0(this),a=AS(s,i.bind(n),r);return o(),a}function n8(e,t){const r=t.split(".");return()=>{let n=e;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const wU=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${To(t)}Modifiers`]||e[`${If(t)}Modifiers`];function bU(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||gr;let s=r;const i=t.startsWith("update:"),o=i&&wU(n,t.slice(7));o&&(o.trim&&(s=r.map(u=>Tr(u)?u.trim():u)),o.number&&(s=r.map(pw)));let a,c=n[a=T1(t)]||n[a=T1(To(t))];!c&&i&&(c=n[a=T1(If(t))]),c&&Io(c,e,6,s);const l=n[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Io(l,e,6,s)}}function i8(e,t,r=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!pt(e)){const c=l=>{const u=i8(l,t,!0);u&&(a=!0,mn(o,u))};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(pr(e)&&n.set(e,null),null):(et(i)?i.forEach(c=>o[c]=null):mn(o,i),pr(e)&&n.set(e,o),o)}function kb(e,t){return!e||!p0(t)?!1:(t=t.slice(2).replace(/Once$/,""),nr(e,t[0].toLowerCase()+t.slice(1))||nr(e,If(t))||nr(e,t))}function L1(e){const{type:t,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:y}=e,_=gw(e);let b,v;try{if(r.shapeFlag&4){const m=s||n,w=m;b=os(l.call(w,m,u,d,f,h,p)),v=a}else{const m=t;b=os(m.length>1?m(d,{attrs:a,slots:o,emit:c}):m(d,null)),v=t.props?a:EU(a)}}catch(m){tm.length=0,dh(m,e,1),b=Kr(Dn)}let g=b;if(v&&y!==!1){const m=Object.keys(v),{shapeFlag:w}=g;m.length&&w&7&&(i&&m.some(oS)&&(v=AU(v,i)),g=Wu(g,v,!1,!0))}return r.dirs&&(g=Wu(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(r.dirs):r.dirs),r.transition&&Up(g,r.transition),b=g,gw(_),b}function _U(e,t=!0){let r;for(let n=0;n<e.length;n++){const s=e[n];if(Bm(s)){if(s.type!==Dn||s.children==="v-if"){if(r)return;r=s}}else return}return r}const EU=e=>{let t;for(const r in e)(r==="class"||r==="style"||p0(r))&&((t||(t={}))[r]=e[r]);return t},AU=(e,t)=>{const r={};for(const n in e)(!oS(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function SU(e,t,r){const{props:n,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?i5(n,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!kb(l,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?i5(n,o,l):!0:!!o;return!1}function i5(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(t[i]!==e[i]&&!kb(r,i))return!0}return!1}function SS({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const _w=e=>e.__isSuspense;let nA=0;const xU={name:"Suspense",__isSuspense:!0,process(e,t,r,n,s,i,o,a,c,l){if(e==null)$U(t,r,n,s,i,o,a,c,l);else{if(i&&i.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}DU(e,t,r,n,s,o,a,c,l)}},hydrate:CU,normalize:PU},s8=xU;function Im(e,t){const r=e.props&&e.props[t];pt(r)&&r()}function $U(e,t,r,n,s,i,o,a,c){const{p:l,o:{createElement:u}}=c,d=u("div"),h=e.suspense=o8(e,s,n,t,d,r,i,o,a,c);l(null,h.pendingBranch=e.ssContent,d,null,n,h,i,o),h.deps>0?(Im(e,"onPending"),Im(e,"onFallback"),l(null,e.ssFallback,t,r,n,null,i,o),Pp(h,e.ssFallback)):h.resolve(!1,!0)}function DU(e,t,r,n,s,i,o,a,{p:c,um:l,o:{createElement:u}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const h=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:y,isInFallback:_,isHydrating:b}=d;if(y)d.pendingBranch=h,_o(h,y)?(c(y,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():_&&(b||(c(p,f,r,n,s,null,i,o,a),Pp(d,f)))):(d.pendingId=nA++,b?(d.isHydrating=!1,d.activeBranch=y):l(y,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),_?(c(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(c(p,f,r,n,s,null,i,o,a),Pp(d,f))):p&&_o(h,p)?(c(p,h,r,n,s,d,i,o,a),d.resolve(!0)):(c(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(p&&_o(h,p))c(p,h,r,n,s,d,i,o,a),Pp(d,h);else if(Im(t,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=nA++,c(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:v,pendingId:g}=d;v>0?setTimeout(()=>{d.pendingId===g&&d.fallback(f)},v):v===0&&d.fallback(f)}}function o8(e,t,r,n,s,i,o,a,c,l,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:y,remove:_}}=l;let b;const v=kU(e);v&&t&&t.pendingBranch&&(b=t.pendingId,t.deps++);const g=e.props?YI(e.props.timeout):void 0,m=i,w={vnode:e,parent:t,parentComponent:r,namespace:o,container:n,hiddenContainer:s,deps:0,pendingId:nA++,timeout:typeof g=="number"?g:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(x=!1,S=!1){const{vnode:E,activeBranch:A,pendingBranch:$,pendingId:I,effects:T,parentComponent:R,container:L}=w;let j=!1;w.isHydrating?w.isHydrating=!1:x||(j=A&&$.transition&&$.transition.mode==="out-in",j&&(A.transition.afterLeave=()=>{I===w.pendingId&&(h($,L,i===m?p(A):i,0),ZE(T))}),A&&(y(A.el)===L&&(i=p(A)),f(A,R,w,!0)),j||h($,L,i,0)),Pp(w,$),w.pendingBranch=null,w.isInFallback=!1;let U=w.parent,te=!1;for(;U;){if(U.pendingBranch){U.effects.push(...T),te=!0;break}U=U.parent}!te&&!j&&ZE(T),w.effects=[],v&&t&&t.pendingBranch&&b===t.pendingId&&(t.deps--,t.deps===0&&!S&&t.resolve()),Im(E,"onResolve")},fallback(x){if(!w.pendingBranch)return;const{vnode:S,activeBranch:E,parentComponent:A,container:$,namespace:I}=w;Im(S,"onFallback");const T=p(E),R=()=>{w.isInFallback&&(d(null,x,$,T,A,null,I,a,c),Pp(w,x))},L=x.transition&&x.transition.mode==="out-in";L&&(E.transition.afterLeave=R),w.isInFallback=!0,f(E,A,null,!0),L||R()},move(x,S,E){w.activeBranch&&h(w.activeBranch,x,S,E),w.container=x},next(){return w.activeBranch&&p(w.activeBranch)},registerDep(x,S,E){const A=!!w.pendingBranch;A&&w.deps++;const $=x.vnode.el;x.asyncDep.catch(I=>{dh(I,x,0)}).then(I=>{if(x.isUnmounted||w.isUnmounted||w.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:T}=x;sA(x,I,!1),$&&(T.el=$);const R=!$&&x.subTree.el;S(x,T,y($||x.subTree.el),$?null:p(x.subTree),w,o,E),R&&_(R),SS(x,T.el),A&&--w.deps===0&&w.resolve()})},unmount(x,S){w.isUnmounted=!0,w.activeBranch&&f(w.activeBranch,r,x,S),w.pendingBranch&&f(w.pendingBranch,r,x,S)}};return w}function CU(e,t,r,n,s,i,o,a,c){const l=t.suspense=o8(t,n,r,e.parentNode,document.createElement("div"),null,s,i,o,a,!0),u=c(e,l.pendingBranch=t.ssContent,r,l,i,o);return l.deps===0&&l.resolve(!1,!0),u}function PU(e){const{shapeFlag:t,children:r}=e,n=t&32;e.ssContent=s5(n?r.default:r),e.ssFallback=n?s5(r.fallback):Kr(Dn)}function s5(e){let t;if(pt(e)){const r=Kp&&e._c;r&&(e._d=!1,pa()),e=e(),r&&(e._d=!0,t=Vi,u8())}return et(e)&&(e=_U(e)),e=os(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function a8(e,t){t&&t.pendingBranch?et(e)?t.effects.push(...e):t.effects.push(e):ZE(e)}function Pp(e,t){e.activeBranch=t;const{vnode:r,parentComponent:n}=e;let s=t.el;for(;!s&&t.component;)t=t.component.subTree,s=t.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,SS(n,s))}function kU(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ss=Symbol.for("v-fgt"),nf=Symbol.for("v-txt"),Dn=Symbol.for("v-cmt"),em=Symbol.for("v-stc"),tm=[];let Vi=null;function pa(e=!1){tm.push(Vi=e?null:[])}function u8(){tm.pop(),Vi=tm[tm.length-1]||null}let Kp=1;function o5(e){Kp+=e,e<0&&Vi&&(Vi.hasOnce=!0)}function c8(e){return e.dynamicChildren=Kp>0?Vi||Sp:null,u8(),Kp>0&&Vi&&Vi.push(e),e}function l8(e,t,r,n,s,i){return c8(f8(e,t,r,n,s,i,!0))}function Fd(e,t,r,n,s){return c8(Kr(e,t,r,n,s,!0))}function Bm(e){return e?e.__v_isVNode===!0:!1}function _o(e,t){return e.type===t.type&&e.key===t.key}const d8=({key:e})=>e??null,Ev=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Tr(e)||kn(e)||pt(e)?{i:Ei,r:e,k:t,f:!!r}:e:null);function f8(e,t=null,r=null,n=0,s=null,i=e===ss?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&d8(t),ref:t&&Ev(t),scopeId:SB,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ei};return a?(xS(c,r),i&128&&e.normalize(c)):r&&(c.shapeFlag|=Tr(r)?8:16),Kp>0&&!o&&Vi&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Vi.push(c),c}const Kr=OU;function OU(e,t=null,r=null,n=0,s=null,i=!1){if((!e||e===jB)&&(e=Dn),Bm(e)){const a=Wu(e,t,!0);return r&&xS(a,r),Kp>0&&!i&&Vi&&(a.shapeFlag&6?Vi[Vi.indexOf(e)]=a:Vi.push(a)),a.patchFlag=-2,a}if(UU(e)&&(e=e.__vccOpts),t){t=p8(t);let{class:a,style:c}=t;a&&!Tr(a)&&(t.class=Ab(a)),pr(c)&&(gS(c)&&!et(c)&&(c=mn({},c)),t.style=Eb(c))}const o=Tr(e)?1:_w(e)?128:$B(e)?64:pr(e)?4:pt(e)?2:0;return f8(e,t,r,n,s,o,i,!0)}function p8(e){return e?gS(e)||zB(e)?mn({},e):e:null}function Wu(e,t,r=!1,n=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=e,l=t?TU(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&d8(l),ref:t&&t.ref?r&&i?et(i)?i.concat(Ev(t)):[i,Ev(t)]:Ev(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ss?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wu(e.ssContent),ssFallback:e.ssFallback&&Wu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&Up(u,c.clone(u)),u}function h8(e=" ",t=0){return Kr(nf,null,e,t)}function Vve(e,t){const r=Kr(em,null,e);return r.staticCount=t,r}function Hve(e="",t=!1){return t?(pa(),Fd(Dn,null,e)):Kr(Dn,null,e)}function os(e){return e==null||typeof e=="boolean"?Kr(Dn):et(e)?Kr(ss,null,e.slice()):typeof e=="object"?rl(e):Kr(nf,null,String(e))}function rl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Wu(e)}function xS(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(et(t))r=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),xS(e,s()),s._c&&(s._d=!0));return}else{r=32;const s=t._;!s&&!zB(t)?t._ctx=Ei:s===3&&Ei&&(Ei.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else pt(t)?(t={default:t,_ctx:Ei},r=32):(t=String(t),n&64?(r=16,t=[h8(t)]):r=8);e.children=t,e.shapeFlag|=r}function TU(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Ab([t.class,n.class]));else if(s==="style")t.style=Eb([t.style,n.style]);else if(p0(s)){const i=t[s],o=n[s];o&&i!==o&&!(et(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=n[s])}return t}function Ni(e,t,r,n=null){Io(e,t,7,[r,n])}const IU=LB();let BU=0;function FU(e,t,r){const n=e.type,s=(t?t.appContext:e.appContext)||IU,i={uid:BU++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nB(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:JB(n,s),emitsOptions:i8(n,s),emit:null,emitted:null,propsDefaults:gr,inheritAttrs:n.inheritAttrs,ctx:gr,data:gr,props:gr,attrs:gr,slots:gr,refs:gr,setupState:gr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=bU.bind(null,i),e.ce&&e.ce(i),i}let yn=null;const Ob=()=>yn||Ei;let Ew,iA;{const e=QI(),t=(r,n)=>{let s;return(s=e[r])||(s=e[r]=[]),s.push(n),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ew=t("__VUE_INSTANCE_SETTERS__",r=>yn=r),iA=t("__VUE_SSR_SETTERS__",r=>g0=r)}const m0=e=>{const t=yn;return Ew(e),e.scope.on(),()=>{e.scope.off(),Ew(t)}},a5=()=>{yn&&yn.scope.off(),Ew(null)};function y8(e){return e.vnode.shapeFlag&4}let g0=!1;function NU(e,t=!1,r=!1){t&&iA(t);const{props:n,children:s}=e.vnode,i=y8(e);oU(e,n,i,t),lU(e,s,r);const o=i?RU(e,t):void 0;return t&&iA(!1),o}function RU(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Y9);const{setup:n}=r;if(n){const s=e.setupContext=n.length>1?jU(e):null,i=m0(e);Rl();const o=h0(n,e,0,[e.props,s]);if(Ml(),i(),JI(o)){if(ef(e)||bS(e),o.then(a5,a5),t)return o.then(a=>{sA(e,a,t)}).catch(a=>{dh(a,e,0)});e.asyncDep=o}else sA(e,o,t)}else m8(e,t)}function sA(e,t,r){pt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pr(t)&&(e.setupState=bB(t)),m8(e,r)}let u5;function m8(e,t,r){const n=e.type;if(!e.render){if(!t&&u5&&!n.render){const s=n.template||_S(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=n,l=mn(mn({isCustomElement:i,delimiters:a},o),c);n.render=u5(s,l)}}e.render=n.render||$a}{const s=m0(e);Rl();try{Q9(e)}finally{Ml(),s()}}}const MU={get(e,t){return ci(e,"get",""),e[t]}};function jU(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,MU),slots:e.slots,emit:e.emit,expose:t}}function Tb(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bB(_9(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Qy)return Qy[r](e)},has(t,r){return r in t||r in Qy}})):e.proxy}function oA(e,t=!0){return pt(e)?e.displayName||e.name:e.name||t&&e.__name}function UU(e){return pt(e)&&"__vccOpts"in e}const Eo=(e,t)=>P9(e,t,g0);function Ea(e,t,r){const n=arguments.length;return n===2?pr(t)&&!et(t)?Bm(t)?Kr(e,null,[t]):Kr(e,t):Kr(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Bm(r)&&(r=[r]),Kr(e,t,r))}const g8="3.5.4";/**
* @vue/runtime-dom v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let aA;const c5=typeof window<"u"&&window.trustedTypes;if(c5)try{aA=c5.createPolicy("vue",{createHTML:e=>e})}catch{}const v8=aA?e=>aA.createHTML(e):e=>e,KU="http://www.w3.org/2000/svg",LU="http://www.w3.org/1998/Math/MathML",_u=typeof document<"u"?document:null,l5=_u&&_u.createElement("template"),qU={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const s=t==="svg"?_u.createElementNS(KU,e):t==="mathml"?_u.createElementNS(LU,e):r?_u.createElement(e,{is:r}):_u.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>_u.createTextNode(e),createComment:e=>_u.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_u.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,s,i){const o=r?r.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{l5.innerHTML=v8(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=l5.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},lc="transition",kh="animation",Fm=Symbol("_vtc"),w8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},VU=mn({},DB,w8),HU=e=>(e.displayName="Transition",e.props=VU,e),zU=HU((e,{slots:t})=>Ea(R9,WU(e),t)),Yl=(e,t=[])=>{et(e)?e.forEach(r=>r(...t)):e&&e(...t)},d5=e=>e?et(e)?e.some(t=>t.length>1):e.length>1:!1;function WU(e){const t={};for(const T in e)T in w8||(t[T]=e[T]);if(e.css===!1)return t;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:f=`${r}-leave-to`}=e,p=JU(s),y=p&&p[0],_=p&&p[1],{onBeforeEnter:b,onEnter:v,onEnterCancelled:g,onLeave:m,onLeaveCancelled:w,onBeforeAppear:x=b,onAppear:S=v,onAppearCancelled:E=g}=t,A=(T,R,L)=>{Ql(T,R?u:a),Ql(T,R?l:o),L&&L()},$=(T,R)=>{T._isLeaving=!1,Ql(T,d),Ql(T,f),Ql(T,h),R&&R()},I=T=>(R,L)=>{const j=T?S:v,U=()=>A(R,T,L);Yl(j,[R,U]),f5(()=>{Ql(R,T?c:i),dc(R,T?u:a),d5(j)||p5(R,n,y,U)})};return mn(t,{onBeforeEnter(T){Yl(b,[T]),dc(T,i),dc(T,o)},onBeforeAppear(T){Yl(x,[T]),dc(T,c),dc(T,l)},onEnter:I(!1),onAppear:I(!0),onLeave(T,R){T._isLeaving=!0;const L=()=>$(T,R);dc(T,d),dc(T,h),ZU(),f5(()=>{T._isLeaving&&(Ql(T,d),dc(T,f),d5(m)||p5(T,n,_,L))}),Yl(m,[T,L])},onEnterCancelled(T){A(T,!1),Yl(g,[T])},onAppearCancelled(T){A(T,!0),Yl(E,[T])},onLeaveCancelled(T){$(T),Yl(w,[T])}})}function JU(e){if(e==null)return null;if(pr(e))return[q1(e.enter),q1(e.leave)];{const t=q1(e);return[t,t]}}function q1(e){return YI(e)}function dc(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Fm]||(e[Fm]=new Set)).add(t)}function Ql(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Fm];r&&(r.delete(t),r.size||(e[Fm]=void 0))}function f5(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let GU=0;function p5(e,t,r,n){const s=e._endId=++GU,i=()=>{s===e._endId&&n()};if(r)return setTimeout(i,r);const{type:o,timeout:a,propCount:c}=XU(e,t);if(!o)return n();const l=o+"end";let u=0;const d=()=>{e.removeEventListener(l,h),i()},h=f=>{f.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),e.addEventListener(l,h)}function XU(e,t){const r=window.getComputedStyle(e),n=p=>(r[p]||"").split(", "),s=n(`${lc}Delay`),i=n(`${lc}Duration`),o=h5(s,i),a=n(`${kh}Delay`),c=n(`${kh}Duration`),l=h5(a,c);let u=null,d=0,h=0;t===lc?o>0&&(u=lc,d=o,h=i.length):t===kh?l>0&&(u=kh,d=l,h=c.length):(d=Math.max(o,l),u=d>0?o>l?lc:kh:null,h=u?u===lc?i.length:c.length:0);const f=u===lc&&/\b(transform|all)(,|$)/.test(n(`${lc}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function h5(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>y5(r)+y5(e[n])))}function y5(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ZU(){return document.body.offsetHeight}function YU(e,t,r){const n=e[Fm];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const m5=Symbol("_vod"),QU=Symbol("_vsh"),eK=Symbol(""),tK=/(^|;)\s*display\s*:/;function rK(e,t,r){const n=e.style,s=Tr(r);let i=!1;if(r&&!s){if(t)if(Tr(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&Av(n,a,"")}else for(const o in t)r[o]==null&&Av(n,o,"");for(const o in r)o==="display"&&(i=!0),Av(n,o,r[o])}else if(s){if(t!==r){const o=n[eK];o&&(r+=";"+o),n.cssText=r,i=tK.test(r)}}else t&&e.removeAttribute("style");m5 in e&&(e[m5]=i?n.display:"",e[QU]&&(n.display="none"))}const g5=/\s*!important$/;function Av(e,t,r){if(et(r))r.forEach(n=>Av(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=nK(e,t);g5.test(r)?e.setProperty(If(n),r.replace(g5,""),"important"):e[n]=r}}const v5=["Webkit","Moz","ms"],V1={};function nK(e,t){const r=V1[t];if(r)return r;let n=To(t);if(n!=="filter"&&n in e)return V1[t]=n;n=_b(n);for(let s=0;s<v5.length;s++){const i=v5[s]+n;if(i in e)return V1[t]=i}return t}const w5="http://www.w3.org/1999/xlink";function b5(e,t,r,n,s,i=Xj(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(w5,t.slice(6,t.length)):e.setAttributeNS(w5,t,r):r==null||i&&!eB(r)?e.removeAttribute(t):e.setAttribute(t,i?"":Ba(r)?String(r):r)}function iK(e,t,r,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?v8(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,a=r==null?e.type==="checkbox"?"on":"":String(r);(o!==a||!("_value"in e))&&(e.value=a),r==null&&e.removeAttribute(t),e._value=r;return}let i=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=eB(r):r==null&&o==="string"?(r="",i=!0):o==="number"&&(r=0,i=!0)}try{e[t]=r}catch{}i&&e.removeAttribute(t)}function Nu(e,t,r,n){e.addEventListener(t,r,n)}function sK(e,t,r,n){e.removeEventListener(t,r,n)}const _5=Symbol("_vei");function oK(e,t,r,n,s=null){const i=e[_5]||(e[_5]={}),o=i[t];if(n&&o)o.value=n;else{const[a,c]=aK(t);if(n){const l=i[t]=lK(n,s);Nu(e,a,l,c)}else o&&(sK(e,a,o,c),i[t]=void 0)}}const E5=/(?:Once|Passive|Capture)$/;function aK(e){let t;if(E5.test(e)){t={};let n;for(;n=e.match(E5);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):If(e.slice(2)),t]}let H1=0;const uK=Promise.resolve(),cK=()=>H1||(uK.then(()=>H1=0),H1=Date.now());function lK(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Io(dK(n,r.value),t,5,[n])};return r.value=e,r.attached=cK(),r}function dK(e,t){if(et(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const A5=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,fK=(e,t,r,n,s,i)=>{const o=s==="svg";t==="class"?YU(e,n,o):t==="style"?rK(e,r,n):p0(t)?oS(t)||oK(e,t,r,n,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pK(e,t,n,o))?(iK(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&b5(e,t,n,o,i,t!=="value")):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),b5(e,t,n,o))};function pK(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&A5(t)&&pt(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return A5(t)&&Tr(r)?!1:!!(t in e||e._isVueCE&&(/[A-Z]/.test(t)||!Tr(r)))}const kl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return et(t)?r=>Dp(t,r):t};function hK(e){e.target.composing=!0}function S5(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Js=Symbol("_assign"),x5={created(e,{modifiers:{lazy:t,trim:r,number:n}},s){e[Js]=kl(s);const i=n||s.props&&s.props.type==="number";Nu(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r&&(a=a.trim()),i&&(a=pw(a)),e[Js](a)}),r&&Nu(e,"change",()=>{e.value=e.value.trim()}),t||(Nu(e,"compositionstart",hK),Nu(e,"compositionend",S5),Nu(e,"change",S5))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},o){if(e[Js]=kl(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?pw(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||s&&e.value.trim()===c)||(e.value=c))}},yK={deep:!0,created(e,t,r){e[Js]=kl(r),Nu(e,"change",()=>{const n=e._modelValue,s=Lp(e),i=e.checked,o=e[Js];if(et(n)){const a=cS(n,s),c=a!==-1;if(i&&!c)o(n.concat(s));else if(!i&&c){const l=[...n];l.splice(a,1),o(l)}}else if(ch(n)){const a=new Set(n);i?a.add(s):a.delete(s),o(a)}else o(b8(e,i))})},mounted:$5,beforeUpdate(e,t,r){e[Js]=kl(r),$5(e,t,r)}};function $5(e,{value:t,oldValue:r},n){e._modelValue=t;let s;et(t)?s=cS(t,n.props.value)>-1:ch(t)?s=t.has(n.props.value):s=vf(t,b8(e,!0)),e.checked!==s&&(e.checked=s)}const mK={created(e,{value:t},r){e.checked=vf(t,r.props.value),e[Js]=kl(r),Nu(e,"change",()=>{e[Js](Lp(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e[Js]=kl(n),t!==r&&(e.checked=vf(t,n.props.value))}},gK={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const s=ch(t);Nu(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>r?pw(Lp(o)):Lp(o));e[Js](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,fh(()=>{e._assigning=!1})}),e[Js]=kl(n)},mounted(e,{value:t,modifiers:{number:r}}){D5(e,t)},beforeUpdate(e,t,r){e[Js]=kl(r)},updated(e,{value:t,modifiers:{number:r}}){e._assigning||D5(e,t)}};function D5(e,t,r){const n=e.multiple,s=et(t);if(!(n&&!s&&!ch(t))){for(let i=0,o=e.options.length;i<o;i++){const a=e.options[i],c=Lp(a);if(n)if(s){const l=typeof c;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(c)):a.selected=cS(t,c)>-1}else a.selected=t.has(c);else if(vf(Lp(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Lp(e){return"_value"in e?e._value:e.value}function b8(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const zve={created(e,t,r){sg(e,t,r,null,"created")},mounted(e,t,r){sg(e,t,r,null,"mounted")},beforeUpdate(e,t,r,n){sg(e,t,r,n,"beforeUpdate")},updated(e,t,r,n){sg(e,t,r,n,"updated")}};function vK(e,t){switch(e){case"SELECT":return gK;case"TEXTAREA":return x5;default:switch(t){case"checkbox":return yK;case"radio":return mK;default:return x5}}}function sg(e,t,r,n,s){const o=vK(e.tagName,r.props&&r.props.type)[s];o&&o(e,t,r,n)}const wK=["ctrl","shift","alt","meta"],bK={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wK.some(r=>e[`${r}Key`]&&!t.includes(r))},Wve=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=bK[t[o]];if(a&&a(s,t))return}return e(s,...i)})},_8=mn({patchProp:fK},qU);let rm,C5=!1;function _K(){return rm||(rm=fU(_8))}function EK(){return rm=C5?rm:pU(_8),C5=!0,rm}const AK=(...e)=>{const t=_K().createApp(...e),{mount:r}=t;return t.mount=n=>{const s=A8(n);if(!s)return;const i=t._component;!pt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=r(s,!1,E8(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t},SK=(...e)=>{const t=EK().createApp(...e),{mount:r}=t;return t.mount=n=>{const s=A8(n);if(s)return r(s,!0,E8(s))},t};function E8(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function A8(e){return Tr(e)?document.querySelector(e):e}const xK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,$K=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,DK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function CK(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){PK(e);return}return t}function PK(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Aw(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!DK.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(xK.test(e)||$K.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,CK)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}const kK=/#/g,OK=/&/g,TK=/\//g,IK=/=/g,$S=/\+/g,BK=/%5e/gi,FK=/%60/gi,NK=/%7c/gi,RK=/%20/gi;function MK(e){return encodeURI(""+e).replace(NK,"|")}function uA(e){return MK(typeof e=="string"?e:JSON.stringify(e)).replace($S,"%2B").replace(RK,"+").replace(kK,"%23").replace(OK,"%26").replace(FK,"`").replace(BK,"^").replace(TK,"%2F")}function z1(e){return uA(e).replace(IK,"%3D")}function Sw(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function jK(e){return Sw(e.replace($S," "))}function UK(e){return Sw(e.replace($S," "))}function KK(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const s=jK(n[1]);if(s==="__proto__"||s==="constructor")continue;const i=UK(n[2]||"");t[s]===void 0?t[s]=i:Array.isArray(t[s])?t[s].push(i):t[s]=[t[s],i]}return t}function LK(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(r=>`${z1(e)}=${uA(r)}`).join("&"):`${z1(e)}=${uA(t)}`:z1(e)}function qK(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>LK(t,e[t])).filter(Boolean).join("&")}const VK=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,HK=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,zK=/^([/\\]\s*){2,}[^/\\]/,WK=/^[\s\0]*(blob|data|javascript|vbscript):$/i,JK=/\/$|\/\?|\/#/,GK=/^\.?\//;function Bf(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?VK.test(e):HK.test(e)||(t.acceptRelative?zK.test(e):!1)}function XK(e){return!!e&&WK.test(e)}function cA(e="",t){return t?JK.test(e):e.endsWith("/")}function DS(e="",t){if(!t)return(cA(e)?e.slice(0,-1):e)||"/";if(!cA(e,!0))return e||"/";let r=e,n="";const s=e.indexOf("#");s>=0&&(r=e.slice(0,s),n=e.slice(s));const[i,...o]=r.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+n}function lA(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(cA(e,!0))return e||"/";let r=e,n="";const s=e.indexOf("#");if(s>=0&&(r=e.slice(0,s),n=e.slice(s),!r))return n;const[i,...o]=r.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+n}function ZK(e=""){return e.startsWith("/")}function P5(e=""){return ZK(e)?e:"/"+e}function YK(e,t){if(x8(t)||Bf(e))return e;const r=DS(t);return e.startsWith(r)?e:CS(r,e)}function k5(e,t){if(x8(t))return e;const r=DS(t);if(!e.startsWith(r))return e;const n=e.slice(r.length);return n[0]==="/"?n:"/"+n}function S8(e,t){const r=tL(e),n={...KK(r.search),...t};return r.search=qK(n),rL(r)}function x8(e){return!e||e==="/"}function QK(e){return e&&e!=="/"}function CS(e,...t){let r=e||"";for(const n of t.filter(s=>QK(s)))if(r){const s=n.replace(GK,"");r=lA(r)+s}else r=n;return r}function $8(...e){var o,a,c,l;const t=/\/(?!\/)/,r=e.filter(Boolean),n=[];let s=0;for(const u of r)if(!(!u||u==="/")){for(const[d,h]of u.split(t).entries())if(!(!h||h===".")){if(h===".."){if(n.length===1&&Bf(n[0]))continue;n.pop(),s--;continue}if(d===1&&((o=n[n.length-1])!=null&&o.endsWith(":/"))){n[n.length-1]+="/"+h;continue}n.push(h),s++}}let i=n.join("/");return s>=0?(a=r[0])!=null&&a.startsWith("/")&&!i.startsWith("/")?i="/"+i:(c=r[0])!=null&&c.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,(l=r[r.length-1])!=null&&l.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function eL(e,t,r={}){return r.trailingSlash||(e=lA(e),t=lA(t)),r.leadingSlash||(e=P5(e),t=P5(t)),r.encoding||(e=Sw(e),t=Sw(t)),e===t}const D8=Symbol.for("ufo:protocolRelative");function tL(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,d,h=""]=r;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!Bf(e,{acceptRelative:!0}))return O5(e);const[,n="",s,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:u}=O5(a);return{protocol:n.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:u,[D8]:!n}}function O5(e=""){const[t="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:n}}function rL(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",n=e.hash||"",s=e.auth?e.auth+"@":"",i=e.host||"";return(e.protocol||e[D8]?(e.protocol||"")+"//":"")+s+i+t+r+n}class nL extends Error{constructor(t,r){super(t,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function iL(e){var c,l,u,d,h;const t=((c=e.error)==null?void 0:c.message)||((l=e.error)==null?void 0:l.toString())||"",r=((u=e.request)==null?void 0:u.method)||((d=e.options)==null?void 0:d.method)||"GET",n=((h=e.request)==null?void 0:h.url)||String(e.request)||"/",s=`[${r}] ${JSON.stringify(n)}`,i=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",o=`${s}: ${i}${t?` ${t}`:""}`,a=new nL(o,e.error?{cause:e.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(a,f,{get(){return e[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,f,{get(){return e.response&&e.response[p]}});return a}const sL=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function T5(e="GET"){return sL.has(e.toUpperCase())}function oL(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const aL=new Set(["image/svg","application/xml","application/xhtml","application/html"]),uL=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function cL(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return uL.test(t)?"json":aL.has(t)||t.startsWith("text/")?"text":"blob"}function lL(e,t,r=globalThis.Headers){const n={...t,...e};if(t!=null&&t.params&&(e!=null&&e.params)&&(n.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&(e!=null&&e.query)&&(n.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&(e!=null&&e.headers)){n.headers=new r((t==null?void 0:t.headers)||{});for(const[s,i]of new r((e==null?void 0:e.headers)||{}))n.headers.set(s,i)}return n}const dL=new Set([408,409,425,429,500,502,503,504]),fL=new Set([101,204,205,304]);function C8(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=e;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let u;typeof a.options.retry=="number"?u=a.options.retry:u=T5(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):dL.has(d))){const h=a.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),i(a.request,{...a.options,retry:u-1})}}const l=iL(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){var f;const u={request:c,options:lL(l,e.defaults,r),response:void 0,error:void 0};u.options.method=(f=u.options.method)==null?void 0:f.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=YK(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=S8(u.request,{...u.options.params,...u.options.query}))),u.options.body&&T5(u.options.method)&&(oL(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new r(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const p=new n;d=setTimeout(()=>p.abort(),u.options.timeout),u.options.signal=p.signal}try{u.response=await t(u.request,u.options)}catch(p){return u.error=p,u.options.onRequestError&&await u.options.onRequestError(u),await s(u)}finally{d&&clearTimeout(d)}if(u.response.body&&!fL.has(u.response.status)&&u.options.method!=="HEAD"){const p=(u.options.parseResponse?"json":u.options.responseType)||cL(u.response.headers.get("content-type")||"");switch(p){case"json":{const y=await u.response.text(),_=u.options.parseResponse||Aw;u.response._data=_(y);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[p]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await s(u)):u.response},o=async function(c,l){return(await i(c,l))._data};return o.raw=i,o.native=(...a)=>t(...a),o.create=(a={})=>C8({...e,defaults:{...e.defaults,...a}}),o}const PS=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),pL=PS.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),hL=PS.Headers,yL=PS.AbortController,mL=C8({fetch:pL,Headers:hL,AbortController:yL}),gL=mL,vL=()=>{var e;return((e=window==null?void 0:window.__NUXT__)==null?void 0:e.config)||{}},xw=vL().app,wL=()=>xw.baseURL,bL=()=>xw.buildAssetsDir,kS=(...e)=>$8(P8(),bL(),...e),P8=(...e)=>{const t=xw.cdnURL||xw.baseURL;return e.length?$8(t,...e):t};globalThis.__buildAssetsURL=kS,globalThis.__publicAssetsURL=P8;globalThis.$fetch||(globalThis.$fetch=gL.create({baseURL:wL()}));function dA(e,t={},r){for(const n in e){const s=e[n],i=r?`${r}:${n}`:n;typeof s=="object"&&s!==null?dA(s,t,i):typeof s=="function"&&(t[i]=s)}return t}const _L={run:e=>e()},EL=()=>_L,k8=typeof console.createTask<"u"?console.createTask:EL;function AL(e,t){const r=t.shift(),n=k8(r);return e.reduce((s,i)=>s.then(()=>n.run(()=>i(...t))),Promise.resolve())}function SL(e,t){const r=t.shift(),n=k8(r);return Promise.all(e.map(s=>n.run(()=>s(...t))))}function W1(e,t){for(const r of[...e])r(t)}class xL{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,r,n={}){if(!t||typeof r!="function")return()=>{};const s=t;let i;for(;this._deprecatedHooks[t];)i=this._deprecatedHooks[t],t=i.to;if(i&&!n.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!r.name)try{Object.defineProperty(r,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(r),()=>{r&&(this.removeHook(t,r),r=void 0)}}hookOnce(t,r){let n,s=(...i)=>(typeof n=="function"&&n(),n=void 0,s=void 0,r(...i));return n=this.hook(t,s),n}removeHook(t,r){if(this._hooks[t]){const n=this._hooks[t].indexOf(r);n!==-1&&this._hooks[t].splice(n,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,r){this._deprecatedHooks[t]=typeof r=="string"?{to:r}:r;const n=this._hooks[t]||[];delete this._hooks[t];for(const s of n)this.hook(t,s)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const r in t)this.deprecateHook(r,t[r])}addHooks(t){const r=dA(t),n=Object.keys(r).map(s=>this.hook(s,r[s]));return()=>{for(const s of n.splice(0,n.length))s()}}removeHooks(t){const r=dA(t);for(const n in r)this.removeHook(n,r[n])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...r){return r.unshift(t),this.callHookWith(AL,t,...r)}callHookParallel(t,...r){return r.unshift(t),this.callHookWith(SL,t,...r)}callHookWith(t,r,...n){const s=this._before||this._after?{name:r,args:n,context:{}}:void 0;this._before&&W1(this._before,s);const i=t(r in this._hooks?[...this._hooks[r]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&s&&W1(this._after,s)}):(this._after&&s&&W1(this._after,s),i)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const r=this._before.indexOf(t);r!==-1&&this._before.splice(r,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const r=this._after.indexOf(t);r!==-1&&this._after.splice(r,1)}}}}function O8(){return new xL}function $L(e={}){let t,r=!1;const n=o=>{if(t&&t!==o)throw new Error("Context conflict")};let s;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s&&t===void 0){const o=s.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||n(o),t=o,r=!0},unset:()=>{t=void 0,r=!1},call:(o,a)=>{n(o),t=o;try{return s?s.run(o,a):a()}finally{r||(t=void 0)}},async callAsync(o,a){t=o;const c=()=>{t=o},l=()=>t===o?c:void 0;fA.add(l);try{const u=s?s.run(o,a):a();return r||(t=void 0),await u}finally{fA.delete(l)}}}}function DL(e={}){const t={};return{get(r,n={}){return t[r]||(t[r]=$L({...e,...n})),t[r],t[r]}}}const $w=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},I5="__unctx__",CL=$w[I5]||($w[I5]=DL()),PL=(e,t={})=>CL.get(e,t),B5="__unctx_async_handlers__",fA=$w[B5]||($w[B5]=new Set);function kp(e){const t=[];for(const s of fA){const i=s();i&&t.push(i)}const r=()=>{for(const s of t)s()};let n=e();return n&&typeof n=="object"&&"catch"in n&&(n=n.catch(s=>{throw r(),s})),[n,r]}const pA=!1,kL=!1,Jve={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},OL=null,TL="#__nuxt",T8="nuxt-app",F5=36e5;function I8(e=T8){return PL(e,{asyncContext:!1})}const IL="__nuxt_plugin";function BL(e){var s;let t=0;const r={_id:e.id||T8||"nuxt-app",_scope:Qj(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.13.1"},get vue(){return r.vueApp.version}},payload:Uu({...((s=e.ssrContext)==null?void 0:s.payload)||{},data:Uu({}),state:tc({}),once:new Set,_errors:Uu({})}),static:{data:{}},runWithContext(i){return r._scope.active&&!iB()?r._scope.run(()=>N5(r,i)):N5(r,i)},isHydrating:!0,deferHydration(){if(!r.isHydrating)return()=>{};t++;let i=!1;return()=>{if(!i&&(i=!0,t--,t===0))return r.isHydrating=!1,r.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Uu({}),_payloadRevivers:{},...e};{const i=window.__NUXT__;if(i)for(const o in i)switch(o){case"data":case"state":case"_errors":Object.assign(r.payload[o],i[o]);break;default:r.payload[o]=i[o]}}r.hooks=O8(),r.hook=r.hooks.hook,r.callHook=r.hooks.callHook,r.provide=(i,o)=>{const a="$"+i;og(r,a,o),og(r.vueApp.config.globalProperties,a,o)},og(r.vueApp,"$nuxt",r),og(r.vueApp.config.globalProperties,"$nuxt",r);{window.addEventListener("nuxt.preloadError",o=>{r.callHook("app:chunkError",{error:o.payload})}),window.useNuxtApp=window.useNuxtApp||sn;const i=r.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});r.hook("app:mounted",i)}const n=r.payload.config;return r.provide("config",n),r}function FL(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}async function NL(e,t){if(typeof t=="function"){const{provide:r}=await e.runWithContext(()=>t(e))||{};if(r&&typeof r=="object")for(const n in r)e.provide(n,r[n])}}async function RL(e,t){const r=[],n=[],s=[],i=[];let o=0;async function a(c){var u;const l=((u=c.dependsOn)==null?void 0:u.filter(d=>t.some(h=>h._name===d)&&!r.includes(d)))??[];if(l.length>0)n.push([new Set(l),c]);else{const d=NL(e,c).then(async()=>{c._name&&(r.push(c._name),await Promise.all(n.map(async([h,f])=>{h.has(c._name)&&(h.delete(c._name),h.size===0&&(o++,await a(f)))})))});c.parallel?s.push(d.catch(h=>i.push(h))):await d}}for(const c of t)FL(e,c);for(const c of t)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i.length)throw i[0]}function nc(e){if(typeof e=="function")return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[IL]:!0,_name:t})}function N5(e,t,r){const n=()=>t();return I8(e._id).set(e),e.vueApp.runWithContext(n)}function ML(e){var r;let t;return qB()&&(t=(r=Ob())==null?void 0:r.appContext.app.$nuxt),t=t||I8(e).tryUse(),t||null}function sn(e){const t=ML(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function Ib(e){return sn().$config}function og(e,t,r){Object.defineProperty(e,t,{get:()=>r})}function jL(e,t){return{ctx:{table:e},matchAll:r=>F8(r,e)}}function B8(e){const t={};for(const r in e)t[r]=r==="dynamic"?new Map(Object.entries(e[r]).map(([n,s])=>[n,B8(s)])):new Map(Object.entries(e[r]));return t}function UL(e){return jL(B8(e))}function F8(e,t,r){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const n=[];for(const[i,o]of R5(t.wildcard))(e===i||e.startsWith(i+"/"))&&n.push(o);for(const[i,o]of R5(t.dynamic))if(e.startsWith(i+"/")){const a="/"+e.slice(i.length).split("/").splice(2).join("/");n.push(...F8(a,o))}const s=t.static.get(e);return s&&n.push(s),n.filter(Boolean)}function R5(e){return[...e.entries()].sort((t,r)=>t[0].length-r[0].length)}function J1(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function hA(e,t,r=".",n){if(!J1(t))return hA(e,{},r,n);const s=Object.assign({},t);for(const i in e){if(i==="__proto__"||i==="constructor")continue;const o=e[i];o!=null&&(n&&n(s,i,o,r)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:J1(o)&&J1(s[i])?s[i]=hA(o,s[i],(r?`${r}.`:"")+i.toString(),n):s[i]=o))}return s}function KL(e){return(...t)=>t.reduce((r,n)=>hA(r,n,"",e),{})}const N8=KL();function LL(e,t){try{return t in e}catch{return!1}}var qL=Object.defineProperty,VL=(e,t,r)=>t in e?qL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xd=(e,t,r)=>(VL(e,typeof t!="symbol"?t+"":t,r),r);class yA extends Error{constructor(t,r={}){super(t,r),xd(this,"statusCode",500),xd(this,"fatal",!1),xd(this,"unhandled",!1),xd(this,"statusMessage"),xd(this,"data"),xd(this,"cause"),r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const t={message:this.message,statusCode:gA(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=R8(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}xd(yA,"__h3_error__",!0);function mA(e){if(typeof e=="string")return new yA(e);if(HL(e))return e;const t=new yA(e.message??e.statusMessage??"",{cause:e.cause||e});if(LL(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=gA(e.statusCode,t.statusCode):e.status&&(t.statusCode=gA(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const r=t.statusMessage;R8(t.statusMessage)!==r&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function HL(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.__h3_error__)===!0}const zL=/[^\u0009\u0020-\u007E]/g;function R8(e=""){return e.replace(zL,"")}function gA(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}const WL=Symbol("layout-meta"),Bb=Symbol("route"),Bo=()=>{var e;return(e=sn())==null?void 0:e.$router},M8=()=>qB()?zi(Bb,sn()._route):sn()._route;const JL=()=>{try{if(sn()._processingMiddleware)return!0}catch{return!1}return!1},Gve=(e,t)=>{e||(e="/");const r=typeof e=="string"?e:"path"in e?GL(e):Bo().resolve(e).href;if(t!=null&&t.open){const{target:c="_blank",windowFeatures:l={}}=t.open,u=Object.entries(l).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d.toLowerCase()}=${h}`).join(", ");return open(r,c,u),Promise.resolve()}const n=Bf(r,{acceptRelative:!0}),s=(t==null?void 0:t.external)||n;if(s){if(!(t!=null&&t.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(r,window.location.href);if(c&&XK(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=JL();if(!s&&i)return e;const o=Bo(),a=sn();return s?(a._scope.stop(),t!=null&&t.replace?location.replace(r):location.href=r,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):t!=null&&t.replace?o.replace(e):o.push(e)};function GL(e){return S8(e.path||"",e.query||{})+(e.hash||"")}const j8="__nuxt_error",Fb=()=>$9(sn().payload,"error"),vp=e=>{const t=Nb(e);try{const r=sn(),n=Fb();r.hooks.callHook("app:error",t),n.value=n.value||t}catch{throw t}return t},XL=async(e={})=>{const t=sn(),r=Fb();t.callHook("app:error:cleared",e),e.redirect&&await Bo().replace(e.redirect),r.value=OL},ZL=e=>!!e&&typeof e=="object"&&j8 in e,Nb=e=>{const t=mA(e);return Object.defineProperty(t,j8,{value:!0,configurable:!1,writable:!1}),t},YL=-1,QL=-2,e7=-3,t7=-4,r7=-5,n7=-6;function i7(e,t){return s7(JSON.parse(e),t)}function s7(e,t){if(typeof e=="number")return s(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,n=Array(r.length);function s(i,o=!1){if(i===YL)return;if(i===e7)return NaN;if(i===t7)return 1/0;if(i===r7)return-1/0;if(i===n7)return-0;if(o)throw new Error("Invalid input");if(i in n)return n[i];const a=r[i];if(!a||typeof a!="object")n[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],l=t==null?void 0:t[c];if(l)return n[i]=l(s(a[1]));switch(c){case"Date":n[i]=new Date(a[1]);break;case"Set":const u=new Set;n[i]=u;for(let f=1;f<a.length;f+=1)u.add(s(a[f]));break;case"Map":const d=new Map;n[i]=d;for(let f=1;f<a.length;f+=2)d.set(s(a[f]),s(a[f+1]));break;case"RegExp":n[i]=new RegExp(a[1],a[2]);break;case"Object":n[i]=Object(a[1]);break;case"BigInt":n[i]=BigInt(a[1]);break;case"null":const h=Object.create(null);n[i]=h;for(let f=1;f<a.length;f+=2)h[a[f]]=s(a[f+1]);break;default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);n[i]=c;for(let l=0;l<a.length;l+=1){const u=a[l];u!==QL&&(c[l]=s(u))}}else{const c={};n[i]=c;for(const l in a){const u=a[l];c[l]=s(u)}}return n[i]}return s(0)}const o7=new Set(["title","titleTemplate","script","style","noscript"]),Sv=new Set(["base","meta","link","style","script","noscript"]),a7=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),u7=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),U8=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),c7=typeof window<"u";function Dw(e){let t=9;for(let r=0;r<e.length;)t=Math.imul(t^e.charCodeAt(r++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function vA(e){if(e._h)return e._h;if(e._d)return Dw(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const r in e.props)t+=`${r}:${String(e.props[r])},`;return Dw(t)}function l7(e,t){return e instanceof Promise?e.then(t):t(e)}function wA(e,t,r,n){const s=n||L8(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(s instanceof Promise)return s.then(o=>wA(e,t,r,o));const i={tag:e,props:s};for(const o of U8){const a=i.props[o]!==void 0?i.props[o]:r[o];a!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||o7.has(i.tag))&&(i[o==="children"?"innerHTML":o]=a),delete i.props[o])}return i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(o=>({...i,props:{...i.props,content:o}})):i}function d7(e,t){var n;const r=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,s])=>s).map(([s,i])=>e==="style"?`${s}:${i}`:s)),(n=String(Array.isArray(t)?t.join(r):t))==null?void 0:n.split(r).filter(s=>!!s.trim()).join(r)}function K8(e,t,r,n){for(let s=n;s<r.length;s+=1){const i=r[s];if(i==="class"||i==="style"){e[i]=d7(i,e[i]);continue}if(e[i]instanceof Promise)return e[i].then(o=>(e[i]=o,K8(e,t,r,s)));if(!t&&!U8.has(i)){const o=String(e[i]),a=i.startsWith("data-");o==="true"||o===""?e[i]=a?"true":!0:e[i]||(a&&o==="false"?e[i]="false":delete e[i])}}}function L8(e,t=!1){const r=K8(e,t,Object.keys(e),0);return r instanceof Promise?r.then(()=>e):e}const f7=10;function q8(e,t,r){for(let n=r;n<t.length;n+=1){const s=t[n];if(s instanceof Promise)return s.then(i=>(t[n]=i,q8(e,t,n)));Array.isArray(s)?e.push(...s):e.push(s)}}function p7(e){const t=[],r=e.resolvedInput;for(const s in r){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const i=r[s];if(!(i===void 0||!a7.has(s))){if(Array.isArray(i)){for(const o of i)t.push(wA(s,o,e));continue}t.push(wA(s,i,e))}}if(t.length===0)return[];const n=[];return l7(q8(n,t,0),()=>n.map((s,i)=>(s._e=e._i,e.mode&&(s._m=e.mode),s._p=(e._i<<f7)+i,s)))}const M5=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),j5={base:-10,title:10},U5={critical:-80,high:-10,low:20};function Cw(e){const t=e.tagPriority;if(typeof t=="number")return t;let r=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?r=-30:e.props.charset?r=-20:e.props.name==="viewport"&&(r=-15):e.tag==="link"&&e.props.rel==="preconnect"?r=20:e.tag in j5&&(r=j5[e.tag]),t&&t in U5?r+U5[t]:r}const h7=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],y7=["name","property","http-equiv"];function V8(e){const{props:t,tag:r}=e;if(u7.has(r))return r;if(r==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${r}:id:${t.id}`;for(const n of y7)if(t[n]!==void 0)return`${r}:${n}:${t[n]}`;return!1}const nl="%separator";function m7(e,t){var n;let r;if(t==="s"||t==="pageTitle")r=e.pageTitle;else if(t.includes(".")){const s=t.indexOf(".");r=(n=e[t.substring(0,s)])==null?void 0:n[t.substring(s+1)]}else r=e[t];return r!==void 0?(r||"").replace(/"/g,'\\"'):void 0}const g7=new RegExp(`${nl}(?:\\s*${nl})*`,"g");function ag(e,t,r){if(typeof e!="string"||!e.includes("%"))return e;let n=e;try{n=decodeURI(e)}catch{}const s=n.match(/%\w+(?:\.\w+)?/g);if(!s)return e;const i=e.includes(nl);return e=e.replace(/%\w+(?:\.\w+)?/g,o=>{if(o===nl||!s.includes(o))return o;const a=m7(t,o.slice(1));return a!==void 0?a:o}).trim(),i&&(e.endsWith(nl)&&(e=e.slice(0,-nl.length)),e.startsWith(nl)&&(e=e.slice(nl.length)),e=e.replace(g7,r).trim()),e}function K5(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function H8(e,t={}){const r=t.document||e.resolvedOptions.document;if(!r||!e.dirty)return;const n={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",n),!!n.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async s=>{var d;const i=(await e.resolveTags()).map(h=>({tag:h,id:Sv.has(h.tag)?vA(h):h.tag,shouldRender:!0}));let o=e._dom;if(!o){o={elMap:{htmlAttrs:r.documentElement,bodyAttrs:r.body}};const h=new Set;for(const f of["body","head"]){const p=(d=r[f])==null?void 0:d.children;for(const y of p){const _=y.tagName.toLowerCase();if(!Sv.has(_))continue;const b={tag:_,props:await L8(y.getAttributeNames().reduce((w,x)=>({...w,[x]:y.getAttribute(x)}),{})),innerHTML:y.innerHTML},v=V8(b);let g=v,m=1;for(;g&&h.has(g);)g=`${v}:${m++}`;g&&(b._d=g,h.add(g)),o.elMap[y.getAttribute("data-hid")||vA(b)]=y}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function a(h,f,p){const y=`${h}:${f}`;o.sideEffects[y]=p,delete o.pendingSideEffects[y]}function c({id:h,$el:f,tag:p}){const y=p.tag.endsWith("Attrs");if(o.elMap[h]=f,y||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),a(h,"el",()=>{var _;(_=o.elMap[h])==null||_.remove(),delete o.elMap[h]})),p._eventHandlers)for(const _ in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,_)&&f.getAttribute(`data-${_}`)!==""&&((p.tag==="bodyAttrs"?r.defaultView:f).addEventListener(_.substring(2),p._eventHandlers[_].bind(f)),f.setAttribute(`data-${_}`,""));for(const _ in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,_))continue;const b=p.props[_],v=`attr:${_}`;if(_==="class"){if(!b)continue;for(const g of b.split(" "))y&&a(h,`${v}:${g}`,()=>f.classList.remove(g)),!f.classList.contains(g)&&f.classList.add(g)}else if(_==="style"){if(!b)continue;for(const g of b.split(";")){const m=g.indexOf(":"),w=g.substring(0,m).trim(),x=g.substring(m+1).trim();a(h,`${v}:${w}`,()=>{f.style.removeProperty(w)}),f.style.setProperty(w,x)}}else f.getAttribute(_)!==b&&f.setAttribute(_,b===!0?"":String(b)),y&&a(h,v,()=>f.removeAttribute(_))}}const l=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of i){const{tag:f,shouldRender:p,id:y}=h;if(p){if(f.tag==="title"){r.title=f.textContent;continue}h.$el=h.$el||o.elMap[y],h.$el?c(h):Sv.has(f.tag)&&l.push(h)}}for(const h of l){const f=h.tag.tagPosition||"head";h.$el=r.createElement(h.tag.tag),c(h),u[f]=u[f]||r.createDocumentFragment(),u[f].appendChild(h.$el)}for(const h of i)await e.hooks.callHook("dom:renderTag",h,r,a);u.head&&r.head.appendChild(u.head),u.bodyOpen&&r.body.insertBefore(u.bodyOpen,r.body.firstChild),u.bodyClose&&r.body.appendChild(u.bodyClose);for(const h in o.pendingSideEffects)o.pendingSideEffects[h]();e._dom=o,await e.hooks.callHook("dom:rendered",{renders:i}),s()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function v7(e,t={}){const r=t.delayFn||(n=>setTimeout(n,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(n=>r(()=>H8(e,t).then(()=>{delete e._domDebouncedUpdatePromise,n()})))}function w7(e){return t=>{var n,s;const r=((s=(n=t.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return r&&t.push(JSON.parse(r)),{mode:"client",hooks:{"entries:updated":i=>{v7(i,e)}}}}}const b7=new Set(["templateParams","htmlAttrs","bodyAttrs"]),_7={hooks:{"tag:normalise":({tag:e})=>{e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.key&&(e.key=e.props.key,delete e.props.key);const t=V8(e);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete e.key;const r=t||(e.key?`${e.tag}:${e.key}`:!1);r&&(e._d=r)},"tags:resolve":e=>{const t=Object.create(null);for(const n of e.tags){const s=(n.key?`${n.tag}:${n.key}`:n._d)||vA(n),i=t[s];if(i){let a=n==null?void 0:n.tagDuplicateStrategy;if(!a&&b7.has(n.tag)&&(a="merge"),a==="merge"){const c=i.props;c.style&&n.props.style&&(c.style[c.style.length-1]!==";"&&(c.style+=";"),n.props.style=`${c.style} ${n.props.style}`),c.class&&n.props.class?n.props.class=`${c.class} ${n.props.class}`:c.class&&(n.props.class=c.class),t[s].props={...c,...n.props};continue}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);continue}else if(Cw(n)>Cw(i))continue}if(!(n.innerHTML||n.textContent||Object.keys(n.props).length!==0)&&Sv.has(n.tag)){delete t[s];continue}t[s]=n}const r=[];for(const n in t){const s=t[n],i=s._duped;r.push(s),i&&(delete s._duped,r.push(...i))}e.tags=r,e.tags=e.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},E7=new Set(["script","link","bodyAttrs"]),A7=e=>({hooks:{"tags:resolve":t=>{for(const r of t.tags){if(!E7.has(r.tag))continue;const n=r.props;for(const s in n){if(s[0]!=="o"||s[1]!=="n"||!Object.prototype.hasOwnProperty.call(n,s))continue;const i=n[s];typeof i=="function"&&(e.ssr&&M5.has(s)?n[s]=`this.dataset.${s}fired = true`:delete n[s],r._eventHandlers=r._eventHandlers||{},r._eventHandlers[s]=i)}e.ssr&&r._eventHandlers&&(r.props.src||r.props.href)&&(r.key=r.key||Dw(r.props.src||r.props.href))}},"dom:renderTag":({$el:t,tag:r})=>{var s,i;const n=t==null?void 0:t.dataset;if(n)for(const o in n){if(!o.endsWith("fired"))continue;const a=o.slice(0,-5);M5.has(a)&&((i=(s=r._eventHandlers)==null?void 0:s[a])==null||i.call(t,new Event(a.substring(2))))}}}}),S7=new Set(["link","style","script","noscript"]),x7={hooks:{"tag:normalise":({tag:e})=>{e.key&&S7.has(e.tag)&&(e.props["data-hid"]=e._h=Dw(e.key))}}},$7={mode:"server",hooks:{"tags:beforeResolve":e=>{const t={};let r=!1;for(const n of e.tags)n._m!=="server"||n.tag!=="titleTemplate"&&n.tag!=="templateParams"&&n.tag!=="title"||(t[n.tag]=n.tag==="title"||n.tag==="titleTemplate"?n.textContent:n.props,r=!0);r&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},D7={hooks:{"tags:resolve":e=>{var t;for(const r of e.tags)if(typeof r.tagPriority=="string")for(const{prefix:n,offset:s}of h7){if(!r.tagPriority.startsWith(n))continue;const i=r.tagPriority.substring(n.length),o=(t=e.tags.find(a=>a._d===i))==null?void 0:t._p;if(o!==void 0){r._p=o+s;break}}e.tags.sort((r,n)=>{const s=Cw(r),i=Cw(n);return s<i?-1:s>i?1:r._p-n._p})}}},C7={meta:"content",link:"href",htmlAttrs:"lang"},P7=["innerHTML","textContent"],k7=e=>({hooks:{"tags:resolve":t=>{var o;const{tags:r}=t;let n;for(let a=0;a<r.length;a+=1)r[a].tag==="templateParams"&&(n=t.tags.splice(a,1)[0].props,a-=1);const s=n||{},i=s.separator||"|";delete s.separator,s.pageTitle=ag(s.pageTitle||((o=r.find(a=>a.tag==="title"))==null?void 0:o.textContent)||"",s,i);for(const a of r){if(a.processTemplateParams===!1)continue;const c=C7[a.tag];if(c&&typeof a.props[c]=="string")a.props[c]=ag(a.props[c],s,i);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const l of P7)typeof a[l]=="string"&&(a[l]=ag(a[l],s,i))}e._templateParams=s,e._separator=i},"tags:afterResolve":({tags:t})=>{let r;for(let n=0;n<t.length;n+=1){const s=t[n];s.tag==="title"&&s.processTemplateParams!==!1&&(r=s)}r!=null&&r.textContent&&(r.textContent=ag(r.textContent,e._templateParams,e._separator))}}}),O7={hooks:{"tags:resolve":e=>{const{tags:t}=e;let r,n;for(let s=0;s<t.length;s+=1){const i=t[s];i.tag==="title"?r=i:i.tag==="titleTemplate"&&(n=i)}if(n&&r){const s=K5(n.textContent,r.textContent);s!==null?r.textContent=s||r.textContent:e.tags.splice(e.tags.indexOf(r),1)}else if(n){const s=K5(n.textContent);s!==null&&(n.textContent=s,n.tag="title",n=void 0)}n&&e.tags.splice(e.tags.indexOf(n),1)}}},T7={hooks:{"tags:afterResolve":e=>{for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let z8;function I7(e={}){const t=B7(e);return t.use(w7()),z8=t}function L5(e,t){return!e||e==="server"&&t||e==="client"&&!t}function B7(e={}){const t=O8();t.addHooks(e.hooks||{}),e.document=e.document||(c7?document:void 0);const r=!e.document,n=()=>{a.dirty=!0,t.callHook("entries:updated",a)};let s=0,i=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return i},use(c){const l=typeof c=="function"?c(a):c;(!l.key||!o.some(u=>u.key===l.key))&&(o.push(l),L5(l.mode,r)&&t.addHooks(l.hooks||{}))},push(c,l){l==null||delete l.head;const u={_i:s++,input:c,...l};return L5(u.mode,r)&&(i.push(u),n()),{dispose(){i=i.filter(d=>d._i!==u._i),n()},patch(d){for(const h of i)h._i===u._i&&(h.input=u.input=d);n()}}},async resolveTags(){const c={tags:[],entries:[...i]};await t.callHook("entries:resolve",c);for(const l of c.entries){const u=l.resolvedInput||l.input;if(l.resolvedInput=await(l.transform?l.transform(u):u),l.resolvedInput)for(const d of await p7(l)){const h={tag:d,entry:l,resolvedOptions:a.resolvedOptions};await t.callHook("tag:normalise",h),c.tags.push(h.tag)}}return await t.callHook("tags:beforeResolve",c),await t.callHook("tags:resolve",c),await t.callHook("tags:afterResolve",c),c.tags},ssr:r};return[_7,$7,A7,x7,D7,k7,O7,T7,...(e==null?void 0:e.plugins)||[]].forEach(c=>a.use(c)),a.hooks.callHook("init",a),a}function F7(){return z8}const N7=g8[0]==="3";function R7(e){return typeof e=="function"?e():Or(e)}function Pw(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t=R7(e);if(!e||!t)return t;if(Array.isArray(t))return t.map(r=>Pw(r));if(typeof t=="object"){const r={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(n==="titleTemplate"||n[0]==="o"&&n[1]==="n"){r[n]=Or(t[n]);continue}r[n]=Pw(t[n])}return r}return t}const M7={hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=Pw(t.input)}}},W8="usehead";function j7(e){return{install(r){N7&&(r.config.globalProperties.$unhead=e,r.config.globalProperties.$head=e,r.provide(W8,e))}}.install}function U7(e={}){e.domDelayFn=e.domDelayFn||(r=>fh(()=>setTimeout(()=>r(),0)));const t=I7(e);return t.use(M7),t.install=j7(t),t}const bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_A="__unhead_injection_handler__";function K7(e){bA[_A]=e}function L7(){if(_A in bA)return bA[_A]();const e=zi(W8);return e||F7()}function q7(e,t={}){const r=t.head||L7();if(r)return r.ssr?r.push(e,t):V7(r,e,t)}function V7(e,t,r={}){const n=Da(!1),s=Da({});gU(()=>{s.value=n.value?{}:Pw(t)});const i=e.push(s.value,r);return wl(s,a=>{i.patch(a)}),Ob()&&(Pb(()=>{i.dispose()}),IB(()=>{n.value=!0}),TB(()=>{n.value=!1})),i}let xv,$v;function H7(){return xv=$fetch(kS(`builds/meta/${Ib().app.buildId}.json`),{responseType:"json"}),xv.then(e=>{$v=UL(e.matcher)}).catch(e=>{console.error("[nuxt] Error fetching app manifest.",e)}),xv}function Rb(){return xv||H7()}async function OS(e){if(await Rb(),!$v)return console.error("[nuxt] Error creating app manifest matcher.",$v),{};try{return N8({},...$v.matchAll(e).reverse())}catch(t){return console.error("[nuxt] Error matching route rules.",t),{}}}async function q5(e,t={}){const r=await W7(e,t),n=sn(),s=n._payloadCache=n._payloadCache||{};return r in s||(s[r]=G8(e).then(i=>i?J8(r).then(o=>o||(delete s[r],null)):(s[r]=null,null))),s[r]}const z7="_payload.json";async function W7(e,t={}){const r=new URL(e,"http://localhost");if(r.host!=="localhost"||Bf(r.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const n=Ib(),s=t.hash||(t.fresh?Date.now():n.app.buildId),i=n.app.cdnURL,o=i&&await G8(e)?i:n.app.baseURL;return CS(o,r.pathname,z7+(s?`?${s}`:""))}async function J8(e){const t=fetch(e).then(r=>r.text().then(X8));try{return await t}catch(r){console.warn("[nuxt] Cannot load payload ",e,r)}return null}async function G8(e=M8().path){if(e=DS(e),(await Rb()).prerendered.includes(e))return!0;const r=await OS(e);return!!r.prerender&&!r.redirect}let ed=null;async function J7(){var n;if(ed)return ed;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const t=await X8(e.textContent||""),r=e.dataset.src?await J8(e.dataset.src):void 0;return ed={...t,...r,...window.__NUXT__},(n=ed.config)!=null&&n.public&&(ed.config.public=tc(ed.config.public)),ed}async function X8(e){return await i7(e,sn()._payloadRevivers)}function G7(e,t){sn()._payloadRevivers[e]=t}const V5={NuxtError:e=>Nb(e),EmptyShallowRef:e=>km(e==="_"?void 0:e==="0n"?BigInt(0):Aw(e)),EmptyRef:e=>Da(e==="_"?void 0:e==="0n"?BigInt(0):Aw(e)),ShallowRef:e=>km(e),ShallowReactive:e=>Uu(e),Ref:e=>Da(e),Reactive:e=>tc(e)},X7=nc({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,r;for(const n in V5)G7(n,V5[n]);Object.assign(e.payload,([t,r]=kp(()=>e.runWithContext(J7)),t=await t,r(),t)),window.__NUXT__=e.payload}}),Z7=[],Y7=nc({name:"nuxt:head",enforce:"pre",setup(e){const t=U7({plugins:Z7});K7(()=>sn().vueApp._context.provides.usehead),e.vueApp.use(t);{let r=!0;const n=async()=>{r=!1,await H8(t)};t.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!r}),e.hooks.hook("page:start",()=>{r=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||n()}),e.hooks.hook("app:error",n),e.hooks.hook("app:suspense:resolve",n)}}});/*!
  * vue-router v4.4.4
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ap=typeof document<"u";function Z8(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Q7(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Z8(e.default)}const sr=Object.assign;function G1(e,t){const r={};for(const n in t){const s=t[n];r[n]=Fo(s)?s.map(e):e(s)}return r}const nm=()=>{},Fo=Array.isArray,Y8=/#/g,eq=/&/g,tq=/\//g,rq=/=/g,nq=/\?/g,Q8=/\+/g,iq=/%5B/g,sq=/%5D/g,e6=/%5E/g,oq=/%60/g,t6=/%7B/g,aq=/%7C/g,r6=/%7D/g,uq=/%20/g;function TS(e){return encodeURI(""+e).replace(aq,"|").replace(iq,"[").replace(sq,"]")}function cq(e){return TS(e).replace(t6,"{").replace(r6,"}").replace(e6,"^")}function EA(e){return TS(e).replace(Q8,"%2B").replace(uq,"+").replace(Y8,"%23").replace(eq,"%26").replace(oq,"`").replace(t6,"{").replace(r6,"}").replace(e6,"^")}function lq(e){return EA(e).replace(rq,"%3D")}function dq(e){return TS(e).replace(Y8,"%23").replace(nq,"%3F")}function fq(e){return e==null?"":dq(e).replace(tq,"%2F")}function Nm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const pq=/\/$/,hq=e=>e.replace(pq,"");function X1(e,t,r="/"){let n,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(n=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(n=n||t.slice(0,a),o=t.slice(a,t.length)),n=vq(n??t,r),{fullPath:n+(i&&"?")+i+o,path:n,query:s,hash:Nm(o)}}function yq(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function H5(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function mq(e,t,r){const n=t.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&qp(t.matched[n],r.matched[s])&&n6(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function qp(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function n6(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!gq(e[r],t[r]))return!1;return!0}function gq(e,t){return Fo(e)?z5(e,t):Fo(t)?z5(t,e):e===t}function z5(e,t){return Fo(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function vq(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const go={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Rm;(function(e){e.pop="pop",e.push="push"})(Rm||(Rm={}));var im;(function(e){e.back="back",e.forward="forward",e.unknown=""})(im||(im={}));function wq(e){if(!e)if(ap){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),hq(e)}const bq=/^[^#]+#/;function _q(e,t){return e.replace(bq,"#")+t}function Eq(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const Mb=()=>({left:window.scrollX,top:window.scrollY});function Aq(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;t=Eq(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function W5(e,t){return(history.state?history.state.position-t:-1)+e}const AA=new Map;function Sq(e,t){AA.set(e,t)}function xq(e){const t=AA.get(e);return AA.delete(e),t}let $q=()=>location.protocol+"//"+location.host;function i6(e,t){const{pathname:r,search:n,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),H5(c,"")}return H5(r,e)+n+s}function Dq(e,t,r,n){let s=[],i=[],o=null;const a=({state:h})=>{const f=i6(e,location),p=r.value,y=t.value;let _=0;if(h){if(r.value=f,t.value=h,o&&o===p){o=null;return}_=y?h.position-y.position:0}else n(f);s.forEach(b=>{b(r.value,p,{delta:_,type:Rm.pop,direction:_?_>0?im.forward:im.back:im.unknown})})};function c(){o=r.value}function l(h){s.push(h);const f=()=>{const p=s.indexOf(h);p>-1&&s.splice(p,1)};return i.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(sr({},h.state,{scroll:Mb()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function J5(e,t,r,n=!1,s=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:s?Mb():null}}function Cq(e){const{history:t,location:r}=window,n={value:i6(e,r)},s={value:t.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const d=e.indexOf("#"),h=d>-1?(r.host&&document.querySelector("base")?e:e.slice(d))+c:$q()+e+c;try{t[u?"replaceState":"pushState"](l,"",h),s.value=l}catch(f){console.error(f),r[u?"replace":"assign"](h)}}function o(c,l){const u=sr({},t.state,J5(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),n.value=c}function a(c,l){const u=sr({},s.value,t.state,{forward:c,scroll:Mb()});i(u.current,u,!0);const d=sr({},J5(n.value,c,null),{position:u.position+1},l);i(c,d,!1),n.value=c}return{location:n,state:s,push:a,replace:o}}function s6(e){e=wq(e);const t=Cq(e),r=Dq(e,t.state,t.location,t.replace);function n(i,o=!0){o||r.pauseListeners(),history.go(i)}const s=sr({location:"",base:e,go:n,createHref:_q.bind(null,e)},t,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Pq(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),s6(e)}function kq(e){return typeof e=="string"||e&&typeof e=="object"}function o6(e){return typeof e=="string"||typeof e=="symbol"}const a6=Symbol("");var G5;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(G5||(G5={}));function Vp(e,t){return sr(new Error,{type:e,[a6]:!0},t)}function Ya(e,t){return e instanceof Error&&a6 in e&&(t==null||!!(e.type&t))}const X5="[^/]+?",Oq={sensitive:!1,strict:!1,start:!0,end:!0},Tq=/[.+*?^${}()[\]/\\]/g;function Iq(e,t){const r=sr({},Oq,t),n=[];let s=r.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];r.strict&&!l.length&&(s+="/");for(let d=0;d<l.length;d++){const h=l[d];let f=40+(r.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(Tq,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:y,optional:_,regexp:b}=h;i.push({name:p,repeatable:y,optional:_});const v=b||X5;if(v!==X5){f+=10;try{new RegExp(`(${v})`)}catch(m){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+m.message)}}let g=y?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;d||(g=_&&l.length<2?`(?:/${g})`:"/"+g),_&&(g+="?"),s+=g,f+=20,_&&(f+=-8),y&&(f+=-20),v===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&(s+="(?:/|$)");const o=new RegExp(s,r.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=i[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function c(l){let u="",d=!1;for(const h of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:y,optional:_}=f,b=p in l?l[p]:"";if(Fo(b)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Fo(b)?b.join("/"):b;if(!v)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=v}}return u||"/"}return{re:o,score:n,keys:i,parse:a,stringify:c}}function Bq(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function u6(e,t){let r=0;const n=e.score,s=t.score;for(;r<n.length&&r<s.length;){const i=Bq(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(Z5(n))return 1;if(Z5(s))return-1}return s.length-n.length}function Z5(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Fq={type:0,value:""},Nq=/[a-zA-Z0-9_]/;function Rq(e){if(!e)return[[]];if(e==="/")return[[Fq]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${r})/"${l}": ${f}`)}let r=0,n=r;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function d(){l&&(r===0?i.push({type:0,value:l}):r===1||r===2||r===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:c==="("?r=2:Nq.test(c)?h():(d(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:r=3:u+=c;break;case 3:d(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${l}"`),d(),o(),s}function Mq(e,t,r){const n=Iq(Rq(e.path),r),s=sr(n,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function jq(e,t){const r=[],n=new Map;t=eC({strict:!1,end:!0,sensitive:!1},t);function s(d){return n.get(d)}function i(d,h,f){const p=!f,y=Uq(d);y.aliasOf=f&&f.record;const _=eC(t,d),b=[y];if("alias"in d){const m=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of m)b.push(sr({},y,{components:f?f.record.components:y.components,path:w,aliasOf:f?f.record:y}))}let v,g;for(const m of b){const{path:w}=m;if(h&&w[0]!=="/"){const x=h.record.path,S=x[x.length-1]==="/"?"":"/";m.path=h.record.path+(w&&S+w)}if(v=Mq(m,h,_),f?f.alias.push(v):(g=g||v,g!==v&&g.alias.push(v),p&&d.name&&!Q5(v)&&o(d.name)),c6(v)&&c(v),y.children){const x=y.children;for(let S=0;S<x.length;S++)i(x[S],v,f&&f.children[S])}f=f||v}return g?()=>{o(g)}:nm}function o(d){if(o6(d)){const h=n.get(d);h&&(n.delete(d),r.splice(r.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=r.indexOf(d);h>-1&&(r.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return r}function c(d){const h=qq(d,r);r.splice(h,0,d),d.record.name&&!Q5(d)&&n.set(d.record.name,d)}function l(d,h){let f,p={},y,_;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw Vp(1,{location:d});_=f.record.name,p=sr(Y5(h.params,f.keys.filter(g=>!g.optional).concat(f.parent?f.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),d.params&&Y5(d.params,f.keys.map(g=>g.name))),y=f.stringify(p)}else if(d.path!=null)y=d.path,f=r.find(g=>g.re.test(y)),f&&(p=f.parse(y),_=f.record.name);else{if(f=h.name?n.get(h.name):r.find(g=>g.re.test(h.path)),!f)throw Vp(1,{location:d,currentLocation:h});_=f.record.name,p=sr({},h.params,d.params),y=f.stringify(p)}const b=[];let v=f;for(;v;)b.unshift(v.record),v=v.parent;return{name:_,path:y,params:p,matched:b,meta:Lq(b)}}e.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Y5(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function Uq(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Kq(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},mods:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Kq(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function Q5(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Lq(e){return e.reduce((t,r)=>sr(t,r.meta),{})}function eC(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function qq(e,t){let r=0,n=t.length;for(;r!==n;){const i=r+n>>1;u6(e,t[i])<0?n=i:r=i+1}const s=Vq(e);return s&&(n=t.lastIndexOf(s,n-1)),n}function Vq(e){let t=e;for(;t=t.parent;)if(c6(t)&&u6(e,t)===0)return t}function c6({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Hq(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(Q8," "),o=i.indexOf("="),a=Nm(o<0?i:i.slice(0,o)),c=o<0?null:Nm(i.slice(o+1));if(a in t){let l=t[a];Fo(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function tC(e){let t="";for(let r in e){const n=e[r];if(r=lq(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Fo(n)?n.map(i=>i&&EA(i)):[n&&EA(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+r,i!=null&&(t+="="+i))})}return t}function zq(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Fo(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return t}const Wq=Symbol(""),rC=Symbol(""),jb=Symbol(""),l6=Symbol(""),SA=Symbol("");function Oh(){let e=[];function t(n){return e.push(n),()=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function il(e,t,r,n,s,i=o=>o()){const o=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=h=>{h===!1?c(Vp(4,{from:r,to:t})):h instanceof Error?c(h):kq(h)?c(Vp(2,{from:t,to:h})):(o&&n.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>e.call(n&&n.instances[s],t,r,l));let d=Promise.resolve(u);e.length<3&&(d=d.then(l)),d.catch(h=>c(h))})}function Z1(e,t,r,n,s=i=>i()){const i=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Z8(c)){const u=(c.__vccOpts||c)[t];u&&i.push(il(u,r,n,o,a,s))}else{let l=c();i.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Q7(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&il(f,r,n,o,a,s)()}))}}return i}function nC(e){const t=zi(jb),r=zi(l6),n=Eo(()=>{const c=Or(e.to);return t.resolve(c)}),s=Eo(()=>{const{matched:c}=n.value,{length:l}=c,u=c[l-1],d=r.matched;if(!u||!d.length)return-1;const h=d.findIndex(qp.bind(null,u));if(h>-1)return h;const f=iC(c[l-2]);return l>1&&iC(u)===f&&d[d.length-1].path!==f?d.findIndex(qp.bind(null,c[l-2])):h}),i=Eo(()=>s.value>-1&&Zq(r.params,n.value.params)),o=Eo(()=>s.value>-1&&s.value===r.matched.length-1&&n6(r.params,n.value.params));function a(c={}){return Xq(c)?t[Or(e.replace)?"replace":"push"](Or(e.to)).catch(nm):Promise.resolve()}return{route:n,href:Eo(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}const Jq=ph({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:nC,setup(e,{slots:t}){const r=tc(nC(e)),{options:n}=zi(jb),s=Eo(()=>({[sC(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[sC(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=t.default&&t.default(r);return e.custom?i:Ea("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),Gq=Jq;function Xq(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Zq(e,t){for(const r in t){const n=t[r],s=e[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Fo(s)||s.length!==n.length||n.some((i,o)=>i!==s[o]))return!1}return!0}function iC(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const sC=(e,t,r)=>e??t??r,Yq=ph({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=zi(SA),s=Eo(()=>e.route||n.value),i=zi(rC,0),o=Eo(()=>{let l=Or(i);const{matched:u}=s.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=Eo(()=>s.value.matched[o.value]);rf(rC,Eo(()=>o.value+1)),rf(Wq,a),rf(SA,s);const c=Da();return wl(()=>[c.value,a.value,e.name],([l,u,d],[h,f,p])=>{u&&(u.instances[d]=l,f&&f!==u&&l&&l===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!qp(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(y=>y(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,d=a.value,h=d&&d.components[u];if(!h)return oC(r.default,{Component:h,route:l});const f=d.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,_=Ea(h,sr({},p,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return oC(r.default,{Component:_,route:l})||_}}});function oC(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const d6=Yq;function Qq(e){const t=jq(e.routes,e),r=e.parseQuery||Hq,n=e.stringifyQuery||tC,s=e.history,i=Oh(),o=Oh(),a=Oh(),c=km(go);let l=go;ap&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=G1.bind(null,Q=>""+Q),d=G1.bind(null,fq),h=G1.bind(null,Nm);function f(Q,oe){let fe,he;return o6(Q)?(fe=t.getRecordMatcher(Q),he=oe):he=Q,t.addRoute(he,fe)}function p(Q){const oe=t.getRecordMatcher(Q);oe&&t.removeRoute(oe)}function y(){return t.getRoutes().map(Q=>Q.record)}function _(Q){return!!t.getRecordMatcher(Q)}function b(Q,oe){if(oe=sr({},oe||c.value),typeof Q=="string"){const M=X1(r,Q,oe.path),re=t.resolve({path:M.path},oe),N=s.createHref(M.fullPath);return sr(M,re,{params:h(re.params),hash:Nm(M.hash),redirectedFrom:void 0,href:N})}let fe;if(Q.path!=null)fe=sr({},Q,{path:X1(r,Q.path,oe.path).path});else{const M=sr({},Q.params);for(const re in M)M[re]==null&&delete M[re];fe=sr({},Q,{params:d(M)}),oe.params=d(oe.params)}const he=t.resolve(fe,oe),_e=Q.hash||"";he.params=u(h(he.params));const Ie=yq(n,sr({},Q,{hash:cq(_e),path:he.path})),F=s.createHref(Ie);return sr({fullPath:Ie,hash:_e,query:n===tC?zq(Q.query):Q.query||{}},he,{redirectedFrom:void 0,href:F})}function v(Q){return typeof Q=="string"?X1(r,Q,c.value.path):sr({},Q)}function g(Q,oe){if(l!==Q)return Vp(8,{from:oe,to:Q})}function m(Q){return S(Q)}function w(Q){return m(sr(v(Q),{replace:!0}))}function x(Q){const oe=Q.matched[Q.matched.length-1];if(oe&&oe.redirect){const{redirect:fe}=oe;let he=typeof fe=="function"?fe(Q):fe;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=v(he):{path:he},he.params={}),sr({query:Q.query,hash:Q.hash,params:he.path!=null?{}:Q.params},he)}}function S(Q,oe){const fe=l=b(Q),he=c.value,_e=Q.state,Ie=Q.force,F=Q.replace===!0,M=x(fe);if(M)return S(sr(v(M),{state:typeof M=="object"?sr({},_e,M.state):_e,force:Ie,replace:F}),oe||fe);const re=fe;re.redirectedFrom=oe;let N;return!Ie&&mq(n,he,fe)&&(N=Vp(16,{to:re,from:he}),O(he,he,!0,!1)),(N?Promise.resolve(N):$(re,he)).catch(D=>Ya(D)?Ya(D,2)?D:q(D):z(D,re,he)).then(D=>{if(D){if(Ya(D,2))return S(sr({replace:F},v(D.to),{state:typeof D.to=="object"?sr({},_e,D.to.state):_e,force:Ie}),oe||re)}else D=T(re,he,!0,F,_e);return I(re,he,D),D})}function E(Q,oe){const fe=g(Q,oe);return fe?Promise.reject(fe):Promise.resolve()}function A(Q){const oe=C.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(Q):Q()}function $(Q,oe){let fe;const[he,_e,Ie]=eV(Q,oe);fe=Z1(he.reverse(),"beforeRouteLeave",Q,oe);for(const M of he)M.leaveGuards.forEach(re=>{fe.push(il(re,Q,oe))});const F=E.bind(null,Q,oe);return fe.push(F),Z(fe).then(()=>{fe=[];for(const M of i.list())fe.push(il(M,Q,oe));return fe.push(F),Z(fe)}).then(()=>{fe=Z1(_e,"beforeRouteUpdate",Q,oe);for(const M of _e)M.updateGuards.forEach(re=>{fe.push(il(re,Q,oe))});return fe.push(F),Z(fe)}).then(()=>{fe=[];for(const M of Ie)if(M.beforeEnter)if(Fo(M.beforeEnter))for(const re of M.beforeEnter)fe.push(il(re,Q,oe));else fe.push(il(M.beforeEnter,Q,oe));return fe.push(F),Z(fe)}).then(()=>(Q.matched.forEach(M=>M.enterCallbacks={}),fe=Z1(Ie,"beforeRouteEnter",Q,oe,A),fe.push(F),Z(fe))).then(()=>{fe=[];for(const M of o.list())fe.push(il(M,Q,oe));return fe.push(F),Z(fe)}).catch(M=>Ya(M,8)?M:Promise.reject(M))}function I(Q,oe,fe){a.list().forEach(he=>A(()=>he(Q,oe,fe)))}function T(Q,oe,fe,he,_e){const Ie=g(Q,oe);if(Ie)return Ie;const F=oe===go,M=ap?history.state:{};fe&&(he||F?s.replace(Q.fullPath,sr({scroll:F&&M&&M.scroll},_e)):s.push(Q.fullPath,_e)),c.value=Q,O(Q,oe,fe,F),q()}let R;function L(){R||(R=s.listen((Q,oe,fe)=>{if(!B.listening)return;const he=b(Q),_e=x(he);if(_e){S(sr(_e,{replace:!0}),he).catch(nm);return}l=he;const Ie=c.value;ap&&Sq(W5(Ie.fullPath,fe.delta),Mb()),$(he,Ie).catch(F=>Ya(F,12)?F:Ya(F,2)?(S(F.to,he).then(M=>{Ya(M,20)&&!fe.delta&&fe.type===Rm.pop&&s.go(-1,!1)}).catch(nm),Promise.reject()):(fe.delta&&s.go(-fe.delta,!1),z(F,he,Ie))).then(F=>{F=F||T(he,Ie,!1),F&&(fe.delta&&!Ya(F,8)?s.go(-fe.delta,!1):fe.type===Rm.pop&&Ya(F,20)&&s.go(-1,!1)),I(he,Ie,F)}).catch(nm)}))}let j=Oh(),U=Oh(),te;function z(Q,oe,fe){q(Q);const he=U.list();return he.length?he.forEach(_e=>_e(Q,oe,fe)):console.error(Q),Promise.reject(Q)}function ee(){return te&&c.value!==go?Promise.resolve():new Promise((Q,oe)=>{j.add([Q,oe])})}function q(Q){return te||(te=!Q,L(),j.list().forEach(([oe,fe])=>Q?fe(Q):oe()),j.reset()),Q}function O(Q,oe,fe,he){const{scrollBehavior:_e}=e;if(!ap||!_e)return Promise.resolve();const Ie=!fe&&xq(W5(Q.fullPath,0))||(he||!fe)&&history.state&&history.state.scroll||null;return fh().then(()=>_e(Q,oe,Ie)).then(F=>F&&Aq(F)).catch(F=>z(F,Q,oe))}const Y=Q=>s.go(Q);let H;const C=new Set,B={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:y,resolve:b,options:e,push:m,replace:w,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:U.add,isReady:ee,install(Q){const oe=this;Q.component("RouterLink",Gq),Q.component("RouterView",d6),Q.config.globalProperties.$router=oe,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>Or(c)}),ap&&!H&&c.value===go&&(H=!0,m(s.location).catch(_e=>{}));const fe={};for(const _e in go)Object.defineProperty(fe,_e,{get:()=>c.value[_e],enumerable:!0});Q.provide(jb,oe),Q.provide(l6,Uu(fe)),Q.provide(SA,c);const he=Q.unmount;C.add(Q),Q.unmount=function(){C.delete(Q),C.size<1&&(l=go,R&&R(),R=null,c.value=go,H=!1,te=!1),he()}}};function Z(Q){return Q.reduce((oe,fe)=>oe.then(()=>A(fe)),Promise.resolve())}return B}function eV(e,t){const r=[],n=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>qp(l,a))?n.push(a):r.push(a));const c=e.matched[o];c&&(t.matched.find(l=>qp(l,c))||s.push(c))}return[r,n,s]}function Xve(){return zi(jb)}const tV=(e,t)=>t.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,r=>{var n;return((n=e.params[r.slice(1)])==null?void 0:n.toString())||""}),xA=(e,t)=>{const r=e.route.matched.find(s=>{var i;return((i=s.components)==null?void 0:i.default)===e.Component.type}),n=t??(r==null?void 0:r.meta.key)??(r&&tV(e.route,r));return typeof n=="function"?n(e.route):n},rV=(e,t)=>({default:()=>e?Ea(V9,e===!0?{}:e,t):t});function IS(e){return Array.isArray(e)?e:[e]}const nV="modulepreload",iV=function(e,t){return new URL(e,t).href},aC={},sV=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=iV(c,n),c in aC)return;aC[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const p=i[f];if(p.href===c&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":nV,l||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(i=>{for(const o of i||[]){if(o.status!=="rejected")continue;const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o.reason,window.dispatchEvent(a),!a.defaultPrevented)throw o.reason}return t()})},sm=(...e)=>sV(...e).catch(t=>{const r=new Event("nuxt.preloadError");throw r.payload=t,window.dispatchEvent(r),t}),Y1=[{name:"credentials",path:"/credentials",component:()=>sm(()=>import("./CkJ-HxsR.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(e=>e.default||e)},{name:"dashboard",path:"/dashboard",component:()=>sm(()=>import("./CWdF-QF3.js"),__vite__mapDeps([3,1,2,4,5,6,7]),import.meta.url).then(e=>e.default||e)},{name:"donate",path:"/donate",component:()=>sm(()=>import("./DGtAAYo-.js"),__vite__mapDeps([8,1,2,5,6]),import.meta.url).then(e=>e.default||e)}],oV=(e,t,r)=>(t=t===!0?{}:t,{default:()=>{var n;return t?Ea(e,t,r):(n=r.default)==null?void 0:n.call(r)}});function uC(e){const t=(e==null?void 0:e.meta.key)??e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,r=>{var n;return((n=e.params[r.slice(1)])==null?void 0:n.toString())||""});return typeof t=="function"?t(e):t}function aV(e,t){return e===t||t===go?!1:uC(e)!==uC(t)?!0:!e.matched.every((n,s)=>{var i,o;return n.components&&n.components.default===((o=(i=t.matched[s])==null?void 0:i.components)==null?void 0:o.default)})}const uV={scrollBehavior(e,t,r){var l;const n=sn(),s=((l=Bo().options)==null?void 0:l.scrollBehaviorType)??"auto";let i=r||void 0;const o=typeof e.meta.scrollToTop=="function"?e.meta.scrollToTop(e,t):e.meta.scrollToTop;if(!i&&t&&e&&o!==!1&&aV(e,t)&&(i={left:0,top:0}),e.path===t.path)return t.hash&&!e.hash?{left:0,top:0}:e.hash?{el:e.hash,top:cC(e.hash),behavior:s}:!1;const a=u=>!!(u.meta.pageTransition??pA),c=a(t)&&a(e)?"page:transition:finish":"page:finish";return new Promise(u=>{n.hooks.hookOnce(c,async()=>{await new Promise(d=>setTimeout(d,0)),e.hash&&(i={el:e.hash,top:cC(e.hash),behavior:s}),u(i)})})}};function cC(e){try{const t=document.querySelector(e);if(t)return(Number.parseFloat(getComputedStyle(t).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const cV={hashMode:!1,scrollBehaviorType:"auto"},Es={...cV,...uV},lV=async e=>{var c;let t,r;if(!((c=e.meta)!=null&&c.validate))return;const n=sn(),s=Bo(),i=([t,r]=kp(()=>Promise.resolve(e.meta.validate(e))),t=await t,r(),t);if(i===!0)return;const o=Nb({statusCode:i&&i.statusCode||404,statusMessage:i&&i.statusMessage||`Page Not Found: ${e.fullPath}`,data:{path:e.fullPath}}),a=s.beforeResolve(l=>{if(a(),l===e){const u=s.afterEach(async()=>{u(),await n.runWithContext(()=>vp(o)),window==null||window.history.pushState({},"",e.fullPath)});return!1}})},dV=async e=>{let t,r;const n=([t,r]=kp(()=>OS(e.path)),t=await t,r(),t);if(n.redirect)return Bf(n.redirect,{acceptRelative:!0})?(window.location.href=n.redirect,!1):n.redirect},fV=[lV,dV],om={};function pV(e,t,r){const{pathname:n,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){const l=i.includes(e.slice(o))?e.slice(o).length:1;let u=i.slice(l);return u[0]!=="/"&&(u="/"+u),k5(u,"")}const a=k5(n,e),c=!r||eL(a,r,{trailingSlash:!0})?a:r;return c+(c.includes("?")?"":s)+i}const hV=nc({name:"nuxt:router",enforce:"pre",async setup(e){var _;let t,r,n=Ib().app.baseURL;Es.hashMode&&!n.includes("#")&&(n+="#");const s=((_=Es.history)==null?void 0:_.call(Es,n))??(Es.hashMode?Pq(n):s6(n)),i=Es.routes?([t,r]=kp(()=>Es.routes(Y1)),t=await t,r(),t??Y1):Y1;let o;const a=Qq({...Es,scrollBehavior:(b,v,g)=>{if(v===go){o=g;return}if(Es.scrollBehavior){if(a.options.scrollBehavior=Es.scrollBehavior,"scrollRestoration"in window.history){const m=a.beforeEach(()=>{m(),window.history.scrollRestoration="manual"})}return Es.scrollBehavior(b,go,o||g)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),e.vueApp.use(a);const c=km(a.currentRoute.value);a.afterEach((b,v)=>{c.value=v}),Object.defineProperty(e.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=pV(n,window.location,e.payload.path),u=km(a.currentRoute.value),d=()=>{u.value=a.currentRoute.value};e.hook("page:finish",d),a.afterEach((b,v)=>{var g,m,w,x;((m=(g=b.matched[0])==null?void 0:g.components)==null?void 0:m.default)===((x=(w=v.matched[0])==null?void 0:w.components)==null?void 0:x.default)&&d()});const h={};for(const b in u.value)Object.defineProperty(h,b,{get:()=>u.value[b]});e._route=Uu(h),e._middleware=e._middleware||{global:[],named:{}};const f=Fb();a.afterEach(async(b,v,g)=>{delete e._processingMiddleware,!e.isHydrating&&f.value&&await e.runWithContext(XL),g&&await e.callHook("page:loading:end"),b.matched.length===0&&await e.runWithContext(()=>vp(mA({statusCode:404,fatal:!1,statusMessage:`Page not found: ${b.fullPath}`,data:{path:b.fullPath}})))});try{[t,r]=kp(()=>a.isReady()),await t,r()}catch(b){[t,r]=kp(()=>e.runWithContext(()=>vp(b))),await t,r()}const p=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;d();const y=e.payload.state._layout;return a.beforeEach(async(b,v)=>{var g;await e.callHook("page:loading:start"),b.meta=tc(b.meta),e.isHydrating&&y&&!Pl(b.meta.layout)&&(b.meta.layout=y),e._processingMiddleware=!0;{const m=new Set([...fV,...e._middleware.global]);for(const w of b.matched){const x=w.meta.middleware;if(x)for(const S of IS(x))m.add(S)}{const w=await e.runWithContext(()=>OS(b.path));if(w.appMiddleware)for(const x in w.appMiddleware)w.appMiddleware[x]?m.add(x):m.delete(x)}for(const w of m){const x=typeof w=="string"?e._middleware.named[w]||await((g=om[w])==null?void 0:g.call(om).then(E=>E.default||E)):w;if(!x)throw new Error(`Unknown route middleware: '${w}'.`);const S=await e.runWithContext(()=>x(b,v));if(!e.payload.serverRendered&&e.isHydrating&&(S===!1||S instanceof Error)){const E=S||mA({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await e.runWithContext(()=>vp(E)),!1}if(S!==!0&&(S||S===!1))return S}}}),a.onError(async()=>{delete e._processingMiddleware,await e.callHook("page:loading:end")}),e.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await a.replace({...p,force:!0}),a.options.scrollBehavior=Es.scrollBehavior}catch(b){await e.runWithContext(()=>vp(b))}}),{provide:{router:a}}}}),lC=globalThis.requestIdleCallback||(e=>{const t=Date.now(),r={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(r)},1)}),Zve=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),BS=e=>{const t=sn();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{lC(()=>e())}):lC(()=>e())},yV=nc({name:"nuxt:payload",setup(e){Bo().beforeResolve(async(t,r)=>{if(t.path===r.path)return;const n=await q5(t.path);n&&Object.assign(e.static.data,n.data)}),BS(()=>{var t;e.hooks.hook("link:prefetch",async r=>{const{hostname:n}=new URL(r,window.location.href);n===window.location.hostname&&await q5(r)}),((t=navigator.connection)==null?void 0:t.effectiveType)!=="slow-2g"&&setTimeout(Rb,1e3)})}}),mV=nc(()=>{const e=Bo();BS(()=>{e.beforeResolve(async()=>{await new Promise(t=>{setTimeout(t,100),requestAnimationFrame(()=>{setTimeout(t,0)})})})})}),gV=nc(e=>{let t;async function r(){const n=await Rb();t&&clearTimeout(t),t=setTimeout(r,F5);try{const s=await $fetch(kS("builds/latest.json")+`?${Date.now()}`);s.id!==n.id&&e.hooks.callHook("app:manifest:update",s)}catch{}}BS(()=>{t=setTimeout(r,F5)})});function vV(e={}){const t=e.path||window.location.pathname;let r={};try{r=Aw(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||(r==null?void 0:r.path)!==t||(r==null?void 0:r.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:sn().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}const wV=nc({name:"nuxt:chunk-reload",setup(e){const t=Bo(),r=Ib(),n=new Set;t.beforeEach(()=>{n.clear()}),e.hook("app:chunkError",({error:i})=>{n.add(i)});function s(i){const a="href"in i&&i.href[0]==="#"?r.app.baseURL+i.href:CS(r.app.baseURL,i.fullPath);vV({path:a,persistState:!0})}e.hook("app:manifest:update",()=>{t.beforeResolve(s)}),t.onError((i,o)=>{n.has(i)&&s(o)})}}),bV=nc({name:"nuxt:global-components"}),ug={},_V=nc({name:"nuxt:prefetch",setup(e){const t=Bo();e.hooks.hook("app:mounted",()=>{t.beforeEach(async r=>{var s;const n=(s=r==null?void 0:r.meta)==null?void 0:s.layout;n&&typeof ug[n]=="function"&&await ug[n]()})}),e.hooks.hook("link:prefetch",r=>{if(Bf(r))return;const n=t.resolve(r);if(!n)return;const s=n.meta.layout;let i=IS(n.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof om[o]=="function"&&om[o]();s&&typeof ug[s]=="function"&&ug[s]()})}}),EV=[X7,Y7,hV,yV,mV,gV,wV,bV,_V],AV=ph({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const t=e.renderKey,r=e.route,n={};for(const s in e.route)Object.defineProperty(n,s,{get:()=>t===e.renderKey?e.route[s]:r[s]});return rf(Bb,Uu(n)),()=>Ea(e.vnode,{ref:e.vnodeRef})}}),SV=ph({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:t,slots:r,expose:n}){const s=sn(),i=Da(),o=zi(Bb,null);let a;n({pageRef:i});const c=zi(WL,null);let l;const u=s.deferHydration();if(s.isHydrating){const d=s.hooks.hookOnce("app:error",u);Bo().beforeEach(d)}return e.pageKey&&wl(()=>e.pageKey,(d,h)=>{d!==h&&s.callHook("page:loading:start")}),()=>Ea(d6,{name:e.name,route:e.route,...t},{default:d=>{const h=$V(o,d.route,d.Component),f=o&&o.matched.length===d.route.matched.length;if(!d.Component){if(l&&!f)return l;u();return}if(l&&c&&!c.isCurrent(d.route))return l;if(h&&o&&(!c||c!=null&&c.isCurrent(o)))return f?l:null;const p=xA(d,e.pageKey);!s.isHydrating&&!DV(o,d.route,d.Component)&&a===p&&s.callHook("page:loading:end"),a=p;const y=!!(e.transition??d.route.meta.pageTransition??pA),_=y&&xV([e.transition,d.route.meta.pageTransition,pA,{onAfterLeave:()=>{s.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),b=e.keepalive??d.route.meta.keepalive??kL;return l=oV(zU,y&&_,rV(b,Ea(s8,{suspensible:!0,onPending:()=>s.callHook("page:start",d.Component),onResolve:()=>{fh(()=>s.callHook("page:finish",d.Component).then(()=>s.callHook("page:loading:end")).finally(u))}},{default:()=>{const v=Ea(AV,{key:p||void 0,vnode:r.default?Ea(ss,void 0,r.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:y,vnodeRef:i});return b&&(v.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),v}}))).default(),l}})}});function xV(e){const t=e.map(r=>({...r,onAfterLeave:r.onAfterLeave?IS(r.onAfterLeave):void 0}));return N8(...t)}function $V(e,t,r){if(!e)return!1;const n=t.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(r==null?void 0:r.type)});return!n||n===-1?!1:t.matched.slice(0,n).some((s,i)=>{var o,a,c;return((o=s.components)==null?void 0:o.default)!==((c=(a=e.matched[i])==null?void 0:a.components)==null?void 0:c.default)})||r&&xA({route:t,Component:r})!==xA({route:e,Component:r})}function DV(e,t,r){return e?t.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(r==null?void 0:r.type)})<t.matched.length-1:!1}const CV=window.setInterval;var br="0123456789abcdefghjkmnpqrstvwxyz",Ke=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,255,18,19,255,20,21,255,22,23,24,25,26,255,27,28,29,30,31,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]);function Q1(e){const t=new Array(26).fill("");if(e.length!==16)throw new Error("Invalid length");return t[0]=br[(e[0]&224)>>5],t[1]=br[e[0]&31],t[2]=br[(e[1]&248)>>3],t[3]=br[(e[1]&7)<<2|(e[2]&192)>>6],t[4]=br[(e[2]&62)>>1],t[5]=br[(e[2]&1)<<4|(e[3]&240)>>4],t[6]=br[(e[3]&15)<<1|(e[4]&128)>>7],t[7]=br[(e[4]&124)>>2],t[8]=br[(e[4]&3)<<3|(e[5]&224)>>5],t[9]=br[e[5]&31],t[10]=br[(e[6]&248)>>3],t[11]=br[(e[6]&7)<<2|(e[7]&192)>>6],t[12]=br[(e[7]&62)>>1],t[13]=br[(e[7]&1)<<4|(e[8]&240)>>4],t[14]=br[(e[8]&15)<<1|(e[9]&128)>>7],t[15]=br[(e[9]&124)>>2],t[16]=br[(e[9]&3)<<3|(e[10]&224)>>5],t[17]=br[e[10]&31],t[18]=br[(e[11]&248)>>3],t[19]=br[(e[11]&7)<<2|(e[12]&192)>>6],t[20]=br[(e[12]&62)>>1],t[21]=br[(e[12]&1)<<4|(e[13]&240)>>4],t[22]=br[(e[13]&15)<<1|(e[14]&128)>>7],t[23]=br[(e[14]&124)>>2],t[24]=br[(e[14]&3)<<3|(e[15]&224)>>5],t[25]=br[e[15]&31],t.join("")}function dC(e){if(e.length!==26)throw new Error("Invalid length");const r=new TextEncoder().encode(e);if(Ke[r[0]]===255||Ke[r[1]]===255||Ke[r[2]]===255||Ke[r[3]]===255||Ke[r[4]]===255||Ke[r[5]]===255||Ke[r[6]]===255||Ke[r[7]]===255||Ke[r[8]]===255||Ke[r[9]]===255||Ke[r[10]]===255||Ke[r[11]]===255||Ke[r[12]]===255||Ke[r[13]]===255||Ke[r[14]]===255||Ke[r[15]]===255||Ke[r[16]]===255||Ke[r[17]]===255||Ke[r[18]]===255||Ke[r[19]]===255||Ke[r[20]]===255||Ke[r[21]]===255||Ke[r[22]]===255||Ke[r[23]]===255||Ke[r[24]]===255||Ke[r[25]]===255)throw new Error("Invalid base32 character");const n=new Uint8Array(16);return n[0]=Ke[r[0]]<<5|Ke[r[1]],n[1]=Ke[r[2]]<<3|Ke[r[3]]>>2,n[2]=(Ke[r[3]]&3)<<6|Ke[r[4]]<<1|Ke[r[5]]>>4,n[3]=(Ke[r[5]]&15)<<4|Ke[r[6]]>>1,n[4]=(Ke[r[6]]&1)<<7|Ke[r[7]]<<2|Ke[r[8]]>>3,n[5]=(Ke[r[8]]&7)<<5|Ke[r[9]],n[6]=Ke[r[10]]<<3|Ke[r[11]]>>2,n[7]=(Ke[r[11]]&3)<<6|Ke[r[12]]<<1|Ke[r[13]]>>4,n[8]=(Ke[r[13]]&15)<<4|Ke[r[14]]>>1,n[9]=(Ke[r[14]]&1)<<7|Ke[r[15]]<<2|Ke[r[16]]>>3,n[10]=(Ke[r[16]]&7)<<5|Ke[r[17]],n[11]=Ke[r[18]]<<3|Ke[r[19]]>>2,n[12]=(Ke[r[19]]&3)<<6|Ke[r[20]]<<1|Ke[r[21]]>>4,n[13]=(Ke[r[21]]&15)<<4|Ke[r[22]]>>1,n[14]=(Ke[r[22]]&1)<<7|Ke[r[23]]<<2|Ke[r[24]]>>3,n[15]=(Ke[r[24]]&7)<<5|Ke[r[25]],n}function PV(e){let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Nd=Math.pow,fC="0123456789abcdef",kw=class{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,n){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(n)||e<0||t<0||r<0||n<0||e>0xffffffffffff||t>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");const s=new Uint8Array(16);return s[0]=e/Nd(2,40),s[1]=e/Nd(2,32),s[2]=e/Nd(2,24),s[3]=e/Nd(2,16),s[4]=e/Nd(2,8),s[5]=e,s[6]=112|t>>>8,s[7]=t,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=n>>>24,s[13]=n>>>16,s[14]=n>>>8,s[15]=n,new kw(s)}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=fC.charAt(this.bytes[t]>>>4),e+=fC.charAt(this.bytes[t]&15),(t===3||t===5||t===7||t===9)&&(e+="-");return e}clone(){return new kw(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let t=0;t<16;t++){const r=this.bytes[t]-e.bytes[t];if(r!==0)return Math.sign(r)}return 0}},kV=class{constructor(){this.timestamp=0,this.counter=0,this.random=new OV}generate(){const e=this.generateOrAbort();return e!==void 0?e:(this.timestamp=0,this.generateOrAbort())}generateOrAbort(){const r=Date.now();if(r>this.timestamp)this.timestamp=r,this.resetCounter();else if(r+1e4>this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return kw.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Nd(2,30)),this.counter&Nd(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}},f6=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(let t=0;t<e.length;t++)e[t]=Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536);return e};typeof crypto<"u"&&crypto.getRandomValues&&(f6=e=>crypto.getRandomValues(e));var OV=class{constructor(){this.buffer=new Uint32Array(8),this.cursor=99}nextUint32(){return this.cursor>=this.buffer.length&&(f6(this.buffer),this.cursor=0),this.buffer[this.cursor++]}},pC,TV=()=>(pC||(pC=new kV)).generate();function IV(e){if(e.length>63)return!1;let t,r,n;for(r=0,n=e.length;r<n;r+=1)if(t=e.charCodeAt(r),!(t>96&&t<123))return!1;return!0}var Ty=class{constructor(e,t=""){if(this.prefix=e,this.suffix=t,!IV(e))throw new Error("Invalid prefix. Must be at most 63 ascii letters [a-z]");if(this.prefix=e,t)this.suffix=t;else{const r=TV();this.suffix=Q1(r.bytes)}if(this.suffix.length!==26)throw new Error(`Invalid length. Suffix should have 26 characters, got ${t.length}`);if(this.suffix[0]>"7")throw new Error("Invalid suffix. First character must be in the range [0-7]");dC(this.suffix)}getType(){return this.prefix}getSuffix(){return this.suffix}asType(e){const t=this;if(t.prefix!==e)throw new Error(`Cannot convert TypeID of type ${t.prefix} to type ${e}`);return t}toUUIDBytes(){return dC(this.suffix)}toUUID(){return new kw(this.toUUIDBytes()).toString()}toString(){return this.prefix===""?this.suffix:`${this.prefix}_${this.suffix}`}static fromString(e){const t=e.split("_");if(t.length===1)return new Ty("",t[0]);if(t.length===2){if(t[0]==="")throw new Error(`Invalid TypeID. Prefix cannot be empty when there's a separator: ${e}`);return new Ty(t[0],t[1])}throw new Error(`Invalid TypeID string: ${e}`)}static fromUUIDBytes(e,t){const r=Q1(t);return new Ty(e,r)}static fromUUID(e,t){const r=Q1(PV(t));return new Ty(e,r)}};function FS(e="",t=""){return new Ty(e,t)}/*! Bundled license information:

uuidv7/dist/index.js:
  (**
   * uuidv7: An experimental implementation of the proposed UUID Version 7
   *
   * @license Apache-2.0
   * @copyright 2021-2023 LiosK
   * @packageDocumentation
   *)
*/function hC(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function BV(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function p6(e,...t){if(!BV(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function FV(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hC(e.outputLen),hC(e.blockLen)}function Ow(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function NV(e,t){p6(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const e_=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function h6(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const t_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qo=(e,t)=>e<<32-t|e>>>t,RV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!RV)throw new Error("Non little-endian hardware is not supported");function y6(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function NS(e){if(typeof e=="string"&&(e=y6(e)),!h6(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function m6(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];if(!h6(s))throw new Error("Uint8Array expected");t+=s.length}const r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){const i=e[n];r.set(i,s),s+=i.length}return r}let g6=class{clone(){return this._cloneInto()}};function v6(e){const t=n=>e().update(NS(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function RS(e=32){if(e_&&typeof e_.getRandomValues=="function")return e_.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function MV(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}let w6=class extends g6{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=t_(this.buffer)}update(t){Ow(this);const{view:r,buffer:n,blockLen:s}=this;t=NS(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=t_(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ow(this),NV(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;MV(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=t_(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}};const jV=(e,t,r)=>e&t^~e&r,UV=(e,t,r)=>e&t^e&r^t&r,KV=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pc=new Uint32Array(64);let LV=class extends w6{constructor(){super(64,32,8,!1),this.A=fc[0]|0,this.B=fc[1]|0,this.C=fc[2]|0,this.D=fc[3]|0,this.E=fc[4]|0,this.F=fc[5]|0,this.G=fc[6]|0,this.H=fc[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,r,n,s,i,o,a,c]}set(t,r,n,s,i,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)pc[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const h=pc[d-15],f=pc[d-2],p=qo(h,7)^qo(h,18)^h>>>3,y=qo(f,17)^qo(f,19)^f>>>10;pc[d]=y+pc[d-7]+p+pc[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=qo(a,6)^qo(a,11)^qo(a,25),f=u+h+jV(a,c,l)+KV[d]+pc[d]|0,y=(qo(n,2)^qo(n,13)^qo(n,22))+UV(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){pc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ol=v6(()=>new LV);var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function La(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qV(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}function VV(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function HV(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var zV=HV,WV=zV;let JV=class{constructor(t,r,n){ge(this,"name");ge(this,"prefix");ge(this,"baseEncode");this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},GV=class{constructor(t,r,n){ge(this,"name");ge(this,"prefix");ge(this,"baseDecode");ge(this,"prefixCodePoint");if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return b6(this,t)}},XV=class{constructor(t){ge(this,"decoders");this.decoders=t}or(t){return b6(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function b6(e,t){return new XV({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}let ZV=class{constructor(t,r,n,s){ge(this,"name");ge(this,"prefix");ge(this,"baseEncode");ge(this,"baseDecode");ge(this,"encoder");ge(this,"decoder");this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new JV(t,r,n),this.decoder=new GV(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function _6({name:e,prefix:t,encode:r,decode:n}){return new ZV(e,t,r,n)}function E6({name:e,prefix:t,alphabet:r}){const{encode:n,decode:s}=WV(r,e);return _6({prefix:t,name:e,encode:n,decode:i=>VV(s(i))})}function YV(e,t,r,n){const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function QV(e,t,r){const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o!==0&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function fs({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return _6({prefix:t,name:e,encode(s){return QV(s,n,r)},decode(s){return YV(s,n,r,e)}})}fs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});fs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});fs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});fs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});fs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});fs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});fs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});fs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const yC=fs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cg=E6({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});E6({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});fs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});fs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Qa=fs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});fs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function eH(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function tH(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function mC(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Th=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},gC=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const lg=new TextEncoder,td=new TextDecoder;let yo=class $i{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new $i(t,"ArrayBuffer")}static asyncIterable(t){if(!tH(t))throw new TypeError("Input must be of type AsyncIterable.");return new $i(t,"AsyncIterable")}static base32Z(t){return new $i(t,"Base32Z")}static base58Btc(t){return new $i(t,"Base58Btc")}static base64Url(t){return new $i(t,"Base64Url")}static bufferSource(t){return new $i(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new $i(t,"Hex")}static multibase(t){return new $i(t,"Multibase")}static object(t){return new $i(t,"Object")}static string(t){return new $i(t,"String")}static uint8Array(t){return new $i(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return cg.baseDecode(this.data).buffer;case"Base64Url":return Qa.baseDecode(this.data).buffer;case"BufferSource":{if(mC(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return eH(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Th(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return yC.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return cg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return cg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return Qa.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return Qa.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=lg.encode(t);return Qa.baseEncode(r)}case"String":{const t=lg.encode(this.data);return Qa.baseEncode(t)}case"Uint8Array":return Qa.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return Th(this,void 0,void 0,function*(){var t,r,n,s;switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=gC(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return $i.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return $i.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=Qa.baseDecode(this.data),r=td.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=td.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Th(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return td.decode(this.data);case"Base64Url":{const t=Qa.baseDecode(this.data);return td.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return td.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return Th(this,void 0,void 0,function*(){var t,r,n,s;switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=gC(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=td.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=td.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return yC.baseDecode(this.data);case"Base58Btc":return cg.baseDecode(this.data);case"Base64Url":return Qa.baseDecode(this.data);case"BufferSource":{const t=mC(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return lg.encode(t)}case"String":return lg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Th(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var rH=A6,vC=128,nH=127,iH=~nH,sH=Math.pow(2,31);function A6(e,t,r){t=t||[],r=r||0;for(var n=r;e>=sH;)t[r++]=e&255|vC,e/=128;for(;e&iH;)t[r++]=e&255|vC,e>>>=7;return t[r]=e|0,A6.bytes=r-n+1,t}var oH=$A,aH=128,wC=127;function $A(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw $A.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&wC)<<s:(o&wC)*Math.pow(2,s),s+=7}while(o>=aH);return $A.bytes=i-n,r}var uH=Math.pow(2,7),cH=Math.pow(2,14),lH=Math.pow(2,21),dH=Math.pow(2,28),fH=Math.pow(2,35),pH=Math.pow(2,42),hH=Math.pow(2,49),yH=Math.pow(2,56),mH=Math.pow(2,63),gH=function(e){return e<uH?1:e<cH?2:e<lH?3:e<dH?4:e<fH?5:e<pH?6:e<hH?7:e<yH?8:e<mH?9:10},vH={encode:rH,decode:oH,encodingLength:gH},Tw=vH;function bC(e,t=0){return[Tw.decode(e,t),Tw.decode.bytes]}function wH(e,t,r=0){return Tw.encode(e,t,r),t}function bH(e){return Tw.encodingLength(e)}let jl=class Uc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Uc.codeToName.has(n)?n:Uc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=bH(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),wH(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=bC(r);return n}static getCodeFromName(t){const{name:r}=t,n=Uc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Uc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Uc.codeToName.set(t.code,t.name),Uc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=bC(r),i=Uc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};jl.codeToName=new Map;jl.nameToCode=new Map;jl.registerCodec({code:237,name:"ed25519-pub"});jl.registerCodec({code:4864,name:"ed25519-priv"});jl.registerCodec({code:236,name:"x25519-pub"});jl.registerCodec({code:4866,name:"x25519-priv"});jl.registerCodec({code:231,name:"secp256k1-pub"});jl.registerCodec({code:4865,name:"secp256k1-priv"});var Ul={},Ub={},S6={};S6.supports=function(...t){const r=t.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var x6={},qa=class extends Error{constructor(t,r){super(t||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Ff={},no={},Kb={};Kb.byteLength=AH;Kb.toByteArray=xH;Kb.fromByteArray=CH;var va=[],Is=[],_H=typeof Uint8Array<"u"?Uint8Array:Array,r_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Vf=0,EH=r_.length;Vf<EH;++Vf)va[Vf]=r_[Vf],Is[r_.charCodeAt(Vf)]=Vf;Is[45]=62;Is[95]=63;function $6(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function AH(e){var t=$6(e),r=t[0],n=t[1];return(r+n)*3/4-n}function SH(e,t,r){return(t+r)*3/4-r}function xH(e){var t,r=$6(e),n=r[0],s=r[1],i=new _H(SH(e,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)t=Is[e.charCodeAt(c)]<<18|Is[e.charCodeAt(c+1)]<<12|Is[e.charCodeAt(c+2)]<<6|Is[e.charCodeAt(c+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Is[e.charCodeAt(c)]<<2|Is[e.charCodeAt(c+1)]>>4,i[o++]=t&255),s===1&&(t=Is[e.charCodeAt(c)]<<10|Is[e.charCodeAt(c+1)]<<4|Is[e.charCodeAt(c+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function $H(e){return va[e>>18&63]+va[e>>12&63]+va[e>>6&63]+va[e&63]}function DH(e,t,r){for(var n,s=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),s.push($H(n));return s.join("")}function CH(e){for(var t,r=e.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(DH(e,o,o+i>a?a:o+i));return n===1?(t=e[r-1],s.push(va[t>>2]+va[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],s.push(va[t>>10]+va[t>>4&63]+va[t<<2&63]+"=")),s.join("")}var MS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */MS.read=function(e,t,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=r?s-1:0,h=r?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+e[t+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;o=o*256+e[t+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-l}return(f?-1:1)*o*Math.pow(2,i-n)};MS.write=function(e,t,r,n,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?t+=h/c:t+=h*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,s),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;e[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;e[r+f]=o&255,f+=p,o/=256,l-=8);e[r+f-p]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=Kb,r=MS,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;var s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var N=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(N,D),N.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(N){if(N>s)throw new RangeError('The value "'+N+'" is invalid for option "size"');var D=new Uint8Array(N);return Object.setPrototypeOf(D,a.prototype),D}function a(N,D,k){if(typeof N=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(N)}return c(N,D,k)}a.poolSize=8192;function c(N,D,k){if(typeof N=="string")return h(N,D);if(ArrayBuffer.isView(N))return p(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(F(N,ArrayBuffer)||N&&F(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(N,SharedArrayBuffer)||N&&F(N.buffer,SharedArrayBuffer)))return y(N,D,k);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=N.valueOf&&N.valueOf();if(X!=null&&X!==N)return a.from(X,D,k);var se=_(N);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return a.from(N[Symbol.toPrimitive]("string"),D,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}a.from=function(N,D,k){return c(N,D,k)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function u(N,D,k){return l(N),N<=0?o(N):D!==void 0?typeof k=="string"?o(N).fill(D,k):o(N).fill(D):o(N)}a.alloc=function(N,D,k){return u(N,D,k)};function d(N){return l(N),o(N<0?0:b(N)|0)}a.allocUnsafe=function(N){return d(N)},a.allocUnsafeSlow=function(N){return d(N)};function h(N,D){if((typeof D!="string"||D==="")&&(D="utf8"),!a.isEncoding(D))throw new TypeError("Unknown encoding: "+D);var k=g(N,D)|0,X=o(k),se=X.write(N,D);return se!==k&&(X=X.slice(0,se)),X}function f(N){for(var D=N.length<0?0:b(N.length)|0,k=o(D),X=0;X<D;X+=1)k[X]=N[X]&255;return k}function p(N){if(F(N,Uint8Array)){var D=new Uint8Array(N);return y(D.buffer,D.byteOffset,D.byteLength)}return f(N)}function y(N,D,k){if(D<0||N.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<D+(k||0))throw new RangeError('"length" is outside of buffer bounds');var X;return D===void 0&&k===void 0?X=new Uint8Array(N):k===void 0?X=new Uint8Array(N,D):X=new Uint8Array(N,D,k),Object.setPrototypeOf(X,a.prototype),X}function _(N){if(a.isBuffer(N)){var D=b(N.length)|0,k=o(D);return k.length===0||N.copy(k,0,0,D),k}if(N.length!==void 0)return typeof N.length!="number"||M(N.length)?o(0):f(N);if(N.type==="Buffer"&&Array.isArray(N.data))return f(N.data)}function b(N){if(N>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return N|0}function v(N){return+N!=N&&(N=0),a.alloc(+N)}a.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==a.prototype},a.compare=function(D,k){if(F(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),F(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),!a.isBuffer(D)||!a.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===k)return 0;for(var X=D.length,se=k.length,le=0,ue=Math.min(X,se);le<ue;++le)if(D[le]!==k[le]){X=D[le],se=k[le];break}return X<se?-1:se<X?1:0},a.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(D,k){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return a.alloc(0);var X;if(k===void 0)for(k=0,X=0;X<D.length;++X)k+=D[X].length;var se=a.allocUnsafe(k),le=0;for(X=0;X<D.length;++X){var ue=D[X];if(F(ue,Uint8Array))le+ue.length>se.length?a.from(ue).copy(se,le):Uint8Array.prototype.set.call(se,ue,le);else if(a.isBuffer(ue))ue.copy(se,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=ue.length}return se};function g(N,D){if(a.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||F(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var k=N.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&k===0)return 0;for(var se=!1;;)switch(D){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return oe(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return _e(N).length;default:if(se)return X?-1:oe(N).length;D=(""+D).toLowerCase(),se=!0}}a.byteLength=g;function m(N,D,k){var X=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,D>>>=0,k<=D))return"";for(N||(N="utf8");;)switch(N){case"hex":return ee(this,D,k);case"utf8":case"utf-8":return L(this,D,k);case"ascii":return te(this,D,k);case"latin1":case"binary":return z(this,D,k);case"base64":return R(this,D,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,D,k);default:if(X)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),X=!0}}a.prototype._isBuffer=!0;function w(N,D,k){var X=N[D];N[D]=N[k],N[k]=X}a.prototype.swap16=function(){var D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<D;k+=2)w(this,k,k+1);return this},a.prototype.swap32=function(){var D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<D;k+=4)w(this,k,k+3),w(this,k+1,k+2);return this},a.prototype.swap64=function(){var D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<D;k+=8)w(this,k,k+7),w(this,k+1,k+6),w(this,k+2,k+5),w(this,k+3,k+4);return this},a.prototype.toString=function(){var D=this.length;return D===0?"":arguments.length===0?L(this,0,D):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(D){if(!a.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:a.compare(this,D)===0},a.prototype.inspect=function(){var D="",k=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(D+=" ... "),"<Buffer "+D+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(D,k,X,se,le){if(F(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(k===void 0&&(k=0),X===void 0&&(X=D?D.length:0),se===void 0&&(se=0),le===void 0&&(le=this.length),k<0||X>D.length||se<0||le>this.length)throw new RangeError("out of range index");if(se>=le&&k>=X)return 0;if(se>=le)return-1;if(k>=X)return 1;if(k>>>=0,X>>>=0,se>>>=0,le>>>=0,this===D)return 0;for(var ue=le-se,Ae=X-k,ye=Math.min(ue,Ae),V=this.slice(se,le),W=D.slice(k,X),pe=0;pe<ye;++pe)if(V[pe]!==W[pe]){ue=V[pe],Ae=W[pe];break}return ue<Ae?-1:Ae<ue?1:0};function x(N,D,k,X,se){if(N.length===0)return-1;if(typeof k=="string"?(X=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,M(k)&&(k=se?0:N.length-1),k<0&&(k=N.length+k),k>=N.length){if(se)return-1;k=N.length-1}else if(k<0)if(se)k=0;else return-1;if(typeof D=="string"&&(D=a.from(D,X)),a.isBuffer(D))return D.length===0?-1:S(N,D,k,X,se);if(typeof D=="number")return D=D&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(N,D,k):Uint8Array.prototype.lastIndexOf.call(N,D,k):S(N,[D],k,X,se);throw new TypeError("val must be string, number or Buffer")}function S(N,D,k,X,se){var le=1,ue=N.length,Ae=D.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(N.length<2||D.length<2)return-1;le=2,ue/=2,Ae/=2,k/=2}function ye(xe,ht){return le===1?xe[ht]:xe.readUInt16BE(ht*le)}var V;if(se){var W=-1;for(V=k;V<ue;V++)if(ye(N,V)===ye(D,W===-1?0:V-W)){if(W===-1&&(W=V),V-W+1===Ae)return W*le}else W!==-1&&(V-=V-W),W=-1}else for(k+Ae>ue&&(k=ue-Ae),V=k;V>=0;V--){for(var pe=!0,ve=0;ve<Ae;ve++)if(ye(N,V+ve)!==ye(D,ve)){pe=!1;break}if(pe)return V}return-1}a.prototype.includes=function(D,k,X){return this.indexOf(D,k,X)!==-1},a.prototype.indexOf=function(D,k,X){return x(this,D,k,X,!0)},a.prototype.lastIndexOf=function(D,k,X){return x(this,D,k,X,!1)};function E(N,D,k,X){k=Number(k)||0;var se=N.length-k;X?(X=Number(X),X>se&&(X=se)):X=se;var le=D.length;X>le/2&&(X=le/2);for(var ue=0;ue<X;++ue){var Ae=parseInt(D.substr(ue*2,2),16);if(M(Ae))return ue;N[k+ue]=Ae}return ue}function A(N,D,k,X){return Ie(oe(D,N.length-k),N,k,X)}function $(N,D,k,X){return Ie(fe(D),N,k,X)}function I(N,D,k,X){return Ie(_e(D),N,k,X)}function T(N,D,k,X){return Ie(he(D,N.length-k),N,k,X)}a.prototype.write=function(D,k,X,se){if(k===void 0)se="utf8",X=this.length,k=0;else if(X===void 0&&typeof k=="string")se=k,X=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(X)?(X=X>>>0,se===void 0&&(se="utf8")):(se=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var le=this.length-k;if((X===void 0||X>le)&&(X=le),D.length>0&&(X<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var ue=!1;;)switch(se){case"hex":return E(this,D,k,X);case"utf8":case"utf-8":return A(this,D,k,X);case"ascii":case"latin1":case"binary":return $(this,D,k,X);case"base64":return I(this,D,k,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,D,k,X);default:if(ue)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),ue=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(N,D,k){return D===0&&k===N.length?t.fromByteArray(N):t.fromByteArray(N.slice(D,k))}function L(N,D,k){k=Math.min(N.length,k);for(var X=[],se=D;se<k;){var le=N[se],ue=null,Ae=le>239?4:le>223?3:le>191?2:1;if(se+Ae<=k){var ye,V,W,pe;switch(Ae){case 1:le<128&&(ue=le);break;case 2:ye=N[se+1],(ye&192)===128&&(pe=(le&31)<<6|ye&63,pe>127&&(ue=pe));break;case 3:ye=N[se+1],V=N[se+2],(ye&192)===128&&(V&192)===128&&(pe=(le&15)<<12|(ye&63)<<6|V&63,pe>2047&&(pe<55296||pe>57343)&&(ue=pe));break;case 4:ye=N[se+1],V=N[se+2],W=N[se+3],(ye&192)===128&&(V&192)===128&&(W&192)===128&&(pe=(le&15)<<18|(ye&63)<<12|(V&63)<<6|W&63,pe>65535&&pe<1114112&&(ue=pe))}}ue===null?(ue=65533,Ae=1):ue>65535&&(ue-=65536,X.push(ue>>>10&1023|55296),ue=56320|ue&1023),X.push(ue),se+=Ae}return U(X)}var j=4096;function U(N){var D=N.length;if(D<=j)return String.fromCharCode.apply(String,N);for(var k="",X=0;X<D;)k+=String.fromCharCode.apply(String,N.slice(X,X+=j));return k}function te(N,D,k){var X="";k=Math.min(N.length,k);for(var se=D;se<k;++se)X+=String.fromCharCode(N[se]&127);return X}function z(N,D,k){var X="";k=Math.min(N.length,k);for(var se=D;se<k;++se)X+=String.fromCharCode(N[se]);return X}function ee(N,D,k){var X=N.length;(!D||D<0)&&(D=0),(!k||k<0||k>X)&&(k=X);for(var se="",le=D;le<k;++le)se+=re[N[le]];return se}function q(N,D,k){for(var X=N.slice(D,k),se="",le=0;le<X.length-1;le+=2)se+=String.fromCharCode(X[le]+X[le+1]*256);return se}a.prototype.slice=function(D,k){var X=this.length;D=~~D,k=k===void 0?X:~~k,D<0?(D+=X,D<0&&(D=0)):D>X&&(D=X),k<0?(k+=X,k<0&&(k=0)):k>X&&(k=X),k<D&&(k=D);var se=this.subarray(D,k);return Object.setPrototypeOf(se,a.prototype),se};function O(N,D,k){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+D>k)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(D,k,X){D=D>>>0,k=k>>>0,X||O(D,k,this.length);for(var se=this[D],le=1,ue=0;++ue<k&&(le*=256);)se+=this[D+ue]*le;return se},a.prototype.readUintBE=a.prototype.readUIntBE=function(D,k,X){D=D>>>0,k=k>>>0,X||O(D,k,this.length);for(var se=this[D+--k],le=1;k>0&&(le*=256);)se+=this[D+--k]*le;return se},a.prototype.readUint8=a.prototype.readUInt8=function(D,k){return D=D>>>0,k||O(D,1,this.length),this[D]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(D,k){return D=D>>>0,k||O(D,2,this.length),this[D]|this[D+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(D,k){return D=D>>>0,k||O(D,2,this.length),this[D]<<8|this[D+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(D,k){return D=D>>>0,k||O(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(D,k){return D=D>>>0,k||O(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},a.prototype.readIntLE=function(D,k,X){D=D>>>0,k=k>>>0,X||O(D,k,this.length);for(var se=this[D],le=1,ue=0;++ue<k&&(le*=256);)se+=this[D+ue]*le;return le*=128,se>=le&&(se-=Math.pow(2,8*k)),se},a.prototype.readIntBE=function(D,k,X){D=D>>>0,k=k>>>0,X||O(D,k,this.length);for(var se=k,le=1,ue=this[D+--se];se>0&&(le*=256);)ue+=this[D+--se]*le;return le*=128,ue>=le&&(ue-=Math.pow(2,8*k)),ue},a.prototype.readInt8=function(D,k){return D=D>>>0,k||O(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},a.prototype.readInt16LE=function(D,k){D=D>>>0,k||O(D,2,this.length);var X=this[D]|this[D+1]<<8;return X&32768?X|4294901760:X},a.prototype.readInt16BE=function(D,k){D=D>>>0,k||O(D,2,this.length);var X=this[D+1]|this[D]<<8;return X&32768?X|4294901760:X},a.prototype.readInt32LE=function(D,k){return D=D>>>0,k||O(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},a.prototype.readInt32BE=function(D,k){return D=D>>>0,k||O(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},a.prototype.readFloatLE=function(D,k){return D=D>>>0,k||O(D,4,this.length),r.read(this,D,!0,23,4)},a.prototype.readFloatBE=function(D,k){return D=D>>>0,k||O(D,4,this.length),r.read(this,D,!1,23,4)},a.prototype.readDoubleLE=function(D,k){return D=D>>>0,k||O(D,8,this.length),r.read(this,D,!0,52,8)},a.prototype.readDoubleBE=function(D,k){return D=D>>>0,k||O(D,8,this.length),r.read(this,D,!1,52,8)};function Y(N,D,k,X,se,le){if(!a.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>se||D<le)throw new RangeError('"value" argument is out of bounds');if(k+X>N.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(D,k,X,se){if(D=+D,k=k>>>0,X=X>>>0,!se){var le=Math.pow(2,8*X)-1;Y(this,D,k,X,le,0)}var ue=1,Ae=0;for(this[k]=D&255;++Ae<X&&(ue*=256);)this[k+Ae]=D/ue&255;return k+X},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(D,k,X,se){if(D=+D,k=k>>>0,X=X>>>0,!se){var le=Math.pow(2,8*X)-1;Y(this,D,k,X,le,0)}var ue=X-1,Ae=1;for(this[k+ue]=D&255;--ue>=0&&(Ae*=256);)this[k+ue]=D/Ae&255;return k+X},a.prototype.writeUint8=a.prototype.writeUInt8=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,1,255,0),this[k]=D&255,k+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,2,65535,0),this[k]=D&255,this[k+1]=D>>>8,k+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,2,65535,0),this[k]=D>>>8,this[k+1]=D&255,k+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,4,4294967295,0),this[k+3]=D>>>24,this[k+2]=D>>>16,this[k+1]=D>>>8,this[k]=D&255,k+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,4,4294967295,0),this[k]=D>>>24,this[k+1]=D>>>16,this[k+2]=D>>>8,this[k+3]=D&255,k+4},a.prototype.writeIntLE=function(D,k,X,se){if(D=+D,k=k>>>0,!se){var le=Math.pow(2,8*X-1);Y(this,D,k,X,le-1,-le)}var ue=0,Ae=1,ye=0;for(this[k]=D&255;++ue<X&&(Ae*=256);)D<0&&ye===0&&this[k+ue-1]!==0&&(ye=1),this[k+ue]=(D/Ae>>0)-ye&255;return k+X},a.prototype.writeIntBE=function(D,k,X,se){if(D=+D,k=k>>>0,!se){var le=Math.pow(2,8*X-1);Y(this,D,k,X,le-1,-le)}var ue=X-1,Ae=1,ye=0;for(this[k+ue]=D&255;--ue>=0&&(Ae*=256);)D<0&&ye===0&&this[k+ue+1]!==0&&(ye=1),this[k+ue]=(D/Ae>>0)-ye&255;return k+X},a.prototype.writeInt8=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,1,127,-128),D<0&&(D=255+D+1),this[k]=D&255,k+1},a.prototype.writeInt16LE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,2,32767,-32768),this[k]=D&255,this[k+1]=D>>>8,k+2},a.prototype.writeInt16BE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,2,32767,-32768),this[k]=D>>>8,this[k+1]=D&255,k+2},a.prototype.writeInt32LE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,4,2147483647,-2147483648),this[k]=D&255,this[k+1]=D>>>8,this[k+2]=D>>>16,this[k+3]=D>>>24,k+4},a.prototype.writeInt32BE=function(D,k,X){return D=+D,k=k>>>0,X||Y(this,D,k,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[k]=D>>>24,this[k+1]=D>>>16,this[k+2]=D>>>8,this[k+3]=D&255,k+4};function H(N,D,k,X,se,le){if(k+X>N.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function C(N,D,k,X,se){return D=+D,k=k>>>0,se||H(N,D,k,4),r.write(N,D,k,X,23,4),k+4}a.prototype.writeFloatLE=function(D,k,X){return C(this,D,k,!0,X)},a.prototype.writeFloatBE=function(D,k,X){return C(this,D,k,!1,X)};function B(N,D,k,X,se){return D=+D,k=k>>>0,se||H(N,D,k,8),r.write(N,D,k,X,52,8),k+8}a.prototype.writeDoubleLE=function(D,k,X){return B(this,D,k,!0,X)},a.prototype.writeDoubleBE=function(D,k,X){return B(this,D,k,!1,X)},a.prototype.copy=function(D,k,X,se){if(!a.isBuffer(D))throw new TypeError("argument should be a Buffer");if(X||(X=0),!se&&se!==0&&(se=this.length),k>=D.length&&(k=D.length),k||(k=0),se>0&&se<X&&(se=X),se===X||D.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),D.length-k<se-X&&(se=D.length-k+X);var le=se-X;return this===D&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,X,se):Uint8Array.prototype.set.call(D,this.subarray(X,se),k),le},a.prototype.fill=function(D,k,X,se){if(typeof D=="string"){if(typeof k=="string"?(se=k,k=0,X=this.length):typeof X=="string"&&(se=X,X=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!a.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(D.length===1){var le=D.charCodeAt(0);(se==="utf8"&&le<128||se==="latin1")&&(D=le)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(k<0||this.length<k||this.length<X)throw new RangeError("Out of range index");if(X<=k)return this;k=k>>>0,X=X===void 0?this.length:X>>>0,D||(D=0);var ue;if(typeof D=="number")for(ue=k;ue<X;++ue)this[ue]=D;else{var Ae=a.isBuffer(D)?D:a.from(D,se),ye=Ae.length;if(ye===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ue=0;ue<X-k;++ue)this[ue+k]=Ae[ue%ye]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function Q(N){if(N=N.split("=")[0],N=N.trim().replace(Z,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function oe(N,D){D=D||1/0;for(var k,X=N.length,se=null,le=[],ue=0;ue<X;++ue){if(k=N.charCodeAt(ue),k>55295&&k<57344){if(!se){if(k>56319){(D-=3)>-1&&le.push(239,191,189);continue}else if(ue+1===X){(D-=3)>-1&&le.push(239,191,189);continue}se=k;continue}if(k<56320){(D-=3)>-1&&le.push(239,191,189),se=k;continue}k=(se-55296<<10|k-56320)+65536}else se&&(D-=3)>-1&&le.push(239,191,189);if(se=null,k<128){if((D-=1)<0)break;le.push(k)}else if(k<2048){if((D-=2)<0)break;le.push(k>>6|192,k&63|128)}else if(k<65536){if((D-=3)<0)break;le.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((D-=4)<0)break;le.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return le}function fe(N){for(var D=[],k=0;k<N.length;++k)D.push(N.charCodeAt(k)&255);return D}function he(N,D){for(var k,X,se,le=[],ue=0;ue<N.length&&!((D-=2)<0);++ue)k=N.charCodeAt(ue),X=k>>8,se=k%256,le.push(se),le.push(X);return le}function _e(N){return t.toByteArray(Q(N))}function Ie(N,D,k,X){for(var se=0;se<X&&!(se+k>=D.length||se>=N.length);++se)D[se+k]=N[se];return se}function F(N,D){return N instanceof D||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===D.name}function M(N){return N!==N}var re=function(){for(var N="0123456789abcdef",D=new Array(256),k=0;k<16;++k)for(var X=k*16,se=0;se<16;++se)D[X+se]=N[k]+N[se];return D}()})(no);let n_=null;var D6=function(){return n_===null&&(n_={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),n_},v0={},jS={};const i_=qa,PH=new Set(["buffer","view","utf8"]);let kH=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!PH.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new i_(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new i_(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new i_(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};jS.Encoding=kH;const{Buffer:US}=no||{},{Encoding:KS}=jS,OH=D6;let LS=class extends KS{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new qS({encode:this.encode,decode:t=>this.decode(US.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},qS=class extends KS{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new LS({encode:t=>{const r=this.encode(t);return US.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},TH=class extends KS{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new LS({encode:t=>US.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:r}=OH();return new qS({encode:n=>t.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};v0.BufferFormat=LS;v0.ViewFormat=qS;v0.UTF8Format=TH;const{Buffer:ui}=no||{Buffer:{isBuffer:()=>!1}},{textEncoder:C6,textDecoder:_C}=D6(),{BufferFormat:w0,ViewFormat:VS,UTF8Format:P6}=v0,Iw=e=>e;Ff.utf8=new P6({encode:function(e){return ui.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?_C.decode(e):String(e)},decode:Iw,name:"utf8",createViewTranscoder(){return new VS({encode:function(e){return ArrayBuffer.isView(e)?e:C6.encode(e)},decode:function(e){return _C.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new w0({encode:function(e){return ui.isBuffer(e)?e:ArrayBuffer.isView(e)?ui.from(e.buffer,e.byteOffset,e.byteLength):ui.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Ff.json=new P6({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ff.buffer=new w0({encode:function(e){return ui.isBuffer(e)?e:ArrayBuffer.isView(e)?ui.from(e.buffer,e.byteOffset,e.byteLength):ui.from(String(e),"utf8")},decode:Iw,name:"buffer",createViewTranscoder(){return new VS({encode:function(e){return ArrayBuffer.isView(e)?e:ui.from(String(e),"utf8")},decode:function(e){return ui.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Ff.view=new VS({encode:function(e){return ArrayBuffer.isView(e)?e:C6.encode(e)},decode:Iw,name:"view",createBufferTranscoder(){return new w0({encode:function(e){return ui.isBuffer(e)?e:ArrayBuffer.isView(e)?ui.from(e.buffer,e.byteOffset,e.byteLength):ui.from(String(e),"utf8")},decode:Iw,name:`${this.name}+buffer`})}});Ff.hex=new w0({encode:function(e){return ui.isBuffer(e)?e:ui.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Ff.base64=new w0({encode:function(e){return ui.isBuffer(e)?e:ui.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"});const EC=qa,Bw=Ff,{Encoding:IH}=jS,{BufferFormat:BH,ViewFormat:FH,UTF8Format:NH}=v0,Ih=Symbol("formats"),dg=Symbol("encodings"),RH=new Set(["buffer","view","utf8"]);let MH=class{constructor(t){if(Array.isArray(t)){if(!t.every(r=>RH.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[dg]=new Map,this[Ih]=new Set(t);for(const r in Bw)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[dg].values()))}encoding(t){let r=this[dg].get(t);if(r===void 0){if(typeof t=="string"&&t!==""){if(r=LH[t],!r)throw new EC(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");r=jH(t)}const{name:n,format:s}=r;if(!this[Ih].has(s))if(this[Ih].has("view"))r=r.createViewTranscoder();else if(this[Ih].has("buffer"))r=r.createBufferTranscoder();else if(this[Ih].has("utf8"))r=r.createUTF8Transcoder();else throw new EC(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const i of[t,n,r.name,r.commonName])this[dg].set(i,r)}return r}};x6.Transcoder=MH;function jH(e){if(e instanceof IH)return e;const t="type"in e&&typeof e.type=="string"?e.type:void 0,r=e.name||t||`anonymous-${qH++}`;switch(UH(e)){case"view":return new FH({...e,name:r});case"utf8":return new NH({...e,name:r});case"buffer":return new BH({...e,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function UH(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}const KH={binary:Bw.buffer,"utf-8":Bw.utf8},LH={...Bw,...KH};let qH=0;var HS={exports:{}},Op=typeof Reflect=="object"?Reflect:null,AC=Op&&typeof Op.apply=="function"?Op.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Dv;Op&&typeof Op.ownKeys=="function"?Dv=Op.ownKeys:Object.getOwnPropertySymbols?Dv=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Dv=function(t){return Object.getOwnPropertyNames(t)};function VH(e){console&&console.warn&&console.warn(e)}var k6=Number.isNaN||function(t){return t!==t};function hr(){hr.init.call(this)}HS.exports=hr;HS.exports.once=JH;hr.EventEmitter=hr;hr.prototype._events=void 0;hr.prototype._eventsCount=0;hr.prototype._maxListeners=void 0;var SC=10;function Lb(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(hr,"defaultMaxListeners",{enumerable:!0,get:function(){return SC},set:function(e){if(typeof e!="number"||e<0||k6(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");SC=e}});hr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};hr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||k6(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function O6(e){return e._maxListeners===void 0?hr.defaultMaxListeners:e._maxListeners}hr.prototype.getMaxListeners=function(){return O6(this)};hr.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")AC(c,this,r);else for(var l=c.length,u=N6(c,l),n=0;n<l;++n)AC(u[n],this,r);return!0};function T6(e,t,r,n){var s,i,o;if(Lb(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),o===void 0)o=i[t]=r,++e._eventsCount;else if(typeof o=="function"?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=O6(e),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,VH(a)}return e}hr.prototype.addListener=function(t,r){return T6(this,t,r,!1)};hr.prototype.on=hr.prototype.addListener;hr.prototype.prependListener=function(t,r){return T6(this,t,r,!0)};function HH(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function I6(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=HH.bind(n);return s.listener=r,n.wrapFn=s,s}hr.prototype.once=function(t,r){return Lb(r),this.on(t,I6(this,t,r)),this};hr.prototype.prependOnceListener=function(t,r){return Lb(r),this.prependListener(t,I6(this,t,r)),this};hr.prototype.removeListener=function(t,r){var n,s,i,o,a;if(Lb(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():zH(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this};hr.prototype.off=hr.prototype.removeListener;hr.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function B6(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?WH(s):N6(s,s.length)}hr.prototype.listeners=function(t){return B6(this,t,!0)};hr.prototype.rawListeners=function(t){return B6(this,t,!1)};hr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):F6.call(e,t)};hr.prototype.listenerCount=F6;function F6(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}hr.prototype.eventNames=function(){return this._eventsCount>0?Dv(this._events):[]};function N6(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function zH(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function WH(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function JH(e,t){return new Promise(function(r,n){function s(o){e.removeListener(t,i),n(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}R6(e,t,i,{once:!0}),t!=="error"&&GH(e,s,{once:!0})})}function GH(e,t,r){typeof e.on=="function"&&R6(e,"error",t,r)}function R6(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var qb=HS.exports,hh={},XH=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e),xC=XH;hh.fromCallback=function(e,t){if(e===void 0){var r=new Promise(function(n,s){e=function(i,o){i?s(i):n(o)}});e[t!==void 0?t:"promise"]=r}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};hh.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(r){xC(()=>t(null,r))}).catch(function(r){xC(()=>t(r))})};var Va={},b0={};b0.getCallback=function(e,t){return typeof e=="function"?e:t};b0.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}};const{fromCallback:s_}=hh,ts=qa,{getOptions:o_,getCallback:$C}=b0,rd=Symbol("promise"),Hf=Symbol("callback"),Vo=Symbol("working"),Hd=Symbol("handleOne"),Du=Symbol("handleMany"),a_=Symbol("autoClose"),Tl=Symbol("finishWork"),Ca=Symbol("returnMany"),hc=Symbol("closing"),Bh=Symbol("handleClose"),fg=Symbol("closed"),Fh=Symbol("closeCallbacks"),bl=Symbol("keyEncoding"),wf=Symbol("valueEncoding"),u_=Symbol("abortOnClose"),pg=Symbol("legacy"),c_=Symbol("keys"),l_=Symbol("values"),yc=Symbol("limit"),Ls=Symbol("count"),hg=Object.freeze({}),ZH=()=>{};let DC=!1;class zS{constructor(t,r,n){if(typeof t!="object"||t===null){const s=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[fg]=!1,this[Fh]=[],this[Vo]=!1,this[hc]=!1,this[a_]=!1,this[Hf]=null,this[Hd]=this[Hd].bind(this),this[Du]=this[Du].bind(this),this[Bh]=this[Bh].bind(this),this[bl]=r[bl],this[wf]=r[wf],this[pg]=n,this[yc]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Ls]=0,this[u_]=!!r.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[Ls]}get limit(){return this[yc]}next(t){let r;if(t===void 0)r=new Promise((n,s)=>{t=(i,o,a)=>{i?s(i):this[pg]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[hc]?this.nextTick(t,new ts("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Vo]?this.nextTick(t,new ts("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Vo]=!0,this[Hf]=t,this[Ls]>=this[yc]?this.nextTick(this[Hd],null):this._next(this[Hd])),r}_next(t){this.nextTick(t)}nextv(t,r,n){return n=$C(r,n),n=s_(n,rd),r=o_(r,hg),Number.isInteger(t)?(this[hc]?this.nextTick(n,new ts("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Vo]?this.nextTick(n,new ts("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[yc]<1/0&&(t=Math.min(t,this[yc]-this[Ls])),this[Vo]=!0,this[Hf]=n,t<=0?this.nextTick(this[Du],null,[]):this._nextv(t,r,this[Du])),n[rd]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[rd])}_nextv(t,r,n){const s=[],i=(o,a,c)=>{if(o)return n(o);if(this[pg]?a===void 0&&c===void 0:a===void 0)return n(null,s);s.push(this[pg]?[a,c]:a),s.length===t?n(null,s):this._next(i)};this._next(i)}all(t,r){return r=$C(t,r),r=s_(r,rd),t=o_(t,hg),this[hc]?this.nextTick(r,new ts("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Vo]?this.nextTick(r,new ts("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Vo]=!0,this[Hf]=r,this[a_]=!0,this[Ls]>=this[yc]?this.nextTick(this[Du],null,[]):this._all(t,this[Du])),r[rd]}_all(t,r){let n=this[Ls];const s=[],i=()=>{const a=this[yc]<1/0?Math.min(1e3,this[yc]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,hg,o)},o=(a,c)=>{a?r(a):c.length===0?r(null,s):(s.push.apply(s,c),n+=c.length,i())};i()}[Tl](){const t=this[Hf];return this[u_]&&t===null?ZH:(this[Vo]=!1,this[Hf]=null,this[hc]&&this._close(this[Bh]),t)}[Ca](t,r,n){this[a_]?this.close(t.bind(null,r,n)):t(r,n)}seek(t,r){if(r=o_(r,hg),!this[hc]){if(this[Vo])throw new ts("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[bl]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});const i=this.db.prefixKey(n.encode(t),s);this._seek(i,r)}}}_seek(t,r){throw new ts("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=s_(t,rd),this[fg]?this.nextTick(t):this[hc]?this[Fh].push(t):(this[hc]=!0,this[Fh].push(t),this[Vo]?this[u_]&&this[Tl]()(new ts("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Bh])),t[rd]}_close(t){this.nextTick(t)}[Bh](){this[fg]=!0,this.db.detachResource(this);const t=this[Fh];this[Fh]=[];for(const r of t)r()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[fg]||await this.close()}}}let Vb=class extends zS{constructor(t,r){super(t,r,!0),this[c_]=r.keys!==!1,this[l_]=r.values!==!1}[Hd](t,r,n){const s=this[Tl]();if(t)return s(t);try{r=this[c_]&&r!==void 0?this[bl].decode(r):void 0,n=this[l_]&&n!==void 0?this[wf].decode(n):void 0}catch(i){return s(new Hp("entry",i))}r===void 0&&n===void 0||this[Ls]++,s(null,r,n)}[Du](t,r){const n=this[Tl]();if(t)return this[Ca](n,t);try{for(const s of r){const i=s[0],o=s[1];s[0]=this[c_]&&i!==void 0?this[bl].decode(i):void 0,s[1]=this[l_]&&o!==void 0?this[wf].decode(o):void 0}}catch(s){return this[Ca](n,new Hp("entries",s))}this[Ls]+=r.length,this[Ca](n,null,r)}end(t){return!DC&&typeof console<"u"&&(DC=!0,console.warn(new ts("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},YH=class extends zS{constructor(t,r){super(t,r,!1)}[Hd](t,r){const n=this[Tl]();if(t)return n(t);try{r=r!==void 0?this[bl].decode(r):void 0}catch(s){return n(new Hp("key",s))}r!==void 0&&this[Ls]++,n(null,r)}[Du](t,r){const n=this[Tl]();if(t)return this[Ca](n,t);try{for(let s=0;s<r.length;s++){const i=r[s];r[s]=i!==void 0?this[bl].decode(i):void 0}}catch(s){return this[Ca](n,new Hp("keys",s))}this[Ls]+=r.length,this[Ca](n,null,r)}},QH=class extends zS{constructor(t,r){super(t,r,!1)}[Hd](t,r){const n=this[Tl]();if(t)return n(t);try{r=r!==void 0?this[wf].decode(r):void 0}catch(s){return n(new Hp("value",s))}r!==void 0&&this[Ls]++,n(null,r)}[Du](t,r){const n=this[Tl]();if(t)return this[Ca](n,t);try{for(let s=0;s<r.length;s++){const i=r[s];r[s]=i!==void 0?this[wf].decode(i):void 0}}catch(s){return this[Ca](n,new Hp("values",s))}this[Ls]+=r.length,this[Ca](n,null,r)}};class Hp extends ts{constructor(t,r){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const e of["_ended property","_nexting property","_end method"])Object.defineProperty(Vb.prototype,e.split(" ")[0],{get(){throw new ts(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ts(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Vb.keyEncoding=bl;Vb.valueEncoding=wf;Va.AbstractIterator=Vb;Va.AbstractKeyIterator=YH;Va.AbstractValueIterator=QH;var WS={};const{AbstractKeyIterator:ez,AbstractValueIterator:tz}=Va,Rd=Symbol("iterator"),Nh=Symbol("callback"),zp=Symbol("handleOne"),sf=Symbol("handleMany");let DA=class extends ez{constructor(t,r){super(t,r),this[Rd]=t.iterator({...r,keys:!0,values:!1}),this[zp]=this[zp].bind(this),this[sf]=this[sf].bind(this)}},M6=class extends tz{constructor(t,r){super(t,r),this[Rd]=t.iterator({...r,keys:!1,values:!0}),this[zp]=this[zp].bind(this),this[sf]=this[sf].bind(this)}};for(const e of[DA,M6]){const t=e===DA,r=t?n=>n[0]:n=>n[1];e.prototype._next=function(n){this[Nh]=n,this[Rd].next(this[zp])},e.prototype[zp]=function(n,s,i){const o=this[Nh];n?o(n):o(null,t?s:i)},e.prototype._nextv=function(n,s,i){this[Nh]=i,this[Rd].nextv(n,s,this[sf])},e.prototype._all=function(n,s){this[Nh]=s,this[Rd].all(n,this[sf])},e.prototype[sf]=function(n,s){const i=this[Nh];n?i(n):i(null,s.map(r))},e.prototype._seek=function(n,s){this[Rd].seek(n,s)},e.prototype._close=function(n){this[Rd].close(n)}}WS.DefaultKeyIterator=DA;WS.DefaultValueIterator=M6;var Hb={};const{AbstractIterator:rz,AbstractKeyIterator:nz,AbstractValueIterator:iz}=Va,d_=qa,Fi=Symbol("nut"),zb=Symbol("undefer"),Wb=Symbol("factory");let j6=class extends rz{constructor(t,r){super(t,r),this[Fi]=null,this[Wb]=()=>t.iterator(r),this.db.defer(()=>this[zb]())}},U6=class extends nz{constructor(t,r){super(t,r),this[Fi]=null,this[Wb]=()=>t.keys(r),this.db.defer(()=>this[zb]())}},K6=class extends iz{constructor(t,r){super(t,r),this[Fi]=null,this[Wb]=()=>t.values(r),this.db.defer(()=>this[zb]())}};for(const e of[j6,U6,K6])e.prototype[zb]=function(){this.db.status==="open"&&(this[Fi]=this[Wb]())},e.prototype._next=function(t){this[Fi]!==null?this[Fi].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new d_("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,r,n){this[Fi]!==null?this[Fi].nextv(t,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,r,n)):this.nextTick(n,new d_("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,r){this[Fi]!==null?this[Fi].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(t,r)):this.nextTick(r,new d_("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,r){this[Fi]!==null?this[Fi]._seek(t,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,r))},e.prototype._close=function(t){this[Fi]!==null?this[Fi].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};Hb.DeferredIterator=j6;Hb.DeferredKeyIterator=U6;Hb.DeferredValueIterator=K6;var L6={},JS={};const{fromCallback:CC}=hh,yg=qa,{getCallback:sz,getOptions:oz}=b0,mg=Symbol("promise"),As=Symbol("status"),zf=Symbol("operations"),Rh=Symbol("finishClose"),Wf=Symbol("closeCallbacks");let az=class{constructor(t){if(typeof t!="object"||t===null){const r=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[zf]=[],this[Wf]=[],this[As]="open",this[Rh]=this[Rh].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[zf].length}put(t,r,n){if(this[As]!=="open")throw new yg("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const s=this.db._checkKey(t)||this.db._checkValue(r);if(s)throw s;const i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),c=i.valueEncoding(n&&n.valueEncoding),l=a.format;n={...n,keyEncoding:l,valueEncoding:c.format},i!==this.db&&(n.sublevel=null);const u=i.prefixKey(a.encode(t),l),d=c.encode(r);return this._put(u,d,n),this[zf].push({...o,type:"put",key:t,value:r}),this}_put(t,r,n){}del(t,r){if(this[As]!=="open")throw new yg("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(t);if(n)throw n;const s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(t),a),r),this[zf].push({...i,type:"del",key:t}),this}_del(t,r){}clear(){if(this[As]!=="open")throw new yg("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[zf]=[],this}_clear(){}write(t,r){return r=sz(t,r),r=CC(r,mg),t=oz(t),this[As]!=="open"?this.nextTick(r,new yg("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[As]="writing",this._write(t,n=>{this[As]="closing",this[Wf].push(()=>r(n)),n||this.db.emit("batch",this[zf]),this._close(this[Rh])})),r[mg]}_write(t,r){}close(t){return t=CC(t,mg),this[As]==="closing"?this[Wf].push(t):this[As]==="closed"?this.nextTick(t):(this[Wf].push(t),this[As]!=="writing"&&(this[As]="closing",this._close(this[Rh]))),t[mg]}_close(t){this.nextTick(t)}[Rh](){this[As]="closed",this.db.detachResource(this);const t=this[Wf];this[Wf]=[];for(const r of t)r()}};JS.AbstractChainedBatch=az;const{AbstractChainedBatch:uz}=JS,cz=qa,Jf=Symbol("encoded");let lz=class extends uz{constructor(t){super(t),this[Jf]=[]}_put(t,r,n){this[Jf].push({...n,type:"put",key:t,value:r})}_del(t,r){this[Jf].push({...r,type:"del",key:t})}_clear(){this[Jf]=[]}_write(t,r){this.db.status==="opening"?this.db.defer(()=>this._write(t,r)):this.db.status==="open"?this[Jf].length===0?this.nextTick(r):this.db._batch(this[Jf],t,r):this.nextTick(r,new cz("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};L6.DefaultChainedBatch=lz;const PC=qa,dz=Object.prototype.hasOwnProperty,fz=new Set(["lt","lte","gt","gte"]);var pz=function(e,t){const r={};for(const n in e)if(dz.call(e,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new PC(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new PC("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});fz.has(n)?r[n]=t.encode(e[n]):r[n]=e[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let kC;var q6=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:tr):e=>(kC||(kC=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),f_,OC;function hz(){if(OC)return f_;OC=1;const e=q6;return f_=function(t,...r){r.length===0?e(t):e(()=>t(...r))},f_}var Mh={},TC;function yz(){if(TC)return Mh;TC=1;const{AbstractIterator:e,AbstractKeyIterator:t,AbstractValueIterator:r}=Va,n=Symbol("unfix"),s=Symbol("iterator"),i=Symbol("handleOne"),o=Symbol("handleMany"),a=Symbol("callback");class c extends e{constructor(h,f,p,y){super(h,f),this[s]=p,this[n]=y,this[i]=this[i].bind(this),this[o]=this[o].bind(this),this[a]=null}[i](h,f,p){const y=this[a];if(h)return y(h);f!==void 0&&(f=this[n](f)),y(h,f,p)}[o](h,f){const p=this[a];if(h)return p(h);for(const y of f){const _=y[0];_!==void 0&&(y[0]=this[n](_))}p(h,f)}}class l extends t{constructor(h,f,p,y){super(h,f),this[s]=p,this[n]=y,this[i]=this[i].bind(this),this[o]=this[o].bind(this),this[a]=null}[i](h,f){const p=this[a];if(h)return p(h);f!==void 0&&(f=this[n](f)),p(h,f)}[o](h,f){const p=this[a];if(h)return p(h);for(let y=0;y<f.length;y++){const _=f[y];_!==void 0&&(f[y]=this[n](_))}p(h,f)}}class u extends r{constructor(h,f,p){super(h,f),this[s]=p}}for(const d of[c,l])d.prototype._next=function(h){this[a]=h,this[s].next(this[i])},d.prototype._nextv=function(h,f,p){this[a]=p,this[s].nextv(h,f,this[o])},d.prototype._all=function(h,f){this[a]=f,this[s].all(h,this[o])};for(const d of[u])d.prototype._next=function(h){this[s].next(h)},d.prototype._nextv=function(h,f,p){this[s].nextv(h,f,p)},d.prototype._all=function(h,f){this[s].all(h,f)};for(const d of[c,l,u])d.prototype._seek=function(h,f){this[s].seek(h,f)},d.prototype._close=function(h){this[s].close(h)};return Mh.AbstractSublevelIterator=c,Mh.AbstractSublevelKeyIterator=l,Mh.AbstractSublevelValueIterator=u,Mh}var p_,IC;function mz(){if(IC)return p_;IC=1;const e=qa,{Buffer:t}=no||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:s}=yz(),i=Symbol("prefix"),o=Symbol("upperBound"),a=Symbol("prefixRange"),c=Symbol("parent"),l=Symbol("unfix"),u=new TextEncoder,d={separator:"!"};p_=function({AbstractLevel:b}){class v extends b{static defaults(m){if(typeof m=="string")throw new e("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(m&&m.open)throw new e("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return m==null?d:m.separator?m:{...m,separator:"!"}}constructor(m,w,x){const{separator:S,manifest:E,...A}=v.defaults(x);w=_(w,S);const $=S.charCodeAt(0)+1,I=m[c]||m;if(!u.encode(w).every(L=>L>$&&L<127))throw new e(`Prefix must use bytes > ${$} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(h(I,E),A);const T=(m.prefix||"")+S+w+S,R=T.slice(0,-1)+String.fromCharCode($);this[c]=I,this[i]=new p(T),this[o]=new p(R),this[l]=new y,this.nextTick=I.nextTick}prefixKey(m,w){if(w==="utf8")return this[i].utf8+m;if(m.byteLength===0)return this[i][w];if(w==="view"){const x=this[i].view,S=new Uint8Array(x.byteLength+m.byteLength);return S.set(x,0),S.set(m,x.byteLength),S}else{const x=this[i].buffer;return t.concat([x,m],x.byteLength+m.byteLength)}}[a](m,w){m.gte!==void 0?m.gte=this.prefixKey(m.gte,w):m.gt!==void 0?m.gt=this.prefixKey(m.gt,w):m.gte=this[i][w],m.lte!==void 0?m.lte=this.prefixKey(m.lte,w):m.lt!==void 0?m.lt=this.prefixKey(m.lt,w):m.lte=this[o][w]}get prefix(){return this[i].utf8}get db(){return this[c]}_open(m,w){this[c].open({passive:!0},w)}_put(m,w,x,S){this[c].put(m,w,x,S)}_get(m,w,x){this[c].get(m,w,x)}_getMany(m,w,x){this[c].getMany(m,w,x)}_del(m,w,x){this[c].del(m,w,x)}_batch(m,w,x){this[c].batch(m,w,x)}_clear(m,w){this[a](m,m.keyEncoding),this[c].clear(m,w)}_iterator(m){this[a](m,m.keyEncoding);const w=this[c].iterator(m),x=this[l].get(this[i].utf8.length,m.keyEncoding);return new r(this,m,w,x)}_keys(m){this[a](m,m.keyEncoding);const w=this[c].keys(m),x=this[l].get(this[i].utf8.length,m.keyEncoding);return new n(this,m,w,x)}_values(m){this[a](m,m.keyEncoding);const w=this[c].values(m);return new s(this,m,w)}}return{AbstractSublevel:v}};const h=function(b,v){return{...b.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...v,encodings:{utf8:f(b,"utf8"),buffer:f(b,"buffer"),view:f(b,"view")}}},f=function(b,v){return b.supports.encodings[v]?b.keyEncoding(v).name===v:!1};class p{constructor(v){this.utf8=v,this.view=u.encode(v),this.buffer=t?t.from(this.view.buffer,0,this.view.byteLength):{}}}class y{constructor(){this.cache=new Map}get(v,g){let m=this.cache.get(g);return m===void 0&&(g==="view"?m=(function(w,x){return x.subarray(w)}).bind(null,v):m=(function(w,x){return x.slice(w)}).bind(null,v),this.cache.set(g,m)),m}}const _=function(b,v){let g=0,m=b.length;for(;g<m&&b[g]===v;)g++;for(;m>g&&b[m-1]===v;)m--;return b.slice(g,m)};return p_}const{supports:gz}=S6,{Transcoder:vz}=x6,{EventEmitter:wz}=qb,{fromCallback:mc}=hh,fo=qa,{AbstractIterator:nd}=Va,{DefaultKeyIterator:bz,DefaultValueIterator:_z}=WS,{DeferredIterator:Ez,DeferredKeyIterator:Az,DeferredValueIterator:Sz}=Hb,{DefaultChainedBatch:BC}=L6,{getCallback:id,getOptions:gc}=b0,gg=pz,$t=Symbol("promise"),eu=Symbol("landed"),sd=Symbol("resources"),h_=Symbol("closeResources"),jh=Symbol("operations"),Uh=Symbol("undefer"),vg=Symbol("deferOpen"),FC=Symbol("options"),Mt=Symbol("status"),od=Symbol("defaultOptions"),Gf=Symbol("transcoder"),wg=Symbol("keyEncoding"),y_=Symbol("valueEncoding"),xz=()=>{};let GS=class extends wz{constructor(t,r){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");r=gc(r);const{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[sd]=new Set,this[jh]=[],this[vg]=!0,this[FC]=o,this[Mt]="opening",this.supports=gz(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Gf]=new vz($z(this)),this[wg]=this[Gf].encoding(n||"utf8"),this[y_]=this[Gf].encoding(s||"utf8");for(const a of this[Gf].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[od]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[wg].commonName,valueEncoding:this[y_].commonName}),key:Object.freeze({keyEncoding:this[wg].commonName})},this.nextTick(()=>{this[vg]&&this.open({passive:!1},xz)})}get status(){return this[Mt]}keyEncoding(t){return this[Gf].encoding(t??this[wg])}valueEncoding(t){return this[Gf].encoding(t??this[y_])}open(t,r){r=id(t,r),r=mc(r,$t),t={...this[FC],...gc(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;const n=s=>{this[Mt]==="closing"||this[Mt]==="opening"?this.once(eu,s?()=>n(s):n):this[Mt]!=="open"?r(new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return t.passive?this[Mt]==="opening"?this.once(eu,n):this.nextTick(n):this[Mt]==="closed"||this[vg]?(this[vg]=!1,this[Mt]="opening",this.emit("opening"),this._open(t,s=>{if(s){this[Mt]="closed",this[h_](()=>{this.emit(eu),n(s)}),this[Uh]();return}this[Mt]="open",this[Uh](),this.emit(eu),this[Mt]==="open"&&this.emit("open"),this[Mt]==="open"&&this.emit("ready"),n()})):this[Mt]==="open"?this.nextTick(n):this.once(eu,()=>this.open(t,r)),r[$t]}_open(t,r){this.nextTick(r)}close(t){t=mc(t,$t);const r=n=>{this[Mt]==="opening"||this[Mt]==="closing"?this.once(eu,n?r(n):r):this[Mt]!=="closed"?t(new fo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):t()};if(this[Mt]==="open"){this[Mt]="closing",this.emit("closing");const n=s=>{this[Mt]="open",this[Uh](),this.emit(eu),r(s)};this[h_](()=>{this._close(s=>{if(s)return n(s);this[Mt]="closed",this[Uh](),this.emit(eu),this[Mt]==="closed"&&this.emit("closed"),r()})})}else this[Mt]==="closed"?this.nextTick(r):this.once(eu,()=>this.close(t));return t[$t]}[h_](t){if(this[sd].size===0)return this.nextTick(t);let r=this[sd].size,n=!0;const s=()=>{--r===0&&(n?this.nextTick(t):t())};for(const i of this[sd])i.close(s);n=!1,this[sd].clear()}_close(t){this.nextTick(t)}get(t,r,n){if(n=id(r,n),n=mc(n,$t),r=gc(r,this[od].entry),this[Mt]==="opening")return this.defer(()=>this.get(t,r,n)),n[$t];if(Xf(this,n))return n[$t];const s=this._checkKey(t);if(s)return this.nextTick(n,s),n[$t];const i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,c=o.format;return(r.keyEncoding!==a||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(i.encode(t),a),r,(l,u)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{u=o.decode(u)}catch(d){return n(new fo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,u)}),n[$t]}_get(t,r,n){this.nextTick(n,new Error("NotFound"))}getMany(t,r,n){if(n=id(r,n),n=mc(n,$t),r=gc(r,this[od].entry),this[Mt]==="opening")return this.defer(()=>this.getMany(t,r,n)),n[$t];if(Xf(this,n))return n[$t];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[$t];if(t.length===0)return this.nextTick(n,null,[]),n[$t];const s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));const c=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l],d=this._checkKey(u);if(d)return this.nextTick(n,d),n[$t];c[l]=this.prefixKey(s.encode(u),o)}return this._getMany(c,r,(l,u)=>{if(l)return n(l);try{for(let d=0;d<u.length;d++)u[d]!==void 0&&(u[d]=i.decode(u[d]))}catch(d){return n(new fo(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,u)}),n[$t]}_getMany(t,r,n){this.nextTick(n,null,new Array(t.length).fill(void 0))}put(t,r,n,s){if(s=id(n,s),s=mc(s,$t),n=gc(n,this[od].entry),this[Mt]==="opening")return this.defer(()=>this.put(t,r,n,s)),s[$t];if(Xf(this,s))return s[$t];const i=this._checkKey(t)||this._checkValue(r);if(i)return this.nextTick(s,i),s[$t];const o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),c=o.format,l=a.format;(n.keyEncoding!==c||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:c,valueEncoding:l}));const u=this.prefixKey(o.encode(t),c),d=a.encode(r);return this._put(u,d,n,h=>{if(h)return s(h);this.emit("put",t,r),s()}),s[$t]}_put(t,r,n,s){this.nextTick(s)}del(t,r,n){if(n=id(r,n),n=mc(n,$t),r=gc(r,this[od].key),this[Mt]==="opening")return this.defer(()=>this.del(t,r,n)),n[$t];if(Xf(this,n))return n[$t];const s=this._checkKey(t);if(s)return this.nextTick(n,s),n[$t];const i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(t),o),r,a=>{if(a)return n(a);this.emit("del",t),n()}),n[$t]}_del(t,r,n){this.nextTick(n)}batch(t,r,n){if(!arguments.length){if(this[Mt]==="opening")return new BC(this);if(this[Mt]!=="open")throw new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?n=t:n=id(r,n),n=mc(n,$t),r=gc(r,this[od].empty),this[Mt]==="opening")return this.defer(()=>this.batch(t,r,n)),n[$t];if(Xf(this,n))return n[$t];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[$t];if(t.length===0)return this.nextTick(n),n[$t];const s=new Array(t.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let c=0;c<t.length;c++){if(typeof t[c]!="object"||t[c]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[$t];const l=Object.assign({},t[c]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[$t];const u=this._checkKey(l.key);if(u)return this.nextTick(n,u),n[$t];const d=l.sublevel!=null?l.sublevel:this,h=d.keyEncoding(l.keyEncoding||i),f=h.format;if(l.key=d.prefixKey(h.encode(l.key),f),l.keyEncoding=f,l.type==="put"){const p=this._checkValue(l.value);if(p)return this.nextTick(n,p),n[$t];const y=d.valueEncoding(l.valueEncoding||o);l.value=y.encode(l.value),l.valueEncoding=y.format}d!==this&&(l.sublevel=null),s[c]=l}return this._batch(s,a,c=>{if(c)return n(c);this.emit("batch",t),n()}),n[$t]}_batch(t,r,n){this.nextTick(n)}sublevel(t,r){return this._sublevel(t,CA.defaults(r))}_sublevel(t,r){return new CA(this,t,r)}prefixKey(t,r){return t}clear(t,r){if(r=id(t,r),r=mc(r,$t),t=gc(t,this[od].empty),this[Mt]==="opening")return this.defer(()=>this.clear(t,r)),r[$t];if(Xf(this,r))return r[$t];const n=t,s=this.keyEncoding(t.keyEncoding);return t=gg(t,s),t.keyEncoding=s.format,t.limit===0?this.nextTick(r):this._clear(t,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[$t]}_clear(t,r){this.nextTick(r)}iterator(t){const r=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if(t=gg(t,r),t.keys=t.keys!==!1,t.values=t.values!==!1,t[nd.keyEncoding]=r,t[nd.valueEncoding]=n,t.keyEncoding=r.format,t.valueEncoding=n.format,this[Mt]==="opening")return new Ez(this,t);if(this[Mt]!=="open")throw new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new nd(this,t)}keys(t){const r=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if(t=gg(t,r),t[nd.keyEncoding]=r,t[nd.valueEncoding]=n,t.keyEncoding=r.format,t.valueEncoding=n.format,this[Mt]==="opening")return new Az(this,t);if(this[Mt]!=="open")throw new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new bz(this,t)}values(t){const r=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if(t=gg(t,r),t[nd.keyEncoding]=r,t[nd.valueEncoding]=n,t.keyEncoding=r.format,t.valueEncoding=n.format,this[Mt]==="opening")return new Sz(this,t);if(this[Mt]!=="open")throw new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new _z(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[jh].push(t)}[Uh](){if(this[jh].length===0)return;const t=this[jh];this[jh]=[];for(const r of t)r()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[sd].add(t)}detachResource(t){this[sd].delete(t)}_chainedBatch(){return new BC(this)}_checkKey(t){if(t==null)return new fo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new fo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};GS.prototype.nextTick=hz();const{AbstractSublevel:CA}=mz()({AbstractLevel:GS});Ub.AbstractLevel=GS;Ub.AbstractSublevel=CA;const Xf=function(e,t){return e[Mt]!=="open"?(e.nextTick(t,new fo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},$z=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])};Ul.AbstractLevel=Ub.AbstractLevel;Ul.AbstractSublevel=Ub.AbstractSublevel;Ul.AbstractIterator=Va.AbstractIterator;Ul.AbstractKeyIterator=Va.AbstractKeyIterator;Ul.AbstractValueIterator=Va.AbstractValueIterator;Ul.AbstractChainedBatch=JS.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Dz=Pz;const Cz=q6;function Pz(e,t,r){if(typeof t!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,c=!0,l;Array.isArray(e)?(n=[],i=s=e.length):(o=Object.keys(e),n={},i=s=o.length);function u(h){function f(){r&&r(h,n),r=null}c?Cz(f):f()}function d(h,f,p){if(n[h]=p,f&&(a=!0),--i===0||f)u(f);else if(!a&&l<s){let y;o?(y=o[l],l+=1,e[y](function(_,b){d(y,_,b)})):(y=l,l+=1,e[y](function(_,b){d(y,_,b)}))}}l=t,i?o?o.some(function(h,f){return e[h](function(p,y){d(h,p,y)}),f===t-1}):e.some(function(h,f){return h(function(p,y){d(f,p,y)}),f===t-1}):u(null),c=!1}var V6={},H6=function(t){const r=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,n=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,s=t.gte===void 0,i=t.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null};const kz=new TextEncoder;var z6=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):kz.encode(e)};const{AbstractIterator:Oz}=Ul,NC=H6,bg=z6,Ho=Symbol("cache"),tu=Symbol("finished"),Gi=Symbol("options"),ru=Symbol("currentOptions"),ad=Symbol("position"),m_=Symbol("location"),Zf=Symbol("first"),RC={};let Tz=class extends Oz{constructor(t,r,n){super(t,n),this[Ho]=[],this[tu]=this.limit===0,this[Gi]=n,this[ru]={...n},this[ad]=void 0,this[m_]=r,this[Zf]=!0}_nextv(t,r,n){if(this[Zf]=!1,this[tu])return this.nextTick(n,null,[]);if(this[Ho].length>0)return t=Math.min(t,this[Ho].length),this.nextTick(n,null,this[Ho].splice(0,t));this[ad]!==void 0&&(this[Gi].reverse?(this[ru].lt=this[ad],this[ru].lte=void 0):(this[ru].gt=this[ad],this[ru].gte=void 0));let s;try{s=NC(this[ru])}catch{return this[tu]=!0,this.nextTick(n,null,[])}const i=this.db.db.transaction([this[m_]],"readonly"),o=i.objectStore(this[m_]),a=[];if(this[Gi].reverse){const c=!this[Gi].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[c](s,"prev").onsuccess=l=>{const u=l.target.result;if(u){const{key:d,value:h}=u;this[ad]=d,a.push([this[Gi].keys&&d!==void 0?bg(d):void 0,this[Gi].values&&h!==void 0?bg(h):void 0]),a.length<t?u.continue():MC(i)}else this[tu]=!0}}else{let c,l;const u=()=>{if(c===void 0||l===void 0)return;const d=Math.max(c.length,l.length);d===0||t===1/0?this[tu]=!0:this[ad]=c[d-1],a.length=d;for(let h=0;h<d;h++){const f=c[h],p=l[h];a[h]=[this[Gi].keys&&f!==void 0?bg(f):void 0,this[Gi].values&&p!==void 0?bg(p):void 0]}MC(i)};this[Gi].keys||t<1/0?o.getAllKeys(s,t<1/0?t:void 0).onsuccess=d=>{c=d.target.result,u()}:(c=[],this.nextTick(u)),this[Gi].values?o.getAll(s,t<1/0?t:void 0).onsuccess=d=>{l=d.target.result,u()}:(l=[],this.nextTick(u))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(t){if(this[Ho].length>0){const[r,n]=this[Ho].shift();this.nextTick(t,null,r,n)}else if(this[tu])this.nextTick(t);else{let r=Math.min(100,this.limit-this.count);this[Zf]&&(this[Zf]=!1,r=1),this._nextv(r,RC,(n,s)=>{if(n)return t(n);this[Ho]=s,this._next(t)})}}_all(t,r){this[Zf]=!1;const n=this[Ho].splice(0,this[Ho].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,RC,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(t,r){this[Zf]=!0,this[Ho]=[],this[tu]=!1,this[ad]=void 0,this[ru]={...this[Gi]};let n;try{n=NC(this[Gi])}catch{this[tu]=!0;return}n!==null&&!n.includes(t)?this[tu]=!0:this[Gi].reverse?this[ru].lte=t:this[ru].gte=t}};V6.Iterator=Tz;function MC(e){typeof e.commit=="function"&&e.commit()}var Iz=function(t,r,n,s,i){if(s.limit===0)return t.nextTick(i);const o=t.db.transaction([r],"readwrite"),a=o.objectStore(r);let c=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};const l=a.openKeyCursor?"openKeyCursor":"openCursor",u=s.reverse?"prev":"next";a[l](n,u).onsuccess=function(d){const h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(s.limit<=0||++c<s.limit)&&h.continue()})}};const{AbstractLevel:Bz}=Ul,jC=qa,Fz=Dz,{fromCallback:Nz}=hh,{Iterator:Rz}=V6,UC=z6,Mz=Iz,jz=H6,W6="level-js-",Kh=Symbol("idb"),g_=Symbol("namePrefix"),nu=Symbol("location"),v_=Symbol("version"),ud=Symbol("store"),Lh=Symbol("onComplete"),KC=Symbol("promise");class Uz extends Bz{constructor(t,r,n){if(typeof r=="function"||typeof n=="function")throw new jC("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof t!="string")throw new Error("constructor requires a location string argument");this[nu]=t,this[g_]=s??W6,this[v_]=parseInt(i||1,10),this[Kh]=null}get location(){return this[nu]}get namePrefix(){return this[g_]}get version(){return this[v_]}get db(){return this[Kh]}get type(){return"browser-level"}_open(t,r){const n=indexedDB.open(this[g_]+this[nu],this[v_]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Kh]=n.result,r()},n.onupgradeneeded=s=>{const i=s.target.result;i.objectStoreNames.contains(this[nu])||i.createObjectStore(this[nu])}}[ud](t){return this[Kh].transaction([this[nu]],t).objectStore(this[nu])}[Lh](t,r){const n=t.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,t.result)}}_get(t,r,n){const s=this[ud]("readonly");let i;try{i=s.get(t)}catch(o){return this.nextTick(n,o)}this[Lh](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new jC("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,UC(a))})}_getMany(t,r,n){const s=this[ud]("readonly"),i=t.map(o=>a=>{let c;try{c=s.get(o)}catch(l){return a(l)}c.onsuccess=()=>{const l=c.result;a(null,l===void 0?l:UC(l))},c.onerror=l=>{l.stopPropagation(),a(c.error)}});Fz(i,16,n)}_del(t,r,n){const s=this[ud]("readwrite");let i;try{i=s.delete(t)}catch(o){return this.nextTick(n,o)}this[Lh](i,n)}_put(t,r,n,s){const i=this[ud]("readwrite");let o;try{o=i.put(r,t)}catch(a){return this.nextTick(s,a)}this[Lh](o,s)}_iterator(t){return new Rz(this,this[nu],t)}_batch(t,r,n){const s=this[ud]("readwrite"),i=s.transaction;let o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function c(){const l=t[o++],u=l.key;let d;try{d=l.type==="del"?s.delete(u):s.put(l.value,u)}catch(h){a=h,i.abort();return}o<t.length?d.onsuccess=c:typeof i.commit=="function"&&i.commit()}c()}_clear(t,r){let n,s;try{n=jz(t)}catch{return this.nextTick(r)}if(t.limit>=0)return Mz(this,this[nu],n,t,r);try{const i=this[ud]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[Lh](s,r)}_close(t){this[Kh].close(),this.nextTick(t)}}Uz.destroy=function(e,t,r){typeof t=="function"&&(r=t,t=W6),r=Nz(r,KC);const n=indexedDB.deleteDatabase(t+e);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[KC]};var Kz={exports:{}},w_={exports:{}},gn={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Uint8Array},J6={exports:{}};(function(e){const t=no,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||t.Blob,s=typeof n<"u"?function(a){return a instanceof n}:function(a){return!1};class i extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let c="";for(let l=0;l<a.length;l++)c+=`    ${a[l].stack}
`;super(c),this.name="AggregateError",this.errors=a}}e.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(o){let a=!1;return function(...c){a||(a=!0,o.apply(this,c))}},createDeferredPromise:function(){let o,a;return{promise:new Promise((l,u)=>{o=l,a=u}),resolve:o,reject:a}},promisify(o){return new Promise((a,c)=>{o((l,...u)=>l?c(l):a(...u))})},debuglog(){return function(){}},format(o,...a){return o.replace(/%([sdifj])/g,function(...[c,l]){const u=a.shift();return l==="f"?u.toFixed(6):l==="j"?JSON.stringify(u):l==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}},types:{isAsyncFunction(o){return o instanceof r},isArrayBufferView(o){return ArrayBuffer.isView(o)}},isBlob:s},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(J6);var ic=J6.exports,XS={},Cv={exports:{}},Lz=Cv.exports,LC;function ZS(){return LC||(LC=1,Object.defineProperty(Lz,"__esModule",{value:!0}),Cv.exports=Object.freeze(Object.create(null,{__unenv__:{get:()=>!0}}))),Cv.exports}const{format:qz,inspect:Fw,AggregateError:Vz}=ic,Hz=globalThis.AggregateError||Vz,zz=Symbol("kIsNodeError"),Wz=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Jz=/^([A-Z][a-z0-9]*)+$/,Gz="__node_internal_",Jb={};function of(e,t){if(!e)throw new Jb.ERR_INTERNAL_ASSERTION(t)}function qC(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Xz(e,t,r){if(typeof t=="function")return of(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return of(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:qz(t,...r)}function ti(e,t,r){r||(r=Error);class n extends r{constructor(...i){super(Xz(e,t,i))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[zz]=!0,Jb[e]=n}function VC(e){const t=Gz+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Zz(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new Hz([t,e],t.message);return r.code=t.code,r}return e||t}let Yz=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Jb.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};ti("ERR_ASSERTION","%s",Error);ti("ERR_INVALID_ARG_TYPE",(e,t,r)=>{of(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const s=[],i=[],o=[];for(const c of t)of(typeof c=="string","All expected entries have to be of type string"),Wz.includes(c)?s.push(c.toLowerCase()):Jz.test(c)?i.push(c):(of(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(i.length>0){const c=s.indexOf("object");c!==-1&&(s.splice(s,c,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`one of type ${s.join(", ")}, or ${c}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();n+=`an instance of ${i.join(", ")}, or ${c}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();n+=`one of ${o.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=Fw(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Fw(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);ti("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=Fw(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);ti("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${s}.`},TypeError);ti("ERR_MISSING_ARGS",(...e)=>{of(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);ti("ERR_OUT_OF_RANGE",(e,t,r)=>{of(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=qC(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=qC(n)),n+="n"):n=Fw(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);ti("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ti("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ti("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ti("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ti("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ti("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ti("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ti("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ti("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ti("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ti("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Wi={AbortError:Yz,aggregateTwoErrors:VC(Zz),hideStackFrames:VC,codes:Jb};const{ArrayIsArray:YS,ArrayPrototypeIncludes:G6,ArrayPrototypeJoin:X6,ArrayPrototypeMap:Qz,NumberIsInteger:QS,NumberIsNaN:eW,NumberMAX_SAFE_INTEGER:tW,NumberMIN_SAFE_INTEGER:rW,NumberParseInt:nW,ObjectPrototypeHasOwnProperty:iW,RegExpPrototypeExec:Z6,String:sW,StringPrototypeToUpperCase:oW,StringPrototypeTrim:aW}=gn,{hideStackFrames:io,codes:{ERR_SOCKET_BAD_PORT:uW,ERR_INVALID_ARG_TYPE:xi,ERR_INVALID_ARG_VALUE:yh,ERR_OUT_OF_RANGE:bf,ERR_UNKNOWN_SIGNAL:HC}}=Wi,{normalizeEncoding:cW}=ic,{isAsyncFunction:lW,isArrayBufferView:dW}=ic.types,zC={};function fW(e){return e===(e|0)}function pW(e){return e===e>>>0}const hW=/^[0-7]+$/,yW="must be a 32-bit unsigned integer or an octal string";function mW(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(Z6(hW,e)===null)throw new yh(t,e,yW);e=nW(e,8)}return Y6(e,t),e}const gW=io((e,t,r=rW,n=tW)=>{if(typeof e!="number")throw new xi(t,"number",e);if(!QS(e))throw new bf(t,"an integer",e);if(e<r||e>n)throw new bf(t,`>= ${r} && <= ${n}`,e)}),vW=io((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new xi(t,"number",e);if(!QS(e))throw new bf(t,"an integer",e);if(e<r||e>n)throw new bf(t,`>= ${r} && <= ${n}`,e)}),Y6=io((e,t,r=!1)=>{if(typeof e!="number")throw new xi(t,"number",e);if(!QS(e))throw new bf(t,"an integer",e);const n=r?1:0,s=4294967295;if(e<n||e>s)throw new bf(t,`>= ${n} && <= ${s}`,e)});function ex(e,t){if(typeof e!="string")throw new xi(t,"string",e)}function wW(e,t,r=void 0,n){if(typeof e!="number")throw new xi(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&eW(e))throw new bf(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const bW=io((e,t,r)=>{if(!G6(r,e)){const s="must be one of: "+X6(Qz(r,i=>typeof i=="string"?`'${i}'`:sW(i)),", ");throw new yh(t,e,s)}});function Q6(e,t){if(typeof e!="boolean")throw new xi(t,"boolean",e)}function b_(e,t,r){return e==null||!iW(e,t)?r:e[t]}const _W=io((e,t,r=null)=>{const n=b_(r,"allowArray",!1),s=b_(r,"allowFunction",!1);if(!b_(r,"nullable",!1)&&e===null||!n&&YS(e)||typeof e!="object"&&(!s||typeof e!="function"))throw new xi(t,"Object",e)}),EW=io((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new xi(t,"a dictionary",e)}),tx=io((e,t,r=0)=>{if(!YS(e))throw new xi(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new yh(t,e,n)}});function AW(e,t){tx(e,t);for(let r=0;r<e.length;r++)ex(e[r],`${t}[${r}]`)}function SW(e,t){tx(e,t);for(let r=0;r<e.length;r++)Q6(e[r],`${t}[${r}]`)}function xW(e,t="signal"){if(ex(e,t),zC[e]===void 0)throw zC[oW(e)]!==void 0?new HC(e+" (signals must use all capital letters)"):new HC(e)}const $W=io((e,t="buffer")=>{if(!dW(e))throw new xi(t,["Buffer","TypedArray","DataView"],e)});function DW(e,t){const r=cW(t),n=e.length;if(r==="hex"&&n%2!==0)throw new yh("encoding",t,`is invalid for data of length ${n}`)}function CW(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&aW(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new uW(t,e,r);return e|0}const PW=io((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new xi(t,"AbortSignal",e)}),kW=io((e,t)=>{if(typeof e!="function")throw new xi(t,"Function",e)}),OW=io((e,t)=>{if(typeof e!="function"||lW(e))throw new xi(t,"Function",e)}),TW=io((e,t)=>{if(e!==void 0)throw new xi(t,"undefined",e)});function IW(e,t,r){if(!G6(r,e))throw new xi(t,`('${X6(r,"|")}')`,e)}const BW=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function WC(e,t){if(typeof e>"u"||!Z6(BW,e))throw new yh(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function FW(e){if(typeof e=="string")return WC(e,"hints"),e;if(YS(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const s=e[n];WC(s,"hints"),r+=s,n!==t-1&&(r+=", ")}return r}throw new yh("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Gb={isInt32:fW,isUint32:pW,parseFileMode:mW,validateArray:tx,validateStringArray:AW,validateBooleanArray:SW,validateBoolean:Q6,validateBuffer:$W,validateDictionary:EW,validateEncoding:DW,validateFunction:kW,validateInt32:vW,validateInteger:gW,validateNumber:wW,validateObject:_W,validateOneOf:bW,validatePlainFunction:OW,validatePort:CW,validateSignalName:xW,validateString:ex,validateUint32:Y6,validateUndefined:TW,validateUnion:IW,validateAbortSignal:PW,validateLinkHeaderValue:FW},rx={exports:{}},eF={exports:{}},Zr=eF.exports={},da,fa;function PA(){throw new Error("setTimeout has not been defined")}function kA(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?da=setTimeout:da=PA}catch{da=PA}try{typeof clearTimeout=="function"?fa=clearTimeout:fa=kA}catch{fa=kA}})();function tF(e){if(da===setTimeout)return setTimeout(e,0);if((da===PA||!da)&&setTimeout)return da=setTimeout,setTimeout(e,0);try{return da(e,0)}catch{try{return da.call(null,e,0)}catch{return da.call(this,e,0)}}}function NW(e){if(fa===clearTimeout)return clearTimeout(e);if((fa===kA||!fa)&&clearTimeout)return fa=clearTimeout,clearTimeout(e);try{return fa(e)}catch{try{return fa.call(null,e)}catch{return fa.call(this,e)}}}var Ku=[],Tp=!1,zd,Pv=-1;function RW(){!Tp||!zd||(Tp=!1,zd.length?Ku=zd.concat(Ku):Pv=-1,Ku.length&&rF())}function rF(){if(!Tp){var e=tF(RW);Tp=!0;for(var t=Ku.length;t;){for(zd=Ku,Ku=[];++Pv<t;)zd&&zd[Pv].run();Pv=-1,t=Ku.length}zd=null,Tp=!1,NW(e)}}Zr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ku.push(new nF(e,t)),Ku.length===1&&!Tp&&tF(rF)};function nF(e,t){this.fun=e,this.array=t}nF.prototype.run=function(){this.fun.apply(null,this.array)};Zr.title="browser";Zr.browser=!0;Zr.env={};Zr.argv=[];Zr.version="";Zr.versions={};function sc(){}Zr.on=sc;Zr.addListener=sc;Zr.once=sc;Zr.off=sc;Zr.removeListener=sc;Zr.removeAllListeners=sc;Zr.emit=sc;Zr.prependListener=sc;Zr.prependOnceListener=sc;Zr.listeners=function(e){return[]};Zr.binding=function(e){throw new Error("process.binding is not supported")};Zr.cwd=function(){return"/"};Zr.chdir=function(e){throw new Error("process.chdir is not supported")};Zr.umask=function(){return 0};var Nf=eF.exports;const{Symbol:Xb,SymbolAsyncIterator:JC,SymbolIterator:GC,SymbolFor:iF}=gn,sF=Xb("kDestroyed"),oF=Xb("kIsErrored"),OA=Xb("kIsReadable"),aF=Xb("kIsDisturbed"),MW=iF("nodejs.webstream.isClosedPromise"),jW=iF("nodejs.webstream.controllerErrorFunction");function Zb(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function Yb(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function UW(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Ha(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function uF(e){return!!(e&&!Ha(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function cF(e){return!!(e&&!Ha(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function lF(e){return!!(e&&!Ha(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function KW(e){return uF(e)||cF(e)||lF(e)}function LW(e,t){return e==null?!1:t===!0?typeof e[JC]=="function":t===!1?typeof e[GC]=="function":typeof e[JC]=="function"||typeof e[GC]=="function"}function Qb(e){if(!Ha(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[sF]||n!=null&&n.destroyed)}function dF(e){if(!Yb(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function qW(e,t){if(!Yb(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function VW(e){if(!Zb(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function fF(e,t){if(!Zb(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function pF(e){return e&&e[OA]!=null?e[OA]:typeof(e==null?void 0:e.readable)!="boolean"?null:Qb(e)?!1:Zb(e)&&e.readable&&!fF(e)}function hF(e){return typeof(e==null?void 0:e.writable)!="boolean"?null:Qb(e)?!1:Yb(e)&&e.writable&&!dF(e)}function HW(e,t){return Ha(e)?Qb(e)?!0:!((t==null?void 0:t.readable)!==!1&&pF(e)||(t==null?void 0:t.writable)!==!1&&hF(e)):null}function zW(e){var t,r;return Ha(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function WW(e){var t,r;return Ha(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function JW(e){if(!Ha(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&yF(e)?e._closed:null}function yF(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function mF(e){return typeof e._sent100=="boolean"&&yF(e)}function GW(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function XW(e){if(!Ha(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&mF(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function ZW(e){var t;return!!(e&&((t=e[aF])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function YW(e){var t,r,n,s,i,o,a,c,l,u;return!!(e&&((t=(r=(n=(s=(i=(o=e[oF])!==null&&o!==void 0?o:e.readableErrored)!==null&&i!==void 0?i:e.writableErrored)!==null&&s!==void 0?s:(a=e._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=e._readableState)===null||l===void 0?void 0:l.errored)!==null&&t!==void 0?t:!((u=e._writableState)===null||u===void 0)&&u.errored))}var oc={kDestroyed:sF,isDisturbed:ZW,kIsDisturbed:aF,isErrored:YW,kIsErrored:oF,isReadable:pF,kIsReadable:OA,kIsClosedPromise:MW,kControllerErrorFunction:jW,isClosed:JW,isDestroyed:Qb,isDuplexNodeStream:UW,isFinished:HW,isIterable:LW,isReadableNodeStream:Zb,isReadableStream:uF,isReadableEnded:VW,isReadableFinished:fF,isReadableErrored:WW,isNodeStream:Ha,isWebStream:KW,isWritable:hF,isWritableNodeStream:Yb,isWritableStream:cF,isWritableEnded:dF,isWritableFinished:qW,isWritableErrored:zW,isServerRequest:GW,isServerResponse:mF,willEmitClose:XW,isTransformStream:lF};const sl=Nf,{AbortError:gF,codes:QW}=Wi,{ERR_INVALID_ARG_TYPE:eJ,ERR_STREAM_PREMATURE_CLOSE:XC}=QW,{kEmptyObject:TA,once:IA}=ic,{validateAbortSignal:tJ,validateFunction:rJ,validateObject:nJ,validateBoolean:iJ}=Gb,{Promise:sJ,PromisePrototypeThen:oJ}=gn,{isClosed:aJ,isReadable:ZC,isReadableNodeStream:__,isReadableStream:uJ,isReadableFinished:YC,isReadableErrored:QC,isWritable:eP,isWritableNodeStream:tP,isWritableStream:cJ,isWritableFinished:rP,isWritableErrored:nP,isNodeStream:lJ,willEmitClose:dJ,kIsClosedPromise:fJ}=oc;function pJ(e){return e.setHeader&&typeof e.abort=="function"}const BA=()=>{};function vF(e,t,r){var n,s;if(arguments.length===2?(r=t,t=TA):t==null?t=TA:nJ(t,"options"),rJ(r,"callback"),tJ(t.signal,"options.signal"),r=IA(r),uJ(e)||cJ(e))return hJ(e,t,r);if(!lJ(e))throw new eJ("stream",["ReadableStream","WritableStream","Stream"],e);const i=(n=t.readable)!==null&&n!==void 0?n:__(e),o=(s=t.writable)!==null&&s!==void 0?s:tP(e),a=e._writableState,c=e._readableState,l=()=>{e.writable||h()};let u=dJ(e)&&__(e)===i&&tP(e)===o,d=rP(e,!1);const h=()=>{d=!0,e.destroyed&&(u=!1),!(u&&(!e.readable||i))&&(!i||f)&&r.call(e)};let f=YC(e,!1);const p=()=>{f=!0,e.destroyed&&(u=!1),!(u&&(!e.writable||o))&&(!o||d)&&r.call(e)},y=w=>{r.call(e,w)};let _=aJ(e);const b=()=>{_=!0;const w=nP(e)||QC(e);if(w&&typeof w!="boolean")return r.call(e,w);if(i&&!f&&__(e,!0)&&!YC(e,!1))return r.call(e,new XC);if(o&&!d&&!rP(e,!1))return r.call(e,new XC);r.call(e)},v=()=>{_=!0;const w=nP(e)||QC(e);if(w&&typeof w!="boolean")return r.call(e,w);r.call(e)},g=()=>{e.req.on("finish",h)};pJ(e)?(e.on("complete",h),u||e.on("abort",b),e.req?g():e.on("request",g)):o&&!a&&(e.on("end",l),e.on("close",l)),!u&&typeof e.aborted=="boolean"&&e.on("aborted",b),e.on("end",p),e.on("finish",h),t.error!==!1&&e.on("error",y),e.on("close",b),_?sl.nextTick(b):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?u||sl.nextTick(v):(!i&&(!u||ZC(e))&&(d||eP(e)===!1)||!o&&(!u||eP(e))&&(f||ZC(e)===!1)||c&&e.req&&e.aborted)&&sl.nextTick(v);const m=()=>{r=BA,e.removeListener("aborted",b),e.removeListener("complete",h),e.removeListener("abort",b),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",y),e.removeListener("close",b)};if(t.signal&&!_){const w=()=>{const x=r;m(),x.call(e,new gF(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)sl.nextTick(w);else{const x=r;r=IA((...S)=>{t.signal.removeEventListener("abort",w),x.apply(e,S)}),t.signal.addEventListener("abort",w)}}return m}function hJ(e,t,r){let n=!1,s=BA;if(t.signal)if(s=()=>{n=!0,r.call(e,new gF(void 0,{cause:t.signal.reason}))},t.signal.aborted)sl.nextTick(s);else{const o=r;r=IA((...a)=>{t.signal.removeEventListener("abort",s),o.apply(e,a)}),t.signal.addEventListener("abort",s)}const i=(...o)=>{n||sl.nextTick(()=>r.apply(e,o))};return oJ(e[fJ].promise,i,i),BA}function yJ(e,t){var r;let n=!1;return t===null&&(t=TA),(r=t)!==null&&r!==void 0&&r.cleanup&&(iJ(t.cleanup,"cleanup"),n=t.cleanup),new sJ((s,i)=>{const o=vF(e,t,a=>{n&&o(),a?i(a):s()})})}rx.exports=vF;rx.exports.finished=yJ;var Kl=rx.exports;const Pa=Nf,{aggregateTwoErrors:mJ,codes:{ERR_MULTIPLE_CALLBACK:gJ},AbortError:vJ}=Wi,{Symbol:wF}=gn,{kDestroyed:wJ,isDestroyed:bJ,isFinished:_J,isServerRequest:EJ}=oc,bF=wF("kDestroy"),FA=wF("kConstruct");function _F(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function AJ(e,t){const r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(_F(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?iP(this,e,t):this.once(bF,function(i){iP(this,mJ(i,e),t)}),this)}function iP(e,t,r){let n=!1;function s(i){if(n)return;n=!0;const o=e._readableState,a=e._writableState;_F(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Pa.nextTick(SJ,e,i):Pa.nextTick(EF,e)}try{e._destroy(t||null,s)}catch(i){s(i)}}function SJ(e,t){NA(e,t),EF(e)}function EF(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function NA(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function xJ(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function RA(e,t,r){const n=e._readableState,s=e._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?e.destroy(t):t&&(t.stack,s&&!s.errored&&(s.errored=t),n&&!n.errored&&(n.errored=t),r?Pa.nextTick(NA,e,t):NA(e,t))}function $J(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(FA,t),!(e.listenerCount(FA)>1)&&Pa.nextTick(DJ,e)}function DJ(e){let t=!1;function r(n){if(t){RA(e,n??new gJ);return}t=!0;const s=e._readableState,i=e._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?e.emit(bF,n):n?RA(e,n,!0):Pa.nextTick(CJ,e)}try{e._construct(n=>{Pa.nextTick(r,n)})}catch(n){Pa.nextTick(r,n)}}function CJ(e){e.emit(FA)}function sP(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function AF(e){e.emit("close")}function PJ(e,t){e.emit("error",t),Pa.nextTick(AF,e)}function kJ(e,t){!e||bJ(e)||(!t&&!_J(e)&&(t=new vJ),EJ(e)?(e.socket=null,e.destroy(t)):sP(e)?e.abort():sP(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Pa.nextTick(PJ,e,t):Pa.nextTick(AF,e),e.destroyed||(e[wJ]=!0))}var mh={construct:$J,destroyer:kJ,destroy:AJ,undestroy:xJ,errorOrDestroy:RA};const{ArrayIsArray:OJ,ObjectSetPrototypeOf:SF}=gn,{EventEmitter:e1}=qb;function t1(e){e1.call(this,e)}SF(t1.prototype,e1.prototype);SF(t1,e1);t1.prototype.pipe=function(e,t){const r=this;function n(u){e.writable&&e.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}e.on("drain",s),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,e.end())}function a(){i||(i=!0,typeof e.destroy=="function"&&e.destroy())}function c(u){l(),e1.listenerCount(this,"error")===0&&this.emit("error",u)}MA(r,"error",c),MA(e,"error",c);function l(){r.removeListener("data",n),e.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e};function MA(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):OJ(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var nx={Stream:t1,prependListener:MA},xF={exports:{}};(function(e){const{AbortError:t,codes:r}=Wi,{isNodeStream:n,isWebStream:s,kControllerErrorFunction:i}=oc,o=Kl,{ERR_INVALID_ARG_TYPE:a}=r,c=(l,u)=>{if(typeof l!="object"||!("aborted"in l))throw new a(u,"AbortSignal",l)};e.exports.addAbortSignal=function(u,d){if(c(u,"signal"),!n(d)&&!s(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(u,d)},e.exports.addAbortSignalNoValidate=function(l,u){if(typeof l!="object"||!("aborted"in l))return u;const d=n(u)?()=>{u.destroy(new t(void 0,{cause:l.reason}))}:()=>{u[i](new t(void 0,{cause:l.reason}))};return l.aborted?d():(l.addEventListener("abort",d),o(u,()=>l.removeEventListener("abort",d))),u}})(xF);var r1=xF.exports;const{StringPrototypeSlice:oP,SymbolIterator:TJ,TypedArrayPrototypeSet:_g,Uint8Array:IJ}=gn,{Buffer:E_}=no,{inspect:BJ}=ic;var FJ=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return E_.alloc(0);const r=E_.allocUnsafe(t>>>0);let n=this.head,s=0;for(;n;)_g(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const s=n.slice(0,t);return this.head.data=n.slice(t),s}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[TJ](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,s=0;do{const i=n.data;if(t>i.length)r+=i,t-=i.length;else{t===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=oP(i,0,t),this.head=n,n.data=oP(i,t));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(t){const r=E_.allocUnsafe(t),n=t;let s=this.head,i=0;do{const o=s.data;if(t>o.length)_g(r,o,n-t),t-=o.length;else{t===o.length?(_g(r,o,n-t),++i,s.next?this.head=s.next:this.head=this.tail=null):(_g(r,new IJ(o.buffer,o.byteOffset,t),n-t),this.head=s,s.data=o.slice(t));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return BJ(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:NJ,NumberIsInteger:RJ}=gn,{ERR_INVALID_ARG_VALUE:MJ}=Wi.codes;function jJ(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function $F(e){return e?16:16*1024}function UJ(e,t,r,n){const s=jJ(t,n,r);if(s!=null){if(!RJ(s)||s<0){const i=n?`options.${r}`:"options.highWaterMark";throw new MJ(i,s)}return NJ(s)}return $F(e.objectMode)}var ix={getHighWaterMark:UJ,getDefaultHighWaterMark:$F},DF={},jA={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=no,n=r.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(jA,jA.exports);var KJ=jA.exports,sx=KJ.Buffer,aP=sx.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function LJ(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function qJ(e){var t=LJ(e);if(typeof t!="string"&&(sx.isEncoding===aP||!aP(e)))throw new Error("Unknown encoding: "+e);return t||e}DF.StringDecoder=_0;function _0(e){this.encoding=qJ(e);var t;switch(this.encoding){case"utf16le":this.text=GJ,this.end=XJ,t=4;break;case"utf8":this.fillLast=zJ,t=4;break;case"base64":this.text=ZJ,this.end=YJ,t=3;break;default:this.write=QJ,this.end=eG;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=sx.allocUnsafe(t)}_0.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};_0.prototype.end=JJ;_0.prototype.text=WJ;_0.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function A_(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function VJ(e,t,r){var n=t.length-1;if(n<r)return 0;var s=A_(t[n]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--n<r||s===-2?0:(s=A_(t[n]),s>=0?(s>0&&(e.lastNeed=s-2),s):--n<r||s===-2?0:(s=A_(t[n]),s>=0?(s>0&&(s===2?s=0:e.lastNeed=s-3),s):0))}function HJ(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,""}}function zJ(e){var t=this.lastTotal-this.lastNeed,r=HJ(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function WJ(e,t){var r=VJ(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function JJ(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function GJ(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function XJ(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function ZJ(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function YJ(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function QJ(e){return e.toString(this.encoding)}function eG(e){return e&&e.length?this.write(e):""}const uP=Nf,{PromisePrototypeThen:tG,SymbolAsyncIterator:cP,SymbolIterator:lP}=gn,{Buffer:rG}=no,{ERR_INVALID_ARG_TYPE:nG,ERR_STREAM_NULL_VALUES:iG}=Wi.codes;function sG(e,t,r){let n;if(typeof t=="string"||t instanceof rG)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let s;if(t&&t[cP])s=!0,n=t[cP]();else if(t&&t[lP])s=!1,n=t[lP]();else throw new nG("iterable",["Iterable"],t);const i=new e({objectMode:!0,highWaterMark:1,...r});let o=!1;i._read=function(){o||(o=!0,c())},i._destroy=function(l,u){tG(a(l),()=>uP.nextTick(u,l),d=>uP.nextTick(u,d||l))};async function a(l){const u=l!=null,d=typeof n.throw=="function";if(u&&d){const{value:h,done:f}=await n.throw(l);if(await h,f)return}if(typeof n.return=="function"){const{value:h}=await n.return();await h}}async function c(){for(;;){try{const{value:l,done:u}=s?await n.next():n.next();if(u)i.push(null);else{const d=l&&typeof l.then=="function"?await l:l;if(d===null)throw o=!1,new iG;if(i.push(d))continue;o=!1}}catch(l){i.destroy(l)}break}}return i}var CF=sG,S_,dP;function n1(){if(dP)return S_;dP=1;const e=Nf,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:s,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:a,Promise:c,SafeSet:l,SymbolAsyncIterator:u,Symbol:d}=gn;S_=q,q.ReadableState=ee;const{EventEmitter:h}=qb,{Stream:f,prependListener:p}=nx,{Buffer:y}=no,{addAbortSignal:_}=r1,b=Kl;let v=ic.debuglog("stream",V=>{v=V});const g=FJ,m=mh,{getHighWaterMark:w,getDefaultHighWaterMark:x}=ix,{aggregateTwoErrors:S,codes:{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_OUT_OF_RANGE:$,ERR_STREAM_PUSH_AFTER_EOF:I,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:T}}=Wi,{validateObject:R}=Gb,L=d("kPaused"),{StringDecoder:j}=DF,U=CF;a(q.prototype,f.prototype),a(q,f);const te=()=>{},{errorOrDestroy:z}=m;function ee(V,W,pe){typeof pe!="boolean"&&(pe=W instanceof Ju()),this.objectMode=!!(V&&V.objectMode),pe&&(this.objectMode=this.objectMode||!!(V&&V.readableObjectMode)),this.highWaterMark=V?w(this,V,"readableHighWaterMark",pe):x(!1),this.buffer=new g,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[L]=null,this.errorEmitted=!1,this.emitClose=!V||V.emitClose!==!1,this.autoDestroy=!V||V.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=V&&V.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,V&&V.encoding&&(this.decoder=new j(V.encoding),this.encoding=V.encoding)}function q(V){if(!(this instanceof q))return new q(V);const W=this instanceof Ju();this._readableState=new ee(V,this,W),V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.construct=="function"&&(this._construct=V.construct),V.signal&&!W&&_(V.signal,this)),f.call(this,V),m.construct(this,()=>{this._readableState.needReadable&&fe(this,this._readableState)})}q.prototype.destroy=m.destroy,q.prototype._undestroy=m.undestroy,q.prototype._destroy=function(V,W){W(V)},q.prototype[h.captureRejectionSymbol]=function(V){this.destroy(V)},q.prototype.push=function(V,W){return O(this,V,W,!1)},q.prototype.unshift=function(V,W){return O(this,V,W,!0)};function O(V,W,pe,ve){v("readableAddChunk",W);const xe=V._readableState;let ht;if(xe.objectMode||(typeof W=="string"?(pe=pe||xe.defaultEncoding,xe.encoding!==pe&&(ve&&xe.encoding?W=y.from(W,pe).toString(xe.encoding):(W=y.from(W,pe),pe=""))):W instanceof y?pe="":f._isUint8Array(W)?(W=f._uint8ArrayToBuffer(W),pe=""):W!=null&&(ht=new E("chunk",["string","Buffer","Uint8Array"],W))),ht)z(V,ht);else if(W===null)xe.reading=!1,Z(V,xe);else if(xe.objectMode||W&&W.length>0)if(ve)if(xe.endEmitted)z(V,new T);else{if(xe.destroyed||xe.errored)return!1;Y(V,xe,W,!0)}else if(xe.ended)z(V,new I);else{if(xe.destroyed||xe.errored)return!1;xe.reading=!1,xe.decoder&&!pe?(W=xe.decoder.write(W),xe.objectMode||W.length!==0?Y(V,xe,W,!1):fe(V,xe)):Y(V,xe,W,!1)}else ve||(xe.reading=!1,fe(V,xe));return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function Y(V,W,pe,ve){W.flowing&&W.length===0&&!W.sync&&V.listenerCount("data")>0?(W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null,W.dataEmitted=!0,V.emit("data",pe)):(W.length+=W.objectMode?1:pe.length,ve?W.buffer.unshift(pe):W.buffer.push(pe),W.needReadable&&Q(V)),fe(V,W)}q.prototype.isPaused=function(){const V=this._readableState;return V[L]===!0||V.flowing===!1},q.prototype.setEncoding=function(V){const W=new j(V);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;const pe=this._readableState.buffer;let ve="";for(const xe of pe)ve+=W.write(xe);return pe.clear(),ve!==""&&pe.push(ve),this._readableState.length=ve.length,this};const H=1073741824;function C(V){if(V>H)throw new $("size","<= 1GiB",V);return V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++,V}function B(V,W){return V<=0||W.length===0&&W.ended?0:W.objectMode?1:n(V)?W.flowing&&W.length?W.buffer.first().length:W.length:V<=W.length?V:W.ended?W.length:0}q.prototype.read=function(V){v("read",V),V===void 0?V=NaN:r(V)||(V=s(V,10));const W=this._readableState,pe=V;if(V>W.highWaterMark&&(W.highWaterMark=C(V)),V!==0&&(W.emittedReadable=!1),V===0&&W.needReadable&&((W.highWaterMark!==0?W.length>=W.highWaterMark:W.length>0)||W.ended))return v("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?se(this):Q(this),null;if(V=B(V,W),V===0&&W.ended)return W.length===0&&se(this),null;let ve=W.needReadable;if(v("need readable",ve),(W.length===0||W.length-V<W.highWaterMark)&&(ve=!0,v("length less than watermark",ve)),W.ended||W.reading||W.destroyed||W.errored||!W.constructed)ve=!1,v("reading, ended or constructing",ve);else if(ve){v("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0);try{this._read(W.highWaterMark)}catch(ht){z(this,ht)}W.sync=!1,W.reading||(V=B(pe,W))}let xe;return V>0?xe=X(V,W):xe=null,xe===null?(W.needReadable=W.length<=W.highWaterMark,V=0):(W.length-=V,W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null),W.length===0&&(W.ended||(W.needReadable=!0),pe!==V&&W.ended&&se(this)),xe!==null&&!W.errorEmitted&&!W.closeEmitted&&(W.dataEmitted=!0,this.emit("data",xe)),xe};function Z(V,W){if(v("onEofChunk"),!W.ended){if(W.decoder){const pe=W.decoder.end();pe&&pe.length&&(W.buffer.push(pe),W.length+=W.objectMode?1:pe.length)}W.ended=!0,W.sync?Q(V):(W.needReadable=!1,W.emittedReadable=!0,oe(V))}}function Q(V){const W=V._readableState;v("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(v("emitReadable",W.flowing),W.emittedReadable=!0,e.nextTick(oe,V))}function oe(V){const W=V._readableState;v("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&!W.errored&&(W.length||W.ended)&&(V.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,N(V)}function fe(V,W){!W.readingMore&&W.constructed&&(W.readingMore=!0,e.nextTick(he,V,W))}function he(V,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&W.length===0);){const pe=W.length;if(v("maybeReadMore read 0"),V.read(0),pe===W.length)break}W.readingMore=!1}q.prototype._read=function(V){throw new A("_read()")},q.prototype.pipe=function(V,W){const pe=this,ve=this._readableState;ve.pipes.length===1&&(ve.multiAwaitDrain||(ve.multiAwaitDrain=!0,ve.awaitDrainWriters=new l(ve.awaitDrainWriters?[ve.awaitDrainWriters]:[]))),ve.pipes.push(V),v("pipe count=%d opts=%j",ve.pipes.length,W);const ht=(!W||W.end!==!1)&&V!==e.stdout&&V!==e.stderr?Rr:jo;ve.endEmitted?e.nextTick(ht):pe.once("end",ht),V.on("unpipe",wt);function wt(oo,Ji){v("onunpipe"),oo===pe&&Ji&&Ji.hasUnpiped===!1&&(Ji.hasUnpiped=!0,Ga())}function Rr(){v("onend"),V.end()}let jt,rr=!1;function Ga(){v("cleanup"),V.removeListener("close",so),V.removeListener("finish",Mo),jt&&V.removeListener("drain",jt),V.removeListener("error",Mr),V.removeListener("unpipe",wt),pe.removeListener("end",Rr),pe.removeListener("end",jo),pe.removeListener("data",vt),rr=!0,jt&&ve.awaitDrainWriters&&(!V._writableState||V._writableState.needDrain)&&jt()}function Lr(){rr||(ve.pipes.length===1&&ve.pipes[0]===V?(v("false write response, pause",0),ve.awaitDrainWriters=V,ve.multiAwaitDrain=!1):ve.pipes.length>1&&ve.pipes.includes(V)&&(v("false write response, pause",ve.awaitDrainWriters.size),ve.awaitDrainWriters.add(V)),pe.pause()),jt||(jt=_e(pe,V),V.on("drain",jt))}pe.on("data",vt);function vt(oo){v("ondata");const Ji=V.write(oo);v("dest.write",Ji),Ji===!1&&Lr()}function Mr(oo){if(v("onerror",oo),jo(),V.removeListener("error",Mr),V.listenerCount("error")===0){const Ji=V._writableState||V._readableState;Ji&&!Ji.errorEmitted?z(V,oo):V.emit("error",oo)}}p(V,"error",Mr);function so(){V.removeListener("finish",Mo),jo()}V.once("close",so);function Mo(){v("onfinish"),V.removeListener("close",so),jo()}V.once("finish",Mo);function jo(){v("unpipe"),pe.unpipe(V)}return V.emit("pipe",pe),V.writableNeedDrain===!0?ve.flowing&&Lr():ve.flowing||(v("pipe resume"),pe.resume()),V};function _e(V,W){return function(){const ve=V._readableState;ve.awaitDrainWriters===W?(v("pipeOnDrain",1),ve.awaitDrainWriters=null):ve.multiAwaitDrain&&(v("pipeOnDrain",ve.awaitDrainWriters.size),ve.awaitDrainWriters.delete(W)),(!ve.awaitDrainWriters||ve.awaitDrainWriters.size===0)&&V.listenerCount("data")&&V.resume()}}q.prototype.unpipe=function(V){const W=this._readableState,pe={hasUnpiped:!1};if(W.pipes.length===0)return this;if(!V){const xe=W.pipes;W.pipes=[],this.pause();for(let ht=0;ht<xe.length;ht++)xe[ht].emit("unpipe",this,{hasUnpiped:!1});return this}const ve=t(W.pipes,V);return ve===-1?this:(W.pipes.splice(ve,1),W.pipes.length===0&&this.pause(),V.emit("unpipe",this,pe),this)},q.prototype.on=function(V,W){const pe=f.prototype.on.call(this,V,W),ve=this._readableState;return V==="data"?(ve.readableListening=this.listenerCount("readable")>0,ve.flowing!==!1&&this.resume()):V==="readable"&&!ve.endEmitted&&!ve.readableListening&&(ve.readableListening=ve.needReadable=!0,ve.flowing=!1,ve.emittedReadable=!1,v("on readable",ve.length,ve.reading),ve.length?Q(this):ve.reading||e.nextTick(F,this)),pe},q.prototype.addListener=q.prototype.on,q.prototype.removeListener=function(V,W){const pe=f.prototype.removeListener.call(this,V,W);return V==="readable"&&e.nextTick(Ie,this),pe},q.prototype.off=q.prototype.removeListener,q.prototype.removeAllListeners=function(V){const W=f.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&e.nextTick(Ie,this),W};function Ie(V){const W=V._readableState;W.readableListening=V.listenerCount("readable")>0,W.resumeScheduled&&W[L]===!1?W.flowing=!0:V.listenerCount("data")>0?V.resume():W.readableListening||(W.flowing=null)}function F(V){v("readable nexttick read 0"),V.read(0)}q.prototype.resume=function(){const V=this._readableState;return V.flowing||(v("resume"),V.flowing=!V.readableListening,M(this,V)),V[L]=!1,this};function M(V,W){W.resumeScheduled||(W.resumeScheduled=!0,e.nextTick(re,V,W))}function re(V,W){v("resume",W.reading),W.reading||V.read(0),W.resumeScheduled=!1,V.emit("resume"),N(V),W.flowing&&!W.reading&&V.read(0)}q.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this};function N(V){const W=V._readableState;for(v("flow",W.flowing);W.flowing&&V.read()!==null;);}q.prototype.wrap=function(V){let W=!1;V.on("data",ve=>{!this.push(ve)&&V.pause&&(W=!0,V.pause())}),V.on("end",()=>{this.push(null)}),V.on("error",ve=>{z(this,ve)}),V.on("close",()=>{this.destroy()}),V.on("destroy",()=>{this.destroy()}),this._read=()=>{W&&V.resume&&(W=!1,V.resume())};const pe=o(V);for(let ve=1;ve<pe.length;ve++){const xe=pe[ve];this[xe]===void 0&&typeof V[xe]=="function"&&(this[xe]=V[xe].bind(V))}return this},q.prototype[u]=function(){return D(this)},q.prototype.iterator=function(V){return V!==void 0&&R(V,"options"),D(this,V)};function D(V,W){typeof V.read!="function"&&(V=q.wrap(V,{objectMode:!0}));const pe=k(V,W);return pe.stream=V,pe}async function*k(V,W){let pe=te;function ve(wt){this===V?(pe(),pe=te):pe=wt}V.on("readable",ve);let xe;const ht=b(V,{writable:!1},wt=>{xe=wt?S(xe,wt):null,pe(),pe=te});try{for(;;){const wt=V.destroyed?null:V.read();if(wt!==null)yield wt;else{if(xe)throw xe;if(xe===null)return;await new c(ve)}}}catch(wt){throw xe=S(xe,wt),xe}finally{(xe||(W==null?void 0:W.destroyOnReturn)!==!1)&&(xe===void 0||V._readableState.autoDestroy)?m.destroyer(V,null):(V.off("readable",ve),ht())}}i(q.prototype,{readable:{__proto__:null,get(){const V=this._readableState;return!!V&&V.readable!==!1&&!V.destroyed&&!V.errorEmitted&&!V.endEmitted},set(V){this._readableState&&(this._readableState.readable=!!V)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(V){this._readableState&&(this._readableState.destroyed=V)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[L]!==!1},set(V){this[L]=!!V}}}),q._fromList=X;function X(V,W){if(W.length===0)return null;let pe;return W.objectMode?pe=W.buffer.shift():!V||V>=W.length?(W.decoder?pe=W.buffer.join(""):W.buffer.length===1?pe=W.buffer.first():pe=W.buffer.concat(W.length),W.buffer.clear()):pe=W.buffer.consume(V,W.decoder),pe}function se(V){const W=V._readableState;v("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,e.nextTick(le,W,V))}function le(V,W){if(v("endReadableNT",V.endEmitted,V.length),!V.errored&&!V.closeEmitted&&!V.endEmitted&&V.length===0){if(V.endEmitted=!0,W.emit("end"),W.writable&&W.allowHalfOpen===!1)e.nextTick(ue,W);else if(V.autoDestroy){const pe=W._writableState;(!pe||pe.autoDestroy&&(pe.finished||pe.writable===!1))&&W.destroy()}}}function ue(V){V.writable&&!V.writableEnded&&!V.destroyed&&V.end()}q.from=function(V,W){return U(q,V,W)};let Ae;function ye(){return Ae===void 0&&(Ae={}),Ae}return q.fromWeb=function(V,W){return ye().newStreamReadableFromReadableStream(V,W)},q.toWeb=function(V,W){return ye().newReadableStreamFromStreamReadable(V,W)},q.wrap=function(V,W){var pe,ve;return new q({objectMode:(pe=(ve=V.readableObjectMode)!==null&&ve!==void 0?ve:V.objectMode)!==null&&pe!==void 0?pe:!0,...W,destroy(xe,ht){m.destroyer(V,xe),ht(xe)}}).wrap(V)},S_}var x_,fP;function PF(){if(fP)return x_;fP=1;const e=Nf,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:s,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:l}=gn;x_=j,j.WritableState=R;const{EventEmitter:u}=qb,d=nx.Stream,{Buffer:h}=no,f=mh,{addAbortSignal:p}=r1,{getHighWaterMark:y,getDefaultHighWaterMark:_}=ix,{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:g,ERR_STREAM_CANNOT_PIPE:m,ERR_STREAM_DESTROYED:w,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:S,ERR_STREAM_WRITE_AFTER_END:E,ERR_UNKNOWN_ENCODING:A}=Wi.codes,{errorOrDestroy:$}=f;o(j.prototype,d.prototype),o(j,d);function I(){}const T=c("kOnFinished");function R(F,M,re){typeof re!="boolean"&&(re=M instanceof Ju()),this.objectMode=!!(F&&F.objectMode),re&&(this.objectMode=this.objectMode||!!(F&&F.writableObjectMode)),this.highWaterMark=F?y(this,F,"writableHighWaterMark",re):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const N=!!(F&&F.decodeStrings===!1);this.decodeStrings=!N,this.defaultEncoding=F&&F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=q.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!F||F.emitClose!==!1,this.autoDestroy=!F||F.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[T]=[]}function L(F){F.buffered=[],F.bufferedIndex=0,F.allBuffers=!0,F.allNoop=!0}R.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},s(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function j(F){const M=this instanceof Ju();if(!M&&!n(j,this))return new j(F);this._writableState=new R(F,this,M),F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final),typeof F.construct=="function"&&(this._construct=F.construct),F.signal&&p(F.signal,this)),d.call(this,F),f.construct(this,()=>{const re=this._writableState;re.writing||C(this,re),oe(this,re)})}s(j,l,{__proto__:null,value:function(F){return n(this,F)?!0:this!==j?!1:F&&F._writableState instanceof R}}),j.prototype.pipe=function(){$(this,new m)};function U(F,M,re,N){const D=F._writableState;if(typeof re=="function")N=re,re=D.defaultEncoding;else{if(!re)re=D.defaultEncoding;else if(re!=="buffer"&&!h.isEncoding(re))throw new A(re);typeof N!="function"&&(N=I)}if(M===null)throw new S;if(!D.objectMode)if(typeof M=="string")D.decodeStrings!==!1&&(M=h.from(M,re),re="buffer");else if(M instanceof h)re="buffer";else if(d._isUint8Array(M))M=d._uint8ArrayToBuffer(M),re="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],M);let k;return D.ending?k=new E:D.destroyed&&(k=new w("write")),k?(e.nextTick(N,k),$(F,k,!0),k):(D.pendingcb++,te(F,D,M,re,N))}j.prototype.write=function(F,M,re){return U(this,F,M,re)===!0},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const F=this._writableState;F.corked&&(F.corked--,F.writing||C(this,F))},j.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=a(M)),!h.isEncoding(M))throw new A(M);return this._writableState.defaultEncoding=M,this};function te(F,M,re,N,D){const k=M.objectMode?1:re.length;M.length+=k;const X=M.length<M.highWaterMark;return X||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:re,encoding:N,callback:D}),M.allBuffers&&N!=="buffer"&&(M.allBuffers=!1),M.allNoop&&D!==I&&(M.allNoop=!1)):(M.writelen=k,M.writecb=D,M.writing=!0,M.sync=!0,F._write(re,N,M.onwrite),M.sync=!1),X&&!M.errored&&!M.destroyed}function z(F,M,re,N,D,k,X){M.writelen=N,M.writecb=X,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new w("write")):re?F._writev(D,M.onwrite):F._write(D,k,M.onwrite),M.sync=!1}function ee(F,M,re,N){--M.pendingcb,N(re),H(M),$(F,re)}function q(F,M){const re=F._writableState,N=re.sync,D=re.writecb;if(typeof D!="function"){$(F,new g);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,M?(M.stack,re.errored||(re.errored=M),F._readableState&&!F._readableState.errored&&(F._readableState.errored=M),N?e.nextTick(ee,F,re,M,D):ee(F,re,M,D)):(re.buffered.length>re.bufferedIndex&&C(F,re),N?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===D?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:D,stream:F,state:re},e.nextTick(O,re.afterWriteTickInfo)):Y(F,re,1,D))}function O({stream:F,state:M,count:re,cb:N}){return M.afterWriteTickInfo=null,Y(F,M,re,N)}function Y(F,M,re,N){for(!M.ending&&!F.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,F.emit("drain"));re-- >0;)M.pendingcb--,N();M.destroyed&&H(M),oe(F,M)}function H(F){if(F.writing)return;for(let D=F.bufferedIndex;D<F.buffered.length;++D){var M;const{chunk:k,callback:X}=F.buffered[D],se=F.objectMode?1:k.length;F.length-=se,X((M=F.errored)!==null&&M!==void 0?M:new w("write"))}const re=F[T].splice(0);for(let D=0;D<re.length;D++){var N;re[D]((N=F.errored)!==null&&N!==void 0?N:new w("end"))}L(F)}function C(F,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;const{buffered:re,bufferedIndex:N,objectMode:D}=M,k=re.length-N;if(!k)return;let X=N;if(M.bufferProcessing=!0,k>1&&F._writev){M.pendingcb-=k-1;const se=M.allNoop?I:ue=>{for(let Ae=X;Ae<re.length;++Ae)re[Ae].callback(ue)},le=M.allNoop&&X===0?re:t(re,X);le.allBuffers=M.allBuffers,z(F,M,!0,M.length,le,"",se),L(M)}else{do{const{chunk:se,encoding:le,callback:ue}=re[X];re[X++]=null;const Ae=D?1:se.length;z(F,M,!1,Ae,se,le,ue)}while(X<re.length&&!M.writing);X===re.length?L(M):X>256?(re.splice(0,X),M.bufferedIndex=0):M.bufferedIndex=X}M.bufferProcessing=!1}j.prototype._write=function(F,M,re){if(this._writev)this._writev([{chunk:F,encoding:M}],re);else throw new v("_write()")},j.prototype._writev=null,j.prototype.end=function(F,M,re){const N=this._writableState;typeof F=="function"?(re=F,F=null,M=null):typeof M=="function"&&(re=M,M=null);let D;if(F!=null){const k=U(this,F,M);k instanceof r&&(D=k)}return N.corked&&(N.corked=1,this.uncork()),D||(!N.errored&&!N.ending?(N.ending=!0,oe(this,N,!0),N.ended=!0):N.finished?D=new x("end"):N.destroyed&&(D=new w("end"))),typeof re=="function"&&(D||N.finished?e.nextTick(re,D):N[T].push(re)),this};function B(F){return F.ending&&!F.destroyed&&F.constructed&&F.length===0&&!F.errored&&F.buffered.length===0&&!F.finished&&!F.writing&&!F.errorEmitted&&!F.closeEmitted}function Z(F,M){let re=!1;function N(D){if(re){$(F,D??g());return}if(re=!0,M.pendingcb--,D){const k=M[T].splice(0);for(let X=0;X<k.length;X++)k[X](D);$(F,D,M.sync)}else B(M)&&(M.prefinished=!0,F.emit("prefinish"),M.pendingcb++,e.nextTick(fe,F,M))}M.sync=!0,M.pendingcb++;try{F._final(N)}catch(D){N(D)}M.sync=!1}function Q(F,M){!M.prefinished&&!M.finalCalled&&(typeof F._final=="function"&&!M.destroyed?(M.finalCalled=!0,Z(F,M)):(M.prefinished=!0,F.emit("prefinish")))}function oe(F,M,re){B(M)&&(Q(F,M),M.pendingcb===0&&(re?(M.pendingcb++,e.nextTick((N,D)=>{B(D)?fe(N,D):D.pendingcb--},F,M)):B(M)&&(M.pendingcb++,fe(F,M))))}function fe(F,M){M.pendingcb--,M.finished=!0;const re=M[T].splice(0);for(let N=0;N<re.length;N++)re[N]();if(F.emit("finish"),M.autoDestroy){const N=F._readableState;(!N||N.autoDestroy&&(N.endEmitted||N.readable===!1))&&F.destroy()}}i(j.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(F){this._writableState&&(this._writableState.destroyed=F)}},writable:{__proto__:null,get(){const F=this._writableState;return!!F&&F.writable!==!1&&!F.destroyed&&!F.errored&&!F.ending&&!F.ended},set(F){this._writableState&&(this._writableState.writable=!!F)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const F=this._writableState;return F?!F.destroyed&&!F.ending&&F.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const he=f.destroy;j.prototype.destroy=function(F,M){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[T].length)&&e.nextTick(H,re),he.call(this,F,M),this},j.prototype._undestroy=f.undestroy,j.prototype._destroy=function(F,M){M(F)},j.prototype[u.captureRejectionSymbol]=function(F){this.destroy(F)};let _e;function Ie(){return _e===void 0&&(_e={}),_e}return j.fromWeb=function(F,M){return Ie().newStreamWritableFromWritableStream(F,M)},j.toWeb=function(F){return Ie().newWritableStreamFromStreamWritable(F)},x_}var $_,pP;function oG(){if(pP)return $_;pP=1;const e=Nf,t=no,{isReadable:r,isWritable:n,isIterable:s,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:a,isDuplexNodeStream:c}=oc,l=Kl,{AbortError:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h}}=Wi,{destroyer:f}=mh,p=Ju(),y=n1(),{createDeferredPromise:_}=ic,b=CF,v=globalThis.Blob||t.Blob,g=typeof v<"u"?function($){return $ instanceof v}:function($){return!1},m=globalThis.AbortController||ZS().AbortController,{FunctionPrototypeCall:w}=gn;class x extends p{constructor($){super($),($==null?void 0:$.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),($==null?void 0:$.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}$_=function A($,I){if(c($))return $;if(o($))return E({readable:$});if(a($))return E({writable:$});if(i($))return E({writable:!1,readable:!1});if(typeof $=="function"){const{value:R,write:L,final:j,destroy:U}=S($);if(s(R))return b(x,R,{objectMode:!0,write:L,final:j,destroy:U});const te=R==null?void 0:R.then;if(typeof te=="function"){let z;const ee=w(te,R,q=>{if(q!=null)throw new h("nully","body",q)},q=>{f(z,q)});return z=new x({objectMode:!0,readable:!1,write:L,final(q){j(async()=>{try{await ee,e.nextTick(q,null)}catch(O){e.nextTick(q,O)}})},destroy:U})}throw new h("Iterable, AsyncIterable or AsyncFunction",I,R)}if(g($))return A($.arrayBuffer());if(s($))return b(x,$,{objectMode:!0,writable:!1});if(typeof($==null?void 0:$.writable)=="object"||typeof($==null?void 0:$.readable)=="object"){const R=$!=null&&$.readable?o($==null?void 0:$.readable)?$==null?void 0:$.readable:A($.readable):void 0,L=$!=null&&$.writable?a($==null?void 0:$.writable)?$==null?void 0:$.writable:A($.writable):void 0;return E({readable:R,writable:L})}const T=$==null?void 0:$.then;if(typeof T=="function"){let R;return w(T,$,L=>{L!=null&&R.push(L),R.push(null)},L=>{f(R,L)}),R=new x({objectMode:!0,writable:!1,read(){}})}throw new d(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],$)};function S(A){let{promise:$,resolve:I}=_();const T=new m,R=T.signal;return{value:A(async function*(){for(;;){const j=$;$=null;const{chunk:U,done:te,cb:z}=await j;if(e.nextTick(z),te)return;if(R.aborted)throw new u(void 0,{cause:R.reason});({promise:$,resolve:I}=_()),yield U}}(),{signal:R}),write(j,U,te){const z=I;I=null,z({chunk:j,done:!1,cb:te})},final(j){const U=I;I=null,U({done:!0,cb:j})},destroy(j,U){T.abort(),U(j)}}}function E(A){const $=A.readable&&typeof A.readable.read!="function"?y.wrap(A.readable):A.readable,I=A.writable;let T=!!r($),R=!!n(I),L,j,U,te,z;function ee(q){const O=te;te=null,O?O(q):q&&z.destroy(q)}return z=new x({readableObjectMode:!!($!=null&&$.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:T,writable:R}),R&&(l(I,q=>{R=!1,q&&f($,q),ee(q)}),z._write=function(q,O,Y){I.write(q,O)?Y():L=Y},z._final=function(q){I.end(),j=q},I.on("drain",function(){if(L){const q=L;L=null,q()}}),I.on("finish",function(){if(j){const q=j;j=null,q()}})),T&&(l($,q=>{T=!1,q&&f($,q),ee(q)}),$.on("readable",function(){if(U){const q=U;U=null,q()}}),$.on("end",function(){z.push(null)}),z._read=function(){for(;;){const q=$.read();if(q===null){U=z._read;return}if(!z.push(q))return}}),z._destroy=function(q,O){!q&&te!==null&&(q=new u),U=null,L=null,j=null,te===null?O(q):(te=O,f(I,q),f($,q))},z}return $_}var D_,hP;function Ju(){if(hP)return D_;hP=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=gn;D_=o;const s=n1(),i=PF();n(o.prototype,s.prototype),n(o,s);{const u=r(i.prototype);for(let d=0;d<u.length;d++){const h=u[d];o.prototype[h]||(o.prototype[h]=i.prototype[h])}}function o(u){if(!(this instanceof o))return new o(u);s.call(this,u),i.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let a;function c(){return a===void 0&&(a={}),a}o.fromWeb=function(u,d){return c().newStreamDuplexFromReadableWritablePair(u,d)},o.toWeb=function(u){return c().newReadableWritablePairFromDuplex(u)};let l;return o.from=function(u){return l||(l=oG()),l(u,"body")},D_}const{ObjectSetPrototypeOf:kF,Symbol:aG}=gn;var OF=Gu;const{ERR_METHOD_NOT_IMPLEMENTED:uG}=Wi.codes,ox=Ju(),{getHighWaterMark:cG}=ix;kF(Gu.prototype,ox.prototype);kF(Gu,ox);const am=aG("kCallback");function Gu(e){if(!(this instanceof Gu))return new Gu(e);const t=e?cG(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),ox.call(this,e),this._readableState.sync=!1,this[am]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",lG)}function UA(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function lG(){this._final!==UA&&UA.call(this)}Gu.prototype._final=UA;Gu.prototype._transform=function(e,t,r){throw new uG("_transform()")};Gu.prototype._write=function(e,t,r){const n=this._readableState,s=this._writableState,i=n.length;this._transform(e,t,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[am]=r})};Gu.prototype._read=function(){if(this[am]){const e=this[am];this[am]=null,e()}};const{ObjectSetPrototypeOf:TF}=gn;var IF=Wp;const ax=OF;TF(Wp.prototype,ax.prototype);TF(Wp,ax);function Wp(e){if(!(this instanceof Wp))return new Wp(e);ax.call(this,e)}Wp.prototype._transform=function(e,t,r){r(null,e)};const Iy=Nf,{ArrayIsArray:dG,Promise:fG,SymbolAsyncIterator:pG}=gn,Nw=Kl,{once:hG}=ic,yG=mh,yP=Ju(),{aggregateTwoErrors:mG,codes:{ERR_INVALID_ARG_TYPE:KA,ERR_INVALID_RETURN_VALUE:C_,ERR_MISSING_ARGS:gG,ERR_STREAM_DESTROYED:vG,ERR_STREAM_PREMATURE_CLOSE:wG},AbortError:bG}=Wi,{validateFunction:_G,validateAbortSignal:EG}=Gb,{isIterable:$d,isReadable:P_,isReadableNodeStream:kv,isNodeStream:mP,isTransformStream:up,isWebStream:AG,isReadableStream:k_,isReadableEnded:SG}=oc,xG=globalThis.AbortController||ZS().AbortController;let O_,T_;function gP(e,t,r){let n=!1;e.on("close",()=>{n=!0});const s=Nw(e,{readable:t,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,yG.destroyer(e,i||new vG("pipe")))},cleanup:s}}function $G(e){return _G(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function I_(e){if($d(e))return e;if(kv(e))return DG(e);throw new KA("val",["Readable","Iterable","AsyncIterable"],e)}async function*DG(e){T_||(T_=n1()),yield*T_.prototype[pG].call(e)}async function Eg(e,t,r,{end:n}){let s,i=null;const o=l=>{if(l&&(s=l),i){const u=i;i=null,u()}},a=()=>new fG((l,u)=>{s?u(s):i=()=>{s?u(s):l()}});t.on("drain",o);const c=Nw(t,{readable:!1},o);try{t.writableNeedDrain&&await a();for await(const l of e)t.write(l)||await a();n&&t.end(),await a(),r()}catch(l){r(s!==l?mG(s,l):l)}finally{c(),t.off("drain",o)}}async function B_(e,t,r,{end:n}){up(t)&&(t=t.writable);const s=t.getWriter();try{for await(const i of e)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function CG(...e){return BF(e,hG($G(e)))}function BF(e,t,r){if(e.length===1&&dG(e[0])&&(e=e[0]),e.length<2)throw new gG("streams");const n=new xG,s=n.signal,i=r==null?void 0:r.signal,o=[];EG(i,"options.signal");function a(){f(new bG)}i==null||i.addEventListener("abort",a);let c,l;const u=[];let d=0;function h(b){f(b,--d===0)}function f(b,v){if(b&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=b),!(!c&&!v)){for(;u.length;)u.shift()(c);i==null||i.removeEventListener("abort",a),n.abort(),v&&(c||o.forEach(g=>g()),Iy.nextTick(t,c,l))}}let p;for(let b=0;b<e.length;b++){const v=e[b],g=b<e.length-1,m=b>0,w=g||(r==null?void 0:r.end)!==!1,x=b===e.length-1;if(mP(v)){let S=function(E){E&&E.name!=="AbortError"&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(E)};if(w){const{destroy:E,cleanup:A}=gP(v,g,m);u.push(E),P_(v)&&x&&o.push(A)}v.on("error",S),P_(v)&&x&&o.push(()=>{v.removeListener("error",S)})}if(b===0)if(typeof v=="function"){if(p=v({signal:s}),!$d(p))throw new C_("Iterable, AsyncIterable or Stream","source",p)}else $d(v)||kv(v)||up(v)?p=v:p=yP.from(v);else if(typeof v=="function"){if(up(p)){var y;p=I_((y=p)===null||y===void 0?void 0:y.readable)}else p=I_(p);if(p=v(p,{signal:s}),g){if(!$d(p,!0))throw new C_("AsyncIterable",`transform[${b-1}]`,p)}else{var _;O_||(O_=IF);const S=new O_({objectMode:!0}),E=(_=p)===null||_===void 0?void 0:_.then;if(typeof E=="function")d++,E.call(p,I=>{l=I,I!=null&&S.write(I),w&&S.end(),Iy.nextTick(h)},I=>{S.destroy(I),Iy.nextTick(h,I)});else if($d(p,!0))d++,Eg(p,S,h,{end:w});else if(k_(p)||up(p)){const I=p.readable||p;d++,Eg(I,S,h,{end:w})}else throw new C_("AsyncIterable or Promise","destination",p);p=S;const{destroy:A,cleanup:$}=gP(p,!1,!0);u.push(A),x&&o.push($)}}else if(mP(v)){if(kv(p)){d+=2;const S=PG(p,v,h,{end:w});P_(v)&&x&&o.push(S)}else if(up(p)||k_(p)){const S=p.readable||p;d++,Eg(S,v,h,{end:w})}else if($d(p))d++,Eg(p,v,h,{end:w});else throw new KA("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else if(AG(v)){if(kv(p))d++,B_(I_(p),v,h,{end:w});else if(k_(p)||$d(p))d++,B_(p,v,h,{end:w});else if(up(p))d++,B_(p.readable,v,h,{end:w});else throw new KA("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else p=yP.from(v)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&Iy.nextTick(a),p}function PG(e,t,r,{end:n}){let s=!1;if(t.on("close",()=>{s||r(new wG)}),e.pipe(t,{end:!1}),n){let i=function(){s=!0,t.end()};SG(e)?Iy.nextTick(i):e.once("end",i)}else r();return Nw(e,{readable:!0,writable:!1},i=>{const o=e._readableState;i&&i.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?e.once("end",r).once("error",r):r(i)}),Nw(t,{readable:!1,writable:!0},r)}var ux={pipelineImpl:BF,pipeline:CG};const{pipeline:kG}=ux,Ag=Ju(),{destroyer:OG}=mh,{isNodeStream:Sg,isReadable:vP,isWritable:wP,isWebStream:F_,isTransformStream:cd,isWritableStream:bP,isReadableStream:_P}=oc,{AbortError:TG,codes:{ERR_INVALID_ARG_VALUE:EP,ERR_MISSING_ARGS:IG}}=Wi,BG=Kl;var FF=function(...t){if(t.length===0)throw new IG("streams");if(t.length===1)return Ag.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=Ag.from(t[0])),typeof t[t.length-1]=="function"){const f=t.length-1;t[f]=Ag.from(t[f])}for(let f=0;f<t.length;++f)if(!(!Sg(t[f])&&!F_(t[f]))){if(f<t.length-1&&!(vP(t[f])||_P(t[f])||cd(t[f])))throw new EP(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(wP(t[f])||bP(t[f])||cd(t[f])))throw new EP(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function c(f){const p=o;o=null,p?p(f):f?a.destroy(f):!h&&!d&&a.destroy()}const l=t[0],u=kG(t,c),d=!!(wP(l)||bP(l)||cd(l)),h=!!(vP(u)||_P(u)||cd(u));if(a=new Ag({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.writableObjectMode),writable:d,readable:h}),d){if(Sg(l))a._write=function(p,y,_){l.write(p,y)?_():n=_},a._final=function(p){l.end(),s=p},l.on("drain",function(){if(n){const p=n;n=null,p()}});else if(F_(l)){const y=(cd(l)?l.writable:l).getWriter();a._write=async function(_,b,v){try{await y.ready,y.write(_).catch(()=>{}),v()}catch(g){v(g)}},a._final=async function(_){try{await y.ready,y.close().catch(()=>{}),s=_}catch(b){_(b)}}}const f=cd(u)?u.readable:u;BG(f,()=>{if(s){const p=s;s=null,p()}})}if(h){if(Sg(u))u.on("readable",function(){if(i){const f=i;i=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){const f=u.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(F_(u)){const p=(cd(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{const{value:y,done:_}=await p.read();if(!a.push(y))return;if(_){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new TG),i=null,n=null,s=null,o===null?p(f):(o=p,Sg(u)&&OG(u,f))},a};const NF=globalThis.AbortController||ZS().AbortController,{codes:{ERR_INVALID_ARG_VALUE:FG,ERR_INVALID_ARG_TYPE:E0,ERR_MISSING_ARGS:NG,ERR_OUT_OF_RANGE:RG},AbortError:Fa}=Wi,{validateAbortSignal:Rf,validateInteger:MG,validateObject:Mf}=Gb,jG=gn.Symbol("kWeak"),{finished:UG}=Kl,KG=FF,{addAbortSignalNoValidate:LG}=r1,{isWritable:qG,isNodeStream:VG}=oc,{ArrayPrototypePush:HG,MathFloor:zG,Number:WG,NumberIsNaN:JG,Promise:AP,PromiseReject:SP,PromisePrototypeThen:GG,Symbol:RF}=gn,Rw=RF("kEmpty"),xP=RF("kEof");function XG(e,t){if(t!=null&&Mf(t,"options"),(t==null?void 0:t.signal)!=null&&Rf(t.signal,"options.signal"),VG(e)&&!qG(e))throw new FG("stream",e,"must be writable");const r=KG(this,e);return t!=null&&t.signal&&LG(t.signal,r),r}function i1(e,t){if(typeof e!="function")throw new E0("fn",["Function","AsyncFunction"],e);t!=null&&Mf(t,"options"),(t==null?void 0:t.signal)!=null&&Rf(t.signal,"options.signal");let r=1;return(t==null?void 0:t.concurrency)!=null&&(r=zG(t.concurrency)),MG(r,"concurrency",1),(async function*(){var s,i;const o=new NF,a=this,c=[],l=o.signal,u={signal:l},d=()=>o.abort();t!=null&&(s=t.signal)!==null&&s!==void 0&&s.aborted&&d(),t==null||(i=t.signal)===null||i===void 0||i.addEventListener("abort",d);let h,f,p=!1;function y(){p=!0}async function _(){try{for await(let g of a){var b;if(p)return;if(l.aborted)throw new Fa;try{g=e(g,u)}catch(m){g=SP(m)}g!==Rw&&(typeof((b=g)===null||b===void 0?void 0:b.catch)=="function"&&g.catch(y),c.push(g),h&&(h(),h=null),!p&&c.length&&c.length>=r&&await new AP(m=>{f=m}))}c.push(xP)}catch(g){const m=SP(g);GG(m,void 0,y),c.push(m)}finally{var v;p=!0,h&&(h(),h=null),t==null||(v=t.signal)===null||v===void 0||v.removeEventListener("abort",d)}}_();try{for(;;){for(;c.length>0;){const b=await c[0];if(b===xP)return;if(l.aborted)throw new Fa;b!==Rw&&(yield b),c.shift(),f&&(f(),f=null)}await new AP(b=>{h=b})}}finally{o.abort(),p=!0,f&&(f(),f=null)}}).call(this)}function ZG(e=void 0){return e!=null&&Mf(e,"options"),(e==null?void 0:e.signal)!=null&&Rf(e.signal,"options.signal"),(async function*(){let r=0;for await(const s of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Fa({cause:e.signal.reason});yield[r++,s]}}).call(this)}async function MF(e,t=void 0){for await(const r of cx.call(this,e,t))return!0;return!1}async function YG(e,t=void 0){if(typeof e!="function")throw new E0("fn",["Function","AsyncFunction"],e);return!await MF.call(this,async(...r)=>!await e(...r),t)}async function QG(e,t){for await(const r of cx.call(this,e,t))return r}async function eX(e,t){if(typeof e!="function")throw new E0("fn",["Function","AsyncFunction"],e);async function r(n,s){return await e(n,s),Rw}for await(const n of i1.call(this,r,t));}function cx(e,t){if(typeof e!="function")throw new E0("fn",["Function","AsyncFunction"],e);async function r(n,s){return await e(n,s)?n:Rw}return i1.call(this,r,t)}class tX extends NG{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function rX(e,t,r){var n;if(typeof e!="function")throw new E0("reducer",["Function","AsyncFunction"],e);r!=null&&Mf(r,"options"),(r==null?void 0:r.signal)!=null&&Rf(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new Fa(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await UG(this.destroy(l)),l}const i=new NF,o=i.signal;if(r!=null&&r.signal){const l={once:!0,[jG]:this};r.signal.addEventListener("abort",()=>i.abort(),l)}let a=!1;try{for await(const l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Fa;s?t=await e(t,l,{signal:o}):(t=l,s=!0)}if(!a&&!s)throw new tX}finally{i.abort()}return t}async function nX(e){e!=null&&Mf(e,"options"),(e==null?void 0:e.signal)!=null&&Rf(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Fa(void 0,{cause:e.signal.reason});HG(t,n)}return t}function iX(e,t){const r=i1.call(this,e,t);return(async function*(){for await(const s of r)yield*s}).call(this)}function jF(e){if(e=WG(e),JG(e))return 0;if(e<0)throw new RG("number",">= 0",e);return e}function sX(e,t=void 0){return t!=null&&Mf(t,"options"),(t==null?void 0:t.signal)!=null&&Rf(t.signal,"options.signal"),e=jF(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Fa;for await(const i of this){var s;if(t!=null&&(s=t.signal)!==null&&s!==void 0&&s.aborted)throw new Fa;e--<=0&&(yield i)}}).call(this)}function oX(e,t=void 0){return t!=null&&Mf(t,"options"),(t==null?void 0:t.signal)!=null&&Rf(t.signal,"options.signal"),e=jF(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Fa;for await(const i of this){var s;if(t!=null&&(s=t.signal)!==null&&s!==void 0&&s.aborted)throw new Fa;if(e-- >0)yield i;else return}}).call(this)}XS.streamReturningOperators={asIndexedPairs:ZG,drop:sX,filter:cx,flatMap:iX,map:i1,take:oX,compose:XG};XS.promiseReturningOperators={every:YG,forEach:eX,reduce:rX,toArray:nX,some:MF,find:QG};var N_,$P;function UF(){if($P)return N_;$P=1;const{ArrayPrototypePop:e,Promise:t}=gn,{isIterable:r,isNodeStream:n,isWebStream:s}=oc,{pipelineImpl:i}=ux,{finished:o}=Kl;KF();function a(...c){return new t((l,u)=>{let d,h;const f=c[c.length-1];if(f&&typeof f=="object"&&!n(f)&&!r(f)&&!s(f)){const p=e(c);d=p.signal,h=p.end}i(c,(p,y)=>{p?u(p):l(y)},{signal:d,end:h})})}return N_={finished:o,pipeline:a},N_}var DP;function KF(){if(DP)return w_.exports;DP=1;const{Buffer:e}=no,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=gn,{promisify:{custom:s}}=ic,{streamReturningOperators:i,promiseReturningOperators:o}=XS,{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Wi,c=FF,{pipeline:l}=ux,{destroyer:u}=mh,d=Kl,h=UF(),f=oc,p=w_.exports=nx.Stream;p.isDisturbed=f.isDisturbed,p.isErrored=f.isErrored,p.isReadable=f.isReadable,p.Readable=n1();for(const _ of r(i)){let v=function(...g){if(new.target)throw a();return p.Readable.from(n(b,this,g))};const b=i[_];t(v,"name",{__proto__:null,value:b.name}),t(v,"length",{__proto__:null,value:b.length}),t(p.Readable.prototype,_,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const _ of r(o)){let v=function(...g){if(new.target)throw a();return n(b,this,g)};const b=o[_];t(v,"name",{__proto__:null,value:b.name}),t(v,"length",{__proto__:null,value:b.length}),t(p.Readable.prototype,_,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}p.Writable=PF(),p.Duplex=Ju(),p.Transform=OF,p.PassThrough=IF,p.pipeline=l;const{addAbortSignal:y}=r1;return p.addAbortSignal=y,p.finished=d,p.destroy=u,p.compose=c,t(p,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),t(l,s,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),t(d,s,{__proto__:null,enumerable:!0,get(){return h.finished}}),p.Stream=p,p._isUint8Array=function(b){return b instanceof Uint8Array},p._uint8ArrayToBuffer=function(b){return e.from(b.buffer,b.byteOffset,b.byteLength)},w_.exports}(function(e){const t=KF(),r=UF(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Kz);function aX(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uX=aX,cX=uX;const lX=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let dX=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},fX=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return LF(this,t)}},pX=class{constructor(t){this.decoders=t}or(t){return LF(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const LF=(e,t)=>new pX({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let hX=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new dX(t,r,n),this.decoder=new fX(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const qF=({name:e,prefix:t,encode:r,decode:n})=>new hX(e,t,r,n),VF=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=cX(r,t);return qF({prefix:e,name:t,encode:n,decode:i=>lX(s(i))})},yX=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mX=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ps=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>qF({prefix:t,name:e,encode(s){return mX(s,n,r)},decode(s){return yX(s,n,r,e)}});ps({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ps({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ps({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ps({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ps({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ps({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ps({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ps({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const CP=ps({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xg=VF({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});VF({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});ps({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ps({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const iu=ps({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ps({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function gX(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function vX(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function PP(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var qh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},kP=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const $g=new TextEncoder,ld=new TextDecoder;let Wt=class Di{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Di(t,"ArrayBuffer")}static asyncIterable(t){if(!vX(t))throw new TypeError("Input must be of type AsyncIterable.");return new Di(t,"AsyncIterable")}static base32Z(t){return new Di(t,"Base32Z")}static base58Btc(t){return new Di(t,"Base58Btc")}static base64Url(t){return new Di(t,"Base64Url")}static bufferSource(t){return new Di(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Di(t,"Hex")}static multibase(t){return new Di(t,"Multibase")}static object(t){return new Di(t,"Object")}static string(t){return new Di(t,"String")}static uint8Array(t){return new Di(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return xg.baseDecode(this.data).buffer;case"Base64Url":return iu.baseDecode(this.data).buffer;case"BufferSource":{if(PP(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return gX(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return qh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return CP.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return xg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return xg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return iu.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return iu.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=$g.encode(t);return iu.baseEncode(r)}case"String":{const t=$g.encode(this.data);return iu.baseEncode(t)}case"Uint8Array":return iu.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,n,s;return qh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=kP(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Di.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Di.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=iu.baseDecode(this.data),r=ld.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=ld.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return qh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return ld.decode(this.data);case"Base64Url":{const t=iu.baseDecode(this.data);return ld.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return ld.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,n,s;return qh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=kP(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=ld.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=ld.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return CP.baseDecode(this.data);case"Base58Btc":return xg.baseDecode(this.data);case"Base64Url":return iu.baseDecode(this.data);case"BufferSource":{const t=PP(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return $g.encode(t)}case"String":return $g.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return qh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var wX=HF,OP=128,bX=127,_X=~bX,EX=Math.pow(2,31);function HF(e,t,r){t=t||[],r=r||0;for(var n=r;e>=EX;)t[r++]=e&255|OP,e/=128;for(;e&_X;)t[r++]=e&255|OP,e>>>=7;return t[r]=e|0,HF.bytes=r-n+1,t}var AX=LA,SX=128,TP=127;function LA(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw LA.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&TP)<<s:(o&TP)*Math.pow(2,s),s+=7}while(o>=SX);return LA.bytes=i-n,r}var xX=Math.pow(2,7),$X=Math.pow(2,14),DX=Math.pow(2,21),CX=Math.pow(2,28),PX=Math.pow(2,35),kX=Math.pow(2,42),OX=Math.pow(2,49),TX=Math.pow(2,56),IX=Math.pow(2,63),BX=function(e){return e<xX?1:e<$X?2:e<DX?3:e<CX?4:e<PX?5:e<kX?6:e<OX?7:e<TX?8:e<IX?9:10},FX={encode:wX,decode:AX,encodingLength:BX},Mw=FX;const IP=(e,t=0)=>[Mw.decode(e,t),Mw.decode.bytes],NX=(e,t,r=0)=>(Mw.encode(e,t,r),t),RX=e=>Mw.encodingLength(e);let Ll=class Kc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Kc.codeToName.has(n)?n:Kc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=RX(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),NX(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=IP(r);return n}static getCodeFromName(t){const{name:r}=t,n=Kc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Kc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Kc.codeToName.set(t.code,t.name),Kc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=IP(r),i=Kc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Ll.codeToName=new Map;Ll.nameToCode=new Map;Ll.registerCodec({code:237,name:"ed25519-pub"});Ll.registerCodec({code:4864,name:"ed25519-priv"});Ll.registerCodec({code:236,name:"x25519-pub"});Ll.registerCodec({code:4866,name:"x25519-priv"});Ll.registerCodec({code:231,name:"secp256k1-pub"});Ll.registerCodec({code:4865,name:"secp256k1-priv"});function zF(e){Object.keys(e).forEach(t=>{e[t]===void 0?delete e[t]:typeof e[t]=="object"&&zF(e[t])})}var dd=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let MX=class{constructor(){this.store=new Map}clear(){return dd(this,void 0,void 0,function*(){this.store.clear()})}close(){return dd(this,void 0,void 0,function*(){})}delete(t){return dd(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return dd(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return dd(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return dd(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return dd(this,void 0,void 0,function*(){this.store.set(t,r)})}};function jX(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function WF(e,...t){if(!jX(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function BP(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function UX(e,t){WF(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const R_=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),zo=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function KX(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function JF(e){return typeof e=="string"&&(e=KX(e)),WF(e),e}let LX=class{clone(){return this._cloneInto()}};function qX(e){const t=n=>e().update(JF(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function VX(e=32){if(R_&&typeof R_.getRandomValues=="function")return R_.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function HX(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}const zX=(e,t,r)=>e&t^~e&r,WX=(e,t,r)=>e&t^e&r^t&r;let JX=class extends LX{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=M_(this.buffer)}update(t){BP(this);const{view:r,buffer:n,blockLen:s}=this;t=JF(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=M_(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){BP(this),UX(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;HX(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=M_(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}};const GX=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wc=new Uint32Array(64);let XX=class extends JX{constructor(){super(64,32,8,!1),this.A=vc[0]|0,this.B=vc[1]|0,this.C=vc[2]|0,this.D=vc[3]|0,this.E=vc[4]|0,this.F=vc[5]|0,this.G=vc[6]|0,this.H=vc[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,r,n,s,i,o,a,c]}set(t,r,n,s,i,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)wc[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const h=wc[d-15],f=wc[d-2],p=zo(h,7)^zo(h,18)^h>>>3,y=zo(f,17)^zo(f,19)^f>>>10;wc[d]=y+wc[d-7]+p+wc[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=zo(a,6)^zo(a,11)^zo(a,25),f=u+h+zX(a,c,l)+GX[d]+wc[d]|0,y=(zo(n,2)^zo(n,13)^zo(n,22))+WX(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){wc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Mm=qX(()=>new XX);var ZX=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let GF=class{static digest(t){return ZX(this,arguments,void 0,function*({data:r}){return Mm(r)})}},lx=class{};var YX=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let QX=class extends lx{digest(t){return YX(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield GF.digest({data:n})}})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XF=BigInt(0),s1=BigInt(1),eZ=BigInt(2);function Na(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const tZ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _f(e){if(!Na(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=tZ[e[r]];return t}function ZF(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function dx(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const su={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function FP(e){if(e>=su._0&&e<=su._9)return e-su._0;if(e>=su._A&&e<=su._F)return e-(su._A-10);if(e>=su._a&&e<=su._f)return e-(su._a-10)}function Jp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=FP(e.charCodeAt(i)),a=FP(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function af(e){return dx(_f(e))}function _l(e){if(!Na(e))throw new Error("Uint8Array expected");return dx(_f(Uint8Array.from(e).reverse()))}function Er(e,t){return Jp(e.toString(16).padStart(t*2,"0"))}function Gp(e,t){return Er(e,t).reverse()}function rZ(e){return Jp(ZF(e))}function Xr(e,t,r){let n;if(typeof t=="string")try{n=Jp(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Na(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${e} expected ${r} bytes, got ${s}`);return n}function Ef(...e){let t=0;for(let s=0;s<e.length;s++){const i=e[s];if(!Na(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t),n=0;for(let s=0;s<e.length;s++){const i=e[s];r.set(i,n),n+=i.length}return r}function nZ(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function iZ(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function sZ(e){let t;for(t=0;e>XF;e>>=s1,t+=1);return t}function oZ(e,t){return e>>BigInt(t)&s1}const aZ=(e,t,r)=>e|(r?s1:XF)<<BigInt(t),fx=e=>(eZ<<BigInt(e-1))-s1,j_=e=>new Uint8Array(e),NP=e=>Uint8Array.from(e);function YF(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=j_(e),s=j_(e),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=j_())=>{s=a(NP([0]),d),n=a(),d.length!==0&&(s=a(NP([1]),d),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<t;){n=a();const f=n.slice();h.push(f),d+=n.length}return Ef(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const uZ={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Na(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function jf(e,t,r={}){const n=(s,i,o)=>{const a=uZ[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=e[s];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return e}const cZ=Object.freeze(Object.defineProperty({__proto__:null,bitGet:oZ,bitLen:sZ,bitMask:fx,bitSet:aZ,bytesToHex:_f,bytesToNumberBE:af,bytesToNumberLE:_l,concatBytes:Ef,createHmacDrbg:YF,ensureBytes:Xr,equalBytes:nZ,hexToBytes:Jp,hexToNumber:dx,isBytes:Na,numberToBytesBE:Er,numberToBytesLE:Gp,numberToHexUnpadded:ZF,numberToVarBytesBE:rZ,utf8ToBytes:iZ,validateObject:jf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pn=BigInt(0),Nr=BigInt(1),Md=BigInt(2),lZ=BigInt(3),qA=BigInt(4),RP=BigInt(5),MP=BigInt(8);BigInt(9);BigInt(16);function _r(e,t){const r=e%t;return r>=Pn?r:t+r}function QF(e,t,r){if(r<=Pn||t<Pn)throw new Error("Expected power/modulo > 0");if(r===Nr)return Pn;let n=Nr;for(;t>Pn;)t&Nr&&(n=n*e%r),e=e*e%r,t>>=Nr;return n}function Br(e,t,r){let n=e;for(;t-- >Pn;)n*=n,n%=r;return n}function VA(e,t){if(e===Pn||t<=Pn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=_r(e,t),n=t,s=Pn,i=Nr;for(;r!==Pn;){const a=n/r,c=n%r,l=s-i*a;n=r,r=c,s=i,i=l}if(n!==Nr)throw new Error("invert: does not exist");return _r(s,t)}function dZ(e){const t=(e-Nr)/Md;let r,n,s;for(r=e-Nr,n=0;r%Md===Pn;r/=Md,n++);for(s=Md;s<e&&QF(s,t,e)!==e-Nr;s++);if(n===1){const o=(e+Nr)/qA;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(r+Nr)/Md;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,s),r),d=a.pow(c,i),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(h);f<l&&!a.eql(y,a.ONE);f++)y=a.sqr(y);const p=a.pow(u,Nr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function fZ(e){if(e%qA===lZ){const t=(e+Nr)/qA;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%MP===RP){const t=(e-RP)/MP;return function(n,s){const i=n.mul(s,Md),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,Md),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return dZ(e)}const pZ=(e,t)=>(_r(e,t)&Nr)===Nr,hZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yZ(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=hZ.reduce((n,s)=>(n[s]="function",n),t);return jf(e,r)}function mZ(e,t,r){if(r<Pn)throw new Error("Expected power > 0");if(r===Pn)return e.ONE;if(r===Nr)return t;let n=e.ONE,s=t;for(;r>Pn;)r&Nr&&(n=e.mul(n,s)),s=e.sqr(s),r>>=Nr;return n}function gZ(e,t){const r=new Array(t.length),n=t.reduce((i,o,a)=>e.is0(o)?i:(r[a]=i,e.mul(i,o)),e.ONE),s=e.inv(n);return t.reduceRight((i,o,a)=>e.is0(o)?i:(r[a]=e.mul(i,r[a]),e.mul(i,o)),s),r}function e3(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function px(e,t,r=!1,n={}){if(e<=Pn)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=e3(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=fZ(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:fx(s),ZERO:Pn,ONE:Nr,create:c=>_r(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Pn<=c&&c<e},is0:c=>c===Pn,isOdd:c=>(c&Nr)===Nr,neg:c=>_r(-c,e),eql:(c,l)=>c===l,sqr:c=>_r(c*c,e),add:(c,l)=>_r(c+l,e),sub:(c,l)=>_r(c-l,e),mul:(c,l)=>_r(c*l,e),pow:(c,l)=>mZ(a,c,l),div:(c,l)=>_r(c*VA(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>VA(c,e),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>gZ(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?Gp(c,i):Er(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?_l(c):af(c)}});return Object.freeze(a)}function vZ(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function t3(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function r3(e){const t=t3(e);return t+Math.ceil(t/2)}function wZ(e,t,r=!1){const n=e.length,s=t3(t),i=r3(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?af(e):_l(e),a=_r(o,t-Nr)+Nr;return r?Gp(a,s):Er(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bZ=BigInt(0),U_=BigInt(1);function n3(e,t){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=e.ZERO,a=s;for(;i>bZ;)i&U_&&(o=o.add(a)),a=a.double(),i>>=U_;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let l=e.ZERO,u=e.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const y=p*c;let _=Number(o&d);o>>=f,_>c&&(_-=h,o+=U_);const b=y,v=y+Math.abs(_)-1,g=p%2!==0,m=_<0;_===0?u=u.add(r(g,i[b])):l=l.add(r(m,i[v]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function hx(e){return yZ(e.Fp),jf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...e3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _Z(e){const t=hx(e);jf(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:EZ,hexToBytes:AZ}=cZ,Wd={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Wd;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:EZ(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Wd,r=typeof e=="string"?AZ(e):e;if(!Na(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Wd._parseInt(r.subarray(2)),{d:o,l:a}=Wd._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},n=t(r(e.s)),s=t(r(e.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},Ru=BigInt(0),js=BigInt(1);BigInt(2);const jP=BigInt(3);BigInt(4);function SZ(e){const t=_Z(e),{Fp:r}=t,n=t.toBytes||((p,y,_)=>{const b=y.toAffine();return Ef(Uint8Array.from([4]),r.toBytes(b.x),r.toBytes(b.y))}),s=t.fromBytes||(p=>{const y=p.subarray(1),_=r.fromBytes(y.subarray(0,r.BYTES)),b=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:_,y:b}});function i(p){const{a:y,b:_}=t,b=r.sqr(p),v=r.mul(b,p);return r.add(r.add(v,r.mul(p,y)),_)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ru<p&&p<t.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:y,nByteLength:_,wrapPrivateKey:b,n:v}=t;if(y&&typeof p!="bigint"){if(Na(p)&&(p=_f(p)),typeof p!="string"||!y.includes(p.length))throw new Error("Invalid key");p=p.padStart(_*2,"0")}let g;try{g=typeof p=="bigint"?p:af(Xr("private key",p,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof p}`)}return b&&(g=_r(g,v)),a(g),g}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,_,b){if(this.px=y,this.py=_,this.pz=b,y==null||!r.isValid(y))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(b==null||!r.isValid(b))throw new Error("z required")}static fromAffine(y){const{x:_,y:b}=y||{};if(!y||!r.isValid(_)||!r.isValid(b))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const v=g=>r.eql(g,r.ZERO);return v(_)&&v(b)?d.ZERO:new d(_,b,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const _=r.invertBatch(y.map(b=>b.pz));return y.map((b,v)=>b.toAffine(_[v])).map(d.fromAffine)}static fromHex(y){const _=d.fromAffine(s(Xr("pointHex",y)));return _.assertValidity(),_}static fromPrivateKey(y){return d.BASE.multiply(c(y))}_setWindowSize(y){this._WINDOW_SIZE=y,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:_}=this.toAffine();if(!r.isValid(y)||!r.isValid(_))throw new Error("bad point: x or y not FE");const b=r.sqr(_),v=i(y);if(!r.eql(b,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){u(y);const{px:_,py:b,pz:v}=this,{px:g,py:m,pz:w}=y,x=r.eql(r.mul(_,w),r.mul(g,v)),S=r.eql(r.mul(b,w),r.mul(m,v));return x&&S}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:y,b:_}=t,b=r.mul(_,jP),{px:v,py:g,pz:m}=this;let w=r.ZERO,x=r.ZERO,S=r.ZERO,E=r.mul(v,v),A=r.mul(g,g),$=r.mul(m,m),I=r.mul(v,g);return I=r.add(I,I),S=r.mul(v,m),S=r.add(S,S),w=r.mul(y,S),x=r.mul(b,$),x=r.add(w,x),w=r.sub(A,x),x=r.add(A,x),x=r.mul(w,x),w=r.mul(I,w),S=r.mul(b,S),$=r.mul(y,$),I=r.sub(E,$),I=r.mul(y,I),I=r.add(I,S),S=r.add(E,E),E=r.add(S,E),E=r.add(E,$),E=r.mul(E,I),x=r.add(x,E),$=r.mul(g,m),$=r.add($,$),E=r.mul($,I),w=r.sub(w,E),S=r.mul($,A),S=r.add(S,S),S=r.add(S,S),new d(w,x,S)}add(y){u(y);const{px:_,py:b,pz:v}=this,{px:g,py:m,pz:w}=y;let x=r.ZERO,S=r.ZERO,E=r.ZERO;const A=t.a,$=r.mul(t.b,jP);let I=r.mul(_,g),T=r.mul(b,m),R=r.mul(v,w),L=r.add(_,b),j=r.add(g,m);L=r.mul(L,j),j=r.add(I,T),L=r.sub(L,j),j=r.add(_,v);let U=r.add(g,w);return j=r.mul(j,U),U=r.add(I,R),j=r.sub(j,U),U=r.add(b,v),x=r.add(m,w),U=r.mul(U,x),x=r.add(T,R),U=r.sub(U,x),E=r.mul(A,j),x=r.mul($,R),E=r.add(x,E),x=r.sub(T,E),E=r.add(T,E),S=r.mul(x,E),T=r.add(I,I),T=r.add(T,I),R=r.mul(A,R),j=r.mul($,j),T=r.add(T,R),R=r.sub(I,R),R=r.mul(A,R),j=r.add(j,R),I=r.mul(T,j),S=r.add(S,I),I=r.mul(U,j),x=r.mul(L,x),x=r.sub(x,I),I=r.mul(L,T),E=r.mul(U,E),E=r.add(E,I),new d(x,S,E)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return f.wNAFCached(this,l,y,_=>{const b=r.invertBatch(_.map(v=>v.pz));return _.map((v,g)=>v.toAffine(b[g])).map(d.fromAffine)})}multiplyUnsafe(y){const _=d.ZERO;if(y===Ru)return _;if(a(y),y===js)return this;const{endo:b}=t;if(!b)return f.unsafeLadder(this,y);let{k1neg:v,k1:g,k2neg:m,k2:w}=b.splitScalar(y),x=_,S=_,E=this;for(;g>Ru||w>Ru;)g&js&&(x=x.add(E)),w&js&&(S=S.add(E)),E=E.double(),g>>=js,w>>=js;return v&&(x=x.negate()),m&&(S=S.negate()),S=new d(r.mul(S.px,b.beta),S.py,S.pz),x.add(S)}multiply(y){a(y);let _=y,b,v;const{endo:g}=t;if(g){const{k1neg:m,k1:w,k2neg:x,k2:S}=g.splitScalar(_);let{p:E,f:A}=this.wNAF(w),{p:$,f:I}=this.wNAF(S);E=f.constTimeNegate(m,E),$=f.constTimeNegate(x,$),$=new d(r.mul($.px,g.beta),$.py,$.pz),b=E.add($),v=A.add(I)}else{const{p:m,f:w}=this.wNAF(_);b=m,v=w}return d.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(y,_,b){const v=d.BASE,g=(w,x)=>x===Ru||x===js||!w.equals(v)?w.multiplyUnsafe(x):w.multiply(x),m=g(this,_).add(g(y,b));return m.is0()?void 0:m}toAffine(y){const{px:_,py:b,pz:v}=this,g=this.is0();y==null&&(y=g?r.ONE:r.inv(v));const m=r.mul(_,y),w=r.mul(b,y),x=r.mul(v,y);if(g)return{x:r.ZERO,y:r.ZERO};if(!r.eql(x,r.ONE))throw new Error("invZ was invalid");return{x:m,y:w}}isTorsionFree(){const{h:y,isTorsionFree:_}=t;if(y===js)return!0;if(_)return _(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:_}=t;return y===js?this:_?_(d,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),n(d,this,y)}toHex(y=!0){return _f(this.toRawBytes(y))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=t.nBitLength,f=n3(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function xZ(e){const t=hx(e);return jf(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function $Z(e){const t=xZ(e),{Fp:r,n}=t,s=r.BYTES+1,i=2*r.BYTES+1;function o(j){return Ru<j&&j<r.ORDER}function a(j){return _r(j,n)}function c(j){return VA(j,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=SZ({...t,toBytes(j,U,te){const z=U.toAffine(),ee=r.toBytes(z.x),q=Ef;return te?q(Uint8Array.from([U.hasEvenY()?2:3]),ee):q(Uint8Array.from([4]),ee,r.toBytes(z.y))},fromBytes(j){const U=j.length,te=j[0],z=j.subarray(1);if(U===s&&(te===2||te===3)){const ee=af(z);if(!o(ee))throw new Error("Point is not on curve");const q=d(ee);let O=r.sqrt(q);const Y=(O&js)===js;return(te&1)===1!==Y&&(O=r.neg(O)),{x:ee,y:O}}else if(U===i&&te===4){const ee=r.fromBytes(z.subarray(0,r.BYTES)),q=r.fromBytes(z.subarray(r.BYTES,2*r.BYTES));return{x:ee,y:q}}else throw new Error(`Point of length ${U} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=j=>_f(Er(j,t.nByteLength));function p(j){const U=n>>js;return j>U}function y(j){return p(j)?a(-j):j}const _=(j,U,te)=>af(j.slice(U,te));class b{constructor(U,te,z){this.r=U,this.s=te,this.recovery=z,this.assertValidity()}static fromCompact(U){const te=t.nByteLength;return U=Xr("compactSignature",U,te*2),new b(_(U,0,te),_(U,te,2*te))}static fromDER(U){const{r:te,s:z}=Wd.toSig(Xr("DER",U));return new b(te,z)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(U){return new b(this.r,this.s,U)}recoverPublicKey(U){const{r:te,s:z,recovery:ee}=this,q=S(Xr("msgHash",U));if(ee==null||![0,1,2,3].includes(ee))throw new Error("recovery id invalid");const O=ee===2||ee===3?te+t.n:te;if(O>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=ee&1?"03":"02",H=l.fromHex(Y+f(O)),C=c(O),B=a(-q*C),Z=a(z*C),Q=l.BASE.multiplyAndAddUnsafe(H,B,Z);if(!Q)throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Jp(this.toDERHex())}toDERHex(){return Wd.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jp(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(j){try{return u(j),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const j=r3(t.n);return wZ(t.randomBytes(j),t.n)},precompute(j=8,U=l.BASE){return U._setWindowSize(j),U.multiply(BigInt(3)),U}};function g(j,U=!0){return l.fromPrivateKey(j).toRawBytes(U)}function m(j){const U=Na(j),te=typeof j=="string",z=(U||te)&&j.length;return U?z===s||z===i:te?z===2*s||z===2*i:j instanceof l}function w(j,U,te=!0){if(m(j))throw new Error("first arg must be private key");if(!m(U))throw new Error("second arg must be public key");return l.fromHex(U).multiply(u(j)).toRawBytes(te)}const x=t.bits2int||function(j){const U=af(j),te=j.length*8-t.nBitLength;return te>0?U>>BigInt(te):U},S=t.bits2int_modN||function(j){return a(x(j))},E=fx(t.nBitLength);function A(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Ru<=j&&j<E))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Er(j,t.nByteLength)}function $(j,U,te=I){if(["recovered","canonical"].some(fe=>fe in te))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:ee}=t;let{lowS:q,prehash:O,extraEntropy:Y}=te;q==null&&(q=!0),j=Xr("msgHash",j),O&&(j=Xr("prehashed msgHash",z(j)));const H=S(j),C=u(U),B=[A(C),A(H)];if(Y!=null){const fe=Y===!0?ee(r.BYTES):Y;B.push(Xr("extraEntropy",fe))}const Z=Ef(...B),Q=H;function oe(fe){const he=x(fe);if(!h(he))return;const _e=c(he),Ie=l.BASE.multiply(he).toAffine(),F=a(Ie.x);if(F===Ru)return;const M=a(_e*a(Q+F*C));if(M===Ru)return;let re=(Ie.x===F?0:2)|Number(Ie.y&js),N=M;return q&&p(M)&&(N=y(M),re^=1),new b(F,N,re)}return{seed:Z,k2sig:oe}}const I={lowS:t.lowS,prehash:!1},T={lowS:t.lowS,prehash:!1};function R(j,U,te=I){const{seed:z,k2sig:ee}=$(j,U,te),q=t;return YF(q.hash.outputLen,q.nByteLength,q.hmac)(z,ee)}l.BASE._setWindowSize(8);function L(j,U,te,z=T){var Ie;const ee=j;if(U=Xr("msgHash",U),te=Xr("publicKey",te),"strict"in z)throw new Error("options.strict was renamed to lowS");const{lowS:q,prehash:O}=z;let Y,H;try{if(typeof ee=="string"||Na(ee))try{Y=b.fromDER(ee)}catch(F){if(!(F instanceof Wd.Err))throw F;Y=b.fromCompact(ee)}else if(typeof ee=="object"&&typeof ee.r=="bigint"&&typeof ee.s=="bigint"){const{r:F,s:M}=ee;Y=new b(F,M)}else throw new Error("PARSE");H=l.fromHex(te)}catch(F){if(F.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&Y.hasHighS())return!1;O&&(U=t.hash(U));const{r:C,s:B}=Y,Z=S(U),Q=c(B),oe=a(Z*Q),fe=a(C*Q),he=(Ie=l.BASE.multiplyAndAddUnsafe(H,oe,fe))==null?void 0:Ie.toAffine();return he?a(he.x)===C:!1}return{CURVE:t,getPublicKey:g,getSharedSecret:w,sign:R,verify:L,ProjectivePoint:l,Signature:b,utils:v}}class i3 extends g6{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,FV(t);const n=NS(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ow(this),this.iHash.update(t),this}digestInto(t){Ow(this),p6(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s3=(e,t,r)=>new i3(e,t).update(r).digest();s3.create=(e,t)=>new i3(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function DZ(e){return{hash:e,hmac:(t,...r)=>s3(e,t,m6(...r)),randomBytes:RS}}function o3(e,t){const r=n=>$Z({...e,...DZ(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),UP=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CZ=BigInt(1),HA=BigInt(2),KP=(e,t)=>(e+t/HA)/t;function PZ(e){const t=a3,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,d=Br(u,r,t)*u%t,h=Br(d,r,t)*u%t,f=Br(h,HA,t)*l%t,p=Br(f,s,t)*f%t,y=Br(p,i,t)*p%t,_=Br(y,a,t)*y%t,b=Br(_,c,t)*_%t,v=Br(b,a,t)*y%t,g=Br(v,r,t)*u%t,m=Br(g,o,t)*p%t,w=Br(m,n,t)*l%t,x=Br(w,HA,t);if(!zA.eql(zA.sqr(x),e))throw new Error("Cannot find square root");return x}const zA=px(a3,void 0,void 0,{sqrt:PZ}),Ve=o3({a:BigInt(0),b:BigInt(7),Fp:zA,n:UP,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=UP,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-CZ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=KP(i*e,t),c=KP(-n*e,t);let l=_r(e-a*r-c*s,t),u=_r(-a*n-c*i,t);const d=l>o,h=u>o;if(d&&(l=t-l),h&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Ol);BigInt(0);Ve.ProjectivePoint;function kZ(e){const t=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=t(n[o]);return i}return n},r=t(e);return JSON.stringify(r)}var OZ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const LP="urn:jwk:";function fn(e){return OZ(this,arguments,void 0,function*({jwk:t}){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);zF(n);const s=kZ(n),i=Wt.string(s).toUint8Array(),o=yield GF.digest({data:i});return Wt.uint8Array(o).toBase64Url()})}function uf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="EC"||typeof e.d!="string"||typeof e.x!="string")}function yx(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e)||"d"in e||e.kty!=="EC"||typeof e.x!="string")}function um(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="OKP"||typeof e.d!="string"||typeof e.x!="string")}function u3(e){return!(!e||typeof e!="object"||"d"in e||!("kty"in e&&"crv"in e&&"x"in e)||e.kty!=="OKP"||typeof e.x!="string")}function TZ(e){if(!e||typeof e!="object")return!1;switch(e.kty){case"EC":case"OKP":case"RSA":return"d"in e;case"oct":return"k"in e;default:return!1}}var On=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},IZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Vh=class Yo{static adjustSignatureToLowS(t){return On(this,arguments,void 0,function*({signature:r}){const n=Ve.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return On(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield Yo.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:Wt.uint8Array(r).toBase64Url(),x:Wt.uint8Array(n.x).toBase64Url(),y:Wt.uint8Array(n.y).toBase64Url()};return s.kid=yield fn({jwk:s}),s})}static bytesToPublicKey(t){return On(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield Yo.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Wt.uint8Array(n.x).toBase64Url(),y:Wt.uint8Array(n.y).toBase64Url()};return s.kid=yield fn({jwk:s}),s})}static compressPublicKey(t){return On(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return On(this,arguments,void 0,function*({key:r}){const n=yield Yo.privateKeyToBytes({privateKey:r}),s=yield Yo.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:Wt.uint8Array(s.x).toBase64Url(),y:Wt.uint8Array(s.y).toBase64Url()};return i.kid=yield fn({jwk:i}),i})}static convertDerToCompactSignature(t){return On(this,arguments,void 0,function*({derSignature:r}){return Ve.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return On(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return On(this,void 0,void 0,function*(){const t=Ve.utils.randomPrivateKey(),r=yield Yo.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield fn({jwk:r}),r})}static getPublicKey(t){return On(this,arguments,void 0,function*({key:r}){var n;if(!(uf(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=IZ(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield fn({jwk:s})),s})}static privateKeyToBytes(t){return On(this,arguments,void 0,function*({privateKey:r}){if(!uf(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Wt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return On(this,arguments,void 0,function*({publicKey:r}){if(!(yx(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Wt.base64Url(r.x).toUint8Array(),i=Wt.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return On(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Yo.privateKeyToBytes({privateKey:r}),i=yield Yo.publicKeyToBytes({publicKey:n});return Ve.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return On(this,arguments,void 0,function*({data:r,key:n}){const s=yield Yo.privateKeyToBytes({privateKey:n}),i=Mm(r);return Ve.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return On(this,arguments,void 0,function*({privateKeyBytes:r}){return Ve.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return On(this,arguments,void 0,function*({publicKeyBytes:r}){try{Ve.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return On(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Yo.publicKeyToBytes({publicKey:r}),o=Mm(s);return Ve.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return On(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Ve.getPublicKey(r));const n=Ve.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c3=px(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),BZ=c3.create(BigInt("-3")),FZ=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),NZ=o3({a:BZ,b:FZ,Fp:c3,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ol),He=NZ;var Tn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},RZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Hh=class Qo{static adjustSignatureToLowS(t){return Tn(this,arguments,void 0,function*({signature:r}){const n=He.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return Tn(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield Qo.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:Wt.uint8Array(r).toBase64Url(),x:Wt.uint8Array(n.x).toBase64Url(),y:Wt.uint8Array(n.y).toBase64Url()};return s.kid=yield fn({jwk:s}),s})}static bytesToPublicKey(t){return Tn(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield Qo.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Wt.uint8Array(n.x).toBase64Url(),y:Wt.uint8Array(n.y).toBase64Url()};return s.kid=yield fn({jwk:s}),s})}static compressPublicKey(t){return Tn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return Tn(this,arguments,void 0,function*({key:r}){const n=yield Qo.privateKeyToBytes({privateKey:r}),s=yield Qo.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:Wt.uint8Array(s.x).toBase64Url(),y:Wt.uint8Array(s.y).toBase64Url()};return i.kid=yield fn({jwk:i}),i})}static convertDerToCompactSignature(t){return Tn(this,arguments,void 0,function*({derSignature:r}){return He.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return Tn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Tn(this,void 0,void 0,function*(){const t=He.utils.randomPrivateKey(),r=yield Qo.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield fn({jwk:r}),r})}static getPublicKey(t){return Tn(this,arguments,void 0,function*({key:r}){var n;if(!(uf(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=RZ(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield fn({jwk:s})),s})}static privateKeyToBytes(t){return Tn(this,arguments,void 0,function*({privateKey:r}){if(!uf(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Wt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Tn(this,arguments,void 0,function*({publicKey:r}){if(!(yx(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Wt.base64Url(r.x).toUint8Array(),i=Wt.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return Tn(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Qo.privateKeyToBytes({privateKey:r}),i=yield Qo.publicKeyToBytes({publicKey:n});return He.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return Tn(this,arguments,void 0,function*({data:r,key:n}){const s=yield Qo.privateKeyToBytes({privateKey:n}),i=Mm(r);return He.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return Tn(this,arguments,void 0,function*({privateKeyBytes:r}){return He.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return Tn(this,arguments,void 0,function*({publicKeyBytes:r}){try{He.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Tn(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Qo.publicKeyToBytes({publicKey:r}),o=Mm(s);return He.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return Tn(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=He.getPublicKey(r));const n=He.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}};var zh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let qP=class extends lx{computePublicKey(t){return zh(this,arguments,void 0,function*({key:r}){if(!uf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Vh.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Hh.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return zh(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield Vh.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield Hh.generateKey();return n.alg="ES256",n}}})}getPublicKey(t){return zh(this,arguments,void 0,function*({key:r}){if(!uf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Vh.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Hh.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return zh(this,arguments,void 0,function*({key:r,data:n}){if(!uf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield Vh.sign({key:r,data:n});case"P-256":return yield Hh.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return zh(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!yx(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield Vh.verify({key:r,signature:n,data:s});case"P-256":return yield Hh.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};const Dg=BigInt(2**32-1),WA=BigInt(32);function l3(e,t=!1){return t?{h:Number(e&Dg),l:Number(e>>WA&Dg)}:{h:Number(e>>WA&Dg)|0,l:Number(e&Dg)|0}}function MZ(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=l3(e[s],t);[r[s],n[s]]=[i,o]}return[r,n]}const jZ=(e,t)=>BigInt(e>>>0)<<WA|BigInt(t>>>0),UZ=(e,t,r)=>e>>>r,KZ=(e,t,r)=>e<<32-r|t>>>r,LZ=(e,t,r)=>e>>>r|t<<32-r,qZ=(e,t,r)=>e<<32-r|t>>>r,VZ=(e,t,r)=>e<<64-r|t>>>r-32,HZ=(e,t,r)=>e>>>r-32|t<<64-r,zZ=(e,t)=>t,WZ=(e,t)=>e,JZ=(e,t,r)=>e<<r|t>>>32-r,GZ=(e,t,r)=>t<<r|e>>>32-r,XZ=(e,t,r)=>t<<r-32|e>>>64-r,ZZ=(e,t,r)=>e<<r-32|t>>>64-r;function YZ(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}const QZ=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),eY=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,tY=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),rY=(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,nY=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0),iY=(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,Dt={fromBig:l3,split:MZ,toBig:jZ,shrSH:UZ,shrSL:KZ,rotrSH:LZ,rotrSL:qZ,rotrBH:VZ,rotrBL:HZ,rotr32H:zZ,rotr32L:WZ,rotlSH:JZ,rotlSL:GZ,rotlBH:XZ,rotlBL:ZZ,add:YZ,add3L:QZ,add3H:eY,add4L:tY,add4H:rY,add5H:iY,add5L:nY},[sY,oY]=Dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),bc=new Uint32Array(80),_c=new Uint32Array(80);class aY extends w6{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:y,Hl:_}=this;return[t,r,n,s,i,o,a,c,l,u,d,h,f,p,y,_]}set(t,r,n,s,i,o,a,c,l,u,d,h,f,p,y,_){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=y|0,this.Hl=_|0}process(t,r){for(let g=0;g<16;g++,r+=4)bc[g]=t.getUint32(r),_c[g]=t.getUint32(r+=4);for(let g=16;g<80;g++){const m=bc[g-15]|0,w=_c[g-15]|0,x=Dt.rotrSH(m,w,1)^Dt.rotrSH(m,w,8)^Dt.shrSH(m,w,7),S=Dt.rotrSL(m,w,1)^Dt.rotrSL(m,w,8)^Dt.shrSL(m,w,7),E=bc[g-2]|0,A=_c[g-2]|0,$=Dt.rotrSH(E,A,19)^Dt.rotrBH(E,A,61)^Dt.shrSH(E,A,6),I=Dt.rotrSL(E,A,19)^Dt.rotrBL(E,A,61)^Dt.shrSL(E,A,6),T=Dt.add4L(S,I,_c[g-7],_c[g-16]),R=Dt.add4H(T,x,$,bc[g-7],bc[g-16]);bc[g]=R|0,_c[g]=T|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:y,Gl:_,Hh:b,Hl:v}=this;for(let g=0;g<80;g++){const m=Dt.rotrSH(d,h,14)^Dt.rotrSH(d,h,18)^Dt.rotrBH(d,h,41),w=Dt.rotrSL(d,h,14)^Dt.rotrSL(d,h,18)^Dt.rotrBL(d,h,41),x=d&f^~d&y,S=h&p^~h&_,E=Dt.add5L(v,w,S,oY[g],_c[g]),A=Dt.add5H(E,b,m,x,sY[g],bc[g]),$=E|0,I=Dt.rotrSH(n,s,28)^Dt.rotrBH(n,s,34)^Dt.rotrBH(n,s,39),T=Dt.rotrSL(n,s,28)^Dt.rotrBL(n,s,34)^Dt.rotrBL(n,s,39),R=n&i^n&a^i&a,L=s&o^s&c^o&c;b=y|0,v=_|0,y=f|0,_=p|0,f=d|0,p=h|0,{h:d,l:h}=Dt.add(l|0,u|0,A|0,$|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const j=Dt.add3L($,T,L);n=Dt.add3H(j,A,I,R),s=j|0}({h:n,l:s}=Dt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Dt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Dt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Dt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Dt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:y,l:_}=Dt.add(this.Gh|0,this.Gl|0,y|0,_|0),{h:b,l:v}=Dt.add(this.Hh|0,this.Hl|0,b|0,v|0),this.set(n,s,i,o,a,c,l,u,d,h,f,p,y,_,b,v)}roundClean(){bc.fill(0),_c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const d3=v6(()=>new aY);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ao=BigInt(0),Xi=BigInt(1),Cg=BigInt(2),uY=BigInt(8),cY={zip215:!0};function lY(e){const t=hx(e);return jf(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function mx(e){const t=lY(e),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=t,l=Cg<<BigInt(a*8)-Xi,u=r.create,d=t.uvRatio||((z,ee)=>{try{return{isValid:!0,value:r.sqrt(z*r.inv(ee))}}catch{return{isValid:!1,value:ao}}}),h=t.adjustScalarBytes||(z=>z),f=t.domain||((z,ee,q)=>{if(ee.length||q)throw new Error("Contexts/pre-hash are not supported");return z}),p=z=>typeof z=="bigint"&&ao<z,y=(z,ee)=>p(z)&&p(ee)&&z<ee,_=z=>z===ao||y(z,l);function b(z,ee){if(y(z,ee))return z;throw new Error(`Expected valid scalar < ${ee}, got ${typeof z} ${z}`)}function v(z){return z===ao?z:b(z,n)}const g=new Map;function m(z){if(!(z instanceof w))throw new Error("ExtendedPoint expected")}class w{constructor(ee,q,O,Y){if(this.ex=ee,this.ey=q,this.ez=O,this.et=Y,!_(ee))throw new Error("x required");if(!_(q))throw new Error("y required");if(!_(O))throw new Error("z required");if(!_(Y))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ee){if(ee instanceof w)throw new Error("extended point not allowed");const{x:q,y:O}=ee||{};if(!_(q)||!_(O))throw new Error("invalid affine point");return new w(q,O,Xi,u(q*O))}static normalizeZ(ee){const q=r.invertBatch(ee.map(O=>O.ez));return ee.map((O,Y)=>O.toAffine(q[Y])).map(w.fromAffine)}_setWindowSize(ee){this._WINDOW_SIZE=ee,g.delete(this)}assertValidity(){const{a:ee,d:q}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:O,ey:Y,ez:H,et:C}=this,B=u(O*O),Z=u(Y*Y),Q=u(H*H),oe=u(Q*Q),fe=u(B*ee),he=u(Q*u(fe+Z)),_e=u(oe+u(q*u(B*Z)));if(he!==_e)throw new Error("bad point: equation left != right (1)");const Ie=u(O*Y),F=u(H*C);if(Ie!==F)throw new Error("bad point: equation left != right (2)")}equals(ee){m(ee);const{ex:q,ey:O,ez:Y}=this,{ex:H,ey:C,ez:B}=ee,Z=u(q*B),Q=u(H*Y),oe=u(O*B),fe=u(C*Y);return Z===Q&&oe===fe}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:ee}=t,{ex:q,ey:O,ez:Y}=this,H=u(q*q),C=u(O*O),B=u(Cg*u(Y*Y)),Z=u(ee*H),Q=q+O,oe=u(u(Q*Q)-H-C),fe=Z+C,he=fe-B,_e=Z-C,Ie=u(oe*he),F=u(fe*_e),M=u(oe*_e),re=u(he*fe);return new w(Ie,F,re,M)}add(ee){m(ee);const{a:q,d:O}=t,{ex:Y,ey:H,ez:C,et:B}=this,{ex:Z,ey:Q,ez:oe,et:fe}=ee;if(q===BigInt(-1)){const ue=u((H-Y)*(Q+Z)),Ae=u((H+Y)*(Q-Z)),ye=u(Ae-ue);if(ye===ao)return this.double();const V=u(C*Cg*fe),W=u(B*Cg*oe),pe=W+V,ve=Ae+ue,xe=W-V,ht=u(pe*ye),wt=u(ve*xe),Rr=u(pe*xe),jt=u(ye*ve);return new w(ht,wt,jt,Rr)}const he=u(Y*Z),_e=u(H*Q),Ie=u(B*O*fe),F=u(C*oe),M=u((Y+H)*(Z+Q)-he-_e),re=F-Ie,N=F+Ie,D=u(_e-q*he),k=u(M*re),X=u(N*D),se=u(M*D),le=u(re*N);return new w(k,X,le,se)}subtract(ee){return this.add(ee.negate())}wNAF(ee){return E.wNAFCached(this,g,ee,w.normalizeZ)}multiply(ee){const{p:q,f:O}=this.wNAF(b(ee,n));return w.normalizeZ([q,O])[0]}multiplyUnsafe(ee){let q=v(ee);return q===ao?S:this.equals(S)||q===Xi?this:this.equals(x)?this.wNAF(q).p:E.unsafeLadder(this,q)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(ee){const{ex:q,ey:O,ez:Y}=this,H=this.is0();ee==null&&(ee=H?uY:r.inv(Y));const C=u(q*ee),B=u(O*ee),Z=u(Y*ee);if(H)return{x:ao,y:Xi};if(Z!==Xi)throw new Error("invZ was invalid");return{x:C,y:B}}clearCofactor(){const{h:ee}=t;return ee===Xi?this:this.multiplyUnsafe(ee)}static fromHex(ee,q=!1){const{d:O,a:Y}=t,H=r.BYTES;ee=Xr("pointHex",ee,H);const C=ee.slice(),B=ee[H-1];C[H-1]=B&-129;const Z=_l(C);Z===ao||(q?b(Z,l):b(Z,r.ORDER));const Q=u(Z*Z),oe=u(Q-Xi),fe=u(O*Q-Y);let{isValid:he,value:_e}=d(oe,fe);if(!he)throw new Error("Point.fromHex: invalid y coordinate");const Ie=(_e&Xi)===Xi,F=(B&128)!==0;if(!q&&_e===ao&&F)throw new Error("Point.fromHex: x=0 and x_0=1");return F!==Ie&&(_e=u(-_e)),w.fromAffine({x:_e,y:Z})}static fromPrivateKey(ee){return I(ee).point}toRawBytes(){const{x:ee,y:q}=this.toAffine(),O=Gp(q,r.BYTES);return O[O.length-1]|=ee&Xi?128:0,O}toHex(){return _f(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,Xi,u(t.Gx*t.Gy)),w.ZERO=new w(ao,Xi,Xi,ao);const{BASE:x,ZERO:S}=w,E=n3(w,a*8);function A(z){return _r(z,n)}function $(z){return A(_l(z))}function I(z){const ee=a;z=Xr("private key",z,ee);const q=Xr("hashed private key",i(z),2*ee),O=h(q.slice(0,ee)),Y=q.slice(ee,2*ee),H=$(O),C=x.multiply(H),B=C.toRawBytes();return{head:O,prefix:Y,scalar:H,point:C,pointBytes:B}}function T(z){return I(z).pointBytes}function R(z=new Uint8Array,...ee){const q=Ef(...ee);return $(i(f(q,Xr("context",z),!!s)))}function L(z,ee,q={}){z=Xr("message",z),s&&(z=s(z));const{prefix:O,scalar:Y,pointBytes:H}=I(ee),C=R(q.context,O,z),B=x.multiply(C).toRawBytes(),Z=R(q.context,B,H,z),Q=A(C+Z*Y);v(Q);const oe=Ef(B,Gp(Q,r.BYTES));return Xr("result",oe,a*2)}const j=cY;function U(z,ee,q,O=j){const{context:Y,zip215:H}=O,C=r.BYTES;z=Xr("signature",z,2*C),ee=Xr("message",ee),s&&(ee=s(ee));const B=_l(z.slice(C,2*C));let Z,Q,oe;try{Z=w.fromHex(q,H),Q=w.fromHex(z.slice(0,C),H),oe=x.multiplyUnsafe(B)}catch{return!1}if(!H&&Z.isSmallOrder())return!1;const fe=R(Y,Q.toRawBytes(),Z.toRawBytes(),ee);return Q.add(Z.multiplyUnsafe(fe)).subtract(oe).clearCofactor().equals(w.ZERO)}return x._setWindowSize(8),{CURVE:t,getPublicKey:T,sign:L,verify:U,ExtendedPoint:w,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(z=8,ee=w.BASE){return ee._setWindowSize(z),ee.multiply(BigInt(3)),ee}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wh=BigInt(0),K_=BigInt(1);function dY(e){return jf(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}function fY(e){const t=dY(e),{P:r}=t,n=g=>_r(g,r),s=t.montgomeryBits,i=Math.ceil(s/8),o=t.nByteLength,a=t.adjustScalarBytes||(g=>g),c=t.powPminus2||(g=>QF(g,r-BigInt(2),r));function l(g,m,w){const x=n(g*(m-w));return m=n(m-x),w=n(w+x),[m,w]}function u(g){if(typeof g=="bigint"&&Wh<=g&&g<r)return g;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const d=(t.a-BigInt(2))/BigInt(4);function h(g,m){const w=u(g),x=u(m),S=w;let E=K_,A=Wh,$=w,I=K_,T=Wh,R;for(let j=BigInt(s-1);j>=Wh;j--){const U=x>>j&K_;T^=U,R=l(T,E,$),E=R[0],$=R[1],R=l(T,A,I),A=R[0],I=R[1],T=U;const te=E+A,z=n(te*te),ee=E-A,q=n(ee*ee),O=z-q,Y=$+I,H=$-I,C=n(H*te),B=n(Y*ee),Z=C+B,Q=C-B;$=n(Z*Z),I=n(S*n(Q*Q)),E=n(z*q),A=n(O*(z+n(d*O)))}R=l(T,E,$),E=R[0],$=R[1],R=l(T,A,I),A=R[0],I=R[1];const L=c(A);return n(E*L)}function f(g){return Gp(n(g),i)}function p(g){const m=Xr("u coordinate",g,i);return o===32&&(m[31]&=127),_l(m)}function y(g){const m=Xr("scalar",g),w=m.length;if(w!==i&&w!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${w}`);return _l(a(m))}function _(g,m){const w=p(m),x=y(g),S=h(w,x);if(S===Wh)throw new Error("Invalid private or public key received");return f(S)}const b=f(t.Gu);function v(g){return _(g,b)}return{scalarMult:_,scalarMultBase:v,getSharedSecret:(g,m)=>_(g,m),getPublicKey:g=>v(g),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jm=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),VP=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const pY=BigInt(1),JA=BigInt(2),hY=BigInt(5),HP=BigInt(10),yY=BigInt(20),mY=BigInt(40),zP=BigInt(80);function f3(e){const t=jm,n=e*e%t*e%t,s=Br(n,JA,t)*n%t,i=Br(s,pY,t)*e%t,o=Br(i,hY,t)*i%t,a=Br(o,HP,t)*o%t,c=Br(a,yY,t)*a%t,l=Br(c,mY,t)*c%t,u=Br(l,zP,t)*l%t,d=Br(u,zP,t)*l%t,h=Br(d,HP,t)*o%t;return{pow_p_5_8:Br(h,JA,t)*e%t,b2:n}}function p3(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function gY(e,t){const r=jm,n=_r(t*t*t,r),s=_r(n*n*t,r),i=f3(e*s).pow_p_5_8;let o=_r(e*n*i,r);const a=_r(t*o*o,r),c=o,l=_r(o*VP,r),u=a===e,d=a===_r(-e,r),h=a===_r(-e*VP,r);return u&&(o=c),(d||h)&&(o=l),pZ(o,r)&&(o=_r(-o,r)),{isValid:u||d,value:o}}const Gs=px(jm,void 0,!0),Um={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Gs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:d3,randomBytes:RS,adjustScalarBytes:p3,uvRatio:gY},Zt=mx(Um);function h3(e,t,r){if(t.length>255)throw new Error("Context is too big");return m6(y6("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}({...Um});({...Um});const Zn=fY({P:jm,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=jm,{pow_p_5_8:r,b2:n}=f3(e);return _r(Br(r,BigInt(3),t)*n,t)},adjustScalarBytes:p3,randomBytes:RS});function A0(e){const{y:t}=Zt.ExtendedPoint.fromHex(e),r=BigInt(1);return Gs.toBytes(Gs.create((r+t)*Gs.inv(r-t)))}function S0(e){const t=Um.hash(e.subarray(0,32));return Um.adjustScalarBytes(t).subarray(0,32)}const vY=(Gs.ORDER+BigInt(3))/BigInt(8);Gs.pow(JA,vY);Gs.sqrt(Gs.neg(Gs.ONE));(Gs.ORDER-BigInt(5))/BigInt(8);BigInt(486662);vZ(Gs,Gs.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ss=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},wY=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Jh=class Lc{static bytesToPrivateKey(t){return Ss(this,arguments,void 0,function*({privateKeyBytes:r}){const n=Zt.getPublicKey(r),s={crv:"Ed25519",d:Wt.uint8Array(r).toBase64Url(),kty:"OKP",x:Wt.uint8Array(n).toBase64Url()};return s.kid=yield fn({jwk:s}),s})}static bytesToPublicKey(t){return Ss(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:Wt.uint8Array(r).toBase64Url()};return n.kid=yield fn({jwk:n}),n})}static computePublicKey(t){return Ss(this,arguments,void 0,function*({key:r}){const n=yield Lc.privateKeyToBytes({privateKey:r}),s=Zt.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:Wt.uint8Array(s).toBase64Url()};return i.kid=yield fn({jwk:i}),i})}static convertPrivateKeyToX25519(t){return Ss(this,arguments,void 0,function*({privateKey:r}){const n=yield Lc.privateKeyToBytes({privateKey:r}),s=S0(n),i=Zn.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:Wt.uint8Array(s).toBase64Url(),x:Wt.uint8Array(i).toBase64Url()};return o.kid=yield fn({jwk:o}),o})}static convertPublicKeyToX25519(t){return Ss(this,arguments,void 0,function*({publicKey:r}){const n=yield Lc.publicKeyToBytes({publicKey:r});if(!(yield Lc.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=A0(n),o={kty:"OKP",crv:"X25519",x:Wt.uint8Array(i).toBase64Url()};return o.kid=yield fn({jwk:o}),o})}static generateKey(){return Ss(this,void 0,void 0,function*(){const t=Zt.utils.randomPrivateKey(),r=yield Lc.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield fn({jwk:r}),r})}static getPublicKey(t){return Ss(this,arguments,void 0,function*({key:r}){var n;if(!(um(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=wY(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield fn({jwk:s})),s})}static privateKeyToBytes(t){return Ss(this,arguments,void 0,function*({privateKey:r}){if(!um(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Wt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Ss(this,arguments,void 0,function*({publicKey:r}){if(!u3(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Wt.base64Url(r.x).toUint8Array()})}static sign(t){return Ss(this,arguments,void 0,function*({key:r,data:n}){const s=yield Lc.privateKeyToBytes({privateKey:r});return Zt.sign(n,s)})}static validatePublicKey(t){return Ss(this,arguments,void 0,function*({publicKeyBytes:r}){try{Zt.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Ss(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Lc.publicKeyToBytes({publicKey:r});return Zt.verify(n,s,i)})}};var Gh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let bY=class extends lx{computePublicKey(t){return Gh(this,arguments,void 0,function*({key:r}){if(!um(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Jh.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return Gh(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield Jh.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(t){return Gh(this,arguments,void 0,function*({key:r}){if(!um(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Jh.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return Gh(this,arguments,void 0,function*({key:r,data:n}){if(!um(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Jh.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return Gh(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!u3(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Jh.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var ou=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const L_={Ed25519:{implementation:bY,names:["Ed25519"]},secp256k1:{implementation:qP,names:["ES256K","secp256k1"]},secp256r1:{implementation:qP,names:["ES256","secp256r1"]},"SHA-256":{implementation:QX,names:["SHA-256"]}};let _Y=class{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=(r=t==null?void 0:t.keyStore)!==null&&r!==void 0?r:new MX}digest(t){return ou(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(t){return ou(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(t){return ou(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${LP}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(t){return ou(this,arguments,void 0,function*({key:r}){const n=yield fn({jwk:r});return`${LP}${n}`})}getPublicKey(t){return ou(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(t){return ou(this,arguments,void 0,function*({key:r}){var n;if(!TZ(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield fn({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(t){return ou(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(t){return ou(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:t}){var r;const n=(r=L_[t])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:t}){const r=t.alg,n=t.crv;for(const s in L_){const i=L_[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(t){return ou(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};function EY(e){return VX(e)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const y3=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function m3(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const AY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!AY)throw new Error("Non little-endian hardware is not supported");function gx(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function GA(e){if(typeof e=="string")e=gx(e);else if(m3(e))e=e.slice();else throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function SY(e,t){if(!m3(e))throw new Error("Uint8Array expected");if(e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function xY(e){return e!=null&&typeof e=="object"&&(e instanceof Uint8Array||e.constructor.name==="Uint8Array")}function $Y(e,...t){if(!xY(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function WP(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function DY(e,t){$Y(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const In=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class CY{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=GA(t),SY(t,32);const r=In(t,0),n=In(t,2),s=In(t,4),i=In(t,6),o=In(t,8),a=In(t,10),c=In(t,12),l=In(t,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=In(t,16+2*u)}process(t,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],y=o[8],_=o[9],b=In(t,r+0),v=In(t,r+2),g=In(t,r+4),m=In(t,r+6),w=In(t,r+8),x=In(t,r+10),S=In(t,r+12),E=In(t,r+14);let A=i[0]+(b&8191),$=i[1]+((b>>>13|v<<3)&8191),I=i[2]+((v>>>10|g<<6)&8191),T=i[3]+((g>>>7|m<<9)&8191),R=i[4]+((m>>>4|w<<12)&8191),L=i[5]+(w>>>1&8191),j=i[6]+((w>>>14|x<<2)&8191),U=i[7]+((x>>>11|S<<5)&8191),te=i[8]+((S>>>8|E<<8)&8191),z=i[9]+(E>>>5|s),ee=0,q=ee+A*a+$*(5*_)+I*(5*y)+T*(5*p)+R*(5*f);ee=q>>>13,q&=8191,q+=L*(5*h)+j*(5*d)+U*(5*u)+te*(5*l)+z*(5*c),ee+=q>>>13,q&=8191;let O=ee+A*c+$*a+I*(5*_)+T*(5*y)+R*(5*p);ee=O>>>13,O&=8191,O+=L*(5*f)+j*(5*h)+U*(5*d)+te*(5*u)+z*(5*l),ee+=O>>>13,O&=8191;let Y=ee+A*l+$*c+I*a+T*(5*_)+R*(5*y);ee=Y>>>13,Y&=8191,Y+=L*(5*p)+j*(5*f)+U*(5*h)+te*(5*d)+z*(5*u),ee+=Y>>>13,Y&=8191;let H=ee+A*u+$*l+I*c+T*a+R*(5*_);ee=H>>>13,H&=8191,H+=L*(5*y)+j*(5*p)+U*(5*f)+te*(5*h)+z*(5*d),ee+=H>>>13,H&=8191;let C=ee+A*d+$*u+I*l+T*c+R*a;ee=C>>>13,C&=8191,C+=L*(5*_)+j*(5*y)+U*(5*p)+te*(5*f)+z*(5*h),ee+=C>>>13,C&=8191;let B=ee+A*h+$*d+I*u+T*l+R*c;ee=B>>>13,B&=8191,B+=L*a+j*(5*_)+U*(5*y)+te*(5*p)+z*(5*f),ee+=B>>>13,B&=8191;let Z=ee+A*f+$*h+I*d+T*u+R*l;ee=Z>>>13,Z&=8191,Z+=L*c+j*a+U*(5*_)+te*(5*y)+z*(5*p),ee+=Z>>>13,Z&=8191;let Q=ee+A*p+$*f+I*h+T*d+R*u;ee=Q>>>13,Q&=8191,Q+=L*l+j*c+U*a+te*(5*_)+z*(5*y),ee+=Q>>>13,Q&=8191;let oe=ee+A*y+$*p+I*f+T*h+R*d;ee=oe>>>13,oe&=8191,oe+=L*u+j*l+U*c+te*a+z*(5*_),ee+=oe>>>13,oe&=8191;let fe=ee+A*_+$*y+I*p+T*f+R*h;ee=fe>>>13,fe&=8191,fe+=L*d+j*u+U*l+te*c+z*a,ee+=fe>>>13,fe&=8191,ee=(ee<<2)+ee|0,ee=ee+q|0,q=ee&8191,ee=ee>>>13,O+=ee,i[0]=q,i[1]=O,i[2]=Y,i[3]=H,i[4]=C,i[5]=B,i[6]=Z,i[7]=Q,i[8]=oe,i[9]=fe}finalize(){const{h:t,pad:r}=this,n=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=s,s=t[a]>>>13,t[a]&=8191;t[0]+=s*5,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,n[0]=t[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=t[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)t[a]=t[a]&i|n[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+r[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+r[a]|0)+(o>>>16)|0,t[a]=o&65535}update(t){WP(this);const{buffer:r,blockLen:n}=this;t=GA(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(t,i);continue}r.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){WP(this),DY(t,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)t[i++]=n[o]>>>0,t[i++]=n[o]>>>8;return t}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}}function PY(e){const t=(n,s)=>e(s).update(GA(n)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}PY(e=>new CY(e));const kY=gx("expand 16-byte k"),OY=gx("expand 32-byte k");y3(kY);y3(OY);var Km;(function(e){e.authentication="authentication",e.assertionMethod="assertionMethod",e.keyAgreement="keyAgreement",e.capabilityInvocation="capabilityInvocation",e.capabilityDelegation="capabilityDelegation"})(Km||(Km={}));const Yn={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};let Yt=class g3{constructor({method:t,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${t}:${r}`,this.method=t,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(t){if(!t)return null;const r=g3.DID_URI_PATTERN.exec(t);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,c={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(c.path=i),o&&(c.query=o.slice(1)),a&&(c.fragment=a.slice(1)),o){const l={},u=o.slice(1).split("&");for(const d of u){const[h,f]=d.split("=");l[h]=f}c.params=l}return c}};Yt.METHOD_PATTERN="([a-z0-9]+)";Yt.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Yt.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Yt.PCT_ENCODED_PATTERN})`;Yt.METHOD_ID_PATTERN=`((?:${Yt.ID_CHAR_PATTERN}*:)*(${Yt.ID_CHAR_PATTERN}+))`;Yt.PATH_PATTERN="(/[^#?]*)?";Yt.QUERY_PATTERN="([?][^#]*)?";Yt.FRAGMENT_PATTERN="(#.*)?";Yt.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Yt.METHOD_PATTERN}):(?<id>${Yt.METHOD_ID_PATTERN})(?<path>${Yt.PATH_PATTERN})(?<query>${Yt.QUERY_PATTERN})(?<fragment>${Yt.FRAGMENT_PATTERN})$`);let nt=class v3 extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v3)}};var Je;(function(e){e.InvalidDid="invalidDid",e.MethodNotSupported="methodNotSupported",e.InternalError="internalError",e.InvalidDidDocument="invalidDidDocument",e.InvalidDidDocumentLength="invalidDidDocumentLength",e.InvalidDidUrl="invalidDidUrl",e.InvalidPreviousDidProof="invalidPreviousDidProof",e.InvalidPublicKey="invalidPublicKey",e.InvalidPublicKeyLength="invalidPublicKeyLength",e.InvalidPublicKeyType="invalidPublicKeyType",e.InvalidSignature="invalidSignature",e.NotFound="notFound",e.RepresentationNotSupported="representationNotSupported",e.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(Je||(Je={}));function TY(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var IY=TY,BY=IY;const FY=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let NY=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},RY=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return w3(this,t)}},MY=class{constructor(t){this.decoders=t}or(t){return w3(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const w3=(e,t)=>new MY({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let jY=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new NY(t,r,n),this.decoder=new RY(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const b3=({name:e,prefix:t,encode:r,decode:n})=>new jY(e,t,r,n),_3=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=BY(r,t);return b3({prefix:e,name:t,encode:n,decode:i=>FY(s(i))})},UY=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},KY=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},hs=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>b3({prefix:t,name:e,encode(s){return KY(s,n,r)},decode(s){return UY(s,n,r,e)}});hs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});hs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});hs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});hs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});hs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});hs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});hs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});hs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const JP=hs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Pg=_3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});_3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});hs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});hs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const au=hs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});hs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function LY(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function qY(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function XA(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Xh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},GP=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const kg=new TextEncoder,fd=new TextDecoder;let ut=class Ci{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Ci(t,"ArrayBuffer")}static asyncIterable(t){if(!qY(t))throw new TypeError("Input must be of type AsyncIterable.");return new Ci(t,"AsyncIterable")}static base32Z(t){return new Ci(t,"Base32Z")}static base58Btc(t){return new Ci(t,"Base58Btc")}static base64Url(t){return new Ci(t,"Base64Url")}static bufferSource(t){return new Ci(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ci(t,"Hex")}static multibase(t){return new Ci(t,"Multibase")}static object(t){return new Ci(t,"Object")}static string(t){return new Ci(t,"String")}static uint8Array(t){return new Ci(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Pg.baseDecode(this.data).buffer;case"Base64Url":return au.baseDecode(this.data).buffer;case"BufferSource":{if(XA(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return LY(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Xh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return JP.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return Pg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Pg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return au.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return au.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=kg.encode(t);return au.baseEncode(r)}case"String":{const t=kg.encode(this.data);return au.baseEncode(t)}case"Uint8Array":return au.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,n,s;return Xh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=GP(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ci.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ci.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=au.baseDecode(this.data),r=fd.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=fd.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Xh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return fd.decode(this.data);case"Base64Url":{const t=au.baseDecode(this.data);return fd.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return fd.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,n,s;return Xh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=GP(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=fd.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=fd.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return JP.baseDecode(this.data);case"Base58Btc":return Pg.baseDecode(this.data);case"Base64Url":return au.baseDecode(this.data);case"BufferSource":{const t=XA(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return kg.encode(t)}case"String":return kg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Xh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var VY=E3,XP=128,HY=127,zY=~HY,WY=Math.pow(2,31);function E3(e,t,r){t=t||[],r=r||0;for(var n=r;e>=WY;)t[r++]=e&255|XP,e/=128;for(;e&zY;)t[r++]=e&255|XP,e>>>=7;return t[r]=e|0,E3.bytes=r-n+1,t}var JY=ZA,GY=128,ZP=127;function ZA(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw ZA.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&ZP)<<s:(o&ZP)*Math.pow(2,s),s+=7}while(o>=GY);return ZA.bytes=i-n,r}var XY=Math.pow(2,7),ZY=Math.pow(2,14),YY=Math.pow(2,21),QY=Math.pow(2,28),eQ=Math.pow(2,35),tQ=Math.pow(2,42),rQ=Math.pow(2,49),nQ=Math.pow(2,56),iQ=Math.pow(2,63),sQ=function(e){return e<XY?1:e<ZY?2:e<YY?3:e<QY?4:e<eQ?5:e<tQ?6:e<rQ?7:e<nQ?8:e<iQ?9:10},oQ={encode:VY,decode:JY,encodingLength:sQ},jw=oQ;const YP=(e,t=0)=>[jw.decode(e,t),jw.decode.bytes],aQ=(e,t,r=0)=>(jw.encode(e,t,r),t),uQ=e=>jw.encodingLength(e);let Ys=class qc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=qc.codeToName.has(n)?n:qc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=uQ(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),aQ(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=YP(r);return n}static getCodeFromName(t){const{name:r}=t,n=qc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=qc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){qc.codeToName.set(t.code,t.name),qc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=YP(r),i=qc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Ys.codeToName=new Map;Ys.nameToCode=new Map;Ys.registerCodec({code:237,name:"ed25519-pub"});Ys.registerCodec({code:4864,name:"ed25519-priv"});Ys.registerCodec({code:236,name:"x25519-pub"});Ys.registerCodec({code:4866,name:"x25519-priv"});Ys.registerCodec({code:231,name:"secp256k1-pub"});Ys.registerCodec({code:4865,name:"secp256k1-priv"});function A3(e){Object.keys(e).forEach(t=>{e[t]===void 0?delete e[t]:typeof e[t]=="object"&&A3(e[t])})}var pd=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let cQ=class{constructor(){this.store=new Map}clear(){return pd(this,void 0,void 0,function*(){this.store.clear()})}close(){return pd(this,void 0,void 0,function*(){})}delete(t){return pd(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return pd(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return pd(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return pd(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return pd(this,void 0,void 0,function*(){this.store.set(t,r)})}};var lQ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let S3=class{static digest({data:t}){return lQ(this,void 0,void 0,function*(){return Ol(t)})}},vx=class{};var dQ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let fQ=class extends vx{digest({algorithm:t,data:r}){return dQ(this,void 0,void 0,function*(){switch(t){case"SHA-256":return yield S3.digest({data:r})}})}};function pQ(e){const t=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=t(n[o]);return i}return n},r=t(e);return JSON.stringify(r)}var hQ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const QP="urn:jwk:";function cr({jwk:e}){return hQ(this,void 0,void 0,function*(){const t=e.kty;let r;if(t==="EC")r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(t==="oct")r={k:e.k,kty:e.kty};else if(t==="OKP")r={crv:e.crv,kty:e.kty,x:e.x};else if(t==="RSA")r={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${t}`);A3(r);const n=pQ(r),s=ut.string(n).toUint8Array(),i=yield S3.digest({data:s});return ut.uint8Array(i).toBase64Url()})}function cf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="EC"||typeof e.d!="string"||typeof e.x!="string")}function wx(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e)||"d"in e||e.kty!=="EC"||typeof e.x!="string")}function lf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="OKP"||typeof e.d!="string"||typeof e.x!="string")}function bx(e){return!(!e||typeof e!="object"||"d"in e||!("kty"in e&&"crv"in e&&"x"in e)||e.kty!=="OKP"||typeof e.x!="string")}function yQ(e){if(!e||typeof e!="object")return!1;switch(e.kty){case"EC":case"OKP":case"RSA":return"d"in e;case"oct":return"k"in e;default:return!1}}var Bn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},mQ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let us=class ea{static adjustSignatureToLowS({signature:t}){return Bn(this,void 0,void 0,function*(){const r=Ve.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return Bn(this,void 0,void 0,function*(){const r=yield ea.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"secp256k1",d:ut.uint8Array(t).toBase64Url(),x:ut.uint8Array(r.x).toBase64Url(),y:ut.uint8Array(r.y).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return Bn(this,void 0,void 0,function*(){const r=yield ea.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"secp256k1",x:ut.uint8Array(r.x).toBase64Url(),y:ut.uint8Array(r.y).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:t}){return Bn(this,void 0,void 0,function*(){return Ve.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return Bn(this,void 0,void 0,function*(){const r=yield ea.privateKeyToBytes({privateKey:t}),n=yield ea.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:ut.uint8Array(n.x).toBase64Url(),y:ut.uint8Array(n.y).toBase64Url()};return s.kid=yield cr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return Bn(this,void 0,void 0,function*(){return Ve.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return Bn(this,void 0,void 0,function*(){return Ve.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return Bn(this,void 0,void 0,function*(){const t=Ve.utils.randomPrivateKey(),r=yield ea.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield cr({jwk:r}),r})}static getPublicKey({key:t}){var r;return Bn(this,void 0,void 0,function*(){if(!(cf(t)&&t.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let n=mQ(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield cr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return Bn(this,void 0,void 0,function*(){if(!cf(t))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ut.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Bn(this,void 0,void 0,function*(){if(!(wx(t)&&t.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=ut.base64Url(t.x).toUint8Array(),s=ut.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Bn(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield ea.privateKeyToBytes({privateKey:t}),s=yield ea.publicKeyToBytes({publicKey:r});return Ve.getSharedSecret(n,s,!0).slice(1)})}static sign({data:t,key:r}){return Bn(this,void 0,void 0,function*(){const n=yield ea.privateKeyToBytes({privateKey:r}),s=Ol(t);return Ve.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return Bn(this,void 0,void 0,function*(){return Ve.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return Bn(this,void 0,void 0,function*(){try{Ve.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return Bn(this,void 0,void 0,function*(){const s=yield ea.publicKeyToBytes({publicKey:t}),i=Ol(n);return Ve.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return Bn(this,void 0,void 0,function*(){t.byteLength===32&&(t=Ve.getPublicKey(t));const r=Ve.ProjectivePoint.fromHex(t),n=Er(r.x,32),s=Er(r.y,32);return{x:n,y:s}})}};var Fn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},gQ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Vs=class ta{static adjustSignatureToLowS({signature:t}){return Fn(this,void 0,void 0,function*(){const r=He.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return Fn(this,void 0,void 0,function*(){const r=yield ta.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"P-256",d:ut.uint8Array(t).toBase64Url(),x:ut.uint8Array(r.x).toBase64Url(),y:ut.uint8Array(r.y).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return Fn(this,void 0,void 0,function*(){const r=yield ta.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"P-256",x:ut.uint8Array(r.x).toBase64Url(),y:ut.uint8Array(r.y).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:t}){return Fn(this,void 0,void 0,function*(){return He.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return Fn(this,void 0,void 0,function*(){const r=yield ta.privateKeyToBytes({privateKey:t}),n=yield ta.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:ut.uint8Array(n.x).toBase64Url(),y:ut.uint8Array(n.y).toBase64Url()};return s.kid=yield cr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return Fn(this,void 0,void 0,function*(){return He.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return Fn(this,void 0,void 0,function*(){return He.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return Fn(this,void 0,void 0,function*(){const t=He.utils.randomPrivateKey(),r=yield ta.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield cr({jwk:r}),r})}static getPublicKey({key:t}){var r;return Fn(this,void 0,void 0,function*(){if(!(cf(t)&&t.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let n=gQ(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield cr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return Fn(this,void 0,void 0,function*(){if(!cf(t))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ut.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Fn(this,void 0,void 0,function*(){if(!(wx(t)&&t.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=ut.base64Url(t.x).toUint8Array(),s=ut.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Fn(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield ta.privateKeyToBytes({privateKey:t}),s=yield ta.publicKeyToBytes({publicKey:r});return He.getSharedSecret(n,s,!0).slice(1)})}static sign({data:t,key:r}){return Fn(this,void 0,void 0,function*(){const n=yield ta.privateKeyToBytes({privateKey:r}),s=Ol(t);return He.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return Fn(this,void 0,void 0,function*(){return He.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return Fn(this,void 0,void 0,function*(){try{He.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return Fn(this,void 0,void 0,function*(){const s=yield ta.publicKeyToBytes({publicKey:t}),i=Ol(n);return He.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return Fn(this,void 0,void 0,function*(){t.byteLength===32&&(t=He.getPublicKey(t));const r=He.ProjectivePoint.fromHex(t),n=Er(r.x,32),s=Er(r.y,32);return{x:n,y:s}})}};var Zh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let ek=class extends vx{computePublicKey({key:t}){return Zh(this,void 0,void 0,function*(){if(!cf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield us.computePublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Vs.computePublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return Zh(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const r=yield us.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Vs.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:t}){return Zh(this,void 0,void 0,function*(){if(!cf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield us.getPublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Vs.getPublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}sign({key:t,data:r}){return Zh(this,void 0,void 0,function*(){if(!cf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":return yield us.sign({key:t,data:r});case"P-256":return yield Vs.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:n}){return Zh(this,void 0,void 0,function*(){if(!wx(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(t.crv){case"secp256k1":return yield us.verify({key:t,signature:r,data:n});case"P-256":return yield Vs.verify({key:t,signature:r,data:n});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}};var xs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},vQ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Ui=class Vc{static bytesToPrivateKey({privateKeyBytes:t}){return xs(this,void 0,void 0,function*(){const r=Zt.getPublicKey(t),n={crv:"Ed25519",d:ut.uint8Array(t).toBase64Url(),kty:"OKP",x:ut.uint8Array(r).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return xs(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:ut.uint8Array(t).toBase64Url()};return r.kid=yield cr({jwk:r}),r})}static computePublicKey({key:t}){return xs(this,void 0,void 0,function*(){const r=yield Vc.privateKeyToBytes({privateKey:t}),n=Zt.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:ut.uint8Array(n).toBase64Url()};return s.kid=yield cr({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:t}){return xs(this,void 0,void 0,function*(){const r=yield Vc.privateKeyToBytes({privateKey:t}),n=S0(r),s=Zn.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:ut.uint8Array(n).toBase64Url(),x:ut.uint8Array(s).toBase64Url()};return i.kid=yield cr({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:t}){return xs(this,void 0,void 0,function*(){const r=yield Vc.publicKeyToBytes({publicKey:t});if(!(yield Vc.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const s=A0(r),i={kty:"OKP",crv:"X25519",x:ut.uint8Array(s).toBase64Url()};return i.kid=yield cr({jwk:i}),i})}static generateKey(){return xs(this,void 0,void 0,function*(){const t=Zt.utils.randomPrivateKey(),r=yield Vc.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield cr({jwk:r}),r})}static getPublicKey({key:t}){var r;return xs(this,void 0,void 0,function*(){if(!(lf(t)&&t.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let n=vQ(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield cr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return xs(this,void 0,void 0,function*(){if(!lf(t))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ut.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return xs(this,void 0,void 0,function*(){if(!bx(t))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ut.base64Url(t.x).toUint8Array()})}static sign({key:t,data:r}){return xs(this,void 0,void 0,function*(){const n=yield Vc.privateKeyToBytes({privateKey:t});return Zt.sign(r,n)})}static validatePublicKey({publicKeyBytes:t}){return xs(this,void 0,void 0,function*(){try{Zt.ExtendedPoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return xs(this,void 0,void 0,function*(){const s=yield Vc.publicKeyToBytes({publicKey:t});return Zt.verify(r,n,s)})}};var Yh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let wQ=class extends vx{computePublicKey({key:t}){return Yh(this,void 0,void 0,function*(){if(!lf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":{const r=yield Ui.computePublicKey({key:t});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return Yh(this,void 0,void 0,function*(){switch(t){case"Ed25519":{const r=yield Ui.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:t}){return Yh(this,void 0,void 0,function*(){if(!lf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":{const r=yield Ui.getPublicKey({key:t});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}sign({key:t,data:r}){return Yh(this,void 0,void 0,function*(){if(!lf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":return yield Ui.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:n}){return Yh(this,void 0,void 0,function*(){if(!bx(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(t.crv){case"Ed25519":return yield Ui.verify({key:t,signature:r,data:n});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}};var uu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const q_={Ed25519:{implementation:wQ,names:["Ed25519"]},secp256k1:{implementation:ek,names:["ES256K","secp256k1"]},secp256r1:{implementation:ek,names:["ES256","secp256r1"]},"SHA-256":{implementation:fQ,names:["SHA-256"]}};let Xu=class{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=(r=t==null?void 0:t.keyStore)!==null&&r!==void 0?r:new cQ}digest({algorithm:t,data:r}){return uu(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:t}).digest({algorithm:t,data:r})})}exportKey({keyUri:t}){return uu(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:t})})}generateKey({algorithm:t}){return uu(this,void 0,void 0,function*(){const n=yield this.getAlgorithm({algorithm:t}).generateKey({algorithm:t});if((n==null?void 0:n.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const s=`${QP}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:t}){return uu(this,void 0,void 0,function*(){const r=yield cr({jwk:t});return`${QP}${r}`})}getPublicKey({keyUri:t}){return uu(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:t}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:t}){var r;return uu(this,void 0,void 0,function*(){if(!yQ(t))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const n=structuredClone(t);(r=n.kid)!==null&&r!==void 0||(n.kid=yield cr({jwk:n}));const s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:t,data:r}){return uu(this,void 0,void 0,function*(){const n=yield this.getPrivateKey({keyUri:t}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:t,signature:r,data:n}){return uu(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:s}).verify({key:t,signature:r,data:n})})}getAlgorithm({algorithm:t}){var r;const n=(r=q_[t])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:t}){const r=t.alg,n=t.crv;for(const s in q_){const i=q_[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:t}){return uu(this,void 0,void 0,function*(){const r=yield this._keyStore.get(t);if(!r)throw new Error(`Key not found: ${t}`);return r})}};function bQ(e){const t={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(e.alg&&Object.values(t).includes(e.alg))return e.alg;if(e.crv&&Object.keys(t).includes(e.crv))return t[e.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${e.alg}, crv=${e.crv}. Supported 'alg' values: ${Object.values(t).join(", ")}. Supported 'crv' values: ${Object.keys(t).join(", ")}.`)}var Ec=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},_Q=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let x3=class By{static bytesToPrivateKey({privateKeyBytes:t}){return Ec(this,void 0,void 0,function*(){const r=Zn.getPublicKey(t),n={kty:"OKP",crv:"X25519",d:ut.uint8Array(t).toBase64Url(),x:ut.uint8Array(r).toBase64Url()};return n.kid=yield cr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return Ec(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:ut.uint8Array(t).toBase64Url()};return r.kid=yield cr({jwk:r}),r})}static computePublicKey({key:t}){return Ec(this,void 0,void 0,function*(){const r=yield By.privateKeyToBytes({privateKey:t}),n=Zn.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:ut.uint8Array(n).toBase64Url()};return s.kid=yield cr({jwk:s}),s})}static generateKey(){return Ec(this,void 0,void 0,function*(){const t=Zn.utils.randomPrivateKey(),r=yield By.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield cr({jwk:r}),r})}static getPublicKey({key:t}){var r;return Ec(this,void 0,void 0,function*(){if(!(lf(t)&&t.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let n=_Q(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield cr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return Ec(this,void 0,void 0,function*(){if(!lf(t))throw new Error("X25519: The provided key is not a valid OKP private key.");return ut.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Ec(this,void 0,void 0,function*(){if(!bx(t))throw new Error("X25519: The provided key is not a valid OKP public key.");return ut.base64Url(t.x).toUint8Array()})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Ec(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield By.privateKeyToBytes({privateKey:t}),s=yield By.publicKeyToBytes({publicKey:r});return Zn.getSharedSecret(n,s)})}};function xo(e){if(typeof e=="string"&&e.length!==0)return e.split("#").pop()}function $3({didDocument:e}){var t,r;if(!e)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(t=e.verificationMethod)===null||t===void 0?void 0:t.filter(YA))!==null&&r!==void 0?r:[]),Object.keys(Km).forEach(s=>{var i,o;n.push(...(o=(i=e[s])===null||i===void 0?void 0:i.filter(YA))!==null&&o!==void 0?o:[])}),n}function EQ({didDocument:e}){const r=$3({didDocument:e}).map(n=>n.type);return[...new Set(r)]}function AQ({didDocument:e,methodId:t}){const r=[];return Object.keys(Km).forEach(n=>{if(Array.isArray(e[n])){const s=e[n],i=xo(t);s.some(a=>{const c=xo(a)===i,l=YA(a)&&xo(a.id)===i;return c||l})&&r.push(n)}}),r}function YA(e){return!(!e||typeof e!="object"||e===null||!("id"in e&&"type"in e&&"controller"in e)||typeof e.id!="string"||typeof e.type!="string"||typeof e.controller!="string")}function D3({keyBytes:e,multicodecCode:t,multicodecName:r}){const n=Ys.addPrefix({code:t,data:e,name:r}),s=ut.uint8Array(n).toBase58Btc();return ut.base58Btc(s).toMultibase()}function tk({multibaseKeyId:e}){try{const t=ut.multibase(e).toBase58Btc(),r=ut.base58Btc(t).toUint8Array(),{code:n,data:s,name:i}=Ys.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new nt(Je.InvalidDid,`Invalid multibase identifier: ${e}`)}}var Qh=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Il=class C3{constructor({uri:t,document:r,metadata:n,keyManager:s}){this.uri=t,this.document=r,this.metadata=n,this.keyManager=s}export(){return Qh(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let t={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}t.privateKeys=r}return t})}getSigner(t){return Qh(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(c=>{var l,u;return xo(c.id)===((l=xo(t==null?void 0:t.methodId))!==null&&l!==void 0?l:xo((u=this.document.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(n&&n.publicKeyJwk))throw new nt(Je.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:bQ(i),keyId:n.id,sign(c){return Qh(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(c){return Qh(this,arguments,void 0,function*({data:l,signature:u}){return yield o.verify({data:l,key:i,signature:u})})}}})}static import(t){return Qh(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Xu}){var s;const i=$3({didDocument:r.document});if(i.length===0)throw new nt(Je.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const c=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:c})}return new C3({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const rk="0123456789abcdef",P3=[];for(let e=0;e<256;e++)P3[e]=rk[e>>4&15]+rk[e&15];const SQ=e=>{const t=e.length;let r="",n=0;for(;n<t;)r+=P3[e[n++]];return r},xQ=(e,t=0)=>{const r=e.length||0;if(!t){let o=r;for(;o--;)t+=e[o].length}const n=new Uint8Array(t);let s=t,i=r;for(;i--;)s-=e[i].length,n.set(e[i],s);return n};var nk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$Q=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Og=0;Og<nk.length;Og++)$Q[nk.charCodeAt(Og)]=Og;const DQ=new TextDecoder,k3=(e,t)=>DQ.decode(e),CQ=new TextEncoder,Zu=e=>CQ.encode(e),ik=typeof window<"u"?window:self,sk=ik.crypto||ik.msCrypto||{};sk.subtle||sk.webkitSubtle;function x0(e){const t=e<0?1:0;return e=Math.abs(Number(e||1)),Math.floor(Math.log10(e))+1+t}function O3(e){return ArrayBuffer.isView(e)?"arraybufferview":Array.isArray(e)?"array":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof Set?"set":e instanceof Map?"map":e instanceof String?"string":e instanceof ArrayBuffer?"arraybuffer":typeof e}function Jt(e,t,r){const n=[];let s=null;return Jt._encode(n,e),s=xQ(n),Jt.bytes=s.length,ArrayBuffer.isView(t)?(t.set(s,r),t):s}Jt.bytes=-1;Jt._floatConversionDetected=!1;Jt._encode=function(e,t){if(t!=null)switch(O3(t)){case"object":Jt.dict(e,t);break;case"map":Jt.dictMap(e,t);break;case"array":Jt.list(e,t);break;case"set":Jt.listSet(e,t);break;case"string":Jt.string(e,t);break;case"number":Jt.number(e,t);break;case"boolean":Jt.number(e,t);break;case"arraybufferview":Jt.buffer(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":Jt.buffer(e,new Uint8Array(t));break}};const o1=new Uint8Array([101]),T3=new Uint8Array([100]),I3=new Uint8Array([108]);Jt.buffer=function(e,t){e.push(Zu(t.length+":"),t)};Jt.string=function(e,t){e.push(Zu(Zu(t).byteLength+":"+t))};Jt.number=function(e,t){if(Number.isInteger(t))return e.push(Zu("i"+BigInt(t)+"e"));const r=2147483648,n=t/r<<0,s=t%r<<0,i=n*r+s;e.push(Zu("i"+i+"e")),i!==t&&!Jt._floatConversionDetected&&(Jt._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};Jt.dict=function(e,t){e.push(T3);let r=0,n;const s=Object.keys(t).sort(),i=s.length;for(;r<i;r++)n=s[r],t[n]!=null&&(Jt.string(e,n),Jt._encode(e,t[n]));e.push(o1)};Jt.dictMap=function(e,t){e.push(T3);const r=Array.from(t.keys()).sort();for(const n of r)t.get(n)!=null&&(ArrayBuffer.isView(n)?Jt._encode(e,n):Jt.string(e,String(n)),Jt._encode(e,t.get(n)));e.push(o1)};Jt.list=function(e,t){let r=0;const n=t.length;for(e.push(I3);r<n;r++)t[r]!=null&&Jt._encode(e,t[r]);e.push(o1)};Jt.listSet=function(e,t){e.push(I3);for(const r of t)r!=null&&Jt._encode(e,r);e.push(o1)};const PQ=105,kQ=58,OQ=100,TQ=108,_x=101;function B3(e,t,r){let n=0,s=1;for(let i=t;i<r;i++){const o=e[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===t&&o===43)){if(i===t&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function dt(e,t,r,n){return e==null||e.length===0?null:(typeof t!="number"&&n==null&&(n=t,t=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),dt.position=0,dt.encoding=n||null,dt.data=ArrayBuffer.isView(e)?new Uint8Array(e.slice(t,r)):Zu(e),dt.bytes=dt.data.length,dt.next())}dt.bytes=0;dt.position=0;dt.data=null;dt.encoding=null;dt.next=function(){switch(dt.data[dt.position]){case OQ:return dt.dictionary();case TQ:return dt.list();case PQ:return dt.integer();default:return dt.buffer()}};dt.find=function(e){let t=dt.position;const r=dt.data.length,n=dt.data;for(;t<r;){if(n[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")};dt.dictionary=function(){dt.position++;const e={};for(;dt.data[dt.position]!==_x;){const t=dt.buffer();let r=k3(t);r.includes("")&&(r=SQ(t)),e[r]=dt.next()}return dt.position++,e};dt.list=function(){dt.position++;const e=[];for(;dt.data[dt.position]!==_x;)e.push(dt.next());return dt.position++,e};dt.integer=function(){const e=dt.find(_x),t=B3(dt.data,dt.position+1,e);return dt.position+=e+1-dt.position,t};dt.buffer=function(){let e=dt.find(kQ);const t=B3(dt.data,dt.position,e),r=++e+t;return dt.position=r,dt.encoding?k3(dt.data.slice(e,r)):dt.data.slice(e,r)};function IQ(e){let t=2;for(const r of e)t+=$0(r);return t}function BQ(e){let t=2;for(const[r,n]of e){const s=Zu(r).byteLength;t+=x0(s)+1+s,t+=$0(n)}return t}function FQ(e){let t=2;const r=Object.keys(e);for(let n=0;n<r.length;n++){const s=Zu(r[n]).byteLength;t+=x0(s)+1+s,t+=$0(e[r[n]])}return t}function NQ(e){const t=Zu(e).byteLength;return x0(t)+1+t}function RQ(e){const t=e.byteLength-e.byteOffset;return x0(t)+1+t}function $0(e){if(e==null)return 0;const r=O3(e);switch(r){case"arraybufferview":return RQ(e);case"string":return NQ(e);case"array":case"set":return IQ(e);case"number":return 1+x0(Math.floor(e))+1;case"bigint":return 1+e.toString().length+1;case"object":return FQ(e);case"map":return BQ(e);default:throw new TypeError(`Unsupported value of type "${r}"`)}}const MQ=$0,Xp={encode:Jt,decode:dt,byteLength:$0,encodingLength:MQ},jQ=/^(\d{1,3}\.){3,3}\d{1,3}$/,ok=4,UQ=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,Tg=16,ka={name:"v4",size:ok,isFormat:e=>jQ.test(e),encode(e,t,r){r=~~r,t=t||new Uint8Array(r+ok);const n=e.length;let s=0;for(let i=0;i<n;){const o=e.charCodeAt(i++);o===46?(t[r++]=s,s=0):s=s*10+(o-48)}return t[r]=s,t},decode(e,t){return t=~~t,`${e[t++]}.${e[t++]}.${e[t++]}.${e[t]}`}},El={name:"v6",size:Tg,isFormat:e=>e.length>0&&UQ.test(e),encode(e,t,r){r=~~r;let n=r+Tg,s=-1,i=0,o=0,a=!0,c=!1;t=t||new Uint8Array(r+Tg);for(let l=0;l<e.length;l++){let u=e.charCodeAt(l);u===58?(a?s!==-1?(r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2):r<n&&(s=r):(c===!0?(r<n&&(t[r]=o),r++):(r<n&&(t[r]=i>>8),r<n-1&&(t[r+1]=i&255),r+=2),i=0,o=0),a=!0,c=!1):u===46?(r<n&&(t[r]=o),r++,o=0,i=0,a=!1,c=!0):(a=!1,u>=97?u-=87:u>=65?u-=55:(u-=48,o=o*10+u),i=(i<<4)+u)}if(a===!1)c===!0?(r<n&&(t[r]=o),r++):(r<n&&(t[r]=i>>8),r<n-1&&(t[r+1]=i&255),r+=2);else if(s===0)r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let l=Math.min(r-1,n-1);l>=s+2;l--)t[l]=t[l-2];t[s]=0,t[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)t[--n]=r<n&&r>s?t[--r]:0;else for(;r<n;)t[r++]=0;return t},decode(e,t){t=~~t;let r="";for(let n=0;n<Tg;n+=2)n!==0&&(r+=":"),r+=(e[t+n]<<8|e[t+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function F3(e){if(ka.isFormat(e))return ka.size;if(El.isFormat(e))return El.size;throw Error(`Invalid ip address: ${e}`)}function KQ(e){return F3(e)===ka.size?1:2}function LQ(e,t,r){r=~~r;const n=F3(e);return typeof t=="function"&&(t=t(r+n)),n===ka.size?ka.encode(e,t,r):El.encode(e,t,r)}function qQ(e,t,r){if(t=~~t,r=r||e.length-t,r===ka.size)return ka.decode(e,t,r);if(r===El.size)return El.decode(e,t,r);throw Error(`Invalid buffer size needs to be ${ka.size} for v4 or ${El.size} for v6.`)}function a1(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e}function Lm(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}function VQ(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e}function HQ(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e}function N3(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e}function R3(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function zQ(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`}function ak(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}const Ex=55296,qm=56320;function M3(e){let t=0;const r=e.length;for(let n=0;n<r;n+=1){const s=e.charCodeAt(n);if(s<=127)t+=1;else if(s<=2047)t+=2;else if((s&63488)!==Ex)t+=3;else{const i=n+1;i===r||s>=qm||(e.charCodeAt(i)&64512)!==qm?t+=3:(n=i,t+=4)}}return t}function Vm(e,t,r){const n=e.length;r==null&&(r=0),t===void 0&&(t=new Uint8Array(M3(e)+r));let s=r;for(let i=0;i<n;i+=1){let o=e.charCodeAt(i);if(o<=127)t[s++]=o;else if(o<=2047)t[s++]=192|(o&1984)>>6,t[s++]=128|o&63;else if((o&63488)!==Ex)t[s++]=224|(o&61440)>>12,t[s++]=128|(o&4032)>>6,t[s++]=128|o&63;else{const a=i+1;if(a===n||o>=qm)t[s++]=239,t[s++]=191,t[s++]=189;else{const c=e.charCodeAt(a);(c&64512)!==qm?(t[s++]=239,t[s++]=191,t[s++]=189):(i=a,o=65536|(o&1023)<<10|c&1023,t[s++]=240|(o&1835008)>>18,t[s++]=128|(o&258048)>>12,t[s++]=128|(o&4032)>>6,t[s++]=128|o&63)}}}return Vm.bytes=s-r,t}Vm.bytes=0;function D0(e,t,r){let n="";t==null&&(t=0),r==null&&(r=e.length);for(let s=t;s<r;){const i=e[s++];let o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|e[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(e[s++]&63)<<12|(e[s++]&63)<<6|e[s++]&63)-65536;const a=Ex|o>>10&1023;n+=String.fromCharCode(a),o=qm|o&1023}else o=(i&15)<<12|(e[s++]&63)<<6|e[s++]&63;n+=String.fromCharCode(o)}return D0.bytes=r-t,n}D0.bytes=0;const Af=e=>e instanceof Uint8Array;function ql(e){return typeof e=="string"?M3(e):e.byteLength}function Ax(e){return e instanceof Uint8Array?e:Array.isArray(e)?new Uint8Array(e):Vm(e)}function Sx(e,t,r){if(typeof t!="string")throw new Error("unknown input type");return Vm(t,e,r),Vm.bytes}const Fy={},j3=new Array(255);for(let e=0;e<=15;e+=1){const t=e.toString(16),r=t.toUpperCase();for(let n=0;n<=15;n+=1){const s=n.toString(16),i=s.toUpperCase(),o=e<<4|n,a=`${t}${s}`;j3[o]=a,Fy[a]=o,Fy[`${r}${s}`]=o,Fy[`${t}${i}`]=o,Fy[`${r}${i}`]=o}}function WQ(e,t,r){let n="";for(let s=t;s<r;){const i=e[s++];n+=j3[i]}return n}function uk(e){return e.length>>>1}function JQ(e,t,r,n){let s=0;for(;r<n;){const i=t.substr(s,2),o=Fy[i];if(o===void 0)return;e[r++]=o,s+=2}return e}const GQ=Math.pow(2,24),XQ=Math.pow(2,16),ZQ=Math.pow(2,8),Mu=(e,t)=>e[t]*GQ+e[t+1]*XQ+e[t+2]*ZQ+e[t+3],Ot=(e,t)=>e[t]<<8|e[t+1],ju=(e,t,r)=>(t=+t,e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t,r+4),ct=(e,t,r)=>(e[r]=t>>8,e[r+1]=t&255,r+2);function Xs(e,t,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=t.length||n>=s?0:YQ(e,t,r,n,s)}function YQ(e,t,r,n,s){s-n>t.length-r&&(s=n+t.length-r);let i=s-n;const o=e.length-n;return i>o&&(i=o),(n!==0||s<e.length)&&(e=new Uint8Array(e.buffer,e.byteOffset+n,i)),t.set(e,r),i}const QQ=0,ck=32768,QA=32768,eee=~QA,U3=32768,tee=~U3;function vr({bytes:e=0,encode:t,decode:r,encodingLength:n}){return t.bytes=e,r.bytes=e,{encode:t,decode:r,encodingLength:n||(()=>e)}}const qe=vr({encode(e,t,r){t||(t=new Uint8Array(qe.encodingLength(e))),r||(r=0);const n=r,s=e.replace(/^\.|\.$/gm,"");if(s.length){const i=s.split(".");for(let o=0;o<i.length;o++){const a=Sx(t,i[o],r+1);t[r]=a,r+=a+1}}return t[r++]=0,qe.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=[];let n=t,s=0,i=0,o=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");const a=e[t++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");const c=Ot(e,t-1)-49152;if(c>=n)throw new Error("Cannot decode name (bad pointer)");t=c,n=c,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(t+a>e.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(D0(e,t,t+a)),t+=a,i+=o?0:a}}return qe.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(e){return e==="."||e===".."?1:ql(e.replace(/^\.|\.$/gm,""))+2}}),dn=vr({encode(e,t,r){t||(t=new Uint8Array(dn.encodingLength(e))),r||(r=0);const n=Sx(t,e,r+1);return t[r]=n,dn.encode.bytes=n+1,t},decode(e,t){t||(t=0);const r=e[t],n=D0(e,t+1,t+1+r);return dn.decode.bytes=r+1,n},encodingLength(e){return ql(e)+1}}),cp=vr({bytes:12,encode(e,t,r){t||(t=new Uint8Array(cp.encodingLength(e))),r||(r=0);const n=(e.flags||0)&32767,s=e.type==="response"?ck:QQ;return ct(t,e.id||0,r),ct(t,n|s,r+2),ct(t,e.questions.length,r+4),ct(t,e.answers.length,r+6),ct(t,e.authorities.length,r+8),ct(t,e.additionals.length,r+10),t},decode(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");const r=Ot(e,t+2);return{id:Ot(e,t),type:r&ck?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:HQ(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:VQ(r&15),questions:new Array(Ot(e,t+4)),answers:new Array(Ot(e,t+6)),authorities:new Array(Ot(e,t+8)),additionals:new Array(Ot(e,t+10))}},encodingLength(){return 12}}),Ov=vr({encode(e,t,r){t||(t=new Uint8Array(Ov.encodingLength(e))),r||(r=0);const n=e.length;return ct(t,n,r),Xs(e,t,r+2,0,n),Ov.encode.bytes=n+2,t},decode(e,t){t||(t=0);const r=Ot(e,t),n=e.slice(t+2,t+2+r);return Ov.decode.bytes=r+2,n},encodingLength(e){return e.length+2}}),Tv=vr({encode(e,t,r){return t||(t=new Uint8Array(Tv.encodingLength(e))),r||(r=0),qe.encode(e,t,r+2),ct(t,qe.encode.bytes,r),Tv.encode.bytes=qe.encode.bytes+2,t},decode(e,t){t||(t=0);const r=Ot(e,t),n=qe.decode(e,t+2);return Tv.decode.bytes=r+2,n},encodingLength(e){return qe.encodingLength(e)+2}}),Iv=vr({encode(e,t,r){t||(t=new Uint8Array(Iv.encodingLength(e))),r||(r=0);const n=r;return r+=2,qe.encode(e.mname,t,r),r+=qe.encode.bytes,qe.encode(e.rname,t,r),r+=qe.encode.bytes,ju(t,e.serial||0,r),r+=4,ju(t,e.refresh||0,r),r+=4,ju(t,e.retry||0,r),r+=4,ju(t,e.expire||0,r),r+=4,ju(t,e.minimum||0,r),r+=4,ct(t,r-n-2,n),Iv.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.mname=qe.decode(e,t),t+=qe.decode.bytes,n.rname=qe.decode(e,t),t+=qe.decode.bytes,n.serial=Mu(e,t),t+=4,n.refresh=Mu(e,t),t+=4,n.retry=Mu(e,t),t+=4,n.expire=Mu(e,t),t+=4,n.minimum=Mu(e,t),t+=4,Iv.decode.bytes=t-r,n},encodingLength(e){return 22+qe.encodingLength(e.mname)+qe.encodingLength(e.rname)}}),Bv=vr({encode(e,t,r){Array.isArray(e)||(e=[e]);for(let s=0;s<e.length;s++)if(typeof e[s]=="string"&&(e[s]=Ax(e[s])),!Af(e[s]))throw new Error("Must be a Buffer");t||(t=new Uint8Array(Bv.encodingLength(e))),r||(r=0);const n=r;return r+=2,e.forEach(function(s){t[r++]=s.length,Xs(s,t,r,0,s.length),r+=s.length}),ct(t,r-n-2,n),Bv.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t;let n=Ot(e,t);t+=2;const s=[];for(;n>0;){const i=e[t++];if(--n,n<i)throw new Error("Buffer overflow");s.push(e.slice(t,t+i)),t+=i,n-=i}return Bv.decode.bytes=t-r,s},encodingLength(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach(function(r){typeof r=="string"?t+=ql(r)+1:t+=r.length+1}),t}}),Fv=vr({encode(e,t,r){t||(t=new Uint8Array(Fv.encodingLength(e))),r||(r=0),typeof e=="string"&&(e=Ax(e)),e||(e=new Uint8Array(0));const n=r;r+=2;const s=e.length;return Xs(e,t,r,0,s),r+=s,ct(t,r-n-2,n),Fv.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n=Ot(e,t);t+=2;const s=e.slice(t,t+n);return t+=n,Fv.decode.bytes=t-r,s},encodingLength(e){return e?(Af(e)?e.length:ql(e))+2:2}}),Nv=vr({encode(e,t,r){t||(t=new Uint8Array(Nv.encodingLength(e))),r||(r=0);const n=r;return r+=2,dn.encode(e.cpu,t,r),r+=dn.encode.bytes,dn.encode(e.os,t,r),r+=dn.encode.bytes,ct(t,r-n-2,n),Nv.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.cpu=dn.decode(e,t),t+=dn.decode.bytes,n.os=dn.decode(e,t),t+=dn.decode.bytes,Nv.decode.bytes=t-r,n},encodingLength(e){return dn.encodingLength(e.cpu)+dn.encodingLength(e.os)+2}}),Ip=vr({encode(e,t,r){return t||(t=new Uint8Array(Ip.encodingLength(e))),r||(r=0),qe.encode(e,t,r+2),ct(t,qe.encode.bytes,r),Ip.encode.bytes=qe.encode.bytes+2,t},decode(e,t){t||(t=0);const r=qe.decode(e,t+2);return Ip.decode.bytes=qe.decode.bytes+2,r},encodingLength(e){return qe.encodingLength(e)+2}}),Rv=vr({encode(e,t,r){t||(t=new Uint8Array(Rv.encodingLength(e))),r||(r=0),ct(t,e.priority||0,r+2),ct(t,e.weight||0,r+4),ct(t,e.port||0,r+6),qe.encode(e.target,t,r+8);const n=qe.encode.bytes+6;return ct(t,n,r),Rv.encode.bytes=n+2,t},decode(e,t){t||(t=0);const r=Ot(e,t),n={};return n.priority=Ot(e,t+2),n.weight=Ot(e,t+4),n.port=Ot(e,t+6),n.target=qe.decode(e,t+8),Rv.decode.bytes=r+2,n},encodingLength(e){return 8+qe.encodingLength(e.target)}}),ol=vr({encode(e,t,r){const n=ol.encodingLength(e);return t||(t=new Uint8Array(ol.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=ol.ISSUER_CRITICAL),ct(t,n-2,r),r+=2,t[r]=e.flags||0,r+=1,dn.encode(e.tag,t,r),r+=dn.encode.bytes,Sx(t,e.value,r),r+=ql(e.value),ol.encode.bytes=n,t},decode(e,t){t||(t=0);const r=Ot(e,t);t+=2;const n=t,s={};return s.flags=e[t],t+=1,s.tag=dn.decode(e,t),t+=dn.decode.bytes,s.value=D0(e,t,n+r),s.issuerCritical=!!(s.flags&ol.ISSUER_CRITICAL),ol.decode.bytes=r+2,s},encodingLength(e){return dn.encodingLength(e.tag)+dn.encodingLength(e.value)+2}});ol.ISSUER_CRITICAL=128;const Mv=vr({encode(e,t,r){t||(t=new Uint8Array(Mv.encodingLength(e))),r||(r=0);const n=r;return r+=2,ct(t,e.preference||0,r),r+=2,qe.encode(e.exchange,t,r),r+=qe.encode.bytes,ct(t,r-n-2,n),Mv.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.preference=Ot(e,t),t+=2,n.exchange=qe.decode(e,t),t+=qe.decode.bytes,Mv.decode.bytes=t-r,n},encodingLength(e){return 4+qe.encodingLength(e.exchange)}}),K3=vr({encode(e,t,r){return t||(t=new Uint8Array(K3.encodingLength(e))),r||(r=0),ct(t,4,r),r+=2,ka.encode(e,t,r),t},decode(e,t){return t||(t=0),t+=2,ka.decode(e,t)},bytes:6}),jv=vr({encode(e,t,r){return t||(t=new Uint8Array(jv.encodingLength(e))),r||(r=0),ct(t,16,r),r+=2,El.encode(e,t,r),jv.encode.bytes=18,t},decode(e,t){t||(t=0),t+=2;const r=El.decode(e,t);return jv.decode.bytes=18,r},bytes:18}),ree=e=>new Uint8Array(e),Cu=vr({encode(e,t,r){t||(t=new Uint8Array(Cu.encodingLength(e))),r||(r=0);const n=r,s=ak(e.code);if(ct(t,s,r),r+=2,e.data)ct(t,e.data.length,r),r+=2,Xs(e.data,t,r),r+=e.data.length;else switch(s){case 8:{const i=e.sourcePrefixLength||0,o=e.family||KQ(e.ip),a=LQ(e.ip,ree),c=Math.ceil(i/8);ct(t,c+4,r),r+=2,ct(t,o,r),r+=2,t[r++]=i,t[r++]=e.scopePrefixLength||0,Xs(a,t,r,0,c),r+=c}break;case 11:e.timeout?(ct(t,2,r),r+=2,ct(t,e.timeout,r),r+=2):(ct(t,0,r),r+=2);break;case 12:{const i=e.length||0;ct(t,i,r),r+=2,t.fill(0,r,r+i),r+=i}break;case 14:{const i=e.tags.length*2;ct(t,i,r),r+=2;for(const o of e.tags)ct(t,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${e.code}`)}return Cu.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r={};r.code=Ot(e,t),r.type=zQ(r.code),t+=2;const n=Ot(e,t);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=Ot(e,t),t+=2,r.sourcePrefixLength=e[t++],r.scopePrefixLength=e[t++];{const s=new Uint8Array(r.family===1?4:16);Xs(e,s,0,t,t+n-4),r.ip=qQ(s)}break;case 11:n>0&&(r.timeout=Ot(e,t),t+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(Ot(e,t)),t+=2}return Cu.decode.bytes=n+4,r},encodingLength(e){if(e.data)return e.data.length+4;switch(ak(e.code)){case 8:{const r=e.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof e.timeout=="number"?6:4;case 12:return e.length+4;case 14:return 4+e.tags.length*2}throw new Error(`Unknown roption code: ${e.code}`)}}),ml=vr({encode(e,t,r){t||(t=new Uint8Array(ml.encodingLength(e))),r||(r=0);const n=r,s=bp(e,Cu);return ct(t,s,r),r=Ky(e,Cu,t,r+2),ml.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n=[];let s=Ot(e,t);t+=2;let i=0;for(;s>0;)n[i++]=Cu.decode(e,t),t+=Cu.decode.bytes,s-=Cu.decode.bytes;return ml.decode.bytes=t-r,n},encodingLength(e){return 2+bp(e||[],Cu)}}),ha=vr({encode(e,t,r){t||(t=new Uint8Array(ha.encodingLength(e))),r||(r=0);const n=r,s=e.key;if(!Af(s))throw new Error("Key must be a Buffer");return r+=2,ct(t,e.flags,r),r+=2,t[r]=ha.PROTOCOL_DNSSEC,r+=1,t[r]=e.algorithm,r+=1,Xs(s,t,r,0,s.length),r+=s.length,ha.encode.bytes=r-n,ct(t,ha.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},s=Ot(e,t);if(t+=2,n.flags=Ot(e,t),t+=2,e[t]!==ha.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e[t],t+=1,n.key=e.slice(t,r+s+2),t+=n.key.length,ha.decode.bytes=t-r,n},encodingLength(e){return 6+ql(e.key)}});ha.PROTOCOL_DNSSEC=3;ha.ZONE_KEY=128;ha.SECURE_ENTRYPOINT=32768;const Ny=vr({encode(e,t,r){t||(t=new Uint8Array(Ny.encodingLength(e))),r||(r=0);const n=r,s=e.signature;if(!Af(s))throw new Error("Signature must be a Buffer");return r+=2,ct(t,Lm(e.typeCovered),r),r+=2,t[r]=e.algorithm,r+=1,t[r]=e.labels,r+=1,ju(t,e.originalTTL,r),r+=4,ju(t,e.expiration,r),r+=4,ju(t,e.inception,r),r+=4,ct(t,e.keyTag,r),r+=2,qe.encode(e.signersName,t,r),r+=qe.encode.bytes,Xs(s,t,r,0,s.length),r+=s.length,Ny.encode.bytes=r-n,ct(t,Ny.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},s=Ot(e,t);return t+=2,n.typeCovered=a1(Ot(e,t)),t+=2,n.algorithm=e[t],t+=1,n.labels=e[t],t+=1,n.originalTTL=Mu(e,t),t+=4,n.expiration=Mu(e,t),t+=4,n.inception=Mu(e,t),t+=4,n.keyTag=Ot(e,t),t+=2,n.signersName=qe.decode(e,t),t+=qe.decode.bytes,n.signature=e.slice(t,r+s+2),t+=n.signature.length,Ny.decode.bytes=t-r,n},encodingLength(e){return 20+qe.encodingLength(e.signersName)+ql(e.signature)}}),Ry=vr({encode(e,t,r){t||(t=new Uint8Array(Ry.encodingLength(e))),r||(r=0);const n=r;return r+=2,qe.encode(e.mbox||".",t,r),r+=qe.encode.bytes,qe.encode(e.txt||".",t,r),r+=qe.encode.bytes,Ry.encode.bytes=r-n,ct(t,Ry.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.mbox=qe.decode(e,t)||".",t+=qe.decode.bytes,n.txt=qe.decode(e,t)||".",t+=qe.decode.bytes,Ry.decode.bytes=t-r,n},encodingLength(e){return 2+qe.encodingLength(e.mbox||".")+qe.encodingLength(e.txt||".")}}),cs=vr({encode(e,t,r){t||(t=new Uint8Array(cs.encodingLength(e))),r||(r=0);const n=r,s=[];for(let i=0;i<e.length;i++){const o=Lm(e[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){const o=Ax(s[i]);t[r]=i,r+=1,t[r]=o.length,r+=1,Xs(o,t,r,0,o.length),r+=o.length}return cs.encode.bytes=r-n,t},decode(e,t,r){t||(t=0);const n=t,s=[];for(;t-n<r;){const i=e[t];t+=1;const o=e[t];t+=1;for(let a=0;a<o;a++){const c=e[t+a];for(let l=0;l<8;l++)if(c&1<<7-l){const u=a1(i<<8|a<<3|l);s.push(u)}}t+=o}return cs.decode.bytes=t-n,s},encodingLength(e){const t=[];for(let n=0;n<e.length;n++){const s=Lm(e[n]);t[s>>8]=Math.max(t[s>>8]||0,s&255)}let r=0;for(let n=0;n<t.length;n++)t[n]!==void 0&&(r+=2+Math.ceil((t[n]+1)/8));return r}}),My=vr({encode(e,t,r){t||(t=new Uint8Array(My.encodingLength(e))),r||(r=0);const n=r;return r+=2,qe.encode(e.nextDomain,t,r),r+=qe.encode.bytes,cs.encode(e.rrtypes,t,r),r+=cs.encode.bytes,My.encode.bytes=r-n,ct(t,My.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},s=Ot(e,t);return t+=2,n.nextDomain=qe.decode(e,t),t+=qe.decode.bytes,n.rrtypes=cs.decode(e,t,s-(t-r)),t+=cs.decode.bytes,My.decode.bytes=t-r,n},encodingLength(e){return 2+qe.encodingLength(e.nextDomain)+cs.encodingLength(e.rrtypes)}}),jy=vr({encode(e,t,r){t||(t=new Uint8Array(jy.encodingLength(e))),r||(r=0);const n=r,s=e.salt;if(!Af(s))throw new Error("salt must be a Buffer");const i=e.nextDomain;if(!Af(i))throw new Error("nextDomain must be a Buffer");return r+=2,t[r]=e.algorithm,r+=1,t[r]=e.flags,r+=1,ct(t,e.iterations,r),r+=2,t[r]=s.length,r+=1,Xs(s,t,r,0,s.length),r+=s.length,t[r]=i.length,r+=1,Xs(i,t,r,0,i.length),r+=i.length,cs.encode(e.rrtypes,t,r),r+=cs.encode.bytes,jy.encode.bytes=r-n,ct(t,jy.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},s=Ot(e,t);t+=2,n.algorithm=e[t],t+=1,n.flags=e[t],t+=1,n.iterations=Ot(e,t),t+=2;const i=e[t];t+=1,n.salt=e.slice(t,t+i),t+=i;const o=e[t];return t+=1,n.nextDomain=e.slice(t,t+o),t+=o,n.rrtypes=cs.decode(e,t,s-(t-r)),t+=cs.decode.bytes,jy.decode.bytes=t-r,n},encodingLength(e){return 8+e.salt.length+e.nextDomain.length+cs.encodingLength(e.rrtypes)}}),Uy=vr({encode(e,t,r){t||(t=new Uint8Array(Uy.encodingLength(e))),r||(r=0);const n=r,s=e.digest;if(!Af(s))throw new Error("Digest must be a Buffer");return r+=2,ct(t,e.keyTag,r),r+=2,t[r]=e.algorithm,r+=1,t[r]=e.digestType,r+=1,Xs(s,t,r,0,s.length),r+=s.length,Uy.encode.bytes=r-n,ct(t,Uy.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},s=Ot(e,t);return t+=2,n.keyTag=Ot(e,t),t+=2,n.algorithm=e[t],t+=1,n.digestType=e[t],t+=1,n.digest=e.slice(t,r+s+2),t+=n.digest.length,Uy.decode.bytes=t-r,n},encodingLength(e){return 6+ql(e.digest)}}),wp=vr({encode(e,t,r){t||(t=new Uint8Array(wp.encodingLength(e))),r||(r=0);const n=r;r+=2,t[r]=e.algorithm,r+=1,t[r]=e.hash,r+=1;const s=uk(e.fingerprint),i=e2(e.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${e.fingerprint}" for hashType=${e.hash}: ${s} != ${i}`);return JQ(t,e.fingerprint,r,r+=s),wp.encode.bytes=r-n,ct(t,wp.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={};t+=2,n.algorithm=e[t],t+=1,n.hash=e[t],t+=1;const s=e2(n.hash);return n.fingerprint=WQ(e,t,t+s),t+=s,wp.decode.bytes=t-r,n},encodingLength(e){return 4+uk(e.fingerprint)}});function e2(e){if(e===1)return 20;if(e===2)return 32;throw new Error(`Invalid hashType=${e}, supported=1,2`)}wp.getFingerprintLengthForHashType=e2;function V_(e){switch(e.toUpperCase()){case"A":return K3;case"PTR":return Ip;case"CNAME":return Ip;case"DNAME":return Ip;case"TXT":return Bv;case"NULL":return Fv;case"AAAA":return jv;case"SRV":return Rv;case"HINFO":return Nv;case"CAA":return ol;case"NS":return Tv;case"SOA":return Iv;case"MX":return Mv;case"OPT":return ml;case"DNSKEY":return ha;case"RRSIG":return Ny;case"RP":return Ry;case"NSEC":return My;case"NSEC3":return jy;case"SSHFP":return wp;case"DS":return Uy}return Ov}const Bs=vr({encode(e,t,r){t||(t=new Uint8Array(Bs.encodingLength(e))),r||(r=0);const n=r;if(qe.encode(e.name,t,r),r+=qe.encode.bytes,ct(t,Lm(e.type),r),e.type.toUpperCase()==="OPT"){if(e.name!==".")throw new Error("OPT name must be root.");ct(t,e.udpPayloadSize||4096,r+2),t[r+4]=e.extendedRcode||0,t[r+5]=e.ednsVersion||0,ct(t,e.flags||0,r+6),r+=8,ml.encode(e.options||[],t,r),r+=ml.encode.bytes}else{let s=R3(e.class===void 0?"IN":e.class);e.flush&&(s|=QA),ct(t,s,r+2),ju(t,e.ttl||0,r+4),r+=8;const i=V_(e.type);i.encode(e.data,t,r),r+=i.encode.bytes}return Bs.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r={},n=t;if(r.name=qe.decode(e,t),t+=qe.decode.bytes,r.type=a1(Ot(e,t)),r.type==="OPT")r.udpPayloadSize=Ot(e,t+2),r.extendedRcode=e[t+4],r.ednsVersion=e[t+5],r.flags=Ot(e,t+6),r.flag_do=(r.flags>>15&1)===1,r.options=ml.decode(e,t+8),t+=8+ml.decode.bytes;else{const s=Ot(e,t+2);r.ttl=Mu(e,t+4),r.class=N3(s&eee),r.flush=!!(s&QA);const i=V_(r.type);r.data=i.decode(e,t+8),t+=8+i.decode.bytes}return Bs.decode.bytes=t-n,r},encodingLength(e){const t=e.data!==null&&e.data!==void 0?e.data:e.options;return qe.encodingLength(e.name)+8+V_(e.type).encodingLength(t)}}),Bp=vr({encode(e,t,r){t||(t=new Uint8Array(Bp.encodingLength(e))),r||(r=0);const n=r;return qe.encode(e.name,t,r),r+=qe.encode.bytes,ct(t,Lm(e.type),r),r+=2,ct(t,R3(e.class===void 0?"IN":e.class),r),r+=2,Bp.encode.bytes=r-n,e},decode(e,t){t||(t=0);const r=t,n={};return n.name=qe.decode(e,t),t+=qe.decode.bytes,n.type=a1(Ot(e,t)),t+=2,n.class=N3(Ot(e,t)),t+=2,!!(n.class&U3)&&(n.class&=tee),Bp.decode.bytes=t-r,n},encodingLength(e){return qe.encodingLength(e.name)+4}}),xx=1024,Sf={encode:function(e,t,r){const n=!t;n&&(t=new Uint8Array(nee(e))),r||(r=0);const s=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),cp.encode(e,t,r),r+=cp.encode.bytes,r=Ky(e.questions,Bp,t,r),r=Ky(e.answers,Bs,t,r),r=Ky(e.authorities,Bs,t,r),r=Ky(e.additionals,Bs,t,r),Sf.encode.bytes=r-s,n&&Hm.bytes!==t.length?t.slice(0,Hm.bytes):t},decode:function(e,t){t||(t=0);const r=t,n=cp.decode(e,t);return t+=cp.decode.bytes,t=Ig(n.questions,Bp,e,t),t=Ig(n.answers,Bs,e,t),t=Ig(n.authorities,Bs,e,t),t=Ig(n.additionals,Bs,e,t),Sf.decode.bytes=t-r,n},encodingLength:function(e){return cp.encodingLength(e)+bp(e.questions||[],Bp)+bp(e.answers||[],Bs)+bp(e.authorities||[],Bs)+bp(e.additionals||[],Bs)}};Sf.encode.bytes=0;Sf.decode.bytes=0;const Hm=Sf.encode,$x=Sf.decode,nee=Sf.encodingLength;function bp(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function Ky(e,t,r,n){for(let s=0;s<e.length;s++)t.encode(e[s],r,n),n+=t.encode.bytes;return n}function Ig(e,t,r,n){for(let s=0;s<e.length;s++)e[s]=t.decode(r,n),n+=t.decode.bytes;return n}var lk=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let C0=class{static getSigningMethod(t){return lk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(t,r){return lk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Sn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},dk=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const fk="https://diddht.tbddev.org",iee=0,Ac=7200,Uv=";",li=",";var t2;(function(e){e[e.Discoverable=0]="Discoverable",e[e.Organization=1]="Organization",e[e.Government=2]="Government",e[e.Corporation=3]="Corporation",e[e.LocalBusiness=4]="LocalBusiness",e[e.SoftwarePackage=5]="SoftwarePackage",e[e.WebApp=6]="WebApp",e[e.FinancialInstitution=7]="FinancialInstitution"})(t2||(t2={}));var vi;(function(e){e[e.Ed25519=0]="Ed25519",e[e.secp256k1=1]="secp256k1",e[e.secp256r1=2]="secp256r1",e[e.X25519=3]="X25519"})(vi||(vi={}));var r2;(function(e){e.authentication="auth",e.assertionMethod="asm",e.capabilityDelegation="del",e.capabilityInvocation="inv",e.keyAgreement="agm"})(r2||(r2={}));const L3={Ed25519:vi.Ed25519,ES256K:vi.secp256k1,ES256:vi.secp256r1,"P-256":vi.secp256r1,secp256k1:vi.secp256k1,secp256r1:vi.secp256r1,X25519:vi.X25519},pk={[vi.Ed25519]:"EdDSA",[vi.secp256k1]:"ES256K",[vi.secp256r1]:"ES256",[vi.X25519]:"ECDH-ES+A256KW"};let Uw=class n2 extends C0{static create(){return Sn(this,arguments,void 0,function*({keyManager:t=new Xu,options:r={}}={}){var n,s,i,o,a,c,l,u,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in L3)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const y=yield t.generateKey({algorithm:"Ed25519"}),_=yield t.getPublicKey({keyUri:y}),b=yield ii.identityKeyToIdentifier({identityKey:_}),v=Object.assign(Object.assign({id:b},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(w=>{var x;return((x=w.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const w of g){const x=w.id&&w.id.split("#").pop()==="0"?y:yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});let E=(c=(a=w.id)!==null&&a!==void 0?a:S.kid)!==null&&c!==void 0?c:yield cr({jwk:S});E=`${b}#${xo(E)}`,(l=v.verificationMethod)!==null&&l!==void 0||(v.verificationMethod=[]),v.verificationMethod.push({id:E,type:"JsonWebKey",controller:(u=w.controller)!==null&&u!==void 0?u:b,publicKeyJwk:S});for(const A of(d=w.purposes)!==null&&d!==void 0?d:[])v[A]||(v[A]=[]),v[A].push(E)}(h=r.services)===null||h===void 0||h.forEach(w=>{var x;(x=v.service)!==null&&x!==void 0||(v.service=[]),w.id=`${b}#${w.id.split("#").pop()}`,v.service.push(w)});const m=new Il({uri:b,document:v,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:t});if(!((f=r.publish)!==null&&f!==void 0)||f){const w=yield n2.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static import(t){return Sn(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Xu}){var s;const i=Yt.parse(r.uri);if((i==null?void 0:i.method)!==n2.methodName)throw new nt(Je.MethodNotSupported,"Method not supported");const o=yield Il.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var c;return((c=a.id)===null||c===void 0?void 0:c.split("#").pop())==="0"})))throw new nt(Je.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(t){return Sn(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=Yt.parse(r.id);if(i&&i.method!==this.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c,l;return xo(a.id)===((c=xo(n))!==null&&c!==void 0?c:xo((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new nt(Je.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(t){return Sn(this,arguments,void 0,function*({did:r,gatewayUri:n=fk}){return yield hk.put({did:r,gatewayUri:n})})}static resolve(t){return Sn(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:fk;try{yield ii.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield hk.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},Yn),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof nt))throw new Error(o);return Object.assign(Object.assign({},Yn),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};Uw.methodName="dht";let hk=class Dd{static get(t){return Sn(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=ii.identifierToIdentityKeyBytes({didUri:r}),i=yield Dd.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield ii.parseBep44GetMessage({bep44Message:i}),a=yield Dd.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(t){return Sn(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield Dd.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield ii.createBep44PutMessage({dnsPacket:s,publicKeyBytes:ii.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield Dd.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(t){return Sn(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=ut.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new nt(Je.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof nt?l:new nt(Je.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new nt(Je.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new nt(Je.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new nt(Je.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(t){return Sn(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=ut.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(c){throw new nt(Je.InternalError,`Failed to put Pkarr record for identifier ${s}: ${c.message}`)}return a.ok})}static fromDnsPacket(t){return Sn(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},c={published:!0},l=new Map;for(const u of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(u.type!=="TXT")continue;const d=u.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=ii.parseTxtDataToString(u.data);a.alsoKnownAs=h.split(li);break}case d.startsWith("cnt"):{const h=ii.parseTxtDataToString(u.data);a.controller=h.includes(li)?h.split(li):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:y,a:_}=ii.parseTxtDataToObject(u.data),b=ut.base64Url(p).toUint8Array(),v=vi[Number(f)];let g=yield ii.keyConverter(v).bytesToPublicKey({publicKeyBytes:b});g.alg=_||pk[Number(f)];const m=d==="k0"?"0":h!==void 0?h:yield cr({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const w=`${r}#${m}`;a.verificationMethod.push({id:w,type:"JsonWebKey",controller:y??r,publicKeyJwk:g}),l.set(d,w);break}case d.startsWith("s"):{const h=ii.parseTxtDataToObject(u.data),{id:f,t:p,se:y}=h,_=dk(h,["id","t","se"]),b=y.includes(li)?y.split(li):[y],v=Object.fromEntries(Object.entries(_).map(([g,m])=>[g,m.includes(li)?m.split(li):m]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},v),{id:`${r}#${f}`,type:p,serviceEndpoint:b}));break}case d.startsWith("typ"):{const{id:h}=ii.parseTxtDataToObject(u.data);c.types=h.split(li).map(f=>Number(f));break}case d.startsWith("did"):{const h=v=>v.split(li).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:y,inv:_,agm:b}=ii.parseTxtDataToObject(u.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),y&&(a.capabilityDelegation=h(y)),_&&(a.capabilityInvocation=h(_)),b&&(a.keyAgreement=h(b));break}}}return{didDocument:a,didDocumentMetadata:c,didResolutionMetadata:{}}})}static toDnsPacket(t){return Sn(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,c,l,u;const d=[],h=[],f=new Map,p=[],y=[];if(i!==void 0){const{signature:v,previousDid:g}=i;yield ii.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:Ac,data:`id=${g};s=${v}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:Ac,data:r.alsoKnownAs.join(li)}),r.controller){const v=Array.isArray(r.controller)?r.controller.join(li):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:Ac,data:v})}for(const[v,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const m=`k${v}`;y.push(m);let w=g.id.split("#").pop();f.set(w,m);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in L3))throw new nt(Je.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(c=x==null?void 0:x.crv)!==null&&c!==void 0?c:"undefined"}`);const S=vi[x.crv],E=yield ii.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),A=ut.uint8Array(E).toBase64Url(),$=[`t=${S}`,`k=${A}`];w!=="0"&&(yield cr({jwk:x}))!==w&&$.unshift(`id=${w}`),x.alg!==pk[S]&&$.push(`a=${x.alg}`),g.controller!==r.id&&$.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${m}._did.`,ttl:Ac,data:$.join(Uv)})}(l=r.service)===null||l===void 0||l.forEach((v,g)=>{const m=`s${g}`;p.push(m);let{id:w,type:x,serviceEndpoint:S}=v,E=dk(v,["id","type","serviceEndpoint"]);w=xo(w),S=Array.isArray(S)?S.join(","):S;const $=Object.entries(Object.assign({id:w,t:x,se:S},E)).map(([T,R])=>`${T}=${R}`).join(Uv),I=ii.chunkDataIfNeeded($);d.push({type:"TXT",name:`_${m}._did.`,ttl:Ac,data:I})});const _=[`v=${iee}`];if(y.length&&_.push(`vm=${y.join(li)}`),Object.keys(Km).forEach(v=>{var g;const m=(g=r[v])===null||g===void 0?void 0:g.map(w=>f.get(w.split("#").pop()));if(m){const w=r2[v];_.push(`${w}=${m.join(li)}`)}}),p.length&&_.push(`svc=${p.join(li)}`),!((u=n.types)===null||u===void 0)&&u.length){const g=n.types.map(m=>typeof m=="string"?t2[m]:m);d.push({type:"TXT",name:"_typ._did.",ttl:Ac,data:`id=${g.join(li)}`})}d.push({type:"TXT",name:"_did."+Dd.getUniqueDidSuffix(r.id)+".",ttl:Ac,data:_.join(Uv)});for(const v of s||[])h.push({type:"NS",name:"_did."+Dd.getUniqueDidSuffix(r.id)+".",ttl:Ac,data:v+"."});return{id:0,type:"response",flags:xx,answers:[...d,...h]}})}static getUniqueDidSuffix(t){return t.split(":")[2]}},ii=class Kv{static createBep44PutMessage(t){return Sn(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Hm(r),a=Xp.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new nt(Je.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const c=yield s.sign({data:a});return{k:n,seq:i,sig:c,v:o}})}static identifierToIdentityKey(t){return Sn(this,arguments,void 0,function*({didUri:r}){let n=Kv.identifierToIdentityKeyBytes({didUri:r});return yield Ui.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:t}){const r=Yt.parse(t);if(!r)throw new nt(Je.InvalidDid,`Invalid DID URI: ${t}`);if(r.method!==Uw.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ut.base32Z(r.id).toUint8Array()}catch{throw new nt(Je.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new nt(Je.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(t){return Sn(this,arguments,void 0,function*({identityKey:r}){const n=yield Ui.publicKeyToBytes({publicKey:r}),s=ut.uint8Array(n).toBase32Z();return`did:${Uw.methodName}:${s}`})}static keyConverter(t){const n={Ed25519:Ui,"P-256":{publicKeyToBytes:s=>Sn(this,[s],void 0,function*({publicKey:i}){const o=yield Vs.publicKeyToBytes({publicKey:i});return yield Vs.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Vs.bytesToPublicKey,privateKeyToBytes:Vs.privateKeyToBytes,bytesToPrivateKey:Vs.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>Sn(this,[s],void 0,function*({publicKey:i}){const o=yield us.publicKeyToBytes({publicKey:i});return yield us.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:us.bytesToPublicKey,privateKeyToBytes:us.privateKeyToBytes,bytesToPrivateKey:us.bytesToPrivateKey},X25519:x3}[t];if(!n)throw new nt(Je.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static parseBep44GetMessage(t){return Sn(this,arguments,void 0,function*({bep44Message:r}){const n=yield Ui.bytesToPublicKey({publicKeyBytes:r.k}),s=Xp.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Ui.verify({key:n,signature:r.sig,data:s})))throw new nt(Je.InvalidSignature,"Invalid signature for DHT BEP44 message");return $x(r.v)})}static parseTxtDataToObject(t){return this.parseTxtDataToString(t).split(Uv).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(t){if(typeof t=="string")return t;if(t instanceof Uint8Array)return ut.uint8Array(t).toString();if(Array.isArray(t))return t.map(r=>this.parseTxtDataToString(r)).join("");throw new nt(Je.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(t){return Sn(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield Kv.identifierToIdentityKey({didUri:n.previousDid}),i=Kv.identifierToIdentityKeyBytes({didUri:r}),o=ut.base64Url(n.signature).toUint8Array();if(!(yield Ui.verify({key:s,data:i,signature:o})))throw new nt(Je.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(t){if(t.length<=255)return t;const r=[];for(let n=0;n<t.length;n+=255)r.push(t.slice(n,n+255));return r}};const Jr={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};class Gr extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,Object.setPrototypeOf(this,new.target.prototype)}}const see=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let oee=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},aee=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return q3(this,t)}},uee=class{constructor(t){this.decoders=t}or(t){return q3(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const q3=(e,t)=>new uee({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let cee=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new oee(t,r,n),this.decoder=new aee(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const lee=({name:e,prefix:t,encode:r,decode:n})=>new cee(e,t,r,n),dee=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},fee=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},u1=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>lee({prefix:t,name:e,encode(s){return fee(s,n,r)},decode(s){return dee(s,n,r,e)}});u1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});u1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const yk=u1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});u1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});let Zp=class Lv{static encode(t){return yk.baseEncode(t)}static decodeAsBytes(t,r){if(!Lv.isBase64UrlString(t))throw new Gr(Jr.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return yk.baseDecode(t)}static decodeAsString(t,r){const n=Lv.decodeAsBytes(t,r);return Lv.bytesToString(n)}static isBase64UrlString(t){return/^[A-Za-z0-9_-]+$/.test(t)}static stringToBytes(t){return new TextEncoder().encode(t)}static bytesToString(t){return new TextDecoder().decode(t)}};var i2={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(tr,function(r){function n(){for(var ae=arguments.length,ie=Array(ae),ce=0;ce<ae;ce++)ie[ce]=arguments[ce];if(ie.length>1){ie[0]=ie[0].slice(0,-1);for(var we=ie.length-1,me=1;me<we;++me)ie[me]=ie[me].slice(1,-1);return ie[we]=ie[we].slice(1),ie.join("")}else return ie[0]}function s(ae){return"(?:"+ae+")"}function i(ae){return ae===void 0?"undefined":ae===null?"null":Object.prototype.toString.call(ae).split(" ").pop().split("]").shift().toLowerCase()}function o(ae){return ae.toUpperCase()}function a(ae){return ae!=null?ae instanceof Array?ae:typeof ae.length!="number"||ae.split||ae.setInterval||ae.call?[ae]:Array.prototype.slice.call(ae):[]}function c(ae,ie){var ce=ae;if(ie)for(var we in ie)ce[we]=ie[we];return ce}function l(ae){var ie="[A-Za-z]",ce="[0-9]",we=n(ce,"[A-Fa-f]"),me=s(s("%[EFef]"+we+"%"+we+we+"%"+we+we)+"|"+s("%[89A-Fa-f]"+we+"%"+we+we)+"|"+s("%"+we+we)),je="[\\:\\/\\?\\#\\[\\]\\@]",tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",qt=n(je,tt),Ar=ae?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",qr=ae?"[\\uE000-\\uF8FF]":"[]",Ut=n(ie,ce,"[\\-\\.\\_\\~]",Ar);s(ie+n(ie,ce,"[\\+\\-\\.]")+"*"),s(s(me+"|"+n(Ut,tt,"[\\:]"))+"*");var wr=s(s("25[0-5]")+"|"+s("2[0-4]"+ce)+"|"+s("1"+ce+ce)+"|"+s("0?[1-9]"+ce)+"|0?0?"+ce),Vr=s(wr+"\\."+wr+"\\."+wr+"\\."+wr),bt=s(we+"{1,4}"),$r=s(s(bt+"\\:"+bt)+"|"+Vr),Yr=s(s(bt+"\\:")+"{6}"+$r),Dr=s("\\:\\:"+s(bt+"\\:")+"{5}"+$r),uc=s(s(bt)+"?\\:\\:"+s(bt+"\\:")+"{4}"+$r),Uo=s(s(s(bt+"\\:")+"{0,1}"+bt)+"?\\:\\:"+s(bt+"\\:")+"{3}"+$r),Ko=s(s(s(bt+"\\:")+"{0,2}"+bt)+"?\\:\\:"+s(bt+"\\:")+"{2}"+$r),Kf=s(s(s(bt+"\\:")+"{0,3}"+bt)+"?\\:\\:"+bt+"\\:"+$r),Gl=s(s(s(bt+"\\:")+"{0,4}"+bt)+"?\\:\\:"+$r),bs=s(s(s(bt+"\\:")+"{0,5}"+bt)+"?\\:\\:"+bt),Lo=s(s(s(bt+"\\:")+"{0,6}"+bt)+"?\\:\\:"),Xl=s([Yr,Dr,uc,Uo,Ko,Kf,Gl,bs,Lo].join("|")),Xa=s(s(Ut+"|"+me)+"+");s("[vV]"+we+"+\\."+n(Ut,tt,"[\\:]")+"+"),s(s(me+"|"+n(Ut,tt))+"*");var Dh=s(me+"|"+n(Ut,tt,"[\\:\\@]"));return s(s(me+"|"+n(Ut,tt,"[\\@]"))+"+"),s(s(Dh+"|"+n("[\\/\\?]",qr))+"*"),{NOT_SCHEME:new RegExp(n("[^]",ie,ce,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Ut,tt),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Ut,tt),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Ut,tt),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Ut,tt),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Ut,tt,"[\\:\\@\\/\\?]",qr),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Ut,tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Ut,tt),"g"),UNRESERVED:new RegExp(Ut,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Ut,qt),"g"),PCT_ENCODED:new RegExp(me,"g"),IPV4ADDRESS:new RegExp("^("+Vr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xl+")"+s(s("\\%25|\\%(?!"+we+"{2})")+"("+Xa+")")+"?\\]?$")}}var u=l(!1),d=l(!0),h=function(){function ae(ie,ce){var we=[],me=!0,je=!1,tt=void 0;try{for(var qt=ie[Symbol.iterator](),Ar;!(me=(Ar=qt.next()).done)&&(we.push(Ar.value),!(ce&&we.length===ce));me=!0);}catch(qr){je=!0,tt=qr}finally{try{!me&&qt.return&&qt.return()}finally{if(je)throw tt}}return we}return function(ie,ce){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return ae(ie,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(ae){if(Array.isArray(ae)){for(var ie=0,ce=Array(ae.length);ie<ae.length;ie++)ce[ie]=ae[ie];return ce}else return Array.from(ae)},p=2147483647,y=36,_=1,b=26,v=38,g=700,m=72,w=128,x="-",S=/^xn--/,E=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,$={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=y-_,T=Math.floor,R=String.fromCharCode;function L(ae){throw new RangeError($[ae])}function j(ae,ie){for(var ce=[],we=ae.length;we--;)ce[we]=ie(ae[we]);return ce}function U(ae,ie){var ce=ae.split("@"),we="";ce.length>1&&(we=ce[0]+"@",ae=ce[1]),ae=ae.replace(A,".");var me=ae.split("."),je=j(me,ie).join(".");return we+je}function te(ae){for(var ie=[],ce=0,we=ae.length;ce<we;){var me=ae.charCodeAt(ce++);if(me>=55296&&me<=56319&&ce<we){var je=ae.charCodeAt(ce++);(je&64512)==56320?ie.push(((me&1023)<<10)+(je&1023)+65536):(ie.push(me),ce--)}else ie.push(me)}return ie}var z=function(ie){return String.fromCodePoint.apply(String,f(ie))},ee=function(ie){return ie-48<10?ie-22:ie-65<26?ie-65:ie-97<26?ie-97:y},q=function(ie,ce){return ie+22+75*(ie<26)-((ce!=0)<<5)},O=function(ie,ce,we){var me=0;for(ie=we?T(ie/g):ie>>1,ie+=T(ie/ce);ie>I*b>>1;me+=y)ie=T(ie/I);return T(me+(I+1)*ie/(ie+v))},Y=function(ie){var ce=[],we=ie.length,me=0,je=w,tt=m,qt=ie.lastIndexOf(x);qt<0&&(qt=0);for(var Ar=0;Ar<qt;++Ar)ie.charCodeAt(Ar)>=128&&L("not-basic"),ce.push(ie.charCodeAt(Ar));for(var qr=qt>0?qt+1:0;qr<we;){for(var Ut=me,wr=1,Vr=y;;Vr+=y){qr>=we&&L("invalid-input");var bt=ee(ie.charCodeAt(qr++));(bt>=y||bt>T((p-me)/wr))&&L("overflow"),me+=bt*wr;var $r=Vr<=tt?_:Vr>=tt+b?b:Vr-tt;if(bt<$r)break;var Yr=y-$r;wr>T(p/Yr)&&L("overflow"),wr*=Yr}var Dr=ce.length+1;tt=O(me-Ut,Dr,Ut==0),T(me/Dr)>p-je&&L("overflow"),je+=T(me/Dr),me%=Dr,ce.splice(me++,0,je)}return String.fromCodePoint.apply(String,ce)},H=function(ie){var ce=[];ie=te(ie);var we=ie.length,me=w,je=0,tt=m,qt=!0,Ar=!1,qr=void 0;try{for(var Ut=ie[Symbol.iterator](),wr;!(qt=(wr=Ut.next()).done);qt=!0){var Vr=wr.value;Vr<128&&ce.push(R(Vr))}}catch(Ch){Ar=!0,qr=Ch}finally{try{!qt&&Ut.return&&Ut.return()}finally{if(Ar)throw qr}}var bt=ce.length,$r=bt;for(bt&&ce.push(x);$r<we;){var Yr=p,Dr=!0,uc=!1,Uo=void 0;try{for(var Ko=ie[Symbol.iterator](),Kf;!(Dr=(Kf=Ko.next()).done);Dr=!0){var Gl=Kf.value;Gl>=me&&Gl<Yr&&(Yr=Gl)}}catch(Ch){uc=!0,Uo=Ch}finally{try{!Dr&&Ko.return&&Ko.return()}finally{if(uc)throw Uo}}var bs=$r+1;Yr-me>T((p-je)/bs)&&L("overflow"),je+=(Yr-me)*bs,me=Yr;var Lo=!0,Xl=!1,Xa=void 0;try{for(var Dh=ie[Symbol.iterator](),FD;!(Lo=(FD=Dh.next()).done);Lo=!0){var ND=FD.value;if(ND<me&&++je>p&&L("overflow"),ND==me){for(var z0=je,W0=y;;W0+=y){var J0=W0<=tt?_:W0>=tt+b?b:W0-tt;if(z0<J0)break;var RD=z0-J0,MD=y-J0;ce.push(R(q(J0+RD%MD,0))),z0=T(RD/MD)}ce.push(R(q(z0,0))),tt=O(je,bs,$r==bt),je=0,++$r}}}catch(Ch){Xl=!0,Xa=Ch}finally{try{!Lo&&Dh.return&&Dh.return()}finally{if(Xl)throw Xa}}++je,++me}return ce.join("")},C=function(ie){return U(ie,function(ce){return S.test(ce)?Y(ce.slice(4).toLowerCase()):ce})},B=function(ie){return U(ie,function(ce){return E.test(ce)?"xn--"+H(ce):ce})},Z={version:"2.1.0",ucs2:{decode:te,encode:z},decode:Y,encode:H,toASCII:B,toUnicode:C},Q={};function oe(ae){var ie=ae.charCodeAt(0),ce=void 0;return ie<16?ce="%0"+ie.toString(16).toUpperCase():ie<128?ce="%"+ie.toString(16).toUpperCase():ie<2048?ce="%"+(ie>>6|192).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase():ce="%"+(ie>>12|224).toString(16).toUpperCase()+"%"+(ie>>6&63|128).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase(),ce}function fe(ae){for(var ie="",ce=0,we=ae.length;ce<we;){var me=parseInt(ae.substr(ce+1,2),16);if(me<128)ie+=String.fromCharCode(me),ce+=3;else if(me>=194&&me<224){if(we-ce>=6){var je=parseInt(ae.substr(ce+4,2),16);ie+=String.fromCharCode((me&31)<<6|je&63)}else ie+=ae.substr(ce,6);ce+=6}else if(me>=224){if(we-ce>=9){var tt=parseInt(ae.substr(ce+4,2),16),qt=parseInt(ae.substr(ce+7,2),16);ie+=String.fromCharCode((me&15)<<12|(tt&63)<<6|qt&63)}else ie+=ae.substr(ce,9);ce+=9}else ie+=ae.substr(ce,3),ce+=3}return ie}function he(ae,ie){function ce(we){var me=fe(we);return me.match(ie.UNRESERVED)?me:we}return ae.scheme&&(ae.scheme=String(ae.scheme).replace(ie.PCT_ENCODED,ce).toLowerCase().replace(ie.NOT_SCHEME,"")),ae.userinfo!==void 0&&(ae.userinfo=String(ae.userinfo).replace(ie.PCT_ENCODED,ce).replace(ie.NOT_USERINFO,oe).replace(ie.PCT_ENCODED,o)),ae.host!==void 0&&(ae.host=String(ae.host).replace(ie.PCT_ENCODED,ce).toLowerCase().replace(ie.NOT_HOST,oe).replace(ie.PCT_ENCODED,o)),ae.path!==void 0&&(ae.path=String(ae.path).replace(ie.PCT_ENCODED,ce).replace(ae.scheme?ie.NOT_PATH:ie.NOT_PATH_NOSCHEME,oe).replace(ie.PCT_ENCODED,o)),ae.query!==void 0&&(ae.query=String(ae.query).replace(ie.PCT_ENCODED,ce).replace(ie.NOT_QUERY,oe).replace(ie.PCT_ENCODED,o)),ae.fragment!==void 0&&(ae.fragment=String(ae.fragment).replace(ie.PCT_ENCODED,ce).replace(ie.NOT_FRAGMENT,oe).replace(ie.PCT_ENCODED,o)),ae}function _e(ae){return ae.replace(/^0*(.*)/,"$1")||"0"}function Ie(ae,ie){var ce=ae.match(ie.IPV4ADDRESS)||[],we=h(ce,2),me=we[1];return me?me.split(".").map(_e).join("."):ae}function F(ae,ie){var ce=ae.match(ie.IPV6ADDRESS)||[],we=h(ce,3),me=we[1],je=we[2];if(me){for(var tt=me.toLowerCase().split("::").reverse(),qt=h(tt,2),Ar=qt[0],qr=qt[1],Ut=qr?qr.split(":").map(_e):[],wr=Ar.split(":").map(_e),Vr=ie.IPV4ADDRESS.test(wr[wr.length-1]),bt=Vr?7:8,$r=wr.length-bt,Yr=Array(bt),Dr=0;Dr<bt;++Dr)Yr[Dr]=Ut[Dr]||wr[$r+Dr]||"";Vr&&(Yr[bt-1]=Ie(Yr[bt-1],ie));var uc=Yr.reduce(function(bs,Lo,Xl){if(!Lo||Lo==="0"){var Xa=bs[bs.length-1];Xa&&Xa.index+Xa.length===Xl?Xa.length++:bs.push({index:Xl,length:1})}return bs},[]),Uo=uc.sort(function(bs,Lo){return Lo.length-bs.length})[0],Ko=void 0;if(Uo&&Uo.length>1){var Kf=Yr.slice(0,Uo.index),Gl=Yr.slice(Uo.index+Uo.length);Ko=Kf.join(":")+"::"+Gl.join(":")}else Ko=Yr.join(":");return je&&(Ko+="%"+je),Ko}else return ae}var M=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,re="".match(/(){0}/)[1]===void 0;function N(ae){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce={},we=ie.iri!==!1?d:u;ie.reference==="suffix"&&(ae=(ie.scheme?ie.scheme+":":"")+"//"+ae);var me=ae.match(M);if(me){re?(ce.scheme=me[1],ce.userinfo=me[3],ce.host=me[4],ce.port=parseInt(me[5],10),ce.path=me[6]||"",ce.query=me[7],ce.fragment=me[8],isNaN(ce.port)&&(ce.port=me[5])):(ce.scheme=me[1]||void 0,ce.userinfo=ae.indexOf("@")!==-1?me[3]:void 0,ce.host=ae.indexOf("//")!==-1?me[4]:void 0,ce.port=parseInt(me[5],10),ce.path=me[6]||"",ce.query=ae.indexOf("?")!==-1?me[7]:void 0,ce.fragment=ae.indexOf("#")!==-1?me[8]:void 0,isNaN(ce.port)&&(ce.port=ae.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?me[4]:void 0)),ce.host&&(ce.host=F(Ie(ce.host,we),we)),ce.scheme===void 0&&ce.userinfo===void 0&&ce.host===void 0&&ce.port===void 0&&!ce.path&&ce.query===void 0?ce.reference="same-document":ce.scheme===void 0?ce.reference="relative":ce.fragment===void 0?ce.reference="absolute":ce.reference="uri",ie.reference&&ie.reference!=="suffix"&&ie.reference!==ce.reference&&(ce.error=ce.error||"URI is not a "+ie.reference+" reference.");var je=Q[(ie.scheme||ce.scheme||"").toLowerCase()];if(!ie.unicodeSupport&&(!je||!je.unicodeSupport)){if(ce.host&&(ie.domainHost||je&&je.domainHost))try{ce.host=Z.toASCII(ce.host.replace(we.PCT_ENCODED,fe).toLowerCase())}catch(tt){ce.error=ce.error||"Host's domain name can not be converted to ASCII via punycode: "+tt}he(ce,u)}else he(ce,we);je&&je.parse&&je.parse(ce,ie)}else ce.error=ce.error||"URI can not be parsed.";return ce}function D(ae,ie){var ce=ie.iri!==!1?d:u,we=[];return ae.userinfo!==void 0&&(we.push(ae.userinfo),we.push("@")),ae.host!==void 0&&we.push(F(Ie(String(ae.host),ce),ce).replace(ce.IPV6ADDRESS,function(me,je,tt){return"["+je+(tt?"%25"+tt:"")+"]"})),(typeof ae.port=="number"||typeof ae.port=="string")&&(we.push(":"),we.push(String(ae.port))),we.length?we.join(""):void 0}var k=/^\.\.?\//,X=/^\/\.(\/|$)/,se=/^\/\.\.(\/|$)/,le=/^\/?(?:.|\n)*?(?=\/|$)/;function ue(ae){for(var ie=[];ae.length;)if(ae.match(k))ae=ae.replace(k,"");else if(ae.match(X))ae=ae.replace(X,"/");else if(ae.match(se))ae=ae.replace(se,"/"),ie.pop();else if(ae==="."||ae==="..")ae="";else{var ce=ae.match(le);if(ce){var we=ce[0];ae=ae.slice(we.length),ie.push(we)}else throw new Error("Unexpected dot segment condition")}return ie.join("")}function Ae(ae){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=ie.iri?d:u,we=[],me=Q[(ie.scheme||ae.scheme||"").toLowerCase()];if(me&&me.serialize&&me.serialize(ae,ie),ae.host&&!ce.IPV6ADDRESS.test(ae.host)){if(ie.domainHost||me&&me.domainHost)try{ae.host=ie.iri?Z.toUnicode(ae.host):Z.toASCII(ae.host.replace(ce.PCT_ENCODED,fe).toLowerCase())}catch(qt){ae.error=ae.error||"Host's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+qt}}he(ae,ce),ie.reference!=="suffix"&&ae.scheme&&(we.push(ae.scheme),we.push(":"));var je=D(ae,ie);if(je!==void 0&&(ie.reference!=="suffix"&&we.push("//"),we.push(je),ae.path&&ae.path.charAt(0)!=="/"&&we.push("/")),ae.path!==void 0){var tt=ae.path;!ie.absolutePath&&(!me||!me.absolutePath)&&(tt=ue(tt)),je===void 0&&(tt=tt.replace(/^\/\//,"/%2F")),we.push(tt)}return ae.query!==void 0&&(we.push("?"),we.push(ae.query)),ae.fragment!==void 0&&(we.push("#"),we.push(ae.fragment)),we.join("")}function ye(ae,ie){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},we=arguments[3],me={};return we||(ae=N(Ae(ae,ce),ce),ie=N(Ae(ie,ce),ce)),ce=ce||{},!ce.tolerant&&ie.scheme?(me.scheme=ie.scheme,me.userinfo=ie.userinfo,me.host=ie.host,me.port=ie.port,me.path=ue(ie.path||""),me.query=ie.query):(ie.userinfo!==void 0||ie.host!==void 0||ie.port!==void 0?(me.userinfo=ie.userinfo,me.host=ie.host,me.port=ie.port,me.path=ue(ie.path||""),me.query=ie.query):(ie.path?(ie.path.charAt(0)==="/"?me.path=ue(ie.path):((ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0)&&!ae.path?me.path="/"+ie.path:ae.path?me.path=ae.path.slice(0,ae.path.lastIndexOf("/")+1)+ie.path:me.path=ie.path,me.path=ue(me.path)),me.query=ie.query):(me.path=ae.path,ie.query!==void 0?me.query=ie.query:me.query=ae.query),me.userinfo=ae.userinfo,me.host=ae.host,me.port=ae.port),me.scheme=ae.scheme),me.fragment=ie.fragment,me}function V(ae,ie,ce){var we=c({scheme:"null"},ce);return Ae(ye(N(ae,we),N(ie,we),we,!0),we)}function W(ae,ie){return typeof ae=="string"?ae=Ae(N(ae,ie),ie):i(ae)==="object"&&(ae=N(Ae(ae,ie),ie)),ae}function pe(ae,ie,ce){return typeof ae=="string"?ae=Ae(N(ae,ce),ce):i(ae)==="object"&&(ae=Ae(ae,ce)),typeof ie=="string"?ie=Ae(N(ie,ce),ce):i(ie)==="object"&&(ie=Ae(ie,ce)),ae===ie}function ve(ae,ie){return ae&&ae.toString().replace(!ie||!ie.iri?u.ESCAPE:d.ESCAPE,oe)}function xe(ae,ie){return ae&&ae.toString().replace(!ie||!ie.iri?u.PCT_ENCODED:d.PCT_ENCODED,fe)}var ht={scheme:"http",domainHost:!0,parse:function(ie,ce){return ie.host||(ie.error=ie.error||"HTTP URIs must have a host."),ie},serialize:function(ie,ce){var we=String(ie.scheme).toLowerCase()==="https";return(ie.port===(we?443:80)||ie.port==="")&&(ie.port=void 0),ie.path||(ie.path="/"),ie}},wt={scheme:"https",domainHost:ht.domainHost,parse:ht.parse,serialize:ht.serialize};function Rr(ae){return typeof ae.secure=="boolean"?ae.secure:String(ae.scheme).toLowerCase()==="wss"}var jt={scheme:"ws",domainHost:!0,parse:function(ie,ce){var we=ie;return we.secure=Rr(we),we.resourceName=(we.path||"/")+(we.query?"?"+we.query:""),we.path=void 0,we.query=void 0,we},serialize:function(ie,ce){if((ie.port===(Rr(ie)?443:80)||ie.port==="")&&(ie.port=void 0),typeof ie.secure=="boolean"&&(ie.scheme=ie.secure?"wss":"ws",ie.secure=void 0),ie.resourceName){var we=ie.resourceName.split("?"),me=h(we,2),je=me[0],tt=me[1];ie.path=je&&je!=="/"?je:void 0,ie.query=tt,ie.resourceName=void 0}return ie.fragment=void 0,ie}},rr={scheme:"wss",domainHost:jt.domainHost,parse:jt.parse,serialize:jt.serialize},Ga={},Lr="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",vt="[0-9A-Fa-f]",Mr=s(s("%[EFef]"+vt+"%"+vt+vt+"%"+vt+vt)+"|"+s("%[89A-Fa-f]"+vt+"%"+vt+vt)+"|"+s("%"+vt+vt)),so="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Mo="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",jo=n(Mo,'[\\"\\\\]'),oo="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ji=new RegExp(Lr,"g"),P=new RegExp(Mr,"g"),J=new RegExp(n("[^]",so,"[\\.]",'[\\"]',jo),"g"),K=new RegExp(n("[^]",Lr,oo),"g"),G=K;function ne(ae){var ie=fe(ae);return ie.match(Ji)?ie:ae}var be={scheme:"mailto",parse:function(ie,ce){var we=ie,me=we.to=we.path?we.path.split(","):[];if(we.path=void 0,we.query){for(var je=!1,tt={},qt=we.query.split("&"),Ar=0,qr=qt.length;Ar<qr;++Ar){var Ut=qt[Ar].split("=");switch(Ut[0]){case"to":for(var wr=Ut[1].split(","),Vr=0,bt=wr.length;Vr<bt;++Vr)me.push(wr[Vr]);break;case"subject":we.subject=xe(Ut[1],ce);break;case"body":we.body=xe(Ut[1],ce);break;default:je=!0,tt[xe(Ut[0],ce)]=xe(Ut[1],ce);break}}je&&(we.headers=tt)}we.query=void 0;for(var $r=0,Yr=me.length;$r<Yr;++$r){var Dr=me[$r].split("@");if(Dr[0]=xe(Dr[0]),ce.unicodeSupport)Dr[1]=xe(Dr[1],ce).toLowerCase();else try{Dr[1]=Z.toASCII(xe(Dr[1],ce).toLowerCase())}catch(uc){we.error=we.error||"Email address's domain name can not be converted to ASCII via punycode: "+uc}me[$r]=Dr.join("@")}return we},serialize:function(ie,ce){var we=ie,me=a(ie.to);if(me){for(var je=0,tt=me.length;je<tt;++je){var qt=String(me[je]),Ar=qt.lastIndexOf("@"),qr=qt.slice(0,Ar).replace(P,ne).replace(P,o).replace(J,oe),Ut=qt.slice(Ar+1);try{Ut=ce.iri?Z.toUnicode(Ut):Z.toASCII(xe(Ut,ce).toLowerCase())}catch($r){we.error=we.error||"Email address's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+$r}me[je]=qr+"@"+Ut}we.path=me.join(",")}var wr=ie.headers=ie.headers||{};ie.subject&&(wr.subject=ie.subject),ie.body&&(wr.body=ie.body);var Vr=[];for(var bt in wr)wr[bt]!==Ga[bt]&&Vr.push(bt.replace(P,ne).replace(P,o).replace(K,oe)+"="+wr[bt].replace(P,ne).replace(P,o).replace(G,oe));return Vr.length&&(we.query=Vr.join("&")),we}},Se=/^([^\:]+)\:(.*)/,$e={scheme:"urn",parse:function(ie,ce){var we=ie.path&&ie.path.match(Se),me=ie;if(we){var je=ce.scheme||me.scheme||"urn",tt=we[1].toLowerCase(),qt=we[2],Ar=je+":"+(ce.nid||tt),qr=Q[Ar];me.nid=tt,me.nss=qt,me.path=void 0,qr&&(me=qr.parse(me,ce))}else me.error=me.error||"URN can not be parsed.";return me},serialize:function(ie,ce){var we=ce.scheme||ie.scheme||"urn",me=ie.nid,je=we+":"+(ce.nid||me),tt=Q[je];tt&&(ie=tt.serialize(ie,ce));var qt=ie,Ar=ie.nss;return qt.path=(me||ce.nid)+":"+Ar,qt}},Me=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Tt={scheme:"urn:uuid",parse:function(ie,ce){var we=ie;return we.uuid=we.nss,we.nss=void 0,!ce.tolerant&&(!we.uuid||!we.uuid.match(Me))&&(we.error=we.error||"UUID is not valid."),we},serialize:function(ie,ce){var we=ie;return we.nss=(ie.uuid||"").toLowerCase(),we}};Q[ht.scheme]=ht,Q[wt.scheme]=wt,Q[jt.scheme]=jt,Q[rr.scheme]=rr,Q[be.scheme]=be,Q[$e.scheme]=$e,Q[Tt.scheme]=Tt,r.SCHEMES=Q,r.pctEncChar=oe,r.pctDecChars=fe,r.parse=N,r.removeDotSegments=ue,r.serialize=Ae,r.resolveComponents=ye,r.resolve=V,r.normalize=W,r.equal=pe,r.escapeComponent=ve,r.unescapeComponent=xe,Object.defineProperty(r,"__esModule",{value:!0})})})(i2,i2.exports);var V3=i2.exports,s2;(function(e){e.Public="public",e.Private="private"})(s2||(s2={}));const ua=s2;class Zi{static validateEs256kOperationKey(t,r){const n=new Set(["kty","crv","x","y"]);r===ua.Private&&n.add("d");for(const s in t)if(!n.has(s))throw new Gr(Jr.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(t.crv!=="secp256k1")throw new Gr(Jr.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${t.crv}.'`);if(t.kty!=="EC")throw new Gr(Jr.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${t.kty}.'`);if(t.x.length!==43)throw new Gr(Jr.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(t.y.length!==43)throw new Gr(Jr.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===ua.Private&&(t.d===void 0||t.d.length!==43))throw new Gr(Jr.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(t){if(t.length>50)throw new Gr(Jr.IdTooLong,`Key ID length ${t.length} exceed max allowed length of 50.`);if(!Zp.isBase64UrlString(t))throw new Gr(Jr.IdNotUsingBase64UrlCharacterSet,`Key ID '${t}' is not a Base64URL string.`)}static validatePublicKeyPurposes(t){if(t===void 0)return;const r=new Set;for(const n of t){if(r.has(n))throw new Gr(Jr.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}}class as{}as.hashAlgorithmInMultihashCode=18;as.maxCanonicalizedDeltaSizeInBytes=1e3;var pee=function e(t){if(typeof t=="number"&&isNaN(t))throw new Error("NaN is not allowed");if(typeof t=="number"&&!isFinite(t))throw new Error("Infinity is not allowed");return t===null||typeof t!="object"?JSON.stringify(t):t.toJSON instanceof Function?e(t.toJSON()):Array.isArray(t)?`[${t.reduce((s,i,o)=>`${s}${o===0?"":","}${e(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(t).sort().reduce((n,s)=>{if(t[s]===void 0||typeof t[s]=="symbol")return n;const i=n.length===0?"":",";return`${n}${i}${e(s)}:${e(t[s])}`},"")}}`};const H3=La(pee);class Bl{static canonicalizeAsBytes(t){const r=Bl.removeAllUndefinedProperties(t),n=H3(r);return Zp.stringToBytes(n)}static removeAllUndefinedProperties(t){for(const r in t)typeof t[r]=="object"?Bl.removeAllUndefinedProperties(t[r]):t[r]===void 0&&delete t[r];return t}}var hee=z3,mk=128,yee=127,mee=~yee,gee=Math.pow(2,31);function z3(e,t,r){t=t||[],r=r||0;for(var n=r;e>=gee;)t[r++]=e&255|mk,e/=128;for(;e&mee;)t[r++]=e&255|mk,e>>>=7;return t[r]=e|0,z3.bytes=r-n+1,t}var vee=o2,wee=128,gk=127;function o2(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw o2.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&gk)<<s:(o&gk)*Math.pow(2,s),s+=7}while(o>=wee);return o2.bytes=i-n,r}var bee=Math.pow(2,7),_ee=Math.pow(2,14),Eee=Math.pow(2,21),Aee=Math.pow(2,28),See=Math.pow(2,35),xee=Math.pow(2,42),$ee=Math.pow(2,49),Dee=Math.pow(2,56),Cee=Math.pow(2,63),Pee=function(e){return e<bee?1:e<_ee?2:e<Eee?3:e<Aee?4:e<See?5:e<xee?6:e<$ee?7:e<Dee?8:e<Cee?9:10},kee={encode:hee,decode:vee,encodingLength:Pee},Kw=kee;const vk=(e,t=0)=>[Kw.decode(e,t),Kw.decode.bytes],wk=(e,t,r=0)=>(Kw.encode(e,t,r),t),bk=e=>Kw.encodingLength(e),_k=(e,t)=>{const r=t.byteLength,n=bk(e),s=n+bk(r),i=new Uint8Array(s+r);return wk(e,i,0),wk(r,i,n),i.set(t,s),new W3(e,r,t,i)},Oee=e=>{const t=see(e),[r,n]=vk(t),[s,i]=vk(t.subarray(n)),o=t.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new W3(r,s,o,t)};class W3{constructor(t,r,n,s){this.code=t,this.size=r,this.digest=n,this.bytes=s}}const Tee=({name:e,code:t,encode:r})=>new Iee(e,t,r);class Iee{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?_k(this.code,r):r.then(n=>_k(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Bee=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ek=Tee({name:"sha2-256",code:18,encode:Bee("SHA-256")});var ey=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class _n{static hash(t,r){return ey(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield Ek.digest(t)).bytes;break;default:throw new Gr(Jr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(t,r){return ey(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield Ek.encode(t);break;default:throw new Gr(Jr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(t,r){return ey(this,void 0,void 0,function*(){const n=Bl.canonicalizeAsBytes(t);return yield _n.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(t,r){return ey(this,void 0,void 0,function*(){const n=Bl.canonicalizeAsBytes(t),s=yield _n.hashAsNonMultihashBytes(n,r);return yield _n.hashThenEncode(s,r)})}static hashThenEncode(t,r){return ey(this,void 0,void 0,function*(){const n=yield _n.hash(t,r);return Zp.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(t,r){let n;const s=Zp.decodeAsBytes(t,r);try{n=Oee(s)}catch{throw new Gr(Jr.MultihashStringNotAMultihash,`Given ${r} string '${t}' is not a multihash after decoding.`)}const i=as.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Gr(Jr.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}}var a2;(function(e){e.Create="create",e.Update="update",e.Deactivate="deactivate",e.Recover="recover"})(a2||(a2={}));const Bg=a2;var u2;(function(e){e.Replace="replace",e.AddPublicKeys="add-public-keys",e.RemovePublicKeys="remove-public-keys",e.AddServices="add-services",e.RemoveServices="remove-services"})(u2||(u2={}));const Yf=u2;var Fg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class oi{static createCreateRequest(t){return Fg(this,void 0,void 0,function*(){const r=t.recoveryKey,n=t.updateKey,s=t.document.publicKeys,i=t.document.services;Zi.validateEs256kOperationKey(r,ua.Public),Zi.validateEs256kOperationKey(n,ua.Public),oi.validateDidDocumentKeys(s),oi.validateServices(i);const o=as.hashAlgorithmInMultihashCode,a=[{action:Yf.Replace,document:t.document}],c={updateCommitment:yield _n.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};oi.validateDeltaSize(c);const u={deltaHash:yield _n.canonicalizeThenHashThenEncode(c,o),recoveryCommitment:yield _n.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:Bg.Create,suffixData:u,delta:c}})}static createDeactivateRequest(t){return Fg(this,void 0,void 0,function*(){oi.validateDidSuffix(t.didSuffix),Zi.validateEs256kOperationKey(t.recoveryPublicKey,ua.Public);const r=as.hashAlgorithmInMultihashCode,n=yield _n.canonicalizeThenHashThenEncode(t.recoveryPublicKey,r),s={didSuffix:t.didSuffix,recoveryKey:t.recoveryPublicKey},i=yield t.signer.sign({alg:"ES256K"},s);return{type:Bg.Deactivate,didSuffix:t.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(t){return Fg(this,void 0,void 0,function*(){oi.validateDidSuffix(t.didSuffix),Zi.validateEs256kOperationKey(t.recoveryPublicKey,ua.Public),Zi.validateEs256kOperationKey(t.nextRecoveryPublicKey,ua.Public),Zi.validateEs256kOperationKey(t.nextUpdatePublicKey,ua.Public),oi.validateDidDocumentKeys(t.document.publicKeys),oi.validateServices(t.document.services);const r=as.hashAlgorithmInMultihashCode,n=yield _n.canonicalizeThenHashThenEncode(t.recoveryPublicKey,r),s=[{action:Yf.Replace,document:t.document}],i=yield _n.canonicalizeThenDoubleHashThenEncode(t.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield _n.canonicalizeThenHashThenEncode(o,r),l={recoveryCommitment:yield _n.canonicalizeThenDoubleHashThenEncode(t.nextRecoveryPublicKey,r),recoveryKey:t.recoveryPublicKey,deltaHash:a},u=yield t.signer.sign({alg:"ES256K"},l);return{type:Bg.Recover,didSuffix:t.didSuffix,revealValue:n,delta:o,signedData:u}})}static createUpdateRequest(t){return Fg(this,void 0,void 0,function*(){if(oi.validateDidSuffix(t.didSuffix),Zi.validateEs256kOperationKey(t.updatePublicKey,ua.Public),Zi.validateEs256kOperationKey(t.nextUpdatePublicKey,ua.Public),oi.validateServices(t.servicesToAdd),oi.validateDidDocumentKeys(t.publicKeysToAdd),t.idsOfServicesToRemove!==void 0)for(const p of t.idsOfServicesToRemove)Zi.validateId(p);if(t.idsOfPublicKeysToRemove!==void 0)for(const p of t.idsOfPublicKeysToRemove)Zi.validateId(p);const r=[],n=t.servicesToAdd;if(n!==void 0&&n.length>0){const p={action:Yf.AddServices,services:n};r.push(p)}const s=t.idsOfServicesToRemove;if(s!==void 0&&s.length>0){const p={action:Yf.RemoveServices,ids:s};r.push(p)}const i=t.publicKeysToAdd;if(i!==void 0&&i.length>0){const p={action:Yf.AddPublicKeys,publicKeys:i};r.push(p)}const o=t.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){const p={action:Yf.RemovePublicKeys,ids:o};r.push(p)}const a=as.hashAlgorithmInMultihashCode,c=yield _n.canonicalizeThenHashThenEncode(t.updatePublicKey,a),l=yield _n.canonicalizeThenDoubleHashThenEncode(t.nextUpdatePublicKey,a),u={patches:r,updateCommitment:l},d=yield _n.canonicalizeThenHashThenEncode(u,a),h={updateKey:t.updatePublicKey,deltaHash:d},f=yield t.signer.sign({alg:"ES256K"},h);return{type:Bg.Update,didSuffix:t.didSuffix,revealValue:c,delta:u,signedData:f}})}static validateDidSuffix(t){_n.validateEncodedHashComputedUsingSupportedHashAlgorithm(t,"didSuffix")}static validateDidDocumentKeys(t){if(t===void 0)return;const r=new Set;for(const n of t){if(Array.isArray(n.publicKeyJwk))throw new Gr(Jr.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Zi.validateId(n.id),r.has(n.id))throw new Gr(Jr.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Zi.validatePublicKeyPurposes(n.purposes)}}static validateServices(t){if(t!==void 0&&t.length!==0){const r=new Set;for(const n of t){if(oi.validateService(n),r.has(n.id))throw new Gr(Jr.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(t){Zi.validateId(t.id);const r=30;if(t.type.length>r){const n=`Service endpoint type length ${t.type.length} exceeds max allowed length of ${r}.`;throw new Gr(Jr.ServiceTypeTooLong,n)}if(Array.isArray(t.serviceEndpoint)){const n="Service endpoint value cannot be an array.";throw new Gr(Jr.ServiceEndpointCannotBeAnArray,n)}if(typeof t.serviceEndpoint=="string"&&V3.parse(t.serviceEndpoint).error!==void 0)throw new Gr(Jr.ServiceEndpointStringNotValidUri,`Service endpoint string '${t.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(t){const r=Bl.canonicalizeAsBytes(t);if(r.length>as.maxCanonicalizedDeltaSizeInBytes){const n=`Delta of ${r.length} bytes exceeded limit of ${as.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Gr(Jr.DeltaExceedsMaximumSize,n)}}}var Ak=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class P0{static createLongFormDid(t){return Ak(this,void 0,void 0,function*(){const r=yield oi.createCreateRequest(t),n=yield P0.computeDidUniqueSuffix(r.suffixData);let s;as.network===void 0||as.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${as.network}:${n}`;const i={suffixData:r.suffixData,delta:r.delta},o=Bl.canonicalizeAsBytes(i),a=Zp.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(t){return Ak(this,void 0,void 0,function*(){const r=Bl.canonicalizeAsBytes(t),n=yield _n.hash(r,as.hashAlgorithmInMultihashCode);return Zp.encode(n)})}}var Sk;(function(e){e.Mainnet="mainnet",e.Testnet="test"})(Sk||(Sk={}));var xk;(function(e){e.Authentication="authentication",e.AssertionMethod="assertionMethod",e.CapabilityInvocation="capabilityInvocation",e.CapabilityDelegation="capabilityDelegation",e.KeyAgreement="keyAgreement"})(xk||(xk={}));var ul=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},ya;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(ya||(ya={}));const Fee={Ed25519:ya.Ed25519,ES256K:ya.secp256k1,ES256:ya.secp256r1,"P-256":ya.secp256r1,secp256k1:ya.secp256k1,secp256r1:ya.secp256r1},$k="https://ion.tbd.engineering";let Nee=class Ly extends C0{static create(){return ul(this,arguments,void 0,function*({keyManager:t=new Xu,options:r={}}={}){var n,s,i,o,a,c,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in Fee)))throw new Error("One or more verification method algorithms are not supported");const u=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(u&&u.length!==new Set(u).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const w of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});h.push({id:w.id,publicKeyJwk:S,purposes:(a=w.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield t.generateKey({algorithm:ya.secp256k1}),p=yield t.getPublicKey({keyUri:f}),y=yield t.generateKey({algorithm:ya.secp256k1}),_=yield t.getPublicKey({keyUri:y}),b=yield ty.computeLongFormDidUri({recoveryKey:p,updateKey:_,services:(c=r.services)!==null&&c!==void 0?c:[],verificationMethods:h}),{didDocument:v,didResolutionMetadata:g}=yield Ly.resolve(b,{gatewayUri:r.gatewayUri});if(v===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const m=new Il({uri:b,document:v,metadata:{published:!1,canonicalId:b.split(":",3).join(":"),recoveryKey:p,updateKey:_},keyManager:t});if(!((l=r.publish)!==null&&l!==void 0)||l){const w=yield Ly.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static getSigningMethod(t){return ul(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=Yt.parse(r.id);if(i&&i.method!==this.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c;return a.id===(n??((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new nt(Je.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return ul(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Xu}){const s=Yt.parse(r.uri);if((s==null?void 0:s.method)!==Ly.methodName)throw new nt(Je.MethodNotSupported,"Method not supported");return yield Il.import({portableDid:r,keyManager:n})})}static publish(t){return ul(this,arguments,void 0,function*({did:r,gatewayUri:n=$k}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(u=>({id:u.id,publicKeyJwk:u.publicKeyJwk,purposes:AQ({didDocument:r.document,methodId:u.id})})))!==null&&i!==void 0?i:[],c=yield ty.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield ty.constructCreateRequest({ionDocument:c,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const u=ty.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(u,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:Je.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(t){return ul(this,arguments,void 0,function*(r,n={}){var s,i;const o=Yt.parse(r);if(!o)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==Ly.methodName)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:$k;try{const c=ty.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(c);if(!l.ok)throw new nt(Je.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:u,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},Yn),u&&{didDocument:u}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(c){if(!(c instanceof nt))throw new Error(c);return Object.assign(Object.assign({},Yn),{didResolutionMetadata:Object.assign({error:c.code},c.message&&{errorMessage:c.message})})}})}};Nee.methodName="ion";let ty=class Cd{static appendPathToUrl({baseUrl:t,path:r}){const n=new URL(t);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(t){return ul(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield Cd.createIonDocument({services:s,verificationMethods:i}),a=Cd.normalizeJwk(r),c=Cd.normalizeJwk(n);return yield P0.createLongFormDid({document:o,recoveryKey:a,updateKey:c})})}static constructCreateRequest(t){return ul(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield oi.createCreateRequest({document:r,recoveryKey:Cd.normalizeJwk(n),updateKey:Cd.normalizeJwk(s)})})}static createIonDocument(t){return ul(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let u=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield cr({jwk:l.publicKeyJwk});u=`${u.split("#").pop()}`;const d={id:u,publicKeyJwk:Cd.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(t){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var Ng=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let J3=class qy extends C0{static create(){return Ng(this,arguments,void 0,function*({keyManager:t=new Xu,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=ut.object(l).toBase64Url(),d=`did:${qy.methodName}:${u}`,f=(yield qy.resolve(d)).didDocument;return new Il({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return Ng(this,arguments,void 0,function*({didDocument:r}){var n;const s=Yt.parse(r.id);if(s&&s.method!==this.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new nt(Je.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(t){return Ng(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Xu}){const s=Yt.parse(r.uri);if((s==null?void 0:s.method)!==qy.methodName)throw new nt(Je.MethodNotSupported,"Method not supported");const i=yield Il.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new nt(Je.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return Ng(this,void 0,void 0,function*(){const n=Yt.parse(t);let s;try{s=ut.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==qy.methodName)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},Yn),{didDocument:i})})}};J3.methodName="jwk";var vo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Eu;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(Eu||(Eu={}));const H_={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},Ree={Ed25519:Eu.Ed25519,ES256K:Eu.secp256k1,ES256:Eu.secp256r1,"P-256":Eu.secp256r1,secp256k1:Eu.secp256k1,secp256r1:Eu.secp256r1,X25519:Eu.X25519};let Mee=class wu extends C0{static create(){return vo(this,arguments,void 0,function*({keyManager:t=new Xu,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=yield Fs.publicKeyToMultibaseId({publicKey:l}),d=`did:${wu.methodName}:${u}`,f=(yield wu.resolve(d,r)).didDocument;return new Il({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return vo(this,arguments,void 0,function*({didDocument:r}){var n;const s=Yt.parse(r.id);if(s&&s.method!==this.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new nt(Je.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return vo(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Xu}){const s=Yt.parse(r.uri);if((s==null?void 0:s.method)!==wu.methodName)throw new nt(Je.MethodNotSupported,"Method not supported");const i=yield Il.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new nt(Je.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return vo(this,void 0,void 0,function*(){try{const n=yield wu.createDocument({didUri:t,options:r});return Object.assign(Object.assign({},Yn),{didDocument:n})}catch(n){if(!(n instanceof nt))throw new Error(n);return Object.assign(Object.assign({},Yn),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(t){return vo(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,c={id:""},l=Yt.parse(r);if(!l)throw new nt(Je.InvalidDid,`Invalid DID URI: ${r}`);const u=l.id;if(l.method!==wu.methodName)throw new nt(Je.MethodNotSupported,`Method not supported: ${l.method}`);if(!wu.validateIdentifier(l))throw new nt(Je.InvalidDid,`Invalid DID URI: ${r}`);const d=yield wu.createSignatureMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(c.id=l.uri,c.verificationMethod=[d],c.authentication=[d.id],c.assertionMethod=[d.id],c.capabilityInvocation=[d.id],c.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",y=yield this.createEncryptionMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});c.verificationMethod.push(y),c.keyAgreement=[y.id]}const h=[s];return EQ({didDocument:c}).forEach(p=>{const y=H_[p];h.push(y)}),c["@context"]=h,c})}static createEncryptionMethod(t){return vo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l}=yield wu.deriveEncryptionKey({multibaseValue:n}),u=c.byteLength,d=Fs.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(u!==d)throw new nt(Je.InvalidPublicKeyLength,`Expected ${u} bytes. Actual: ${d}`);const h=D3({keyBytes:c,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new nt(Je.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in H_))throw new nt(Je.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new nt(Je.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield Fs.multicodecToJwk({code:l});a.publicKeyJwk=yield Fs.keyConverter(p).bytesToPublicKey({publicKeyBytes:c})}return a})}static createSignatureMethod(t){return vo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l,multicodecName:u}=tk({multibaseKeyId:n}),d=c.byteLength,h=Fs.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new nt(Je.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(u){case"secp256k1-pub":f=yield us.validatePublicKey({publicKeyBytes:c});break;case"ed25519-pub":f=yield Ui.validatePublicKey({publicKeyBytes:c});break;case"x25519-pub":f=!0;break}if(!f)throw new nt(Je.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new nt(Je.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in H_))throw new nt(Je.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new nt(Je.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:y}=yield Fs.multicodecToJwk({code:l});a.publicKeyJwk=yield Fs.keyConverter(y).bytesToPublicKey({publicKeyBytes:c})}return a})}static deriveEncryptionKey(t){return vo(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=tk({multibaseKeyId:r});if(i===237){const o=yield Fs.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Ui.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Fs.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(t){const{method:r,id:n}=t,[s]=t.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&XA(n)==="String"&&n.startsWith("z")}};Mee.methodName="key";let Fs=class lp{static jwkToMulticodec(t){return vo(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=lp.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:Ys.getCodeFromName({name:i}),name:i}})}static keyCompressor(t){const n={"P-256":Vs.compressPublicKey,secp256k1:us.compressPublicKey}[t];if(!n)throw new nt(Je.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static keyConverter(t){const n={Ed25519:Ui,"P-256":Vs,secp256k1:us,X25519:x3}[t];if(!n)throw new nt(Je.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static multicodecToJwk(t){return vo(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?Ys.getNameFromCode({code:r}):n;const s=n,i=lp.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(t){return vo(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in Ree))throw new nt(Je.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield lp.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield lp.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield lp.jwkToMulticodec({jwk:r});return D3({keyBytes:s,multicodecName:i})})}};Fs.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Fs.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Fs.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var jee=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let G3=class X3 extends C0{static resolve(t,r){return jee(this,void 0,void 0,function*(){const n=Yt.parse(t);if(!n)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==X3.methodName)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},Yn),{didDocument:a})}catch{return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:"notFound"}})}})}};G3.methodName="web";var Yp=1e3,Qp=Yp*60,eh=Qp*60,xf=eh*24,Uee=xf*7,Kee=xf*365.25,Lee=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return qee(e);if(r==="number"&&isFinite(e))return t.long?Hee(e):Vee(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function qee(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Kee;case"weeks":case"week":case"w":return r*Uee;case"days":case"day":case"d":return r*xf;case"hours":case"hour":case"hrs":case"hr":case"h":return r*eh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Qp;case"seconds":case"second":case"secs":case"sec":case"s":return r*Yp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vee(e){var t=Math.abs(e);return t>=xf?Math.round(e/xf)+"d":t>=eh?Math.round(e/eh)+"h":t>=Qp?Math.round(e/Qp)+"m":t>=Yp?Math.round(e/Yp)+"s":e+"ms"}function Hee(e){var t=Math.abs(e);return t>=xf?Rg(e,t,xf,"day"):t>=eh?Rg(e,t,eh,"hour"):t>=Qp?Rg(e,t,Qp,"minute"):t>=Yp?Rg(e,t,Yp,"second"):e+" ms"}function Rg(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}const zee=La(Lee),Wee={get:function(e){return null},set:function(e,t){return null},delete:function(e){return null},clear:function(){return null},close:function(){return null}};var Dk=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Jee=class{constructor({cache:t,didResolvers:r}){this.didResolvers=new Map,this.cache=t||Wee;for(const n of r)this.didResolvers.set(n.methodName,n)}resolve(t,r){return Dk(this,void 0,void 0,function*(){const n=Yt.parse(t);if(!n)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:Je.InvalidDid,errorMessage:`Invalid DID URI: ${t}`}});const s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},Yn),{didResolutionMetadata:{error:Je.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});const i=yield this.cache.get(n.uri);if(i)return i;{const o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(t,r){return Dk(this,void 0,void 0,function*(){const n=Yt.parse(t);if(!n)return{dereferencingMetadata:{error:Je.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};const{service:a=[],verificationMethod:c=[]}=s,l=new Set([t,n.fragment,`#${n.fragment}`]);let u;for(let d of c)if(l.has(d.id)){u=d;break}for(let d of a)if(l.has(d.id)){u=d;break}return u?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:u,contentMetadata:i}:{dereferencingMetadata:{error:Je.NotFound},contentStream:null,contentMetadata:{}}})}};const Z3=new Jee({didResolvers:[Uw,J3,G3]});async function Gee(e){const{didResolutionMetadata:t,didDocument:r}=await Z3.resolve(e);if(t.error)throw new Error(`Failed to resolve DID: ${e}. Error: ${t.error}`);return r}function Xee(e){return!!e&&"id"in e&&"type"in e&&"controller"in e}const Zee=new _Y;class df{static digest(t){const r=H3(t),n=yo.string(r).toUint8Array();return Ol(n)}static async sign(t){const{did:r,payload:n,detached:s}=t,i=await r.getSigner();let o=i.keyId;o.startsWith("#")&&(o=`${r.uri}${o}`);const a={alg:i.algorithm,kid:o},c=yo.object(a).toBase64Url(),l=yo.uint8Array(n).toBase64Url(),u=`${c}.${l}`,d=yo.string(u).toUint8Array(),h=await i.sign({data:d}),f=yo.uint8Array(h).toBase64Url();return s?`${c}..${f}`:`${c}.${l}.${f}`}static async verify(t){const{signature:r,detachedPayload:n}=t;if(!r)throw new Error("Signature verification failed: Expected signature property to exist");const s=r.split(".");if(s.length!==3)throw new Error("Signature verification failed: Expected valid JWS with detached content");let[i,o,a]=s;if(n){if(o.length!==0)throw new Error("Signature verification failed: Expected valid JWS with detached content");o=yo.uint8Array(n).toBase64Url()}const c=yo.base64Url(i).toObject();if(!c.alg||!c.kid)throw new Error("Signature verification failed: Expected JWS header to contain alg and kid");const u=(await Z3.dereference(c.kid)).contentStream;if(!Xee(u))throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method");const d=u.publicKeyJwk;if(!d)throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method with publicKeyJwk");const h=`${i}.${o}`,f=yo.string(h).toUint8Array(),p=yo.base64Url(a).toUint8Array();if(!await Zee.verify({key:d,data:f,signature:p}))throw new Error("Signature verification failed: Integrity mismatch");const[_]=c.kid.split("#");return _}}var k0={},c1=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};Object.defineProperty(k0,"__esModule",{value:!0});const Y3=c1;Y3.code='require("ajv/dist/runtime/equal").default';var Ck=k0.default=Y3;const Yee=dp;function dp(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(const c in e)if(!(c==="reason"||c==="success"))return dp.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;{if(e.reason!==void 0){const c=o;if(typeof e.reason!="string")return dp.errors=[{instancePath:t+"/reason",schemaPath:"#/properties/reason/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(e.success!==void 0){const c=o;if(typeof e.success!="boolean")return dp.errors=[{instancePath:t+"/success",schemaPath:"#/properties/success/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=c===o}else var a=!0}}else return dp.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return dp.errors=i,o===0}const Qee=c2;function c2(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;return e&&typeof e=="object"&&!Array.isArray(e)?(c2.errors=i,o===0):(c2.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}const ete=rt,tte={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/offering.schema.json",type:"object",properties:{additionalProperties:!1,description:{type:"string",description:"Brief description of what is being offered."},payin:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. Absence of this field implies that there is no _additional_ fee associated to the respective payment method."}},required:["kind"]}}},required:["currencyCode","methods"]},payout:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. absence of this field implies that there is no _additional_ fee associated to the respective payment method"},estimatedSettlementTime:{type:"number",description:"Estimated time in seconds for the payout to be settled. e.g. 3600 for 1 hour. 0 for instant settlement.",minimum:0}},required:["kind","estimatedSettlementTime"]}}},required:["currencyCode","methods"]},payoutUnitsPerPayinUnit:{type:"string",description:"Number of payout currency units for one payin currency unit (i.e 290000 USD for 1 BTC)"},requiredClaims:{type:"object",description:"PresentationDefinition that describes the credential(s) the PFI requires in order to provide a quote."}},required:["description","payin","payout","payoutUnitsPerPayinUnit"]},Ri=new RegExp("^([0-9]+(?:[.][0-9]+)?)$","u"),rte={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Pk={enum:["array","boolean","integer","null","number","object","string"]};function Ns(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(Ns.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Ns.errors=i,o===0):(Ns.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}const z_={validate:ke};function hi(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return hi.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;const c=e.length;for(let l=0;l<c;l++){const u=o;z_.validate(e[l],{instancePath:t+"/"+l,parentData:e,parentDataProperty:l,rootData:s})||(i=i===null?z_.validate.errors:i.concat(z_.validate.errors),o=i.length);var a=u===o;if(!a)break}}}else return hi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return hi.errors=i,o===0}function ke(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return ke.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:rte.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){const g=o;if(o===g&&o===g&&typeof e.$id!="string")return ke.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.$schema!==void 0){const g=o;if(o===g&&o===g&&typeof e.$schema!="string")return ke.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.$ref!==void 0){const g=o;if(o===g&&o===g&&typeof e.$ref!="string")return ke.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.$comment!==void 0){const g=o;if(typeof e.$comment!="string")return ke.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){const g=o;if(typeof e.title!="string")return ke.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){const g=o;if(typeof e.description!="string")return ke.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){const g=o;if(typeof e.readOnly!="boolean")return ke.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){const g=o;if(o===g&&!Array.isArray(e.examples))return ke.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf;const m=o;if(o===m)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return ke.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return ke.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum;const m=o;if(!(typeof g=="number"&&isFinite(g)))return ke.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum;const m=o;if(!(typeof g=="number"&&isFinite(g)))return ke.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum;const m=o;if(!(typeof g=="number"&&isFinite(g)))return ke.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum;const m=o;if(!(typeof g=="number"&&isFinite(g)))return ke.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength;const m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return ke.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return ke.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minLength!==void 0){const g=o;Ns(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:s})||(i=i===null?Ns.errors:i.concat(Ns.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){const g=o;if(o===g&&o===g&&typeof e.pattern!="string")return ke.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.additionalItems!==void 0){const g=o;ke(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items;const m=o,w=o;let x=!1;const S=o;ke(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var c=S===o;if(x=x||c,!x){const A=o;hi(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?hi.errors:i.concat(hi.errors),o=i.length);var c=A===o;x=x||c}if(x)o=w,i!==null&&(w?i.length=w:i=null);else{const A={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,ke.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems;const m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return ke.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return ke.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minItems!==void 0){const g=o;Ns(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:s})||(i=i===null?Ns.errors:i.concat(Ns.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){const g=o;if(typeof e.uniqueItems!="boolean")return ke.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){const g=o;ke(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties;const m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return ke.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return ke.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minProperties!==void 0){const g=o;Ns(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:s})||(i=i===null?Ns.errors:i.concat(Ns.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required;const m=o;if(o===o)if(Array.isArray(g)){var l=!0;const S=g.length;for(let E=0;E<S;E++){const A=o;if(typeof g[E]!="string")return ke.errors=[{instancePath:t+"/required/"+E,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=A===o;if(!l)break}if(l){let E=g.length,A;if(E>1){const $={};for(;E--;){let I=g[E];if(typeof I=="string"){if(typeof $[I]=="number")return A=$[I],ke.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:E,j:A},message:"must NOT have duplicate items (items ## "+A+" and "+E+" are identical)"}],!1;$[I]=E}}}}}else return ke.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){const g=o;ke(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions;const m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){const S=o;ke(g[x],{instancePath:t+"/definitions/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var u=S===o;if(!u)break}else return ke.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties;const m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){const S=o;ke(g[x],{instancePath:t+"/properties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var d=S===o;if(!d)break}else return ke.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties;const m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g)){for(const x in g){var h=o===o;if(!h){const E={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:x},message:"property name must be valid"};return i===null?i=[E]:i.push(E),o++,ke.errors=i,!1}}if(h)for(const x in g){const S=o;ke(g[x],{instancePath:t+"/patternProperties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var f=S===o;if(!f)break}}else return ke.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies;const m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){let S=g[x];const E=o,A=o;let $=!1;const I=o;ke(S,{instancePath:t+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var p=I===o;if($=$||p,!$){const T=o;if(o===o)if(Array.isArray(S)){var y=!0;const j=S.length;for(let U=0;U<j;U++){const te=o;if(typeof S[U]!="string"){const ee={instancePath:t+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+U,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ee]:i.push(ee),o++}var y=te===o;if(!y)break}if(y){let U=S.length,te;if(U>1){const z={};for(;U--;){let ee=S[U];if(typeof ee=="string"){if(typeof z[ee]=="number"){te=z[ee];const q={instancePath:t+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:U,j:te},message:"must NOT have duplicate items (items ## "+te+" and "+U+" are identical)"};i===null?i=[q]:i.push(q),o++;break}z[ee]=U}}}}}else{const j={instancePath:t+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[j]:i.push(j),o++}var p=T===o;$=$||p}if($)o=A,i!==null&&(A?i.length=A:i=null);else{const T={instancePath:t+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[T]:i.push(T),o++,ke.errors=i,!1}var _=E===o;if(!_)break}else return ke.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.propertyNames!==void 0){const g=o;ke(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum;const m=o;if(o===m)if(Array.isArray(g)){if(g.length<1)return ke.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let x=g.length,S;if(x>1){for(;x--;)for(S=x;S--;)if(Ck(g[x],g[S]))return ke.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:x,j:S},message:"must NOT have duplicate items (items ## "+S+" and "+x+" are identical)"}],!1}}}else return ke.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type;const m=o,w=o;let x=!1;const S=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){const A={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Pk.enum},message:"must be equal to one of the allowed values"};i===null?i=[A]:i.push(A),o++}var b=S===o;if(x=x||b,!x){const A=o;if(o===A)if(Array.isArray(g))if(g.length<1){const I={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[I]:i.push(I),o++}else{var v=!0;const I=g.length;for(let T=0;T<I;T++){let R=g[T];const L=o;if(!(R==="array"||R==="boolean"||R==="integer"||R==="null"||R==="number"||R==="object"||R==="string")){const U={instancePath:t+"/type/"+T,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Pk.enum},message:"must be equal to one of the allowed values"};i===null?i=[U]:i.push(U),o++}var v=L===o;if(!v)break}if(v){let T=g.length,R;if(T>1){e:for(;T--;)for(R=T;R--;)if(Ck(g[T],g[R])){const L={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:T,j:R},message:"must NOT have duplicate items (items ## "+R+" and "+T+" are identical)"};i===null?i=[L]:i.push(L),o++;break e}}}}else{const I={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[I]:i.push(I),o++}var b=A===o;x=x||b}if(x)o=w,i!==null&&(w?i.length=w:i=null);else{const A={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,ke.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.format!==void 0){const g=o;if(typeof e.format!="string")return ke.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){const g=o;if(typeof e.contentMediaType!="string")return ke.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){const g=o;if(typeof e.contentEncoding!="string")return ke.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){const g=o;ke(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){const g=o;ke(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){const g=o;ke(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){const g=o;hi(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:s})||(i=i===null?hi.errors:i.concat(hi.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){const g=o;hi(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:s})||(i=i===null?hi.errors:i.concat(hi.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){const g=o;hi(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:s})||(i=i===null?hi.errors:i.concat(hi.errors),o=i.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){const g=o;ke(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return ke.errors=i,o===0}const nte=Object.prototype.hasOwnProperty;function rt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let p;if(e.description===void 0&&(p="description")||e.payin===void 0&&(p="payin")||e.payout===void 0&&(p="payout")||e.payoutUnitsPerPayinUnit===void 0&&(p="payoutUnitsPerPayinUnit"))return rt.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(e.additionalProperties!==void 0){var a=!1;return rt.errors=[{instancePath:t+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(e.description!==void 0){const y=o;if(typeof e.description!="string")return rt.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(e.payin!==void 0){let y=e.payin;const _=o;if(o===_)if(y&&typeof y=="object"&&!Array.isArray(y)){let v;if(y.currencyCode===void 0&&(v="currencyCode")||y.methods===void 0&&(v="methods"))return rt.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;{const g=o;for(const m in y)if(!(m==="currencyCode"||m==="min"||m==="max"||m==="methods"))return rt.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(g===o){if(y.currencyCode!==void 0){const m=o;if(typeof y.currencyCode!="string")return rt.errors=[{instancePath:t+"/payin/currencyCode",schemaPath:"#/properties/payin/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===o}else var c=!0;if(c){if(y.min!==void 0){let m=y.min;const w=o;if(o===o)if(typeof m=="string"){if(!Ri.test(m))return rt.errors=[{instancePath:t+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=w===o}else var c=!0;if(c){if(y.max!==void 0){let m=y.max;const w=o;if(o===o)if(typeof m=="string"){if(!Ri.test(m))return rt.errors=[{instancePath:t+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=w===o}else var c=!0;if(c)if(y.methods!==void 0){let m=y.methods;const w=o;if(o===w)if(Array.isArray(m)){var l=!0;const S=m.length;for(let E=0;E<S;E++){let A=m[E];const $=o;if(o===$)if(A&&typeof A=="object"&&!Array.isArray(A)){let T;if(A.kind===void 0&&(T="kind"))return rt.errors=[{instancePath:t+"/payin/methods/"+E,schemaPath:"#/properties/payin/properties/methods/items/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;{const R=o;for(const L in A)if(!(L==="kind"||L==="name"||L==="description"||L==="group"||L==="requiredPaymentDetails"||L==="min"||L==="max"||L==="fee"))return rt.errors=[{instancePath:t+"/payin/methods/"+E,schemaPath:"#/properties/payin/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"}],!1;if(R===o){if(A.kind!==void 0){const L=o;if(typeof A.kind!="string")return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/kind",schemaPath:"#/properties/payin/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=L===o}else var u=!0;if(u){if(A.name!==void 0){const L=o;if(typeof A.name!="string")return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/name",schemaPath:"#/properties/payin/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=L===o}else var u=!0;if(u){if(A.description!==void 0){const L=o;if(typeof A.description!="string")return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/description",schemaPath:"#/properties/payin/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=L===o}else var u=!0;if(u){if(A.group!==void 0){const L=o;if(typeof A.group!="string")return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/group",schemaPath:"#/properties/payin/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=L===o}else var u=!0;if(u){if(A.requiredPaymentDetails!==void 0){const L=o;ke(A.requiredPaymentDetails,{instancePath:t+"/payin/methods/"+E+"/requiredPaymentDetails",parentData:A,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var u=L===o}else var u=!0;if(u){if(A.min!==void 0){let L=A.min;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=j===o}else var u=!0;if(u){if(A.max!==void 0){let L=A.max;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=j===o}else var u=!0;if(u)if(A.fee!==void 0){let L=A.fee;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payin/methods/"+E+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=j===o}else var u=!0}}}}}}}}}else return rt.errors=[{instancePath:t+"/payin/methods/"+E,schemaPath:"#/properties/payin/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=$===o;if(!l)break}}else return rt.errors=[{instancePath:t+"/payin/methods",schemaPath:"#/properties/payin/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=w===o}else var c=!0}}}}}else return rt.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=_===o}else var a=!0;if(a){if(e.payout!==void 0){let y=e.payout;const _=o;if(o===_)if(y&&typeof y=="object"&&!Array.isArray(y)){let v;if(y.currencyCode===void 0&&(v="currencyCode")||y.methods===void 0&&(v="methods"))return rt.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;{const g=o;for(const m in y)if(!(m==="currencyCode"||m==="min"||m==="max"||m==="methods"))return rt.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(g===o){if(y.currencyCode!==void 0){const m=o;if(typeof y.currencyCode!="string")return rt.errors=[{instancePath:t+"/payout/currencyCode",schemaPath:"#/properties/payout/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=m===o}else var d=!0;if(d){if(y.min!==void 0){let m=y.min;const w=o;if(o===o)if(typeof m=="string"){if(!Ri.test(m))return rt.errors=[{instancePath:t+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=w===o}else var d=!0;if(d){if(y.max!==void 0){let m=y.max;const w=o;if(o===o)if(typeof m=="string"){if(!Ri.test(m))return rt.errors=[{instancePath:t+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=w===o}else var d=!0;if(d)if(y.methods!==void 0){let m=y.methods;const w=o;if(o===w)if(Array.isArray(m)){var h=!0;const S=m.length;for(let E=0;E<S;E++){let A=m[E];const $=o;if(o===$)if(A&&typeof A=="object"&&!Array.isArray(A)){let T;if(A.kind===void 0&&(T="kind")||A.estimatedSettlementTime===void 0&&(T="estimatedSettlementTime"))return rt.errors=[{instancePath:t+"/payout/methods/"+E,schemaPath:"#/properties/payout/properties/methods/items/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;{const R=o;for(const L in A)if(!nte.call(tte.properties.payout.properties.methods.items.properties,L))return rt.errors=[{instancePath:t+"/payout/methods/"+E,schemaPath:"#/properties/payout/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"}],!1;if(R===o){if(A.kind!==void 0){const L=o;if(typeof A.kind!="string")return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/kind",schemaPath:"#/properties/payout/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(A.name!==void 0){const L=o;if(typeof A.name!="string")return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/name",schemaPath:"#/properties/payout/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(A.description!==void 0){const L=o;if(typeof A.description!="string")return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/description",schemaPath:"#/properties/payout/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(A.group!==void 0){const L=o;if(typeof A.group!="string")return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/group",schemaPath:"#/properties/payout/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(A.requiredPaymentDetails!==void 0){const L=o;ke(A.requiredPaymentDetails,{instancePath:t+"/payout/methods/"+E+"/requiredPaymentDetails",parentData:A,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?ke.errors:i.concat(ke.errors),o=i.length);var f=L===o}else var f=!0;if(f){if(A.min!==void 0){let L=A.min;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=j===o}else var f=!0;if(f){if(A.max!==void 0){let L=A.max;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=j===o}else var f=!0;if(f){if(A.fee!==void 0){let L=A.fee;const j=o;if(o===o)if(typeof L=="string"){if(!Ri.test(L))return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=j===o}else var f=!0;if(f)if(A.estimatedSettlementTime!==void 0){let L=A.estimatedSettlementTime;const j=o;if(o===j)if(typeof L=="number"&&isFinite(L)){if(L<0||isNaN(L))return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return rt.errors=[{instancePath:t+"/payout/methods/"+E+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var f=j===o}else var f=!0}}}}}}}}}}else return rt.errors=[{instancePath:t+"/payout/methods/"+E,schemaPath:"#/properties/payout/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=$===o;if(!h)break}}else return rt.errors=[{instancePath:t+"/payout/methods",schemaPath:"#/properties/payout/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=w===o}else var d=!0}}}}}else return rt.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=_===o}else var a=!0;if(a){if(e.payoutUnitsPerPayinUnit!==void 0){const y=o;if(typeof e.payoutUnitsPerPayinUnit!="string")return rt.errors=[{instancePath:t+"/payoutUnitsPerPayinUnit",schemaPath:"#/properties/payoutUnitsPerPayinUnit/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a)if(e.requiredClaims!==void 0){let y=e.requiredClaims;const _=o;if(!(y&&typeof y=="object"&&!Array.isArray(y)))return rt.errors=[{instancePath:t+"/requiredClaims",schemaPath:"#/properties/requiredClaims/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=_===o}else var a=!0}}}}}else return rt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return rt.errors=i,o===0}const ite=Hc;function Hc(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let c;if(e.currencyCode===void 0&&(c="currencyCode")||e.available===void 0&&(c="available"))return Hc.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(e.additionalProperties!==void 0){var a=!1;return Hc.errors=[{instancePath:t+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(e.currencyCode!==void 0){const l=o;if(typeof e.currencyCode!="string")return Hc.errors=[{instancePath:t+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(e.available!==void 0){let l=e.available;const u=o;if(typeof l=="string"){if(!Ri.test(l))return Hc.errors=[{instancePath:t+"/available",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Hc.errors=[{instancePath:t+"/available",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0}}else return Hc.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Hc.errors=i,o===0}const ste=zc,ote={type:"object",additionalProperties:!1,properties:{from:{$ref:"definitions.json#/definitions/did",description:"The sender's DID"},to:{$ref:"definitions.json#/definitions/did",description:"The recipient's DID"},kind:{type:"string",enum:["rfq","quote","order","orderstatus","close"],description:"The message kind (e.g. rfq, quote)"},id:{type:"string",description:"The message ID"},exchangeId:{type:"string",description:"ID for a 'thread' of messages between Alice <-> PFI. Set by the first message in a thread"},externalId:{type:"string",description:"Arbitrary ID for the caller to associate with the message."},createdAt:{type:"string",description:"ISO8601 formatted string representing the timestamp"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","to","kind","id","exchangeId","createdAt","protocol"]},l2=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u");function bn(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let c;if(e.from===void 0&&(c="from")||e.to===void 0&&(c="to")||e.kind===void 0&&(c="kind")||e.id===void 0&&(c="id")||e.exchangeId===void 0&&(c="exchangeId")||e.createdAt===void 0&&(c="createdAt")||e.protocol===void 0&&(c="protocol"))return bn.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;for(const l in e)if(!(l==="from"||l==="to"||l==="kind"||l==="id"||l==="exchangeId"||l==="externalId"||l==="createdAt"||l==="protocol"))return bn.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;{if(e.from!==void 0){let l=e.from;const u=o;if(typeof l=="string"){if(!l2.test(l))return bn.errors=[{instancePath:t+"/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return bn.errors=[{instancePath:t+"/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a){if(e.to!==void 0){let l=e.to;const u=o;if(typeof l=="string"){if(!l2.test(l))return bn.errors=[{instancePath:t+"/to",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return bn.errors=[{instancePath:t+"/to",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a){if(e.kind!==void 0){let l=e.kind;const u=o;if(typeof l!="string")return bn.errors=[{instancePath:t+"/kind",schemaPath:"#/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(l==="rfq"||l==="quote"||l==="order"||l==="orderstatus"||l==="close"))return bn.errors=[{instancePath:t+"/kind",schemaPath:"#/properties/kind/enum",keyword:"enum",params:{allowedValues:ote.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=u===o}else var a=!0;if(a){if(e.id!==void 0){const l=o;if(typeof e.id!="string")return bn.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(e.exchangeId!==void 0){const l=o;if(typeof e.exchangeId!="string")return bn.errors=[{instancePath:t+"/exchangeId",schemaPath:"#/properties/exchangeId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(e.externalId!==void 0){const l=o;if(typeof e.externalId!="string")return bn.errors=[{instancePath:t+"/externalId",schemaPath:"#/properties/externalId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(e.createdAt!==void 0){const l=o;if(typeof e.createdAt!="string")return bn.errors=[{instancePath:t+"/createdAt",schemaPath:"#/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(e.protocol!==void 0){const l=o;if(typeof e.protocol!="string")return bn.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}}}}}}}else return bn.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return bn.errors=i,o===0}function zc(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let c;if(e.metadata===void 0&&(c="metadata")||e.data===void 0&&(c="data")||e.signature===void 0&&(c="signature"))return zc.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{const l=o;for(const u in e)if(!(u==="metadata"||u==="data"||u==="signature"||u==="privateData"))return zc.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;if(l===o){if(e.metadata!==void 0){const u=o;bn(e.metadata,{instancePath:t+"/metadata",parentData:e,parentDataProperty:"metadata",rootData:s})||(i=i===null?bn.errors:i.concat(bn.errors),o=i.length);var a=u===o}else var a=!0;if(a){if(e.data!==void 0){let u=e.data;const d=o;if(!(u&&typeof u=="object"&&!Array.isArray(u)))return zc.errors=[{instancePath:t+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a){if(e.signature!==void 0){const u=o;if(typeof e.signature!="string")return zc.errors=[{instancePath:t+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a)if(e.privateData!==void 0){let u=e.privateData;const d=o;if(!(u&&typeof u=="object"&&!Array.isArray(u)))return zc.errors=[{instancePath:t+"/privateData",schemaPath:"#/properties/privateData/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}}else return zc.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return zc.errors=i,o===0}const ate=qv;function qv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e))for(const a in e)return qv.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;else return qv.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return qv.errors=i,o===0}const ute=fp;function fp(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let a;if(e.orderStatus===void 0&&(a="orderStatus"))return fp.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;for(const c in e)if(c!=="orderStatus")return fp.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;if(e.orderStatus!==void 0&&typeof e.orderStatus!="string")return fp.errors=[{instancePath:t+"/orderStatus",schemaPath:"#/properties/orderStatus/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return fp.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return fp.errors=i,o===0}const cte=pp;function ln(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let l;if(e.currencyCode===void 0&&(l="currencyCode")||e.amount===void 0&&(l="amount"))return ln.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;for(const u in e)if(!(u==="currencyCode"||u==="amount"||u==="fee"||u==="paymentInstruction"))return ln.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(e.currencyCode!==void 0){const u=o;if(typeof e.currencyCode!="string")return ln.errors=[{instancePath:t+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a){if(e.amount!==void 0){let u=e.amount;const d=o;if(typeof u=="string"){if(!Ri.test(u))return ln.errors=[{instancePath:t+"/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ln.errors=[{instancePath:t+"/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(e.fee!==void 0){let u=e.fee;const d=o;if(typeof u=="string"){if(!Ri.test(u))return ln.errors=[{instancePath:t+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ln.errors=[{instancePath:t+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a)if(e.paymentInstruction!==void 0){let u=e.paymentInstruction;const d=o;if(u&&typeof u=="object"&&!Array.isArray(u)){for(const f in u)if(!(f==="link"||f==="instruction"))return ln.errors=[{instancePath:t+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;{if(u.link!==void 0){const f=o;if(typeof u.link!="string")return ln.errors=[{instancePath:t+"/paymentInstruction/link",schemaPath:"#/definitions/PaymentInstruction/properties/link/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=f===o}else var c=!0;if(c)if(u.instruction!==void 0){const f=o;if(typeof u.instruction!="string")return ln.errors=[{instancePath:t+"/paymentInstruction/instruction",schemaPath:"#/definitions/PaymentInstruction/properties/instruction/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=f===o}else var c=!0}}else return ln.errors=[{instancePath:t+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return ln.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ln.errors=i,o===0}function pp(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let c;if(e.expiresAt===void 0&&(c="expiresAt")||e.payin===void 0&&(c="payin")||e.payout===void 0&&(c="payout"))return pp.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{const l=o;for(const u in e)if(!(u==="expiresAt"||u==="payin"||u==="payout"))return pp.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;if(l===o){if(e.expiresAt!==void 0){const u=o;if(typeof e.expiresAt!="string")return pp.errors=[{instancePath:t+"/expiresAt",schemaPath:"#/properties/expiresAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a){if(e.payin!==void 0){const u=o;ln(e.payin,{instancePath:t+"/payin",parentData:e,parentDataProperty:"payin",rootData:s})||(i=i===null?ln.errors:i.concat(ln.errors),o=i.length);var a=u===o}else var a=!0;if(a)if(e.payout!==void 0){const u=o;ln(e.payout,{instancePath:t+"/payout",parentData:e,parentDataProperty:"payout",rootData:s})||(i=i===null?ln.errors:i.concat(ln.errors),o=i.length);var a=u===o}else var a=!0}}}}else return pp.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return pp.errors=i,o===0}const lte=Ln,dte={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/resource.schema.json",type:"object",additionalProperties:!1,properties:{metadata:{type:"object",properties:{from:{$ref:"definitions.json#/definitions/did",description:"The PFI's DID"},kind:{type:"string",enum:["offering","balance"],description:"The resource kind (e.g. Offering)"},id:{type:"string",description:"The resource id"},createdAt:{type:"string",description:"When the resource was created at. Expressed as ISO8601"},updatedAt:{type:"string",description:"When the resource was last updated. Expressed as ISO8601"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","kind","id","createdAt","protocol"],description:"The metadata object contains fields about the resource and is present for every tbdex resources of all types."},data:{description:"The actual resource content",type:"object"},signature:{type:"string",description:"Signature that verifies that authenticity and integrity of a message"}},required:["metadata","data","signature"],description:"ResourceModel"};function Ln(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let l;if(e.metadata===void 0&&(l="metadata")||e.data===void 0&&(l="data")||e.signature===void 0&&(l="signature"))return Ln.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;for(const u in e)if(!(u==="metadata"||u==="data"||u==="signature"))return Ln.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(e.metadata!==void 0){let u=e.metadata;const d=o;if(u&&typeof u=="object"&&!Array.isArray(u)){let h;if(u.from===void 0&&(h="from")||u.kind===void 0&&(h="kind")||u.id===void 0&&(h="id")||u.createdAt===void 0&&(h="createdAt")||u.protocol===void 0&&(h="protocol"))return Ln.errors=[{instancePath:t+"/metadata",schemaPath:"#/properties/metadata/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;if(u.from!==void 0){let f=u.from;const p=o;if(typeof f=="string"){if(!l2.test(f))return Ln.errors=[{instancePath:t+"/metadata/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Ln.errors=[{instancePath:t+"/metadata/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(u.kind!==void 0){let f=u.kind;const p=o;if(typeof f!="string")return Ln.errors=[{instancePath:t+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f==="offering"||f==="balance"))return Ln.errors=[{instancePath:t+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/enum",keyword:"enum",params:{allowedValues:dte.properties.metadata.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=p===o}else var a=!0;if(a){if(u.id!==void 0){const f=o;if(typeof u.id!="string")return Ln.errors=[{instancePath:t+"/metadata/id",schemaPath:"#/properties/metadata/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a){if(u.createdAt!==void 0){const f=o;if(typeof u.createdAt!="string")return Ln.errors=[{instancePath:t+"/metadata/createdAt",schemaPath:"#/properties/metadata/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a){if(u.updatedAt!==void 0){const f=o;if(typeof u.updatedAt!="string")return Ln.errors=[{instancePath:t+"/metadata/updatedAt",schemaPath:"#/properties/metadata/properties/updatedAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a)if(u.protocol!==void 0){const f=o;if(typeof u.protocol!="string")return Ln.errors=[{instancePath:t+"/metadata/protocol",schemaPath:"#/properties/metadata/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0}}}}}else return Ln.errors=[{instancePath:t+"/metadata",schemaPath:"#/properties/metadata/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=d===o}else var c=!0;if(c){if(e.data!==void 0){let u=e.data;const d=o;if(!(u&&typeof u=="object"&&!Array.isArray(u)))return Ln.errors=[{instancePath:t+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=d===o}else var c=!0;if(c)if(e.signature!==void 0){const u=o;if(typeof e.signature!="string")return Ln.errors=[{instancePath:t+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=u===o}else var c=!0}}}else return Ln.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ln.errors=i,o===0}const fte=Pi;function Pi(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let l;if(e.salt===void 0&&(l="salt"))return Pi.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;if(e.additionalProperties!==void 0){var a=!1;return Pi.errors=[{instancePath:t+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(e.salt!==void 0){const u=o;if(typeof e.salt!="string")return Pi.errors=[{instancePath:t+"/salt",schemaPath:"#/properties/salt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a){if(e.claims!==void 0){let u=e.claims;const d=o;if(Array.isArray(u)){var c=!0;const f=u.length;for(let p=0;p<f;p++){const y=o;if(typeof u[p]!="string")return Pi.errors=[{instancePath:t+"/claims/"+p,schemaPath:"#/properties/claims/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===o;if(!c)break}}else return Pi.errors=[{instancePath:t+"/claims",schemaPath:"#/properties/claims/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=d===o}else var a=!0;if(a){if(e.payin!==void 0){let u=e.payin;const d=o;if(u&&typeof u=="object"&&!Array.isArray(u)){for(const f in u)if(f!=="paymentDetails")return Pi.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(u.paymentDetails!==void 0){let f=u.paymentDetails;if(!(f&&typeof f=="object"&&!Array.isArray(f)))return Pi.errors=[{instancePath:t+"/payin/paymentDetails",schemaPath:"#/properties/payin/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Pi.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a)if(e.payout!==void 0){let u=e.payout;const d=o;if(u&&typeof u=="object"&&!Array.isArray(u)){for(const f in u)if(f!=="paymentDetails")return Pi.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(u.paymentDetails!==void 0){let f=u.paymentDetails;if(!(f&&typeof f=="object"&&!Array.isArray(f)))return Pi.errors=[{instancePath:t+"/payout/paymentDetails",schemaPath:"#/properties/payout/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Pi.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return Pi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Pi.errors=i,o===0}const pte=qn;function qn(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){let u;if(e.offeringId===void 0&&(u="offeringId")||e.payin===void 0&&(u="payin")||e.payout===void 0&&(u="payout"))return qn.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;if(e.additionalProperties!==void 0){var a=!1;return qn.errors=[{instancePath:t+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(e.offeringId!==void 0){const d=o;if(typeof e.offeringId!="string")return qn.errors=[{instancePath:t+"/offeringId",schemaPath:"#/properties/offeringId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(e.claimsHash!==void 0){const d=o;if(typeof e.claimsHash!="string")return qn.errors=[{instancePath:t+"/claimsHash",schemaPath:"#/properties/claimsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(e.payin!==void 0){let d=e.payin;const h=o;if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.amount===void 0&&(p="amount")||d.kind===void 0&&(p="kind"))return qn.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.amount!==void 0){let y=d.amount;const _=o;if(typeof y=="string"){if(!Ri.test(y))return qn.errors=[{instancePath:t+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return qn.errors=[{instancePath:t+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=_===o}else var c=!0;if(c){if(d.kind!==void 0){const y=o;if(typeof d.kind!="string")return qn.errors=[{instancePath:t+"/payin/kind",schemaPath:"#/properties/payin/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===o}else var c=!0;if(c)if(d.paymentDetailsHash!==void 0){const y=o;if(typeof d.paymentDetailsHash!="string")return qn.errors=[{instancePath:t+"/payin/paymentDetailsHash",schemaPath:"#/properties/payin/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===o}else var c=!0}}else return qn.errors=[{instancePath:t+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0;if(a)if(e.payout!==void 0){let d=e.payout;const h=o;if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.kind===void 0&&(p="kind"))return qn.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.kind!==void 0){const y=o;if(typeof d.kind!="string")return qn.errors=[{instancePath:t+"/payout/kind",schemaPath:"#/properties/payout/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=y===o}else var l=!0;if(l)if(d.paymentDetailsHash!==void 0){const y=o;if(typeof d.paymentDetailsHash!="string")return qn.errors=[{instancePath:t+"/payout/paymentDetailsHash",schemaPath:"#/properties/payout/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=y===o}else var l=!0}else return qn.errors=[{instancePath:t+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}else return qn.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return qn.errors=i,o===0}const hte=Object.freeze(Object.defineProperty({__proto__:null,balance:ite,close:Yee,definitions:Qee,message:ste,offering:ete,order:ate,orderstatus:ute,quote:cte,resource:lte,rfq:pte,rfqPrivate:fte},Symbol.toStringTag,{value:"Module"}));function zm(e,t){let r=hte[t];if(!r)throw new Error(`no validator found for ${t}`);r(e),r.errors&&yte(r.errors)}function yte(e){const[t]=e;let{instancePath:r,message:n,params:s}=t;throw r||(r="message"),n=s.allowedValues?`${n} - ${s.allowedValues.join(", ")}`:n,new Error(`${r}: ${n}`)}class Lw{constructor(t,r,n){ge(this,"metadata");ge(this,"data");ge(this,"_signature");this.metadata=t,this.data=r,this._signature=n}static generateId(t){return FS(t).toString()}async sign(t){this._signature=await df.sign({did:t,payload:this.digest(),detached:!0})}async verify(){return this.validate(),this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");const t=await df.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==t)throw new Error("Signature verification failed: Expected DID in kid of JWS header to match metadata.from");return t}digest(){return df.digest({metadata:this.metadata,data:this.data})}validate(){zm(this.toJSON(),"resource"),this.validateData()}validateData(){zm(this.data,this.kind)}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}get signature(){return this._signature}get id(){return this.metadata.id}get from(){return this.metadata.from}get createdAt(){return this.metadata.createdAt}get updatedAt(){return this.metadata.updatedAt}get protocol(){return this.metadata.protocol}isOffering(){return this.metadata.kind==="offering"}isBalance(){return this.metadata.kind==="balance"}}class Ra{constructor(t,r,n){ge(this,"metadata");ge(this,"data");ge(this,"_signature");this.metadata=t,this.data=r,this._signature=n}static generateId(t){return FS(t).toString()}async sign(t){this._signature=await df.sign({did:t,payload:this.digest(),detached:!0})}async verify(){return this.validate(),await this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");const t=await df.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==t)throw new Error("Signature verification failed: Expected DID in kid of JWS header to match metadata.from");return t}digest(){return df.digest({metadata:this.metadata,data:this.data})}validate(){zm(this.toJSON(),"message"),this.validateData()}validateData(){zm(this.data,this.kind)}get signature(){return this._signature}get id(){return this.metadata.id}get exchangeId(){return this.metadata.exchangeId}get from(){return this.metadata.from}get to(){return this.metadata.to}get createdAt(){return this.metadata.createdAt}get externalId(){return this.metadata.externalId}get protocol(){return this.metadata.protocol}isRfq(){return this.metadata.kind==="rfq"}isQuote(){return this.metadata.kind==="quote"}isOrder(){return this.metadata.kind==="order"}isOrderStatus(){return this.metadata.kind==="orderstatus"}isClose(){return this.metadata.kind==="close"}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}}var mte=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,W_=Math.ceil,ks=Math.floor,Ii="[BigNumber Error] ",kk=Ii+"Number primitive has more than 15 significant digits: ",uo=1e14,At=14,J_=9007199254740991,G_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Sc=1e7,vn=1e9;function Q3(e){var t,r,n,s=v.prototype={constructor:v,toString:null,valueOf:null},i=new v(1),o=20,a=4,c=-7,l=21,u=-1e7,d=1e7,h=!1,f=1,p=0,y={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",b=!0;function v(E,A){var $,I,T,R,L,j,U,te,z=this;if(!(z instanceof v))return new v(E,A);if(A==null){if(E&&E._isBigNumber===!0){z.s=E.s,!E.c||E.e>d?z.c=z.e=null:E.e<u?z.c=[z.e=0]:(z.e=E.e,z.c=E.c.slice());return}if((j=typeof E=="number")&&E*0==0){if(z.s=1/E<0?(E=-E,-1):1,E===~~E){for(R=0,L=E;L>=10;L/=10,R++);R>d?z.c=z.e=null:(z.e=R,z.c=[E]);return}te=String(E)}else{if(!mte.test(te=String(E)))return n(z,te,j);z.s=te.charCodeAt(0)==45?(te=te.slice(1),-1):1}(R=te.indexOf("."))>-1&&(te=te.replace(".","")),(L=te.search(/e/i))>0?(R<0&&(R=L),R+=+te.slice(L+1),te=te.substring(0,L)):R<0&&(R=te.length)}else{if(Ir(A,2,_.length,"Base"),A==10&&b)return z=new v(E),x(z,o+z.e+1,a);if(te=String(E),j=typeof E=="number"){if(E*0!=0)return n(z,te,j,A);if(z.s=1/E<0?(te=te.slice(1),-1):1,v.DEBUG&&te.replace(/^0\.0*|\./,"").length>15)throw Error(kk+E)}else z.s=te.charCodeAt(0)===45?(te=te.slice(1),-1):1;for($=_.slice(0,A),R=L=0,U=te.length;L<U;L++)if($.indexOf(I=te.charAt(L))<0){if(I=="."){if(L>R){R=U;continue}}else if(!T&&(te==te.toUpperCase()&&(te=te.toLowerCase())||te==te.toLowerCase()&&(te=te.toUpperCase()))){T=!0,L=-1,R=0;continue}return n(z,String(E),j,A)}j=!1,te=r(te,A,10,z.s),(R=te.indexOf("."))>-1?te=te.replace(".",""):R=te.length}for(L=0;te.charCodeAt(L)===48;L++);for(U=te.length;te.charCodeAt(--U)===48;);if(te=te.slice(L,++U)){if(U-=L,j&&v.DEBUG&&U>15&&(E>J_||E!==ks(E)))throw Error(kk+z.s*E);if((R=R-L-1)>d)z.c=z.e=null;else if(R<u)z.c=[z.e=0];else{if(z.e=R,z.c=[],L=(R+1)%At,R<0&&(L+=At),L<U){for(L&&z.c.push(+te.slice(0,L)),U-=At;L<U;)z.c.push(+te.slice(L,L+=At));L=At-(te=te.slice(L)).length}else L-=U;for(;L--;te+="0");z.c.push(+te)}}else z.c=[z.e=0]}v.clone=Q3,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(E){var A,$;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(A="DECIMAL_PLACES")&&($=E[A],Ir($,0,vn,A),o=$),E.hasOwnProperty(A="ROUNDING_MODE")&&($=E[A],Ir($,0,8,A),a=$),E.hasOwnProperty(A="EXPONENTIAL_AT")&&($=E[A],$&&$.pop?(Ir($[0],-vn,0,A),Ir($[1],0,vn,A),c=$[0],l=$[1]):(Ir($,-vn,vn,A),c=-(l=$<0?-$:$))),E.hasOwnProperty(A="RANGE"))if($=E[A],$&&$.pop)Ir($[0],-vn,-1,A),Ir($[1],1,vn,A),u=$[0],d=$[1];else if(Ir($,-vn,vn,A),$)u=-(d=$<0?-$:$);else throw Error(Ii+A+" cannot be zero: "+$);if(E.hasOwnProperty(A="CRYPTO"))if($=E[A],$===!!$)if($)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=$;else throw h=!$,Error(Ii+"crypto unavailable");else h=$;else throw Error(Ii+A+" not true or false: "+$);if(E.hasOwnProperty(A="MODULO_MODE")&&($=E[A],Ir($,0,9,A),f=$),E.hasOwnProperty(A="POW_PRECISION")&&($=E[A],Ir($,0,vn,A),p=$),E.hasOwnProperty(A="FORMAT"))if($=E[A],typeof $=="object")y=$;else throw Error(Ii+A+" not an object: "+$);if(E.hasOwnProperty(A="ALPHABET"))if($=E[A],typeof $=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test($))b=$.slice(0,10)=="0123456789",_=$;else throw Error(Ii+A+" invalid: "+$)}else throw Error(Ii+"Object expected: "+E);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[u,d],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:p,FORMAT:y,ALPHABET:_}},v.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!v.DEBUG)return!0;var A,$,I=E.c,T=E.e,R=E.s;e:if({}.toString.call(I)=="[object Array]"){if((R===1||R===-1)&&T>=-vn&&T<=vn&&T===ks(T)){if(I[0]===0){if(T===0&&I.length===1)return!0;break e}if(A=(T+1)%At,A<1&&(A+=At),String(I[0]).length==A){for(A=0;A<I.length;A++)if($=I[A],$<0||$>=uo||$!==ks($))break e;if($!==0)return!0}}}else if(I===null&&T===null&&(R===null||R===1||R===-1))return!0;throw Error(Ii+"Invalid BigNumber: "+E)},v.maximum=v.max=function(){return m(arguments,-1)},v.minimum=v.min=function(){return m(arguments,1)},v.random=function(){var E=9007199254740992,A=Math.random()*E&2097151?function(){return ks(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function($){var I,T,R,L,j,U=0,te=[],z=new v(i);if($==null?$=o:Ir($,0,vn),L=W_($/At),h)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(L*=2));U<L;)j=I[U]*131072+(I[U+1]>>>11),j>=9e15?(T=crypto.getRandomValues(new Uint32Array(2)),I[U]=T[0],I[U+1]=T[1]):(te.push(j%1e14),U+=2);U=L/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(L*=7);U<L;)j=(I[U]&31)*281474976710656+I[U+1]*1099511627776+I[U+2]*4294967296+I[U+3]*16777216+(I[U+4]<<16)+(I[U+5]<<8)+I[U+6],j>=9e15?crypto.randomBytes(7).copy(I,U):(te.push(j%1e14),U+=7);U=L/7}else throw h=!1,Error(Ii+"crypto unavailable");if(!h)for(;U<L;)j=A(),j<9e15&&(te[U++]=j%1e14);for(L=te[--U],$%=At,L&&$&&(j=G_[At-$],te[U]=ks(L/j)*j);te[U]===0;te.pop(),U--);if(U<0)te=[R=0];else{for(R=-1;te[0]===0;te.splice(0,1),R-=At);for(U=1,j=te[0];j>=10;j/=10,U++);U<At&&(R-=At-U)}return z.e=R,z.c=te,z}}(),v.sum=function(){for(var E=1,A=arguments,$=new v(A[0]);E<A.length;)$=$.plus(A[E++]);return $},r=function(){var E="0123456789";function A($,I,T,R){for(var L,j=[0],U,te=0,z=$.length;te<z;){for(U=j.length;U--;j[U]*=I);for(j[0]+=R.indexOf($.charAt(te++)),L=0;L<j.length;L++)j[L]>T-1&&(j[L+1]==null&&(j[L+1]=0),j[L+1]+=j[L]/T|0,j[L]%=T)}return j.reverse()}return function($,I,T,R,L){var j,U,te,z,ee,q,O,Y,H=$.indexOf("."),C=o,B=a;for(H>=0&&(z=p,p=0,$=$.replace(".",""),Y=new v(I),q=Y.pow($.length-H),p=z,Y.c=A(cu($s(q.c),q.e,"0"),10,T,E),Y.e=Y.c.length),O=A($,I,T,L?(j=_,E):(j=E,_)),te=z=O.length;O[--z]==0;O.pop());if(!O[0])return j.charAt(0);if(H<0?--te:(q.c=O,q.e=te,q.s=R,q=t(q,Y,C,B,T),O=q.c,ee=q.r,te=q.e),U=te+C+1,H=O[U],z=T/2,ee=ee||U<0||O[U+1]!=null,ee=B<4?(H!=null||ee)&&(B==0||B==(q.s<0?3:2)):H>z||H==z&&(B==4||ee||B==6&&O[U-1]&1||B==(q.s<0?8:7)),U<1||!O[0])$=ee?cu(j.charAt(1),-C,j.charAt(0)):j.charAt(0);else{if(O.length=U,ee)for(--T;++O[--U]>T;)O[U]=0,U||(++te,O=[1].concat(O));for(z=O.length;!O[--z];);for(H=0,$="";H<=z;$+=j.charAt(O[H++]));$=cu($,te,j.charAt(0))}return $}}(),t=function(){function E(I,T,R){var L,j,U,te,z=0,ee=I.length,q=T%Sc,O=T/Sc|0;for(I=I.slice();ee--;)U=I[ee]%Sc,te=I[ee]/Sc|0,L=O*U+te*q,j=q*U+L%Sc*Sc+z,z=(j/R|0)+(L/Sc|0)+O*te,I[ee]=j%R;return z&&(I=[z].concat(I)),I}function A(I,T,R,L){var j,U;if(R!=L)U=R>L?1:-1;else for(j=U=0;j<R;j++)if(I[j]!=T[j]){U=I[j]>T[j]?1:-1;break}return U}function $(I,T,R,L){for(var j=0;R--;)I[R]-=j,j=I[R]<T[R]?1:0,I[R]=j*L+I[R]-T[R];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,T,R,L,j){var U,te,z,ee,q,O,Y,H,C,B,Z,Q,oe,fe,he,_e,Ie,F=I.s==T.s?1:-1,M=I.c,re=T.c;if(!M||!M[0]||!re||!re[0])return new v(!I.s||!T.s||(M?re&&M[0]==re[0]:!re)?NaN:M&&M[0]==0||!re?F*0:F/0);for(H=new v(F),C=H.c=[],te=I.e-T.e,F=R+te+1,j||(j=uo,te=Os(I.e/At)-Os(T.e/At),F=F/At|0),z=0;re[z]==(M[z]||0);z++);if(re[z]>(M[z]||0)&&te--,F<0)C.push(1),ee=!0;else{for(fe=M.length,_e=re.length,z=0,F+=2,q=ks(j/(re[0]+1)),q>1&&(re=E(re,q,j),M=E(M,q,j),_e=re.length,fe=M.length),oe=_e,B=M.slice(0,_e),Z=B.length;Z<_e;B[Z++]=0);Ie=re.slice(),Ie=[0].concat(Ie),he=re[0],re[1]>=j/2&&he++;do{if(q=0,U=A(re,B,_e,Z),U<0){if(Q=B[0],_e!=Z&&(Q=Q*j+(B[1]||0)),q=ks(Q/he),q>1)for(q>=j&&(q=j-1),O=E(re,q,j),Y=O.length,Z=B.length;A(O,B,Y,Z)==1;)q--,$(O,_e<Y?Ie:re,Y,j),Y=O.length,U=1;else q==0&&(U=q=1),O=re.slice(),Y=O.length;if(Y<Z&&(O=[0].concat(O)),$(B,O,Z,j),Z=B.length,U==-1)for(;A(re,B,_e,Z)<1;)q++,$(B,_e<Z?Ie:re,Z,j),Z=B.length}else U===0&&(q++,B=[0]);C[z++]=q,B[0]?B[Z++]=M[oe]||0:(B=[M[oe]],Z=1)}while((oe++<fe||B[0]!=null)&&F--);ee=B[0]!=null,C[0]||C.splice(0,1)}if(j==uo){for(z=1,F=C[0];F>=10;F/=10,z++);x(H,R+(H.e=z+te*At-1)+1,L,ee)}else H.e=te,H.r=+ee;return H}}();function g(E,A,$,I){var T,R,L,j,U;if($==null?$=a:Ir($,0,8),!E.c)return E.toString();if(T=E.c[0],L=E.e,A==null)U=$s(E.c),U=I==1||I==2&&(L<=c||L>=l)?jg(U,L):cu(U,L,"0");else if(E=x(new v(E),A,$),R=E.e,U=$s(E.c),j=U.length,I==1||I==2&&(A<=R||R<=c)){for(;j<A;U+="0",j++);U=jg(U,R)}else if(A-=L,U=cu(U,R,"0"),R+1>j){if(--A>0)for(U+=".";A--;U+="0");}else if(A+=R-j,A>0)for(R+1==j&&(U+=".");A--;U+="0");return E.s<0&&T?"-"+U:U}function m(E,A){for(var $,I,T=1,R=new v(E[0]);T<E.length;T++)I=new v(E[T]),(!I.s||($=hd(R,I))===A||$===0&&R.s===A)&&(R=I);return R}function w(E,A,$){for(var I=1,T=A.length;!A[--T];A.pop());for(T=A[0];T>=10;T/=10,I++);return($=I+$*At-1)>d?E.c=E.e=null:$<u?E.c=[E.e=0]:(E.e=$,E.c=A),E}n=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,$=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,L,j,U){var te,z=j?L:L.replace(T,"");if(I.test(z))R.s=isNaN(z)?null:z<0?-1:1;else{if(!j&&(z=z.replace(E,function(ee,q,O){return te=(O=O.toLowerCase())=="x"?16:O=="b"?2:8,!U||U==te?q:ee}),U&&(te=U,z=z.replace(A,"$1").replace($,"0.$1")),L!=z))return new v(z,te);if(v.DEBUG)throw Error(Ii+"Not a"+(U?" base "+U:"")+" number: "+L);R.s=null}R.c=R.e=null}}();function x(E,A,$,I){var T,R,L,j,U,te,z,ee=E.c,q=G_;if(ee){e:{for(T=1,j=ee[0];j>=10;j/=10,T++);if(R=A-T,R<0)R+=At,L=A,U=ee[te=0],z=ks(U/q[T-L-1]%10);else if(te=W_((R+1)/At),te>=ee.length)if(I){for(;ee.length<=te;ee.push(0));U=z=0,T=1,R%=At,L=R-At+1}else break e;else{for(U=j=ee[te],T=1;j>=10;j/=10,T++);R%=At,L=R-At+T,z=L<0?0:ks(U/q[T-L-1]%10)}if(I=I||A<0||ee[te+1]!=null||(L<0?U:U%q[T-L-1]),I=$<4?(z||I)&&($==0||$==(E.s<0?3:2)):z>5||z==5&&($==4||I||$==6&&(R>0?L>0?U/q[T-L]:0:ee[te-1])%10&1||$==(E.s<0?8:7)),A<1||!ee[0])return ee.length=0,I?(A-=E.e+1,ee[0]=q[(At-A%At)%At],E.e=-A||0):ee[0]=E.e=0,E;if(R==0?(ee.length=te,j=1,te--):(ee.length=te+1,j=q[At-R],ee[te]=L>0?ks(U/q[T-L]%q[L])*j:0),I)for(;;)if(te==0){for(R=1,L=ee[0];L>=10;L/=10,R++);for(L=ee[0]+=j,j=1;L>=10;L/=10,j++);R!=j&&(E.e++,ee[0]==uo&&(ee[0]=1));break}else{if(ee[te]+=j,ee[te]!=uo)break;ee[te--]=0,j=1}for(R=ee.length;ee[--R]===0;ee.pop());}E.e>d?E.c=E.e=null:E.e<u&&(E.c=[E.e=0])}return E}function S(E){var A,$=E.e;return $===null?E.toString():(A=$s(E.c),A=$<=c||$>=l?jg(A,$):cu(A,$,"0"),E.s<0?"-"+A:A)}return s.absoluteValue=s.abs=function(){var E=new v(this);return E.s<0&&(E.s=1),E},s.comparedTo=function(E,A){return hd(this,new v(E,A))},s.decimalPlaces=s.dp=function(E,A){var $,I,T,R=this;if(E!=null)return Ir(E,0,vn),A==null?A=a:Ir(A,0,8),x(new v(R),E+R.e+1,A);if(!($=R.c))return null;if(I=((T=$.length-1)-Os(this.e/At))*At,T=$[T])for(;T%10==0;T/=10,I--);return I<0&&(I=0),I},s.dividedBy=s.div=function(E,A){return t(this,new v(E,A),o,a)},s.dividedToIntegerBy=s.idiv=function(E,A){return t(this,new v(E,A),0,1)},s.exponentiatedBy=s.pow=function(E,A){var $,I,T,R,L,j,U,te,z,ee=this;if(E=new v(E),E.c&&!E.isInteger())throw Error(Ii+"Exponent not an integer: "+S(E));if(A!=null&&(A=new v(A)),j=E.e>14,!ee.c||!ee.c[0]||ee.c[0]==1&&!ee.e&&ee.c.length==1||!E.c||!E.c[0])return z=new v(Math.pow(+S(ee),j?E.s*(2-Mg(E)):+S(E))),A?z.mod(A):z;if(U=E.s<0,A){if(A.c?!A.c[0]:!A.s)return new v(NaN);I=!U&&ee.isInteger()&&A.isInteger(),I&&(ee=ee.mod(A))}else{if(E.e>9&&(ee.e>0||ee.e<-1||(ee.e==0?ee.c[0]>1||j&&ee.c[1]>=24e7:ee.c[0]<8e13||j&&ee.c[0]<=9999975e7)))return R=ee.s<0&&Mg(E)?-0:0,ee.e>-1&&(R=1/R),new v(U?1/R:R);p&&(R=W_(p/At+2))}for(j?($=new v(.5),U&&(E.s=1),te=Mg(E)):(T=Math.abs(+S(E)),te=T%2),z=new v(i);;){if(te){if(z=z.times(ee),!z.c)break;R?z.c.length>R&&(z.c.length=R):I&&(z=z.mod(A))}if(T){if(T=ks(T/2),T===0)break;te=T%2}else if(E=E.times($),x(E,E.e+1,1),E.e>14)te=Mg(E);else{if(T=+S(E),T===0)break;te=T%2}ee=ee.times(ee),R?ee.c&&ee.c.length>R&&(ee.c.length=R):I&&(ee=ee.mod(A))}return I?z:(U&&(z=i.div(z)),A?z.mod(A):R?x(z,p,a,L):z)},s.integerValue=function(E){var A=new v(this);return E==null?E=a:Ir(E,0,8),x(A,A.e+1,E)},s.isEqualTo=s.eq=function(E,A){return hd(this,new v(E,A))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(E,A){return hd(this,new v(E,A))>0},s.isGreaterThanOrEqualTo=s.gte=function(E,A){return(A=hd(this,new v(E,A)))===1||A===0},s.isInteger=function(){return!!this.c&&Os(this.e/At)>this.c.length-2},s.isLessThan=s.lt=function(E,A){return hd(this,new v(E,A))<0},s.isLessThanOrEqualTo=s.lte=function(E,A){return(A=hd(this,new v(E,A)))===-1||A===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(E,A){var $,I,T,R,L=this,j=L.s;if(E=new v(E,A),A=E.s,!j||!A)return new v(NaN);if(j!=A)return E.s=-A,L.plus(E);var U=L.e/At,te=E.e/At,z=L.c,ee=E.c;if(!U||!te){if(!z||!ee)return z?(E.s=-A,E):new v(ee?L:NaN);if(!z[0]||!ee[0])return ee[0]?(E.s=-A,E):new v(z[0]?L:a==3?-0:0)}if(U=Os(U),te=Os(te),z=z.slice(),j=U-te){for((R=j<0)?(j=-j,T=z):(te=U,T=ee),T.reverse(),A=j;A--;T.push(0));T.reverse()}else for(I=(R=(j=z.length)<(A=ee.length))?j:A,j=A=0;A<I;A++)if(z[A]!=ee[A]){R=z[A]<ee[A];break}if(R&&(T=z,z=ee,ee=T,E.s=-E.s),A=(I=ee.length)-($=z.length),A>0)for(;A--;z[$++]=0);for(A=uo-1;I>j;){if(z[--I]<ee[I]){for($=I;$&&!z[--$];z[$]=A);--z[$],z[I]+=uo}z[I]-=ee[I]}for(;z[0]==0;z.splice(0,1),--te);return z[0]?w(E,z,te):(E.s=a==3?-1:1,E.c=[E.e=0],E)},s.modulo=s.mod=function(E,A){var $,I,T=this;return E=new v(E,A),!T.c||!E.s||E.c&&!E.c[0]?new v(NaN):!E.c||T.c&&!T.c[0]?new v(T):(f==9?(I=E.s,E.s=1,$=t(T,E,0,3),E.s=I,$.s*=I):$=t(T,E,0,f),E=T.minus($.times(E)),!E.c[0]&&f==1&&(E.s=T.s),E)},s.multipliedBy=s.times=function(E,A){var $,I,T,R,L,j,U,te,z,ee,q,O,Y,H,C,B=this,Z=B.c,Q=(E=new v(E,A)).c;if(!Z||!Q||!Z[0]||!Q[0])return!B.s||!E.s||Z&&!Z[0]&&!Q||Q&&!Q[0]&&!Z?E.c=E.e=E.s=null:(E.s*=B.s,!Z||!Q?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(I=Os(B.e/At)+Os(E.e/At),E.s*=B.s,U=Z.length,ee=Q.length,U<ee&&(Y=Z,Z=Q,Q=Y,T=U,U=ee,ee=T),T=U+ee,Y=[];T--;Y.push(0));for(H=uo,C=Sc,T=ee;--T>=0;){for($=0,q=Q[T]%C,O=Q[T]/C|0,L=U,R=T+L;R>T;)te=Z[--L]%C,z=Z[L]/C|0,j=O*te+z*q,te=q*te+j%C*C+Y[R]+$,$=(te/H|0)+(j/C|0)+O*z,Y[R--]=te%H;Y[R]=$}return $?++I:Y.splice(0,1),w(E,Y,I)},s.negated=function(){var E=new v(this);return E.s=-E.s||null,E},s.plus=function(E,A){var $,I=this,T=I.s;if(E=new v(E,A),A=E.s,!T||!A)return new v(NaN);if(T!=A)return E.s=-A,I.minus(E);var R=I.e/At,L=E.e/At,j=I.c,U=E.c;if(!R||!L){if(!j||!U)return new v(T/0);if(!j[0]||!U[0])return U[0]?E:new v(j[0]?I:T*0)}if(R=Os(R),L=Os(L),j=j.slice(),T=R-L){for(T>0?(L=R,$=U):(T=-T,$=j),$.reverse();T--;$.push(0));$.reverse()}for(T=j.length,A=U.length,T-A<0&&($=U,U=j,j=$,A=T),T=0;A;)T=(j[--A]=j[A]+U[A]+T)/uo|0,j[A]=uo===j[A]?0:j[A]%uo;return T&&(j=[T].concat(j),++L),w(E,j,L)},s.precision=s.sd=function(E,A){var $,I,T,R=this;if(E!=null&&E!==!!E)return Ir(E,1,vn),A==null?A=a:Ir(A,0,8),x(new v(R),E,A);if(!($=R.c))return null;if(T=$.length-1,I=T*At+1,T=$[T]){for(;T%10==0;T/=10,I--);for(T=$[0];T>=10;T/=10,I++);}return E&&R.e+1>I&&(I=R.e+1),I},s.shiftedBy=function(E){return Ir(E,-J_,J_),this.times("1e"+E)},s.squareRoot=s.sqrt=function(){var E,A,$,I,T,R=this,L=R.c,j=R.s,U=R.e,te=o+4,z=new v("0.5");if(j!==1||!L||!L[0])return new v(!j||j<0&&(!L||L[0])?NaN:L?R:1/0);if(j=Math.sqrt(+S(R)),j==0||j==1/0?(A=$s(L),(A.length+U)%2==0&&(A+="0"),j=Math.sqrt(+A),U=Os((U+1)/2)-(U<0||U%2),j==1/0?A="5e"+U:(A=j.toExponential(),A=A.slice(0,A.indexOf("e")+1)+U),$=new v(A)):$=new v(j+""),$.c[0]){for(U=$.e,j=U+te,j<3&&(j=0);;)if(T=$,$=z.times(T.plus(t(R,T,te,1))),$s(T.c).slice(0,j)===(A=$s($.c)).slice(0,j))if($.e<U&&--j,A=A.slice(j-3,j+1),A=="9999"||!I&&A=="4999"){if(!I&&(x(T,T.e+o+2,0),T.times(T).eq(R))){$=T;break}te+=4,j+=4,I=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(x($,$.e+o+2,1),E=!$.times($).eq(R));break}}return x($,$.e+o+1,a,E)},s.toExponential=function(E,A){return E!=null&&(Ir(E,0,vn),E++),g(this,E,A,1)},s.toFixed=function(E,A){return E!=null&&(Ir(E,0,vn),E=E+this.e+1),g(this,E,A)},s.toFormat=function(E,A,$){var I,T=this;if($==null)E!=null&&A&&typeof A=="object"?($=A,A=null):E&&typeof E=="object"?($=E,E=A=null):$=y;else if(typeof $!="object")throw Error(Ii+"Argument not an object: "+$);if(I=T.toFixed(E,A),T.c){var R,L=I.split("."),j=+$.groupSize,U=+$.secondaryGroupSize,te=$.groupSeparator||"",z=L[0],ee=L[1],q=T.s<0,O=q?z.slice(1):z,Y=O.length;if(U&&(R=j,j=U,U=R,Y-=R),j>0&&Y>0){for(R=Y%j||j,z=O.substr(0,R);R<Y;R+=j)z+=te+O.substr(R,j);U>0&&(z+=te+O.slice(R)),q&&(z="-"+z)}I=ee?z+($.decimalSeparator||"")+((U=+$.fractionGroupSize)?ee.replace(new RegExp("\\d{"+U+"}\\B","g"),"$&"+($.fractionGroupSeparator||"")):ee):z}return($.prefix||"")+I+($.suffix||"")},s.toFraction=function(E){var A,$,I,T,R,L,j,U,te,z,ee,q,O=this,Y=O.c;if(E!=null&&(j=new v(E),!j.isInteger()&&(j.c||j.s!==1)||j.lt(i)))throw Error(Ii+"Argument "+(j.isInteger()?"out of range: ":"not an integer: ")+S(j));if(!Y)return new v(O);for(A=new v(i),te=$=new v(i),I=U=new v(i),q=$s(Y),R=A.e=q.length-O.e-1,A.c[0]=G_[(L=R%At)<0?At+L:L],E=!E||j.comparedTo(A)>0?R>0?A:te:j,L=d,d=1/0,j=new v(q),U.c[0]=0;z=t(j,A,0,1),T=$.plus(z.times(I)),T.comparedTo(E)!=1;)$=I,I=T,te=U.plus(z.times(T=te)),U=T,A=j.minus(z.times(T=A)),j=T;return T=t(E.minus($),I,0,1),U=U.plus(T.times(te)),$=$.plus(T.times(I)),U.s=te.s=O.s,R=R*2,ee=t(te,I,R,a).minus(O).abs().comparedTo(t(U,$,R,a).minus(O).abs())<1?[te,I]:[U,$],d=L,ee},s.toNumber=function(){return+S(this)},s.toPrecision=function(E,A){return E!=null&&Ir(E,1,vn),g(this,E,A,2)},s.toString=function(E){var A,$=this,I=$.s,T=$.e;return T===null?I?(A="Infinity",I<0&&(A="-"+A)):A="NaN":(E==null?A=T<=c||T>=l?jg($s($.c),T):cu($s($.c),T,"0"):E===10&&b?($=x(new v($),o+T+1,a),A=cu($s($.c),$.e,"0")):(Ir(E,2,_.length,"Base"),A=r(cu($s($.c),T,"0"),10,E,I,!0)),I<0&&$.c[0]&&(A="-"+A)),A},s.valueOf=s.toJSON=function(){return S(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,e!=null&&v.set(e),v}function Os(e){var t=e|0;return e>0||e===t?t:t-1}function $s(e){for(var t,r,n=1,s=e.length,i=e[0]+"";n<s;){for(t=e[n++]+"",r=At-t.length;r--;t="0"+t);i+=t}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function hd(e,t){var r,n,s=e.c,i=t.c,o=e.s,a=t.s,c=e.e,l=t.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!s||!i)return n?0:!s^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=s.length)<(l=i.length)?c:l,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function Ir(e,t,r,n){if(e<t||e>r||e!==ks(e))throw Error(Ii+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Mg(e){var t=e.c.length-1;return Os(e.e/At)==t&&e.c[t]%2!=0}function jg(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function cu(e,t,r){var n,s;if(t<0){for(s=r+".";++t;s+=r);e=s+e}else if(n=e.length,++t>n){for(s=r,t-=n;--t;s+=r);e+=s}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Ug=Q3();function gte(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function vte(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var wte=vte,bte=wte;let _te=class{constructor(t,r,n){ge(this,"name");ge(this,"prefix");ge(this,"baseEncode");this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ete=class{constructor(t,r,n){ge(this,"name");ge(this,"prefix");ge(this,"baseDecode");ge(this,"prefixCodePoint");if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return eN(this,t)}},Ate=class{constructor(t){ge(this,"decoders");this.decoders=t}or(t){return eN(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function eN(e,t){return new Ate({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}let Ste=class{constructor(t,r,n,s){ge(this,"name");ge(this,"prefix");ge(this,"baseEncode");ge(this,"baseDecode");ge(this,"encoder");ge(this,"decoder");this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new _te(t,r,n),this.decoder=new Ete(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function tN({name:e,prefix:t,encode:r,decode:n}){return new Ste(e,t,r,n)}function rN({name:e,prefix:t,alphabet:r}){const{encode:n,decode:s}=bte(r,e);return tN({prefix:t,name:e,encode:n,decode:i=>gte(s(i))})}function xte(e,t,r,n){const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function $te(e,t,r){const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o!==0&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function ys({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return tN({prefix:t,name:e,encode(s){return $te(s,n,r)},decode(s){return xte(s,n,r,e)}})}ys({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ys({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ys({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ys({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ys({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ys({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ys({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ys({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const Ok=ys({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Kg=rN({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});rN({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});ys({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ys({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const lu=ys({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ys({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Dte(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function Cte(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function Tk(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var ry=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Ik=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const Lg=new TextEncoder,yd=new TextDecoder;let xc=class ki{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new ki(t,"ArrayBuffer")}static asyncIterable(t){if(!Cte(t))throw new TypeError("Input must be of type AsyncIterable.");return new ki(t,"AsyncIterable")}static base32Z(t){return new ki(t,"Base32Z")}static base58Btc(t){return new ki(t,"Base58Btc")}static base64Url(t){return new ki(t,"Base64Url")}static bufferSource(t){return new ki(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new ki(t,"Hex")}static multibase(t){return new ki(t,"Multibase")}static object(t){return new ki(t,"Object")}static string(t){return new ki(t,"String")}static uint8Array(t){return new ki(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Kg.baseDecode(this.data).buffer;case"Base64Url":return lu.baseDecode(this.data).buffer;case"BufferSource":{if(Tk(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Dte(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return ry(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Ok.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return Kg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Kg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return lu.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return lu.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=Lg.encode(t);return lu.baseEncode(r)}case"String":{const t=Lg.encode(this.data);return lu.baseEncode(t)}case"Uint8Array":return lu.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return ry(this,void 0,void 0,function*(){var t,r,n,s;switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=Ik(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return ki.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return ki.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=lu.baseDecode(this.data),r=yd.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=yd.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return ry(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return yd.decode(this.data);case"Base64Url":{const t=lu.baseDecode(this.data);return yd.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return yd.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return ry(this,void 0,void 0,function*(){var t,r,n,s;switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=Ik(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=yd.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=yd.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Ok.baseDecode(this.data);case"Base58Btc":return Kg.baseDecode(this.data);case"Base64Url":return lu.baseDecode(this.data);case"BufferSource":{const t=Tk(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return Lg.encode(t)}case"String":return Lg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return ry(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Pte=nN,Bk=128,kte=127,Ote=~kte,Tte=Math.pow(2,31);function nN(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Tte;)t[r++]=e&255|Bk,e/=128;for(;e&Ote;)t[r++]=e&255|Bk,e>>>=7;return t[r]=e|0,nN.bytes=r-n+1,t}var Ite=d2,Bte=128,Fk=127;function d2(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw d2.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&Fk)<<s:(o&Fk)*Math.pow(2,s),s+=7}while(o>=Bte);return d2.bytes=i-n,r}var Fte=Math.pow(2,7),Nte=Math.pow(2,14),Rte=Math.pow(2,21),Mte=Math.pow(2,28),jte=Math.pow(2,35),Ute=Math.pow(2,42),Kte=Math.pow(2,49),Lte=Math.pow(2,56),qte=Math.pow(2,63),Vte=function(e){return e<Fte?1:e<Nte?2:e<Rte?3:e<Mte?4:e<jte?5:e<Ute?6:e<Kte?7:e<Lte?8:e<qte?9:10},Hte={encode:Pte,decode:Ite,encodingLength:Vte},qw=Hte;function Nk(e,t=0){return[qw.decode(e,t),qw.decode.bytes]}function zte(e,t,r=0){return qw.encode(e,t,r),t}function Wte(e){return qw.encodingLength(e)}let Vl=class Wc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Wc.codeToName.has(n)?n:Wc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=Wte(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),zte(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=Nk(r);return n}static getCodeFromName(t){const{name:r}=t,n=Wc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Wc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Wc.codeToName.set(t.code,t.name),Wc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=Nk(r),i=Wc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Vl.codeToName=new Map;Vl.nameToCode=new Map;Vl.registerCodec({code:237,name:"ed25519-pub"});Vl.registerCodec({code:4864,name:"ed25519-priv"});Vl.registerCodec({code:236,name:"x25519-pub"});Vl.registerCodec({code:4866,name:"x25519-priv"});Vl.registerCodec({code:231,name:"secp256k1-pub"});Vl.registerCodec({code:4865,name:"secp256k1-priv"});function Jte(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Gte=Jte,Xte=Gte;const Zte=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let Yte=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Qte=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return iN(this,t)}},ere=class{constructor(t){this.decoders=t}or(t){return iN(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const iN=(e,t)=>new ere({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let tre=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Yte(t,r,n),this.decoder=new Qte(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const sN=({name:e,prefix:t,encode:r,decode:n})=>new tre(e,t,r,n),oN=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=Xte(r,t);return sN({prefix:e,name:t,encode:n,decode:i=>Zte(s(i))})},rre=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},nre=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ms=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>sN({prefix:t,name:e,encode(s){return nre(s,n,r)},decode(s){return rre(s,n,r,e)}});ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const Rk=ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),qg=oN({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});oN({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const du=ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function ire(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function sre(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function Mk(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var ny=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},jk=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const Vg=new TextEncoder,md=new TextDecoder;let Gt=class Oi{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Oi(t,"ArrayBuffer")}static asyncIterable(t){if(!sre(t))throw new TypeError("Input must be of type AsyncIterable.");return new Oi(t,"AsyncIterable")}static base32Z(t){return new Oi(t,"Base32Z")}static base58Btc(t){return new Oi(t,"Base58Btc")}static base64Url(t){return new Oi(t,"Base64Url")}static bufferSource(t){return new Oi(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Oi(t,"Hex")}static multibase(t){return new Oi(t,"Multibase")}static object(t){return new Oi(t,"Object")}static string(t){return new Oi(t,"String")}static uint8Array(t){return new Oi(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return qg.baseDecode(this.data).buffer;case"Base64Url":return du.baseDecode(this.data).buffer;case"BufferSource":{if(Mk(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return ire(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return ny(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Rk.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return qg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return qg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return du.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return du.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=Vg.encode(t);return du.baseEncode(r)}case"String":{const t=Vg.encode(this.data);return du.baseEncode(t)}case"Uint8Array":return du.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,n,s;return ny(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=jk(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Oi.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Oi.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=du.baseDecode(this.data),r=md.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=md.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return ny(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return md.decode(this.data);case"Base64Url":{const t=du.baseDecode(this.data);return md.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return md.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,n,s;return ny(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=jk(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=md.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=md.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Rk.baseDecode(this.data);case"Base58Btc":return qg.baseDecode(this.data);case"Base64Url":return du.baseDecode(this.data);case"BufferSource":{const t=Mk(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return Vg.encode(t)}case"String":return Vg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return ny(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var ore=aN,Uk=128,are=127,ure=~are,cre=Math.pow(2,31);function aN(e,t,r){t=t||[],r=r||0;for(var n=r;e>=cre;)t[r++]=e&255|Uk,e/=128;for(;e&ure;)t[r++]=e&255|Uk,e>>>=7;return t[r]=e|0,aN.bytes=r-n+1,t}var lre=f2,dre=128,Kk=127;function f2(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw f2.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&Kk)<<s:(o&Kk)*Math.pow(2,s),s+=7}while(o>=dre);return f2.bytes=i-n,r}var fre=Math.pow(2,7),pre=Math.pow(2,14),hre=Math.pow(2,21),yre=Math.pow(2,28),mre=Math.pow(2,35),gre=Math.pow(2,42),vre=Math.pow(2,49),wre=Math.pow(2,56),bre=Math.pow(2,63),_re=function(e){return e<fre?1:e<pre?2:e<hre?3:e<yre?4:e<mre?5:e<gre?6:e<vre?7:e<wre?8:e<bre?9:10},Ere={encode:ore,decode:lre,encodingLength:_re},Vw=Ere;const Lk=(e,t=0)=>[Vw.decode(e,t),Vw.decode.bytes],Are=(e,t,r=0)=>(Vw.encode(e,t,r),t),Sre=e=>Vw.encodingLength(e);let Hl=class Jc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Jc.codeToName.has(n)?n:Jc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=Sre(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),Are(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=Lk(r);return n}static getCodeFromName(t){const{name:r}=t,n=Jc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Jc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Jc.codeToName.set(t.code,t.name),Jc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=Lk(r),i=Jc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Hl.codeToName=new Map;Hl.nameToCode=new Map;Hl.registerCodec({code:237,name:"ed25519-pub"});Hl.registerCodec({code:4864,name:"ed25519-priv"});Hl.registerCodec({code:236,name:"x25519-pub"});Hl.registerCodec({code:4866,name:"x25519-priv"});Hl.registerCodec({code:231,name:"secp256k1-pub"});Hl.registerCodec({code:4865,name:"secp256k1-priv"});function uN(e){Object.keys(e).forEach(t=>{e[t]===void 0?delete e[t]:typeof e[t]=="object"&&uN(e[t])})}var gd=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let xre=class{constructor(){this.store=new Map}clear(){return gd(this,void 0,void 0,function*(){this.store.clear()})}close(){return gd(this,void 0,void 0,function*(){})}delete(t){return gd(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return gd(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return gd(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return gd(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return gd(this,void 0,void 0,function*(){this.store.set(t,r)})}};function $re(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function cN(e,...t){if(!$re(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function qk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Dre(e,t){cN(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Cre=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Wo=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Pre(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function lN(e){return typeof e=="string"&&(e=Pre(e)),cN(e),e}let kre=class{clone(){return this._cloneInto()}};function Ore(e){const t=n=>e().update(lN(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Tre(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}const Ire=(e,t,r)=>e&t^~e&r,Bre=(e,t,r)=>e&t^e&r^t&r;let Fre=class extends kre{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=X_(this.buffer)}update(t){qk(this);const{view:r,buffer:n,blockLen:s}=this;t=lN(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=X_(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qk(this),Dre(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Tre(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=X_(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}};const Nre=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$c=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dc=new Uint32Array(64);let Rre=class extends Fre{constructor(){super(64,32,8,!1),this.A=$c[0]|0,this.B=$c[1]|0,this.C=$c[2]|0,this.D=$c[3]|0,this.E=$c[4]|0,this.F=$c[5]|0,this.G=$c[6]|0,this.H=$c[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,r,n,s,i,o,a,c]}set(t,r,n,s,i,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)Dc[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const h=Dc[d-15],f=Dc[d-2],p=Wo(h,7)^Wo(h,18)^h>>>3,y=Wo(f,17)^Wo(f,19)^f>>>10;Dc[d]=y+Dc[d-7]+p+Dc[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Wo(a,6)^Wo(a,11)^Wo(a,25),f=u+h+Ire(a,c,l)+Nre[d]+Dc[d]|0,y=(Wo(n,2)^Wo(n,13)^Wo(n,22))+Bre(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Dc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Wm=Ore(()=>new Rre);var Mre=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let dN=class{static digest(t){return Mre(this,arguments,void 0,function*({data:r}){return Wm(r)})}},Dx=class{};var jre=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Ure=class extends Dx{digest(t){return jre(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield dN.digest({data:n})}})}};function Kre(e){const t=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=t(n[o]);return i}return n},r=t(e);return JSON.stringify(r)}var Lre=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const Vk="urn:jwk:";function pn(e){return Lre(this,arguments,void 0,function*({jwk:t}){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);uN(n);const s=Kre(n),i=Gt.string(s).toUint8Array(),o=yield dN.digest({data:i});return Gt.uint8Array(o).toBase64Url()})}function ff(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="EC"||typeof e.d!="string"||typeof e.x!="string")}function Cx(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e)||"d"in e||e.kty!=="EC"||typeof e.x!="string")}function cm(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="OKP"||typeof e.d!="string"||typeof e.x!="string")}function fN(e){return!(!e||typeof e!="object"||"d"in e||!("kty"in e&&"crv"in e&&"x"in e)||e.kty!=="OKP"||typeof e.x!="string")}function qre(e){if(!e||typeof e!="object")return!1;switch(e.kty){case"EC":case"OKP":case"RSA":return"d"in e;case"oct":return"k"in e;default:return!1}}var Nn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Vre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let iy=class ra{static adjustSignatureToLowS(t){return Nn(this,arguments,void 0,function*({signature:r}){const n=Ve.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return Nn(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield ra.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:Gt.uint8Array(r).toBase64Url(),x:Gt.uint8Array(n.x).toBase64Url(),y:Gt.uint8Array(n.y).toBase64Url()};return s.kid=yield pn({jwk:s}),s})}static bytesToPublicKey(t){return Nn(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield ra.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Gt.uint8Array(n.x).toBase64Url(),y:Gt.uint8Array(n.y).toBase64Url()};return s.kid=yield pn({jwk:s}),s})}static compressPublicKey(t){return Nn(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return Nn(this,arguments,void 0,function*({key:r}){const n=yield ra.privateKeyToBytes({privateKey:r}),s=yield ra.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:Gt.uint8Array(s.x).toBase64Url(),y:Gt.uint8Array(s.y).toBase64Url()};return i.kid=yield pn({jwk:i}),i})}static convertDerToCompactSignature(t){return Nn(this,arguments,void 0,function*({derSignature:r}){return Ve.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return Nn(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Nn(this,void 0,void 0,function*(){const t=Ve.utils.randomPrivateKey(),r=yield ra.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield pn({jwk:r}),r})}static getPublicKey(t){return Nn(this,arguments,void 0,function*({key:r}){var n;if(!(ff(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=Vre(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield pn({jwk:s})),s})}static privateKeyToBytes(t){return Nn(this,arguments,void 0,function*({privateKey:r}){if(!ff(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Gt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Nn(this,arguments,void 0,function*({publicKey:r}){if(!(Cx(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Gt.base64Url(r.x).toUint8Array(),i=Gt.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return Nn(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield ra.privateKeyToBytes({privateKey:r}),i=yield ra.publicKeyToBytes({publicKey:n});return Ve.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return Nn(this,arguments,void 0,function*({data:r,key:n}){const s=yield ra.privateKeyToBytes({privateKey:n}),i=Wm(r);return Ve.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return Nn(this,arguments,void 0,function*({privateKeyBytes:r}){return Ve.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return Nn(this,arguments,void 0,function*({publicKeyBytes:r}){try{Ve.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Nn(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield ra.publicKeyToBytes({publicKey:r}),o=Wm(s);return Ve.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return Nn(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Ve.getPublicKey(r));const n=Ve.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}};var Rn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Hre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let sy=class na{static adjustSignatureToLowS(t){return Rn(this,arguments,void 0,function*({signature:r}){const n=He.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return Rn(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield na.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:Gt.uint8Array(r).toBase64Url(),x:Gt.uint8Array(n.x).toBase64Url(),y:Gt.uint8Array(n.y).toBase64Url()};return s.kid=yield pn({jwk:s}),s})}static bytesToPublicKey(t){return Rn(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield na.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Gt.uint8Array(n.x).toBase64Url(),y:Gt.uint8Array(n.y).toBase64Url()};return s.kid=yield pn({jwk:s}),s})}static compressPublicKey(t){return Rn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return Rn(this,arguments,void 0,function*({key:r}){const n=yield na.privateKeyToBytes({privateKey:r}),s=yield na.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:Gt.uint8Array(s.x).toBase64Url(),y:Gt.uint8Array(s.y).toBase64Url()};return i.kid=yield pn({jwk:i}),i})}static convertDerToCompactSignature(t){return Rn(this,arguments,void 0,function*({derSignature:r}){return He.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return Rn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Rn(this,void 0,void 0,function*(){const t=He.utils.randomPrivateKey(),r=yield na.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield pn({jwk:r}),r})}static getPublicKey(t){return Rn(this,arguments,void 0,function*({key:r}){var n;if(!(ff(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=Hre(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield pn({jwk:s})),s})}static privateKeyToBytes(t){return Rn(this,arguments,void 0,function*({privateKey:r}){if(!ff(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Gt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Rn(this,arguments,void 0,function*({publicKey:r}){if(!(Cx(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Gt.base64Url(r.x).toUint8Array(),i=Gt.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return Rn(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield na.privateKeyToBytes({privateKey:r}),i=yield na.publicKeyToBytes({publicKey:n});return He.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return Rn(this,arguments,void 0,function*({data:r,key:n}){const s=yield na.privateKeyToBytes({privateKey:n}),i=Wm(r);return He.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return Rn(this,arguments,void 0,function*({privateKeyBytes:r}){return He.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return Rn(this,arguments,void 0,function*({publicKeyBytes:r}){try{He.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Rn(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield na.publicKeyToBytes({publicKey:r}),o=Wm(s);return He.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return Rn(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=He.getPublicKey(r));const n=He.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}};var oy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Hk=class extends Dx{computePublicKey(t){return oy(this,arguments,void 0,function*({key:r}){if(!ff(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield iy.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield sy.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return oy(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield iy.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield sy.generateKey();return n.alg="ES256",n}}})}getPublicKey(t){return oy(this,arguments,void 0,function*({key:r}){if(!ff(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield iy.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield sy.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return oy(this,arguments,void 0,function*({key:r,data:n}){if(!ff(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield iy.sign({key:r,data:n});case"P-256":return yield sy.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return oy(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!Cx(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield iy.verify({key:r,signature:n,data:s});case"P-256":return yield sy.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var Ds=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},zre=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let ay=class Gc{static bytesToPrivateKey(t){return Ds(this,arguments,void 0,function*({privateKeyBytes:r}){const n=Zt.getPublicKey(r),s={crv:"Ed25519",d:Gt.uint8Array(r).toBase64Url(),kty:"OKP",x:Gt.uint8Array(n).toBase64Url()};return s.kid=yield pn({jwk:s}),s})}static bytesToPublicKey(t){return Ds(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:Gt.uint8Array(r).toBase64Url()};return n.kid=yield pn({jwk:n}),n})}static computePublicKey(t){return Ds(this,arguments,void 0,function*({key:r}){const n=yield Gc.privateKeyToBytes({privateKey:r}),s=Zt.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:Gt.uint8Array(s).toBase64Url()};return i.kid=yield pn({jwk:i}),i})}static convertPrivateKeyToX25519(t){return Ds(this,arguments,void 0,function*({privateKey:r}){const n=yield Gc.privateKeyToBytes({privateKey:r}),s=S0(n),i=Zn.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:Gt.uint8Array(s).toBase64Url(),x:Gt.uint8Array(i).toBase64Url()};return o.kid=yield pn({jwk:o}),o})}static convertPublicKeyToX25519(t){return Ds(this,arguments,void 0,function*({publicKey:r}){const n=yield Gc.publicKeyToBytes({publicKey:r});if(!(yield Gc.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=A0(n),o={kty:"OKP",crv:"X25519",x:Gt.uint8Array(i).toBase64Url()};return o.kid=yield pn({jwk:o}),o})}static generateKey(){return Ds(this,void 0,void 0,function*(){const t=Zt.utils.randomPrivateKey(),r=yield Gc.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield pn({jwk:r}),r})}static getPublicKey(t){return Ds(this,arguments,void 0,function*({key:r}){var n;if(!(cm(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=zre(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield pn({jwk:s})),s})}static privateKeyToBytes(t){return Ds(this,arguments,void 0,function*({privateKey:r}){if(!cm(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Gt.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Ds(this,arguments,void 0,function*({publicKey:r}){if(!fN(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Gt.base64Url(r.x).toUint8Array()})}static sign(t){return Ds(this,arguments,void 0,function*({key:r,data:n}){const s=yield Gc.privateKeyToBytes({privateKey:r});return Zt.sign(n,s)})}static validatePublicKey(t){return Ds(this,arguments,void 0,function*({publicKeyBytes:r}){try{Zt.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Ds(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Gc.publicKeyToBytes({publicKey:r});return Zt.verify(n,s,i)})}};var uy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Wre=class extends Dx{computePublicKey(t){return uy(this,arguments,void 0,function*({key:r}){if(!cm(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield ay.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return uy(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield ay.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(t){return uy(this,arguments,void 0,function*({key:r}){if(!cm(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield ay.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return uy(this,arguments,void 0,function*({key:r,data:n}){if(!cm(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield ay.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return uy(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!fN(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield ay.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var fu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const Z_={Ed25519:{implementation:Wre,names:["Ed25519"]},secp256k1:{implementation:Hk,names:["ES256K","secp256k1"]},secp256r1:{implementation:Hk,names:["ES256","secp256r1"]},"SHA-256":{implementation:Ure,names:["SHA-256"]}};let Jre=class{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=(r=t==null?void 0:t.keyStore)!==null&&r!==void 0?r:new xre}digest(t){return fu(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(t){return fu(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(t){return fu(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${Vk}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(t){return fu(this,arguments,void 0,function*({key:r}){const n=yield pn({jwk:r});return`${Vk}${n}`})}getPublicKey(t){return fu(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(t){return fu(this,arguments,void 0,function*({key:r}){var n;if(!qre(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield pn({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(t){return fu(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(t){return fu(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:t}){var r;const n=(r=Z_[t])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:t}){const r=t.alg,n=t.crv;for(const s in Z_){const i=Z_[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(t){return fu(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};function Gre(){return Cre.randomUUID()}var Jm;(function(e){e.authentication="authentication",e.assertionMethod="assertionMethod",e.keyAgreement="keyAgreement",e.capabilityInvocation="capabilityInvocation",e.capabilityDelegation="capabilityDelegation"})(Jm||(Jm={}));const Qn={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};let Qt=class pN{constructor({method:t,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${t}:${r}`,this.method=t,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(t){if(!t)return null;const r=pN.DID_URI_PATTERN.exec(t);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,c={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(c.path=i),o&&(c.query=o.slice(1)),a&&(c.fragment=a.slice(1)),o){const l={},u=o.slice(1).split("&");for(const d of u){const[h,f]=d.split("=");l[h]=f}c.params=l}return c}};Qt.METHOD_PATTERN="([a-z0-9]+)";Qt.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Qt.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Qt.PCT_ENCODED_PATTERN})`;Qt.METHOD_ID_PATTERN=`((?:${Qt.ID_CHAR_PATTERN}*:)*(${Qt.ID_CHAR_PATTERN}+))`;Qt.PATH_PATTERN="(/[^#?]*)?";Qt.QUERY_PATTERN="([?][^#]*)?";Qt.FRAGMENT_PATTERN="(#.*)?";Qt.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Qt.METHOD_PATTERN}):(?<id>${Qt.METHOD_ID_PATTERN})(?<path>${Qt.PATH_PATTERN})(?<query>${Qt.QUERY_PATTERN})(?<fragment>${Qt.FRAGMENT_PATTERN})$`);let it=class hN extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hN)}};var Ge;(function(e){e.InvalidDid="invalidDid",e.MethodNotSupported="methodNotSupported",e.InternalError="internalError",e.InvalidDidDocument="invalidDidDocument",e.InvalidDidDocumentLength="invalidDidDocumentLength",e.InvalidDidUrl="invalidDidUrl",e.InvalidPreviousDidProof="invalidPreviousDidProof",e.InvalidPublicKey="invalidPublicKey",e.InvalidPublicKeyLength="invalidPublicKeyLength",e.InvalidPublicKeyType="invalidPublicKeyType",e.InvalidSignature="invalidSignature",e.NotFound="notFound",e.RepresentationNotSupported="representationNotSupported",e.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(Ge||(Ge={}));function Xre(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Zre=Xre,Yre=Zre;const Qre=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let ene=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},tne=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return yN(this,t)}},rne=class{constructor(t){this.decoders=t}or(t){return yN(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const yN=(e,t)=>new rne({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let nne=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new ene(t,r,n),this.decoder=new tne(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const mN=({name:e,prefix:t,encode:r,decode:n})=>new nne(e,t,r,n),gN=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=Yre(r,t);return mN({prefix:e,name:t,encode:n,decode:i=>Qre(s(i))})},ine=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},sne=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},gs=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>mN({prefix:t,name:e,encode(s){return sne(s,n,r)},decode(s){return ine(s,n,r,e)}});gs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});gs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});gs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});gs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});gs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});gs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});gs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});gs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const zk=gs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Hg=gN({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});gN({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});gs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});gs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const pu=gs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});gs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function one(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function ane(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function p2(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var cy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Wk=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const zg=new TextEncoder,vd=new TextDecoder;let lt=class Ti{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Ti(t,"ArrayBuffer")}static asyncIterable(t){if(!ane(t))throw new TypeError("Input must be of type AsyncIterable.");return new Ti(t,"AsyncIterable")}static base32Z(t){return new Ti(t,"Base32Z")}static base58Btc(t){return new Ti(t,"Base58Btc")}static base64Url(t){return new Ti(t,"Base64Url")}static bufferSource(t){return new Ti(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ti(t,"Hex")}static multibase(t){return new Ti(t,"Multibase")}static object(t){return new Ti(t,"Object")}static string(t){return new Ti(t,"String")}static uint8Array(t){return new Ti(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Hg.baseDecode(this.data).buffer;case"Base64Url":return pu.baseDecode(this.data).buffer;case"BufferSource":{if(p2(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return one(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return cy(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return zk.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return Hg.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Hg.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return pu.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return pu.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=zg.encode(t);return pu.baseEncode(r)}case"String":{const t=zg.encode(this.data);return pu.baseEncode(t)}case"Uint8Array":return pu.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,n,s;return cy(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=Wk(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ti.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ti.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=pu.baseDecode(this.data),r=vd.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=vd.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return cy(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return vd.decode(this.data);case"Base64Url":{const t=pu.baseDecode(this.data);return vd.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return vd.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,n,s;return cy(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=Wk(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=vd.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=vd.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return zk.baseDecode(this.data);case"Base58Btc":return Hg.baseDecode(this.data);case"Base64Url":return pu.baseDecode(this.data);case"BufferSource":{const t=p2(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return zg.encode(t)}case"String":return zg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return cy(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var une=vN,Jk=128,cne=127,lne=~cne,dne=Math.pow(2,31);function vN(e,t,r){t=t||[],r=r||0;for(var n=r;e>=dne;)t[r++]=e&255|Jk,e/=128;for(;e&lne;)t[r++]=e&255|Jk,e>>>=7;return t[r]=e|0,vN.bytes=r-n+1,t}var fne=h2,pne=128,Gk=127;function h2(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw h2.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&Gk)<<s:(o&Gk)*Math.pow(2,s),s+=7}while(o>=pne);return h2.bytes=i-n,r}var hne=Math.pow(2,7),yne=Math.pow(2,14),mne=Math.pow(2,21),gne=Math.pow(2,28),vne=Math.pow(2,35),wne=Math.pow(2,42),bne=Math.pow(2,49),_ne=Math.pow(2,56),Ene=Math.pow(2,63),Ane=function(e){return e<hne?1:e<yne?2:e<mne?3:e<gne?4:e<vne?5:e<wne?6:e<bne?7:e<_ne?8:e<Ene?9:10},Sne={encode:une,decode:fne,encodingLength:Ane},Hw=Sne;const Xk=(e,t=0)=>[Hw.decode(e,t),Hw.decode.bytes],xne=(e,t,r=0)=>(Hw.encode(e,t,r),t),$ne=e=>Hw.encodingLength(e);let Qs=class Xc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Xc.codeToName.has(n)?n:Xc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=$ne(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),xne(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=Xk(r);return n}static getCodeFromName(t){const{name:r}=t,n=Xc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Xc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Xc.codeToName.set(t.code,t.name),Xc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=Xk(r),i=Xc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Qs.codeToName=new Map;Qs.nameToCode=new Map;Qs.registerCodec({code:237,name:"ed25519-pub"});Qs.registerCodec({code:4864,name:"ed25519-priv"});Qs.registerCodec({code:236,name:"x25519-pub"});Qs.registerCodec({code:4866,name:"x25519-priv"});Qs.registerCodec({code:231,name:"secp256k1-pub"});Qs.registerCodec({code:4865,name:"secp256k1-priv"});function wN(e){Object.keys(e).forEach(t=>{e[t]===void 0?delete e[t]:typeof e[t]=="object"&&wN(e[t])})}var wd=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Dne=class{constructor(){this.store=new Map}clear(){return wd(this,void 0,void 0,function*(){this.store.clear()})}close(){return wd(this,void 0,void 0,function*(){})}delete(t){return wd(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return wd(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return wd(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return wd(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return wd(this,void 0,void 0,function*(){this.store.set(t,r)})}};function Cne(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Pne(e,...t){if(!Cne(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Zk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kne(e,t){Pne(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function One(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const Y_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Jo=(e,t)=>e<<32-t|e>>>t,Tne=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tne)throw new Error("Non little-endian hardware is not supported");function Ine(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function bN(e){if(typeof e=="string"&&(e=Ine(e)),!One(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let Bne=class{clone(){return this._cloneInto()}};function Fne(e){const t=n=>e().update(bN(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Nne(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}class Rne extends Bne{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Y_(this.buffer)}update(t){Zk(this);const{view:r,buffer:n,blockLen:s}=this;t=bN(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Y_(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zk(this),kne(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Nne(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Y_(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}}const Mne=(e,t,r)=>e&t^~e&r,jne=(e,t,r)=>e&t^e&r^t&r,Une=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pc=new Uint32Array(64);let Kne=class extends Rne{constructor(){super(64,32,8,!1),this.A=Cc[0]|0,this.B=Cc[1]|0,this.C=Cc[2]|0,this.D=Cc[3]|0,this.E=Cc[4]|0,this.F=Cc[5]|0,this.G=Cc[6]|0,this.H=Cc[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,r,n,s,i,o,a,c]}set(t,r,n,s,i,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)Pc[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const h=Pc[d-15],f=Pc[d-2],p=Jo(h,7)^Jo(h,18)^h>>>3,y=Jo(f,17)^Jo(f,19)^f>>>10;Pc[d]=y+Pc[d-7]+p+Pc[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Jo(a,6)^Jo(a,11)^Jo(a,25),f=u+h+Mne(a,c,l)+Une[d]+Pc[d]|0,y=(Jo(n,2)^Jo(n,13)^Jo(n,22))+jne(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Pc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Gm=Fne(()=>new Kne);var Lne=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let _N=class{static digest({data:t}){return Lne(this,void 0,void 0,function*(){return Gm(t)})}},Px=class{};var qne=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Vne=class extends Px{digest({algorithm:t,data:r}){return qne(this,void 0,void 0,function*(){switch(t){case"SHA-256":return yield _N.digest({data:r})}})}};function Hne(e){const t=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=t(n[o]);return i}return n},r=t(e);return JSON.stringify(r)}var zne=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const Yk="urn:jwk:";function lr({jwk:e}){return zne(this,void 0,void 0,function*(){const t=e.kty;let r;if(t==="EC")r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(t==="oct")r={k:e.k,kty:e.kty};else if(t==="OKP")r={crv:e.crv,kty:e.kty,x:e.x};else if(t==="RSA")r={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${t}`);wN(r);const n=Hne(r),s=lt.string(n).toUint8Array(),i=yield _N.digest({data:s});return lt.uint8Array(i).toBase64Url()})}function pf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="EC"||typeof e.d!="string"||typeof e.x!="string")}function kx(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e)||"d"in e||e.kty!=="EC"||typeof e.x!="string")}function hf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="OKP"||typeof e.d!="string"||typeof e.x!="string")}function Ox(e){return!(!e||typeof e!="object"||"d"in e||!("kty"in e&&"crv"in e&&"x"in e)||e.kty!=="OKP"||typeof e.x!="string")}function Wne(e){if(!e||typeof e!="object")return!1;switch(e.kty){case"EC":case"OKP":case"RSA":return"d"in e;case"oct":return"k"in e;default:return!1}}var Mn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Jne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let ls=class ia{static adjustSignatureToLowS({signature:t}){return Mn(this,void 0,void 0,function*(){const r=Ve.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return Mn(this,void 0,void 0,function*(){const r=yield ia.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"secp256k1",d:lt.uint8Array(t).toBase64Url(),x:lt.uint8Array(r.x).toBase64Url(),y:lt.uint8Array(r.y).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return Mn(this,void 0,void 0,function*(){const r=yield ia.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"secp256k1",x:lt.uint8Array(r.x).toBase64Url(),y:lt.uint8Array(r.y).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:t}){return Mn(this,void 0,void 0,function*(){return Ve.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return Mn(this,void 0,void 0,function*(){const r=yield ia.privateKeyToBytes({privateKey:t}),n=yield ia.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:lt.uint8Array(n.x).toBase64Url(),y:lt.uint8Array(n.y).toBase64Url()};return s.kid=yield lr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return Mn(this,void 0,void 0,function*(){return Ve.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return Mn(this,void 0,void 0,function*(){return Ve.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return Mn(this,void 0,void 0,function*(){const t=Ve.utils.randomPrivateKey(),r=yield ia.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield lr({jwk:r}),r})}static getPublicKey({key:t}){var r;return Mn(this,void 0,void 0,function*(){if(!(pf(t)&&t.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let n=Jne(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield lr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return Mn(this,void 0,void 0,function*(){if(!pf(t))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return lt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Mn(this,void 0,void 0,function*(){if(!(kx(t)&&t.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=lt.base64Url(t.x).toUint8Array(),s=lt.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Mn(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield ia.privateKeyToBytes({privateKey:t}),s=yield ia.publicKeyToBytes({publicKey:r});return Ve.getSharedSecret(n,s,!0).slice(1)})}static sign({data:t,key:r}){return Mn(this,void 0,void 0,function*(){const n=yield ia.privateKeyToBytes({privateKey:r}),s=Gm(t);return Ve.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return Mn(this,void 0,void 0,function*(){return Ve.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return Mn(this,void 0,void 0,function*(){try{Ve.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return Mn(this,void 0,void 0,function*(){const s=yield ia.publicKeyToBytes({publicKey:t}),i=Gm(n);return Ve.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return Mn(this,void 0,void 0,function*(){t.byteLength===32&&(t=Ve.getPublicKey(t));const r=Ve.ProjectivePoint.fromHex(t),n=Er(r.x,32),s=Er(r.y,32);return{x:n,y:s}})}};var jn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Gne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Hs=class sa{static adjustSignatureToLowS({signature:t}){return jn(this,void 0,void 0,function*(){const r=He.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return jn(this,void 0,void 0,function*(){const r=yield sa.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"P-256",d:lt.uint8Array(t).toBase64Url(),x:lt.uint8Array(r.x).toBase64Url(),y:lt.uint8Array(r.y).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return jn(this,void 0,void 0,function*(){const r=yield sa.getCurvePoint({keyBytes:t}),n={kty:"EC",crv:"P-256",x:lt.uint8Array(r.x).toBase64Url(),y:lt.uint8Array(r.y).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:t}){return jn(this,void 0,void 0,function*(){return He.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return jn(this,void 0,void 0,function*(){const r=yield sa.privateKeyToBytes({privateKey:t}),n=yield sa.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:lt.uint8Array(n.x).toBase64Url(),y:lt.uint8Array(n.y).toBase64Url()};return s.kid=yield lr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return jn(this,void 0,void 0,function*(){return He.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return jn(this,void 0,void 0,function*(){return He.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return jn(this,void 0,void 0,function*(){const t=He.utils.randomPrivateKey(),r=yield sa.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield lr({jwk:r}),r})}static getPublicKey({key:t}){var r;return jn(this,void 0,void 0,function*(){if(!(pf(t)&&t.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let n=Gne(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield lr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return jn(this,void 0,void 0,function*(){if(!pf(t))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return lt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return jn(this,void 0,void 0,function*(){if(!(kx(t)&&t.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=lt.base64Url(t.x).toUint8Array(),s=lt.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return jn(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield sa.privateKeyToBytes({privateKey:t}),s=yield sa.publicKeyToBytes({publicKey:r});return He.getSharedSecret(n,s,!0).slice(1)})}static sign({data:t,key:r}){return jn(this,void 0,void 0,function*(){const n=yield sa.privateKeyToBytes({privateKey:r}),s=Gm(t);return He.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return jn(this,void 0,void 0,function*(){return He.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return jn(this,void 0,void 0,function*(){try{He.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return jn(this,void 0,void 0,function*(){const s=yield sa.publicKeyToBytes({publicKey:t}),i=Gm(n);return He.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return jn(this,void 0,void 0,function*(){t.byteLength===32&&(t=He.getPublicKey(t));const r=He.ProjectivePoint.fromHex(t),n=Er(r.x,32),s=Er(r.y,32);return{x:n,y:s}})}};var ly=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Qk=class extends Px{computePublicKey({key:t}){return ly(this,void 0,void 0,function*(){if(!pf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield ls.computePublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Hs.computePublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return ly(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const r=yield ls.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Hs.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:t}){return ly(this,void 0,void 0,function*(){if(!pf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield ls.getPublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Hs.getPublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}sign({key:t,data:r}){return ly(this,void 0,void 0,function*(){if(!pf(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":return yield ls.sign({key:t,data:r});case"P-256":return yield Hs.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:n}){return ly(this,void 0,void 0,function*(){if(!kx(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(t.crv){case"secp256k1":return yield ls.verify({key:t,signature:r,data:n});case"P-256":return yield Hs.verify({key:t,signature:r,data:n});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}};var Cs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Xne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let Ki=class Zc{static bytesToPrivateKey({privateKeyBytes:t}){return Cs(this,void 0,void 0,function*(){const r=Zt.getPublicKey(t),n={crv:"Ed25519",d:lt.uint8Array(t).toBase64Url(),kty:"OKP",x:lt.uint8Array(r).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:lt.uint8Array(t).toBase64Url()};return r.kid=yield lr({jwk:r}),r})}static computePublicKey({key:t}){return Cs(this,void 0,void 0,function*(){const r=yield Zc.privateKeyToBytes({privateKey:t}),n=Zt.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:lt.uint8Array(n).toBase64Url()};return s.kid=yield lr({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:t}){return Cs(this,void 0,void 0,function*(){const r=yield Zc.privateKeyToBytes({privateKey:t}),n=S0(r),s=Zn.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:lt.uint8Array(n).toBase64Url(),x:lt.uint8Array(s).toBase64Url()};return i.kid=yield lr({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:t}){return Cs(this,void 0,void 0,function*(){const r=yield Zc.publicKeyToBytes({publicKey:t});if(!(yield Zc.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const s=A0(r),i={kty:"OKP",crv:"X25519",x:lt.uint8Array(s).toBase64Url()};return i.kid=yield lr({jwk:i}),i})}static generateKey(){return Cs(this,void 0,void 0,function*(){const t=Zt.utils.randomPrivateKey(),r=yield Zc.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield lr({jwk:r}),r})}static getPublicKey({key:t}){var r;return Cs(this,void 0,void 0,function*(){if(!(hf(t)&&t.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let n=Xne(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield lr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return Cs(this,void 0,void 0,function*(){if(!hf(t))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return lt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Cs(this,void 0,void 0,function*(){if(!Ox(t))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return lt.base64Url(t.x).toUint8Array()})}static sign({key:t,data:r}){return Cs(this,void 0,void 0,function*(){const n=yield Zc.privateKeyToBytes({privateKey:t});return Zt.sign(r,n)})}static validatePublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){try{Zt.ExtendedPoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:n}){return Cs(this,void 0,void 0,function*(){const s=yield Zc.publicKeyToBytes({publicKey:t});return Zt.verify(r,n,s)})}};var dy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Zne=class extends Px{computePublicKey({key:t}){return dy(this,void 0,void 0,function*(){if(!hf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":{const r=yield Ki.computePublicKey({key:t});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return dy(this,void 0,void 0,function*(){switch(t){case"Ed25519":{const r=yield Ki.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:t}){return dy(this,void 0,void 0,function*(){if(!hf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":{const r=yield Ki.getPublicKey({key:t});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}sign({key:t,data:r}){return dy(this,void 0,void 0,function*(){if(!hf(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(t.crv){case"Ed25519":return yield Ki.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:n}){return dy(this,void 0,void 0,function*(){if(!Ox(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(t.crv){case"Ed25519":return yield Ki.verify({key:t,signature:r,data:n});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}};var hu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const Q_={Ed25519:{implementation:Zne,names:["Ed25519"]},secp256k1:{implementation:Qk,names:["ES256K","secp256k1"]},secp256r1:{implementation:Qk,names:["ES256","secp256r1"]},"SHA-256":{implementation:Vne,names:["SHA-256"]}};let Yu=class{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=(r=t==null?void 0:t.keyStore)!==null&&r!==void 0?r:new Dne}digest({algorithm:t,data:r}){return hu(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:t}).digest({algorithm:t,data:r})})}exportKey({keyUri:t}){return hu(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:t})})}generateKey({algorithm:t}){return hu(this,void 0,void 0,function*(){const n=yield this.getAlgorithm({algorithm:t}).generateKey({algorithm:t});if((n==null?void 0:n.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const s=`${Yk}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:t}){return hu(this,void 0,void 0,function*(){const r=yield lr({jwk:t});return`${Yk}${r}`})}getPublicKey({keyUri:t}){return hu(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:t}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:t}){var r;return hu(this,void 0,void 0,function*(){if(!Wne(t))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const n=structuredClone(t);(r=n.kid)!==null&&r!==void 0||(n.kid=yield lr({jwk:n}));const s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:t,data:r}){return hu(this,void 0,void 0,function*(){const n=yield this.getPrivateKey({keyUri:t}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:t,signature:r,data:n}){return hu(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:s}).verify({key:t,signature:r,data:n})})}getAlgorithm({algorithm:t}){var r;const n=(r=Q_[t])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:t}){const r=t.alg,n=t.crv;for(const s in Q_){const i=Q_[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:t}){return hu(this,void 0,void 0,function*(){const r=yield this._keyStore.get(t);if(!r)throw new Error(`Key not found: ${t}`);return r})}};function Yne(e){const t={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(e.alg&&Object.values(t).includes(e.alg))return e.alg;if(e.crv&&Object.keys(t).includes(e.crv))return t[e.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${e.alg}, crv=${e.crv}. Supported 'alg' values: ${Object.values(t).join(", ")}. Supported 'crv' values: ${Object.keys(t).join(", ")}.`)}var kc=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Qne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let EN=class Vy{static bytesToPrivateKey({privateKeyBytes:t}){return kc(this,void 0,void 0,function*(){const r=Zn.getPublicKey(t),n={kty:"OKP",crv:"X25519",d:lt.uint8Array(t).toBase64Url(),x:lt.uint8Array(r).toBase64Url()};return n.kid=yield lr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:t}){return kc(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:lt.uint8Array(t).toBase64Url()};return r.kid=yield lr({jwk:r}),r})}static computePublicKey({key:t}){return kc(this,void 0,void 0,function*(){const r=yield Vy.privateKeyToBytes({privateKey:t}),n=Zn.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:lt.uint8Array(n).toBase64Url()};return s.kid=yield lr({jwk:s}),s})}static generateKey(){return kc(this,void 0,void 0,function*(){const t=Zn.utils.randomPrivateKey(),r=yield Vy.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield lr({jwk:r}),r})}static getPublicKey({key:t}){var r;return kc(this,void 0,void 0,function*(){if(!(hf(t)&&t.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let n=Qne(t,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield lr({jwk:n})),n})}static privateKeyToBytes({privateKey:t}){return kc(this,void 0,void 0,function*(){if(!hf(t))throw new Error("X25519: The provided key is not a valid OKP private key.");return lt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return kc(this,void 0,void 0,function*(){if(!Ox(t))throw new Error("X25519: The provided key is not a valid OKP public key.");return lt.base64Url(t.x).toUint8Array()})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return kc(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield Vy.privateKeyToBytes({privateKey:t}),s=yield Vy.publicKeyToBytes({publicKey:r});return Zn.getSharedSecret(n,s)})}};function $o(e){if(typeof e=="string"&&e.length!==0)return e.split("#").pop()}function AN({didDocument:e}){var t,r;if(!e)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(t=e.verificationMethod)===null||t===void 0?void 0:t.filter(zw))!==null&&r!==void 0?r:[]),Object.keys(Jm).forEach(s=>{var i,o;n.push(...(o=(i=e[s])===null||i===void 0?void 0:i.filter(zw))!==null&&o!==void 0?o:[])}),n}function eie({didDocument:e}){const r=AN({didDocument:e}).map(n=>n.type);return[...new Set(r)]}function tie({didDocument:e,methodId:t}){const r=[];return Object.keys(Jm).forEach(n=>{if(Array.isArray(e[n])){const s=e[n],i=$o(t);s.some(a=>{const c=$o(a)===i,l=zw(a)&&$o(a.id)===i;return c||l})&&r.push(n)}}),r}function zw(e){return!(!e||typeof e!="object"||e===null||!("id"in e&&"type"in e&&"controller"in e)||typeof e.id!="string"||typeof e.type!="string"||typeof e.controller!="string")}function SN({keyBytes:e,multicodecCode:t,multicodecName:r}){const n=Qs.addPrefix({code:t,data:e,name:r}),s=lt.uint8Array(n).toBase58Btc();return lt.base58Btc(s).toMultibase()}function eO({multibaseKeyId:e}){try{const t=lt.multibase(e).toBase58Btc(),r=lt.base58Btc(t).toUint8Array(),{code:n,data:s,name:i}=Qs.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new it(Ge.InvalidDid,`Invalid multibase identifier: ${e}`)}}var fy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let Fl=class xN{constructor({uri:t,document:r,metadata:n,keyManager:s}){this.uri=t,this.document=r,this.metadata=n,this.keyManager=s}export(){return fy(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let t={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}t.privateKeys=r}return t})}getSigner(t){return fy(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(c=>{var l,u;return $o(c.id)===((l=$o(t==null?void 0:t.methodId))!==null&&l!==void 0?l:$o((u=this.document.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(n&&n.publicKeyJwk))throw new it(Ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:Yne(i),keyId:n.id,sign(c){return fy(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(c){return fy(this,arguments,void 0,function*({data:l,signature:u}){return yield o.verify({data:l,key:i,signature:u})})}}})}static import(t){return fy(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Yu}){var s;const i=AN({didDocument:r.document});if(i.length===0)throw new it(Ge.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const c=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:c})}return new xN({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};var tO=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let O0=class{static getSigningMethod(t){return tO(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(t,r){return tO(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var xn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},rO=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const nO="https://diddht.tbddev.org",rie=0,Oc=7200,Vv=";",di=",";var y2;(function(e){e[e.Discoverable=0]="Discoverable",e[e.Organization=1]="Organization",e[e.Government=2]="Government",e[e.Corporation=3]="Corporation",e[e.LocalBusiness=4]="LocalBusiness",e[e.SoftwarePackage=5]="SoftwarePackage",e[e.WebApp=6]="WebApp",e[e.FinancialInstitution=7]="FinancialInstitution"})(y2||(y2={}));var wi;(function(e){e[e.Ed25519=0]="Ed25519",e[e.secp256k1=1]="secp256k1",e[e.secp256r1=2]="secp256r1",e[e.X25519=3]="X25519"})(wi||(wi={}));var m2;(function(e){e.authentication="auth",e.assertionMethod="asm",e.capabilityDelegation="del",e.capabilityInvocation="inv",e.keyAgreement="agm"})(m2||(m2={}));const $N={Ed25519:wi.Ed25519,ES256K:wi.secp256k1,ES256:wi.secp256r1,"P-256":wi.secp256r1,secp256k1:wi.secp256k1,secp256r1:wi.secp256r1,X25519:wi.X25519},iO={[wi.Ed25519]:"EdDSA",[wi.secp256k1]:"ES256K",[wi.secp256r1]:"ES256",[wi.X25519]:"ECDH-ES+A256KW"};let Ww=class g2 extends O0{static create(){return xn(this,arguments,void 0,function*({keyManager:t=new Yu,options:r={}}={}){var n,s,i,o,a,c,l,u,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in $N)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const y=yield t.generateKey({algorithm:"Ed25519"}),_=yield t.getPublicKey({keyUri:y}),b=yield si.identityKeyToIdentifier({identityKey:_}),v=Object.assign(Object.assign({id:b},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(w=>{var x;return((x=w.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const w of g){const x=w.id&&w.id.split("#").pop()==="0"?y:yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});let E=(c=(a=w.id)!==null&&a!==void 0?a:S.kid)!==null&&c!==void 0?c:yield lr({jwk:S});E=`${b}#${$o(E)}`,(l=v.verificationMethod)!==null&&l!==void 0||(v.verificationMethod=[]),v.verificationMethod.push({id:E,type:"JsonWebKey",controller:(u=w.controller)!==null&&u!==void 0?u:b,publicKeyJwk:S});for(const A of(d=w.purposes)!==null&&d!==void 0?d:[])v[A]||(v[A]=[]),v[A].push(E)}(h=r.services)===null||h===void 0||h.forEach(w=>{var x;(x=v.service)!==null&&x!==void 0||(v.service=[]),w.id=`${b}#${w.id.split("#").pop()}`,v.service.push(w)});const m=new Fl({uri:b,document:v,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:t});if(!((f=r.publish)!==null&&f!==void 0)||f){const w=yield g2.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static import(t){return xn(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Yu}){var s;const i=Qt.parse(r.uri);if((i==null?void 0:i.method)!==g2.methodName)throw new it(Ge.MethodNotSupported,"Method not supported");const o=yield Fl.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var c;return((c=a.id)===null||c===void 0?void 0:c.split("#").pop())==="0"})))throw new it(Ge.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(t){return xn(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=Qt.parse(r.id);if(i&&i.method!==this.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c,l;return $o(a.id)===((c=$o(n))!==null&&c!==void 0?c:$o((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new it(Ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(t){return xn(this,arguments,void 0,function*({did:r,gatewayUri:n=nO}){return yield sO.put({did:r,gatewayUri:n})})}static resolve(t){return xn(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:nO;try{yield si.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield sO.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},Qn),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof it))throw new Error(o);return Object.assign(Object.assign({},Qn),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};Ww.methodName="dht";let sO=class Pd{static get(t){return xn(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=si.identifierToIdentityKeyBytes({didUri:r}),i=yield Pd.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield si.parseBep44GetMessage({bep44Message:i}),a=yield Pd.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(t){return xn(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield Pd.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield si.createBep44PutMessage({dnsPacket:s,publicKeyBytes:si.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield Pd.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(t){return xn(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=lt.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new it(Ge.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof it?l:new it(Ge.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new it(Ge.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new it(Ge.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new it(Ge.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(t){return xn(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=lt.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(c){throw new it(Ge.InternalError,`Failed to put Pkarr record for identifier ${s}: ${c.message}`)}return a.ok})}static fromDnsPacket(t){return xn(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},c={published:!0},l=new Map;for(const u of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(u.type!=="TXT")continue;const d=u.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=si.parseTxtDataToString(u.data);a.alsoKnownAs=h.split(di);break}case d.startsWith("cnt"):{const h=si.parseTxtDataToString(u.data);a.controller=h.includes(di)?h.split(di):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:y,a:_}=si.parseTxtDataToObject(u.data),b=lt.base64Url(p).toUint8Array(),v=wi[Number(f)];let g=yield si.keyConverter(v).bytesToPublicKey({publicKeyBytes:b});g.alg=_||iO[Number(f)];const m=d==="k0"?"0":h!==void 0?h:yield lr({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const w=`${r}#${m}`;a.verificationMethod.push({id:w,type:"JsonWebKey",controller:y??r,publicKeyJwk:g}),l.set(d,w);break}case d.startsWith("s"):{const h=si.parseTxtDataToObject(u.data),{id:f,t:p,se:y}=h,_=rO(h,["id","t","se"]),b=y.includes(di)?y.split(di):[y],v=Object.fromEntries(Object.entries(_).map(([g,m])=>[g,m.includes(di)?m.split(di):m]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},v),{id:`${r}#${f}`,type:p,serviceEndpoint:b}));break}case d.startsWith("typ"):{const{id:h}=si.parseTxtDataToObject(u.data);c.types=h.split(di).map(f=>Number(f));break}case d.startsWith("did"):{const h=v=>v.split(di).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:y,inv:_,agm:b}=si.parseTxtDataToObject(u.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),y&&(a.capabilityDelegation=h(y)),_&&(a.capabilityInvocation=h(_)),b&&(a.keyAgreement=h(b));break}}}return{didDocument:a,didDocumentMetadata:c,didResolutionMetadata:{}}})}static toDnsPacket(t){return xn(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,c,l,u;const d=[],h=[],f=new Map,p=[],y=[];if(i!==void 0){const{signature:v,previousDid:g}=i;yield si.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:Oc,data:`id=${g};s=${v}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:Oc,data:r.alsoKnownAs.join(di)}),r.controller){const v=Array.isArray(r.controller)?r.controller.join(di):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:Oc,data:v})}for(const[v,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const m=`k${v}`;y.push(m);let w=g.id.split("#").pop();f.set(w,m);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in $N))throw new it(Ge.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(c=x==null?void 0:x.crv)!==null&&c!==void 0?c:"undefined"}`);const S=wi[x.crv],E=yield si.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),A=lt.uint8Array(E).toBase64Url(),$=[`t=${S}`,`k=${A}`];w!=="0"&&(yield lr({jwk:x}))!==w&&$.unshift(`id=${w}`),x.alg!==iO[S]&&$.push(`a=${x.alg}`),g.controller!==r.id&&$.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${m}._did.`,ttl:Oc,data:$.join(Vv)})}(l=r.service)===null||l===void 0||l.forEach((v,g)=>{const m=`s${g}`;p.push(m);let{id:w,type:x,serviceEndpoint:S}=v,E=rO(v,["id","type","serviceEndpoint"]);w=$o(w),S=Array.isArray(S)?S.join(","):S;const $=Object.entries(Object.assign({id:w,t:x,se:S},E)).map(([T,R])=>`${T}=${R}`).join(Vv),I=si.chunkDataIfNeeded($);d.push({type:"TXT",name:`_${m}._did.`,ttl:Oc,data:I})});const _=[`v=${rie}`];if(y.length&&_.push(`vm=${y.join(di)}`),Object.keys(Jm).forEach(v=>{var g;const m=(g=r[v])===null||g===void 0?void 0:g.map(w=>f.get(w.split("#").pop()));if(m){const w=m2[v];_.push(`${w}=${m.join(di)}`)}}),p.length&&_.push(`svc=${p.join(di)}`),!((u=n.types)===null||u===void 0)&&u.length){const g=n.types.map(m=>typeof m=="string"?y2[m]:m);d.push({type:"TXT",name:"_typ._did.",ttl:Oc,data:`id=${g.join(di)}`})}d.push({type:"TXT",name:"_did."+Pd.getUniqueDidSuffix(r.id)+".",ttl:Oc,data:_.join(Vv)});for(const v of s||[])h.push({type:"NS",name:"_did."+Pd.getUniqueDidSuffix(r.id)+".",ttl:Oc,data:v+"."});return{id:0,type:"response",flags:xx,answers:[...d,...h]}})}static getUniqueDidSuffix(t){return t.split(":")[2]}},si=class Hv{static createBep44PutMessage(t){return xn(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Hm(r),a=Xp.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new it(Ge.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const c=yield s.sign({data:a});return{k:n,seq:i,sig:c,v:o}})}static identifierToIdentityKey(t){return xn(this,arguments,void 0,function*({didUri:r}){let n=Hv.identifierToIdentityKeyBytes({didUri:r});return yield Ki.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:t}){const r=Qt.parse(t);if(!r)throw new it(Ge.InvalidDid,`Invalid DID URI: ${t}`);if(r.method!==Ww.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=lt.base32Z(r.id).toUint8Array()}catch{throw new it(Ge.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new it(Ge.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(t){return xn(this,arguments,void 0,function*({identityKey:r}){const n=yield Ki.publicKeyToBytes({publicKey:r}),s=lt.uint8Array(n).toBase32Z();return`did:${Ww.methodName}:${s}`})}static keyConverter(t){const n={Ed25519:Ki,"P-256":{publicKeyToBytes:s=>xn(this,[s],void 0,function*({publicKey:i}){const o=yield Hs.publicKeyToBytes({publicKey:i});return yield Hs.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Hs.bytesToPublicKey,privateKeyToBytes:Hs.privateKeyToBytes,bytesToPrivateKey:Hs.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>xn(this,[s],void 0,function*({publicKey:i}){const o=yield ls.publicKeyToBytes({publicKey:i});return yield ls.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:ls.bytesToPublicKey,privateKeyToBytes:ls.privateKeyToBytes,bytesToPrivateKey:ls.bytesToPrivateKey},X25519:EN}[t];if(!n)throw new it(Ge.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static parseBep44GetMessage(t){return xn(this,arguments,void 0,function*({bep44Message:r}){const n=yield Ki.bytesToPublicKey({publicKeyBytes:r.k}),s=Xp.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Ki.verify({key:n,signature:r.sig,data:s})))throw new it(Ge.InvalidSignature,"Invalid signature for DHT BEP44 message");return $x(r.v)})}static parseTxtDataToObject(t){return this.parseTxtDataToString(t).split(Vv).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(t){if(typeof t=="string")return t;if(t instanceof Uint8Array)return lt.uint8Array(t).toString();if(Array.isArray(t))return t.map(r=>this.parseTxtDataToString(r)).join("");throw new it(Ge.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(t){return xn(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield Hv.identifierToIdentityKey({didUri:n.previousDid}),i=Hv.identifierToIdentityKeyBytes({didUri:r}),o=lt.base64Url(n.signature).toUint8Array();if(!(yield Ki.verify({key:s,data:i,signature:o})))throw new it(Ge.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(t){if(t.length<=255)return t;const r=[];for(let n=0;n<t.length;n+=255)r.push(t.slice(n,n+255));return r}};var cl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},ma;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(ma||(ma={}));const nie={Ed25519:ma.Ed25519,ES256K:ma.secp256k1,ES256:ma.secp256r1,"P-256":ma.secp256r1,secp256k1:ma.secp256k1,secp256r1:ma.secp256r1},oO="https://ion.tbd.engineering";let DN=class Hy extends O0{static create(){return cl(this,arguments,void 0,function*({keyManager:t=new Yu,options:r={}}={}){var n,s,i,o,a,c,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in nie)))throw new Error("One or more verification method algorithms are not supported");const u=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(u&&u.length!==new Set(u).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const w of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});h.push({id:w.id,publicKeyJwk:S,purposes:(a=w.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield t.generateKey({algorithm:ma.secp256k1}),p=yield t.getPublicKey({keyUri:f}),y=yield t.generateKey({algorithm:ma.secp256k1}),_=yield t.getPublicKey({keyUri:y}),b=yield py.computeLongFormDidUri({recoveryKey:p,updateKey:_,services:(c=r.services)!==null&&c!==void 0?c:[],verificationMethods:h}),{didDocument:v,didResolutionMetadata:g}=yield Hy.resolve(b,{gatewayUri:r.gatewayUri});if(v===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const m=new Fl({uri:b,document:v,metadata:{published:!1,canonicalId:b.split(":",3).join(":"),recoveryKey:p,updateKey:_},keyManager:t});if(!((l=r.publish)!==null&&l!==void 0)||l){const w=yield Hy.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static getSigningMethod(t){return cl(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=Qt.parse(r.id);if(i&&i.method!==this.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c;return a.id===(n??((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new it(Ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return cl(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Yu}){const s=Qt.parse(r.uri);if((s==null?void 0:s.method)!==Hy.methodName)throw new it(Ge.MethodNotSupported,"Method not supported");return yield Fl.import({portableDid:r,keyManager:n})})}static publish(t){return cl(this,arguments,void 0,function*({did:r,gatewayUri:n=oO}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(u=>({id:u.id,publicKeyJwk:u.publicKeyJwk,purposes:tie({didDocument:r.document,methodId:u.id})})))!==null&&i!==void 0?i:[],c=yield py.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield py.constructCreateRequest({ionDocument:c,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const u=py.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(u,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:Ge.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(t){return cl(this,arguments,void 0,function*(r,n={}){var s,i;const o=Qt.parse(r);if(!o)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==Hy.methodName)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:oO;try{const c=py.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(c);if(!l.ok)throw new it(Ge.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:u,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},Qn),u&&{didDocument:u}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(c){if(!(c instanceof it))throw new Error(c);return Object.assign(Object.assign({},Qn),{didResolutionMetadata:Object.assign({error:c.code},c.message&&{errorMessage:c.message})})}})}};DN.methodName="ion";let py=class kd{static appendPathToUrl({baseUrl:t,path:r}){const n=new URL(t);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(t){return cl(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield kd.createIonDocument({services:s,verificationMethods:i}),a=kd.normalizeJwk(r),c=kd.normalizeJwk(n);return yield P0.createLongFormDid({document:o,recoveryKey:a,updateKey:c})})}static constructCreateRequest(t){return cl(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield oi.createCreateRequest({document:r,recoveryKey:kd.normalizeJwk(n),updateKey:kd.normalizeJwk(s)})})}static createIonDocument(t){return cl(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let u=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield lr({jwk:l.publicKeyJwk});u=`${u.split("#").pop()}`;const d={id:u,publicKeyJwk:kd.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(t){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var Wg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let CN=class zy extends O0{static create(){return Wg(this,arguments,void 0,function*({keyManager:t=new Yu,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=lt.object(l).toBase64Url(),d=`did:${zy.methodName}:${u}`,f=(yield zy.resolve(d)).didDocument;return new Fl({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return Wg(this,arguments,void 0,function*({didDocument:r}){var n;const s=Qt.parse(r.id);if(s&&s.method!==this.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new it(Ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(t){return Wg(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Yu}){const s=Qt.parse(r.uri);if((s==null?void 0:s.method)!==zy.methodName)throw new it(Ge.MethodNotSupported,"Method not supported");const i=yield Fl.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new it(Ge.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return Wg(this,void 0,void 0,function*(){const n=Qt.parse(t);let s;try{s=lt.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==zy.methodName)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},Qn),{didDocument:i})})}};CN.methodName="jwk";var wo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Au;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(Au||(Au={}));const eE={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},iie={Ed25519:Au.Ed25519,ES256K:Au.secp256k1,ES256:Au.secp256r1,"P-256":Au.secp256r1,secp256k1:Au.secp256k1,secp256r1:Au.secp256r1,X25519:Au.X25519};let PN=class bu extends O0{static create(){return wo(this,arguments,void 0,function*({keyManager:t=new Yu,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=yield Rs.publicKeyToMultibaseId({publicKey:l}),d=`did:${bu.methodName}:${u}`,f=(yield bu.resolve(d,r)).didDocument;return new Fl({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return wo(this,arguments,void 0,function*({didDocument:r}){var n;const s=Qt.parse(r.id);if(s&&s.method!==this.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new it(Ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return wo(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Yu}){const s=Qt.parse(r.uri);if((s==null?void 0:s.method)!==bu.methodName)throw new it(Ge.MethodNotSupported,"Method not supported");const i=yield Fl.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new it(Ge.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return wo(this,void 0,void 0,function*(){try{const n=yield bu.createDocument({didUri:t,options:r});return Object.assign(Object.assign({},Qn),{didDocument:n})}catch(n){if(!(n instanceof it))throw new Error(n);return Object.assign(Object.assign({},Qn),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(t){return wo(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,c={id:""},l=Qt.parse(r);if(!l)throw new it(Ge.InvalidDid,`Invalid DID URI: ${r}`);const u=l.id;if(l.method!==bu.methodName)throw new it(Ge.MethodNotSupported,`Method not supported: ${l.method}`);if(!bu.validateIdentifier(l))throw new it(Ge.InvalidDid,`Invalid DID URI: ${r}`);const d=yield bu.createSignatureMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(c.id=l.uri,c.verificationMethod=[d],c.authentication=[d.id],c.assertionMethod=[d.id],c.capabilityInvocation=[d.id],c.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",y=yield this.createEncryptionMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});c.verificationMethod.push(y),c.keyAgreement=[y.id]}const h=[s];return eie({didDocument:c}).forEach(p=>{const y=eE[p];h.push(y)}),c["@context"]=h,c})}static createEncryptionMethod(t){return wo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l}=yield bu.deriveEncryptionKey({multibaseValue:n}),u=c.byteLength,d=Rs.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(u!==d)throw new it(Ge.InvalidPublicKeyLength,`Expected ${u} bytes. Actual: ${d}`);const h=SN({keyBytes:c,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new it(Ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in eE))throw new it(Ge.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new it(Ge.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield Rs.multicodecToJwk({code:l});a.publicKeyJwk=yield Rs.keyConverter(p).bytesToPublicKey({publicKeyBytes:c})}return a})}static createSignatureMethod(t){return wo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l,multicodecName:u}=eO({multibaseKeyId:n}),d=c.byteLength,h=Rs.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new it(Ge.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(u){case"secp256k1-pub":f=yield ls.validatePublicKey({publicKeyBytes:c});break;case"ed25519-pub":f=yield Ki.validatePublicKey({publicKeyBytes:c});break;case"x25519-pub":f=!0;break}if(!f)throw new it(Ge.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new it(Ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in eE))throw new it(Ge.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new it(Ge.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:y}=yield Rs.multicodecToJwk({code:l});a.publicKeyJwk=yield Rs.keyConverter(y).bytesToPublicKey({publicKeyBytes:c})}return a})}static deriveEncryptionKey(t){return wo(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=eO({multibaseKeyId:r});if(i===237){const o=yield Rs.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Ki.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Rs.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(t){const{method:r,id:n}=t,[s]=t.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&p2(n)==="String"&&n.startsWith("z")}};PN.methodName="key";let Rs=class hp{static jwkToMulticodec(t){return wo(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=hp.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:Qs.getCodeFromName({name:i}),name:i}})}static keyCompressor(t){const n={"P-256":Hs.compressPublicKey,secp256k1:ls.compressPublicKey}[t];if(!n)throw new it(Ge.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static keyConverter(t){const n={Ed25519:Ki,"P-256":Hs,secp256k1:ls,X25519:EN}[t];if(!n)throw new it(Ge.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static multicodecToJwk(t){return wo(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?Qs.getNameFromCode({code:r}):n;const s=n,i=hp.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(t){return wo(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in iie))throw new it(Ge.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield hp.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield hp.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield hp.jwkToMulticodec({jwk:r});return SN({keyBytes:s,multicodecName:i})})}};Rs.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Rs.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Rs.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var sie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};let kN=class ON extends O0{static resolve(t,r){return sie(this,void 0,void 0,function*(){const n=Qt.parse(t);if(!n)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==ON.methodName)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},Qn),{didDocument:a})}catch{return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:"notFound"}})}})}};kN.methodName="web";const oie={get:function(e){return null},set:function(e,t){return null},delete:function(e){return null},clear:function(){return null},close:function(){return null}};var aO=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class aie{constructor({cache:t,didResolvers:r}){this.didResolvers=new Map,this.cache=t||oie;for(const n of r)this.didResolvers.set(n.methodName,n)}resolve(t,r){return aO(this,void 0,void 0,function*(){const n=Qt.parse(t);if(!n)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:Ge.InvalidDid,errorMessage:`Invalid DID URI: ${t}`}});const s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},Qn),{didResolutionMetadata:{error:Ge.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});const i=yield this.cache.get(n.uri);if(i)return i;{const o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(t,r){return aO(this,void 0,void 0,function*(){const n=Qt.parse(t);if(!n)return{dereferencingMetadata:{error:Ge.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};const{service:a=[],verificationMethod:c=[]}=s,l=new Set([t,n.fragment,`#${n.fragment}`]);let u;for(let d of c)if(l.has(d.id)){u=d;break}for(let d of a)if(l.has(d.id)){u=d;break}return u?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:u,contentMetadata:i}:{dereferencingMetadata:{error:Ge.NotFound},contentStream:null,contentMetadata:{}}})}}var uO=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const uie=new Jre;class Oa{static sign(t){return uO(this,void 0,void 0,function*(){const{signerDid:r,payload:n}=t,s=yield r.getSigner();let i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);const o={typ:"JWT",alg:s.algorithm,kid:i},a=xc.object(o).toBase64Url(),c=xc.object(n).toBase64Url(),l=`${a}.${c}`,u=xc.string(l).toUint8Array(),d=yield s.sign({data:u}),h=xc.uint8Array(d).toBase64Url();return`${l}.${h}`})}static verify(t){return uO(this,void 0,void 0,function*(){const{decoded:r,encoded:n}=Oa.parse({jwt:t.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");const s=yield Oa.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);const i=s.contentStream;if(!i||!zw(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");const o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");const a=`${n.header}.${n.payload}`,c=xc.string(a).toUint8Array(),l=xc.base64Url(n.signature).toUint8Array();if(!(yield uie.verify({key:o,signature:l,data:c})))throw new Error("Signature verification failed: Integrity mismatch");return r})}static parse(t){const r=t.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);const[n,s,i]=r;let o,a;try{o=xc.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=xc.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}}Oa.didResolver=new aie({didResolvers:[Ww,DN,PN,CN,kN]});const Ce={INFO:"info",WARN:"warn",ERROR:"error"},Jw=class{constructor(e,t,r){ge(this,"tag");ge(this,"status");ge(this,"message");this.tag=e,this.status=t,this.message=r}},cie=e=>{function t(r){return r.status===Ce.ERROR}return e.filter(r=>t(r)).length>0};var th={},Tx={},TN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseDid=e.IProofType=e.IProofPurpose=void 0,function(n){n.verificationMethod="verificationMethod",n.assertionMethod="assertionMethod",n.authentication="authentication",n.keyAgreement="keyAgreement",n.contractAgreement="contactAgreement",n.capabilityInvocation="capabilityInvocation",n.capabilityDelegation="capabilityDelegation"}(e.IProofPurpose||(e.IProofPurpose={})),function(n){n.Ed25519Signature2018="Ed25519Signature2018",n.Ed25519Signature2020="Ed25519Signature2020",n.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",n.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",n.JsonWebSignature2020="JsonWebSignature2020",n.RsaSignature2018="RsaSignature2018",n.GpgSignature2020="GpgSignature2020",n.JcsEd25519Signature2020="JcsEd25519Signature2020",n.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",n.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",n.JwtProof2020="JwtProof2020"}(e.IProofType||(e.IProofType={}));const t=n=>{const s=r(n);if(s===null)throw new Error("invalid did");return s};e.parseDid=t;const r=n=>{const i="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",o="([a-z0-9]+)",a=`((?:${i}*:)*(${i}+))`,c="[a-zA-Z0-9_.:%-]",u=`((${`;${c}+=${c}*`})*)`,d="(/[^#?]*)?",h="([?][^#]*)?",f="(#.*)?",p=new RegExp(`^did:${o}:${a}${u}${d}${h}${f}$`);if(n===""||!n)return null;const y=n.match(p);if(y){const _={did:`did:${y[1]}:${y[2]}`,method:y[1],id:y[2],didUrl:n};if(y[4]){const b=y[4].slice(1).split(";");_.params={};for(const v of b){const g=v.split("=");_.params[g[0]]=g[1]}}return y[6]&&(_.path=y[6]),y[7]&&(_.query=y[7].slice(1)),y[8]&&(_.fragment=y[8].slice(1)),_}return null}})(TN);var IN={};Object.defineProperty(IN,"__esModule",{value:!0});var BN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JWT_PROOF_TYPE_2020=e.DocumentFormat=e.OriginalType=void 0,function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded"}(e.OriginalType||(e.OriginalType={})),function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.EIP712=2]="EIP712"}(e.DocumentFormat||(e.DocumentFormat={})),e.JWT_PROOF_TYPE_2020="JwtProof2020"})(BN);var FN={};Object.defineProperty(FN,"__esModule",{value:!0});(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(TN,e),r(IN,e),r(BN,e),r(FN,e)})(Tx);var Ix={},l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.ObjectUtils=void 0;let lie=class NN{static asArray(t){return Array.isArray(t)?t:[t]}static isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}static isUrlAbsolute(t){const r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;NN.isString(t)&&r.test(t)}static isString(t){return typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"}};l1.ObjectUtils=lie;(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(l1,e)})(Ix);var RN={},d1={};function v2(e){this.message=e}v2.prototype=new Error,v2.prototype.name="InvalidCharacterError";var cO=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new v2("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=t.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function die(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(cO(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(t)}catch{return cO(t)}}function Xm(e){this.message=e}function fie(e,t){if(typeof e!="string")throw new Xm("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(die(e.split(".")[r]))}catch(n){throw new Xm("Invalid token specified: "+n.message)}}Xm.prototype=new Error,Xm.prototype.name="InvalidTokenError";const pie=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:Xm,default:fie},Symbol.toStringTag,{value:"Module"})),hie=qV(pie);var lO=tr&&tr.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r},yie=tr&&tr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d1,"__esModule",{value:!0});d1.CredentialMapper=void 0;const Go=Tx,Qf=yie(hie),dO=Ix;class _t{static decodeVerifiablePresentation(t){var r;if(_t.isJwtEncoded(t)){const n=(0,Qf.default)(t),s=(0,Qf.default)(t,{header:!0});return n.vp.proof={type:Go.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Go.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:t},n}else return _t.isJwtDecodedPresentation(t)?t:_t.isJsonLdAsString(t)?JSON.parse(t):t}static decodeVerifiableCredential(t){var r;if(_t.isJwtEncoded(t)){const n=(0,Qf.default)(t),s=(0,Qf.default)(t,{header:!0});return n.vc.proof={type:Go.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Go.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:t},n}else return _t.isJwtDecodedCredential(t)?t:_t.isJsonLdAsString(t)?JSON.parse(t):t}static toWrappedVerifiablePresentation(t,r){const n=_t.getFirstProof(t),s=typeof t!="string"&&_t.hasJWTProofType(t)?n==null?void 0:n.jwt:t;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");const i=_t.decodeVerifiablePresentation(s),o=_t.isJwtEncoded(s),a=_t.isJwtDecodedPresentation(s),c=o?Go.OriginalType.JWT_ENCODED:a?Go.OriginalType.JWT_DECODED:Go.OriginalType.JSONLD,l=a||o?"jwt_vp":"ldp_vp";let u;if(o||a?u=_t.jwtDecodedPresentationToUniformPresentation(i,!1,r):u=i,!u||!("verifiableCredential"in u)||!u.verifiableCredential||u.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");const d=_t.toWrappedVerifiableCredentials(u.verifiableCredential,r),h=Object.assign(Object.assign({},u),{verifiableCredential:d});return{type:c,format:l,original:s,decoded:i,presentation:h,vcs:d}}static toWrappedVerifiableCredentials(t,r){return t.map(n=>_t.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(t,r){var n;const s=_t.getFirstProof(t),i=_t.hasJWTProofType(t)&&s&&(n=s.jwt)!==null&&n!==void 0?n:t;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");const o=_t.decodeVerifiableCredential(i),a=_t.isJwtEncoded(i),c=_t.isJwtDecodedCredential(i),l=a?Go.OriginalType.JWT_ENCODED:c?Go.OriginalType.JWT_DECODED:Go.OriginalType.JSONLD,u=a||c?_t.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||c?"jwt_vc":"ldp_vc",type:l,credential:u}}static isJwtEncoded(t){return dO.ObjectUtils.isString(t)&&t.startsWith("ey")}static isJsonLdAsString(t){return dO.ObjectUtils.isString(t)&&t.includes("@context")}static isJwtDecodedCredential(t){return t.vc!==void 0&&t.iss!==void 0}static isJwtDecodedPresentation(t){return t.vp!==void 0&&t.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(t,r=!0,n){return _t.jwtDecodedPresentationToUniformPresentation((0,Qf.default)(t),r,n)}static jwtDecodedPresentationToUniformPresentation(t,r=!0,n){const{iss:s,aud:i,jti:o,vp:a}=t,c=lO(t,["iss","aud","jti","vp"]),l=Object.assign(Object.assign({},c),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");l.verifiableCredential=a.verifiableCredential.map(u=>_t.toUniformCredential(u,n))}if(s){const u=l.holder;if(u&&u!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${u})`);l.holder=s}if(i){const u=l.verifier;if(u&&u!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${u})`);l.verifier=i}if(o){const u=l.id;if(u&&u!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${u})`);l.id=o}return l}static toUniformCredential(t,r){var n;const s=typeof t!="string"&&_t.hasJWTProofType(t)?(n=_t.getFirstProof(t))===null||n===void 0?void 0:n.jwt:t;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");const i=_t.decodeVerifiableCredential(s),o=_t.isJwtEncoded(s);return _t.isJwtDecodedCredential(s)||o?_t.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(t,r){var n;const s=_t.getFirstProof(t),i=typeof t!="string"&&_t.hasJWTProofType(t)?s==null?void 0:s.jwt:t;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");const o=_t.decodeVerifiablePresentation(i),a=_t.isJwtEncoded(i),c=_t.isJwtDecodedPresentation(i),l=a||c?_t.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r!=null&&r.addContextIfMissing&&!l["@context"]&&(l["@context"]=["https://www.w3.org/2018/credentials/v1"]),l.verifiableCredential=(n=l.verifiableCredential)===null||n===void 0?void 0:n.map(u=>_t.toUniformCredential(u,r)),l}static jwtEncodedCredentialToUniformCredential(t,r){return _t.jwtDecodedCredentialToUniformCredential((0,Qf.default)(t),r)}static jwtDecodedCredentialToUniformCredential(t,r){const{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:c}=t,l=lO(t,["exp","nbf","iss","vc","sub","jti"]),u=Object.assign(Object.assign({},l),o),d=(r==null?void 0:r.maxTimeSkewInMS)!==void 0?r.maxTimeSkewInMS:999;if(n){const h=u.expirationDate,f=parseInt(n.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){const y=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||y>d)throw new Error(`Inconsistent expiration dates between JWT claim (${p}) and VC value (${h})`)}u.expirationDate=p}if(s){const h=u.issuanceDate,f=parseInt(s.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){const y=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||y>d)throw new Error(`Inconsistent issuance dates between JWT claim (${p}) and VC value (${h})`)}u.issuanceDate=p}if(i){const h=u.issuer;if(h){if(typeof h=="string"){if(h!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h})`)}else if(h.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h.id})`)}else u.issuer=i}if(a){const h=Array.isArray(u.credentialSubject)?u.credentialSubject:[u.credentialSubject];for(let f=0;f<h.length;f++){const p=h[f].id;if(p&&p!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${p})`);Array.isArray(u.credentialSubject)?u.credentialSubject[f].id=a:u.credentialSubject.id=a}}if(c){const h=u.id;if(h&&h!==c)throw new Error(`Inconsistent credential ids between JWT claim (${c}) and VC value (${h})`);u.id=c}return u}static toExternalVerifiableCredential(t){let r;if(t.proof){if(!t.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!t.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!t.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!t.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},t.proof),{type:t.proof.type,created:t.proof.created,proofPurpose:t.proof.proofPurpose,verificationMethod:t.proof.verificationMethod})}return Object.assign(Object.assign({},t),{type:t.type?typeof t.type=="string"?[t.type]:t.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(t){const r=_t.detectDocumentType(t);if(typeof t=="string"){if(r===0)return _t.toCompactJWT(t);if(r===1)return JSON.parse(t)}return t}static storedPresentationToOriginalFormat(t){const r=_t.detectDocumentType(t);if(typeof t=="string"){if(r===0)return _t.toCompactJWT(t);if(r===1)return JSON.parse(t)}return t}static toCompactJWT(t){if(!t||_t.detectDocumentType(t)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof t=="string")return t;let r;if("vp"in t?r=t.vp.proof:"vc"in t?r=t.vc.proof:r=Array.isArray(t.proof)?t.proof[0].jwt:t.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(t){if(typeof t=="string")return this.isJsonLdAsString(t)?1:0;const r="vc"in t?t.vc.proof:"vp"in t?t.vp.proof:t.proof,n=Array.isArray(r)?r[0]:r;return n!=null&&n.jwt?0:(n==null?void 0:n.type)==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(t){var r;return typeof t=="string"?!1:!!(!((r=_t.getFirstProof(t))===null||r===void 0)&&r.jwt)}static getFirstProof(t){if(!t||typeof t=="string")return;const r="vc"in t?t.vc.proof:"vp"in t?t.vp.proof:t.proof;return Array.isArray(r)?r[0]:r}}d1.CredentialMapper=_t;(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(d1,e)})(RN);(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Tx,e),r(Ix,e),r(RN,e)})(th);var w2;(function(e){e.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",e.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",e.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",e.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",e.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",e.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",e.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",e.SUBJECT_IS_NOT_ISSUER="subject is not issuer",e.SUBJECT_IS_ISSUER="subject is issuer",e.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",e.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",e.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",e.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",e.UNKNOWN_EXCEPTION="unknown exception occurred: ",e.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(w2||(w2={}));const nn=w2;var Ne,Ro,MN,Yc,Fe,Bx,jN,Te,or,de,xt,Ft,fr,Ee,Be,Ze,Oe;Ne={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ro={};Ro[Ne.BooleanLiteral]="Boolean";Ro[Ne.EOF]="<end>";Ro[Ne.Identifier]="Identifier";Ro[Ne.Keyword]="Keyword";Ro[Ne.NullLiteral]="Null";Ro[Ne.NumericLiteral]="Numeric";Ro[Ne.Punctuator]="Punctuator";Ro[Ne.StringLiteral]="String";Ro[Ne.RegularExpression]="RegularExpression";MN=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];var ot={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};Yc={Data:1,Get:2,Set:4};Fe={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Bx={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function T0(e,t){if(!e)throw new Error("ASSERT: "+t)}function Pu(e){return e>=48&&e<=57}function UN(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function lm(e){return"01234567".indexOf(e)>=0}function mie(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function $f(e){return e===10||e===13||e===8232||e===8233}function gh(e){return e==64||e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Bx.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function Gw(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Bx.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function gie(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function I0(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function eo(e){return e==="eval"||e==="arguments"}function vie(e){if(or&&I0(e))return!0;switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}}function b2(e,t,r,n,s){var i;T0(typeof r=="number","Comment must have valid position"),!(Ze.lastCommentStart>=r)&&(Ze.lastCommentStart=r,i={type:e,value:t},Oe.range&&(i.range=[r,n]),Oe.loc&&(i.loc=s),Oe.comments.push(i),Oe.attachComment&&(Oe.leadingComments.push(i),Oe.trailingComments.push(i)))}function tE(e){var t,r,n,s;for(t=de-e,r={start:{line:xt,column:de-Ft-e}};de<fr;)if(n=Te.charCodeAt(de),++de,$f(n)){Oe.comments&&(s=Te.slice(t+e,de-1),r.end={line:xt,column:de-Ft-1},b2("Line",s,t,de-1,r)),n===13&&Te.charCodeAt(de)===10&&++de,++xt,Ft=de;return}Oe.comments&&(s=Te.slice(t+e,de),r.end={line:xt,column:de-Ft},b2("Line",s,t,de,r))}function wie(){var e,t,r,n;for(Oe.comments&&(e=de-2,t={start:{line:xt,column:de-Ft-2}});de<fr;)if(r=Te.charCodeAt(de),$f(r))r===13&&Te.charCodeAt(de+1)===10&&++de,++xt,++de,Ft=de,de>=fr&&Ct({},Fe.UnexpectedToken,"ILLEGAL");else if(r===42){if(Te.charCodeAt(de+1)===47){++de,++de,Oe.comments&&(n=Te.slice(e+2,de-2),t.end={line:xt,column:de-Ft},b2("Block",n,e,de,t));return}++de}else++de;Ct({},Fe.UnexpectedToken,"ILLEGAL")}function zl(){var e,t;for(t=de===0;de<fr;)if(e=Te.charCodeAt(de),mie(e))++de;else if($f(e))++de,e===13&&Te.charCodeAt(de)===10&&++de,++xt,Ft=de,t=!0;else if(e===47)if(e=Te.charCodeAt(de+1),e===47)++de,++de,tE(2),t=!0;else if(e===42)++de,++de,wie();else break;else if(t&&e===45)if(Te.charCodeAt(de+1)===45&&Te.charCodeAt(de+2)===62)de+=3,tE(3);else break;else if(e===60)if(Te.slice(de+1,de+4)==="!--")++de,++de,++de,++de,tE(4);else break;else break}function Xw(e){var t,r,n,s=0;for(r=e==="u"?4:2,t=0;t<r;++t)if(de<fr&&UN(Te[de]))n=Te[de++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function KN(){var e,t;for(e=Te.charCodeAt(de++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(de)!==117&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),++de,e=Xw("u"),(!e||e==="\\"||!gh(e.charCodeAt(0)))&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),t=e);de<fr&&(e=Te.charCodeAt(de),!!Gw(e));)++de,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(de)!==117&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),++de,e=Xw("u"),(!e||e==="\\"||!Gw(e.charCodeAt(0)))&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),t+=e);return t}function bie(){var e,t;for(e=de++;de<fr;){if(t=Te.charCodeAt(de),t===92)return de=e,KN();if(Gw(t))++de;else break}return Te.slice(e,de)}function _ie(){var e,t,r;return e=de,t=Te.charCodeAt(de)===92?KN():bie(),t.length===1?r=Ne.Identifier:vie(t)?r=Ne.Keyword:t==="null"?r=Ne.NullLiteral:t==="true"||t==="false"?r=Ne.BooleanLiteral:r=Ne.Identifier,{type:r,value:t,lineNumber:xt,lineStart:Ft,start:e,end:de}}function ku(){var e=de,t=Te.charCodeAt(de),r,n=Te[de],s,i,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++de,Oe.tokenize&&(t===40?Oe.openParenToken=Oe.tokens.length:t===123&&(Oe.openCurlyToken=Oe.tokens.length)),{type:Ne.Punctuator,value:String.fromCharCode(t),lineNumber:xt,lineStart:Ft,start:e,end:de};default:if(r=Te.charCodeAt(de+1),r===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return de+=2,{type:Ne.Punctuator,value:String.fromCharCode(t)+String.fromCharCode(r),lineNumber:xt,lineStart:Ft,start:e,end:de};case 33:case 61:return de+=2,Te.charCodeAt(de)===61&&++de,{type:Ne.Punctuator,value:Te.slice(e,de),lineNumber:xt,lineStart:Ft,start:e,end:de}}}if(o=Te.substr(de,4),o===">>>=")return de+=4,{type:Ne.Punctuator,value:o,lineNumber:xt,lineStart:Ft,start:e,end:de};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return de+=3,{type:Ne.Punctuator,value:i,lineNumber:xt,lineStart:Ft,start:e,end:de};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return de+=2,{type:Ne.Punctuator,value:s,lineNumber:xt,lineStart:Ft,start:e,end:de};if("<>=!+-*%&|^/".indexOf(n)>=0)return++de,{type:Ne.Punctuator,value:n,lineNumber:xt,lineStart:Ft,start:e,end:de};Ct({},Fe.UnexpectedToken,"ILLEGAL")}function Eie(e){for(var t="";de<fr&&UN(Te[de]);)t+=Te[de++];return t.length===0&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),gh(Te.charCodeAt(de))&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),{type:Ne.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:xt,lineStart:Ft,start:e,end:de}}function Aie(e){for(var t="0"+Te[de++];de<fr&&lm(Te[de]);)t+=Te[de++];return(gh(Te.charCodeAt(de))||Pu(Te.charCodeAt(de)))&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),{type:Ne.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:xt,lineStart:Ft,start:e,end:de}}function fO(){var e,t,r;if(r=Te[de],T0(Pu(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),t=de,e="",r!=="."){if(e=Te[de++],r=Te[de],e==="0"){if(r==="x"||r==="X")return++de,Eie(t);if(lm(r))return Aie(t);r&&Pu(r.charCodeAt(0))&&Ct({},Fe.UnexpectedToken,"ILLEGAL")}for(;Pu(Te.charCodeAt(de));)e+=Te[de++];r=Te[de]}if(r==="."){for(e+=Te[de++];Pu(Te.charCodeAt(de));)e+=Te[de++];r=Te[de]}if(r==="e"||r==="E")if(e+=Te[de++],r=Te[de],(r==="+"||r==="-")&&(e+=Te[de++]),Pu(Te.charCodeAt(de)))for(;Pu(Te.charCodeAt(de));)e+=Te[de++];else Ct({},Fe.UnexpectedToken,"ILLEGAL");return gh(Te.charCodeAt(de))&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),{type:Ne.NumericLiteral,value:parseFloat(e),lineNumber:xt,lineStart:Ft,start:t,end:de}}function Sie(){var e="",t,r,n,s,i,o,a=!1,c,l;for(c=xt,l=Ft,t=Te[de],T0(t==="'"||t==='"',"String literal must starts with a quote"),r=de,++de;de<fr;)if(n=Te[de++],n===t){t="";break}else if(n==="\\")if(n=Te[de++],!n||!$f(n.charCodeAt(0)))switch(n){case"u":case"x":o=de,i=Xw(n),i?e+=i:(de=o,e+=n);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:lm(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),de<fr&&lm(Te[de])&&(a=!0,s=s*8+"01234567".indexOf(Te[de++]),"0123".indexOf(n)>=0&&de<fr&&lm(Te[de])&&(s=s*8+"01234567".indexOf(Te[de++]))),e+=String.fromCharCode(s)):e+=n;break}else++xt,n==="\r"&&Te[de]===`
`&&++de,Ft=de;else{if($f(n.charCodeAt(0)))break;e+=n}return t!==""&&Ct({},Fe.UnexpectedToken,"ILLEGAL"),{type:Ne.StringLiteral,value:e,octal:a,startLineNumber:c,startLineStart:l,lineNumber:xt,lineStart:Ft,start:r,end:de}}function xie(e,t){var r;try{r=new RegExp(e,t)}catch{Ct({},Fe.InvalidRegExp)}return r}function $ie(){var e,t,r,n,s;for(e=Te[de],T0(e==="/","Regular expression literal must start with a slash"),t=Te[de++],r=!1,n=!1;de<fr;)if(e=Te[de++],t+=e,e==="\\")e=Te[de++],$f(e.charCodeAt(0))&&Ct({},Fe.UnterminatedRegExp),t+=e;else if($f(e.charCodeAt(0)))Ct({},Fe.UnterminatedRegExp);else if(r)e==="]"&&(r=!1);else if(e==="/"){n=!0;break}else e==="["&&(r=!0);return n||Ct({},Fe.UnterminatedRegExp),s=t.substr(1,t.length-2),{value:s,literal:t}}function Die(){var e,t,r,n;for(t="",r="";de<fr&&(e=Te[de],!!Gw(e.charCodeAt(0)));)if(++de,e==="\\"&&de<fr)if(e=Te[de],e==="u"){if(++de,n=de,e=Xw("u"),e)for(r+=e,t+="\\u";n<de;++n)t+=Te[n];else de=n,r+="u",t+="\\u";ar({},Fe.UnexpectedToken,"ILLEGAL")}else t+="\\",ar({},Fe.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}function LN(){var e,t,r,n;return Be=null,zl(),e=de,t=$ie(),r=Die(),n=xie(t.value,r.value),Oe.tokenize?{type:Ne.RegularExpression,value:n,lineNumber:xt,lineStart:Ft,start:e,end:de}:{literal:t.literal+r.literal,value:n,start:e,end:de}}function Od(){var e,t,r,n;return zl(),e=de,t={start:{line:xt,column:de-Ft}},r=LN(),t.end={line:xt,column:de-Ft},Oe.tokenize||(Oe.tokens.length>0&&(n=Oe.tokens[Oe.tokens.length-1],n.range[0]===e&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&Oe.tokens.pop()),Oe.tokens.push({type:"RegularExpression",value:r.literal,range:[e,de],loc:t})),r}function Cie(e){return e.type===Ne.Identifier||e.type===Ne.Keyword||e.type===Ne.BooleanLiteral||e.type===Ne.NullLiteral}function Pie(){var e,t;if(e=Oe.tokens[Oe.tokens.length-1],!e)return Od();if(e.type==="Punctuator"){if(e.value==="]")return ku();if(e.value===")")return t=Oe.tokens[Oe.openParenToken-1],t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")?Od():ku();if(e.value==="}"){if(Oe.tokens[Oe.openCurlyToken-3]&&Oe.tokens[Oe.openCurlyToken-3].type==="Keyword"){if(t=Oe.tokens[Oe.openCurlyToken-4],!t)return ku()}else if(Oe.tokens[Oe.openCurlyToken-4]&&Oe.tokens[Oe.openCurlyToken-4].type==="Keyword"){if(t=Oe.tokens[Oe.openCurlyToken-5],!t)return Od()}else return ku();return MN.indexOf(t.value)>=0?ku():Od()}return Od()}return e.type==="Keyword"?Od():ku()}function Fx(){var e;return zl(),de>=fr?{type:Ne.EOF,lineNumber:xt,lineStart:Ft,start:de,end:de}:(e=Te.charCodeAt(de),gh(e)?_ie():e===40||e===41||e===59?ku():e===39||e===34?Sie():e===46?Pu(Te.charCodeAt(de+1))?fO():ku():Pu(e)?fO():Oe.tokenize&&e===47?Pie():ku())}function qN(){var e,t,r;return zl(),e={start:{line:xt,column:de-Ft}},t=Fx(),e.end={line:xt,column:de-Ft},t.type!==Ne.EOF&&(r=Te.slice(t.start,t.end),Oe.tokens.push({type:Ro[t.type],value:r,range:[t.start,t.end],loc:e})),t}function Nt(){var e;return e=Be,de=e.end,xt=e.lineNumber,Ft=e.lineStart,Be=typeof Oe.tokens<"u"?qN():Fx(),de=e.end,xt=e.lineNumber,Ft=e.lineStart,e}function VN(){var e,t,r;e=de,t=xt,r=Ft,Be=typeof Oe.tokens<"u"?qN():Fx(),de=e,xt=t,Ft=r}function pO(e,t){this.line=e,this.column=t}function kie(e,t,r,n){this.start=new pO(e,t),this.end=new pO(r,n)}jN={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===ot.Program&&e.body.length>0)){for(Oe.trailingComments.length>0?Oe.trailingComments[0].range[0]>=e.range[1]?(r=Oe.trailingComments,Oe.trailingComments=[]):Oe.trailingComments.length=0:Oe.bottomRightStack.length>0&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments,delete Oe.bottomRightStack[Oe.bottomRightStack.length-1].trailingComments);Oe.bottomRightStack.length>0&&Oe.bottomRightStack[Oe.bottomRightStack.length-1].range[0]>=e.range[0];)t=Oe.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):Oe.leadingComments.length>0&&Oe.leadingComments[Oe.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=Oe.leadingComments,Oe.leadingComments=[]),r&&(e.trailingComments=r),Oe.bottomRightStack.push(e)}},markEnd:function(e,t){return Oe.range&&(e.range=[t.start,de]),Oe.loc&&(e.loc=new kie(t.startLineNumber===void 0?t.lineNumber:t.startLineNumber,t.start-(t.startLineStart===void 0?t.lineStart:t.startLineStart),xt,de-Ft),this.postProcess(e)),Oe.attachComment&&this.processComment(e),e},postProcess:function(e){return Oe.source&&(e.loc.source=Oe.source),e},createArrayExpression:function(e){return{type:ot.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:ot.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){var n=e==="||"||e==="&&"?ot.LogicalExpression:ot.BinaryExpression;return{type:n,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:ot.BlockStatement,body:e}},createBreakStatement:function(e){return{type:ot.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:ot.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:ot.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:ot.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:ot.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:ot.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:ot.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:ot.EmptyStatement}},createExpressionStatement:function(e){return{type:ot.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:ot.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:ot.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:ot.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:ot.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:ot.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:ot.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:ot.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:ot.Literal,value:e.value,raw:Te.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:ot.MemberExpression,computed:e==="[",object:t,property:r}},createNewExpression:function(e,t){return{type:ot.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:ot.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:ot.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:ot.Program,body:e}},createProperty:function(e,t,r){return{type:ot.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:ot.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:ot.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:ot.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:ot.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:ot.ThisExpression}},createThrowStatement:function(e){return{type:ot.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:ot.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return e==="++"||e==="--"?{type:ot.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:ot.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:ot.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:ot.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:ot.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:ot.WithStatement,object:e,body:t}}};function B0(){var e,t,r,n;return e=de,t=xt,r=Ft,zl(),n=xt!==t,de=e,xt=t,Ft=r,n}function Ct(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=t.replace(/%(\d)/g,function(o,a){return T0(a<r.length,"Message reference must be in range"),r[a]});throw typeof e.lineNumber=="number"?(s=new Error("Line "+e.lineNumber+": "+i),s.index=e.start,s.lineNumber=e.lineNumber,s.column=e.start-Ft+1):(s=new Error("Line "+xt+": "+i),s.index=de,s.lineNumber=xt,s.column=de-Ft+1),s.description=i,s}function ar(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{Ct.apply(null,e)}catch(r){if(Oe.errors)Oe.errors.push(r);else throw r}}function Ma(e){if(e.type===Ne.EOF&&Ct(e,Fe.UnexpectedEOS),e.type===Ne.NumericLiteral&&Ct(e,Fe.UnexpectedNumber),e.type===Ne.StringLiteral&&Ct(e,Fe.UnexpectedString),e.type===Ne.Identifier&&Ct(e,Fe.UnexpectedIdentifier),e.type===Ne.Keyword){if(gie(e.value))Ct(e,Fe.UnexpectedReserved);else if(or&&I0(e.value)){ar(e,Fe.StrictReservedWord);return}Ct(e,Fe.UnexpectedToken,e.value)}Ct(e,Fe.UnexpectedToken,e.value)}function ft(e){var t=Nt();(t.type!==Ne.Punctuator||t.value!==e)&&Ma(t)}function on(e){var t=Nt();(t.type!==Ne.Keyword||t.value!==e)&&Ma(t)}function at(e){return Be.type===Ne.Punctuator&&Be.value===e}function ei(e){return Be.type===Ne.Keyword&&Be.value===e}function Oie(){var e;return Be.type!==Ne.Punctuator?!1:(e=Be.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function ja(){var e;if(Te.charCodeAt(de)===59||at(";")){Nt();return}e=xt,zl(),xt===e&&Be.type!==Ne.EOF&&!at("}")&&Ma(Be)}function f1(e){return e.type===ot.Identifier||e.type===ot.MemberExpression}function Tie(){var e=[],t;for(t=Be,ft("[");!at("]");)at(",")?(Nt(),e.push(null)):(e.push(No()),at("]")||ft(","));return Nt(),Ee.markEnd(Ee.createArrayExpression(e),t)}function rE(e,t){var r,n,s;return r=or,s=Be,n=Rx(),t&&or&&eo(e[0].name)&&ar(t,Fe.StrictParamName),or=r,Ee.markEnd(Ee.createFunctionExpression(null,e,[],n),s)}function Jg(){var e,t;return t=Be,e=Nt(),e.type===Ne.StringLiteral||e.type===Ne.NumericLiteral?(or&&e.octal&&ar(e,Fe.StrictOctalLiteral),Ee.markEnd(Ee.createLiteral(e),t)):Ee.markEnd(Ee.createIdentifier(e.value),t)}function Iie(){var e,t,r,n,s,i;if(e=Be,i=Be,e.type===Ne.Identifier)return r=Jg(),e.value==="get"&&!at(":")?(t=Jg(),ft("("),ft(")"),n=rE([]),Ee.markEnd(Ee.createProperty("get",t,n),i)):e.value==="set"&&!at(":")?(t=Jg(),ft("("),e=Be,e.type!==Ne.Identifier?(ft(")"),ar(e,Fe.UnexpectedToken,e.value),n=rE([])):(s=[Wl()],ft(")"),n=rE(s,e)),Ee.markEnd(Ee.createProperty("set",t,n),i)):(ft(":"),n=No(),Ee.markEnd(Ee.createProperty("init",r,n),i));if(e.type===Ne.EOF||e.type===Ne.Punctuator)Ma(e);else return t=Jg(),ft(":"),n=No(),Ee.markEnd(Ee.createProperty("init",t,n),i)}function Bie(){var e=[],t,r,n,s,i={},o=String,a;for(a=Be,ft("{");!at("}");)t=Iie(),t.key.type===ot.Identifier?r=t.key.name:r=o(t.key.value),s=t.kind==="init"?Yc.Data:t.kind==="get"?Yc.Get:Yc.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===Yc.Data?or&&s===Yc.Data?ar({},Fe.StrictDuplicateProperty):s!==Yc.Data&&ar({},Fe.AccessorDataProperty):s===Yc.Data?ar({},Fe.AccessorDataProperty):i[n]&s&&ar({},Fe.AccessorGetSet),i[n]|=s):i[n]=s,e.push(t),at("}")||ft(",");return ft("}"),Ee.markEnd(Ee.createObjectExpression(e),a)}function Fie(){var e;return ft("("),e=Cn(),ft(")"),e}function HN(){var e,t,r,n;if(at("("))return Fie();if(at("["))return Tie();if(at("{"))return Bie();if(e=Be.type,n=Be,e===Ne.Identifier)r=Ee.createIdentifier(Nt().value);else if(e===Ne.StringLiteral||e===Ne.NumericLiteral)or&&Be.octal&&ar(Be,Fe.StrictOctalLiteral),r=Ee.createLiteral(Nt());else if(e===Ne.Keyword){if(ei("function"))return use();ei("this")?(Nt(),r=Ee.createThisExpression()):Ma(Nt())}else e===Ne.BooleanLiteral?(t=Nt(),t.value=t.value==="true",r=Ee.createLiteral(t)):e===Ne.NullLiteral?(t=Nt(),t.value=null,r=Ee.createLiteral(t)):at("/")||at("/=")?(typeof Oe.tokens<"u"?r=Ee.createLiteral(Od()):r=Ee.createLiteral(LN()),VN()):Ma(Nt());return Ee.markEnd(r,n)}function zN(){var e=[];if(ft("("),!at(")"))for(;de<fr&&(e.push(No()),!at(")"));)ft(",");return ft(")"),e}function Nie(){var e,t;return t=Be,e=Nt(),Cie(e)||Ma(e),Ee.markEnd(Ee.createIdentifier(e.value),t)}function WN(){return ft("."),Nie()}function JN(){var e;return ft("["),e=Cn(),ft("]"),e}function GN(){var e,t,r;return r=Be,on("new"),e=Mie(),t=at("(")?zN():[],Ee.markEnd(Ee.createNewExpression(e,t),r)}function Rie(){var e,t,r,n,s;for(s=Be,e=Ze.allowIn,Ze.allowIn=!0,t=ei("new")?GN():HN(),Ze.allowIn=e;;){if(at("."))n=WN(),t=Ee.createMemberExpression(".",t,n);else if(at("("))r=zN(),t=Ee.createCallExpression(t,r);else if(at("["))n=JN(),t=Ee.createMemberExpression("[",t,n);else break;Ee.markEnd(t,s)}return t}function Mie(){var e,t,r,n;for(n=Be,e=Ze.allowIn,t=ei("new")?GN():HN(),Ze.allowIn=e;at(".")||at("[");)at("[")?(r=JN(),t=Ee.createMemberExpression("[",t,r)):(r=WN(),t=Ee.createMemberExpression(".",t,r)),Ee.markEnd(t,n);return t}function hO(){var e,t,r=Be;return e=Rie(),Be.type===Ne.Punctuator&&(at("++")||at("--"))&&!B0()&&(or&&e.type===ot.Identifier&&eo(e.name)&&ar({},Fe.StrictLHSPostfix),f1(e)||ar({},Fe.InvalidLHSInAssignment),t=Nt(),e=Ee.markEnd(Ee.createPostfixExpression(t.value,e),r)),e}function Fp(){var e,t,r;return Be.type!==Ne.Punctuator&&Be.type!==Ne.Keyword?t=hO():at("++")||at("--")?(r=Be,e=Nt(),t=Fp(),or&&t.type===ot.Identifier&&eo(t.name)&&ar({},Fe.StrictLHSPrefix),f1(t)||ar({},Fe.InvalidLHSInAssignment),t=Ee.createUnaryExpression(e.value,t),t=Ee.markEnd(t,r)):at("+")||at("-")||at("~")||at("!")?(r=Be,e=Nt(),t=Fp(),t=Ee.createUnaryExpression(e.value,t),t=Ee.markEnd(t,r)):ei("delete")||ei("void")||ei("typeof")?(r=Be,e=Nt(),t=Fp(),t=Ee.createUnaryExpression(e.value,t),t=Ee.markEnd(t,r),or&&t.operator==="delete"&&t.argument.type===ot.Identifier&&ar({},Fe.StrictDelete)):t=hO(),t}function yO(e,t){var r=0;if(e.type!==Ne.Punctuator&&e.type!==Ne.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=t?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function jie(){var e,t,r,n,s,i,o,a,c,l;if(e=Be,c=Fp(),n=Be,s=yO(n,Ze.allowIn),s===0)return c;for(n.prec=s,Nt(),t=[e,Be],o=Fp(),i=[c,n,o];(s=yO(Be,Ze.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,c=i.pop(),r=Ee.createBinaryExpression(a,c,o),t.pop(),e=t[t.length-1],Ee.markEnd(r,e),i.push(r);n=Nt(),n.prec=s,i.push(n),t.push(Be),r=Fp(),i.push(r)}for(l=i.length-1,r=i[l],t.pop();l>1;)r=Ee.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,e=t.pop(),Ee.markEnd(r,e);return r}function Uie(){var e,t,r,n,s;return s=Be,e=jie(),at("?")&&(Nt(),t=Ze.allowIn,Ze.allowIn=!0,r=No(),Ze.allowIn=t,ft(":"),n=No(),e=Ee.createConditionalExpression(e,r,n),Ee.markEnd(e,s)),e}function No(){var e,t,r,n,s;return e=Be,s=Be,n=t=Uie(),Oie()&&(f1(t)||ar({},Fe.InvalidLHSInAssignment),or&&t.type===ot.Identifier&&eo(t.name)&&ar(e,Fe.StrictLHSAssignment),e=Nt(),r=No(),n=Ee.markEnd(Ee.createAssignmentExpression(e.value,t,r),s)),n}function Cn(){var e,t=Be;if(e=No(),at(",")){for(e=Ee.createSequenceExpression([e]);de<fr&&at(",");)Nt(),e.expressions.push(No());Ee.markEnd(e,t)}return e}function Kie(){for(var e=[],t;de<fr&&!(at("}")||(t=Zm(),typeof t>"u"));)e.push(t);return e}function Zw(){var e,t;return t=Be,ft("{"),e=Kie(),ft("}"),Ee.markEnd(Ee.createBlockStatement(e),t)}function Wl(){var e,t;return t=Be,e=Nt(),e.type!==Ne.Identifier&&Ma(e),Ee.markEnd(Ee.createIdentifier(e.value),t)}function Lie(e){var t=null,r,n;return n=Be,r=Wl(),or&&eo(r.name)&&ar({},Fe.StrictVarName),e==="const"?(ft("="),t=No()):at("=")&&(Nt(),t=No()),Ee.markEnd(Ee.createVariableDeclarator(r,t),n)}function Nx(e){var t=[];do{if(t.push(Lie(e)),!at(","))break;Nt()}while(de<fr);return t}function qie(){var e;return on("var"),e=Nx(),ja(),Ee.createVariableDeclaration(e,"var")}function Vie(e){var t,r;return r=Be,on(e),t=Nx(e),ja(),Ee.markEnd(Ee.createVariableDeclaration(t,e),r)}function Hie(){return ft(";"),Ee.createEmptyStatement()}function zie(){var e=Cn();return ja(),Ee.createExpressionStatement(e)}function Wie(){var e,t,r;return on("if"),ft("("),e=Cn(),ft(")"),t=Ua(),ei("else")?(Nt(),r=Ua()):r=null,Ee.createIfStatement(e,t,r)}function Jie(){var e,t,r;return on("do"),r=Ze.inIteration,Ze.inIteration=!0,e=Ua(),Ze.inIteration=r,on("while"),ft("("),t=Cn(),ft(")"),at(";")&&Nt(),Ee.createDoWhileStatement(e,t)}function Gie(){var e,t,r;return on("while"),ft("("),e=Cn(),ft(")"),r=Ze.inIteration,Ze.inIteration=!0,t=Ua(),Ze.inIteration=r,Ee.createWhileStatement(e,t)}function Xie(){var e,t,r;return r=Be,e=Nt(),t=Nx(),Ee.markEnd(Ee.createVariableDeclaration(t,e.value),r)}function Zie(){var e,t,r,n,s,i,o;return e=t=r=null,on("for"),ft("("),at(";")?Nt():(ei("var")||ei("let")?(Ze.allowIn=!1,e=Xie(),Ze.allowIn=!0,e.declarations.length===1&&ei("in")&&(Nt(),n=e,s=Cn(),e=null)):(Ze.allowIn=!1,e=Cn(),Ze.allowIn=!0,ei("in")&&(f1(e)||ar({},Fe.InvalidLHSInForIn),Nt(),n=e,s=Cn(),e=null)),typeof n>"u"&&ft(";")),typeof n>"u"&&(at(";")||(t=Cn()),ft(";"),at(")")||(r=Cn())),ft(")"),o=Ze.inIteration,Ze.inIteration=!0,i=Ua(),Ze.inIteration=o,typeof n>"u"?Ee.createForStatement(e,t,r,i):Ee.createForInStatement(n,s,i)}function Yie(){var e=null,t;return on("continue"),Te.charCodeAt(de)===59?(Nt(),Ze.inIteration||Ct({},Fe.IllegalContinue),Ee.createContinueStatement(null)):B0()?(Ze.inIteration||Ct({},Fe.IllegalContinue),Ee.createContinueStatement(null)):(Be.type===Ne.Identifier&&(e=Wl(),t="$"+e.name,Object.prototype.hasOwnProperty.call(Ze.labelSet,t)||Ct({},Fe.UnknownLabel,e.name)),ja(),e===null&&!Ze.inIteration&&Ct({},Fe.IllegalContinue),Ee.createContinueStatement(e))}function Qie(){var e=null,t;return on("break"),Te.charCodeAt(de)===59?(Nt(),Ze.inIteration||Ze.inSwitch||Ct({},Fe.IllegalBreak),Ee.createBreakStatement(null)):B0()?(Ze.inIteration||Ze.inSwitch||Ct({},Fe.IllegalBreak),Ee.createBreakStatement(null)):(Be.type===Ne.Identifier&&(e=Wl(),t="$"+e.name,Object.prototype.hasOwnProperty.call(Ze.labelSet,t)||Ct({},Fe.UnknownLabel,e.name)),ja(),e===null&&!(Ze.inIteration||Ze.inSwitch)&&Ct({},Fe.IllegalBreak),Ee.createBreakStatement(e))}function ese(){var e=null;return on("return"),Ze.inFunctionBody||ar({},Fe.IllegalReturn),Te.charCodeAt(de)===32&&gh(Te.charCodeAt(de+1))?(e=Cn(),ja(),Ee.createReturnStatement(e)):B0()?Ee.createReturnStatement(null):(at(";")||!at("}")&&Be.type!==Ne.EOF&&(e=Cn()),ja(),Ee.createReturnStatement(e))}function tse(){var e,t;return or&&(zl(),ar({},Fe.StrictModeWith)),on("with"),ft("("),e=Cn(),ft(")"),t=Ua(),Ee.createWithStatement(e,t)}function rse(){var e,t=[],r,n;for(n=Be,ei("default")?(Nt(),e=null):(on("case"),e=Cn()),ft(":");de<fr&&!(at("}")||ei("default")||ei("case"));)r=Ua(),t.push(r);return Ee.markEnd(Ee.createSwitchCase(e,t),n)}function nse(){var e,t,r,n,s;if(on("switch"),ft("("),e=Cn(),ft(")"),ft("{"),t=[],at("}"))return Nt(),Ee.createSwitchStatement(e,t);for(n=Ze.inSwitch,Ze.inSwitch=!0,s=!1;de<fr&&!at("}");)r=rse(),r.test===null&&(s&&Ct({},Fe.MultipleDefaultsInSwitch),s=!0),t.push(r);return Ze.inSwitch=n,ft("}"),Ee.createSwitchStatement(e,t)}function ise(){var e;return on("throw"),B0()&&Ct({},Fe.NewlineAfterThrow),e=Cn(),ja(),Ee.createThrowStatement(e)}function sse(){var e,t,r;return r=Be,on("catch"),ft("("),at(")")&&Ma(Be),e=Wl(),or&&eo(e.name)&&ar({},Fe.StrictCatchVariable),ft(")"),t=Zw(),Ee.markEnd(Ee.createCatchClause(e,t),r)}function ose(){var e,t=[],r=null;return on("try"),e=Zw(),ei("catch")&&t.push(sse()),ei("finally")&&(Nt(),r=Zw()),t.length===0&&!r&&Ct({},Fe.NoCatchOrFinally),Ee.createTryStatement(e,[],t,r)}function ase(){return on("debugger"),ja(),Ee.createDebuggerStatement()}function Ua(){var e=Be.type,t,r,n,s;if(e===Ne.EOF&&Ma(Be),e===Ne.Punctuator&&Be.value==="{")return Zw();if(s=Be,e===Ne.Punctuator)switch(Be.value){case";":return Ee.markEnd(Hie(),s);case"(":return Ee.markEnd(zie(),s)}if(e===Ne.Keyword)switch(Be.value){case"break":return Ee.markEnd(Qie(),s);case"continue":return Ee.markEnd(Yie(),s);case"debugger":return Ee.markEnd(ase(),s);case"do":return Ee.markEnd(Jie(),s);case"for":return Ee.markEnd(Zie(),s);case"function":return Ee.markEnd(ZN(),s);case"if":return Ee.markEnd(Wie(),s);case"return":return Ee.markEnd(ese(),s);case"switch":return Ee.markEnd(nse(),s);case"throw":return Ee.markEnd(ise(),s);case"try":return Ee.markEnd(ose(),s);case"var":return Ee.markEnd(qie(),s);case"while":return Ee.markEnd(Gie(),s);case"with":return Ee.markEnd(tse(),s)}return t=Cn(),t.type===ot.Identifier&&at(":")?(Nt(),n="$"+t.name,Object.prototype.hasOwnProperty.call(Ze.labelSet,n)&&Ct({},Fe.Redeclaration,"Label",t.name),Ze.labelSet[n]=!0,r=Ua(),delete Ze.labelSet[n],Ee.markEnd(Ee.createLabeledStatement(t,r),s)):(ja(),Ee.markEnd(Ee.createExpressionStatement(t),s))}function Rx(){var e,t=[],r,n,s,i,o,a,c,l;for(l=Be,ft("{");de<fr&&!(Be.type!==Ne.StringLiteral||(r=Be,e=Zm(),t.push(e),e.expression.type!==ot.Literal));)n=Te.slice(r.start+1,r.end-1),n==="use strict"?(or=!0,s&&ar(s,Fe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=Ze.labelSet,o=Ze.inIteration,a=Ze.inSwitch,c=Ze.inFunctionBody,Ze.labelSet={},Ze.inIteration=!1,Ze.inSwitch=!1,Ze.inFunctionBody=!0;de<fr&&!(at("}")||(e=Zm(),typeof e>"u"));)t.push(e);return ft("}"),Ze.labelSet=i,Ze.inIteration=o,Ze.inSwitch=a,Ze.inFunctionBody=c,Ee.markEnd(Ee.createBlockStatement(t),l)}function XN(e){var t,r=[],n,s,i,o,a;if(ft("("),!at(")"))for(i={};de<fr&&(n=Be,t=Wl(),o="$"+n.value,or?(eo(n.value)&&(s=n,a=Fe.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=Fe.StrictParamDupe)):e||(eo(n.value)?(e=n,a=Fe.StrictParamName):I0(n.value)?(e=n,a=Fe.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(e=n,a=Fe.StrictParamDupe)),r.push(t),i[o]=!0,!at(")"));)ft(",");return ft(")"),{params:r,stricted:s,firstRestricted:e,message:a}}function ZN(){var e,t=[],r,n,s,i,o,a,c,l;return l=Be,on("function"),n=Be,e=Wl(),or?eo(n.value)&&ar(n,Fe.StrictFunctionName):eo(n.value)?(o=n,a=Fe.StrictFunctionName):I0(n.value)&&(o=n,a=Fe.StrictReservedWord),i=XN(o),t=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),c=or,r=Rx(),or&&o&&Ct(o,a),or&&s&&ar(s,a),or=c,Ee.markEnd(Ee.createFunctionDeclaration(e,t,[],r),l)}function use(){var e,t=null,r,n,s,i,o=[],a,c,l;return l=Be,on("function"),at("(")||(e=Be,t=Wl(),or?eo(e.value)&&ar(e,Fe.StrictFunctionName):eo(e.value)?(n=e,s=Fe.StrictFunctionName):I0(e.value)&&(n=e,s=Fe.StrictReservedWord)),i=XN(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),c=or,a=Rx(),or&&n&&Ct(n,s),or&&r&&ar(r,s),or=c,Ee.markEnd(Ee.createFunctionExpression(t,o,[],a),l)}function Zm(){if(Be.type===Ne.Keyword)switch(Be.value){case"const":case"let":return Vie(Be.value);case"function":return ZN();default:return Ua()}if(Be.type!==Ne.EOF)return Ua()}function cse(){for(var e,t=[],r,n,s;de<fr&&(r=Be,!(r.type!==Ne.StringLiteral||(e=Zm(),t.push(e),e.expression.type!==ot.Literal)));)n=Te.slice(r.start+1,r.end-1),n==="use strict"?(or=!0,s&&ar(s,Fe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;de<fr&&(e=Zm(),!(typeof e>"u"));)t.push(e);return t}function lse(){var e,t;return zl(),VN(),t=Be,or=!1,e=cse(),Ee.markEnd(Ee.createProgram(e),t)}function dse(){var e,t,r,n=[];for(e=0;e<Oe.tokens.length;++e)t=Oe.tokens[e],r={type:t.type,value:t.value},Oe.range&&(r.range=t.range),Oe.loc&&(r.loc=t.loc),n.push(r);Oe.tokens=n}function _2(e,t){var r,n;n=String,typeof e!="string"&&!(e instanceof String)&&(e=n(e)),Ee=jN,Te=e,de=0,xt=Te.length>0?1:0,Ft=0,fr=Te.length,Be=null,Ze={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Oe={};try{r=lse(),typeof Oe.comments<"u"&&(r.comments=Oe.comments),typeof Oe.tokens<"u"&&(dse(),r.tokens=Oe.tokens),typeof Oe.errors<"u"&&(r.errors=Oe.errors)}catch(s){throw s}finally{Oe={}}return r}function fse(e,t,r,n){function s(c){return String(c).match(/^[0-9]+$/)?parseInt(c):Number.isFinite(c)?parseInt(c,10):0}if(typeof t=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=e.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,t=t<0?i+t:t,r=r<0?i+r:r,t=s(t===0?0:t||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),t=n>0?Math.max(0,t):Math.min(i,t),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=t)return[];if(n<0&&t<=r)return[];for(var o=[],a=t;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(e[a]);return o}var YN={},QN={};const pse="estraverse",hse="ECMAScript JS AST traversal functions",yse="https://github.com/estools/estraverse",mse="estraverse.js",gse="4.3.0",vse={node:">=4.0"},wse=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],bse={type:"git",url:"http://github.com/estools/estraverse.git"},_se={"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},Ese="BSD-2-Clause",Ase={test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"},Sse={name:pse,description:hse,homepage:yse,main:mse,version:gse,engines:vse,maintainers:wse,repository:bse,devDependencies:_se,license:Ese,scripts:Ase};(function(e){(function t(r){var n,s,i,o,a,c;function l(m){var w={},x,S;for(x in m)m.hasOwnProperty(x)&&(S=m[x],typeof S=="object"&&S!==null?w[x]=l(S):w[x]=S);return w}function u(m,w){var x,S,E,A;for(S=m.length,E=0;S;)x=S>>>1,A=E+x,w(m[A])?S=x:(E=A+1,S-=x+1);return E}n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},o={},a={},c={},s={Break:o,Skip:a,Remove:c};function d(m,w){this.parent=m,this.key=w}d.prototype.replace=function(w){this.parent[this.key]=w},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function h(m,w,x,S){this.node=m,this.path=w,this.wrap=x,this.ref=S}function f(){}f.prototype.path=function(){var w,x,S,E,A,$;function I(T,R){if(Array.isArray(R))for(S=0,E=R.length;S<E;++S)T.push(R[S]);else T.push(R)}if(!this.__current.path)return null;for(A=[],w=2,x=this.__leavelist.length;w<x;++w)$=this.__leavelist[w],I(A,$.path);return I(A,this.__current.path),A},f.prototype.type=function(){var m=this.current();return m.type||this.__current.wrap},f.prototype.parents=function(){var w,x,S;for(S=[],w=1,x=this.__leavelist.length;w<x;++w)S.push(this.__leavelist[w].node);return S},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(w,x){var S,E;return E=void 0,S=this.__current,this.__current=x,this.__state=null,w&&(E=w.call(this,x.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=S,E},f.prototype.notify=function(w){this.__state=w},f.prototype.skip=function(){this.notify(a)},f.prototype.break=function(){this.notify(o)},f.prototype.remove=function(){this.notify(c)},f.prototype.__initialize=function(m,w){this.visitor=w,this.root=m,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,w.fallback==="iteration"?this.__fallback=Object.keys:typeof w.fallback=="function"&&(this.__fallback=w.fallback),this.__keys=i,w.keys&&(this.__keys=Object.assign(Object.create(this.__keys),w.keys))};function p(m){return m==null?!1:typeof m=="object"&&typeof m.type=="string"}function y(m,w){return(m===n.ObjectExpression||m===n.ObjectPattern)&&w==="properties"}f.prototype.traverse=function(w,x){var S,E,A,$,I,T,R,L,j,U,te,z;for(this.__initialize(w,x),z={},S=this.__worklist,E=this.__leavelist,S.push(new h(w,null,null,null)),E.push(new h(null,null,null,null));S.length;){if(A=S.pop(),A===z){if(A=E.pop(),T=this.__execute(x.leave,A),this.__state===o||T===o)return;continue}if(A.node){if(T=this.__execute(x.enter,A),this.__state===o||T===o)return;if(S.push(z),E.push(A),this.__state===a||T===a)continue;if($=A.node,I=$.type||A.wrap,U=this.__keys[I],!U)if(this.__fallback)U=this.__fallback($);else throw new Error("Unknown node type "+I+".");for(L=U.length;(L-=1)>=0;)if(R=U[L],te=$[R],!!te)if(Array.isArray(te)){for(j=te.length;(j-=1)>=0;)if(te[j]){if(y(I,U[L]))A=new h(te[j],[R,j],"Property",null);else if(p(te[j]))A=new h(te[j],[R,j],null,null);else continue;S.push(A)}}else p(te)&&S.push(new h(te,R,null,null))}}},f.prototype.replace=function(w,x){var S,E,A,$,I,T,R,L,j,U,te,z,ee;function q(O){var Y,H,C,B;if(O.ref.remove()){for(H=O.ref.key,B=O.ref.parent,Y=S.length;Y--;)if(C=S[Y],C.ref&&C.ref.parent===B){if(C.ref.key<H)break;--C.ref.key}}}for(this.__initialize(w,x),te={},S=this.__worklist,E=this.__leavelist,z={root:w},T=new h(w,null,null,new d(z,"root")),S.push(T),E.push(T);S.length;){if(T=S.pop(),T===te){if(T=E.pop(),I=this.__execute(x.leave,T),I!==void 0&&I!==o&&I!==a&&I!==c&&T.ref.replace(I),(this.__state===c||I===c)&&q(T),this.__state===o||I===o)return z.root;continue}if(I=this.__execute(x.enter,T),I!==void 0&&I!==o&&I!==a&&I!==c&&(T.ref.replace(I),T.node=I),(this.__state===c||I===c)&&(q(T),T.node=null),this.__state===o||I===o)return z.root;if(A=T.node,!!A&&(S.push(te),E.push(T),!(this.__state===a||I===a))){if($=A.type||T.wrap,j=this.__keys[$],!j)if(this.__fallback)j=this.__fallback(A);else throw new Error("Unknown node type "+$+".");for(R=j.length;(R-=1)>=0;)if(ee=j[R],U=A[ee],!!U)if(Array.isArray(U)){for(L=U.length;(L-=1)>=0;)if(U[L]){if(y($,j[R]))T=new h(U[L],[ee,L],"Property",new d(U,L));else if(p(U[L]))T=new h(U[L],[ee,L],null,new d(U,L));else continue;S.push(T)}}else p(U)&&S.push(new h(U,ee,null,new d(A,ee)))}}return z.root};function _(m,w){var x=new f;return x.traverse(m,w)}function b(m,w){var x=new f;return x.replace(m,w)}function v(m,w){var x;return x=u(w,function(E){return E.range[0]>m.range[0]}),m.extendedRange=[m.range[0],m.range[1]],x!==w.length&&(m.extendedRange[1]=w[x].range[0]),x-=1,x>=0&&(m.extendedRange[0]=w[x].range[1]),m}function g(m,w,x){var S=[],E,A,$,I;if(!m.range)throw new Error("attachComments needs range information");if(!x.length){if(w.length){for($=0,A=w.length;$<A;$+=1)E=l(w[$]),E.extendedRange=[0,m.range[0]],S.push(E);m.leadingComments=S}return m}for($=0,A=w.length;$<A;$+=1)S.push(v(l(w[$]),x));return I=0,_(m,{enter:function(T){for(var R;I<S.length&&(R=S[I],!(R.extendedRange[1]>T.range[0]));)R.extendedRange[1]===T.range[0]?(T.leadingComments||(T.leadingComments=[]),T.leadingComments.push(R),S.splice(I,1)):I+=1;if(I===S.length)return s.Break;if(S[I].extendedRange[0]>T.range[1])return s.Skip}}),I=0,_(m,{leave:function(T){for(var R;I<S.length&&(R=S[I],!(T.range[1]<R.extendedRange[0]));)T.range[1]===R.extendedRange[0]?(T.trailingComments||(T.trailingComments=[]),T.trailingComments.push(R),S.splice(I,1)):I+=1;if(I===S.length)return s.Break;if(S[I].extendedRange[0]>T.range[1])return s.Skip}}),m}return r.version=Sse.version,r.Syntax=n,r.traverse=_,r.replace=b,r.attachComments=g,r.VisitorKeys=i,r.VisitorOption=s,r.Controller=f,r.cloneEnvironment=function(){return t({})},r})(e)})(QN);var zv={},eR={exports:{}};(function(){function e(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function t(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}eR.exports={isExpression:e,isStatement:r,isIterationStatement:t,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})();var xse=eR.exports,tR={exports:{}};(function(){var e,t,r,n,s,i;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(_){return 48<=_&&_<=57}function a(_){return 48<=_&&_<=57||97<=_&&_<=102||65<=_&&_<=70}function c(_){return _>=48&&_<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function l(_){return _===32||_===9||_===11||_===12||_===160||_>=5760&&r.indexOf(_)>=0}function u(_){return _===10||_===13||_===8232||_===8233}function d(_){if(_<=65535)return String.fromCharCode(_);var b=String.fromCharCode(Math.floor((_-65536)/1024)+55296),v=String.fromCharCode((_-65536)%1024+56320);return b+v}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function h(_){return _<128?n[_]:t.NonAsciiIdentifierStart.test(d(_))}function f(_){return _<128?s[_]:t.NonAsciiIdentifierPart.test(d(_))}function p(_){return _<128?n[_]:e.NonAsciiIdentifierStart.test(d(_))}function y(_){return _<128?s[_]:e.NonAsciiIdentifierPart.test(d(_))}tR.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:c,isWhiteSpace:l,isLineTerminator:u,isIdentifierStartES5:h,isIdentifierPartES5:f,isIdentifierStartES6:p,isIdentifierPartES6:y}})();var rR=tR.exports,nR={exports:{}};(function(){var e=rR;function t(h){switch(h){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(h,f){return!f&&h==="yield"?!1:n(h,f)}function n(h,f){if(f&&t(h))return!0;switch(h.length){case 2:return h==="if"||h==="in"||h==="do";case 3:return h==="var"||h==="for"||h==="new"||h==="try";case 4:return h==="this"||h==="else"||h==="case"||h==="void"||h==="with"||h==="enum";case 5:return h==="while"||h==="break"||h==="catch"||h==="throw"||h==="const"||h==="yield"||h==="class"||h==="super";case 6:return h==="return"||h==="typeof"||h==="delete"||h==="switch"||h==="export"||h==="import";case 7:return h==="default"||h==="finally"||h==="extends";case 8:return h==="function"||h==="continue"||h==="debugger";case 10:return h==="instanceof";default:return!1}}function s(h,f){return h==="null"||h==="true"||h==="false"||r(h,f)}function i(h,f){return h==="null"||h==="true"||h==="false"||n(h,f)}function o(h){return h==="eval"||h==="arguments"}function a(h){var f,p,y;if(h.length===0||(y=h.charCodeAt(0),!e.isIdentifierStartES5(y)))return!1;for(f=1,p=h.length;f<p;++f)if(y=h.charCodeAt(f),!e.isIdentifierPartES5(y))return!1;return!0}function c(h,f){return(h-55296)*1024+(f-56320)+65536}function l(h){var f,p,y,_,b;if(h.length===0)return!1;for(b=e.isIdentifierStartES6,f=0,p=h.length;f<p;++f){if(y=h.charCodeAt(f),55296<=y&&y<=56319){if(++f,f>=p||(_=h.charCodeAt(f),!(56320<=_&&_<=57343)))return!1;y=c(y,_)}if(!b(y))return!1;b=e.isIdentifierPartES6}return!0}function u(h,f){return a(h)&&!s(h,f)}function d(h,f){return l(h)&&!i(h,f)}nR.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:l,isIdentifierES5:u,isIdentifierES6:d}})();var $se=nR.exports;(function(){zv.ast=xse,zv.code=rR,zv.keyword=$se})();var hy={},nE={},Gg={},Xg={},mO;function Dse(){if(mO)return Xg;mO=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Xg.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},Xg.decode=function(t){var r=65,n=90,s=97,i=122,o=48,a=57,c=43,l=47,u=26,d=52;return r<=t&&t<=n?t-r:s<=t&&t<=i?t-s+u:o<=t&&t<=a?t-o+d:t==c?62:t==l?63:-1},Xg}var gO;function iR(){if(gO)return Gg;gO=1;var e=Dse(),t=5,r=1<<t,n=r-1,s=r;function i(a){return a<0?(-a<<1)+1:(a<<1)+0}function o(a){var c=(a&1)===1,l=a>>1;return c?-l:l}return Gg.encode=function(c){var l="",u,d=i(c);do u=d&n,d>>>=t,d>0&&(u|=s),l+=e.encode(u);while(d>0);return l},Gg.decode=function(c,l,u){var d=c.length,h=0,f=0,p,y;do{if(l>=d)throw new Error("Expected more digits in base 64 VLQ value.");if(y=e.decode(c.charCodeAt(l++)),y===-1)throw new Error("Invalid base64 digit: "+c.charAt(l-1));p=!!(y&s),y&=n,h=h+(y<<f),f+=t}while(p);u.value=o(h),u.rest=l},Gg}var iE={},vO;function F0(){return vO||(vO=1,function(e){function t(m,w,x){if(w in m)return m[w];if(arguments.length===3)return x;throw new Error('"'+w+'" is a required argument.')}e.getArg=t;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function s(m){var w=m.match(r);return w?{scheme:w[1],auth:w[2],host:w[3],port:w[4],path:w[5]}:null}e.urlParse=s;function i(m){var w="";return m.scheme&&(w+=m.scheme+":"),w+="//",m.auth&&(w+=m.auth+"@"),m.host&&(w+=m.host),m.port&&(w+=":"+m.port),m.path&&(w+=m.path),w}e.urlGenerate=i;function o(m){var w=m,x=s(m);if(x){if(!x.path)return m;w=x.path}for(var S=e.isAbsolute(w),E=w.split(/\/+/),A,$=0,I=E.length-1;I>=0;I--)A=E[I],A==="."?E.splice(I,1):A===".."?$++:$>0&&(A===""?(E.splice(I+1,$),$=0):(E.splice(I,2),$--));return w=E.join("/"),w===""&&(w=S?"/":"."),x?(x.path=w,i(x)):w}e.normalize=o;function a(m,w){m===""&&(m="."),w===""&&(w=".");var x=s(w),S=s(m);if(S&&(m=S.path||"/"),x&&!x.scheme)return S&&(x.scheme=S.scheme),i(x);if(x||w.match(n))return w;if(S&&!S.host&&!S.path)return S.host=w,i(S);var E=w.charAt(0)==="/"?w:o(m.replace(/\/+$/,"")+"/"+w);return S?(S.path=E,i(S)):E}e.join=a,e.isAbsolute=function(m){return m.charAt(0)==="/"||r.test(m)};function c(m,w){m===""&&(m="."),m=m.replace(/\/$/,"");for(var x=0;w.indexOf(m+"/")!==0;){var S=m.lastIndexOf("/");if(S<0||(m=m.slice(0,S),m.match(/^([^\/]+:\/)?\/*$/)))return w;++x}return Array(x+1).join("../")+w.substr(m.length+1)}e.relative=c;var l=function(){var m=Object.create(null);return!("__proto__"in m)}();function u(m){return m}function d(m){return f(m)?"$"+m:m}e.toSetString=l?u:d;function h(m){return f(m)?m.slice(1):m}e.fromSetString=l?u:h;function f(m){if(!m)return!1;var w=m.length;if(w<9||m.charCodeAt(w-1)!==95||m.charCodeAt(w-2)!==95||m.charCodeAt(w-3)!==111||m.charCodeAt(w-4)!==116||m.charCodeAt(w-5)!==111||m.charCodeAt(w-6)!==114||m.charCodeAt(w-7)!==112||m.charCodeAt(w-8)!==95||m.charCodeAt(w-9)!==95)return!1;for(var x=w-10;x>=0;x--)if(m.charCodeAt(x)!==36)return!1;return!0}function p(m,w,x){var S=_(m.source,w.source);return S!==0||(S=m.originalLine-w.originalLine,S!==0)||(S=m.originalColumn-w.originalColumn,S!==0||x)||(S=m.generatedColumn-w.generatedColumn,S!==0)||(S=m.generatedLine-w.generatedLine,S!==0)?S:_(m.name,w.name)}e.compareByOriginalPositions=p;function y(m,w,x){var S=m.generatedLine-w.generatedLine;return S!==0||(S=m.generatedColumn-w.generatedColumn,S!==0||x)||(S=_(m.source,w.source),S!==0)||(S=m.originalLine-w.originalLine,S!==0)||(S=m.originalColumn-w.originalColumn,S!==0)?S:_(m.name,w.name)}e.compareByGeneratedPositionsDeflated=y;function _(m,w){return m===w?0:m===null?1:w===null?-1:m>w?1:-1}function b(m,w){var x=m.generatedLine-w.generatedLine;return x!==0||(x=m.generatedColumn-w.generatedColumn,x!==0)||(x=_(m.source,w.source),x!==0)||(x=m.originalLine-w.originalLine,x!==0)||(x=m.originalColumn-w.originalColumn,x!==0)?x:_(m.name,w.name)}e.compareByGeneratedPositionsInflated=b;function v(m){return JSON.parse(m.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=v;function g(m,w,x){if(w=w||"",m&&(m[m.length-1]!=="/"&&w[0]!=="/"&&(m+="/"),w=m+w),x){var S=s(x);if(!S)throw new Error("sourceMapURL could not be parsed");if(S.path){var E=S.path.lastIndexOf("/");E>=0&&(S.path=S.path.substring(0,E+1))}w=a(i(S),w)}return o(w)}e.computeSourceURL=g}(iE)),iE}var sE={},wO;function sR(){if(wO)return sE;wO=1;var e=F0(),t=Object.prototype.hasOwnProperty,r=typeof Map<"u";function n(){this._array=[],this._set=r?new Map:Object.create(null)}return n.fromArray=function(i,o){for(var a=new n,c=0,l=i.length;c<l;c++)a.add(i[c],o);return a},n.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(i,o){var a=r?i:e.toSetString(i),c=r?this.has(i):t.call(this._set,a),l=this._array.length;(!c||o)&&this._array.push(i),c||(r?this._set.set(i,l):this._set[a]=l)},n.prototype.has=function(i){if(r)return this._set.has(i);var o=e.toSetString(i);return t.call(this._set,o)},n.prototype.indexOf=function(i){if(r){var o=this._set.get(i);if(o>=0)return o}else{var a=e.toSetString(i);if(t.call(this._set,a))return this._set[a]}throw new Error('"'+i+'" is not in the set.')},n.prototype.at=function(i){if(i>=0&&i<this._array.length)return this._array[i];throw new Error("No element indexed by "+i)},n.prototype.toArray=function(){return this._array.slice()},sE.ArraySet=n,sE}var oE={},bO;function Cse(){if(bO)return oE;bO=1;var e=F0();function t(n,s){var i=n.generatedLine,o=s.generatedLine,a=n.generatedColumn,c=s.generatedColumn;return o>i||o==i&&c>=a||e.compareByGeneratedPositionsInflated(n,s)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return r.prototype.unsortedForEach=function(s,i){this._array.forEach(s,i)},r.prototype.add=function(s){t(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},oE.MappingList=r,oE}var _O;function oR(){if(_O)return nE;_O=1;var e=iR(),t=F0(),r=sR().ArraySet,n=Cse().MappingList;function s(i){i||(i={}),this._file=t.getArg(i,"file",null),this._sourceRoot=t.getArg(i,"sourceRoot",null),this._skipValidation=t.getArg(i,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new n,this._sourcesContents=null}return s.prototype._version=3,s.fromSourceMap=function(o){var a=o.sourceRoot,c=new s({file:o.file,sourceRoot:a});return o.eachMapping(function(l){var u={generated:{line:l.generatedLine,column:l.generatedColumn}};l.source!=null&&(u.source=l.source,a!=null&&(u.source=t.relative(a,u.source)),u.original={line:l.originalLine,column:l.originalColumn},l.name!=null&&(u.name=l.name)),c.addMapping(u)}),o.sources.forEach(function(l){var u=l;a!==null&&(u=t.relative(a,l)),c._sources.has(u)||c._sources.add(u);var d=o.sourceContentFor(l);d!=null&&c.setSourceContent(l,d)}),c},s.prototype.addMapping=function(o){var a=t.getArg(o,"generated"),c=t.getArg(o,"original",null),l=t.getArg(o,"source",null),u=t.getArg(o,"name",null);this._skipValidation||this._validateMapping(a,c,l,u),l!=null&&(l=String(l),this._sources.has(l)||this._sources.add(l)),u!=null&&(u=String(u),this._names.has(u)||this._names.add(u)),this._mappings.add({generatedLine:a.line,generatedColumn:a.column,originalLine:c!=null&&c.line,originalColumn:c!=null&&c.column,source:l,name:u})},s.prototype.setSourceContent=function(o,a){var c=o;this._sourceRoot!=null&&(c=t.relative(this._sourceRoot,c)),a!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(c)]=a):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(c)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(o,a,c){var l=a;if(a==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);l=o.file}var u=this._sourceRoot;u!=null&&(l=t.relative(u,l));var d=new r,h=new r;this._mappings.unsortedForEach(function(f){if(f.source===l&&f.originalLine!=null){var p=o.originalPositionFor({line:f.originalLine,column:f.originalColumn});p.source!=null&&(f.source=p.source,c!=null&&(f.source=t.join(c,f.source)),u!=null&&(f.source=t.relative(u,f.source)),f.originalLine=p.line,f.originalColumn=p.column,p.name!=null&&(f.name=p.name))}var y=f.source;y!=null&&!d.has(y)&&d.add(y);var _=f.name;_!=null&&!h.has(_)&&h.add(_)},this),this._sources=d,this._names=h,o.sources.forEach(function(f){var p=o.sourceContentFor(f);p!=null&&(c!=null&&(f=t.join(c,f)),u!=null&&(f=t.relative(u,f)),this.setSourceContent(f,p))},this)},s.prototype._validateMapping=function(o,a,c,l){if(a&&typeof a.line!="number"&&typeof a.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!a&&!c&&!l)){if(o&&"line"in o&&"column"in o&&a&&"line"in a&&"column"in a&&o.line>0&&o.column>=0&&a.line>0&&a.column>=0&&c)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:c,original:a,name:l}))}},s.prototype._serializeMappings=function(){for(var o=0,a=1,c=0,l=0,u=0,d=0,h="",f,p,y,_,b=this._mappings.toArray(),v=0,g=b.length;v<g;v++){if(p=b[v],f="",p.generatedLine!==a)for(o=0;p.generatedLine!==a;)f+=";",a++;else if(v>0){if(!t.compareByGeneratedPositionsInflated(p,b[v-1]))continue;f+=","}f+=e.encode(p.generatedColumn-o),o=p.generatedColumn,p.source!=null&&(_=this._sources.indexOf(p.source),f+=e.encode(_-d),d=_,f+=e.encode(p.originalLine-1-l),l=p.originalLine-1,f+=e.encode(p.originalColumn-c),c=p.originalColumn,p.name!=null&&(y=this._names.indexOf(p.name),f+=e.encode(y-u),u=y)),h+=f}return h},s.prototype._generateSourcesContent=function(o,a){return o.map(function(c){if(!this._sourcesContents)return null;a!=null&&(c=t.relative(a,c));var l=t.toSetString(c);return Object.prototype.hasOwnProperty.call(this._sourcesContents,l)?this._sourcesContents[l]:null},this)},s.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},nE.SourceMapGenerator=s,nE}var yy={},aE={},EO;function Pse(){return EO||(EO=1,function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(r,n,s,i,o,a){var c=Math.floor((n-r)/2)+r,l=o(s,i[c],!0);return l===0?c:l>0?n-c>1?t(c,n,s,i,o,a):a==e.LEAST_UPPER_BOUND?n<i.length?n:-1:c:c-r>1?t(r,c,s,i,o,a):a==e.LEAST_UPPER_BOUND?c:r<0?-1:r}e.search=function(n,s,i,o){if(s.length===0)return-1;var a=t(-1,s.length,n,s,i,o||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&i(s[a],s[a-1],!0)===0;)--a;return a}}(aE)),aE}var uE={},AO;function kse(){if(AO)return uE;AO=1;function e(n,s,i){var o=n[s];n[s]=n[i],n[i]=o}function t(n,s){return Math.round(n+Math.random()*(s-n))}function r(n,s,i,o){if(i<o){var a=t(i,o),c=i-1;e(n,a,o);for(var l=n[o],u=i;u<o;u++)s(n[u],l)<=0&&(c+=1,e(n,c,u));e(n,c+1,u);var d=c+1;r(n,s,i,d-1),r(n,s,d+1,o)}}return uE.quickSort=function(n,s){r(n,s,0,n.length-1)},uE}var SO;function Ose(){if(SO)return yy;SO=1;var e=F0(),t=Pse(),r=sR().ArraySet,n=iR(),s=kse().quickSort;function i(l,u){var d=l;return typeof l=="string"&&(d=e.parseSourceMapInput(l)),d.sections!=null?new c(d,u):new o(d,u)}i.fromSourceMap=function(l,u){return o.fromSourceMap(l,u)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(u,d){var h=u.charAt(d);return h===";"||h===","},i.prototype._parseMappings=function(u,d){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(u,d,h){var f=d||null,p=h||i.GENERATED_ORDER,y;switch(p){case i.GENERATED_ORDER:y=this._generatedMappings;break;case i.ORIGINAL_ORDER:y=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var _=this.sourceRoot;y.map(function(b){var v=b.source===null?null:this._sources.at(b.source);return v=e.computeSourceURL(_,v,this._sourceMapURL),{source:v,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:this._names.at(b.name)}},this).forEach(u,f)},i.prototype.allGeneratedPositionsFor=function(u){var d=e.getArg(u,"line"),h={source:e.getArg(u,"source"),originalLine:d,originalColumn:e.getArg(u,"column",0)};if(h.source=this._findSourceIndex(h.source),h.source<0)return[];var f=[],p=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(p>=0){var y=this._originalMappings[p];if(u.column===void 0)for(var _=y.originalLine;y&&y.originalLine===_;)f.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++p];else for(var b=y.originalColumn;y&&y.originalLine===d&&y.originalColumn==b;)f.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++p]}return f},yy.SourceMapConsumer=i;function o(l,u){var d=l;typeof l=="string"&&(d=e.parseSourceMapInput(l));var h=e.getArg(d,"version"),f=e.getArg(d,"sources"),p=e.getArg(d,"names",[]),y=e.getArg(d,"sourceRoot",null),_=e.getArg(d,"sourcesContent",null),b=e.getArg(d,"mappings"),v=e.getArg(d,"file",null);if(h!=this._version)throw new Error("Unsupported version: "+h);y&&(y=e.normalize(y)),f=f.map(String).map(e.normalize).map(function(g){return y&&e.isAbsolute(y)&&e.isAbsolute(g)?e.relative(y,g):g}),this._names=r.fromArray(p.map(String),!0),this._sources=r.fromArray(f,!0),this._absoluteSources=this._sources.toArray().map(function(g){return e.computeSourceURL(y,g,u)}),this.sourceRoot=y,this.sourcesContent=_,this._mappings=b,this._sourceMapURL=u,this.file=v}o.prototype=Object.create(i.prototype),o.prototype.consumer=i,o.prototype._findSourceIndex=function(l){var u=l;if(this.sourceRoot!=null&&(u=e.relative(this.sourceRoot,u)),this._sources.has(u))return this._sources.indexOf(u);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==l)return d;return-1},o.fromSourceMap=function(u,d){var h=Object.create(o.prototype),f=h._names=r.fromArray(u._names.toArray(),!0),p=h._sources=r.fromArray(u._sources.toArray(),!0);h.sourceRoot=u._sourceRoot,h.sourcesContent=u._generateSourcesContent(h._sources.toArray(),h.sourceRoot),h.file=u._file,h._sourceMapURL=d,h._absoluteSources=h._sources.toArray().map(function(x){return e.computeSourceURL(h.sourceRoot,x,d)});for(var y=u._mappings.toArray().slice(),_=h.__generatedMappings=[],b=h.__originalMappings=[],v=0,g=y.length;v<g;v++){var m=y[v],w=new a;w.generatedLine=m.generatedLine,w.generatedColumn=m.generatedColumn,m.source&&(w.source=p.indexOf(m.source),w.originalLine=m.originalLine,w.originalColumn=m.originalColumn,m.name&&(w.name=f.indexOf(m.name)),b.push(w)),_.push(w)}return s(h.__originalMappings,e.compareByOriginalPositions),h},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}o.prototype._parseMappings=function(u,d){for(var h=1,f=0,p=0,y=0,_=0,b=0,v=u.length,g=0,m={},w={},x=[],S=[],E,A,$,I,T;g<v;)if(u.charAt(g)===";")h++,g++,f=0;else if(u.charAt(g)===",")g++;else{for(E=new a,E.generatedLine=h,I=g;I<v&&!this._charIsMappingSeparator(u,I);I++);if(A=u.slice(g,I),$=m[A],$)g+=A.length;else{for($=[];g<I;)n.decode(u,g,w),T=w.value,g=w.rest,$.push(T);if($.length===2)throw new Error("Found a source, but no line and column");if($.length===3)throw new Error("Found a source and line, but no column");m[A]=$}E.generatedColumn=f+$[0],f=E.generatedColumn,$.length>1&&(E.source=_+$[1],_+=$[1],E.originalLine=p+$[2],p=E.originalLine,E.originalLine+=1,E.originalColumn=y+$[3],y=E.originalColumn,$.length>4&&(E.name=b+$[4],b+=$[4])),S.push(E),typeof E.originalLine=="number"&&x.push(E)}s(S,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,s(x,e.compareByOriginalPositions),this.__originalMappings=x},o.prototype._findMapping=function(u,d,h,f,p,y){if(u[h]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+u[h]);if(u[f]<0)throw new TypeError("Column must be greater than or equal to 0, got "+u[f]);return t.search(u,d,p,y)},o.prototype.computeColumnSpans=function(){for(var u=0;u<this._generatedMappings.length;++u){var d=this._generatedMappings[u];if(u+1<this._generatedMappings.length){var h=this._generatedMappings[u+1];if(d.generatedLine===h.generatedLine){d.lastGeneratedColumn=h.generatedColumn-1;continue}}d.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(u){var d={generatedLine:e.getArg(u,"line"),generatedColumn:e.getArg(u,"column")},h=this._findMapping(d,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(u,"bias",i.GREATEST_LOWER_BOUND));if(h>=0){var f=this._generatedMappings[h];if(f.generatedLine===d.generatedLine){var p=e.getArg(f,"source",null);p!==null&&(p=this._sources.at(p),p=e.computeSourceURL(this.sourceRoot,p,this._sourceMapURL));var y=e.getArg(f,"name",null);return y!==null&&(y=this._names.at(y)),{source:p,line:e.getArg(f,"originalLine",null),column:e.getArg(f,"originalColumn",null),name:y}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(u){return u==null}):!1},o.prototype.sourceContentFor=function(u,d){if(!this.sourcesContent)return null;var h=this._findSourceIndex(u);if(h>=0)return this.sourcesContent[h];var f=u;this.sourceRoot!=null&&(f=e.relative(this.sourceRoot,f));var p;if(this.sourceRoot!=null&&(p=e.urlParse(this.sourceRoot))){var y=f.replace(/^file:\/\//,"");if(p.scheme=="file"&&this._sources.has(y))return this.sourcesContent[this._sources.indexOf(y)];if((!p.path||p.path=="/")&&this._sources.has("/"+f))return this.sourcesContent[this._sources.indexOf("/"+f)]}if(d)return null;throw new Error('"'+f+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(u){var d=e.getArg(u,"source");if(d=this._findSourceIndex(d),d<0)return{line:null,column:null,lastColumn:null};var h={source:d,originalLine:e.getArg(u,"line"),originalColumn:e.getArg(u,"column")},f=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(u,"bias",i.GREATEST_LOWER_BOUND));if(f>=0){var p=this._originalMappings[f];if(p.source===h.source)return{line:e.getArg(p,"generatedLine",null),column:e.getArg(p,"generatedColumn",null),lastColumn:e.getArg(p,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},yy.BasicSourceMapConsumer=o;function c(l,u){var d=l;typeof l=="string"&&(d=e.parseSourceMapInput(l));var h=e.getArg(d,"version"),f=e.getArg(d,"sections");if(h!=this._version)throw new Error("Unsupported version: "+h);this._sources=new r,this._names=new r;var p={line:-1,column:0};this._sections=f.map(function(y){if(y.url)throw new Error("Support for url field in sections not implemented.");var _=e.getArg(y,"offset"),b=e.getArg(_,"line"),v=e.getArg(_,"column");if(b<p.line||b===p.line&&v<p.column)throw new Error("Section offsets must be ordered and non-overlapping.");return p=_,{generatedOffset:{generatedLine:b+1,generatedColumn:v+1},consumer:new i(e.getArg(y,"map"),u)}})}return c.prototype=Object.create(i.prototype),c.prototype.constructor=i,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var l=[],u=0;u<this._sections.length;u++)for(var d=0;d<this._sections[u].consumer.sources.length;d++)l.push(this._sections[u].consumer.sources[d]);return l}}),c.prototype.originalPositionFor=function(u){var d={generatedLine:e.getArg(u,"line"),generatedColumn:e.getArg(u,"column")},h=t.search(d,this._sections,function(p,y){var _=p.generatedLine-y.generatedOffset.generatedLine;return _||p.generatedColumn-y.generatedOffset.generatedColumn}),f=this._sections[h];return f?f.consumer.originalPositionFor({line:d.generatedLine-(f.generatedOffset.generatedLine-1),column:d.generatedColumn-(f.generatedOffset.generatedLine===d.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:u.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(u){return u.consumer.hasContentsOfAllSources()})},c.prototype.sourceContentFor=function(u,d){for(var h=0;h<this._sections.length;h++){var f=this._sections[h],p=f.consumer.sourceContentFor(u,!0);if(p)return p}if(d)return null;throw new Error('"'+u+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(u){for(var d=0;d<this._sections.length;d++){var h=this._sections[d];if(h.consumer._findSourceIndex(e.getArg(u,"source"))!==-1){var f=h.consumer.generatedPositionFor(u);if(f){var p={line:f.line+(h.generatedOffset.generatedLine-1),column:f.column+(h.generatedOffset.generatedLine===f.line?h.generatedOffset.generatedColumn-1:0)};return p}}}return{line:null,column:null}},c.prototype._parseMappings=function(u,d){this.__generatedMappings=[],this.__originalMappings=[];for(var h=0;h<this._sections.length;h++)for(var f=this._sections[h],p=f.consumer._generatedMappings,y=0;y<p.length;y++){var _=p[y],b=f.consumer._sources.at(_.source);b=e.computeSourceURL(f.consumer.sourceRoot,b,this._sourceMapURL),this._sources.add(b),b=this._sources.indexOf(b);var v=null;_.name&&(v=f.consumer._names.at(_.name),this._names.add(v),v=this._names.indexOf(v));var g={source:b,generatedLine:_.generatedLine+(f.generatedOffset.generatedLine-1),generatedColumn:_.generatedColumn+(f.generatedOffset.generatedLine===_.generatedLine?f.generatedOffset.generatedColumn-1:0),originalLine:_.originalLine,originalColumn:_.originalColumn,name:v};this.__generatedMappings.push(g),typeof g.originalLine=="number"&&this.__originalMappings.push(g)}s(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),s(this.__originalMappings,e.compareByOriginalPositions)},yy.IndexedSourceMapConsumer=c,yy}var cE={},xO;function Tse(){if(xO)return cE;xO=1;var e=oR().SourceMapGenerator,t=F0(),r=/(\r?\n)/,n=10,s="$$$isSourceNode$$$";function i(o,a,c,l,u){this.children=[],this.sourceContents={},this.line=o??null,this.column=a??null,this.source=c??null,this.name=u??null,this[s]=!0,l!=null&&this.add(l)}return i.fromStringWithSourceMap=function(a,c,l){var u=new i,d=a.split(r),h=0,f=function(){var v=m(),g=m()||"";return v+g;function m(){return h<d.length?d[h++]:void 0}},p=1,y=0,_=null;return c.eachMapping(function(v){if(_!==null)if(p<v.generatedLine)b(_,f()),p++,y=0;else{var g=d[h]||"",m=g.substr(0,v.generatedColumn-y);d[h]=g.substr(v.generatedColumn-y),y=v.generatedColumn,b(_,m),_=v;return}for(;p<v.generatedLine;)u.add(f()),p++;if(y<v.generatedColumn){var g=d[h]||"";u.add(g.substr(0,v.generatedColumn)),d[h]=g.substr(v.generatedColumn),y=v.generatedColumn}_=v},this),h<d.length&&(_&&b(_,f()),u.add(d.splice(h).join(""))),c.sources.forEach(function(v){var g=c.sourceContentFor(v);g!=null&&(l!=null&&(v=t.join(l,v)),u.setSourceContent(v,g))}),u;function b(v,g){if(v===null||v.source===void 0)u.add(g);else{var m=l?t.join(l,v.source):v.source;u.add(new i(v.originalLine,v.originalColumn,m,g,v.name))}}},i.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(c){this.add(c)},this);else if(a[s]||typeof a=="string")a&&this.children.push(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.prepend=function(a){if(Array.isArray(a))for(var c=a.length-1;c>=0;c--)this.prepend(a[c]);else if(a[s]||typeof a=="string")this.children.unshift(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.walk=function(a){for(var c,l=0,u=this.children.length;l<u;l++)c=this.children[l],c[s]?c.walk(a):c!==""&&a(c,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(a){var c,l,u=this.children.length;if(u>0){for(c=[],l=0;l<u-1;l++)c.push(this.children[l]),c.push(a);c.push(this.children[l]),this.children=c}return this},i.prototype.replaceRight=function(a,c){var l=this.children[this.children.length-1];return l[s]?l.replaceRight(a,c):typeof l=="string"?this.children[this.children.length-1]=l.replace(a,c):this.children.push("".replace(a,c)),this},i.prototype.setSourceContent=function(a,c){this.sourceContents[t.toSetString(a)]=c},i.prototype.walkSourceContents=function(a){for(var c=0,l=this.children.length;c<l;c++)this.children[c][s]&&this.children[c].walkSourceContents(a);for(var u=Object.keys(this.sourceContents),c=0,l=u.length;c<l;c++)a(t.fromSetString(u[c]),this.sourceContents[u[c]])},i.prototype.toString=function(){var a="";return this.walk(function(c){a+=c}),a},i.prototype.toStringWithSourceMap=function(a){var c={code:"",line:1,column:0},l=new e(a),u=!1,d=null,h=null,f=null,p=null;return this.walk(function(y,_){c.code+=y,_.source!==null&&_.line!==null&&_.column!==null?((d!==_.source||h!==_.line||f!==_.column||p!==_.name)&&l.addMapping({source:_.source,original:{line:_.line,column:_.column},generated:{line:c.line,column:c.column},name:_.name}),d=_.source,h=_.line,f=_.column,p=_.name,u=!0):u&&(l.addMapping({generated:{line:c.line,column:c.column}}),d=null,u=!1);for(var b=0,v=y.length;b<v;b++)y.charCodeAt(b)===n?(c.line++,c.column=0,b+1===v?(d=null,u=!1):u&&l.addMapping({source:_.source,original:{line:_.line,column:_.column},generated:{line:c.line,column:c.column},name:_.name})):c.column++}),this.walkSourceContents(function(y,_){l.setSourceContent(y,_)}),{code:c.code,map:l}},cE.SourceNode=i,cE}var $O;function Ise(){return $O||($O=1,hy.SourceMapGenerator=oR().SourceMapGenerator,hy.SourceMapConsumer=Ose().SourceMapConsumer,hy.SourceNode=Tse().SourceNode),hy}const Bse="escodegen",Fse="ECMAScript code generator",Nse="http://github.com/estools/escodegen",Rse="escodegen.js",Mse={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},jse=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],Use="1.14.3",Kse={node:">=4.0"},Lse=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],qse={type:"git",url:"http://github.com/estools/escodegen.git"},Vse={estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},Hse={"source-map":"~0.6.1"},zse={acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},Wse="BSD-2-Clause",Jse={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},Gse={name:Bse,description:Fse,homepage:Nse,main:Rse,bin:Mse,files:jse,version:Use,engines:Kse,maintainers:Lse,repository:qse,dependencies:Vse,optionalDependencies:Hse,devDependencies:zse,license:Wse,scripts:Jse};(function(e){(function(){var t,r,n,s,i,o,a,c,l,u,d,h,f,p,y,_,b,v,g,m,w,x,S,E,A,$;i=QN,o=zv,t=i.Syntax;function I(P){return vt.Expression.hasOwnProperty(P.type)}function T(P){return vt.Statement.hasOwnProperty(P.type)}r={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},n={"||":r.LogicalOR,"&&":r.LogicalAND,"|":r.BitwiseOR,"^":r.BitwiseXOR,"&":r.BitwiseAND,"==":r.Equality,"!=":r.Equality,"===":r.Equality,"!==":r.Equality,is:r.Equality,isnt:r.Equality,"<":r.Relational,">":r.Relational,"<=":r.Relational,">=":r.Relational,in:r.Relational,instanceof:r.Relational,"<<":r.BitwiseSHIFT,">>":r.BitwiseSHIFT,">>>":r.BitwiseSHIFT,"+":r.Additive,"-":r.Additive,"*":r.Multiplicative,"%":r.Multiplicative,"/":r.Multiplicative,"**":r.Exponentiation};var R=1,L=2,j=4,U=8,te=16,z=32,ee=L|j,q=R|L,O=R|L|j,Y=R,H=j,C=R|j,B=R,Z=R|z,Q=0,oe=R|te,fe=R|U;function he(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function _e(P,J){var K="";for(J|=0;J>0;J>>>=1,P+=P)J&1&&(K+=P);return K}function Ie(P){return/[\r\n]/g.test(P)}function F(P){var J=P.length;return J&&o.code.isLineTerminator(P.charCodeAt(J-1))}function M(P,J){var K;for(K in J)J.hasOwnProperty(K)&&(P[K]=J[K]);return P}function re(P,J){var K,G;function ne(be){return typeof be=="object"&&be instanceof Object&&!(be instanceof RegExp)}for(K in J)J.hasOwnProperty(K)&&(G=J[K],ne(G)?ne(P[K])?re(P[K],G):P[K]=re({},G):P[K]=G);return P}function N(P){var J,K,G,ne,be;if(P!==P)throw new Error("Numeric literal whose value is NaN");if(P<0||P===0&&1/P<0)throw new Error("Numeric literal whose value is negative");if(P===1/0)return l?"null":u?"1e400":"1e+400";if(J=""+P,!u||J.length<3)return J;for(K=J.indexOf("."),!l&&J.charCodeAt(0)===48&&K===1&&(K=0,J=J.slice(1)),G=J,J=J.replace("e+","e"),ne=0,(be=G.indexOf("e"))>0&&(ne=+G.slice(be+1),G=G.slice(0,be)),K>=0&&(ne-=G.length-K-1,G=+(G.slice(0,K)+G.slice(K+1))+""),be=0;G.charCodeAt(G.length+be-1)===48;)--be;return be!==0&&(ne-=be,G=G.slice(0,be)),ne!==0&&(G+="e"+ne),(G.length<J.length||d&&P>1e12&&Math.floor(P)===P&&(G="0x"+P.toString(16)).length<J.length)&&+G===P&&(J=G),J}function D(P,J){return(P&-2)===8232?(J?"u":"\\u")+(P===8232?"2028":"2029"):P===10||P===13?(J?"":"\\")+(P===10?"n":"r"):String.fromCharCode(P)}function k(P){var J,K,G,ne,be,Se,$e,Me;if(K=P.toString(),P.source){if(J=K.match(/\/([^/]*)$/),!J)return K;for(G=J[1],K="",$e=!1,Me=!1,ne=0,be=P.source.length;ne<be;++ne)Se=P.source.charCodeAt(ne),Me?(K+=D(Se,Me),Me=!1):($e?Se===93&&($e=!1):Se===47?K+="\\":Se===91&&($e=!0),K+=D(Se,Me),Me=Se===92);return"/"+K+"/"+G}return K}function X(P,J){var K;return P===8?"\\b":P===12?"\\f":P===9?"\\t":(K=P.toString(16).toUpperCase(),l||P>255?"\\u"+"0000".slice(K.length)+K:P===0&&!o.code.isDecimalDigit(J)?"\\0":P===11?"\\x0B":"\\x"+"00".slice(K.length)+K)}function se(P){if(P===92)return"\\\\";if(P===10)return"\\n";if(P===13)return"\\r";if(P===8232)return"\\u2028";if(P===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function le(P){var J,K,G,ne;for(ne=h==="double"?'"':"'",J=0,K=P.length;J<K;++J)if(G=P.charCodeAt(J),G===39){ne='"';break}else if(G===34){ne="'";break}else G===92&&++J;return ne+P+ne}function ue(P){var J="",K,G,ne,be=0,Se=0,$e,Me;for(K=0,G=P.length;K<G;++K){if(ne=P.charCodeAt(K),ne===39)++be;else if(ne===34)++Se;else if(ne===47&&l)J+="\\";else if(o.code.isLineTerminator(ne)||ne===92){J+=se(ne);continue}else if(!o.code.isIdentifierPartES5(ne)&&(l&&ne<32||!l&&!f&&(ne<32||ne>126))){J+=X(ne,P.charCodeAt(K+1));continue}J+=String.fromCharCode(ne)}if($e=!(h==="double"||h==="auto"&&Se<be),Me=$e?"'":'"',!($e?be:Se))return Me+J+Me;for(P=J,J=Me,K=0,G=P.length;K<G;++K)ne=P.charCodeAt(K),(ne===39&&$e||ne===34&&!$e)&&(J+="\\"),J+=String.fromCharCode(ne);return J+Me}function Ae(P){var J,K,G,ne="";for(J=0,K=P.length;J<K;++J)G=P[J],ne+=Array.isArray(G)?Ae(G):G;return ne}function ye(P,J){if(!x)return Array.isArray(P)?Ae(P):P;if(J==null){if(P instanceof s)return P;J={}}return J.loc==null?new s(null,null,x,P,J.name||null):new s(J.loc.start.line,J.loc.start.column,x===!0?J.loc.source||null:x,P,J.name||null)}function V(){return y||" "}function W(P,J){var K,G,ne,be;return K=ye(P).toString(),K.length===0?[J]:(G=ye(J).toString(),G.length===0?[P]:(ne=K.charCodeAt(K.length-1),be=G.charCodeAt(0),(ne===43||ne===45)&&ne===be||o.code.isIdentifierPartES5(ne)&&o.code.isIdentifierPartES5(be)||ne===47&&be===105?[P,V(),J]:o.code.isWhiteSpace(ne)||o.code.isLineTerminator(ne)||o.code.isWhiteSpace(be)||o.code.isLineTerminator(be)?[P,J]:[P,y,J]))}function pe(P){return[a,P]}function ve(P){var J;J=a,a+=c,P(a),a=J}function xe(P){var J;for(J=P.length-1;J>=0&&!o.code.isLineTerminator(P.charCodeAt(J));--J);return P.length-1-J}function ht(P,J){var K,G,ne,be,Se,$e,Me,Tt;for(K=P.split(/\r\n|[\r\n]/),$e=Number.MAX_VALUE,G=1,ne=K.length;G<ne;++G){for(be=K[G],Se=0;Se<be.length&&o.code.isWhiteSpace(be.charCodeAt(Se));)++Se;$e>Se&&($e=Se)}for(typeof J<"u"?(Me=a,K[1][$e]==="*"&&(J+=" "),a=J):($e&1&&--$e,Me=a),G=1,ne=K.length;G<ne;++G)Tt=ye(pe(K[G].slice($e))),K[G]=x?Tt.join(""):Tt;return a=Me,K.join(`
`)}function wt(P,J){if(P.type==="Line"){if(F(P.value))return"//"+P.value;var K="//"+P.value;return E||(K+=`
`),K}return m.format.indent.adjustMultilineComment&&/[\n\r]/.test(P.value)?ht("/*"+P.value+"*/",J):"/*"+P.value+"*/"}function Rr(P,J){var K,G,ne,be,Se,$e,Me,Tt,ae,ie,ce,we,me,je;if(P.leadingComments&&P.leadingComments.length>0){if(be=J,E){for(ne=P.leadingComments[0],J=[],Tt=ne.extendedRange,ae=ne.range,ce=S.substring(Tt[0],ae[0]),je=(ce.match(/\n/g)||[]).length,je>0?(J.push(_e(`
`,je)),J.push(pe(wt(ne)))):(J.push(ce),J.push(wt(ne))),ie=ae,K=1,G=P.leadingComments.length;K<G;K++)ne=P.leadingComments[K],ae=ne.range,we=S.substring(ie[1],ae[0]),je=(we.match(/\n/g)||[]).length,J.push(_e(`
`,je)),J.push(pe(wt(ne))),ie=ae;me=S.substring(ae[1],Tt[1]),je=(me.match(/\n/g)||[]).length,J.push(_e(`
`,je))}else for(ne=P.leadingComments[0],J=[],v&&P.type===t.Program&&P.body.length===0&&J.push(`
`),J.push(wt(ne)),F(ye(J).toString())||J.push(`
`),K=1,G=P.leadingComments.length;K<G;++K)ne=P.leadingComments[K],Me=[wt(ne)],F(ye(Me).toString())||Me.push(`
`),J.push(pe(Me));J.push(pe(be))}if(P.trailingComments)if(E)ne=P.trailingComments[0],Tt=ne.extendedRange,ae=ne.range,ce=S.substring(Tt[0],ae[0]),je=(ce.match(/\n/g)||[]).length,je>0?(J.push(_e(`
`,je)),J.push(pe(wt(ne)))):(J.push(ce),J.push(wt(ne)));else for(Se=!F(ye(J).toString()),$e=_e(" ",xe(ye([a,J,c]).toString())),K=0,G=P.trailingComments.length;K<G;++K)ne=P.trailingComments[K],Se?(K===0?J=[J,c]:J=[J,$e],J.push(wt(ne,$e))):J=[J,pe(wt(ne))],K!==G-1&&!F(ye(J).toString())&&(J=[J,`
`]);return J}function jt(P,J,K){var G,ne=0;for(G=P;G<J;G++)S[G]===`
`&&ne++;for(G=1;G<ne;G++)K.push(p)}function rr(P,J,K){return J<K?["(",P,")"]:P}function Ga(P){var J,K,G;for(G=P.split(/\r\n|\n/),J=1,K=G.length;J<K;J++)G[J]=p+a+G[J];return G}function Lr(P,J){var K,G,ne;return K=P[m.verbatim],typeof K=="string"?G=rr(Ga(K),r.Sequence,J):(G=Ga(K.content),ne=K.precedence!=null?K.precedence:r.Sequence,G=rr(G,ne,J)),ye(G,P)}function vt(){}vt.prototype.maybeBlock=function(P,J){var K,G,ne=this;return G=!m.comment||!P.leadingComments,P.type===t.BlockStatement&&G?[y,this.generateStatement(P,J)]:P.type===t.EmptyStatement&&G?";":(ve(function(){K=[p,pe(ne.generateStatement(P,J))]}),K)},vt.prototype.maybeBlockSuffix=function(P,J){var K=F(ye(J).toString());return P.type===t.BlockStatement&&(!m.comment||!P.leadingComments)&&!K?[J,y]:K?[J,a]:[J,p,a]};function Mr(P){return ye(P.name,P)}function so(P,J){return P.async?"async"+(J?V():y):""}function Mo(P){var J=P.generator&&!m.moz.starlessGenerator;return J?"*"+y:""}function jo(P){var J=P.value,K="";return J.async&&(K+=so(J,!P.computed)),J.generator&&(K+=Mo(J)?"*":""),K}vt.prototype.generatePattern=function(P,J,K){return P.type===t.Identifier?Mr(P):this.generateExpression(P,J,K)},vt.prototype.generateFunctionParams=function(P){var J,K,G,ne;if(ne=!1,P.type===t.ArrowFunctionExpression&&!P.rest&&(!P.defaults||P.defaults.length===0)&&P.params.length===1&&P.params[0].type===t.Identifier)G=[so(P,!0),Mr(P.params[0])];else{for(G=P.type===t.ArrowFunctionExpression?[so(P,!1)]:[],G.push("("),P.defaults&&(ne=!0),J=0,K=P.params.length;J<K;++J)ne&&P.defaults[J]?G.push(this.generateAssignment(P.params[J],P.defaults[J],"=",r.Assignment,O)):G.push(this.generatePattern(P.params[J],r.Assignment,O)),J+1<K&&G.push(","+y);P.rest&&(P.params.length&&G.push(","+y),G.push("..."),G.push(Mr(P.rest))),G.push(")")}return G},vt.prototype.generateFunctionBody=function(P){var J,K;return J=this.generateFunctionParams(P),P.type===t.ArrowFunctionExpression&&(J.push(y),J.push("=>")),P.expression?(J.push(y),K=this.generateExpression(P.body,r.Assignment,O),K.toString().charAt(0)==="{"&&(K=["(",K,")"]),J.push(K)):J.push(this.maybeBlock(P.body,fe)),J},vt.prototype.generateIterationForStatement=function(P,J,K){var G=["for"+(J.await?V()+"await":"")+y+"("],ne=this;return ve(function(){J.left.type===t.VariableDeclaration?ve(function(){G.push(J.left.kind+V()),G.push(ne.generateStatement(J.left.declarations[0],Q))}):G.push(ne.generateExpression(J.left,r.Call,O)),G=W(G,P),G=[W(G,ne.generateExpression(J.right,r.Assignment,O)),")"]}),G.push(this.maybeBlock(J.body,K)),G},vt.prototype.generatePropertyKey=function(P,J){var K=[];return J&&K.push("["),K.push(this.generateExpression(P,r.Assignment,O)),J&&K.push("]"),K},vt.prototype.generateAssignment=function(P,J,K,G,ne){return r.Assignment<G&&(ne|=R),rr([this.generateExpression(P,r.Call,ne),y+K+y,this.generateExpression(J,r.Assignment,ne)],r.Assignment,G)},vt.prototype.semicolon=function(P){return!b&&P&z?"":";"},vt.Statement={BlockStatement:function(P,J){var K,G,ne=["{",p],be=this;return ve(function(){P.body.length===0&&E&&(K=P.range,K[1]-K[0]>2&&(G=S.substring(K[0]+1,K[1]-1),G[0]===`
`&&(ne=["{"]),ne.push(G)));var Se,$e,Me,Tt;for(Tt=B,J&U&&(Tt|=te),Se=0,$e=P.body.length;Se<$e;++Se)E&&(Se===0&&(P.body[0].leadingComments&&(K=P.body[0].leadingComments[0].extendedRange,G=S.substring(K[0],K[1]),G[0]===`
`&&(ne=["{"])),P.body[0].leadingComments||jt(P.range[0],P.body[0].range[0],ne)),Se>0&&!P.body[Se-1].trailingComments&&!P.body[Se].leadingComments&&jt(P.body[Se-1].range[1],P.body[Se].range[0],ne)),Se===$e-1&&(Tt|=z),P.body[Se].leadingComments&&E?Me=be.generateStatement(P.body[Se],Tt):Me=pe(be.generateStatement(P.body[Se],Tt)),ne.push(Me),F(ye(Me).toString())||E&&Se<$e-1&&P.body[Se+1].leadingComments||ne.push(p),E&&Se===$e-1&&(P.body[Se].trailingComments||jt(P.body[Se].range[1],P.range[1],ne))}),ne.push(pe("}")),ne},BreakStatement:function(P,J){return P.label?"break "+P.label.name+this.semicolon(J):"break"+this.semicolon(J)},ContinueStatement:function(P,J){return P.label?"continue "+P.label.name+this.semicolon(J):"continue"+this.semicolon(J)},ClassBody:function(P,J){var K=["{",p],G=this;return ve(function(ne){var be,Se;for(be=0,Se=P.body.length;be<Se;++be)K.push(ne),K.push(G.generateExpression(P.body[be],r.Sequence,O)),be+1<Se&&K.push(p)}),F(ye(K).toString())||K.push(p),K.push(a),K.push("}"),K},ClassDeclaration:function(P,J){var K,G;return K=["class"],P.id&&(K=W(K,this.generateExpression(P.id,r.Sequence,O))),P.superClass&&(G=W("extends",this.generateExpression(P.superClass,r.Unary,O)),K=W(K,G)),K.push(y),K.push(this.generateStatement(P.body,Z)),K},DirectiveStatement:function(P,J){return m.raw&&P.raw?P.raw+this.semicolon(J):le(P.directive)+this.semicolon(J)},DoWhileStatement:function(P,J){var K=W("do",this.maybeBlock(P.body,B));return K=this.maybeBlockSuffix(P.body,K),W(K,["while"+y+"(",this.generateExpression(P.test,r.Sequence,O),")"+this.semicolon(J)])},CatchClause:function(P,J){var K,G=this;return ve(function(){var ne;P.param?(K=["catch"+y+"(",G.generateExpression(P.param,r.Sequence,O),")"],P.guard&&(ne=G.generateExpression(P.guard,r.Sequence,O),K.splice(2,0," if ",ne))):K=["catch"]}),K.push(this.maybeBlock(P.body,B)),K},DebuggerStatement:function(P,J){return"debugger"+this.semicolon(J)},EmptyStatement:function(P,J){return";"},ExportDefaultDeclaration:function(P,J){var K=["export"],G;return G=J&z?Z:B,K=W(K,"default"),T(P.declaration)?K=W(K,this.generateStatement(P.declaration,G)):K=W(K,this.generateExpression(P.declaration,r.Assignment,O)+this.semicolon(J)),K},ExportNamedDeclaration:function(P,J){var K=["export"],G,ne=this;return G=J&z?Z:B,P.declaration?W(K,this.generateStatement(P.declaration,G)):(P.specifiers&&(P.specifiers.length===0?K=W(K,"{"+y+"}"):P.specifiers[0].type===t.ExportBatchSpecifier?K=W(K,this.generateExpression(P.specifiers[0],r.Sequence,O)):(K=W(K,"{"),ve(function(be){var Se,$e;for(K.push(p),Se=0,$e=P.specifiers.length;Se<$e;++Se)K.push(be),K.push(ne.generateExpression(P.specifiers[Se],r.Sequence,O)),Se+1<$e&&K.push(","+p)}),F(ye(K).toString())||K.push(p),K.push(a+"}")),P.source?K=W(K,["from"+y,this.generateExpression(P.source,r.Sequence,O),this.semicolon(J)]):K.push(this.semicolon(J))),K)},ExportAllDeclaration:function(P,J){return["export"+y,"*"+y,"from"+y,this.generateExpression(P.source,r.Sequence,O),this.semicolon(J)]},ExpressionStatement:function(P,J){var K,G;function ne($e){var Me;return $e.slice(0,5)!=="class"?!1:(Me=$e.charCodeAt(5),Me===123||o.code.isWhiteSpace(Me)||o.code.isLineTerminator(Me))}function be($e){var Me;return $e.slice(0,8)!=="function"?!1:(Me=$e.charCodeAt(8),Me===40||o.code.isWhiteSpace(Me)||Me===42||o.code.isLineTerminator(Me))}function Se($e){var Me,Tt,ae;if($e.slice(0,5)!=="async"||!o.code.isWhiteSpace($e.charCodeAt(5)))return!1;for(Tt=6,ae=$e.length;Tt<ae&&o.code.isWhiteSpace($e.charCodeAt(Tt));++Tt);return Tt===ae||$e.slice(Tt,Tt+8)!=="function"?!1:(Me=$e.charCodeAt(Tt+8),Me===40||o.code.isWhiteSpace(Me)||Me===42||o.code.isLineTerminator(Me))}return K=[this.generateExpression(P.expression,r.Sequence,O)],G=ye(K).toString(),G.charCodeAt(0)===123||ne(G)||be(G)||Se(G)||g&&J&te&&P.expression.type===t.Literal&&typeof P.expression.value=="string"?K=["(",K,")"+this.semicolon(J)]:K.push(this.semicolon(J)),K},ImportDeclaration:function(P,J){var K,G,ne=this;return P.specifiers.length===0?["import",y,this.generateExpression(P.source,r.Sequence,O),this.semicolon(J)]:(K=["import"],G=0,P.specifiers[G].type===t.ImportDefaultSpecifier&&(K=W(K,[this.generateExpression(P.specifiers[G],r.Sequence,O)]),++G),P.specifiers[G]&&(G!==0&&K.push(","),P.specifiers[G].type===t.ImportNamespaceSpecifier?K=W(K,[y,this.generateExpression(P.specifiers[G],r.Sequence,O)]):(K.push(y+"{"),P.specifiers.length-G===1?(K.push(y),K.push(this.generateExpression(P.specifiers[G],r.Sequence,O)),K.push(y+"}"+y)):(ve(function(be){var Se,$e;for(K.push(p),Se=G,$e=P.specifiers.length;Se<$e;++Se)K.push(be),K.push(ne.generateExpression(P.specifiers[Se],r.Sequence,O)),Se+1<$e&&K.push(","+p)}),F(ye(K).toString())||K.push(p),K.push(a+"}"+y)))),K=W(K,["from"+y,this.generateExpression(P.source,r.Sequence,O),this.semicolon(J)]),K)},VariableDeclarator:function(P,J){var K=J&R?O:ee;return P.init?[this.generateExpression(P.id,r.Assignment,K),y,"=",y,this.generateExpression(P.init,r.Assignment,K)]:this.generatePattern(P.id,r.Assignment,K)},VariableDeclaration:function(P,J){var K,G,ne,be,Se,$e=this;K=[P.kind],Se=J&R?B:Q;function Me(){for(be=P.declarations[0],m.comment&&be.leadingComments?(K.push(`
`),K.push(pe($e.generateStatement(be,Se)))):(K.push(V()),K.push($e.generateStatement(be,Se))),G=1,ne=P.declarations.length;G<ne;++G)be=P.declarations[G],m.comment&&be.leadingComments?(K.push(","+p),K.push(pe($e.generateStatement(be,Se)))):(K.push(","+y),K.push($e.generateStatement(be,Se)))}return P.declarations.length>1?ve(Me):Me(),K.push(this.semicolon(J)),K},ThrowStatement:function(P,J){return[W("throw",this.generateExpression(P.argument,r.Sequence,O)),this.semicolon(J)]},TryStatement:function(P,J){var K,G,ne,be;if(K=["try",this.maybeBlock(P.block,B)],K=this.maybeBlockSuffix(P.block,K),P.handlers)for(G=0,ne=P.handlers.length;G<ne;++G)K=W(K,this.generateStatement(P.handlers[G],B)),(P.finalizer||G+1!==ne)&&(K=this.maybeBlockSuffix(P.handlers[G].body,K));else{for(be=P.guardedHandlers||[],G=0,ne=be.length;G<ne;++G)K=W(K,this.generateStatement(be[G],B)),(P.finalizer||G+1!==ne)&&(K=this.maybeBlockSuffix(be[G].body,K));if(P.handler)if(Array.isArray(P.handler))for(G=0,ne=P.handler.length;G<ne;++G)K=W(K,this.generateStatement(P.handler[G],B)),(P.finalizer||G+1!==ne)&&(K=this.maybeBlockSuffix(P.handler[G].body,K));else K=W(K,this.generateStatement(P.handler,B)),P.finalizer&&(K=this.maybeBlockSuffix(P.handler.body,K))}return P.finalizer&&(K=W(K,["finally",this.maybeBlock(P.finalizer,B)])),K},SwitchStatement:function(P,J){var K,G,ne,be,Se,$e=this;if(ve(function(){K=["switch"+y+"(",$e.generateExpression(P.discriminant,r.Sequence,O),")"+y+"{"+p]}),P.cases)for(Se=B,ne=0,be=P.cases.length;ne<be;++ne)ne===be-1&&(Se|=z),G=pe(this.generateStatement(P.cases[ne],Se)),K.push(G),F(ye(G).toString())||K.push(p);return K.push(pe("}")),K},SwitchCase:function(P,J){var K,G,ne,be,Se,$e=this;return ve(function(){for(P.test?K=[W("case",$e.generateExpression(P.test,r.Sequence,O)),":"]:K=["default:"],ne=0,be=P.consequent.length,be&&P.consequent[0].type===t.BlockStatement&&(G=$e.maybeBlock(P.consequent[0],B),K.push(G),ne=1),ne!==be&&!F(ye(K).toString())&&K.push(p),Se=B;ne<be;++ne)ne===be-1&&J&z&&(Se|=z),G=pe($e.generateStatement(P.consequent[ne],Se)),K.push(G),ne+1!==be&&!F(ye(G).toString())&&K.push(p)}),K},IfStatement:function(P,J){var K,G,ne,be=this;return ve(function(){K=["if"+y+"(",be.generateExpression(P.test,r.Sequence,O),")"]}),ne=J&z,G=B,ne&&(G|=z),P.alternate?(K.push(this.maybeBlock(P.consequent,B)),K=this.maybeBlockSuffix(P.consequent,K),P.alternate.type===t.IfStatement?K=W(K,["else ",this.generateStatement(P.alternate,G)]):K=W(K,W("else",this.maybeBlock(P.alternate,G)))):K.push(this.maybeBlock(P.consequent,G)),K},ForStatement:function(P,J){var K,G=this;return ve(function(){K=["for"+y+"("],P.init?P.init.type===t.VariableDeclaration?K.push(G.generateStatement(P.init,Q)):(K.push(G.generateExpression(P.init,r.Sequence,ee)),K.push(";")):K.push(";"),P.test&&(K.push(y),K.push(G.generateExpression(P.test,r.Sequence,O))),K.push(";"),P.update&&(K.push(y),K.push(G.generateExpression(P.update,r.Sequence,O))),K.push(")")}),K.push(this.maybeBlock(P.body,J&z?Z:B)),K},ForInStatement:function(P,J){return this.generateIterationForStatement("in",P,J&z?Z:B)},ForOfStatement:function(P,J){return this.generateIterationForStatement("of",P,J&z?Z:B)},LabeledStatement:function(P,J){return[P.label.name+":",this.maybeBlock(P.body,J&z?Z:B)]},Program:function(P,J){var K,G,ne,be,Se;for(be=P.body.length,K=[v&&be>0?`
`:""],Se=oe,ne=0;ne<be;++ne)!v&&ne===be-1&&(Se|=z),E&&(ne===0&&(P.body[0].leadingComments||jt(P.range[0],P.body[ne].range[0],K)),ne>0&&!P.body[ne-1].trailingComments&&!P.body[ne].leadingComments&&jt(P.body[ne-1].range[1],P.body[ne].range[0],K)),G=pe(this.generateStatement(P.body[ne],Se)),K.push(G),ne+1<be&&!F(ye(G).toString())&&(E&&P.body[ne+1].leadingComments||K.push(p)),E&&ne===be-1&&(P.body[ne].trailingComments||jt(P.body[ne].range[1],P.range[1],K));return K},FunctionDeclaration:function(P,J){return[so(P,!0),"function",Mo(P)||V(),P.id?Mr(P.id):"",this.generateFunctionBody(P)]},ReturnStatement:function(P,J){return P.argument?[W("return",this.generateExpression(P.argument,r.Sequence,O)),this.semicolon(J)]:["return"+this.semicolon(J)]},WhileStatement:function(P,J){var K,G=this;return ve(function(){K=["while"+y+"(",G.generateExpression(P.test,r.Sequence,O),")"]}),K.push(this.maybeBlock(P.body,J&z?Z:B)),K},WithStatement:function(P,J){var K,G=this;return ve(function(){K=["with"+y+"(",G.generateExpression(P.object,r.Sequence,O),")"]}),K.push(this.maybeBlock(P.body,J&z?Z:B)),K}},M(vt.prototype,vt.Statement),vt.Expression={SequenceExpression:function(P,J,K){var G,ne,be;for(r.Sequence<J&&(K|=R),G=[],ne=0,be=P.expressions.length;ne<be;++ne)G.push(this.generateExpression(P.expressions[ne],r.Assignment,K)),ne+1<be&&G.push(","+y);return rr(G,r.Sequence,J)},AssignmentExpression:function(P,J,K){return this.generateAssignment(P.left,P.right,P.operator,J,K)},ArrowFunctionExpression:function(P,J,K){return rr(this.generateFunctionBody(P),r.ArrowFunction,J)},ConditionalExpression:function(P,J,K){return r.Conditional<J&&(K|=R),rr([this.generateExpression(P.test,r.LogicalOR,K),y+"?"+y,this.generateExpression(P.consequent,r.Assignment,K),y+":"+y,this.generateExpression(P.alternate,r.Assignment,K)],r.Conditional,J)},LogicalExpression:function(P,J,K){return this.BinaryExpression(P,J,K)},BinaryExpression:function(P,J,K){var G,ne,be,Se,$e,Me;return Se=n[P.operator],ne=P.operator==="**"?r.Postfix:Se,be=P.operator==="**"?Se:Se+1,Se<J&&(K|=R),$e=this.generateExpression(P.left,ne,K),Me=$e.toString(),Me.charCodeAt(Me.length-1)===47&&o.code.isIdentifierPartES5(P.operator.charCodeAt(0))?G=[$e,V(),P.operator]:G=W($e,P.operator),$e=this.generateExpression(P.right,be,K),P.operator==="/"&&$e.toString().charAt(0)==="/"||P.operator.slice(-1)==="<"&&$e.toString().slice(0,3)==="!--"?(G.push(V()),G.push($e)):G=W(G,$e),P.operator==="in"&&!(K&R)?["(",G,")"]:rr(G,Se,J)},CallExpression:function(P,J,K){var G,ne,be;for(G=[this.generateExpression(P.callee,r.Call,q)],G.push("("),ne=0,be=P.arguments.length;ne<be;++ne)G.push(this.generateExpression(P.arguments[ne],r.Assignment,O)),ne+1<be&&G.push(","+y);return G.push(")"),K&L?rr(G,r.Call,J):["(",G,")"]},NewExpression:function(P,J,K){var G,ne,be,Se,$e;if(ne=P.arguments.length,$e=K&j&&!_&&ne===0?C:Y,G=W("new",this.generateExpression(P.callee,r.New,$e)),!(K&j)||_||ne>0){for(G.push("("),be=0,Se=ne;be<Se;++be)G.push(this.generateExpression(P.arguments[be],r.Assignment,O)),be+1<Se&&G.push(","+y);G.push(")")}return rr(G,r.New,J)},MemberExpression:function(P,J,K){var G,ne;return G=[this.generateExpression(P.object,r.Call,K&L?q:Y)],P.computed?(G.push("["),G.push(this.generateExpression(P.property,r.Sequence,K&L?O:C)),G.push("]")):(P.object.type===t.Literal&&typeof P.object.value=="number"&&(ne=ye(G).toString(),ne.indexOf(".")<0&&!/[eExX]/.test(ne)&&o.code.isDecimalDigit(ne.charCodeAt(ne.length-1))&&!(ne.length>=2&&ne.charCodeAt(0)===48)&&G.push(" ")),G.push("."),G.push(Mr(P.property))),rr(G,r.Member,J)},MetaProperty:function(P,J,K){var G;return G=[],G.push(typeof P.meta=="string"?P.meta:Mr(P.meta)),G.push("."),G.push(typeof P.property=="string"?P.property:Mr(P.property)),rr(G,r.Member,J)},UnaryExpression:function(P,J,K){var G,ne,be,Se,$e;return ne=this.generateExpression(P.argument,r.Unary,O),y===""?G=W(P.operator,ne):(G=[P.operator],P.operator.length>2?G=W(G,ne):(Se=ye(G).toString(),$e=Se.charCodeAt(Se.length-1),be=ne.toString().charCodeAt(0),(($e===43||$e===45)&&$e===be||o.code.isIdentifierPartES5($e)&&o.code.isIdentifierPartES5(be))&&G.push(V()),G.push(ne))),rr(G,r.Unary,J)},YieldExpression:function(P,J,K){var G;return P.delegate?G="yield*":G="yield",P.argument&&(G=W(G,this.generateExpression(P.argument,r.Yield,O))),rr(G,r.Yield,J)},AwaitExpression:function(P,J,K){var G=W(P.all?"await*":"await",this.generateExpression(P.argument,r.Await,O));return rr(G,r.Await,J)},UpdateExpression:function(P,J,K){return P.prefix?rr([P.operator,this.generateExpression(P.argument,r.Unary,O)],r.Unary,J):rr([this.generateExpression(P.argument,r.Postfix,O),P.operator],r.Postfix,J)},FunctionExpression:function(P,J,K){var G=[so(P,!0),"function"];return P.id?(G.push(Mo(P)||V()),G.push(Mr(P.id))):G.push(Mo(P)||y),G.push(this.generateFunctionBody(P)),G},ArrayPattern:function(P,J,K){return this.ArrayExpression(P,J,K,!0)},ArrayExpression:function(P,J,K,G){var ne,be,Se=this;return P.elements.length?(be=G?!1:P.elements.length>1,ne=["[",be?p:""],ve(function($e){var Me,Tt;for(Me=0,Tt=P.elements.length;Me<Tt;++Me)P.elements[Me]?(ne.push(be?$e:""),ne.push(Se.generateExpression(P.elements[Me],r.Assignment,O))):(be&&ne.push($e),Me+1===Tt&&ne.push(",")),Me+1<Tt&&ne.push(","+(be?p:y))}),be&&!F(ye(ne).toString())&&ne.push(p),ne.push(be?a:""),ne.push("]"),ne):"[]"},RestElement:function(P,J,K){return"..."+this.generatePattern(P.argument)},ClassExpression:function(P,J,K){var G,ne;return G=["class"],P.id&&(G=W(G,this.generateExpression(P.id,r.Sequence,O))),P.superClass&&(ne=W("extends",this.generateExpression(P.superClass,r.Unary,O)),G=W(G,ne)),G.push(y),G.push(this.generateStatement(P.body,Z)),G},MethodDefinition:function(P,J,K){var G,ne;return P.static?G=["static"+y]:G=[],P.kind==="get"||P.kind==="set"?ne=[W(P.kind,this.generatePropertyKey(P.key,P.computed)),this.generateFunctionBody(P.value)]:ne=[jo(P),this.generatePropertyKey(P.key,P.computed),this.generateFunctionBody(P.value)],W(G,ne)},Property:function(P,J,K){return P.kind==="get"||P.kind==="set"?[P.kind,V(),this.generatePropertyKey(P.key,P.computed),this.generateFunctionBody(P.value)]:P.shorthand?P.value.type==="AssignmentPattern"?this.AssignmentPattern(P.value,r.Sequence,O):this.generatePropertyKey(P.key,P.computed):P.method?[jo(P),this.generatePropertyKey(P.key,P.computed),this.generateFunctionBody(P.value)]:[this.generatePropertyKey(P.key,P.computed),":"+y,this.generateExpression(P.value,r.Assignment,O)]},ObjectExpression:function(P,J,K){var G,ne,be,Se=this;return P.properties.length?(G=P.properties.length>1,ve(function(){be=Se.generateExpression(P.properties[0],r.Sequence,O)}),!G&&!Ie(ye(be).toString())?["{",y,be,y,"}"]:(ve(function($e){var Me,Tt;if(ne=["{",p,$e,be],G)for(ne.push(","+p),Me=1,Tt=P.properties.length;Me<Tt;++Me)ne.push($e),ne.push(Se.generateExpression(P.properties[Me],r.Sequence,O)),Me+1<Tt&&ne.push(","+p)}),F(ye(ne).toString())||ne.push(p),ne.push(a),ne.push("}"),ne)):"{}"},AssignmentPattern:function(P,J,K){return this.generateAssignment(P.left,P.right,"=",J,K)},ObjectPattern:function(P,J,K){var G,ne,be,Se,$e,Me=this;if(!P.properties.length)return"{}";if(Se=!1,P.properties.length===1)$e=P.properties[0],$e.type===t.Property&&$e.value.type!==t.Identifier&&(Se=!0);else for(ne=0,be=P.properties.length;ne<be;++ne)if($e=P.properties[ne],$e.type===t.Property&&!$e.shorthand){Se=!0;break}return G=["{",Se?p:""],ve(function(Tt){var ae,ie;for(ae=0,ie=P.properties.length;ae<ie;++ae)G.push(Se?Tt:""),G.push(Me.generateExpression(P.properties[ae],r.Sequence,O)),ae+1<ie&&G.push(","+(Se?p:y))}),Se&&!F(ye(G).toString())&&G.push(p),G.push(Se?a:""),G.push("}"),G},ThisExpression:function(P,J,K){return"this"},Super:function(P,J,K){return"super"},Identifier:function(P,J,K){return Mr(P)},ImportDefaultSpecifier:function(P,J,K){return Mr(P.id||P.local)},ImportNamespaceSpecifier:function(P,J,K){var G=["*"],ne=P.id||P.local;return ne&&G.push(y+"as"+V()+Mr(ne)),G},ImportSpecifier:function(P,J,K){var G=P.imported,ne=[G.name],be=P.local;return be&&be.name!==G.name&&ne.push(V()+"as"+V()+Mr(be)),ne},ExportSpecifier:function(P,J,K){var G=P.local,ne=[G.name],be=P.exported;return be&&be.name!==G.name&&ne.push(V()+"as"+V()+Mr(be)),ne},Literal:function(P,J,K){var G;if(P.hasOwnProperty("raw")&&w&&m.raw)try{if(G=w(P.raw).body[0].expression,G.type===t.Literal&&G.value===P.value)return P.raw}catch{}return P.regex?"/"+P.regex.pattern+"/"+P.regex.flags:P.value===null?"null":typeof P.value=="string"?ue(P.value):typeof P.value=="number"?N(P.value):typeof P.value=="boolean"?P.value?"true":"false":k(P.value)},GeneratorExpression:function(P,J,K){return this.ComprehensionExpression(P,J,K)},ComprehensionExpression:function(P,J,K){var G,ne,be,Se,$e=this;return G=P.type===t.GeneratorExpression?["("]:["["],m.moz.comprehensionExpressionStartsWithAssignment&&(Se=this.generateExpression(P.body,r.Assignment,O),G.push(Se)),P.blocks&&ve(function(){for(ne=0,be=P.blocks.length;ne<be;++ne)Se=$e.generateExpression(P.blocks[ne],r.Sequence,O),ne>0||m.moz.comprehensionExpressionStartsWithAssignment?G=W(G,Se):G.push(Se)}),P.filter&&(G=W(G,"if"+y),Se=this.generateExpression(P.filter,r.Sequence,O),G=W(G,["(",Se,")"])),m.moz.comprehensionExpressionStartsWithAssignment||(Se=this.generateExpression(P.body,r.Assignment,O),G=W(G,Se)),G.push(P.type===t.GeneratorExpression?")":"]"),G},ComprehensionBlock:function(P,J,K){var G;return P.left.type===t.VariableDeclaration?G=[P.left.kind,V(),this.generateStatement(P.left.declarations[0],Q)]:G=this.generateExpression(P.left,r.Call,O),G=W(G,P.of?"of":"in"),G=W(G,this.generateExpression(P.right,r.Sequence,O)),["for"+y+"(",G,")"]},SpreadElement:function(P,J,K){return["...",this.generateExpression(P.argument,r.Assignment,O)]},TaggedTemplateExpression:function(P,J,K){var G=q;K&L||(G=Y);var ne=[this.generateExpression(P.tag,r.Call,G),this.generateExpression(P.quasi,r.Primary,H)];return rr(ne,r.TaggedTemplate,J)},TemplateElement:function(P,J,K){return P.value.raw},TemplateLiteral:function(P,J,K){var G,ne,be;for(G=["`"],ne=0,be=P.quasis.length;ne<be;++ne)G.push(this.generateExpression(P.quasis[ne],r.Primary,O)),ne+1<be&&(G.push("${"+y),G.push(this.generateExpression(P.expressions[ne],r.Sequence,O)),G.push(y+"}"));return G.push("`"),G},ModuleSpecifier:function(P,J,K){return this.Literal(P,J,K)},ImportExpression:function(P,J,K){return rr(["import(",this.generateExpression(P.source,r.Assignment,O),")"],r.Call,J)}},M(vt.prototype,vt.Expression),vt.prototype.generateExpression=function(P,J,K){var G,ne;return ne=P.type||t.Property,m.verbatim&&P.hasOwnProperty(m.verbatim)?Lr(P,J):(G=this[ne](P,J,K),m.comment&&(G=Rr(P,G)),ye(G,P))},vt.prototype.generateStatement=function(P,J){var K,G;return K=this[P.type](P,J),m.comment&&(K=Rr(P,K)),G=ye(K).toString(),P.type===t.Program&&!v&&p===""&&G.charAt(G.length-1)===`
`&&(K=x?ye(K).replaceRight(/\s+$/,""):G.replace(/\s+$/,"")),ye(K,P)};function oo(P){var J;if(J=new vt,T(P))return J.generateStatement(P,B);if(I(P))return J.generateExpression(P,r.Sequence,O);throw new Error("Unknown node type: "+P.type)}function Ji(P,J){var K=he(),G,ne;return J!=null?(typeof J.indent=="string"&&(K.format.indent.style=J.indent),typeof J.base=="number"&&(K.format.indent.base=J.base),J=re(K,J),c=J.format.indent.style,typeof J.base=="string"?a=J.base:a=_e(c,J.format.indent.base)):(J=K,c=J.format.indent.style,a=_e(c,J.format.indent.base)),l=J.format.json,u=J.format.renumber,d=l?!1:J.format.hexadecimal,h=l?"double":J.format.quotes,f=J.format.escapeless,p=J.format.newline,y=J.format.space,J.format.compact&&(p=y=c=a=""),_=J.format.parentheses,b=J.format.semicolons,v=J.format.safeConcatenation,g=J.directive,w=l?null:J.parse,x=J.sourceMap,S=J.sourceCode,E=J.format.preserveBlankLines&&S!==null,m=J,x&&(e.browser?s=tr.sourceMap.SourceNode:s=Ise().SourceNode),G=oo(P),x?(ne=G.toStringWithSourceMap({file:J.file,sourceRoot:J.sourceMapRoot}),J.sourceContent&&ne.map.setSourceContent(J.sourceMap,J.sourceContent),J.sourceMapWithCode?ne:ne.map.toString()):(ne={code:G.toString(),map:null},J.sourceMapWithCode?ne:ne.code)}A={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},$=he().format,e.version=Gse.version,e.generate=Ji,e.attachComments=i.attachComments,e.Precedence=re({},r),e.browser=!1,e.FORMAT_MINIFY=A,e.FORMAT_DEFAULTS=$})()})(YN);var Xse=YN.generate,Zse=function(e,t){t||(t={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var c=[],l=0,u=i.elements.length;l<u;l++){var d=s(i.elements[l]);if(d===r)return r;c.push(d)}return c}else if(i.type==="ObjectExpression"){for(var h={},l=0;l<i.properties.length;l++){var f=i.properties[l],p=f.value===null?f.value:s(f.value);if(p===r)return r;h[f.key.value||f.key.name]=p}return h}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var u=s(i.left);if(u===r)return r;var y=s(i.right);if(y===r)return r;var _=i.operator;return _==="=="?u==y:_==="==="?u===y:_==="!="?u!=y:_==="!=="?u!==y:_==="+"?u+y:_==="-"?u-y:_==="*"?u*y:_==="/"?u/y:_==="%"?u%y:_==="<"?u<y:_==="<="?u<=y:_===">"?u>y:_===">="?u>=y:_==="|"?u|y:_==="&"?u&y:_==="^"?u^y:_==="&&"?u&&y:_==="||"?u||y:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(t,i.name)?t[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(t,"this")?t.this:r;if(i.type==="CallExpression"){var b=s(i.callee);if(b===r||typeof b!="function")return r;var v=i.callee.object?s(i.callee.object):r;v===r&&(v=null);for(var g=[],l=0,u=i.arguments.length;l<u;l++){var d=s(i.arguments[l]);if(d===r)return r;g.push(d)}return b.apply(v,g)}else if(i.type==="MemberExpression"){var h=s(i.object);if(h===r||typeof h=="function")return r;if(i.property.type==="Identifier")return h[i.property.name];var f=s(i.property);return f===r?r:h[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var m=i.body.body,w={};Object.keys(t).forEach(function(L){w[L]=t[L]});for(var l=0;l<i.params.length;l++){var x=i.params[l];if(x.type=="Identifier")t[x.name]=null;else return r}for(var l in m)if(s(m[l])===r)return r;t=w;var S=Object.keys(t),E=S.map(function(L){return t[L]});return Function(S.join(", "),"return "+Xse(i)).apply(null,E)}else if(i.type==="TemplateLiteral"){for(var A="",l=0;l<i.expressions.length;l++)A+=s(i.quasis[l]),A+=s(i.expressions[l]);return A+=s(i.quasis[l]),A}else if(i.type==="TaggedTemplateExpression"){var $=s(i.tag),I=i.quasi,T=I.quasis.map(s),R=I.expressions.map(s);return $.apply(null,[T].concat(R))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(e);return n===r?void 0:n};const Yse=La(Zse);function DO(e){return function(t,r,n,s){var i=t.value,o=t.path,a=[],c=(function(l,u){aR(l)?(l.forEach(function(d,h){a.length>=s||n(h,d,r)&&a.push({path:u.concat(h),value:d})}),l.forEach(function(d,h){a.length>=s||e&&c(d,u.concat(h))})):eoe(l)&&(Object.keys(l).forEach(function(d){a.length>=s||n(d,l[d],r)&&a.push({path:u.concat(d),value:l[d]})}),Object.keys(l).forEach(function(d){a.length>=s||e&&c(l[d],u.concat(d))}))}).bind(this);return c(i,o),a}}function E2(e,t){try{return Yse(e,t)}catch{}}function Zg(e){return function(t,r,n){return this.descend(r,t.expression.value,e,n)}}function Yg(e){return function(t,r,n){return this.traverse(r,t.expression.value,e,n)}}function CO(e){return e=e.filter(function(t){return t}),roe(e,function(t){return t.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Qse(e){var t=String(e);return t.match(/^-?[0-9]+$/)?parseInt(t):null}function aR(e){return Array.isArray(e)}function eoe(e){return e&&!(e instanceof Array)&&e instanceof Object}function lE(e,t,r){var n=_2(t).body[0].expression,s=E2(n,{"@":e.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=Xt.nodes(e.value,i);return o.forEach(function(a){a.path=e.path.concat(a.path.slice(1))}),o}var toe=function(){function e(){this._fns={"member-child-identifier":function(t,r){var n=t.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":Yg(function(t,r,n){return t==n}),"subscript-child-numeric_literal":Zg(function(t,r,n){return t===n}),"member-child-numeric_literal":Zg(function(t,r,n){return String(t)===String(n)}),"subscript-descendant-numeric_literal":Yg(function(t,r,n){return t===n}),"member-child-wildcard":Zg(function(){return!0}),"member-descendant-wildcard":Yg(function(){return!0}),"subscript-descendant-wildcard":Yg(function(){return!0}),"subscript-child-wildcard":Zg(function(){return!0}),"subscript-child-slice":function(t,r){if(aR(r.value)){var n=t.expression.value.split(":").map(Qse),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return fse.apply(null,[s].concat(n))}},"subscript-child-union":function(t,r){var n=[];return t.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),CO(n)},"subscript-descendant-union":function(t,r,n){var s=this,i=[],o=Xt.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||t.expression.value.forEach(function(c){var l={operation:"subscript",scope:"child",expression:c.expression},u=s.resolve(l),d=u(l,a);i=i.concat(d)})}),CO(i)},"subscript-child-filter_expression":function(t,r,n){var s=t.expression.value.slice(2,-1),i=_2(s).body[0].expression,o=function(a,c){return E2(i,{"@":c})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(t,r,n){var s=t.expression.value.slice(2,-1),i=_2(s).body[0].expression,o=function(a,c){return E2(i,{"@":c})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(t,r){var n=t.expression.value.slice(1,-1);return lE(r,n,"$[{{value}}]")},"member-child-script_expression":function(t,r){var n=t.expression.value.slice(1,-1);return lE(r,n,"$.{{value}}")},"member-descendant-script_expression":function(t,r){var n=t.expression.value.slice(1,-1);return lE(r,n,"$..value")}},this.initialize()}return e.prototype.initialize=function(){this.traverse=DO(!0),this.descend=DO(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},e.prototype.resolve=function(t){var r=[t.operation,t.scope,t.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},e.prototype.register=function(t,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[t]=r},e}();function roe(e,t){for(var r=[],n=[],s=0,i=e==null?void 0:e.length;s<i;s++){var o=e[s],a=t?t(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}var noe={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"};function ioe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uR={};(function(e){var t=function(){var r=function(E,A,$,I){for($=$||{},I=E.length;I--;$[E[I]]=A);return $},n=[1,5],s=[1,6],i=[1,7],o=[1,8],a=[1,9],c=[1,18],l=[1,19],u=[1,20],d=[1,12,14,22],h=[1,29],f=[1,30],p=[1,33],y=[1,35],_=[1,31],b=[1,36],v=[1,37],g=[24,28],m={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(A,$,I,T,R,L,j){T.ast||(T.ast=w,w.initialize());var U=L.length-1;switch(R){case 1:return T.ast.set({expression:{type:"root",value:L[U]}}),T.ast.unshift(),T.ast.yield();case 2:return T.ast.set({expression:{type:"root",value:L[U-1]}}),T.ast.unshift(),T.ast.yield();case 3:return T.ast.unshift(),T.ast.yield();case 4:return T.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:L[U-1]}}),T.ast.unshift(),T.ast.yield();case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:T.ast.set({operation:"member"}),T.ast.push();break;case 8:T.ast.set({operation:"subscript"}),T.ast.push();break;case 9:case 19:T.ast.set({scope:"child"});break;case 10:case 20:T.ast.set({scope:"descendant"});break;case 12:T.ast.set({scope:"child",operation:"member"});break;case 14:T.ast.set({expression:{type:"wildcard",value:L[U]}});break;case 15:T.ast.set({expression:{type:"identifier",value:L[U]}});break;case 16:T.ast.set({expression:{type:"script_expression",value:L[U]}});break;case 17:T.ast.set({expression:{type:"numeric_literal",value:parseInt(L[U])}});break;case 24:L[U].length>1?T.ast.set({expression:{type:"union",value:L[U]}}):this.$=L[U];break;case 25:this.$=[L[U]];break;case 26:this.$=L[U-2].concat(L[U]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(L[U])}},T.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:L[U]}},T.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:L[U]}},T.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:L[U]}},T.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:L[U]}},T.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:L[U]}},T.ast.set(this.$);break;case 33:case 34:this.$=L[U];break}},table:[{3:1,4:[1,2],6:3,13:4,15:n,16:s,17:i,18:o,19:a},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:c,14:l,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:c,14:l,20:16,21:17,22:u},r(d,[2,12]),r(d,[2,14]),r(d,[2,15]),r(d,[2,16]),r(d,[2,17]),r(d,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:c,14:l,20:16,21:17,22:u},r(d,[2,5]),r(d,[2,7]),r(d,[2,8]),r(d,[2,9]),r(d,[2,10]),r(d,[2,19]),r(d,[2,20]),{13:23,15:n,16:s,17:i,18:o,19:a},{13:24,15:n,16:s,17:i,18:o,19:a,22:[1,25]},{15:h,17:f,18:p,23:26,25:27,26:28,27:32,29:34,30:y,31:_,32:b,33:v},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:c,14:l,20:16,21:17,22:u},r(d,[2,6]),r(d,[2,11]),r(d,[2,13]),{15:h,17:f,18:p,23:38,25:27,26:28,27:32,29:34,30:y,31:_,32:b,33:v},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},r(g,[2,25]),r(g,[2,27]),r(g,[2,28]),r(g,[2,29]),r(g,[2,33]),r(g,[2,34]),{24:[1,41]},r(d,[2,21]),{18:p,27:42,29:34,30:y,32:b,33:v},r(d,[2,22]),r(g,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(A,$){if($.recoverable)this.trace(A);else{var I=new Error(A);throw I.hash=$,I}},parse:function(A){var $=this,I=[0],T=[null],R=[],L=this.table,j="",U=0,te=0,z=2,ee=1,q=R.slice.call(arguments,1),O=Object.create(this.lexer),Y={yy:{}};for(var H in this.yy)Object.prototype.hasOwnProperty.call(this.yy,H)&&(Y.yy[H]=this.yy[H]);O.setInput(A,Y.yy),Y.yy.lexer=O,Y.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var C=O.yylloc;R.push(C);var B=O.options&&O.options.ranges;typeof Y.yy.parseError=="function"?this.parseError=Y.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Z=function(){var D;return D=O.lex()||ee,typeof D!="number"&&(D=$.symbols_[D]||D),D},Q,oe,fe,he,_e={},Ie,F,M,re;;){if(oe=I[I.length-1],this.defaultActions[oe]?fe=this.defaultActions[oe]:((Q===null||typeof Q>"u")&&(Q=Z()),fe=L[oe]&&L[oe][Q]),typeof fe>"u"||!fe.length||!fe[0]){var N="";re=[];for(Ie in L[oe])this.terminals_[Ie]&&Ie>z&&re.push("'"+this.terminals_[Ie]+"'");O.showPosition?N="Parse error on line "+(U+1)+`:
`+O.showPosition()+`
Expecting `+re.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":N="Parse error on line "+(U+1)+": Unexpected "+(Q==ee?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(N,{text:O.match,token:this.terminals_[Q]||Q,line:O.yylineno,loc:C,expected:re})}if(fe[0]instanceof Array&&fe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+oe+", token: "+Q);switch(fe[0]){case 1:I.push(Q),T.push(O.yytext),R.push(O.yylloc),I.push(fe[1]),Q=null,te=O.yyleng,j=O.yytext,U=O.yylineno,C=O.yylloc;break;case 2:if(F=this.productions_[fe[1]][1],_e.$=T[T.length-F],_e._$={first_line:R[R.length-(F||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(F||1)].first_column,last_column:R[R.length-1].last_column},B&&(_e._$.range=[R[R.length-(F||1)].range[0],R[R.length-1].range[1]]),he=this.performAction.apply(_e,[j,te,U,Y.yy,fe[1],T,R].concat(q)),typeof he<"u")return he;F&&(I=I.slice(0,-1*F*2),T=T.slice(0,-1*F),R=R.slice(0,-1*F)),I.push(this.productions_[fe[1]][0]),T.push(_e.$),R.push(_e._$),M=L[I[I.length-2]][I[I.length-1]],I.push(M);break;case 3:return!0}}return!0}},w={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(E){for(var A in E)this._node[A]=E[A];return this._node},node:function(E){return arguments.length&&(this._node=E),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var E=this._nodes;return this.initialize(),E}},x=function(){var E={EOF:1,parseError:function($,I){if(this.yy.parser)this.yy.parser.parseError($,I);else throw new Error($)},setInput:function(A,$){return this.yy=$||this.yy||{},this._input=A,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var A=this._input[0];this.yytext+=A,this.yyleng++,this.offset++,this.match+=A,this.matched+=A;var $=A.match(/(?:\r\n?|\n).*/g);return $?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),A},unput:function(A){var $=A.length,I=A.split(/(?:\r\n?|\n)/g);this._input=A+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$),this.offset-=$;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var R=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===T.length?this.yylloc.first_column:0)+T[T.length-I.length].length-I[0].length:this.yylloc.first_column-$},this.options.ranges&&(this.yylloc.range=[R[0],R[0]+this.yyleng-$]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(A){this.unput(this.match.slice(A))},pastInput:function(){var A=this.matched.substr(0,this.matched.length-this.match.length);return(A.length>20?"...":"")+A.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var A=this.match;return A.length<20&&(A+=this._input.substr(0,20-A.length)),(A.substr(0,20)+(A.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var A=this.pastInput(),$=new Array(A.length+1).join("-");return A+this.upcomingInput()+`
`+$+"^"},test_match:function(A,$){var I,T,R;if(this.options.backtrack_lexer&&(R={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(R.yylloc.range=this.yylloc.range.slice(0))),T=A[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+A[0].length},this.yytext+=A[0],this.match+=A[0],this.matches=A,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(A[0].length),this.matched+=A[0],I=this.performAction.call(this,this.yy,this,$,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var L in R)this[L]=R[L];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var A,$,I,T;this._more||(this.yytext="",this.match="");for(var R=this._currentRules(),L=0;L<R.length;L++)if(I=this._input.match(this.rules[R[L]]),I&&(!$||I[0].length>$[0].length)){if($=I,T=L,this.options.backtrack_lexer){if(A=this.test_match(I,R[L]),A!==!1)return A;if(this._backtrack){$=!1;continue}else return!1}else if(!this.options.flex)break}return $?(A=this.test_match($,R[T]),A!==!1?A:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var $=this.next();return $||this.lex()},begin:function($){this.conditionStack.push($)},popState:function(){var $=this.conditionStack.length-1;return $>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function($){return $=this.conditionStack.length-1-Math.abs($||0),$>=0?this.conditionStack[$]:"INITIAL"},pushState:function($){this.begin($)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function($,I,T,R){switch(T){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return I.yytext=I.yytext.substr(1,I.yyleng-2),32;case 11:return I.yytext=I.yytext.substr(1,I.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return E}();m.lexer=x;function S(){this.yy={}}return S.prototype=m,m.Parser=S,new S}();typeof ioe<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})})(uR);function Qg(){var e=new uR.Parser,t=e.parseError;return e.yy.parseError=function(){e.yy.ast&&e.yy.ast.initialize(),t.apply(e,arguments)},e}var wn=function(){function e(){}return e.ok=function(t,r){if(!t)throw new Error(r)},e.equal=function(t,r,n){if(t!==r)throw new Error(n)},e}(),Xt=function(){function e(){}return e.parse=function(t){return wn.ok(typeof t=="string","we need a path"),new Qg().parse(t)},e.parent=function(t,r){wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path");var n=this.nodes(t,r)[0];return n.path.pop(),this.value(t,n.path)},e.apply=function(t,r,n){wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path"),wn.equal(typeof n,"function","fn needs to be function");var s=this.nodes(t,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(t,this.stringify(i.path)),c=i.value=n.call(t,a[o]);a[o]=c},this),s},e.value=function(t,r,n){if(wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path"),n!==void 0){var s=this.nodes(t,r).shift();if(!s)return this._vivify(t,r,n);var i=s.path.slice(-1).shift(),o=this.parent(t,this.stringify(s.path));o[i]=n}return this.query(t,this.stringify(r),1).shift()},e._vivify=function(t,r,n){var s=this;wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path");var i=new Qg().parse(r).map(function(a){return a.expression.value}),o=function(a,c){var l=a.pop(),u=s.value(t,a);u||(o(a.concat(),typeof l=="string"?{}:[]),u=s.value(t,a)),u[l]=c};return o(i,n),this.query(t,r)[0]},e.query=function(t,r,n){wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(typeof r=="string","we need a path");var s=this.nodes(t,r,n).map(function(i){return i.value});return s},e.paths=function(t,r,n){wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path");var s=this.nodes(t,r,n).map(function(i){return i.path});return s},e.nodes=function(t,r,n){if(wn.ok(t instanceof Object,"obj needs to be an object"),wn.ok(r,"we need a path"),n===0)return[];var s=new Qg().parse(r),i=new toe,o=[{path:["$"],value:t}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(c,l){if(!(a.length>=n)){var u=i.resolve(c),d=[];o.forEach(function(h){if(!(a.length>=n)){var f=u(c,h,n);l==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},e.stringify=function(t){wn.ok(t,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return t=this._normalize(t),t.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},e._normalize=function(t){if(wn.ok(t,"we need a path"),typeof t=="string")return new Qg().parse(t);if(Array.isArray(t)&&typeof t[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return t.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+noe.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(t)&&typeof t[0]=="object")return t;throw new Error("couldn't understand path "+t)},e}();const Ap=class Ap{static extractInputField(t,r){let n=[];if(r){for(const s of r)if(n=Xt.nodes(t,s),n.length)break}return n}static changePropertyNameRecursively(t,r,n){const s=Ap.extractInputField(t,["$.."+r]);for(const i of s)this.copyResultPathToDestinationDefinition(i.path,t,n)}static copyResultPathToDestinationDefinition(t,r,n){let s=r;for(let i=1;i<t.length;i++)if(i+1<t.length&&(s=s[t[i]]),t.length==i+1){s[n]=s[t[i]],delete s[t[i]];break}}static changeSpecialPathsRecursively(t){const r=Ap.extractInputField(t,["$..path"]);for(const n of r)this.modifyPathsWithSpecialCharacter(n.path,t)}static modifyPathsWithSpecialCharacter(t,r){let n=r;for(let s=1;s<t.length;s++)if(s+1<t.length&&(n=n[t[s]]),t.length==s+1){const i=n[t[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[t[s]]=o;break}}static modifyPathWithSpecialCharacter(t){const r=this.matchAll(t,this.REGEX_PATH);return t=this.modifyPathRecursive(r,t),t}static modifyPathRecursive(t,r){let n=t.next(),s=!1;for(;n&&!n.done&&!s;){const i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(t,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;const o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(t,r));n=t.next()}return r}};ge(Ap,"matchAll",require("string.prototype.matchall")),ge(Ap,"REGEX_PATH",/@\w+/g);let Zs=Ap;class ns{static asArray(t){return Array.isArray(t)?t:[t]}static isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}static isUrlAbsolute(t){const r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;ns.isString(t)&&r.test(t)}static isString(t){return typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"}static getDistinctFieldInObject(t,r){const n=t.map(s=>s[r]);return Array.from(new Set(n))}}class ll{static optionalNonEmptyString(t){return t==null||t.length>0}static nonEmptyString(t){return t!=null&&t.length>0}static isValidDIDURI(t){const n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+"[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]"+")*)?";return new RegExp(n).test(t)}}class soe{constructor(t,r,n,s,i,o){ge(this,"input_descriptors");ge(this,"format");ge(this,"id");ge(this,"name");ge(this,"purpose");ge(this,"submission_requirements");this.id=t,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return Po.v1}}class ooe{constructor(t,r,n,s,i,o,a){ge(this,"format");ge(this,"frame");ge(this,"id");ge(this,"input_descriptors");ge(this,"name");ge(this,"purpose");ge(this,"submission_requirements");this.format=n,this.frame=s,this.id=t,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return Po.v2}}var Po;(function(e){e.v1="v1",e.v2="v2"})(Po||(Po={}));class yi{static modelEntityToInternalPresentationDefinitionV1(t){const r=yi.createCopyAndModifyPresentationDefinition(t);return new soe(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(t){const r=yi.createCopyAndModifyPresentationDefinition(t);return new ooe(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(t){const r=JSON.parse(JSON.stringify(t));return Zs.changePropertyNameRecursively(r,"_const","const"),Zs.changePropertyNameRecursively(r,"_enum","enum"),Zs.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(t){return th.CredentialMapper.toWrappedVerifiablePresentation(t)}static mapExternalVerifiableCredentialsToWrappedVcs(t){return th.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(t)?t:[t])}static toInternalPresentationDefinition(t){const r=JSON.parse(JSON.stringify(t)),n=A2(r);if(n.error)throw n.error;return n.version==Po.v1?yi.modelEntityToInternalPresentationDefinitionV1(r):yi.modelEntityInternalPresentationDefinitionV2(r)}}var Mx={exports:{}};Mx.exports=jx;Mx.exports.default=jx;const an={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Cr={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},PO=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),kO=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),OO=new RegExp("additionalProperties","u");function Wv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(const a in e)if(!(PO.test(a)||kO.test(a)||OO.test(a))){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Cr,data:e};i===null?i=[c]:i.push(c),o++}for(const a in e)if(PO.test(a)){let c=e[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.alg===void 0){const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:c};i===null?i=[l]:i.push(l),o++}for(const l in c)if(l!=="alg"){const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.alg!==void 0){let l=c.alg;if(Array.isArray(l)){if(l.length<1){const d={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:l};i===null?i=[d]:i.push(d),o++}const u=l.length;for(let d=0;d<u;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:Cr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:c};i===null?i=[l]:i.push(l),o++}}for(const a in e)if(kO.test(a)){let c=e[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}for(const l in c)if(l!=="proof_type"){const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.proof_type!==void 0){let l=c.proof_type;if(Array.isArray(l)){if(l.length<1){const d={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[d]:i.push(d),o++}const u=l.length;for(let d=0;d<u;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Cr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}}for(const a in e)if(OO.test(a)){const c={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Cr.patternProperties.additionalProperties,data:e[a]};i===null?i=[c]:i.push(c),o++}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Cr.type,parentSchema:Cr,data:e};i===null?i=[a]:i.push(a),o++}return Wv.errors=i,o===0}const Ye={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},dE={validate:dm};function dm(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))){const f={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ye.type,parentSchema:Ye,data:e};i===null?i=[f]:i.push(f),o++}const a=o;let c=!1,l=null;const u=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.rule===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ye.oneOf[0].required,parentSchema:Ye.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}if(e.from===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Ye.oneOf[0].required,parentSchema:Ye.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){const p={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ye.oneOf[0],data:e};i===null?i=[p]:i.push(p),o++}if(e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[0].properties.name.type,parentSchema:Ye.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[0].properties.purpose.type,parentSchema:Ye.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.rule!==void 0){let f=e.rule;if(typeof f!="string"){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[0].properties.rule.type,parentSchema:Ye.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Ye.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ye.oneOf[0].properties.rule.enum,parentSchema:Ye.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(e.count!==void 0){let f=e.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[0].properties.count.type,parentSchema:Ye.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ye.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(e.min!==void 0){let f=e.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[0].properties.min.type,parentSchema:Ye.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ye.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(e.max!==void 0){let f=e.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[0].properties.max.type,parentSchema:Ye.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ye.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(e.from!==void 0){let f=e.from;if(typeof f!="string"){const p={instancePath:t+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[0].properties.from.type,parentSchema:Ye.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=u===o;h&&(c=!0,l=0);const d=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.rule===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ye.oneOf[1].required,parentSchema:Ye.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.from_nested===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Ye.oneOf[1].required,parentSchema:Ye.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){const p={instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ye.oneOf[1],data:e};i===null?i=[p]:i.push(p),o++}if(e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[1].properties.name.type,parentSchema:Ye.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[1].properties.purpose.type,parentSchema:Ye.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.rule!==void 0){let f=e.rule;if(typeof f!="string"){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ye.oneOf[1].properties.rule.type,parentSchema:Ye.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Ye.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ye.oneOf[1].properties.rule.enum,parentSchema:Ye.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(e.count!==void 0){let f=e.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[1].properties.count.type,parentSchema:Ye.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ye.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(e.min!==void 0){let f=e.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[1].properties.min.type,parentSchema:Ye.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ye.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(e.max!==void 0){let f=e.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ye.oneOf[1].properties.max.type,parentSchema:Ye.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ye.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(e.from_nested!==void 0){let f=e.from_nested;if(Array.isArray(f)){if(f.length<1){const y={instancePath:t+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ye.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}const p=f.length;for(let y=0;y<p;y++)dE.validate(f[y],{instancePath:t+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?dE.validate.errors:i.concat(dE.validate.errors),o=i.length)}else{const p={instancePath:t+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ye.oneOf[1].properties.from_nested.type,parentSchema:Ye.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&c?(c=!1,l=[l,1]):h&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:Ye.oneOf,parentSchema:Ye,data:e};i===null?i=[f]:i.push(f),o++}return dm.errors=i,o===0}const De={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},yu={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function Jv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.uri===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:yu.required,parentSchema:yu,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!(a==="uri"||a==="required")){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:yu,data:e};i===null?i=[c]:i.push(c),o++}if(e.uri!==void 0){let a=e.uri;if(typeof a!="string"){const c={instancePath:t+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:yu.properties.uri.type,parentSchema:yu.properties.uri,data:a};i===null?i=[c]:i.push(c),o++}}if(e.required!==void 0){let a=e.required;if(typeof a!="boolean"){const c={instancePath:t+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:yu.properties.required.type,parentSchema:yu.properties.required,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:yu.type,parentSchema:yu,data:e};i===null?i=[a]:i.push(a),o++}return Jv.errors=i,o===0}const ev={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Gv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.manifest!==void 0){let a=e.manifest;if(typeof a!="string"){const c={instancePath:t+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ev.properties.manifest.type,parentSchema:ev.properties.manifest,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ev.type,parentSchema:ev,data:e};i===null?i=[a]:i.push(a),o++}return Gv.errors=i,o===0}const Kt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},kt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},aoe=Object.prototype.hasOwnProperty;function Td(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.type===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:kt.required,parentSchema:kt,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!aoe.call(kt.properties,a)){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:kt,data:e};i===null?i=[c]:i.push(c),o++}if(e.type!==void 0){let a=e.type;if(typeof a!="string"){const c={instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kt.properties.type.type,parentSchema:kt.properties.type,data:a};i===null?i=[c]:i.push(c),o++}}if(e.format!==void 0){let a=e.format;if(typeof a!="string"){const c={instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kt.properties.format.type,parentSchema:kt.properties.format,data:a};i===null?i=[c]:i.push(c),o++}}if(e.pattern!==void 0){let a=e.pattern;if(typeof a!="string"){const c={instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kt.properties.pattern.type,parentSchema:kt.properties.pattern,data:a};i===null?i=[c]:i.push(c),o++}}if(e.minimum!==void 0){let a=e.minimum;if(typeof a!="number"&&typeof a!="string"){const c={instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:kt.properties.minimum.type},message:"must be number,string",schema:kt.properties.minimum.type,parentSchema:kt.properties.minimum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.minLength!==void 0){let a=e.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){const c={instancePath:t+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:kt.properties.minLength.type,parentSchema:kt.properties.minLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maxLength!==void 0){let a=e.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){const c={instancePath:t+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:kt.properties.maxLength.type,parentSchema:kt.properties.maxLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.exclusiveMinimum!==void 0){let a=e.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){const c={instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:kt.properties.exclusiveMinimum.type},message:"must be number,string",schema:kt.properties.exclusiveMinimum.type,parentSchema:kt.properties.exclusiveMinimum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.exclusiveMaximum!==void 0){let a=e.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){const c={instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:kt.properties.exclusiveMaximum.type},message:"must be number,string",schema:kt.properties.exclusiveMaximum.type,parentSchema:kt.properties.exclusiveMaximum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maximum!==void 0){let a=e.maximum;if(typeof a!="number"&&typeof a!="string"){const c={instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:kt.properties.maximum.type},message:"must be number,string",schema:kt.properties.maximum.type,parentSchema:kt.properties.maximum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.const!==void 0){let a=e.const;if(typeof a!="number"&&typeof a!="string"){const c={instancePath:t+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:kt.properties.const.type},message:"must be number,string",schema:kt.properties.const.type,parentSchema:kt.properties.const,data:a};i===null?i=[c]:i.push(c),o++}}if(e.enum!==void 0){let a=e.enum;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++){let u=a[l];if(typeof u!="number"&&typeof u!="string"){const d={instancePath:t+"/enum/"+l,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:kt.properties.enum.items.type},message:"must be number,string",schema:kt.properties.enum.items.type,parentSchema:kt.properties.enum.items,data:u};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:kt.properties.enum.type,parentSchema:kt.properties.enum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.not!==void 0){let a=e.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){const c={instancePath:t+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:kt.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}else{const c={instancePath:t+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:kt.properties.not.type,parentSchema:kt.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:kt.type,parentSchema:kt,data:e};i===null?i=[a]:i.push(a),o++}return Td.errors=i,o===0}function Xv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))){const f={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Kt.type,parentSchema:Kt,data:e};i===null?i=[f]:i.push(f),o++}const a=o;let c=!1,l=null;const u=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.path===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Kt.oneOf[0].required,parentSchema:Kt.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){const p={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Kt.oneOf[0],data:e};i===null?i=[p]:i.push(p),o++}if(e.id!==void 0){let f=e.id;if(typeof f!="string"){const p={instancePath:t+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[0].properties.id.type,parentSchema:Kt.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(e.path!==void 0){let f=e.path;if(Array.isArray(f)){const p=f.length;for(let y=0;y<p;y++){let _=f[y];if(typeof _!="string"){const b={instancePath:t+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[0].properties.path.items.type,parentSchema:Kt.oneOf[0].properties.path.items,data:_};i===null?i=[b]:i.push(b),o++}}}else{const p={instancePath:t+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Kt.oneOf[0].properties.path.type,parentSchema:Kt.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[0].properties.purpose.type,parentSchema:Kt.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}e.filter!==void 0&&(Td(e.filter,{instancePath:t+"/filter",parentData:e,parentDataProperty:"filter",rootData:s})||(i=i===null?Td.errors:i.concat(Td.errors),o=i.length))}var h=u===o;h&&(c=!0,l=0);const d=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.path===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Kt.oneOf[1].required,parentSchema:Kt.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.filter===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:Kt.oneOf[1].required,parentSchema:Kt.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.predicate===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:Kt.oneOf[1].required,parentSchema:Kt.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){const p={instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Kt.oneOf[1],data:e};i===null?i=[p]:i.push(p),o++}if(e.id!==void 0){let f=e.id;if(typeof f!="string"){const p={instancePath:t+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[1].properties.id.type,parentSchema:Kt.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(e.path!==void 0){let f=e.path;if(Array.isArray(f)){const p=f.length;for(let y=0;y<p;y++){let _=f[y];if(typeof _!="string"){const b={instancePath:t+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[1].properties.path.items.type,parentSchema:Kt.oneOf[1].properties.path.items,data:_};i===null?i=[b]:i.push(b),o++}}}else{const p={instancePath:t+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Kt.oneOf[1].properties.path.type,parentSchema:Kt.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[1].properties.purpose.type,parentSchema:Kt.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.filter!==void 0&&(Td(e.filter,{instancePath:t+"/filter",parentData:e,parentDataProperty:"filter",rootData:s})||(i=i===null?Td.errors:i.concat(Td.errors),o=i.length)),e.predicate!==void 0){let f=e.predicate;if(typeof f!="string"){const p={instancePath:t+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Kt.oneOf[1].properties.predicate.type,parentSchema:Kt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){const p={instancePath:t+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:Kt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:Kt.oneOf[1].properties.predicate.enum,parentSchema:Kt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&c?(c=!1,l=[l,1]):h&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:Kt.oneOf,parentSchema:Kt,data:e};i===null?i=[f]:i.push(f),o++}return Xv.errors=i,o===0}function Zv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.id===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:De.required,parentSchema:De,data:e};i===null?i=[a]:i.push(a),o++}if(e.schema===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:De.required,parentSchema:De,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:De,data:e};i===null?i=[c]:i.push(c),o++}if(e.id!==void 0){let a=e.id;if(typeof a!="string"){const c={instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.id.type,parentSchema:De.properties.id,data:a};i===null?i=[c]:i.push(c),o++}}if(e.name!==void 0){let a=e.name;if(typeof a!="string"){const c={instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.name.type,parentSchema:De.properties.name,data:a};i===null?i=[c]:i.push(c),o++}}if(e.purpose!==void 0){let a=e.purpose;if(typeof a!="string"){const c={instancePath:t+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.purpose.type,parentSchema:De.properties.purpose,data:a};i===null?i=[c]:i.push(c),o++}}if(e.group!==void 0){let a=e.group;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++){let u=a[l];if(typeof u!="string"){const d={instancePath:t+"/group/"+l,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.group.items.type,parentSchema:De.properties.group.items,data:u};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:t+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.group.type,parentSchema:De.properties.group,data:a};i===null?i=[c]:i.push(c),o++}}if(e.schema!==void 0){let a=e.schema;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++)Jv(a[l],{instancePath:t+"/schema/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?Jv.errors:i.concat(Jv.errors),o=i.length)}else{const c={instancePath:t+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.schema.type,parentSchema:De.properties.schema,data:a};i===null?i=[c]:i.push(c),o++}}if(e.issuance!==void 0){let a=e.issuance;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++)Gv(a[l],{instancePath:t+"/issuance/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?Gv.errors:i.concat(Gv.errors),o=i.length)}else{const c={instancePath:t+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.issuance.type,parentSchema:De.properties.issuance,data:a};i===null?i=[c]:i.push(c),o++}}if(e.constraints!==void 0){let a=e.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(const c in a)if(!(c==="limit_disclosure"||c==="statuses"||c==="fields"||c==="subject_is_issuer"||c==="is_holder"||c==="same_subject")){const l={instancePath:t+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:De.properties.constraints,data:a};i===null?i=[l]:i.push(l),o++}if(a.limit_disclosure!==void 0){let c=a.limit_disclosure;if(typeof c!="string"){const l={instancePath:t+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.limit_disclosure.type,parentSchema:De.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[l]:i.push(l),o++}if(!(c==="required"||c==="preferred")){const l={instancePath:t+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.limit_disclosure.enum,parentSchema:De.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[l]:i.push(l),o++}}if(a.statuses!==void 0){let c=a.statuses;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.active!==void 0){let l=c.active;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:De.properties.constraints.properties.statuses.properties.active.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:De.properties.constraints.properties.statuses.properties.active.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.statuses.properties.active.type,parentSchema:De.properties.constraints.properties.statuses.properties.active,data:l};i===null?i=[u]:i.push(u),o++}}if(c.suspended!==void 0){let l=c.suspended;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:De.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:De.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:De.properties.constraints.properties.statuses.properties.suspended,data:l};i===null?i=[u]:i.push(u),o++}}if(c.revoked!==void 0){let l=c.revoked;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:De.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:De.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:De.properties.constraints.properties.statuses.properties.revoked,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.statuses.type,parentSchema:De.properties.constraints.properties.statuses,data:c};i===null?i=[l]:i.push(l),o++}}if(a.fields!==void 0){let c=a.fields;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)Xv(c[u],{instancePath:t+"/constraints/fields/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?Xv.errors:i.concat(Xv.errors),o=i.length)}else{const l={instancePath:t+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.constraints.properties.fields.type,parentSchema:De.properties.constraints.properties.fields,data:c};i===null?i=[l]:i.push(l),o++}}if(a.subject_is_issuer!==void 0){let c=a.subject_is_issuer;if(typeof c!="string"){const l={instancePath:t+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.subject_is_issuer.type,parentSchema:De.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[l]:i.push(l),o++}if(!(c==="required"||c==="preferred")){const l={instancePath:t+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.subject_is_issuer.enum,parentSchema:De.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[l]:i.push(l),o++}}if(a.is_holder!==void 0){let c=a.is_holder;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++){let d=c[u];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:De.properties.constraints.properties.is_holder.items.required,parentSchema:De.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:De.properties.constraints.properties.is_holder.items.required,parentSchema:De.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:De.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){const _={instancePath:t+"/constraints/is_holder/"+u+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:De.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[_]:i.push(_),o++}}}else{const f={instancePath:t+"/constraints/is_holder/"+u+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:De.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:t+"/constraints/is_holder/"+u+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:De.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:t+"/constraints/is_holder/"+u+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:De.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.is_holder.items.type,parentSchema:De.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:t+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.constraints.properties.is_holder.type,parentSchema:De.properties.constraints.properties.is_holder,data:c};i===null?i=[l]:i.push(l),o++}}if(a.same_subject!==void 0){let c=a.same_subject;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++){let d=c[u];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:De.properties.constraints.properties.same_subject.items.required,parentSchema:De.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:De.properties.constraints.properties.same_subject.items.required,parentSchema:De.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:De.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){const _={instancePath:t+"/constraints/same_subject/"+u+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:De.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[_]:i.push(_),o++}}}else{const f={instancePath:t+"/constraints/same_subject/"+u+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:De.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:t+"/constraints/same_subject/"+u+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:De.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:t+"/constraints/same_subject/"+u+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:De.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:De.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:De.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.properties.same_subject.items.type,parentSchema:De.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:t+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.properties.constraints.properties.same_subject.type,parentSchema:De.properties.constraints.properties.same_subject,data:c};i===null?i=[l]:i.push(l),o++}}}else{const c={instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.properties.constraints.type,parentSchema:De.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.type,parentSchema:De,data:e};i===null?i=[a]:i.push(a),o++}return Zv.errors=i,o===0}function jx(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.presentation_definition!==void 0){let a=e.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:an.properties.presentation_definition.required,parentSchema:an.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.input_descriptors===void 0){const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:an.properties.presentation_definition.required,parentSchema:an.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}for(const c in a)if(!(c==="id"||c==="name"||c==="purpose"||c==="format"||c==="submission_requirements"||c==="input_descriptors")){const l={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:an.properties.presentation_definition,data:a};i===null?i=[l]:i.push(l),o++}if(a.id!==void 0){let c=a.id;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:an.properties.presentation_definition.properties.id.type,parentSchema:an.properties.presentation_definition.properties.id,data:c};i===null?i=[l]:i.push(l),o++}}if(a.name!==void 0){let c=a.name;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:an.properties.presentation_definition.properties.name.type,parentSchema:an.properties.presentation_definition.properties.name,data:c};i===null?i=[l]:i.push(l),o++}}if(a.purpose!==void 0){let c=a.purpose;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:an.properties.presentation_definition.properties.purpose.type,parentSchema:an.properties.presentation_definition.properties.purpose,data:c};i===null?i=[l]:i.push(l),o++}}if(a.format!==void 0&&(Wv(a.format,{instancePath:t+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Wv.errors:i.concat(Wv.errors),o=i.length)),a.submission_requirements!==void 0){let c=a.submission_requirements;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)dm(c[u],{instancePath:t+"/presentation_definition/submission_requirements/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?dm.errors:i.concat(dm.errors),o=i.length)}else{const l={instancePath:t+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:an.properties.presentation_definition.properties.submission_requirements.type,parentSchema:an.properties.presentation_definition.properties.submission_requirements,data:c};i===null?i=[l]:i.push(l),o++}}if(a.input_descriptors!==void 0){let c=a.input_descriptors;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)Zv(c[u],{instancePath:t+"/presentation_definition/input_descriptors/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?Zv.errors:i.concat(Zv.errors),o=i.length)}else{const l={instancePath:t+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:an.properties.presentation_definition.properties.input_descriptors.type,parentSchema:an.properties.presentation_definition.properties.input_descriptors,data:c};i===null?i=[l]:i.push(l),o++}}}else{const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:an.properties.presentation_definition.type,parentSchema:an.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:an.type,parentSchema:an,data:e};i===null?i=[a]:i.push(a),o++}return jx.errors=i,o===0}var uoe=Mx.exports;const cR=La(uoe);var Ux={exports:{}},vh={};Object.defineProperty(vh,"__esModule",{value:!0});const lR=c1;lR.code='require("ajv/dist/runtime/equal").default';vh.default=lR;Ux.exports=Kx;Ux.exports.default=Kx;const Hr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Pr={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},TO=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),IO=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),BO=new RegExp("additionalProperties","u");function yf(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(const a in e)if(!(TO.test(a)||IO.test(a)||BO.test(a))){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Pr,data:e};i===null?i=[c]:i.push(c),o++}for(const a in e)if(TO.test(a)){let c=e[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.alg===void 0){const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:c};i===null?i=[l]:i.push(l),o++}for(const l in c)if(l!=="alg"){const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.alg!==void 0){let l=c.alg;if(Array.isArray(l)){if(l.length<1){const d={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:l};i===null?i=[d]:i.push(d),o++}const u=l.length;for(let d=0;d<u;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:Pr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:c};i===null?i=[l]:i.push(l),o++}}for(const a in e)if(IO.test(a)){let c=e[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}for(const l in c)if(l!=="proof_type"){const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.proof_type!==void 0){let l=c.proof_type;if(Array.isArray(l)){if(l.length<1){const d={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[d]:i.push(d),o++}const u=l.length;for(let d=0;d<u;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const u={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Pr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}}for(const a in e)if(BO.test(a)){const c={instancePath:t+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Pr.patternProperties.additionalProperties,data:e[a]};i===null?i=[c]:i.push(c),o++}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pr.type,parentSchema:Pr,data:e};i===null?i=[a]:i.push(a),o++}return yf.errors=i,o===0}const Qe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},fE={validate:fm};function fm(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))){const f={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qe.type,parentSchema:Qe,data:e};i===null?i=[f]:i.push(f),o++}const a=o;let c=!1,l=null;const u=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.rule===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Qe.oneOf[0].required,parentSchema:Qe.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}if(e.from===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Qe.oneOf[0].required,parentSchema:Qe.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){const p={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Qe.oneOf[0],data:e};i===null?i=[p]:i.push(p),o++}if(e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[0].properties.name.type,parentSchema:Qe.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[0].properties.purpose.type,parentSchema:Qe.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.rule!==void 0){let f=e.rule;if(typeof f!="string"){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[0].properties.rule.type,parentSchema:Qe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Qe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Qe.oneOf[0].properties.rule.enum,parentSchema:Qe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(e.count!==void 0){let f=e.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[0].properties.count.type,parentSchema:Qe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Qe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(e.min!==void 0){let f=e.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[0].properties.min.type,parentSchema:Qe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Qe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(e.max!==void 0){let f=e.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[0].properties.max.type,parentSchema:Qe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Qe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(e.from!==void 0){let f=e.from;if(typeof f!="string"){const p={instancePath:t+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[0].properties.from.type,parentSchema:Qe.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=u===o;h&&(c=!0,l=0);const d=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.rule===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Qe.oneOf[1].required,parentSchema:Qe.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.from_nested===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Qe.oneOf[1].required,parentSchema:Qe.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){const p={instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Qe.oneOf[1],data:e};i===null?i=[p]:i.push(p),o++}if(e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[1].properties.name.type,parentSchema:Qe.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[1].properties.purpose.type,parentSchema:Qe.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.rule!==void 0){let f=e.rule;if(typeof f!="string"){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qe.oneOf[1].properties.rule.type,parentSchema:Qe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:t+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Qe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Qe.oneOf[1].properties.rule.enum,parentSchema:Qe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(e.count!==void 0){let f=e.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[1].properties.count.type,parentSchema:Qe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:t+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Qe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(e.min!==void 0){let f=e.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[1].properties.min.type,parentSchema:Qe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Qe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(e.max!==void 0){let f=e.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Qe.oneOf[1].properties.max.type,parentSchema:Qe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:t+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Qe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(e.from_nested!==void 0){let f=e.from_nested;if(Array.isArray(f)){if(f.length<1){const y={instancePath:t+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Qe.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}const p=f.length;for(let y=0;y<p;y++)fE.validate(f[y],{instancePath:t+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?fE.validate.errors:i.concat(fE.validate.errors),o=i.length)}else{const p={instancePath:t+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Qe.oneOf[1].properties.from_nested.type,parentSchema:Qe.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&c?(c=!1,l=[l,1]):h&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:Qe.oneOf,parentSchema:Qe,data:e};i===null?i=[f]:i.push(f),o++}return fm.errors=i,o===0}const Pe={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},tv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Yv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.manifest!==void 0){let a=e.manifest;if(typeof a!="string"){const c={instancePath:t+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:tv.properties.manifest.type,parentSchema:tv.properties.manifest,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:tv.type,parentSchema:tv,data:e};i===null?i=[a]:i.push(a),o++}return Yv.errors=i,o===0}const Et={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},Le={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},pE={type:"integer",minimum:0};function rs(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(typeof e=="number"&&!(e%1)&&!isNaN(e))){const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:pE.type,parentSchema:pE,data:e};i===null?i=[a]:i.push(a),o++}if(typeof e=="number"&&(e<0||isNaN(e))){const a={instancePath:t,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:pE,data:e};i===null?i=[a]:i.push(a),o++}return rs.errors=i,o===0}function oa(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;return rs(e,{instancePath:t,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?rs.errors:i.concat(rs.errors),o=i.length),oa.errors=i,o===0}const hE={type:"array",minItems:1,items:{$ref:"#"}},yE={validate:yt};function Yi(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(Array.isArray(e)){if(e.length<1){const c={instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:hE,data:e};i===null?i=[c]:i.push(c),o++}const a=e.length;for(let c=0;c<a;c++)yE.validate(e[c],{instancePath:t+"/"+c,parentData:e,parentDataProperty:c,rootData:s})||(i=i===null?yE.validate.errors:i.concat(yE.validate.errors),o=i.length)}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:hE.type,parentSchema:hE,data:e};i===null?i=[a]:i.push(a),o++}return Yi.errors=i,o===0}const my={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function Id(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(Array.isArray(e)){const a=e.length;for(let u=0;u<a;u++){let d=e[u];if(typeof d!="string"){const h={instancePath:t+"/"+u,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:my.items.type,parentSchema:my.items,data:d};i===null?i=[h]:i.push(h),o++}}let c=e.length,l;if(c>1){const u={};for(;c--;){let d=e[c];if(typeof d=="string"){if(typeof u[d]=="number"){l=u[d];const h={instancePath:t,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:c,j:l},message:"must NOT have duplicate items (items ## "+l+" and "+c+" are identical)",schema:!0,parentSchema:my,data:e};i===null?i=[h]:i.push(h),o++;break}u[d]=c}}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:my.type,parentSchema:my,data:e};i===null?i=[a]:i.push(a),o++}return Id.errors=i,o===0}const mE={enum:["array","boolean","integer","null","number","object","string"]};function Bd(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e==="array"||e==="boolean"||e==="integer"||e==="null"||e==="number"||e==="object"||e==="string")){const a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:mE.enum},message:"must be equal to one of the allowed values",schema:mE.enum,parentSchema:mE,data:e};i===null?i=[a]:i.push(a),o++}return Bd.errors=i,o===0}const FO=vh.default;function yt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean"){const d={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:Le.type},message:"must be object,boolean",schema:Le.type,parentSchema:Le,data:e};i===null?i=[d]:i.push(d),o++}if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let d=e.$id;if(typeof d!="string"){const h={instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.$id.type,parentSchema:Le.properties.$id,data:d};i===null?i=[h]:i.push(h),o++}}if(e.$schema!==void 0){let d=e.$schema;if(typeof d!="string"){const h={instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.$schema.type,parentSchema:Le.properties.$schema,data:d};i===null?i=[h]:i.push(h),o++}}if(e.$ref!==void 0){let d=e.$ref;if(typeof d!="string"){const h={instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.$ref.type,parentSchema:Le.properties.$ref,data:d};i===null?i=[h]:i.push(h),o++}}if(e.$comment!==void 0){let d=e.$comment;if(typeof d!="string"){const h={instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.$comment.type,parentSchema:Le.properties.$comment,data:d};i===null?i=[h]:i.push(h),o++}}if(e.title!==void 0){let d=e.title;if(typeof d!="string"){const h={instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.title.type,parentSchema:Le.properties.title,data:d};i===null?i=[h]:i.push(h),o++}}if(e.description!==void 0){let d=e.description;if(typeof d!="string"){const h={instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.description.type,parentSchema:Le.properties.description,data:d};i===null?i=[h]:i.push(h),o++}}if(e.readOnly!==void 0){let d=e.readOnly;if(typeof d!="boolean"){const h={instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Le.properties.readOnly.type,parentSchema:Le.properties.readOnly,data:d};i===null?i=[h]:i.push(h),o++}}if(e.examples!==void 0){let d=e.examples;if(!Array.isArray(d)){const h={instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Le.properties.examples.type,parentSchema:Le.properties.examples,data:d};i===null?i=[h]:i.push(h),o++}}if(e.multipleOf!==void 0){let d=e.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){const h={instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:Le.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}else{const h={instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Le.properties.multipleOf.type,parentSchema:Le.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}if(e.maximum!==void 0){let d=e.maximum;if(typeof d!="number"){const h={instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Le.properties.maximum.type,parentSchema:Le.properties.maximum,data:d};i===null?i=[h]:i.push(h),o++}}if(e.exclusiveMaximum!==void 0){let d=e.exclusiveMaximum;if(typeof d!="number"){const h={instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Le.properties.exclusiveMaximum.type,parentSchema:Le.properties.exclusiveMaximum,data:d};i===null?i=[h]:i.push(h),o++}}if(e.minimum!==void 0){let d=e.minimum;if(typeof d!="number"){const h={instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Le.properties.minimum.type,parentSchema:Le.properties.minimum,data:d};i===null?i=[h]:i.push(h),o++}}if(e.exclusiveMinimum!==void 0){let d=e.exclusiveMinimum;if(typeof d!="number"){const h={instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Le.properties.exclusiveMinimum.type,parentSchema:Le.properties.exclusiveMinimum,data:d};i===null?i=[h]:i.push(h),o++}}if(e.maxLength!==void 0&&(rs(e.maxLength,{instancePath:t+"/maxLength",parentData:e,parentDataProperty:"maxLength",rootData:s})||(i=i===null?rs.errors:i.concat(rs.errors),o=i.length)),e.minLength!==void 0&&(oa(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:s})||(i=i===null?oa.errors:i.concat(oa.errors),o=i.length)),e.pattern!==void 0){let d=e.pattern;if(typeof d!="string"){const h={instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.pattern.type,parentSchema:Le.properties.pattern,data:d};i===null?i=[h]:i.push(h),o++}}if(e.additionalItems!==void 0&&(yt(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.items!==void 0){let d=e.items;const h=o;let f=!1;const p=o;yt(d,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length);var a=p===o;if(f=f||a,!f){const y=o;Yi(d,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?Yi.errors:i.concat(Yi.errors),o=i.length);var a=y===o;f=f||a}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{const y={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Le.properties.items.anyOf,parentSchema:Le.properties.items,data:d};i===null?i=[y]:i.push(y),o++}}if(e.maxItems!==void 0&&(rs(e.maxItems,{instancePath:t+"/maxItems",parentData:e,parentDataProperty:"maxItems",rootData:s})||(i=i===null?rs.errors:i.concat(rs.errors),o=i.length)),e.minItems!==void 0&&(oa(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:s})||(i=i===null?oa.errors:i.concat(oa.errors),o=i.length)),e.uniqueItems!==void 0){let d=e.uniqueItems;if(typeof d!="boolean"){const h={instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Le.properties.uniqueItems.type,parentSchema:Le.properties.uniqueItems,data:d};i===null?i=[h]:i.push(h),o++}}if(e.contains!==void 0&&(yt(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.maxProperties!==void 0&&(rs(e.maxProperties,{instancePath:t+"/maxProperties",parentData:e,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?rs.errors:i.concat(rs.errors),o=i.length)),e.minProperties!==void 0&&(oa(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:s})||(i=i===null?oa.errors:i.concat(oa.errors),o=i.length)),e.required!==void 0&&(Id(e.required,{instancePath:t+"/required",parentData:e,parentDataProperty:"required",rootData:s})||(i=i===null?Id.errors:i.concat(Id.errors),o=i.length)),e.additionalProperties!==void 0&&(yt(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.definitions!==void 0){let d=e.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d)yt(d[h],{instancePath:t+"/definitions/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length);else{const h={instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Le.properties.definitions.type,parentSchema:Le.properties.definitions,data:d};i===null?i=[h]:i.push(h),o++}}if(e.properties!==void 0){let d=e.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d)yt(d[h],{instancePath:t+"/properties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length);else{const h={instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Le.properties.properties.type,parentSchema:Le.properties.properties,data:d};i===null?i=[h]:i.push(h),o++}}if(e.patternProperties!==void 0){let d=e.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(const h in d){var c=o===o;if(!c){const p={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:h},message:"property name must be valid",schema:Le.properties.patternProperties.propertyNames,parentSchema:Le.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}for(const h in d)yt(d[h],{instancePath:t+"/patternProperties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)}else{const h={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Le.properties.patternProperties.type,parentSchema:Le.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}if(e.dependencies!==void 0){let d=e.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d){let f=d[h];const p=o;let y=!1;const _=o;yt(f,{instancePath:t+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length);var l=_===o;if(y=y||l,!y){const b=o;Id(f,{instancePath:t+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?Id.errors:i.concat(Id.errors),o=i.length);var l=b===o;y=y||l}if(y)o=p,i!==null&&(p?i.length=p:i=null);else{const b={instancePath:t+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Le.properties.dependencies.additionalProperties.anyOf,parentSchema:Le.properties.dependencies.additionalProperties,data:f};i===null?i=[b]:i.push(b),o++}}else{const h={instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Le.properties.dependencies.type,parentSchema:Le.properties.dependencies,data:d};i===null?i=[h]:i.push(h),o++}}if(e.propertyNames!==void 0&&(yt(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.enum!==void 0){let d=e.enum;if(Array.isArray(d)){if(d.length<1){const p={instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Le.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}let h=d.length,f;if(h>1){e:for(;h--;)for(f=h;f--;)if(FO(d[h],d[f])){const p={instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:h,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+h+" are identical)",schema:!0,parentSchema:Le.properties.enum,data:d};i===null?i=[p]:i.push(p),o++;break e}}}else{const h={instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Le.properties.enum.type,parentSchema:Le.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}}if(e.type!==void 0){let d=e.type;const h=o;let f=!1;const p=o;Bd(d,{instancePath:t+"/type",parentData:e,parentDataProperty:"type",rootData:s})||(i=i===null?Bd.errors:i.concat(Bd.errors),o=i.length);var u=p===o;if(f=f||u,!f){const y=o;if(Array.isArray(d)){if(d.length<1){const m={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Le.properties.type.anyOf[1],data:d};i===null?i=[m]:i.push(m),o++}const b=d.length;for(let m=0;m<b;m++)Bd(d[m],{instancePath:t+"/type/"+m,parentData:d,parentDataProperty:m,rootData:s})||(i=i===null?Bd.errors:i.concat(Bd.errors),o=i.length);let v=d.length,g;if(v>1){e:for(;v--;)for(g=v;g--;)if(FO(d[v],d[g])){const m={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:v,j:g},message:"must NOT have duplicate items (items ## "+g+" and "+v+" are identical)",schema:!0,parentSchema:Le.properties.type.anyOf[1],data:d};i===null?i=[m]:i.push(m),o++;break e}}}else{const b={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Le.properties.type.anyOf[1].type,parentSchema:Le.properties.type.anyOf[1],data:d};i===null?i=[b]:i.push(b),o++}var u=y===o;f=f||u}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{const y={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Le.properties.type.anyOf,parentSchema:Le.properties.type,data:d};i===null?i=[y]:i.push(y),o++}}if(e.format!==void 0){let d=e.format;if(typeof d!="string"){const h={instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.format.type,parentSchema:Le.properties.format,data:d};i===null?i=[h]:i.push(h),o++}}if(e.contentMediaType!==void 0){let d=e.contentMediaType;if(typeof d!="string"){const h={instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.contentMediaType.type,parentSchema:Le.properties.contentMediaType,data:d};i===null?i=[h]:i.push(h),o++}}if(e.contentEncoding!==void 0){let d=e.contentEncoding;if(typeof d!="string"){const h={instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Le.properties.contentEncoding.type,parentSchema:Le.properties.contentEncoding,data:d};i===null?i=[h]:i.push(h),o++}}e.if!==void 0&&(yt(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.then!==void 0&&(yt(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.else!==void 0&&(yt(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.allOf!==void 0&&(Yi(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:s})||(i=i===null?Yi.errors:i.concat(Yi.errors),o=i.length)),e.anyOf!==void 0&&(Yi(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Yi.errors:i.concat(Yi.errors),o=i.length)),e.oneOf!==void 0&&(Yi(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Yi.errors:i.concat(Yi.errors),o=i.length)),e.not!==void 0&&(yt(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length))}return yt.errors=i,o===0}function Qv(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))){const f={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Et.type,parentSchema:Et,data:e};i===null?i=[f]:i.push(f),o++}const a=o;let c=!1,l=null;const u=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.path===void 0){const f={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Et.oneOf[0].required,parentSchema:Et.oneOf[0],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){const p={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Et.oneOf[0],data:e};i===null?i=[p]:i.push(p),o++}if(e.id!==void 0){let f=e.id;if(typeof f!="string"){const p={instancePath:t+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[0].properties.id.type,parentSchema:Et.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(e.path!==void 0){let f=e.path;if(Array.isArray(f)){const p=f.length;for(let y=0;y<p;y++){let _=f[y];if(typeof _!="string"){const b={instancePath:t+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[0].properties.path.items.type,parentSchema:Et.oneOf[0].properties.path.items,data:_};i===null?i=[b]:i.push(b),o++}}}else{const p={instancePath:t+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Et.oneOf[0].properties.path.type,parentSchema:Et.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[0].properties.purpose.type,parentSchema:Et.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.intent_to_retain!==void 0){let f=e.intent_to_retain;if(typeof f!="boolean"){const p={instancePath:t+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Et.oneOf[0].properties.intent_to_retain.type,parentSchema:Et.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(e.filter!==void 0&&(yt(e.filter,{instancePath:t+"/filter",parentData:e,parentDataProperty:"filter",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[0].properties.name.type,parentSchema:Et.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=u===o;h&&(c=!0,l=0);const d=o;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.path===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Et.oneOf[1].required,parentSchema:Et.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.filter===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:Et.oneOf[1].required,parentSchema:Et.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}if(e.predicate===void 0){const f={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:Et.oneOf[1].required,parentSchema:Et.oneOf[1],data:e};i===null?i=[f]:i.push(f),o++}for(const f in e)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){const p={instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Et.oneOf[1],data:e};i===null?i=[p]:i.push(p),o++}if(e.id!==void 0){let f=e.id;if(typeof f!="string"){const p={instancePath:t+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[1].properties.id.type,parentSchema:Et.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(e.path!==void 0){let f=e.path;if(Array.isArray(f)){const p=f.length;for(let y=0;y<p;y++){let _=f[y];if(typeof _!="string"){const b={instancePath:t+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[1].properties.path.items.type,parentSchema:Et.oneOf[1].properties.path.items,data:_};i===null?i=[b]:i.push(b),o++}}}else{const p={instancePath:t+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Et.oneOf[1].properties.path.type,parentSchema:Et.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(e.purpose!==void 0){let f=e.purpose;if(typeof f!="string"){const p={instancePath:t+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[1].properties.purpose.type,parentSchema:Et.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(e.intent_to_retain!==void 0){let f=e.intent_to_retain;if(typeof f!="boolean"){const p={instancePath:t+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Et.oneOf[1].properties.intent_to_retain.type,parentSchema:Et.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(e.filter!==void 0&&(yt(e.filter,{instancePath:t+"/filter",parentData:e,parentDataProperty:"filter",rootData:s})||(i=i===null?yt.errors:i.concat(yt.errors),o=i.length)),e.predicate!==void 0){let f=e.predicate;if(typeof f!="string"){const p={instancePath:t+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[1].properties.predicate.type,parentSchema:Et.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){const p={instancePath:t+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:Et.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:Et.oneOf[1].properties.predicate.enum,parentSchema:Et.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}if(e.name!==void 0){let f=e.name;if(typeof f!="string"){const p={instancePath:t+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Et.oneOf[1].properties.name.type,parentSchema:Et.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&c?(c=!1,l=[l,1]):h&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:Et.oneOf,parentSchema:Et,data:e};i===null?i=[f]:i.push(f),o++}return Qv.errors=i,o===0}function ew(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.id===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Pe.required,parentSchema:Pe,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Pe,data:e};i===null?i=[c]:i.push(c),o++}if(e.id!==void 0){let a=e.id;if(typeof a!="string"){const c={instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.id.type,parentSchema:Pe.properties.id,data:a};i===null?i=[c]:i.push(c),o++}}if(e.name!==void 0){let a=e.name;if(typeof a!="string"){const c={instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.name.type,parentSchema:Pe.properties.name,data:a};i===null?i=[c]:i.push(c),o++}}if(e.purpose!==void 0){let a=e.purpose;if(typeof a!="string"){const c={instancePath:t+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.purpose.type,parentSchema:Pe.properties.purpose,data:a};i===null?i=[c]:i.push(c),o++}}if(e.issuance!==void 0){let a=e.issuance;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++)Yv(a[l],{instancePath:t+"/issuance/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?Yv.errors:i.concat(Yv.errors),o=i.length)}else{const c={instancePath:t+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.issuance.type,parentSchema:Pe.properties.issuance,data:a};i===null?i=[c]:i.push(c),o++}}if(e.group!==void 0){let a=e.group;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++){let u=a[l];if(typeof u!="string"){const d={instancePath:t+"/group/"+l,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.group.items.type,parentSchema:Pe.properties.group.items,data:u};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:t+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.group.type,parentSchema:Pe.properties.group,data:a};i===null?i=[c]:i.push(c),o++}}if(e.format!==void 0&&(yf(e.format,{instancePath:t+"/format",parentData:e,parentDataProperty:"format",rootData:s})||(i=i===null?yf.errors:i.concat(yf.errors),o=i.length)),e.constraints!==void 0){let a=e.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(const c in a)if(!(c==="limit_disclosure"||c==="statuses"||c==="fields"||c==="subject_is_issuer"||c==="is_holder"||c==="same_subject")){const l={instancePath:t+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.properties.constraints,data:a};i===null?i=[l]:i.push(l),o++}if(a.limit_disclosure!==void 0){let c=a.limit_disclosure;if(typeof c!="string"){const l={instancePath:t+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.limit_disclosure.type,parentSchema:Pe.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[l]:i.push(l),o++}if(!(c==="required"||c==="preferred")){const l={instancePath:t+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.limit_disclosure.enum,parentSchema:Pe.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[l]:i.push(l),o++}}if(a.statuses!==void 0){let c=a.statuses;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.active!==void 0){let l=c.active;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.active.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:Pe.properties.constraints.properties.statuses.properties.active.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.statuses.properties.active.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.active,data:l};i===null?i=[u]:i.push(u),o++}}if(c.suspended!==void 0){let l=c.suspended;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:Pe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.suspended,data:l};i===null?i=[u]:i.push(u),o++}}if(c.revoked!==void 0){let l=c.revoked;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let u=l.directive;if(typeof u!="string"){const d={instancePath:t+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}if(!(u==="required"||u==="allowed"||u==="disallowed")){const d={instancePath:t+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:Pe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:u};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:t+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:Pe.properties.constraints.properties.statuses.properties.revoked,data:l};i===null?i=[u]:i.push(u),o++}}}else{const l={instancePath:t+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.statuses.type,parentSchema:Pe.properties.constraints.properties.statuses,data:c};i===null?i=[l]:i.push(l),o++}}if(a.fields!==void 0){let c=a.fields;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)Qv(c[u],{instancePath:t+"/constraints/fields/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?Qv.errors:i.concat(Qv.errors),o=i.length)}else{const l={instancePath:t+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.constraints.properties.fields.type,parentSchema:Pe.properties.constraints.properties.fields,data:c};i===null?i=[l]:i.push(l),o++}}if(a.subject_is_issuer!==void 0){let c=a.subject_is_issuer;if(typeof c!="string"){const l={instancePath:t+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.subject_is_issuer.type,parentSchema:Pe.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[l]:i.push(l),o++}if(!(c==="required"||c==="preferred")){const l={instancePath:t+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.subject_is_issuer.enum,parentSchema:Pe.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[l]:i.push(l),o++}}if(a.is_holder!==void 0){let c=a.is_holder;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++){let d=c[u];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Pe.properties.constraints.properties.is_holder.items.required,parentSchema:Pe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Pe.properties.constraints.properties.is_holder.items.required,parentSchema:Pe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){const _={instancePath:t+"/constraints/is_holder/"+u+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:Pe.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[_]:i.push(_),o++}}}else{const f={instancePath:t+"/constraints/is_holder/"+u+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:Pe.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:t+"/constraints/is_holder/"+u+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:Pe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:t+"/constraints/is_holder/"+u+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:Pe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:t+"/constraints/is_holder/"+u,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.is_holder.items.type,parentSchema:Pe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:t+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.constraints.properties.is_holder.type,parentSchema:Pe.properties.constraints.properties.is_holder,data:c};i===null?i=[l]:i.push(l),o++}}if(a.same_subject!==void 0){let c=a.same_subject;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++){let d=c[u];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Pe.properties.constraints.properties.same_subject.items.required,parentSchema:Pe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Pe.properties.constraints.properties.same_subject.items.required,parentSchema:Pe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){const _={instancePath:t+"/constraints/same_subject/"+u+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:Pe.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[_]:i.push(_),o++}}}else{const f={instancePath:t+"/constraints/same_subject/"+u+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:Pe.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:t+"/constraints/same_subject/"+u+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:Pe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:t+"/constraints/same_subject/"+u+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Pe.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Pe.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:Pe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:t+"/constraints/same_subject/"+u,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.properties.same_subject.items.type,parentSchema:Pe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:t+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.properties.constraints.properties.same_subject.type,parentSchema:Pe.properties.constraints.properties.same_subject,data:c};i===null?i=[l]:i.push(l),o++}}}else{const c={instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.properties.constraints.type,parentSchema:Pe.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.type,parentSchema:Pe,data:e};i===null?i=[a]:i.push(a),o++}return ew.errors=i,o===0}function Kx(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.presentation_definition!==void 0){let a=e.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Hr.properties.presentation_definition.required,parentSchema:Hr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.input_descriptors===void 0){const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Hr.properties.presentation_definition.required,parentSchema:Hr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}for(const c in a)if(!(c==="id"||c==="name"||c==="purpose"||c==="format"||c==="frame"||c==="submission_requirements"||c==="input_descriptors")){const l={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Hr.properties.presentation_definition,data:a};i===null?i=[l]:i.push(l),o++}if(a.id!==void 0){let c=a.id;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Hr.properties.presentation_definition.properties.id.type,parentSchema:Hr.properties.presentation_definition.properties.id,data:c};i===null?i=[l]:i.push(l),o++}}if(a.name!==void 0){let c=a.name;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Hr.properties.presentation_definition.properties.name.type,parentSchema:Hr.properties.presentation_definition.properties.name,data:c};i===null?i=[l]:i.push(l),o++}}if(a.purpose!==void 0){let c=a.purpose;if(typeof c!="string"){const l={instancePath:t+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Hr.properties.presentation_definition.properties.purpose.type,parentSchema:Hr.properties.presentation_definition.properties.purpose,data:c};i===null?i=[l]:i.push(l),o++}}if(a.format!==void 0&&(yf(a.format,{instancePath:t+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?yf.errors:i.concat(yf.errors),o=i.length)),a.frame!==void 0){let c=a.frame;if(!(c&&typeof c=="object"&&!Array.isArray(c))){const l={instancePath:t+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Hr.properties.presentation_definition.properties.frame.type,parentSchema:Hr.properties.presentation_definition.properties.frame,data:c};i===null?i=[l]:i.push(l),o++}}if(a.submission_requirements!==void 0){let c=a.submission_requirements;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)fm(c[u],{instancePath:t+"/presentation_definition/submission_requirements/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?fm.errors:i.concat(fm.errors),o=i.length)}else{const l={instancePath:t+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Hr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Hr.properties.presentation_definition.properties.submission_requirements,data:c};i===null?i=[l]:i.push(l),o++}}if(a.input_descriptors!==void 0){let c=a.input_descriptors;if(Array.isArray(c)){const l=c.length;for(let u=0;u<l;u++)ew(c[u],{instancePath:t+"/presentation_definition/input_descriptors/"+u,parentData:c,parentDataProperty:u,rootData:s})||(i=i===null?ew.errors:i.concat(ew.errors),o=i.length)}else{const l={instancePath:t+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Hr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Hr.properties.presentation_definition.properties.input_descriptors,data:c};i===null?i=[l]:i.push(l),o++}}}else{const c={instancePath:t+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Hr.properties.presentation_definition.type,parentSchema:Hr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Hr.type,parentSchema:Hr,data:e};i===null?i=[a]:i.push(a),o++}return Kx.errors=i,o===0}var coe=Ux.exports;const dR=La(coe);function loe(e){return(Array.isArray(e.credentialSubject)?e.credentialSubject:[e.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}function doe(e){return ns.isString(e.issuer)?e.issuer:e.issuer.id}function A2(e){const t=JSON.parse(JSON.stringify(e));Zs.changePropertyNameRecursively(t,"_const","const"),Zs.changePropertyNameRecursively(t,"_enum","enum");const r={presentation_definition:t};let n=dR(r);return n?{version:Po.v2}:(n=cR(r),n?{version:Po.v1}:{error:"This is not a valid PresentationDefinition"})}function Yw(e,t){let r=(e==null?void 0:e.map(n=>n.toLowerCase()).map(n=>n.startsWith("did:")?n:`did:${n}`))??[];return r.includes("did")?[]:r}function foe(e,t){const r=Yw(t);return r.length===0||r.some(n=>e.toLowerCase().startsWith(n))}function poe(e,t){const r=Yw(t);return r.length===0?e:r.flatMap(n=>e.filter(s=>s.toLowerCase().startsWith(n)))}class za{constructor(t){ge(this,"_client");ge(this,"nextHandler");this._client=t}setNext(t){return this.nextHandler=t,t}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(t){this._client.wrappedVcs=t}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(t){this._client.presentationSubmission=t}getResults(){return this._client.results}updatePresentationSubmission(t){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===Ce.ERROR&&a.evaluator===this.getName()).find(a=>(i=Xt.query(t,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&(i==null?void 0:i.id)===r.id))&&delete s[n]})}removeDuplicate(t){return t.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}}var S2={exports:{}},fR={},ko={},rh={},N0={},Pt={},Ym={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((g,m)=>`${g}${m}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((g,m)=>(m instanceof r&&(g[m.str]=(g[m.str]||0)+1),g),{})}}e._Code=n,e.nil=new n("");function s(b,...v){const g=[b[0]];let m=0;for(;m<v.length;)a(g,v[m]),g.push(b[++m]);return new n(g)}e._=s;const i=new n("+");function o(b,...v){const g=[f(b[0])];let m=0;for(;m<v.length;)g.push(i),a(g,v[m]),g.push(i,f(b[++m]));return c(g),new n(g)}e.str=o;function a(b,v){v instanceof n?b.push(...v._items):v instanceof r?b.push(v):b.push(d(v))}e.addCodeArg=a;function c(b){let v=1;for(;v<b.length-1;){if(b[v]===i){const g=l(b[v-1],b[v+1]);if(g!==void 0){b.splice(v-1,3,g);continue}b[v++]="+"}v++}}function l(b,v){if(v==='""')return b;if(b==='""')return v;if(typeof b=="string")return v instanceof r||b[b.length-1]!=='"'?void 0:typeof v!="string"?`${b.slice(0,-1)}${v}"`:v[0]==='"'?b.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(b instanceof r))return`"${b}${v.slice(1)}`}function u(b,v){return v.emptyStr()?b:b.emptyStr()?v:o`${b}${v}`}e.strConcat=u;function d(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:f(Array.isArray(b)?b.join(","):b)}function h(b){return new n(f(b))}e.stringify=h;function f(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=f;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new n(`.${b}`):s`[${b}]`}e.getProperty=p;function y(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new n(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=y;function _(b){return new n(b.toString())}e.regexpCode=_})(Ym);var x2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ym;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:l,parent:u}={}){this._names={},this._prefixes=l,this._parent=u}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const u=this._names[l]||this._nameGroup(l);return`${l}${u.index++}`}_nameGroup(l){var u,d;if(!((d=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=s;class i extends t.Name{constructor(l,u){super(u),this.prefix=l}setValue(l,{property:u,itemIndex:d}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(u)}[${d}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class a extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new i(l,this._newName(l))}value(l,u){var d;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:f}=h,p=(d=u.key)!==null&&d!==void 0?d:u.ref;let y=this._values[f];if(y){const v=y.get(p);if(v)return v}else y=this._values[f]=new Map;y.set(p,h);const _=this._scope[f]||(this._scope[f]=[]),b=_.length;return _[b]=u.ref,h.setValue(u,{property:f,itemIndex:b}),h}getValue(l,u){const d=this._values[l];if(d)return d.get(u)}scopeRefs(l,u=this._values){return this._reduceValues(u,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${l}${d.scopePath}`})}scopeCode(l=this._values,u,d){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,d)}_reduceValues(l,u,d={},h){let f=t.nil;for(const p in l){const y=l[p];if(!y)continue;const _=d[p]=d[p]||new Map;y.forEach(b=>{if(_.has(b))return;_.set(b,n.Started);let v=u(b);if(v){const g=this.opts.es5?e.varKinds.var:e.varKinds.const;f=(0,t._)`${f}${g} ${b} = ${v};${this.opts._n}`}else if(v=h==null?void 0:h(b))f=(0,t._)`${f}${v}${this.opts._n}`;else throw new r(b);_.set(b,n.Completed)})}return f}}e.ValueScope=a})(x2);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ym,r=x2;var n=Ym;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=x2;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(C,B){return this}}class o extends i{constructor(C,B,Z){super(),this.varKind=C,this.name=B,this.rhs=Z}render({es5:C,_n:B}){const Z=C?r.varKinds.var:this.varKind,Q=this.rhs===void 0?"":` = ${this.rhs}`;return`${Z} ${this.name}${Q};`+B}optimizeNames(C,B){if(C[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,C,B)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(C,B,Z){super(),this.lhs=C,this.rhs=B,this.sideEffects=Z}render({_n:C}){return`${this.lhs} = ${this.rhs};`+C}optimizeNames(C,B){if(!(this.lhs instanceof t.Name&&!C[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,C,B),this}get names(){const C=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(C,this.rhs)}}class c extends a{constructor(C,B,Z,Q){super(C,Z,Q),this.op=B}render({_n:C}){return`${this.lhs} ${this.op}= ${this.rhs};`+C}}class l extends i{constructor(C){super(),this.label=C,this.names={}}render({_n:C}){return`${this.label}:`+C}}class u extends i{constructor(C){super(),this.label=C,this.names={}}render({_n:C}){return`break${this.label?` ${this.label}`:""};`+C}}class d extends i{constructor(C){super(),this.error=C}render({_n:C}){return`throw ${this.error};`+C}get names(){return this.error.names}}class h extends i{constructor(C){super(),this.code=C}render({_n:C}){return`${this.code};`+C}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(C,B){return this.code=L(this.code,C,B),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class f extends i{constructor(C=[]){super(),this.nodes=C}render(C){return this.nodes.reduce((B,Z)=>B+Z.render(C),"")}optimizeNodes(){const{nodes:C}=this;let B=C.length;for(;B--;){const Z=C[B].optimizeNodes();Array.isArray(Z)?C.splice(B,1,...Z):Z?C[B]=Z:C.splice(B,1)}return C.length>0?this:void 0}optimizeNames(C,B){const{nodes:Z}=this;let Q=Z.length;for(;Q--;){const oe=Z[Q];oe.optimizeNames(C,B)||(j(C,oe.names),Z.splice(Q,1))}return Z.length>0?this:void 0}get names(){return this.nodes.reduce((C,B)=>T(C,B.names),{})}}class p extends f{render(C){return"{"+C._n+super.render(C)+"}"+C._n}}class y extends f{}class _ extends p{}_.kind="else";class b extends p{constructor(C,B){super(B),this.condition=C}render(C){let B=`if(${this.condition})`+super.render(C);return this.else&&(B+="else "+this.else.render(C)),B}optimizeNodes(){super.optimizeNodes();const C=this.condition;if(C===!0)return this.nodes;let B=this.else;if(B){const Z=B.optimizeNodes();B=this.else=Array.isArray(Z)?new _(Z):Z}if(B)return C===!1?B instanceof b?B:B.nodes:this.nodes.length?this:new b(U(C),B instanceof b?[B]:B.nodes);if(!(C===!1||!this.nodes.length))return this}optimizeNames(C,B){var Z;if(this.else=(Z=this.else)===null||Z===void 0?void 0:Z.optimizeNames(C,B),!!(super.optimizeNames(C,B)||this.else))return this.condition=L(this.condition,C,B),this}get names(){const C=super.names;return R(C,this.condition),this.else&&T(C,this.else.names),C}}b.kind="if";class v extends p{}v.kind="for";class g extends v{constructor(C){super(),this.iteration=C}render(C){return`for(${this.iteration})`+super.render(C)}optimizeNames(C,B){if(super.optimizeNames(C,B))return this.iteration=L(this.iteration,C,B),this}get names(){return T(super.names,this.iteration.names)}}class m extends v{constructor(C,B,Z,Q){super(),this.varKind=C,this.name=B,this.from=Z,this.to=Q}render(C){const B=C.es5?r.varKinds.var:this.varKind,{name:Z,from:Q,to:oe}=this;return`for(${B} ${Z}=${Q}; ${Z}<${oe}; ${Z}++)`+super.render(C)}get names(){const C=R(super.names,this.from);return R(C,this.to)}}class w extends v{constructor(C,B,Z,Q){super(),this.loop=C,this.varKind=B,this.name=Z,this.iterable=Q}render(C){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(C)}optimizeNames(C,B){if(super.optimizeNames(C,B))return this.iterable=L(this.iterable,C,B),this}get names(){return T(super.names,this.iterable.names)}}class x extends p{constructor(C,B,Z){super(),this.name=C,this.args=B,this.async=Z}render(C){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(C)}}x.kind="func";class S extends f{render(C){return"return "+super.render(C)}}S.kind="return";class E extends p{render(C){let B="try"+super.render(C);return this.catch&&(B+=this.catch.render(C)),this.finally&&(B+=this.finally.render(C)),B}optimizeNodes(){var C,B;return super.optimizeNodes(),(C=this.catch)===null||C===void 0||C.optimizeNodes(),(B=this.finally)===null||B===void 0||B.optimizeNodes(),this}optimizeNames(C,B){var Z,Q;return super.optimizeNames(C,B),(Z=this.catch)===null||Z===void 0||Z.optimizeNames(C,B),(Q=this.finally)===null||Q===void 0||Q.optimizeNames(C,B),this}get names(){const C=super.names;return this.catch&&T(C,this.catch.names),this.finally&&T(C,this.finally.names),C}}class A extends p{constructor(C){super(),this.error=C}render(C){return`catch(${this.error})`+super.render(C)}}A.kind="catch";class $ extends p{render(C){return"finally"+super.render(C)}}$.kind="finally";class I{constructor(C,B={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...B,_n:B.lines?`
`:""},this._extScope=C,this._scope=new r.Scope({parent:C}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(C){return this._scope.name(C)}scopeName(C){return this._extScope.name(C)}scopeValue(C,B){const Z=this._extScope.value(C,B);return(this._values[Z.prefix]||(this._values[Z.prefix]=new Set)).add(Z),Z}getScopeValue(C,B){return this._extScope.getValue(C,B)}scopeRefs(C){return this._extScope.scopeRefs(C,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(C,B,Z,Q){const oe=this._scope.toName(B);return Z!==void 0&&Q&&(this._constants[oe.str]=Z),this._leafNode(new o(C,oe,Z)),oe}const(C,B,Z){return this._def(r.varKinds.const,C,B,Z)}let(C,B,Z){return this._def(r.varKinds.let,C,B,Z)}var(C,B,Z){return this._def(r.varKinds.var,C,B,Z)}assign(C,B,Z){return this._leafNode(new a(C,B,Z))}add(C,B){return this._leafNode(new c(C,e.operators.ADD,B))}code(C){return typeof C=="function"?C():C!==t.nil&&this._leafNode(new h(C)),this}object(...C){const B=["{"];for(const[Z,Q]of C)B.length>1&&B.push(","),B.push(Z),(Z!==Q||this.opts.es5)&&(B.push(":"),(0,t.addCodeArg)(B,Q));return B.push("}"),new t._Code(B)}if(C,B,Z){if(this._blockNode(new b(C)),B&&Z)this.code(B).else().code(Z).endIf();else if(B)this.code(B).endIf();else if(Z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(C){return this._elseNode(new b(C))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(b,_)}_for(C,B){return this._blockNode(C),B&&this.code(B).endFor(),this}for(C,B){return this._for(new g(C),B)}forRange(C,B,Z,Q,oe=this.opts.es5?r.varKinds.var:r.varKinds.let){const fe=this._scope.toName(C);return this._for(new m(oe,fe,B,Z),()=>Q(fe))}forOf(C,B,Z,Q=r.varKinds.const){const oe=this._scope.toName(C);if(this.opts.es5){const fe=B instanceof t.Name?B:this.var("_arr",B);return this.forRange("_i",0,(0,t._)`${fe}.length`,he=>{this.var(oe,(0,t._)`${fe}[${he}]`),Z(oe)})}return this._for(new w("of",Q,oe,B),()=>Z(oe))}forIn(C,B,Z,Q=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(C,(0,t._)`Object.keys(${B})`,Z);const oe=this._scope.toName(C);return this._for(new w("in",Q,oe,B),()=>Z(oe))}endFor(){return this._endBlockNode(v)}label(C){return this._leafNode(new l(C))}break(C){return this._leafNode(new u(C))}return(C){const B=new S;if(this._blockNode(B),this.code(C),B.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(C,B,Z){if(!B&&!Z)throw new Error('CodeGen: "try" without "catch" and "finally"');const Q=new E;if(this._blockNode(Q),this.code(C),B){const oe=this.name("e");this._currNode=Q.catch=new A(oe),B(oe)}return Z&&(this._currNode=Q.finally=new $,this.code(Z)),this._endBlockNode(A,$)}throw(C){return this._leafNode(new d(C))}block(C,B){return this._blockStarts.push(this._nodes.length),C&&this.code(C).endBlock(B),this}endBlock(C){const B=this._blockStarts.pop();if(B===void 0)throw new Error("CodeGen: not in self-balancing block");const Z=this._nodes.length-B;if(Z<0||C!==void 0&&Z!==C)throw new Error(`CodeGen: wrong number of nodes: ${Z} vs ${C} expected`);return this._nodes.length=B,this}func(C,B=t.nil,Z,Q){return this._blockNode(new x(C,B,Z)),Q&&this.code(Q).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(C=1){for(;C-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(C){return this._currNode.nodes.push(C),this}_blockNode(C){this._currNode.nodes.push(C),this._nodes.push(C)}_endBlockNode(C,B){const Z=this._currNode;if(Z instanceof C||B&&Z instanceof B)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${B?`${C.kind}/${B.kind}`:C.kind}"`)}_elseNode(C){const B=this._currNode;if(!(B instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=B.else=C,this}get _root(){return this._nodes[0]}get _currNode(){const C=this._nodes;return C[C.length-1]}set _currNode(C){const B=this._nodes;B[B.length-1]=C}}e.CodeGen=I;function T(H,C){for(const B in C)H[B]=(H[B]||0)+(C[B]||0);return H}function R(H,C){return C instanceof t._CodeOrName?T(H,C.names):H}function L(H,C,B){if(H instanceof t.Name)return Z(H);if(!Q(H))return H;return new t._Code(H._items.reduce((oe,fe)=>(fe instanceof t.Name&&(fe=Z(fe)),fe instanceof t._Code?oe.push(...fe._items):oe.push(fe),oe),[]));function Z(oe){const fe=B[oe.str];return fe===void 0||C[oe.str]!==1?oe:(delete C[oe.str],fe)}function Q(oe){return oe instanceof t._Code&&oe._items.some(fe=>fe instanceof t.Name&&C[fe.str]===1&&B[fe.str]!==void 0)}}function j(H,C){for(const B in C)H[B]=(H[B]||0)-(C[B]||0)}function U(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${Y(H)}`}e.not=U;const te=O(e.operators.AND);function z(...H){return H.reduce(te)}e.and=z;const ee=O(e.operators.OR);function q(...H){return H.reduce(ee)}e.or=q;function O(H){return(C,B)=>C===t.nil?B:B===t.nil?C:(0,t._)`${Y(C)} ${H} ${Y(B)}`}function Y(H){return H instanceof t.Name?H:(0,t._)`(${H})`}})(Pt);var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.checkStrictMode=Re.getErrorPath=Re.Type=Re.useFunc=Re.setEvaluated=Re.evaluatedPropsToName=Re.mergeEvaluated=Re.eachItem=Re.unescapeJsonPointer=Re.escapeJsonPointer=Re.escapeFragment=Re.unescapeFragment=Re.schemaRefOrVal=Re.schemaHasRulesButRef=Re.schemaHasRules=Re.checkUnknownRules=Re.alwaysValidSchema=Re.toHash=void 0;const mr=Pt,hoe=Ym;function yoe(e){const t={};for(const r of e)t[r]=!0;return t}Re.toHash=yoe;function moe(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(pR(e,t),!hR(t,e.self.RULES.all))}Re.alwaysValidSchema=moe;function pR(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const i in t)s[i]||gR(e,`unknown keyword: "${i}"`)}Re.checkUnknownRules=pR;function hR(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}Re.schemaHasRules=hR;function goe(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}Re.schemaHasRulesButRef=goe;function voe({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,mr._)`${r}`}return(0,mr._)`${e}${t}${(0,mr.getProperty)(n)}`}Re.schemaRefOrVal=voe;function woe(e){return yR(decodeURIComponent(e))}Re.unescapeFragment=woe;function boe(e){return encodeURIComponent(Lx(e))}Re.escapeFragment=boe;function Lx(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Re.escapeJsonPointer=Lx;function yR(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Re.unescapeJsonPointer=yR;function _oe(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}Re.eachItem=_oe;function NO({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{const c=o===void 0?i:o instanceof mr.Name?(i instanceof mr.Name?e(s,i,o):t(s,i,o),o):i instanceof mr.Name?(t(s,o,i),i):r(i,o);return a===mr.Name&&!(c instanceof mr.Name)?n(s,c):c}}Re.mergeEvaluated={props:NO({mergeNames:(e,t,r)=>e.if((0,mr._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,mr._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,mr._)`${r} || {}`).code((0,mr._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,mr._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,mr._)`${r} || {}`),qx(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:mR}),items:NO({mergeNames:(e,t,r)=>e.if((0,mr._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,mr._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,mr._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,mr._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function mR(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,mr._)`{}`);return t!==void 0&&qx(e,r,t),r}Re.evaluatedPropsToName=mR;function qx(e,t,r){Object.keys(r).forEach(n=>e.assign((0,mr._)`${t}${(0,mr.getProperty)(n)}`,!0))}Re.setEvaluated=qx;const RO={};function Eoe(e,t){return e.scopeValue("func",{ref:t,code:RO[t.code]||(RO[t.code]=new hoe._Code(t.code))})}Re.useFunc=Eoe;var $2;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})($2||(Re.Type=$2={}));function Aoe(e,t,r){if(e instanceof mr.Name){const n=t===$2.Num;return r?n?(0,mr._)`"[" + ${e} + "]"`:(0,mr._)`"['" + ${e} + "']"`:n?(0,mr._)`"/" + ${e}`:(0,mr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,mr.getProperty)(e).toString():"/"+Lx(e)}Re.getErrorPath=Aoe;function gR(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}Re.checkStrictMode=gR;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});const ri=Pt,Soe={data:new ri.Name("data"),valCxt:new ri.Name("valCxt"),instancePath:new ri.Name("instancePath"),parentData:new ri.Name("parentData"),parentDataProperty:new ri.Name("parentDataProperty"),rootData:new ri.Name("rootData"),dynamicAnchors:new ri.Name("dynamicAnchors"),vErrors:new ri.Name("vErrors"),errors:new ri.Name("errors"),this:new ri.Name("this"),self:new ri.Name("self"),scope:new ri.Name("scope"),json:new ri.Name("json"),jsonPos:new ri.Name("jsonPos"),jsonLen:new ri.Name("jsonLen"),jsonPart:new ri.Name("jsonPart")};Wa.default=Soe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pt,r=Re,n=Wa;e.keywordError={message:({keyword:_})=>(0,t.str)`must pass "${_}" keyword validation`},e.keyword$DataError={message:({keyword:_,schemaType:b})=>b?(0,t.str)`"${_}" keyword must be ${b} ($data)`:(0,t.str)`"${_}" keyword is invalid ($data)`};function s(_,b=e.keywordError,v,g){const{it:m}=_,{gen:w,compositeRule:x,allErrors:S}=m,E=d(_,b,v);g??(x||S)?c(w,E):l(m,(0,t._)`[${E}]`)}e.reportError=s;function i(_,b=e.keywordError,v){const{it:g}=_,{gen:m,compositeRule:w,allErrors:x}=g,S=d(_,b,v);c(m,S),w||x||l(g,n.default.vErrors)}e.reportExtraError=i;function o(_,b){_.assign(n.default.errors,b),_.if((0,t._)`${n.default.vErrors} !== null`,()=>_.if(b,()=>_.assign((0,t._)`${n.default.vErrors}.length`,b),()=>_.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:_,keyword:b,schemaValue:v,data:g,errsCount:m,it:w}){if(m===void 0)throw new Error("ajv implementation error");const x=_.name("err");_.forRange("i",m,n.default.errors,S=>{_.const(x,(0,t._)`${n.default.vErrors}[${S}]`),_.if((0,t._)`${x}.instancePath === undefined`,()=>_.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(n.default.instancePath,w.errorPath))),_.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${w.errSchemaPath}/${b}`),w.opts.verbose&&(_.assign((0,t._)`${x}.schema`,v),_.assign((0,t._)`${x}.data`,g))})}e.extendErrors=a;function c(_,b){const v=_.const("err",b);_.if((0,t._)`${n.default.vErrors} === null`,()=>_.assign(n.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${n.default.vErrors}.push(${v})`),_.code((0,t._)`${n.default.errors}++`)}function l(_,b){const{gen:v,validateName:g,schemaEnv:m}=_;m.$async?v.throw((0,t._)`new ${_.ValidationError}(${b})`):(v.assign((0,t._)`${g}.errors`,b),v.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(_,b,v){const{createErrors:g}=_.it;return g===!1?(0,t._)`{}`:h(_,b,v)}function h(_,b,v={}){const{gen:g,it:m}=_,w=[f(m,v),p(_,v)];return y(_,b,w),g.object(...w)}function f({errorPath:_},{instancePath:b}){const v=b?(0,t.str)`${_}${(0,r.getErrorPath)(b,r.Type.Str)}`:_;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,v)]}function p({keyword:_,it:{errSchemaPath:b}},{schemaPath:v,parentSchema:g}){let m=g?b:(0,t.str)`${b}/${_}`;return v&&(m=(0,t.str)`${m}${(0,r.getErrorPath)(v,r.Type.Str)}`),[u.schemaPath,m]}function y(_,{params:b,message:v},g){const{keyword:m,data:w,schemaValue:x,it:S}=_,{opts:E,propertyName:A,topSchemaRef:$,schemaPath:I}=S;g.push([u.keyword,m],[u.params,typeof b=="function"?b(_):b||(0,t._)`{}`]),E.messages&&g.push([u.message,typeof v=="function"?v(_):v]),E.verbose&&g.push([u.schema,x],[u.parentSchema,(0,t._)`${$}${I}`],[n.default.data,w]),A&&g.push([u.propertyName,A])}})(N0);Object.defineProperty(rh,"__esModule",{value:!0});rh.boolOrEmptySchema=rh.topBoolOrEmptySchema=void 0;const xoe=N0,$oe=Pt,Doe=Wa,Coe={message:"boolean schema is false"};function Poe(e){const{gen:t,schema:r,validateName:n}=e;r===!1?vR(e,!1):typeof r=="object"&&r.$async===!0?t.return(Doe.default.data):(t.assign((0,$oe._)`${n}.errors`,null),t.return(!0))}rh.topBoolOrEmptySchema=Poe;function koe(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),vR(e)):r.var(t,!0)}rh.boolOrEmptySchema=koe;function vR(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,xoe.reportError)(s,Coe,void 0,t)}var hn={},Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.getRules=Df.isJSONType=void 0;const Ooe=["string","number","integer","boolean","null","object","array"],Toe=new Set(Ooe);function Ioe(e){return typeof e=="string"&&Toe.has(e)}Df.isJSONType=Ioe;function Boe(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Df.getRules=Boe;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.shouldUseRule=qu.shouldUseGroup=qu.schemaHasRulesForType=void 0;function Foe({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&wR(e,n)}qu.schemaHasRulesForType=Foe;function wR(e,t){return t.rules.some(r=>bR(e,r))}qu.shouldUseGroup=wR;function bR(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}qu.shouldUseRule=bR;Object.defineProperty(hn,"__esModule",{value:!0});hn.reportTypeError=hn.checkDataTypes=hn.checkDataType=hn.coerceAndCheckDataType=hn.getJSONTypes=hn.getSchemaTypes=hn.DataType=void 0;const Noe=Df,Roe=qu,Moe=N0,St=Pt,_R=Re;var Np;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Np||(hn.DataType=Np={}));function joe(e){const t=ER(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}hn.getSchemaTypes=joe;function ER(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Noe.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}hn.getJSONTypes=ER;function Uoe(e,t){const{gen:r,data:n,opts:s}=e,i=Koe(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,Roe.schemaHasRulesForType)(e,t[0]));if(o){const a=Vx(t,n,s.strictNumbers,Np.Wrong);r.if(a,()=>{i.length?Loe(e,t,i):Hx(e)})}return o}hn.coerceAndCheckDataType=Uoe;const AR=new Set(["string","number","integer","boolean","null"]);function Koe(e,t){return t?e.filter(r=>AR.has(r)||t==="array"&&r==="array"):[]}function Loe(e,t,r){const{gen:n,data:s,opts:i}=e,o=n.let("dataType",(0,St._)`typeof ${s}`),a=n.let("coerced",(0,St._)`undefined`);i.coerceTypes==="array"&&n.if((0,St._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,St._)`${s}[0]`).assign(o,(0,St._)`typeof ${s}`).if(Vx(t,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,St._)`${a} !== undefined`);for(const l of r)(AR.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),Hx(e),n.endIf(),n.if((0,St._)`${a} !== undefined`,()=>{n.assign(s,a),qoe(e,a)});function c(l){switch(l){case"string":n.elseIf((0,St._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,St._)`"" + ${s}`).elseIf((0,St._)`${s} === null`).assign(a,(0,St._)`""`);return;case"number":n.elseIf((0,St._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,St._)`+${s}`);return;case"integer":n.elseIf((0,St._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,St._)`+${s}`);return;case"boolean":n.elseIf((0,St._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,St._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,St._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,St._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,St._)`[${s}]`)}}}function qoe({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,St._)`${t} !== undefined`,()=>e.assign((0,St._)`${t}[${r}]`,n))}function D2(e,t,r,n=Np.Correct){const s=n===Np.Correct?St.operators.EQ:St.operators.NEQ;let i;switch(e){case"null":return(0,St._)`${t} ${s} null`;case"array":i=(0,St._)`Array.isArray(${t})`;break;case"object":i=(0,St._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,St._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,St._)`typeof ${t} ${s} ${e}`}return n===Np.Correct?i:(0,St.not)(i);function o(a=St.nil){return(0,St.and)((0,St._)`typeof ${t} == "number"`,a,r?(0,St._)`isFinite(${t})`:St.nil)}}hn.checkDataType=D2;function Vx(e,t,r,n){if(e.length===1)return D2(e[0],t,r,n);let s;const i=(0,_R.toHash)(e);if(i.array&&i.object){const o=(0,St._)`typeof ${t} != "object"`;s=i.null?o:(0,St._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=St.nil;i.number&&delete i.integer;for(const o in i)s=(0,St.and)(s,D2(o,t,r,n));return s}hn.checkDataTypes=Vx;const Voe={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,St._)`{type: ${e}}`:(0,St._)`{type: ${t}}`};function Hx(e){const t=Hoe(e);(0,Moe.reportError)(t,Voe)}hn.reportTypeError=Hx;function Hoe(e){const{gen:t,data:r,schema:n}=e,s=(0,_R.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.assignDefaults=void 0;const ep=Pt,zoe=Re;function Woe(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)MO(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>MO(e,i,s.default))}p1.assignDefaults=Woe;function MO(e,t,r){const{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;const a=(0,ep._)`${i}${(0,ep.getProperty)(t)}`;if(s){(0,zoe.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,ep._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,ep._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,ep._)`${a} = ${(0,ep.stringify)(r)}`)}var Aa={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.validateUnion=It.validateArray=It.usePattern=It.callValidateCode=It.schemaProperties=It.allSchemaProperties=It.noPropertyInData=It.propertyInData=It.isOwnProperty=It.hasPropFunc=It.reportMissingProp=It.checkMissingProp=It.checkReportMissingProp=void 0;const Sr=Pt,zx=Re,Tc=Wa,Joe=Re;function Goe(e,t){const{gen:r,data:n,it:s}=e;r.if(Jx(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Sr._)`${t}`},!0),e.error()})}It.checkReportMissingProp=Goe;function Xoe({gen:e,data:t,it:{opts:r}},n,s){return(0,Sr.or)(...n.map(i=>(0,Sr.and)(Jx(e,t,i,r.ownProperties),(0,Sr._)`${s} = ${i}`)))}It.checkMissingProp=Xoe;function Zoe(e,t){e.setParams({missingProperty:t},!0),e.error()}It.reportMissingProp=Zoe;function SR(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Sr._)`Object.prototype.hasOwnProperty`})}It.hasPropFunc=SR;function Wx(e,t,r){return(0,Sr._)`${SR(e)}.call(${t}, ${r})`}It.isOwnProperty=Wx;function Yoe(e,t,r,n){const s=(0,Sr._)`${t}${(0,Sr.getProperty)(r)} !== undefined`;return n?(0,Sr._)`${s} && ${Wx(e,t,r)}`:s}It.propertyInData=Yoe;function Jx(e,t,r,n){const s=(0,Sr._)`${t}${(0,Sr.getProperty)(r)} === undefined`;return n?(0,Sr.or)(s,(0,Sr.not)(Wx(e,t,r))):s}It.noPropertyInData=Jx;function xR(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}It.allSchemaProperties=xR;function Qoe(e,t){return xR(t).filter(r=>!(0,zx.alwaysValidSchema)(e,t[r]))}It.schemaProperties=Qoe;function eae({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){const u=l?(0,Sr._)`${e}, ${t}, ${n}${s}`:t,d=[[Tc.default.instancePath,(0,Sr.strConcat)(Tc.default.instancePath,i)],[Tc.default.parentData,o.parentData],[Tc.default.parentDataProperty,o.parentDataProperty],[Tc.default.rootData,Tc.default.rootData]];o.opts.dynamicRef&&d.push([Tc.default.dynamicAnchors,Tc.default.dynamicAnchors]);const h=(0,Sr._)`${u}, ${r.object(...d)}`;return c!==Sr.nil?(0,Sr._)`${a}.call(${c}, ${h})`:(0,Sr._)`${a}(${h})`}It.callValidateCode=eae;const tae=(0,Sr._)`new RegExp`;function rae({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Sr._)`${s.code==="new RegExp"?tae:(0,Joe.useFunc)(e,s)}(${r}, ${n})`})}It.usePattern=rae;function nae(e){const{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){const c=t.const("len",(0,Sr._)`${r}.length`);t.forRange("i",0,c,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:zx.Type.Num},i),t.if((0,Sr.not)(i),a)})}}It.validateArray=nae;function iae(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,zx.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,l)=>{const u=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Sr._)`${o} || ${a}`),e.mergeValidEvaluated(u,a)||t.if((0,Sr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}It.validateUnion=iae;Object.defineProperty(Aa,"__esModule",{value:!0});Aa.validateKeywordUsage=Aa.validSchemaType=Aa.funcKeywordCode=Aa.macroKeywordCode=void 0;const mi=Pt,jd=Wa,sae=It,oae=N0;function aae(e,t){const{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),c=$R(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=r.name("valid");e.subschema({schema:a,schemaPath:mi.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Aa.macroKeywordCode=aae;function uae(e,t){var r;const{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=e;lae(c,t);const l=!a&&t.compile?t.compile.call(c.self,i,o,c):t.validate,u=$R(n,s,l),d=n.let("valid");e.block$data(d,h),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function h(){if(t.errors===!1)y(),t.modifying&&jO(e),_(()=>e.error());else{const b=t.async?f():p();t.modifying&&jO(e),_(()=>cae(e,b))}}function f(){const b=n.let("ruleErrs",null);return n.try(()=>y((0,mi._)`await `),v=>n.assign(d,!1).if((0,mi._)`${v} instanceof ${c.ValidationError}`,()=>n.assign(b,(0,mi._)`${v}.errors`),()=>n.throw(v))),b}function p(){const b=(0,mi._)`${u}.errors`;return n.assign(b,null),y(mi.nil),b}function y(b=t.async?(0,mi._)`await `:mi.nil){const v=c.opts.passContext?jd.default.this:jd.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(d,(0,mi._)`${b}${(0,sae.callValidateCode)(e,u,v,g)}`,t.modifying)}function _(b){var v;n.if((0,mi.not)((v=t.valid)!==null&&v!==void 0?v:d),b)}}Aa.funcKeywordCode=uae;function jO(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,mi._)`${n.parentData}[${n.parentDataProperty}]`))}function cae(e,t){const{gen:r}=e;r.if((0,mi._)`Array.isArray(${t})`,()=>{r.assign(jd.default.vErrors,(0,mi._)`${jd.default.vErrors} === null ? ${t} : ${jd.default.vErrors}.concat(${t})`).assign(jd.default.errors,(0,mi._)`${jd.default.vErrors}.length`),(0,oae.extendErrors)(e)},()=>e.error())}function lae({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function $R(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,mi.stringify)(r)})}function dae(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Aa.validSchemaType=dae;function fae({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Aa.validateKeywordUsage=fae;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.extendSubschemaMode=Al.extendSubschemaData=Al.getSubschema=void 0;const wa=Pt,DR=Re;function pae(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,wa._)`${e.schemaPath}${(0,wa.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,wa._)`${e.schemaPath}${(0,wa.getProperty)(t)}${(0,wa.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,DR.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Al.getSubschema=pae;function hae(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(r!==void 0){const{errorPath:l,dataPathArr:u,opts:d}=t,h=a.let("data",(0,wa._)`${t.data}${(0,wa.getProperty)(r)}`,!0);c(h),e.errorPath=(0,wa.str)`${l}${(0,DR.getErrorPath)(r,n,d.jsPropertySyntax)}`,e.parentDataProperty=(0,wa._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const l=s instanceof wa.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function c(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Al.extendSubschemaData=hae;function yae(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}Al.extendSubschemaMode=yae;var Gn={},CR={exports:{}},gl=CR.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};tw(t,n,s,e,"",e)};gl.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};gl.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};gl.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};gl.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function tw(e,t,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in gl.arrayKeywords)for(var h=0;h<d.length;h++)tw(e,t,r,d[h],s+"/"+u+"/"+h,i,s,u,n,h)}else if(u in gl.propsKeywords){if(d&&typeof d=="object")for(var f in d)tw(e,t,r,d[f],s+"/"+u+"/"+mae(f),i,s,u,n,f)}else(u in gl.keywords||e.allKeys&&!(u in gl.skipKeywords))&&tw(e,t,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function mae(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var PR=CR.exports;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getSchemaRefs=Gn.resolveUrl=Gn.normalizeId=Gn._getFullPath=Gn.getFullPath=Gn.inlineRef=void 0;const gae=Re,vae=c1,wae=PR,bae=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function _ae(e,t=!0){return typeof e=="boolean"?!0:t===!0?!C2(e):t?kR(e)<=t:!1}Gn.inlineRef=_ae;const Eae=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function C2(e){for(const t in e){if(Eae.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(C2)||typeof r=="object"&&C2(r))return!0}return!1}function kR(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!bae.has(r)&&(typeof e[r]=="object"&&(0,gae.eachItem)(e[r],n=>t+=kR(n)),t===1/0))return 1/0}return t}function OR(e,t="",r){r!==!1&&(t=Rp(t));const n=e.parse(t);return TR(e,n)}Gn.getFullPath=OR;function TR(e,t){return e.serialize(t).split("#")[0]+"#"}Gn._getFullPath=TR;const Aae=/#\/?$/;function Rp(e){return e?e.replace(Aae,""):""}Gn.normalizeId=Rp;function Sae(e,t,r){return r=Rp(r),e.resolve(t,r)}Gn.resolveUrl=Sae;const xae=/^[a-z_][-a-z0-9._]*$/i;function $ae(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Rp(e[r]||t),i={"":s},o=OR(n,s,!1),a={},c=new Set;return wae(e,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;const y=o+h;let _=i[p];typeof d[r]=="string"&&(_=b.call(this,d[r])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),i[h]=_;function b(g){const m=this.opts.uriResolver.resolve;if(g=Rp(_?m(_,g):g),c.has(g))throw u(g);c.add(g);let w=this.refs[g];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?l(d,w.schema,g):g!==Rp(y)&&(g[0]==="#"?(l(d,a[g],g),a[g]=d):this.refs[g]=y),g}function v(g){if(typeof g=="string"){if(!xae.test(g))throw new Error(`invalid anchor "${g}"`);b.call(this,`#${g}`)}}}),a;function l(d,h,f){if(h!==void 0&&!vae(d,h))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Gn.getSchemaRefs=$ae;Object.defineProperty(ko,"__esModule",{value:!0});ko.getData=ko.KeywordCxt=ko.validateFunctionCode=void 0;const IR=rh,UO=hn,Gx=qu,Qw=hn,Dae=p1,pm=Aa,gE=Al,ze=Pt,mt=Wa,Cae=Gn,Vu=Re,gy=N0;function Pae(e){if(NR(e)&&(RR(e),FR(e))){Tae(e);return}BR(e,()=>(0,IR.topBoolOrEmptySchema)(e))}ko.validateFunctionCode=Pae;function BR({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,ze._)`${mt.default.data}, ${mt.default.valCxt}`,n.$async,()=>{e.code((0,ze._)`"use strict"; ${KO(r,s)}`),Oae(e,s),e.code(i)}):e.func(t,(0,ze._)`${mt.default.data}, ${kae(s)}`,n.$async,()=>e.code(KO(r,s)).code(i))}function kae(e){return(0,ze._)`{${mt.default.instancePath}="", ${mt.default.parentData}, ${mt.default.parentDataProperty}, ${mt.default.rootData}=${mt.default.data}${e.dynamicRef?(0,ze._)`, ${mt.default.dynamicAnchors}={}`:ze.nil}}={}`}function Oae(e,t){e.if(mt.default.valCxt,()=>{e.var(mt.default.instancePath,(0,ze._)`${mt.default.valCxt}.${mt.default.instancePath}`),e.var(mt.default.parentData,(0,ze._)`${mt.default.valCxt}.${mt.default.parentData}`),e.var(mt.default.parentDataProperty,(0,ze._)`${mt.default.valCxt}.${mt.default.parentDataProperty}`),e.var(mt.default.rootData,(0,ze._)`${mt.default.valCxt}.${mt.default.rootData}`),t.dynamicRef&&e.var(mt.default.dynamicAnchors,(0,ze._)`${mt.default.valCxt}.${mt.default.dynamicAnchors}`)},()=>{e.var(mt.default.instancePath,(0,ze._)`""`),e.var(mt.default.parentData,(0,ze._)`undefined`),e.var(mt.default.parentDataProperty,(0,ze._)`undefined`),e.var(mt.default.rootData,mt.default.data),t.dynamicRef&&e.var(mt.default.dynamicAnchors,(0,ze._)`{}`)})}function Tae(e){const{schema:t,opts:r,gen:n}=e;BR(e,()=>{r.$comment&&t.$comment&&jR(e),Rae(e),n.let(mt.default.vErrors,null),n.let(mt.default.errors,0),r.unevaluated&&Iae(e),MR(e),Uae(e)})}function Iae(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,ze._)`${r}.evaluated`),t.if((0,ze._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,ze._)`${e.evaluated}.props`,(0,ze._)`undefined`)),t.if((0,ze._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,ze._)`${e.evaluated}.items`,(0,ze._)`undefined`))}function KO(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,ze._)`/*# sourceURL=${r} */`:ze.nil}function Bae(e,t){if(NR(e)&&(RR(e),FR(e))){Fae(e,t);return}(0,IR.boolOrEmptySchema)(e,t)}function FR({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function NR(e){return typeof e.schema!="boolean"}function Fae(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&jR(e),Mae(e),jae(e);const i=n.const("_errs",mt.default.errors);MR(e,i),n.var(t,(0,ze._)`${i} === ${mt.default.errors}`)}function RR(e){(0,Vu.checkUnknownRules)(e),Nae(e)}function MR(e,t){if(e.opts.jtd)return LO(e,[],!1,t);const r=(0,UO.getSchemaTypes)(e.schema),n=(0,UO.coerceAndCheckDataType)(e,r);LO(e,r,!n,t)}function Nae(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Vu.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Rae(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Vu.checkStrictMode)(e,"default is ignored in the schema root")}function Mae(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Cae.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function jae(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function jR({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)e.code((0,ze._)`${mt.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,ze.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,ze._)`${mt.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Uae(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,ze._)`${mt.default.errors} === 0`,()=>t.return(mt.default.data),()=>t.throw((0,ze._)`new ${s}(${mt.default.vErrors})`)):(t.assign((0,ze._)`${n}.errors`,mt.default.vErrors),i.unevaluated&&Kae(e),t.return((0,ze._)`${mt.default.errors} === 0`))}function Kae({gen:e,evaluated:t,props:r,items:n}){r instanceof ze.Name&&e.assign((0,ze._)`${t}.props`,r),n instanceof ze.Name&&e.assign((0,ze._)`${t}.items`,n)}function LO(e,t,r,n){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=e,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,Vu.schemaHasRulesButRef)(i,u))){s.block(()=>LR(e,"$ref",u.all.$ref.definition));return}c.jtd||Lae(e,t),s.block(()=>{for(const h of u.rules)d(h);d(u.post)});function d(h){(0,Gx.shouldUseGroup)(i,h)&&(h.type?(s.if((0,Qw.checkDataType)(h.type,o,c.strictNumbers)),qO(e,h),t.length===1&&t[0]===h.type&&r&&(s.else(),(0,Qw.reportTypeError)(e)),s.endIf()):qO(e,h),a||s.if((0,ze._)`${mt.default.errors} === ${n||0}`))}}function qO(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Dae.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,Gx.shouldUseRule)(n,i)&&LR(e,i.keyword,i.definition,t.type)})}function Lae(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(qae(e,t),e.opts.allowUnionTypes||Vae(e,t),Hae(e,e.dataTypes))}function qae(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{UR(e.dataTypes,r)||Xx(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Wae(e,t)}}function Vae(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Xx(e,"use allowUnionTypes to allow union type keyword")}function Hae(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,Gx.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>zae(t,o))&&Xx(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function zae(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function UR(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Wae(e,t){const r=[];for(const n of e.dataTypes)UR(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Xx(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Vu.checkStrictMode)(e,t,e.opts.strictTypes)}let KR=class{constructor(t,r,n){if((0,pm.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Vu.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",qR(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,pm.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",mt.default.errors))}result(t,r,n){this.failResult((0,ze.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,ze.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,ze._)`${r} !== undefined && (${(0,ze.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?gy.reportExtraError:gy.reportError)(this,this.def.error,r)}$dataError(){(0,gy.reportError)(this,this.def.$dataError||gy.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,gy.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=ze.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=ze.nil,r=ze.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,ze.or)((0,ze._)`${s} === undefined`,r)),t!==ze.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==ze.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,ze.or)(o(),a());function o(){if(n.length){if(!(r instanceof ze.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,ze._)`${(0,Qw.checkDataTypes)(c,r,i.opts.strictNumbers,Qw.DataType.Wrong)}`}return ze.nil}function a(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,ze._)`!${c}(${r})`}return ze.nil}}subschema(t,r){const n=(0,gE.getSubschema)(this.it,t);(0,gE.extendSubschemaData)(n,this.it,t),(0,gE.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Bae(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Vu.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Vu.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,ze.Name)),!0}};ko.KeywordCxt=KR;function LR(e,t,r,n){const s=new KR(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,pm.funcKeywordCode)(s,r):"macro"in r?(0,pm.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,pm.funcKeywordCode)(s,r)}const Jae=/^\/(?:[^~]|~0|~1)*$/,Gae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function qR(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return mt.default.rootData;if(e[0]==="/"){if(!Jae.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=mt.default.rootData}else{const l=Gae.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+l[1];if(s=l[2],s==="#"){if(u>=t)throw new Error(c("property/index",u));return n[t-u]}if(u>t)throw new Error(c("data",u));if(i=r[t-u],!s)return i}let o=i;const a=s.split("/");for(const l of a)l&&(i=(0,ze._)`${i}${(0,ze.getProperty)((0,Vu.unescapeJsonPointer)(l))}`,o=(0,ze._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${t}`}}ko.getData=qR;var R0={};Object.defineProperty(R0,"__esModule",{value:!0});let Xae=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};R0.default=Xae;var wh={};Object.defineProperty(wh,"__esModule",{value:!0});const vE=Gn;let Zae=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,vE.resolveUrl)(t,r,n),this.missingSchema=(0,vE.normalizeId)((0,vE.getFullPath)(t,this.missingRef))}};wh.default=Zae;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.resolveSchema=Li.getCompilingSchema=Li.resolveRef=Li.compileSchema=Li.SchemaEnv=void 0;const co=Pt,Yae=R0,bd=Wa,Ao=Gn,VO=Re,Qae=ko;let h1=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ao.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Li.SchemaEnv=h1;function Zx(e){const t=VR.call(this,e);if(t)return t;const r=(0,Ao.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new co.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let a;e.$async&&(a=o.scopeValue("Error",{ref:Yae.default,code:(0,co._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");e.validateName=c;const l={gen:o,allErrors:this.opts.allErrors,data:bd.default.data,parentData:bd.default.parentData,parentDataProperty:bd.default.parentDataProperty,dataNames:[bd.default.data],dataPathArr:[co.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,co.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:co.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,co._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,Qae.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const d=o.toString();u=`${o.scopeRefs(bd.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const f=new Function(`${bd.default.self}`,`${bd.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=e.schema,f.schemaEnv=e,e.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:y}=l;f.evaluated={props:p instanceof co.Name?void 0:p,items:y instanceof co.Name?void 0:y,dynamicProps:p instanceof co.Name,dynamicItems:y instanceof co.Name},f.source&&(f.source.evaluated=(0,co.stringify)(f.evaluated))}return e.validate=f,e}catch(d){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(e)}}Li.compileSchema=Zx;function eue(e,t,r){var n;r=(0,Ao.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=nue.call(this,e,r);if(i===void 0){const o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new h1({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=tue.call(this,i)}Li.resolveRef=eue;function tue(e){return(0,Ao.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Zx.call(this,e)}function VR(e){for(const t of this._compilations)if(rue(t,e))return t}Li.getCompilingSchema=VR;function rue(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function nue(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||y1.call(this,e,t)}function y1(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Ao._getFullPath)(this.opts.uriResolver,r);let s=(0,Ao.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return wE.call(this,r,e);const i=(0,Ao.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=y1.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:wE.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Zx.call(this,o),i===(0,Ao.normalizeId)(t)){const{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,Ao.resolveUrl)(this.opts.uriResolver,s,l)),new h1({schema:a,schemaId:c,root:e,baseId:s})}return wE.call(this,r,o)}}Li.resolveSchema=y1;const iue=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function wE(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,VO.unescapeFragment)(a)];if(c===void 0)return;r=c;const l=typeof r=="object"&&r[this.opts.schemaId];!iue.has(a)&&l&&(t=(0,Ao.resolveUrl)(this.opts.uriResolver,t,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,VO.schemaHasRulesButRef)(r,this.RULES)){const a=(0,Ao.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=y1.call(this,n,a)}const{schemaId:o}=this.opts;if(i=i||new h1({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}const sue="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",oue="Meta-schema for $data reference (JSON AnySchema extension proposal)",aue="object",uue=["$data"],cue={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},lue=!1,due={$id:sue,description:oue,type:aue,required:uue,properties:cue,additionalProperties:lue};var Yx={},m1={exports:{}};const fue={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var pue={HEX:fue};const{HEX:hue}=pue;function HR(e){if(WR(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:mue(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function P2(e,t=!1){let r="",n=!0;for(const s of e){if(hue[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function yue(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,o=!1,a=!1;function c(){if(s.length){if(i===!1){const l=P2(s);if(l!==void 0)n.push(l);else return r.error=!0,!1}s.length=0}return!0}for(let l=0;l<e.length;l++){const u=e[l];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(a=!0),!c())break;if(t++,n.push(":"),t>7){r.error=!0;break}l-1>=0&&e[l-1]===":"&&(o=!0);continue}else if(u==="%"){if(!c())break;i=!0}else{s.push(u);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(P2(s))),r.address=n.join(""),r}function zR(e,t={}){if(WR(e,":")<2)return{host:e,isIPV6:!1};const r=yue(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function mue(e,t){let r="",n=!0;const s=e.length;for(let i=0;i<s;i++){const o=e[i];o==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function WR(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const HO=/^\.\.?\//u,zO=/^\/\.(?:\/|$)/u,WO=/^\/\.\.(?:\/|$)/u,gue=/^\/?(?:.|\n)*?(?=\/|$)/u;function vue(e){const t=[];for(;e.length;)if(e.match(HO))e=e.replace(HO,"");else if(e.match(zO))e=e.replace(zO,"/");else if(e.match(WO))e=e.replace(WO,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(gue);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function wue(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function bue(e,t){const r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host);const s=HR(n);if(s.isIPV4)n=s.host;else{const i=zR(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var _ue={recomposeAuthority:bue,normalizeComponentEncoding:wue,removeDotSegments:vue,normalizeIPv4:HR,normalizeIPv6:zR,stringArrayToHexStripped:P2};const Eue=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Aue=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function JR(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function GR(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function XR(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Sue(e){return e.secure=JR(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function xue(e){if((e.port===(JR(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function $ue(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(Aue);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,i=Qx[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Due(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=Qx[s];i&&(e=i.serialize(e,t));const o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function Cue(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Eue.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Pue(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const ZR={scheme:"http",domainHost:!0,parse:GR,serialize:XR},kue={scheme:"https",domainHost:ZR.domainHost,parse:GR,serialize:XR},rw={scheme:"ws",domainHost:!0,parse:Sue,serialize:xue},Oue={scheme:"wss",domainHost:rw.domainHost,parse:rw.parse,serialize:rw.serialize},Tue={scheme:"urn",parse:$ue,serialize:Due,skipNormalize:!0},Iue={scheme:"urn:uuid",parse:Cue,serialize:Pue,skipNormalize:!0},Qx={http:ZR,https:kue,ws:rw,wss:Oue,urn:Tue,"urn:uuid":Iue};var Bue=Qx;const{normalizeIPv6:Fue,normalizeIPv4:Nue,removeDotSegments:Wy,recomposeAuthority:Rue,normalizeComponentEncoding:rv}=_ue,e$=Bue;function Mue(e,t){return typeof e=="string"?e=Sa(Qu(e,t),t):typeof e=="object"&&(e=Qu(Sa(e,t),t)),e}function jue(e,t,r){const n=Object.assign({scheme:"null"},r),s=YR(Qu(e,n),Qu(t,n),n,!0);return Sa(s,{...n,skipEscape:!0})}function YR(e,t,r,n){const s={};return n||(e=Qu(Sa(e,r),r),t=Qu(Sa(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Wy(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Wy(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=Wy(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=Wy(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Uue(e,t,r){return typeof e=="string"?(e=unescape(e),e=Sa(rv(Qu(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Sa(rv(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Sa(rv(Qu(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Sa(rv(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Sa(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=e$[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));const o=Rue(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Wy(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}const Kue=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function Lue(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||Kue[t])return!0;return!1}const que=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Qu(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const o=e.match(que);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){const c=Nue(n.host);if(c.isIPV4===!1){const l=Fue(c.host,{isIPV4:!1});n.host=l.host.toLowerCase(),i=l.isIPV6}else n.host=c.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const a=e$[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&Lue(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const t$={SCHEMES:e$,normalize:Mue,resolve:jue,resolveComponents:YR,equal:Uue,serialize:Sa,parse:Qu};m1.exports=t$;m1.exports.default=t$;m1.exports.fastUri=t$;var Vue=m1.exports;Object.defineProperty(Yx,"__esModule",{value:!0});const QR=Vue;QR.code='require("ajv/dist/runtime/uri").default';Yx.default=QR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ko;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=Pt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=R0,s=wh,i=Df,o=Li,a=Pt,c=Gn,l=hn,u=Re,d=due,h=Yx,f=(q,O)=>new RegExp(q,O);f.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function g(q){var O,Y,H,C,B,Z,Q,oe,fe,he,_e,Ie,F,M,re,N,D,k,X,se,le,ue,Ae,ye,V;const W=q.strict,pe=(O=q.code)===null||O===void 0?void 0:O.optimize,ve=pe===!0||pe===void 0?1:pe||0,xe=(H=(Y=q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&H!==void 0?H:f,ht=(C=q.uriResolver)!==null&&C!==void 0?C:h.default;return{strictSchema:(Z=(B=q.strictSchema)!==null&&B!==void 0?B:W)!==null&&Z!==void 0?Z:!0,strictNumbers:(oe=(Q=q.strictNumbers)!==null&&Q!==void 0?Q:W)!==null&&oe!==void 0?oe:!0,strictTypes:(he=(fe=q.strictTypes)!==null&&fe!==void 0?fe:W)!==null&&he!==void 0?he:"log",strictTuples:(Ie=(_e=q.strictTuples)!==null&&_e!==void 0?_e:W)!==null&&Ie!==void 0?Ie:"log",strictRequired:(M=(F=q.strictRequired)!==null&&F!==void 0?F:W)!==null&&M!==void 0?M:!1,code:q.code?{...q.code,optimize:ve,regExp:xe}:{optimize:ve,regExp:xe},loopRequired:(re=q.loopRequired)!==null&&re!==void 0?re:v,loopEnum:(N=q.loopEnum)!==null&&N!==void 0?N:v,meta:(D=q.meta)!==null&&D!==void 0?D:!0,messages:(k=q.messages)!==null&&k!==void 0?k:!0,inlineRefs:(X=q.inlineRefs)!==null&&X!==void 0?X:!0,schemaId:(se=q.schemaId)!==null&&se!==void 0?se:"$id",addUsedSchema:(le=q.addUsedSchema)!==null&&le!==void 0?le:!0,validateSchema:(ue=q.validateSchema)!==null&&ue!==void 0?ue:!0,validateFormats:(Ae=q.validateFormats)!==null&&Ae!==void 0?Ae:!0,unicodeRegExp:(ye=q.unicodeRegExp)!==null&&ye!==void 0?ye:!0,int32range:(V=q.int32range)!==null&&V!==void 0?V:!0,uriResolver:ht}}class m{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...g(O)};const{es5:Y,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:Y,lines:H}),this.logger=T(O.logger);const C=O.validateFormats;O.validateFormats=!1,this.RULES=(0,i.getRules)(),w.call(this,_,O,"NOT SUPPORTED"),w.call(this,b,O,"DEPRECATED","warn"),this._metaOpts=$.call(this),O.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&A.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),S.call(this),O.validateFormats=C}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:Y,schemaId:H}=this.opts;let C=d;H==="id"&&(C={...d},C.id=C.$id,delete C.$id),Y&&O&&this.addMetaSchema(C,C[H],!1)}defaultMeta(){const{meta:O,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[Y]||O:void 0}validate(O,Y){let H;if(typeof O=="string"){if(H=this.getSchema(O),!H)throw new Error(`no schema with key or ref "${O}"`)}else H=this.compile(O);const C=H(Y);return"$async"in H||(this.errors=H.errors),C}compile(O,Y){const H=this._addSchema(O,Y);return H.validate||this._compileSchemaEnv(H)}compileAsync(O,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return C.call(this,O,Y);async function C(he,_e){await B.call(this,he.$schema);const Ie=this._addSchema(he,_e);return Ie.validate||Z.call(this,Ie)}async function B(he){he&&!this.getSchema(he)&&await C.call(this,{$ref:he},!0)}async function Z(he){try{return this._compileSchemaEnv(he)}catch(_e){if(!(_e instanceof s.default))throw _e;return Q.call(this,_e),await oe.call(this,_e.missingSchema),Z.call(this,he)}}function Q({missingSchema:he,missingRef:_e}){if(this.refs[he])throw new Error(`AnySchema ${he} is loaded but ${_e} cannot be resolved`)}async function oe(he){const _e=await fe.call(this,he);this.refs[he]||await B.call(this,_e.$schema),this.refs[he]||this.addSchema(_e,he,Y)}async function fe(he){const _e=this._loading[he];if(_e)return _e;try{return await(this._loading[he]=H(he))}finally{delete this._loading[he]}}}addSchema(O,Y,H,C=this.opts.validateSchema){if(Array.isArray(O)){for(const Z of O)this.addSchema(Z,void 0,H,C);return this}let B;if(typeof O=="object"){const{schemaId:Z}=this.opts;if(B=O[Z],B!==void 0&&typeof B!="string")throw new Error(`schema ${Z} must be string`)}return Y=(0,c.normalizeId)(Y||B),this._checkUnique(Y),this.schemas[Y]=this._addSchema(O,H,Y,C,!0),this}addMetaSchema(O,Y,H=this.opts.validateSchema){return this.addSchema(O,Y,!0,H),this}validateSchema(O,Y){if(typeof O=="boolean")return!0;let H;if(H=O.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const C=this.validate(H,O);if(!C&&Y){const B="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(B);else throw new Error(B)}return C}getSchema(O){let Y;for(;typeof(Y=x.call(this,O))=="string";)O=Y;if(Y===void 0){const{schemaId:H}=this.opts,C=new o.SchemaEnv({schema:{},schemaId:H});if(Y=o.resolveSchema.call(this,C,O),!Y)return;this.refs[O]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=x.call(this,O);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const Y=O;this._cache.delete(Y);let H=O[this.opts.schemaId];return H&&(H=(0,c.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const Y of O)this.addKeyword(Y);return this}addKeyword(O,Y){let H;if(typeof O=="string")H=O,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=H);else if(typeof O=="object"&&Y===void 0){if(Y=O,H=Y.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,H,Y),!Y)return(0,u.eachItem)(H,B=>j.call(this,B)),this;te.call(this,Y);const C={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,u.eachItem)(H,C.type.length===0?B=>j.call(this,B,C):B=>C.type.forEach(Z=>j.call(this,B,C,Z))),this}getKeyword(O){const Y=this.RULES.all[O];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(O){const{RULES:Y}=this;delete Y.keywords[O],delete Y.all[O];for(const H of Y.rules){const C=H.rules.findIndex(B=>B.keyword===O);C>=0&&H.rules.splice(C,1)}return this}addFormat(O,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[O]=Y,this}errorsText(O=this.errors,{separator:Y=", ",dataVar:H="data"}={}){return!O||O.length===0?"No errors":O.map(C=>`${H}${C.instancePath} ${C.message}`).reduce((C,B)=>C+Y+B)}$dataMetaSchema(O,Y){const H=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const C of Y){const B=C.split("/").slice(1);let Z=O;for(const Q of B)Z=Z[Q];for(const Q in H){const oe=H[Q];if(typeof oe!="object")continue;const{$data:fe}=oe.definition,he=Z[Q];fe&&he&&(Z[Q]=ee(he))}}return O}_removeAllSchemas(O,Y){for(const H in O){const C=O[H];(!Y||Y.test(H))&&(typeof C=="string"?delete O[H]:C&&!C.meta&&(this._cache.delete(C.schema),delete O[H]))}}_addSchema(O,Y,H,C=this.opts.validateSchema,B=this.opts.addUsedSchema){let Z;const{schemaId:Q}=this.opts;if(typeof O=="object")Z=O[Q];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let oe=this._cache.get(O);if(oe!==void 0)return oe;H=(0,c.normalizeId)(Z||H);const fe=c.getSchemaRefs.call(this,O,H);return oe=new o.SchemaEnv({schema:O,schemaId:Q,meta:Y,baseId:H,localRefs:fe}),this._cache.set(oe.schema,oe),B&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=oe),C&&this.validateSchema(O,!0),oe}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):o.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const Y=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,O)}finally{this.opts=Y}}}m.ValidationError=n.default,m.MissingRefError=s.default,e.default=m;function w(q,O,Y,H="error"){for(const C in q){const B=C;B in O&&this.logger[H](`${Y}: option ${C}. ${q[B]}`)}}function x(q){return q=(0,c.normalizeId)(q),this.schemas[q]||this.refs[q]}function S(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const O in q)this.addSchema(q[O],O)}function E(){for(const q in this.opts.formats){const O=this.opts.formats[q];O&&this.addFormat(q,O)}}function A(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in q){const Y=q[O];Y.keyword||(Y.keyword=O),this.addKeyword(Y)}}function $(){const q={...this.opts};for(const O of p)delete q[O];return q}const I={log(){},warn(){},error(){}};function T(q){if(q===!1)return I;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function L(q,O){const{RULES:Y}=this;if((0,u.eachItem)(q,H=>{if(Y.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!R.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function j(q,O,Y){var H;const C=O==null?void 0:O.post;if(Y&&C)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:B}=this;let Z=C?B.post:B.rules.find(({type:oe})=>oe===Y);if(Z||(Z={type:Y,rules:[]},B.rules.push(Z)),B.keywords[q]=!0,!O)return;const Q={keyword:q,definition:{...O,type:(0,l.getJSONTypes)(O.type),schemaType:(0,l.getJSONTypes)(O.schemaType)}};O.before?U.call(this,Z,Q,O.before):Z.rules.push(Q),B.all[q]=Q,(H=O.implements)===null||H===void 0||H.forEach(oe=>this.addKeyword(oe))}function U(q,O,Y){const H=q.rules.findIndex(C=>C.keyword===Y);H>=0?q.rules.splice(H,0,O):(q.rules.push(O),this.logger.warn(`rule ${Y} is not defined`))}function te(q){let{metaSchema:O}=q;O!==void 0&&(q.$data&&this.opts.$data&&(O=ee(O)),q.validateSchema=this.compile(O,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ee(q){return{anyOf:[q,z]}}})(fR);var r$={},n$={},i$={};Object.defineProperty(i$,"__esModule",{value:!0});const Hue={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};i$.default=Hue;var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.callRef=Cf.getValidate=void 0;const zue=wh,JO=It,Mi=Pt,tp=Wa,GO=Li,nv=Re,Wue={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();const u=GO.resolveRef.call(c,l,s,r);if(u===void 0)throw new zue.default(n.opts.uriResolver,s,r);if(u instanceof GO.SchemaEnv)return h(u);return f(u);function d(){if(i===l)return nw(e,o,i,i.$async);const p=t.scopeValue("root",{ref:l});return nw(e,(0,Mi._)`${p}.validate`,l,l.$async)}function h(p){const y=e4(e,p);nw(e,y,p,p.$async)}function f(p){const y=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Mi.stringify)(p)}:{ref:p}),_=t.name("valid"),b=e.subschema({schema:p,dataTypes:[],schemaPath:Mi.nil,topSchemaRef:y,errSchemaPath:r},_);e.mergeEvaluated(b),e.ok(_)}}};function e4(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Mi._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Cf.getValidate=e4;function nw(e,t,r,n){const{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?tp.default.this:Mi.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=s.let("valid");s.try(()=>{s.code((0,Mi._)`await ${(0,JO.callValidateCode)(e,t,l)}`),f(t),o||s.assign(p,!0)},y=>{s.if((0,Mi._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),h(y),o||s.assign(p,!1)}),e.ok(p)}function d(){e.result((0,JO.callValidateCode)(e,t,l),()=>f(t),()=>h(t))}function h(p){const y=(0,Mi._)`${p}.errors`;s.assign(tp.default.vErrors,(0,Mi._)`${tp.default.vErrors} === null ? ${y} : ${tp.default.vErrors}.concat(${y})`),s.assign(tp.default.errors,(0,Mi._)`${tp.default.vErrors}.length`)}function f(p){var y;if(!i.opts.unevaluated)return;const _=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(i.props=nv.mergeEvaluated.props(s,_.props,i.props));else{const b=s.var("props",(0,Mi._)`${p}.evaluated.props`);i.props=nv.mergeEvaluated.props(s,b,i.props,Mi.Name)}if(i.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(i.items=nv.mergeEvaluated.items(s,_.items,i.items));else{const b=s.var("items",(0,Mi._)`${p}.evaluated.items`);i.items=nv.mergeEvaluated.items(s,b,i.items,Mi.Name)}}}Cf.callRef=nw;Cf.default=Wue;Object.defineProperty(n$,"__esModule",{value:!0});const Jue=i$,Gue=Cf,Xue=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Jue.default,Gue.default];n$.default=Xue;var s$={},o$={};Object.defineProperty(o$,"__esModule",{value:!0});const eb=Pt,Ic=eb.operators,tb={maximum:{okStr:"<=",ok:Ic.LTE,fail:Ic.GT},minimum:{okStr:">=",ok:Ic.GTE,fail:Ic.LT},exclusiveMaximum:{okStr:"<",ok:Ic.LT,fail:Ic.GTE},exclusiveMinimum:{okStr:">",ok:Ic.GT,fail:Ic.LTE}},Zue={message:({keyword:e,schemaCode:t})=>(0,eb.str)`must be ${tb[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,eb._)`{comparison: ${tb[e].okStr}, limit: ${t}}`},Yue={keyword:Object.keys(tb),type:"number",schemaType:"number",$data:!0,error:Zue,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,eb._)`${r} ${tb[t].fail} ${n} || isNaN(${r})`)}};o$.default=Yue;var a$={};Object.defineProperty(a$,"__esModule",{value:!0});const hm=Pt,Que={message:({schemaCode:e})=>(0,hm.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,hm._)`{multipleOf: ${e}}`},ece={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Que,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,hm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,hm._)`${o} !== parseInt(${o})`;e.fail$data((0,hm._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};a$.default=ece;var u$={},c$={};Object.defineProperty(c$,"__esModule",{value:!0});function t4(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}c$.default=t4;t4.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(u$,"__esModule",{value:!0});const Ud=Pt,tce=Re,rce=c$,nce={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,Ud.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Ud._)`{limit: ${e}}`},ice={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:nce,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?Ud.operators.GT:Ud.operators.LT,o=s.opts.unicode===!1?(0,Ud._)`${r}.length`:(0,Ud._)`${(0,tce.useFunc)(e.gen,rce.default)}(${r})`;e.fail$data((0,Ud._)`${o} ${i} ${n}`)}};u$.default=ice;var l$={};Object.defineProperty(l$,"__esModule",{value:!0});const sce=It,rb=Pt,oce={message:({schemaCode:e})=>(0,rb.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,rb._)`{pattern: ${e}}`},ace={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:oce,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,rb._)`(new RegExp(${s}, ${o}))`:(0,sce.usePattern)(e,n);e.fail$data((0,rb._)`!${a}.test(${t})`)}};l$.default=ace;var d$={};Object.defineProperty(d$,"__esModule",{value:!0});const ym=Pt,uce={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,ym.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,ym._)`{limit: ${e}}`},cce={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:uce,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?ym.operators.GT:ym.operators.LT;e.fail$data((0,ym._)`Object.keys(${r}).length ${s} ${n}`)}};d$.default=cce;var f$={};Object.defineProperty(f$,"__esModule",{value:!0});const vy=It,mm=Pt,lce=Re,dce={message:({params:{missingProperty:e}})=>(0,mm.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,mm._)`{missingProperty: ${e}}`},fce={keyword:"required",type:"object",schemaType:"array",$data:!0,error:dce,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;const c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){const f=e.parentSchema.properties,{definedProperties:p}=e.it;for(const y of r)if((f==null?void 0:f[y])===void 0&&!p.has(y)){const _=o.schemaEnv.baseId+o.errSchemaPath,b=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,lce.checkStrictMode)(o,b,o.opts.strictRequired)}}function l(){if(c||i)e.block$data(mm.nil,d);else for(const f of r)(0,vy.checkReportMissingProp)(e,f)}function u(){const f=t.let("missing");if(c||i){const p=t.let("valid",!0);e.block$data(p,()=>h(f,p)),e.ok(p)}else t.if((0,vy.checkMissingProp)(e,r,f)),(0,vy.reportMissingProp)(e,f),t.else()}function d(){t.forOf("prop",n,f=>{e.setParams({missingProperty:f}),t.if((0,vy.noPropertyInData)(t,s,f,a.ownProperties),()=>e.error())})}function h(f,p){e.setParams({missingProperty:f}),t.forOf(f,n,()=>{t.assign(p,(0,vy.propertyInData)(t,s,f,a.ownProperties)),t.if((0,mm.not)(p),()=>{e.error(),t.break()})},mm.nil)}}};f$.default=fce;var p$={};Object.defineProperty(p$,"__esModule",{value:!0});const gm=Pt,pce={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,gm.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,gm._)`{limit: ${e}}`},hce={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:pce,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?gm.operators.GT:gm.operators.LT;e.fail$data((0,gm._)`${r}.length ${s} ${n}`)}};p$.default=hce;var h$={};Object.defineProperty(h$,"__esModule",{value:!0});const bE=hn,Vn=Pt,yce=Re,mce=vh,gce={message:({params:{i:e,j:t}})=>(0,Vn.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Vn._)`{i: ${e}, j: ${t}}`},vce={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:gce,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;const c=t.let("valid"),l=i.items?(0,bE.getSchemaTypes)(i.items):[];e.block$data(c,u,(0,Vn._)`${o} === false`),e.ok(c);function u(){const p=t.let("i",(0,Vn._)`${r}.length`),y=t.let("j");e.setParams({i:p,j:y}),t.assign(c,!0),t.if((0,Vn._)`${p} > 1`,()=>(d()?h:f)(p,y))}function d(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,y){const _=t.name("item"),b=(0,bE.checkDataTypes)(l,_,a.opts.strictNumbers,bE.DataType.Wrong),v=t.const("indices",(0,Vn._)`{}`);t.for((0,Vn._)`;${p}--;`,()=>{t.let(_,(0,Vn._)`${r}[${p}]`),t.if(b,(0,Vn._)`continue`),l.length>1&&t.if((0,Vn._)`typeof ${_} == "string"`,(0,Vn._)`${_} += "_"`),t.if((0,Vn._)`typeof ${v}[${_}] == "number"`,()=>{t.assign(y,(0,Vn._)`${v}[${_}]`),e.error(),t.assign(c,!1).break()}).code((0,Vn._)`${v}[${_}] = ${p}`)})}function f(p,y){const _=(0,yce.useFunc)(t,mce.default),b=t.name("outer");t.label(b).for((0,Vn._)`;${p}--;`,()=>t.for((0,Vn._)`${y} = ${p}; ${y}--;`,()=>t.if((0,Vn._)`${_}(${r}[${p}], ${r}[${y}])`,()=>{e.error(),t.assign(c,!1).break(b)})))}}};h$.default=vce;var y$={};Object.defineProperty(y$,"__esModule",{value:!0});const k2=Pt,wce=Re,bce=vh,_ce={message:"must be equal to constant",params:({schemaCode:e})=>(0,k2._)`{allowedValue: ${e}}`},Ece={keyword:"const",$data:!0,error:_ce,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,k2._)`!${(0,wce.useFunc)(t,bce.default)}(${r}, ${s})`):e.fail((0,k2._)`${i} !== ${r}`)}};y$.default=Ece;var m$={};Object.defineProperty(m$,"__esModule",{value:!0});const Jy=Pt,Ace=Re,Sce=vh,xce={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Jy._)`{allowedValues: ${e}}`},$ce={keyword:"enum",schemaType:"array",$data:!0,error:xce,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const l=()=>c??(c=(0,Ace.useFunc)(t,Sce.default));let u;if(a||n)u=t.let("valid"),e.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const f=t.const("vSchema",i);u=(0,Jy.or)(...s.map((p,y)=>h(f,y)))}e.pass(u);function d(){t.assign(u,!1),t.forOf("v",i,f=>t.if((0,Jy._)`${l()}(${r}, ${f})`,()=>t.assign(u,!0).break()))}function h(f,p){const y=s[p];return typeof y=="object"&&y!==null?(0,Jy._)`${l()}(${r}, ${f}[${p}])`:(0,Jy._)`${r} === ${y}`}}};m$.default=$ce;Object.defineProperty(s$,"__esModule",{value:!0});const Dce=o$,Cce=a$,Pce=u$,kce=l$,Oce=d$,Tce=f$,Ice=p$,Bce=h$,Fce=y$,Nce=m$,Rce=[Dce.default,Cce.default,Pce.default,kce.default,Oce.default,Tce.default,Ice.default,Bce.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Fce.default,Nce.default];s$.default=Rce;var g$={},bh={};Object.defineProperty(bh,"__esModule",{value:!0});bh.validateAdditionalItems=void 0;const Kd=Pt,O2=Re,Mce={message:({params:{len:e}})=>(0,Kd.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Kd._)`{limit: ${e}}`},jce={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Mce,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,O2.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}r4(e,n)}};function r4(e,t){const{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;const a=r.const("len",(0,Kd._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Kd._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,O2.alwaysValidSchema)(o,n)){const l=r.var("valid",(0,Kd._)`${a} <= ${t.length}`);r.if((0,Kd.not)(l),()=>c(l)),e.ok(l)}function c(l){r.forRange("i",t.length,a,u=>{e.subschema({keyword:i,dataProp:u,dataPropType:O2.Type.Num},l),o.allErrors||r.if((0,Kd.not)(l),()=>r.break())})}}bh.validateAdditionalItems=r4;bh.default=jce;var v$={},_h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.validateTuple=void 0;const XO=Pt,iw=Re,Uce=It,Kce={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return n4(e,"additionalItems",t);r.items=!0,!(0,iw.alwaysValidSchema)(r,t)&&e.ok((0,Uce.validateArray)(e))}};function n4(e,t,r=e.schema){const{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=iw.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),l=n.const("len",(0,XO._)`${i}.length`);r.forEach((d,h)=>{(0,iw.alwaysValidSchema)(a,d)||(n.if((0,XO._)`${l} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},c)),e.ok(c))});function u(d){const{opts:h,errSchemaPath:f}=a,p=r.length,y=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(h.strictTuples&&!y){const _=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${f}"`;(0,iw.checkStrictMode)(a,_,h.strictTuples)}}}_h.validateTuple=n4;_h.default=Kce;Object.defineProperty(v$,"__esModule",{value:!0});const Lce=_h,qce={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Lce.validateTuple)(e,"items")};v$.default=qce;var w$={};Object.defineProperty(w$,"__esModule",{value:!0});const ZO=Pt,Vce=Re,Hce=It,zce=bh,Wce={message:({params:{len:e}})=>(0,ZO.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ZO._)`{limit: ${e}}`},Jce={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Wce,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,Vce.alwaysValidSchema)(n,t)&&(s?(0,zce.validateAdditionalItems)(e,s):e.ok((0,Hce.validateArray)(e)))}};w$.default=Jce;var b$={};Object.defineProperty(b$,"__esModule",{value:!0});const Us=Pt,iv=Re,Gce={message:({params:{min:e,max:t}})=>t===void 0?(0,Us.str)`must contain at least ${e} valid item(s)`:(0,Us.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Us._)`{minContains: ${e}}`:(0,Us._)`{minContains: ${e}, maxContains: ${t}}`},Xce={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Gce,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;let o,a;const{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;const u=t.const("len",(0,Us._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,iv.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,iv.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,iv.alwaysValidSchema)(i,r)){let y=(0,Us._)`${u} >= ${o}`;a!==void 0&&(y=(0,Us._)`${y} && ${u} <= ${a}`),e.pass(y);return}i.items=!0;const d=t.name("valid");a===void 0&&o===1?f(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,Us._)`${s}.length > 0`,h)):(t.let(d,!1),h()),e.result(d,()=>e.reset());function h(){const y=t.name("_valid"),_=t.let("count",0);f(y,()=>t.if(y,()=>p(_)))}function f(y,_){t.forRange("i",0,u,b=>{e.subschema({keyword:"contains",dataProp:b,dataPropType:iv.Type.Num,compositeRule:!0},y),_()})}function p(y){t.code((0,Us._)`${y}++`),a===void 0?t.if((0,Us._)`${y} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,Us._)`${y} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,Us._)`${y} >= ${o}`,()=>t.assign(d,!0)))}}};b$.default=Xce;var i4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pt,r=Re,n=It;e.error={message:({params:{property:c,depsCount:l,deps:u}})=>{const d=l===1?"property":"properties";return(0,t.str)`must have ${d} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:u,missingProperty:d}})=>(0,t._)`{property: ${c},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[l,u]=i(c);o(c,l),a(c,u)}};function i({schema:c}){const l={},u={};for(const d in c){if(d==="__proto__")continue;const h=Array.isArray(c[d])?l:u;h[d]=c[d]}return[l,u]}function o(c,l=c.schema){const{gen:u,data:d,it:h}=c;if(Object.keys(l).length===0)return;const f=u.let("missing");for(const p in l){const y=l[p];if(y.length===0)continue;const _=(0,n.propertyInData)(u,d,p,h.opts.ownProperties);c.setParams({property:p,depsCount:y.length,deps:y.join(", ")}),h.allErrors?u.if(_,()=>{for(const b of y)(0,n.checkReportMissingProp)(c,b)}):(u.if((0,t._)`${_} && (${(0,n.checkMissingProp)(c,y,f)})`),(0,n.reportMissingProp)(c,f),u.else())}}e.validatePropertyDeps=o;function a(c,l=c.schema){const{gen:u,data:d,keyword:h,it:f}=c,p=u.name("valid");for(const y in l)(0,r.alwaysValidSchema)(f,l[y])||(u.if((0,n.propertyInData)(u,d,y,f.opts.ownProperties),()=>{const _=c.subschema({keyword:h,schemaProp:y},p);c.mergeValidEvaluated(_,p)},()=>u.var(p,!0)),c.ok(p))}e.validateSchemaDeps=a,e.default=s})(i4);var _$={};Object.defineProperty(_$,"__esModule",{value:!0});const s4=Pt,Zce=Re,Yce={message:"property name must be valid",params:({params:e})=>(0,s4._)`{propertyName: ${e.propertyName}}`},Qce={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Yce,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Zce.alwaysValidSchema)(s,r))return;const i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,s4.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};_$.default=Qce;var g1={};Object.defineProperty(g1,"__esModule",{value:!0});const sv=It,po=Pt,ele=Wa,ov=Re,tle={message:"must NOT have additional properties",params:({params:e})=>(0,po._)`{additionalProperty: ${e.additionalProperty}}`},rle={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:tle,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,ov.alwaysValidSchema)(o,r))return;const l=(0,sv.allSchemaProperties)(n.properties),u=(0,sv.allSchemaProperties)(n.patternProperties);d(),e.ok((0,po._)`${i} === ${ele.default.errors}`);function d(){t.forIn("key",s,_=>{!l.length&&!u.length?p(_):t.if(h(_),()=>p(_))})}function h(_){let b;if(l.length>8){const v=(0,ov.schemaRefOrVal)(o,n.properties,"properties");b=(0,sv.isOwnProperty)(t,v,_)}else l.length?b=(0,po.or)(...l.map(v=>(0,po._)`${_} === ${v}`)):b=po.nil;return u.length&&(b=(0,po.or)(b,...u.map(v=>(0,po._)`${(0,sv.usePattern)(e,v)}.test(${_})`))),(0,po.not)(b)}function f(_){t.code((0,po._)`delete ${s}[${_}]`)}function p(_){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,ov.alwaysValidSchema)(o,r)){const b=t.name("valid");c.removeAdditional==="failing"?(y(_,b,!1),t.if((0,po.not)(b),()=>{e.reset(),f(_)})):(y(_,b),a||t.if((0,po.not)(b),()=>t.break()))}}function y(_,b,v){const g={keyword:"additionalProperties",dataProp:_,dataPropType:ov.Type.Str};v===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,b)}}};g1.default=rle;var E$={};Object.defineProperty(E$,"__esModule",{value:!0});const nle=ko,YO=It,_E=Re,QO=g1,ile={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&QO.default.code(new nle.KeywordCxt(i,QO.default,"additionalProperties"));const o=(0,YO.allSchemaProperties)(r);for(const d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=_E.mergeEvaluated.props(t,(0,_E.toHash)(o),i.props));const a=o.filter(d=>!(0,_E.alwaysValidSchema)(i,r[d]));if(a.length===0)return;const c=t.name("valid");for(const d of a)l(d)?u(d):(t.if((0,YO.propertyInData)(t,s,d,i.opts.ownProperties)),u(d),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};E$.default=ile;var A$={};Object.defineProperty(A$,"__esModule",{value:!0});const eT=It,av=Pt,tT=Re,rT=Re,sle={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,eT.allSchemaProperties)(r),c=a.filter(y=>(0,tT.alwaysValidSchema)(i,r[y]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=t.name("valid");i.props!==!0&&!(i.props instanceof av.Name)&&(i.props=(0,rT.evaluatedPropsToName)(t,i.props));const{props:d}=i;h();function h(){for(const y of a)l&&f(y),i.allErrors?p(y):(t.var(u,!0),p(y),t.if(u))}function f(y){for(const _ in l)new RegExp(y).test(_)&&(0,tT.checkStrictMode)(i,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",n,_=>{t.if((0,av._)`${(0,eT.usePattern)(e,y)}.test(${_})`,()=>{const b=c.includes(y);b||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:rT.Type.Str},u),i.opts.unevaluated&&d!==!0?t.assign((0,av._)`${d}[${_}]`,!0):!b&&!i.allErrors&&t.if((0,av.not)(u),()=>t.break())})})}}};A$.default=sle;var S$={};Object.defineProperty(S$,"__esModule",{value:!0});const ole=Re,ale={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,ole.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};S$.default=ale;var x$={};Object.defineProperty(x$,"__esModule",{value:!0});const ule=It,cle={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ule.validateUnion,error:{message:"must match a schema in anyOf"}};x$.default=cle;var $$={};Object.defineProperty($$,"__esModule",{value:!0});const sw=Pt,lle=Re,dle={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,sw._)`{passingSchemas: ${e.passing}}`},fle={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:dle,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){i.forEach((u,d)=>{let h;(0,lle.alwaysValidSchema)(s,u)?t.var(c,!0):h=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&t.if((0,sw._)`${c} && ${o}`).assign(o,!1).assign(a,(0,sw._)`[${a}, ${d}]`).else(),t.if(c,()=>{t.assign(o,!0),t.assign(a,d),h&&e.mergeEvaluated(h,sw.Name)})})}}};$$.default=fle;var D$={};Object.defineProperty(D$,"__esModule",{value:!0});const ple=Re,hle={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((i,o)=>{if((0,ple.alwaysValidSchema)(n,i))return;const a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};D$.default=hle;var C$={};Object.defineProperty(C$,"__esModule",{value:!0});const nb=Pt,o4=Re,yle={message:({params:e})=>(0,nb.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,nb._)`{failingKeyword: ${e.ifClause}}`},mle={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:yle,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,o4.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=nT(n,"then"),i=nT(n,"else");if(!s&&!i)return;const o=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),s&&i){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(a,l("then",u),l("else",u))}else s?t.if(a,l("then")):t.if((0,nb.not)(a),l("else"));e.pass(o,()=>e.error(!0));function c(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(u)}function l(u,d){return()=>{const h=e.subschema({keyword:u},a);t.assign(o,a),e.mergeValidEvaluated(h,o),d?t.assign(d,(0,nb._)`${u}`):e.setParams({ifClause:u})}}}};function nT(e,t){const r=e.schema[t];return r!==void 0&&!(0,o4.alwaysValidSchema)(e,r)}C$.default=mle;var P$={};Object.defineProperty(P$,"__esModule",{value:!0});const gle=Re,vle={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,gle.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};P$.default=vle;Object.defineProperty(g$,"__esModule",{value:!0});const wle=bh,ble=v$,_le=_h,Ele=w$,Ale=b$,Sle=i4,xle=_$,$le=g1,Dle=E$,Cle=A$,Ple=S$,kle=x$,Ole=$$,Tle=D$,Ile=C$,Ble=P$;function Fle(e=!1){const t=[Ple.default,kle.default,Ole.default,Tle.default,Ile.default,Ble.default,xle.default,$le.default,Sle.default,Dle.default,Cle.default];return e?t.push(ble.default,Ele.default):t.push(wle.default,_le.default),t.push(Ale.default),t}g$.default=Fle;var k$={},O$={};Object.defineProperty(O$,"__esModule",{value:!0});const zr=Pt,Nle={message:({schemaCode:e})=>(0,zr.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,zr._)`{format: ${e}}`},Rle={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Nle,code(e,t){const{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?h():f();function h(){const p=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),y=r.const("fDef",(0,zr._)`${p}[${o}]`),_=r.let("fType"),b=r.let("format");r.if((0,zr._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(_,(0,zr._)`${y}.type || "string"`).assign(b,(0,zr._)`${y}.validate`),()=>r.assign(_,(0,zr._)`"string"`).assign(b,y)),e.fail$data((0,zr.or)(v(),g()));function v(){return c.strictSchema===!1?zr.nil:(0,zr._)`${o} && !${b}`}function g(){const m=u.$async?(0,zr._)`(${y}.async ? await ${b}(${n}) : ${b}(${n}))`:(0,zr._)`${b}(${n})`,w=(0,zr._)`(typeof ${b} == "function" ? ${m} : ${b}.test(${n}))`;return(0,zr._)`${b} && ${b} !== true && ${_} === ${t} && !${w}`}}function f(){const p=d.formats[i];if(!p){v();return}if(p===!0)return;const[y,_,b]=g(p);y===t&&e.pass(m());function v(){if(c.strictSchema===!1){d.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function g(w){const x=w instanceof RegExp?(0,zr.regexpCode)(w):c.code.formats?(0,zr._)`${c.code.formats}${(0,zr.getProperty)(i)}`:void 0,S=r.scopeValue("formats",{key:i,ref:w,code:x});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,zr._)`${S}.validate`]:["string",w,S]}function m(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!u.$async)throw new Error("async format in sync schema");return(0,zr._)`await ${b}(${n})`}return typeof _=="function"?(0,zr._)`${b}(${n})`:(0,zr._)`${b}.test(${n})`}}}};O$.default=Rle;Object.defineProperty(k$,"__esModule",{value:!0});const Mle=O$,jle=[Mle.default];k$.default=jle;var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.contentVocabulary=nh.metadataVocabulary=void 0;nh.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];nh.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(r$,"__esModule",{value:!0});const Ule=n$,Kle=s$,Lle=g$,qle=k$,iT=nh,Vle=[Ule.default,Kle.default,(0,Lle.default)(),qle.default,iT.metadataVocabulary,iT.contentVocabulary];r$.default=Vle;var T$={},v1={};Object.defineProperty(v1,"__esModule",{value:!0});v1.DiscrError=void 0;var sT;(function(e){e.Tag="tag",e.Mapping="mapping"})(sT||(v1.DiscrError=sT={}));Object.defineProperty(T$,"__esModule",{value:!0});const yp=Pt,T2=v1,oT=Li,Hle=wh,zle=Re,Wle={message:({params:{discrError:e,tagName:t}})=>e===T2.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,yp._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Jle={keyword:"discriminator",type:"object",schemaType:"object",error:Wle,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",(0,yp._)`${r}${(0,yp.getProperty)(a)}`);t.if((0,yp._)`typeof ${l} == "string"`,()=>u(),()=>e.error(!1,{discrError:T2.DiscrError.Tag,tag:l,tagName:a})),e.ok(c);function u(){const f=h();t.if(!1);for(const p in f)t.elseIf((0,yp._)`${l} === ${p}`),t.assign(c,d(f[p]));t.else(),e.error(!1,{discrError:T2.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function d(f){const p=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:f},p);return e.mergeEvaluated(y,yp.Name),p}function h(){var f;const p={},y=b(s);let _=!0;for(let m=0;m<o.length;m++){let w=o[m];if(w!=null&&w.$ref&&!(0,zle.schemaHasRulesButRef)(w,i.self.RULES)){const S=w.$ref;if(w=oT.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,S),w instanceof oT.SchemaEnv&&(w=w.schema),w===void 0)throw new Hle.default(i.opts.uriResolver,i.baseId,S)}const x=(f=w==null?void 0:w.properties)===null||f===void 0?void 0:f[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);_=_&&(y||b(w)),v(x,m)}if(!_)throw new Error(`discriminator: "${a}" must be required`);return p;function b({required:m}){return Array.isArray(m)&&m.includes(a)}function v(m,w){if(m.const)g(m.const,w);else if(m.enum)for(const x of m.enum)g(x,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(m,w){if(typeof m!="string"||m in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[m]=w}}}};T$.default=Jle;const Gle="http://json-schema.org/draft-07/schema#",Xle="http://json-schema.org/draft-07/schema#",Zle="Core schema meta-schema",Yle={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Qle=["object","boolean"],ede={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},tde={$schema:Gle,$id:Xle,title:Zle,definitions:Yle,type:Qle,properties:ede,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=fR,n=r$,s=T$,i=tde,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=ko;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=Pt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var d=R0;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=wh;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(S2,S2.exports);var a4=S2.exports;const rde=La(a4);var I2={exports:{}},u4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(A,$){return{validate:A,compare:$}}e.fullFormats={date:t(i,o),time:t(c,l),"date-time":t(d,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:E,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:b,int32:{type:"number",validate:m},int64:{type:"number",validate:w},float:{type:"number",validate:x},double:{type:"number",validate:x},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(A){return A%4===0&&(A%100!==0||A%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(A){const $=n.exec(A);if(!$)return!1;const I=+$[1],T=+$[2],R=+$[3];return T>=1&&T<=12&&R>=1&&R<=(T===2&&r(I)?29:s[T])}function o(A,$){if(A&&$)return A>$?1:A<$?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(A,$){const I=a.exec(A);if(!I)return!1;const T=+I[1],R=+I[2],L=+I[3],j=I[5];return(T<=23&&R<=59&&L<=59||T===23&&R===59&&L===60)&&(!$||j!=="")}function l(A,$){if(!(A&&$))return;const I=a.exec(A),T=a.exec($);if(I&&T)return A=I[1]+I[2]+I[3]+(I[4]||""),$=T[1]+T[2]+T[3]+(T[4]||""),A>$?1:A<$?-1:0}const u=/t|\s/i;function d(A){const $=A.split(u);return $.length===2&&i($[0])&&c($[1],!0)}function h(A,$){if(!(A&&$))return;const[I,T]=A.split(u),[R,L]=$.split(u),j=o(I,R);if(j!==void 0)return j||l(T,L)}const f=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(A){return f.test(A)&&p.test(A)}const _=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function b(A){return _.lastIndex=0,_.test(A)}const v=-(2**31),g=2**31-1;function m(A){return Number.isInteger(A)&&A<=g&&A>=v}function w(A){return Number.isInteger(A)}function x(){return!0}const S=/[^\\]\\Z/;function E(A){if(S.test(A))return!1;try{return new RegExp(A),!0}catch{return!1}}})(u4);var c4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=a4,r=Pt,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},i={message:({keyword:a,schemaCode:c})=>r.str`should be ${s[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>r._`{comparison: ${s[a].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(a){const{gen:c,data:l,schemaCode:u,keyword:d,it:h}=a,{opts:f,self:p}=h;if(!f.validateFormats)return;const y=new t.KeywordCxt(h,p.RULES.all.format.definition,"format");y.$data?_():b();function _(){const g=c.scopeValue("formats",{ref:p.formats,code:f.code.formats}),m=c.const("fmt",r._`${g}[${y.schemaCode}]`);a.fail$data(r.or(r._`typeof ${m} != "object"`,r._`${m} instanceof RegExp`,r._`typeof ${m}.compare != "function"`,v(m)))}function b(){const g=y.schema,m=p.formats[g];if(!m||m===!0)return;if(typeof m!="object"||m instanceof RegExp||typeof m.compare!="function")throw new Error(`"${d}": format "${g}" does not define "compare" function`);const w=c.scopeValue("formats",{key:g,ref:m,code:f.code.formats?r._`${f.code.formats}${r.getProperty(g)}`:void 0});a.fail$data(v(w))}function v(g){return r._`${g}.compare(${l}, ${u}) ${s[d].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(e.formatLimitDefinition),a);e.default=o})(c4);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=u4,n=c4,s=Pt,i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(l,u={keywords:!0})=>{if(Array.isArray(u))return c(l,u,r.fullFormats,i),l;const[d,h]=u.mode==="fast"?[r.fastFormats,o]:[r.fullFormats,i],f=u.formats||r.formatNames;return c(l,f,d,h),u.keywords&&n.default(l),l};a.get=(l,u="full")=>{const h=(u==="fast"?r.fastFormats:r.fullFormats)[l];if(!h)throw new Error(`Unknown format "${l}"`);return h};function c(l,u,d,h){var f,p;(f=(p=l.opts.code).formats)!==null&&f!==void 0||(p.formats=s._`require("ajv-formats/dist/formats").${h}`);for(const y of u)l.addFormat(y,d[y])}e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a})(I2,I2.exports);var nde=I2.exports;const ide=La(nde);class sde extends za{constructor(t){super(t)}getName(){return"FilterEvaluation"}handle(t,r){const n=Xt.nodes(t,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(t,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=Zs.extractInputField(s.credential,o.value.path));let c=!1;for(const l of a)if(this.evaluateFilter(l,o.value)){c=!0;const u={result:{...a[0]},valid:!0,format:s.format};this.getResults().push({...this.createResultObject(Xt.stringify(o.path.slice(0,3)),i,u)})}if(!c)if(a.length){const l={result:{...a[0]},valid:!1,format:s.format};this.createResponse(o,i,l,nn.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{const l={valid:!1,format:s.format};this.createResponse(o,i,l,nn.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(t)}createNoFieldResults(t,r,n){t.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,c;return((o=i.inDesc.constraints)==null?void 0:o.fields)===void 0||((c=(a=i.inDesc.constraints)==null?void 0:a.fields)==null?void 0:c.length)===0}).forEach(i=>{const o={result:[],valid:!0,format:n.format};this.getResults().push({...this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)})})}createResponse(t,r,n,s){this.getResults().push({...this.createResultObject(Xt.stringify(t.path.slice(0,3)),r,n),status:Ce.ERROR,message:s})}createResultObject(t,r,n){return{input_descriptor_path:t,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Ce.INFO,message:nn.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(t,r){var s;(s=r.filter)!=null&&s.format&&r.filter.format==="date"&&this.transformDateFormat(t);const n=new rde({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return ide(n),r.filter?n.validate(r.filter,t.value):!0}transformDateFormat(t){const r=new Date(t.value);let n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),t.value=r.getUTCFullYear()+"-"+n+"-"+s,t.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}}var ir={},l4={},d4={};Object.defineProperty(d4,"__esModule",{value:!0});var f4={};Object.defineProperty(f4,"__esModule",{value:!0});var p4={};Object.defineProperty(p4,"__esModule",{value:!0});var h4={};Object.defineProperty(h4,"__esModule",{value:!0});var y4={};Object.defineProperty(y4,"__esModule",{value:!0});var m4={};Object.defineProperty(m4,"__esModule",{value:!0});var w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.Directives=void 0;w1.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"};var b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.ExchangeStatus=void 0;b1.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"};var g4={};Object.defineProperty(g4,"__esModule",{value:!0});var v4={};Object.defineProperty(v4,"__esModule",{value:!0});var w4={};Object.defineProperty(w4,"__esModule",{value:!0});var b4={};Object.defineProperty(b4,"__esModule",{value:!0});var _4={};Object.defineProperty(_4,"__esModule",{value:!0});var E4={};Object.defineProperty(E4,"__esModule",{value:!0});var A4={};Object.defineProperty(A4,"__esModule",{value:!0});var S4={};Object.defineProperty(S4,"__esModule",{value:!0});var x4={};Object.defineProperty(x4,"__esModule",{value:!0});var $4={};Object.defineProperty($4,"__esModule",{value:!0});var D4={};Object.defineProperty(D4,"__esModule",{value:!0});var C4={};Object.defineProperty(C4,"__esModule",{value:!0});var P4={};Object.defineProperty(P4,"__esModule",{value:!0});var k4={};Object.defineProperty(k4,"__esModule",{value:!0});var O4={};Object.defineProperty(O4,"__esModule",{value:!0});var T4={};Object.defineProperty(T4,"__esModule",{value:!0});var I4={};Object.defineProperty(I4,"__esModule",{value:!0});var B4={};Object.defineProperty(B4,"__esModule",{value:!0});var _1={};Object.defineProperty(_1,"__esModule",{value:!0});_1.Optionality=void 0;_1.Optionality={Required:"required",Preferred:"preferred"};var F4={};Object.defineProperty(F4,"__esModule",{value:!0});var N4={};Object.defineProperty(N4,"__esModule",{value:!0});var R4={};Object.defineProperty(R4,"__esModule",{value:!0});var M4={};Object.defineProperty(M4,"__esModule",{value:!0});var j4={};Object.defineProperty(j4,"__esModule",{value:!0});var U4={};Object.defineProperty(U4,"__esModule",{value:!0});var K4={};Object.defineProperty(K4,"__esModule",{value:!0});var L4={};Object.defineProperty(L4,"__esModule",{value:!0});var q4={};Object.defineProperty(q4,"__esModule",{value:!0});var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.Rules=void 0;E1.Rules={All:"all",Pick:"pick"};var V4={};Object.defineProperty(V4,"__esModule",{value:!0});var H4={};Object.defineProperty(H4,"__esModule",{value:!0});var A1={};Object.defineProperty(A1,"__esModule",{value:!0});A1.Status=void 0;A1.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"};var z4={};Object.defineProperty(z4,"__esModule",{value:!0});var W4={};Object.defineProperty(W4,"__esModule",{value:!0});var J4={};Object.defineProperty(J4,"__esModule",{value:!0});var G4={};Object.defineProperty(G4,"__esModule",{value:!0});(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(d4,e),r(f4,e),r(p4,e),r(h4,e),r(y4,e),r(m4,e),r(w1,e),r(b1,e),r(g4,e),r(v4,e),r(w4,e),r(b4,e),r(_4,e),r(E4,e),r(A4,e),r(S4,e),r(x4,e),r($4,e),r(D4,e),r(C4,e),r(P4,e),r(k4,e),r(O4,e),r(T4,e),r(I4,e),r(B4,e),r(_1,e),r(F4,e),r(N4,e),r(R4,e),r(M4,e),r(j4,e),r(U4,e),r(K4,e),r(L4,e),r(q4,e),r(E1,e),r(V4,e),r(H4,e),r(A1,e),r(z4,e),r(W4,e),r(J4,e),r(G4,e)})(l4);(function(e){var t=tr&&tr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=tr&&tr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(l4,e)})(ir);class ode extends za{constructor(r){super(r);ge(this,"fieldIdzInputDescriptorsSameSubjectRequired");ge(this,"fieldIdzInputDescriptorsSameSubjectPreferred");ge(this,"fieldIds");ge(this,"isHolder");ge(this,"credentialsSubjectsByPath");ge(this,"credentialsByPath");ge(this,"messages");this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(Ce.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(Ce.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(Ce.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(r,n){this.findIsHolderFieldIdsToInputDescriptorsSets(r),this.findAllCredentialSubjects(n),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,Ce.INFO,ir.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,Ce.WARN,ir.Optionality.Preferred),this.updatePresentationSubmission(r)}findIsHolderFieldIdsToInputDescriptorsSets(r){var i;this.fieldIds.push(...Xt.nodes(r,"$..fields[*].id")),this.isHolder.push(...Xt.nodes(r,"$..is_holder[*]"));const n=(i=this.fieldIds)==null?void 0:i.map(o=>o.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,ir.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,ir.Optionality.Required)),s.forEach(o=>this.getResults().push(this.createResult(o[1],o[0],["",{}],Ce.ERROR,void 0)))}evaluateFields(r,n,s,i){const o=[];return n.filter(a=>a.value.directive===i).filter(a=>a.value.field_id.every(c=>s.includes(c))).forEach(a=>r.set(Xt.stringify(a.path.slice(0,3)),a.value.field_id)),n.filter(a=>a.value.directive===i).filter(a=>!a.value.field_id.every(c=>s.includes(c))).forEach(a=>o.push([Xt.stringify(a.path.slice(0,3)),a.value.field_id])),o}findAllCredentialSubjects(r){const n=Xt.nodes(r.map(s=>s.credential),"$..credentialSubject");for(let s=0;s<n.length;s++){const i=n[s],o=Xt.stringify(i.path.slice(0,2));this.credentialsSubjectsByPath.set(o,i.value),this.credentialsByPath.set(o,r[s])}}confirmAllFieldSetHasSameSubject(r,n,s){const i=Array.from(r).flatMap(l=>Array.from(this.credentialsSubjectsByPath).filter(u=>l[1].find(d=>Object.keys(u[1]).includes(d)))),o=this.mapCredentialPathsToInputDescriptors(s),a=Array.from(i).flatMap(l=>Object.keys(l[1]).filter(u=>u!=="id")),c=Array.from(r.values()).flatMap(l=>l.every(u=>a.includes(u)))[0];i.forEach(l=>{const u=o.get(l[0]);c&&l[1].id&&this.client.dids.includes(l[1].id)?this.getResults().push(this.createResult(Object.keys(l[1]).filter(d=>d!=="id"),u,l,n,this.credentialsByPath.get(l[0]))):this.getResults().push(this.createResult(Object.keys(l[1]).filter(d=>d!=="id"),u,l,Ce.ERROR,this.credentialsByPath.get(l[0])))})}mapCredentialPathsToInputDescriptors(r){var s;const n=new Map;return(s=this.fieldIds)==null||s.forEach(i=>{const o=Xt.stringify(i.path.slice(0,3));this.credentialsSubjectsByPath.forEach((a,c)=>{const l=this.isHolder.find(u=>Xt.stringify(u.path.slice(0,3))===o);Object.keys(a).includes(i.value)&&(l==null?void 0:l.value.directive)===r&&n.set(c,o)})}),n}createResult(r,n,s,i,o,a){return{input_descriptor_path:n,verifiable_credential_path:s[0],evaluator:this.getName(),status:i,payload:{fieldIdSet:r,credentialSubject:s[1],...o?{format:o.format}:{}},message:a??this.messages.get(i)}}}class ade extends za{constructor(t){super(t)}getName(){return"LimitDisclosureEvaluation"}handle(t,r){t.input_descriptors.forEach((n,s)=>{var i,o,a;(i=n.constraints)!=null&&i.fields&&(((o=n.constraints)==null?void 0:o.limit_disclosure)===ir.Optionality.Required||((a=n.constraints)==null?void 0:a.limit_disclosure)===ir.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(t,r,n,s){const i=this.client.limitDisclosureSignatureSuites,o=t.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i!=null&&i.includes(o.type)?!0:(s==ir.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(t,r,n){const s=r==null?void 0:r.fields,i=r.limit_disclosure;t.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,t,i)})}enforceLimitDisclosure(t,r,n,s,i,o){const a=this.createVcWithRequiredFields(t,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(t,r,n,s){let i={};i=Object.assign(i,t),i.credentialSubject={};for(const o of r)if(o.path){const a=Zs.extractInputField(t,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],t,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(t,r,n){let s={...r.credentialSubject};return t.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject={...n.credentialSubject,...s},n}createSuccessResult(t,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${t}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===ir.Optionality.Required?Ce.INFO:Ce.WARN,message:nn.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(t,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${t}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Ce.ERROR,message:nn.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(t,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${t}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Ce.ERROR,message:nn.LIMIT_DISCLOSURE_NOT_SUPPORTED})}}class ude extends za{constructor(t){super(t)}getName(){return"MarkForSubmissionEvaluation"}handle(t,r){const n=[...this.getResults()],s=n.filter(o=>o.status===Ce.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,t)}retrieveNoErrorStatus(t,r){return t.filter(s=>s.status!==Ce.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(t,r){this.removeDuplicate(t).forEach(n=>{const i=Xt.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:Ce.INFO,payload:{group:i},message:nn.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(t){this.removeDuplicate(t).forEach(r=>{const n={...r.payload};n.evaluator=r.evaluator,this.getResults().push({...r,evaluator:this.getName(),message:nn.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n})})}}class cde extends za{constructor(t){super(t)}getName(){return"PredicateRelatedFieldEvaluation"}handle(t){t.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(t,r){if(r!=null&&r.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,t,r,n)}examinePredicateForFilterEvaluationResult(t,r,n,s,i){var a;const o=this.retrieveResultInputDescriptorIdx(t[r].input_descriptor_path);if(t[r].payload&&t[r].payload.result&&t[r].payload.result.path&&t[r].evaluator==="FilterEvaluation"&&n===o&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&((a=s.fields[i].path)!=null&&a.includes(this.concatenatePath(t[r].payload.result.path)))){const c={...t[r].payload.result},l=this.createResultObject(n,r,c,t);s.fields[i].predicate===ir.Optionality.Required||(l.payload.value=!0),t.push(l)}}retrieveResultInputDescriptorIdx(t){const r="$.input_descriptors[",n=t.indexOf(r),s=t.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(t){let r="";for(let n=0;n<t.length;n++)typeof t[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=t[n]+".";return r.substring(0,r.length-1)}createResultObject(t,r,n,s){return{input_descriptor_path:`$.input_descriptors[${t}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:Ce.INFO,message:nn.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}}class lde extends za{constructor(r){super(r);ge(this,"fieldIds");ge(this,"sameSubject");ge(this,"messages");this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Ce.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Ce.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Ce.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(r,n){const s=this.mapSameSubjectFieldIdsToInputDescriptors(r),i=this.mapCredentialsToResultObjecs(n,s),o=this.countSameSubjectOccurrences(s,i);this.generateErrorResults(o,i),this.updatePresentationSubmission(r)}mapSameSubjectFieldIdsToInputDescriptors(r){this.fieldIds.push(...Xt.nodes(r,"$..fields[*].id")),this.sameSubject.push(...Xt.nodes(r,"$..same_subject[*]"));const n=[];return this.fieldIds.forEach(s=>{const i=this.sameSubject.find(o=>o.value.field_id.includes(s.value));i&&n.push([s,i])}),n}generateErrorResults(r,n){r.forEach((s,i)=>{const o=n.filter(a=>i===a.payload.fieldIdSet).map(a=>a.payload.credentialSubject.id);(o.length!==s||new Set(o).size!==1)&&n.forEach((a,c,l)=>{a.payload.fieldIdSet===i&&(a.status=Ce.ERROR,a.message=this.messages.get(Ce.ERROR),l[c]=a)})}),this.client.results.push(...n)}countSameSubjectOccurrences(r,n){const s=new Map;return r.forEach(i=>{n.filter(a=>i[1].value.field_id===a.payload.fieldIdSet)&&(s.has(i[1].value.field_id)&&s.get(i[1].value.field_id)?s.set(i[1].value.field_id,s.get(i[1].value.field_id)+1):s.set(i[1].value.field_id,1))}),s}mapCredentialsToResultObjecs(r,n){const s=[...Xt.nodes(r.map(o=>o.credential),"$..credentialSubject")],i=[];return s.forEach(o=>{const a=n.find(c=>Xt.query(o.value,`$..${c[0].value}`).length!==0);a&&a[1].value.directive===ir.Optionality.Required?i.push({input_descriptor_path:Xt.stringify(a[0].path.slice(0,3)),status:Ce.INFO,evaluator:this.getName(),payload:{fieldIdSet:a[1].value.field_id,credentialSubject:o.value},message:this.messages.get(Ce.INFO),verifiable_credential_path:Xt.stringify(o.path.slice(0,2))}):a&&a[1].value.directive===ir.Optionality.Preferred&&i.push({input_descriptor_path:Xt.stringify(a[0].path.slice(0,3)),status:Ce.WARN,evaluator:this.getName(),payload:{fieldIdSet:a[1].value.field_id,credentialSubject:o.value},message:this.messages.get(Ce.WARN),verifiable_credential_path:Xt.stringify(o.path.slice(0,2))})}),i}}class dde extends za{constructor(t){super(t)}getName(){return"SubjectIsIssuerEvaluation"}handle(t,r){t.input_descriptors.forEach((n,s)=>{const i=n.constraints;(i==null?void 0:i.subject_is_issuer)===ir.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(t)}checkSubjectIsIssuer(t,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===t){const i=Zs.extractInputField(r.map(o=>o.credential),[s.path]);for(const o of i){const a=doe(o.value);o&&o.value&&loe(o.value).every(c=>c===a)?this.getResults().push(this.generateSuccessResult(n,s.path,th.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,th.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(t,r,n){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.ERROR,message:nn.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(t,r,n,s){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.INFO,message:s??nn.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}}let fde=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const $u=class $u extends za{constructor(t){super(t)}getName(){return"UriEvaluation"}handle(t,r){t.input_descriptors.forEach((s,i)=>{const o=t.getVersion()!==Po.v2?s.schema.map(a=>a.uri):[];r.forEach((a,c)=>{const l=$u.buildVcContextAndSchemaUris(a.credential,t.getVersion());this.evaluateUris(a,l,o,i,c,t.getVersion())})});const n=this.getResults().filter(s=>s.status===Ce.INFO).map(s=>{var o;return{id:Xt.nodes(t,s.input_descriptor_path)[0].value.id,format:(o=s.payload)==null?void 0:o.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:fde(),definition_id:t.id,descriptor_map:n})}evaluateUris(t,r,n,s,i,o){let a=!1;if(o===Po.v1){for(let c=0;c<n.length;c++)$u.containsHashlink(n[c])&&this.getResults().push(this.createWarnResultObject(s,i));for(let c=0;c<r.length;c++)n.find(l=>l===r[c])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(t,n,s,i)):this.getResults().push(this.createErrorResultObject(t,n,s,i))}static buildVcContextAndSchemaUris(t,r){const n=[];return Array.isArray(t["@context"])?t["@context"].forEach(s=>n.push(s)):n.push(t["@context"]),Array.isArray(t.credentialSchema)&&t.credentialSchema.length>0?t.credentialSchema.forEach(s=>n.push(s.id)):t.credentialSchema&&n.push(t.credentialSchema.id),r===Po.v1&&(Array.isArray(t.type)?t.type.forEach(s=>n.push(s)):t.type&&n.push(t.type)),n}createSuccessResultObject(t,r,n,s){const i=this.createResult(n,s);return i.status=Ce.INFO,i.message=nn.URI_EVALUATION_PASSED,i.payload={format:t.format,vcContext:t.credential["@context"],vcCredentialSchema:t.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(t,r,n,s){const i=this.createResult(n,s);return i.status=Ce.ERROR,i.message=nn.URI_EVALUATION_DIDNT_PASS,i.payload={format:t.format,vcContext:t.credential["@context"],vcCredentialSchema:t.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(t,r){const n=this.createResult(t,r);return n.status=Ce.WARN,n.message=nn.URI_EVALUATION_DIDNT_PASS,n.payload=nn.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(t,r){return{input_descriptor_path:`$.input_descriptors[${t}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Ce.INFO,message:void 0}}static containsHashlink(t){return!(this.matchAll(t,$u.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(t,$u.HASHLINK_URL_ENCODED_REGEX).next().done)}};ge($u,"matchAll",require("string.prototype.matchall")),ge($u,"HASHLINK_URL_ENCODED_REGEX",/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g),ge($u,"HASHLINK_QUERY_URL_REGEX",/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g);let B2=$u;class pde extends za{constructor(t){super(t)}getName(){return"FormatRestrictionEvaluation"}handle(t,r){t.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(t)}generateErrorResult(t,r,n){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.ERROR,message:nn.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(t,r,n,s){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.INFO,message:s??nn.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}}class hde extends za{constructor(t){super(t)}getName(){return"DIDRestrictionEvaluation"}handle(t,r){t.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{const a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||foe(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(t)}generateErrorResult(t,r,n){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.ERROR,message:nn.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(t,r,n,s){return{input_descriptor_path:`$.input_descriptors[${t}]`,evaluator:this.getName(),status:Ce.INFO,message:s??nn.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}}const aT=[th.IProofType.BbsBlsSignatureProof2020];class yde{constructor(){ge(this,"failed_catched",{tag:"root",status:Ce.ERROR,message:nn.UNKNOWN_EXCEPTION,stacktrace:""});ge(this,"_results");ge(this,"_wrappedVcs");ge(this,"_presentationSubmission");ge(this,"_dids");ge(this,"_limitDisclosureSignatureSuites");ge(this,"_restrictToFormats");ge(this,"_restrictToDIDMethods");ge(this,"_generatePresentationSubmission");this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=aT,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(t,r,n){this._restrictToDIDMethods=n!=null&&n.restrictToDIDMethods?Yw(n==null?void 0:n.restrictToDIDMethods):[],this._dids=n!=null&&n.holderDIDs?poe(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n==null?void 0:n.limitDisclosureSignatureSuites,this._restrictToFormats=n==null?void 0:n.restrictToFormats,this._generatePresentationSubmission=(n==null?void 0:n.generatePresentationSubmission)!==void 0?n.generatePresentationSubmission:!0,n!=null&&n.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s==null||s.handle(t,r);s!=null&&s.hasNext();){s=s.getNext();try{s==null||s.handle(t,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(t){this._dids=t}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(t){this._generatePresentationSubmission=t}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(t){this._presentationSubmission=t}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(t){this._wrappedVcs=t}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||aT}set limitDisclosureSignatureSuites(t){this._limitDisclosureSignatureSuites=t}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(t){this._restrictToDIDMethods=Yw(t)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(t){this._restrictToFormats=t}initEvaluationHandlers(){const t=new B2(this);return t.setNext(new hde(this)).setNext(new pde(this)).setNext(new sde(this)).setNext(new cde(this)).setNext(new ade(this)).setNext(new dde(this)).setNext(new ode(this)).setNext(new lde(this)).setNext(new ude(this)),t}}class wy{constructor(){ge(this,"_client");this._client=new yde}getEvaluationClient(){return this._client}selectFrom(t,r,n){var a;let s;this._client.evaluate(t,r,n);const i=[...this.formatNotInfo(Ce.WARN)],o=[...this.formatNotInfo(Ce.ERROR)];if(t.submission_requirements){const c=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Ce.ERROR),l=Array.from(new Set(c));let u;try{u=this.matchSubmissionRequirements(t,t.submission_requirements,l)}catch(p){const y={status:Ce.ERROR,message:JSON.stringify(p),tag:"matchSubmissionRequirements"};return{errors:o?[...o,y]:[y],warnings:i,areRequiredCredentialsPresent:Ce.ERROR}}const h=this.extractMatches(u).map(p=>Xt.nodes(this._client.wrappedVcs.map(y=>y.original),p)[0].value),f=this.determineAreRequiredCredentialsPresent(t,u);s={errors:f===Ce.INFO?[]:o,matches:[...u],areRequiredCredentialsPresent:f,verifiableCredential:h,warnings:i}}else{const c=this._client.results.filter(u=>u.evaluator==="MarkForSubmissionEvaluation"&&u.status!==Ce.ERROR);if(this.checkWithoutSubmissionRequirements(c,t).length)return{errors:o,matches:[],areRequiredCredentialsPresent:Ce.ERROR,verifiableCredential:r.map(u=>u.original),warnings:i};{const u=this.matchWithoutSubmissionRequirements(c,t),h=this.extractMatches(u).map(f=>Xt.nodes(this._client.wrappedVcs.map(p=>p.original),f)[0].value);s={errors:[],matches:[...u],areRequiredCredentialsPresent:Ce.INFO,verifiableCredential:h,warnings:i}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(s,r),s.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(t,s==null?void 0:s.matches),this.remapMatches(r.map(c=>c.original),s.matches,s==null?void 0:s.verifiableCredential),(a=s.matches)==null||a.forEach(c=>{this.updateSubmissionRequirementMatchPathToAlias(c,"verifiableCredential")}),s.areRequiredCredentialsPresent===Ce.INFO?s.errors=[]:(s.errors=o,s.warnings=i,s.verifiableCredential=r.map(c=>c.original)),s}remapMatches(t,r,n){r==null||r.forEach(s=>{s.from_nested?this.remapMatches(t,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{const c=Xt.query(t,i)[0],l=n==null?void 0:n.findIndex(u=>JSON.stringify(u)===JSON.stringify(c));if(l===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${c}`);a[o]=`$[${l}]`}),s.name)})}extractMatches(t){const r=[];return t.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(t,r){const n=[];if(!r.input_descriptors)return[];if(!t.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ce.ERROR,payload:"Not all the InputDescriptors are addressed"}];const s=r.input_descriptors,i=ns.getDistinctFieldInObject(t,"input_descriptor_path");if(i.length!==s.length){const o=i.map(a=>Zs.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ce.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(t,r,n){const s=[];for(const i of r){const o={name:t.name||t.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){const a=this.mapMatchingDescriptors(t,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(t,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(t,r){const n=[],s=this.createIdToVcMap(t);for(const[i,o]of s.entries())if(!(!o||!o.length))for(const a of o){const c=Zs.extractInputField(r,[i]);c.length&&n.push({name:c[0].value.name||c[0].value.id,rule:ir.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(t,r,n){var i;const s={rule:r.rule,vc_path:[]};if(r!=null&&r.from){s.from=r.from;for(const o of n){const a=Xt.query(t,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(s.name=a.name||a.id,o.payload.group.includes(r.from)&&((i=s.vc_path)==null?void 0:i.indexOf(o.verifiable_credential_path))===-1&&s.vc_path.push(o.verifiable_credential_path))}}return s}evaluate(t,r,n){var i,o,a,c;this._client.evaluate(t,r,n);const s={areRequiredCredentialsPresent:Ce.INFO,verifiableCredential:r.map(l=>l.original)};if(s.warnings=this.formatNotInfo(Ce.WARN),s.errors=this.formatNotInfo(Ce.ERROR),this._client.assertPresentationSubmission(),(i=this._client.presentationSubmission)!=null&&i.descriptor_map.length){const l=(o=this._client.presentationSubmission)==null?void 0:o.descriptor_map.length;for(let u=0;u<l;u++)this._client.presentationSubmission.descriptor_map[u]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[u]);this._client.presentationSubmission.descriptor_map.splice(0,l),s.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",s.value),s.verifiableCredential=this._client.wrappedVcs.map(l=>l.original),s.areRequiredCredentialsPresent=(c=(a=s.value)==null?void 0:a.descriptor_map)!=null&&c.length?Ce.INFO:Ce.ERROR,s}formatNotInfo(t){return this._client.results.filter(r=>r.status===t).map(r=>{const n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(t,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(t.submission_requirements){const i=this._client.results.filter(d=>d.evaluator==="MarkForSubmissionEvaluation"&&d.payload.group&&d.status!==Ce.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),c=new Map;"input_descriptors"in t&&t.input_descriptors.forEach(d=>{d.group&&d.group.forEach(h=>{c.has(h)?c.set(h,c.get(h)+1):c.set(h,1)})});const l=this.evaluateRequirements(t.submission_requirements,o,c,0),u=a.filter(d=>l[1].find(h=>h.verifiable_credential_path===d[1]));return this.updatePresentationSubmission(u),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}const n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==Ce.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(t){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>t.find(n=>n[0]===r.path)).map(r=>{const n=t.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(t,r){const n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((c,l)=>{c[1]===o[1]&&i.push([`$[${l}]`,`$[${a}]`])})}),t=t.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{const a=i.find(c=>c[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[t,i]}evaluateRequirements(t,r,n,s){let i=0;const o=[];for(const a of t)if(a.from){if(a.rule===ir.Rules.All){const[c,l]=this.countMatchingInputDescriptors(a,r);if(c!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...l)}else if(a.rule===ir.Rules.Pick){const[c,l]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,c,s),i++}catch(u){if(s===0)throw u}o.push(...l)}}else if(a.from_nested){const[c,l]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=c,o.push(...l),this.handleCount(a,c,s)}return[i,o]}countMatchingInputDescriptors(t,r){let n=0;const s=[];for(const i of r)i.payload.group.includes(t.from)&&(s.push(i),n++);return[n,s]}handleCount(t,r,n){if(t.count&&r!==t.count)throw Error(`Count: expected: ${t.count} actual: ${r} at level: ${n}`);if(t.min&&r<t.min)throw Error(`Min: expected: ${t.min} actual: ${r} at level: ${n}`);if(t.max&&r>t.max)throw Error(`Max: expected: ${t.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(t){return t.filter((r,n)=>{const s=JSON.stringify(r);return n===t.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(t,r){var n;t&&((n=t.verifiableCredential)==null||n.forEach(s=>{var o;const i=ns.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(i===-1)throw new Error("index is not right");(o=t.vcIndexes)==null||o.push(i)}))}determineAreRequiredCredentialsPresent(t,r,n){if(!r||!r.length)return Ce.ERROR;const s=r.map(i=>this.determineSubmissionRequirementStatus(t,i));if(n){if(n.rule===ir.Rules.All&&s.includes(Ce.ERROR))return Ce.ERROR;const i=s.filter(o=>o!==Ce.ERROR).length;if(n.count)return n.count>i?Ce.ERROR:n.count<i?Ce.WARN:Ce.INFO;if(n.min&&n.min>i)return Ce.ERROR;if(n.max&&n.max<i)return Ce.WARN}else return s.includes(Ce.ERROR)?Ce.ERROR:s.includes(Ce.WARN)?Ce.WARN:Ce.INFO;return Ce.INFO}determineSubmissionRequirementStatus(t,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Ce.ERROR;if(r.from){const n=this.countGroupIDs(t.input_descriptors,r.from);switch(r.rule){case ir.Rules.All:return r.vc_path.length===n?Ce.INFO:Ce.WARN;case ir.Rules.Pick:return this.getPickRuleStatus(r);default:return Ce.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(t,r.from_nested,r);return Ce.INFO}getPickRuleStatus(t){return t.vc_path.length===0?Ce.ERROR:t.count&&t.vc_path.length!==t.count?t.vc_path.length>t.count?Ce.WARN:Ce.ERROR:t.min&&t.vc_path.length<t.min?Ce.ERROR:t.max&&t.vc_path.length>t.max?Ce.WARN:Ce.INFO}updateSubmissionRequirementMatchPathToAlias(t,r){const n=[];t.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),t.vc_path=n,t.from_nested&&t.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(t,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,t)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,t)})}replacePathWithAlias(t,r){t.path=t.path.replace("$","$."+r),t.path_nested&&this.replacePathWithAlias(t.path_nested,r)}createIdToVcMap(t){const r=new Map,n=new Map;for(let s=0;s<t.length;s++){const i=t[s].input_descriptor_path;if(n.has(i)){const o=n.get(i);o&&o.push(t[s])}else n.set(i,[t[s]])}for(const[s,i]of n.entries()){const o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(t,r){let n=0;for(const s of t)s.group&&s.group.includes(r)&&n++;return n}}var vm;(function(e){e[e.EXTERNAL=0]="EXTERNAL",e[e.PRESENTATION=1]="PRESENTATION"})(vm||(vm={}));var uT;(function(e){e.Jwk="Jwk",e.Base58="Base58",e.Hex="Hex",e.Multibase="Multibase"})(uT||(uT={}));var I$={exports:{}};I$.exports=B$;I$.exports.default=B$;const Qr={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},mde=Object.prototype.hasOwnProperty,EE={type:["number","string"]};function un(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(typeof e!="number"&&typeof e!="string"){const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:EE.type},message:"must be number,string",schema:EE.type,parentSchema:EE,data:e};i===null?i=[a]:i.push(a),o++}return un.errors=i,o===0}function ow(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.type===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Qr.required,parentSchema:Qr,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!mde.call(Qr.properties,a)){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Qr,data:e};i===null?i=[c]:i.push(c),o++}if(e.const!==void 0&&(un(e.const,{instancePath:t+"/const",parentData:e,parentDataProperty:"const",rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)),e.enum!==void 0){let a=e.enum;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++)un(a[l],{instancePath:t+"/enum/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)}else{const c={instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Qr.properties.enum.type,parentSchema:Qr.properties.enum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.exclusiveMaximum!==void 0&&(un(e.exclusiveMaximum,{instancePath:t+"/exclusiveMaximum",parentData:e,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)),e.exclusiveMinimum!==void 0&&(un(e.exclusiveMinimum,{instancePath:t+"/exclusiveMinimum",parentData:e,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)),e.format!==void 0){let a=e.format;if(typeof a!="string"){const c={instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qr.properties.format.type,parentSchema:Qr.properties.format,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maxLength!==void 0){let a=e.maxLength;if(typeof a!="number"){const c={instancePath:t+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Qr.properties.maxLength.type,parentSchema:Qr.properties.maxLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maximum!==void 0&&(un(e.maximum,{instancePath:t+"/maximum",parentData:e,parentDataProperty:"maximum",rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)),e.minLength!==void 0){let a=e.minLength;if(typeof a!="number"){const c={instancePath:t+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Qr.properties.minLength.type,parentSchema:Qr.properties.minLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.minimum!==void 0&&(un(e.minimum,{instancePath:t+"/minimum",parentData:e,parentDataProperty:"minimum",rootData:s})||(i=i===null?un.errors:i.concat(un.errors),o=i.length)),e.not!==void 0){let a=e.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){const c={instancePath:t+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qr.properties.not.type,parentSchema:Qr.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}if(e.pattern!==void 0){let a=e.pattern;if(typeof a!="string"){const c={instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qr.properties.pattern.type,parentSchema:Qr.properties.pattern,data:a};i===null?i=[c]:i.push(c),o++}}if(e.type!==void 0){let a=e.type;if(typeof a!="string"){const c={instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qr.properties.type.type,parentSchema:Qr.properties.type,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qr.type,parentSchema:Qr,data:e};i===null?i=[a]:i.push(a),o++}return ow.errors=i,o===0}function B$(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;return ow(e,{instancePath:t,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?ow.errors:i.concat(ow.errors),o=i.length),B$.errors=i,o===0}var gde=I$.exports;const vde=La(gde);var F$={exports:{}};F$.exports=N$;F$.exports.default=N$;const ur={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},wde=Object.prototype.hasOwnProperty,AE={type:["number","string"]};function cn(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(typeof e!="number"&&typeof e!="string"){const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:AE.type},message:"must be number,string",schema:AE.type,parentSchema:AE,data:e};i===null?i=[a]:i.push(a),o++}return cn.errors=i,o===0}function aw(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.type===void 0){const a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:ur.required,parentSchema:ur,data:e};i===null?i=[a]:i.push(a),o++}for(const a in e)if(!wde.call(ur.properties,a)){const c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ur,data:e};i===null?i=[c]:i.push(c),o++}if(e.const!==void 0&&(cn(e.const,{instancePath:t+"/const",parentData:e,parentDataProperty:"const",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)),e.enum!==void 0){let a=e.enum;if(Array.isArray(a)){const c=a.length;for(let l=0;l<c;l++)cn(a[l],{instancePath:t+"/enum/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)}else{const c={instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ur.properties.enum.type,parentSchema:ur.properties.enum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.exclusiveMaximum!==void 0&&(cn(e.exclusiveMaximum,{instancePath:t+"/exclusiveMaximum",parentData:e,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)),e.exclusiveMinimum!==void 0&&(cn(e.exclusiveMinimum,{instancePath:t+"/exclusiveMinimum",parentData:e,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)),e.format!==void 0){let a=e.format;if(typeof a!="string"){const c={instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.format.type,parentSchema:ur.properties.format,data:a};i===null?i=[c]:i.push(c),o++}}if(e.formatExclusiveMaximum!==void 0){let a=e.formatExclusiveMaximum;if(typeof a!="string"){const c={instancePath:t+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.formatExclusiveMaximum.type,parentSchema:ur.properties.formatExclusiveMaximum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.formatExclusiveMinimum!==void 0){let a=e.formatExclusiveMinimum;if(typeof a!="string"){const c={instancePath:t+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.formatExclusiveMinimum.type,parentSchema:ur.properties.formatExclusiveMinimum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.formatMaximum!==void 0){let a=e.formatMaximum;if(typeof a!="string"){const c={instancePath:t+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.formatMaximum.type,parentSchema:ur.properties.formatMaximum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.formatMinimum!==void 0){let a=e.formatMinimum;if(typeof a!="string"){const c={instancePath:t+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.formatMinimum.type,parentSchema:ur.properties.formatMinimum,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maxLength!==void 0){let a=e.maxLength;if(typeof a!="number"){const c={instancePath:t+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ur.properties.maxLength.type,parentSchema:ur.properties.maxLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.maximum!==void 0&&(cn(e.maximum,{instancePath:t+"/maximum",parentData:e,parentDataProperty:"maximum",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)),e.minLength!==void 0){let a=e.minLength;if(typeof a!="number"){const c={instancePath:t+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ur.properties.minLength.type,parentSchema:ur.properties.minLength,data:a};i===null?i=[c]:i.push(c),o++}}if(e.minimum!==void 0&&(cn(e.minimum,{instancePath:t+"/minimum",parentData:e,parentDataProperty:"minimum",rootData:s})||(i=i===null?cn.errors:i.concat(cn.errors),o=i.length)),e.not!==void 0){let a=e.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){const c={instancePath:t+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ur.properties.not.type,parentSchema:ur.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}if(e.pattern!==void 0){let a=e.pattern;if(typeof a!="string"){const c={instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.pattern.type,parentSchema:ur.properties.pattern,data:a};i===null?i=[c]:i.push(c),o++}}if(e.type!==void 0){let a=e.type;if(typeof a!="string"){const c={instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ur.properties.type.type,parentSchema:ur.properties.type,data:a};i===null?i=[c]:i.push(c),o++}}}else{const a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ur.type,parentSchema:ur,data:e};i===null?i=[a]:i.push(a),o++}return aw.errors=i,o===0}function N$(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;return aw(e,{instancePath:t,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?aw.errors:i.concat(aw.errors),o=i.length),N$.errors=i,o===0}var bde=F$.exports;const _de=La(bde);class ac{constructor(t,r){ge(this,"parentTag");ge(this,"myTag");this.parentTag=t,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(t){return new Jw(this.getTag(),Ce.ERROR,t)}}class ib extends ac{constructor(r){super(r,"fields");ge(this,"mustHaveValidJsonPathsMsg",'field object "path" property must contain array of valid json paths');ge(this,"pathObjMustHaveValidJsonPathMsg",'field object "path" property must contain valid json paths.');ge(this,"filterMustBeValidJsonSchemaMsg",'field object "filter" property must be valid json schema');ge(this,"filterIsMustInPresenceOfPredicateMsg",'field object must have a "filter" property if "predicate" is present');ge(this,"filterIsNotValidJsonSchemaDescriptorMsg",'could not parse "filter" object as a valid json schema descriptor.');ge(this,"purposeShouldBeANonEmptyStringMsg","purpose should be a non empty string");ge(this,"shouldBeKnownOptionMsg","Unknown predicate property")}getValidations(r){let n=[];if(r)for(let s=0;s<r.length;s++)n=[...n,...this.getValidationsFor(r[s],s)];return n}getValidationsFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(n),target:r,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(n),target:r,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ib.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ib.shouldBeKnownOption(s==null?void 0:s.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}mustHaveValidJsonPaths(){return r=>r.path!=null&&r.path.length>0&&this._validateJsonPaths(r.path)}_validateJsonPaths(r){const n=[];if(r.forEach(s=>{try{Xt.parse(s)}catch{n.push(s)}}),n.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(n));return!0}filterMustBeValidJsonSchema(){return r=>this._validateFilter(r.filter)}_validateFilter(r){if(r==null)return!0;let n=!1;try{n=_de(r),n||(n=vde(r))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(r))}return n}filterIsMustInPresenceOfPredicate(){return r=>!(r.predicate!=null&&r.filter==null)}static optionalNonEmptyString(r){return r==null||r.length>0}static shouldBeKnownOption(r){return r==null||r==ir.Optionality.Required||r==ir.Optionality.Preferred}}class dl extends ac{constructor(r){super(r,"constraints");ge(this,"disclosureLimitShouldHaveKnownValueMsg","limit_disclosure should have known value");ge(this,"statusShouldHaveKnownValueMsg","Unknown status property");ge(this,"statusDirectiveShouldHaveKnownValueMsg","status directive should have known value");ge(this,"subjectIsIssuerShouldBeKnownValueMsg","subject_is_issuer should be known value");ge(this,"fieldIdIsMandatoryMsg","field_id property is mandatory");ge(this,"fieldIdMustBeArrayOfStringsMsg","field_id property must be an array of strings");ge(this,"fieldIdMustCorrespondToFieldIdMsg","field_id must correspond to a present field object id property");ge(this,"directivePropertyIsMandatoryMsg","directive property is mandatory");ge(this,"oneOfTheKnownDirectivePropertiesMandatoryMsg","directive property must be one of [required, preferred]")}getValidations(r){let n=[];return r&&(n=[{tag:this.getTag(),target:r,predicate:s=>dl.disclosureLimitShouldHaveKnownValue(s.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>dl.statusShouldHaveKnownValue(s.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:dl.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>dl.shouldBeKnownOption(s.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>this.fieldIdInSubjectMustCorrespondToFieldId(s,s.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:r,predicate:s=>this.fieldIdInSubjectMustCorrespondToFieldId(s,s.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(r==null?void 0:r.is_holder),...this.getSubjectsValidations(r==null?void 0:r.same_subject),...this.getFieldsValidations(r)]),n}getFieldsValidations(r){var n;return(n=r==null?void 0:r.fields)!=null&&n.length?new ib(this.getTag()).getValidations(r.fields):[]}static disclosureLimitShouldHaveKnownValue(r){return!r||r===ir.Optionality.Preferred||r===ir.Optionality.Required}static statusShouldHaveKnownValue(r){return r==null||r.active!=null||r.revoked!=null||r.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return r=>{var n,s,i;return this.pdStatusShouldBeKnown((n=r==null?void 0:r.statuses)==null?void 0:n.active)&&this.pdStatusShouldBeKnown((s=r==null?void 0:r.statuses)==null?void 0:s.revoked)&&this.pdStatusShouldBeKnown((i=r==null?void 0:r.statuses)==null?void 0:i.suspended)}}static pdStatusShouldBeKnown(r){return!r||r.directive===ir.Directives.Allowed||r.directive===ir.Directives.Disallowed||r.directive===ir.Directives.Required}static shouldBeKnownOption(r){return r?r.filter(n=>n.directive!==ir.Optionality.Preferred&&n.directive!==ir.Optionality.Required).length===0:!0}getSubjectsValidations(r){if(r){let n=[];for(let s=0;s<r.length;s++)n=[{tag:this.getMyTag(s),target:r[s],predicate:i=>Array.isArray(i.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>!!i.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.field_id.length===i.field_id.filter(o=>typeof o=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.directive===ir.Optionality.Preferred||i.directive===ir.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return n}return[]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}fieldIdInSubjectMustCorrespondToFieldId(r,n){if(n){for(const s of n)for(const i of s.field_id)if(!dl.isValidFieldId(r,i))return!1}return!0}static isValidFieldId(r,n){return r!=null&&r.fields?r.fields.map(s=>s.id).includes(n):!1}}class cT extends ac{constructor(r){super(r,"input_descriptor");ge(this,"idMustBeNonEmptyStringMsg","input descriptor id must be non-empty string");ge(this,"nameShouldBeNonEmptyStringMsg","input descriptor name should be non-empty string");ge(this,"purposeShouldBeNonEmptyStringMsg","input descriptor purpose should be non-empty string");ge(this,"shouldHaveValidSchemaURIMsg","schema should have valid URI")}getValidations(r){let n=[];return n.push({tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueIds(s),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueFieldsIds(s),message:"fields id must be unique"}),r.forEach((s,i)=>{n=[...n,...this.getValidationFor(s,i),...this.constraintsValidations(s,i)]}),n}getValidationFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:s=>ll.nonEmptyString(s==null?void 0:s.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ll.optionalNonEmptyString(s==null?void 0:s.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ll.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(r){const n=[],s=new Set,i=[];return r.map(o=>{var a;return(a=o.constraints)==null?void 0:a.fields}).forEach(o=>{o&&i.push(...o)}),i.forEach(o=>{o.id&&n.push(o.id)}),n.forEach(o=>s.add(o)),n.length===s.size}shouldHaveUniqueIds(r){const n=[],s=new Set;return r.forEach(i=>n.push(i.id)),n.forEach(i=>s.add(i)),n.length===s.size}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}isValidSchema(){return r=>r.schema.filter(n=>this.isAValidURI(n.uri)&&(n.required==null||typeof n.required=="boolean")).length>0}isAValidURI(r){if(r){if(!ll.nonEmptyString(r))return!1}else return!1;if(r.startsWith("http://")||r.startsWith("https://"))try{new URL(r)}catch{return ll.isValidDIDURI(r)}return!0}constraintsValidations(r,n){return r.constraints?new dl(this.getMyTag(n)).getValidations(r.constraints):[]}}class lT extends ac{constructor(r){super(r,"input_descriptor");ge(this,"idMustBeNonEmptyStringMsg","input descriptor id must be non-empty string");ge(this,"nameShouldBeNonEmptyStringMsg","input descriptor name should be non-empty string");ge(this,"purposeShouldBeNonEmptyStringMsg","input descriptor purpose should be non-empty string")}getValidations(r){let n=[];return n.push({tag:this.getTag(),target:r,predicate:s=>this.shouldNotHaveSchema(s),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueIds(s),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueFieldsIds(s),message:"fields id must be unique"}),r.forEach((s,i)=>{n=[...n,...this.getValidationFor(s,i),...this.constraintsValidations(s,i)]}),n}getValidationFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:s=>ll.nonEmptyString(s==null?void 0:s.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ll.optionalNonEmptyString(s==null?void 0:s.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>ll.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(r){const n=[],s=new Set,i=[];return r.map(o=>{var a;return(a=o.constraints)==null?void 0:a.fields}).forEach(o=>{o&&i.push(...o)}),i.forEach(o=>{o.id&&n.push(o.id)}),n.forEach(o=>s.add(o)),n.length===s.size}shouldHaveUniqueIds(r){const n=[],s=new Set;return r.forEach(i=>n.push(i.id)),n.forEach(i=>s.add(i)),n.length===s.size}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}constraintsValidations(r,n){return r.constraints?new dl(this.getMyTag(n)).getValidations(r.constraints):[]}shouldNotHaveSchema(r){let n=!1;return r.forEach(s=>{s.schema&&(n=!0)}),!n}}class X4{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}}class Z4{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}}class fl extends ac{constructor(r){super(r,"submission_requirements");ge(this,"ruleIsMandatoryMsg","rule is a mandatory field");ge(this,"needsOneFromOrFromNestedMsg","needs exactly one of from or from_nested");ge(this,"fromNestedShouldBeArrayMsg","The value of the from_nested property MUST be an array");ge(this,"isCountPositiveIntMsg","count must be a practical positive number");ge(this,"isMinPositiveIntMsg","min must be a practical positive number");ge(this,"isMaxPositiveIntMsg","max must be a practical positive number");ge(this,"ruleShouldBePickOrAllMsg","rule should be either pick or all")}getValidations(r){let n=[];if(r!=null&&r.length>0)for(let s=0;s<r.length;s++)n=[...n,...this.getMyValidations(s,r),...this.getSubValidations(s,r)];return n}getMyValidations(r,n){return[{tag:this.getMyTag(r),target:n[r],predicate:fl.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(r),target:n[r],predicate:fl.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(r),target:n[r],predicate:fl.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:fl.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}getSubValidations(r,n){const s=n[r].from_nested;return s!=null?new fl(this.getFromNestedTag(r)).getValidations(s):[]}getFromNestedTag(r){return this.getMyTag(r)+".from_nested"}isCountPositiveInt(r){return r.rule!=="pick"||r.count==null||0<r.count}isMinPositiveInt(r){return r.rule!=="pick"||r.min==null||0<=r.min}isMaxPositiveInt(r){return r.rule!=="pick"||r.max==null||0<r.max}static ruleIsMandatory(r){return r.rule!=null}static needsOneFromOrFromNested(r){return r.from==null!=(r.from_nested==null)}static fromNestedShouldBeArray(r){return r.from_nested==null||Array.isArray(r.from_nested)}static ruleShouldBePickOrAll(r){return r.rule==="pick"||r.rule==="all"}}class Ts extends ac{constructor(t){super(t,"presentation_definition")}getValidations(t){return t.submission_requirements?[...this.myValidations(t),...new cT(this.myTag).getValidations(t.input_descriptors),...new fl(this.myTag).getValidations(t.submission_requirements)]:[...this.myValidations(t),...new cT(this.myTag).getValidations(t.input_descriptors)]}myValidations(t){return[{tag:this.getTag(),target:t,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:t,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:t,predicate:r=>Ts.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:t,predicate:r=>Ts.optionalNonEmptyString(r==null?void 0:r.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:t,predicate:r=>Ts.optionalNonEmptyString(r==null?void 0:r.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:t,predicate:r=>Ts.formatValuesShouldNotBeEmpty(r==null?void 0:r.format),message:"formats values should not empty"},{tag:this.getTag(),target:t,predicate:r=>Ts.formatValuesShouldBeAmongKnownValues(r==null?void 0:r.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:t,predicate:r=>Ts.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:t,predicate:r=>Ts.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(t){return t==null||t.length>0}static nonEmptyString(t){return t!=null&&t.length>0}static formatValuesShouldNotBeEmpty(t){var n,s,i,o,a,c;let r=!0;return(t==null?void 0:t.jwt)!=null&&(r=r&&((n=t.jwt.alg)==null?void 0:n.length)>0),(t==null?void 0:t.jwt_vc)!=null&&(r=r&&((s=t.jwt_vc.alg)==null?void 0:s.length)>0),(t==null?void 0:t.jwt_vp)!=null&&(r=r&&((i=t.jwt_vp.alg)==null?void 0:i.length)>0),(t==null?void 0:t.ldp)!=null&&(r=r&&((o=t.ldp.proof_type)==null?void 0:o.length)>0),(t==null?void 0:t.ldp_vc)!=null&&(r=r&&((a=t.ldp_vc.proof_type)==null?void 0:a.length)>0),(t==null?void 0:t.ldp_vp)!=null&&(r=r&&((c=t.ldp_vp.proof_type)==null?void 0:c.length)>0),r}static formatValuesShouldBeAmongKnownValues(t){let r=[];if(t){const n=X4.getJwtAlgos(),s=Z4.getLdpTypes();r=[];for(const[i,o]of Object.entries(t))i.startsWith("jwt")?r.push(...Ts.isJWTAlgoKnown(o,n)):r.push(...Ts.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(t,r){const n=[];if(t!=null&&t.alg!=null)for(const s of t.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(t,r){const n=[];if(t!=null&&t.proof_type!=null)for(const s of t.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(t){if(t.submission_requirements!=null&&t.submission_requirements.length>0){const r=[];t.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});const n=new Set(r),s=[];Ts.flatten(t.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});const i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(t){return t==null?void 0:t.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return t=>cR({presentation_definition:t})}static shouldNotHaveFrameProperty(t){return!t.frame}}class R$ extends ac{constructor(r){super(r,"frame");ge(this,"frameIsValidMsg","frame value is not valid")}getValidations(r){let n=[];return n=[...n,...this.getMyValidations(r)],n}getMyValidations(r){return[{tag:this.getMyTag(),target:r,predicate:R$.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(r){if(!r||Array.isArray(r)||typeof r!="object")return!1;const n=r;if(n&&n["@id"]){for(const s of ns.asArray(r["@id"]))if(!(ns.isObject(s)||ns.isUrlAbsolute(s))||ns.isString(s)&&s.indexOf("_:")===0)return!1}if(n["@types"]){for(const s of ns.asArray(r["@types"]))if(!(ns.isObject(s)||ns.isUrlAbsolute(s))||ns.isString(s)&&s.indexOf("_:")===0)return!1}return!0}}class mo extends ac{constructor(t){super(t,"presentation_definition")}getValidations(t){let r=[];return t.submission_requirements?r=[...this.myValidations(t),...new lT(this.myTag).getValidations(t.input_descriptors),...new fl(this.myTag).getValidations(t.submission_requirements)]:r=[...this.myValidations(t),...new lT(this.myTag).getValidations(t.input_descriptors)],t.frame&&r.push(...new R$(this.myTag).getValidations(t.frame)),r}myValidations(t){return[{tag:this.getTag(),target:t,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:t,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:t,predicate:r=>mo.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:t,predicate:r=>mo.optionalNonEmptyString(r==null?void 0:r.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:t,predicate:r=>mo.optionalNonEmptyString(r==null?void 0:r.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:t,predicate:r=>mo.formatValuesShouldNotBeEmpty(r==null?void 0:r.format),message:"formats values should not empty"},{tag:this.getTag(),target:t,predicate:r=>mo.formatValuesShouldBeAmongKnownValues(r==null?void 0:r.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:t,predicate:r=>mo.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(t){return t==null||t.length>0}static nonEmptyString(t){return t!=null&&t.length>0}static formatValuesShouldNotBeEmpty(t){var n,s,i,o,a,c;let r=!0;return(t==null?void 0:t.jwt)!=null&&(r=r&&((n=t.jwt.alg)==null?void 0:n.length)>0),(t==null?void 0:t.jwt_vc)!=null&&(r=r&&((s=t.jwt_vc.alg)==null?void 0:s.length)>0),(t==null?void 0:t.jwt_vp)!=null&&(r=r&&((i=t.jwt_vp.alg)==null?void 0:i.length)>0),(t==null?void 0:t.ldp)!=null&&(r=r&&((o=t.ldp.proof_type)==null?void 0:o.length)>0),(t==null?void 0:t.ldp_vc)!=null&&(r=r&&((a=t.ldp_vc.proof_type)==null?void 0:a.length)>0),(t==null?void 0:t.ldp_vp)!=null&&(r=r&&((c=t.ldp_vp.proof_type)==null?void 0:c.length)>0),r}static formatValuesShouldBeAmongKnownValues(t){let r=[];if(t){const n=X4.getJwtAlgos(),s=Z4.getLdpTypes();r=[];for(const[i,o]of Object.entries(t))i.startsWith("jwt")?r.push(...mo.isJWTAlgoKnown(o,n)):r.push(...mo.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(t,r){const n=[];if(t!=null&&t.alg!=null)for(const s of t.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(t,r){const n=[];if(t!=null&&t.proof_type!=null)for(const s of t.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(t){if(t.submission_requirements!=null&&t.submission_requirements.length>0){const r=[];t.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});const n=new Set(r),s=[];mo.flatten(t.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});const i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(t){return t==null?void 0:t.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return t=>dR({presentation_definition:t})}}class Bi extends ac{constructor(t){super(t,"presentation_submission")}getValidations(t){return[{tag:this.getTag(),target:t,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:t,predicate:r=>Bi.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:t,predicate:r=>Bi.nonEmptyString(r==null?void 0:r.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:t,predicate:r=>Bi.descriptorMapMustBePresent(r==null?void 0:r.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:t,predicate:r=>Bi.idMustBeSameForEachLevelOfNesting(r==null?void 0:r.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:t,predicate:r=>Bi.formatsShouldBeKnown(r==null?void 0:r.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:t,predicate:r=>Bi.pathsShouldBeValidJsonPaths(r==null?void 0:r.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(t){return t!=null&&t.length>0}static descriptorMapMustBePresent(t){return t!=null&&t.length>0}static idMustBeSameForEachLevelOfNesting(t){let r=!0;if(t!=null)for(let n=0;n<t.length;n++)r=r&&Bi.isIdSameForEachLevelOfNesting(t[n],t[n].id);return r}static isIdSameForEachLevelOfNesting(t,r){let n=!0;return t!=null&&t.path_nested!=null&&(t.path_nested.id==r?n=n&&Bi.isIdSameForEachLevelOfNesting(t.path_nested,r):n=!1),n}static formatsShouldBeKnown(t){let r=!0;if(t!=null){const n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<t.length;s++)r=Bi.formatShouldBeKnown(t[s],n)}return r}static formatShouldBeKnown(t,r){let n=!0;return t!=null&&(n=r.includes(t.format)),t.path_nested!=null&&(n=n&&Bi.formatShouldBeKnown(t.path_nested,r)),n}static pathsShouldBeValidJsonPaths(t){let r=!0;if(t!=null)for(let n=0;n<t.length;n++)r=Bi.pathShouldBeValid(t[n],[]);return r}static pathShouldBeValid(t,r){if(t!=null){try{Xt.parse(t.path)}catch{r.push(t.path)}t.path_nested!=null&&Bi.pathShouldBeValid(t.path_nested,r)}if(r.length>0)throw new Jw("",Ce.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}}const Ede=e=>{const t=e.map(a=>s(a));function r(a){return new Jw(a.tag,Ce.ERROR,a.message)}function n(a){return new Jw(a,Ce.INFO,"ok")}function s(a){let c;try{a.predicate(a.target)?c=n(a.tag):c=r(a)}catch{c=r(a)}return c}const i=(a,c)=>(c.status!==Ce.INFO&&a.push(c),a),o=t.reduce(i,[]);return cie(o)?o:[n("root")]};class dT{validate(t){let r=[];for(const n of t)r=r.concat(n.bundler.getValidations(n.target));return Ede(r)}}class pl{constructor(){ge(this,"_evaluationClientWrapper");this._evaluationClientWrapper=new wy}evaluatePresentation(t,r,n){const s=(n==null?void 0:n.generatePresentationSubmission)!==void 0?n.generatePresentationSubmission:(n==null?void 0:n.presentationSubmission)!==void 0,i=yi.toInternalPresentationDefinition(t),o=JSON.parse(JSON.stringify(r)),a=yi.mapExternalVerifiablePresentationToWrappedVP(o),c=(n==null?void 0:n.presentationSubmission)||a.presentation.presentation_submission;if(!c&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");const l=a.presentation.holder?[a.presentation.holder]:[],u={...n,holderDIDs:l,presentationSubmission:c,generatePresentationSubmission:s},d=this._evaluationClientWrapper.evaluate(i,a.vcs,u);return d.value&&d.value.descriptor_map.length&&new wy().selectFrom(i,a.vcs,u).areRequiredCredentialsPresent!==Ce.ERROR&&(d.errors=[]),d}evaluateCredentials(t,r,n){const s=yi.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new wy;const i=yi.toInternalPresentationDefinition(t),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){const c=new wy().selectFrom(i,s,n);o.areRequiredCredentialsPresent=c.areRequiredCredentialsPresent,o.errors=c.errors}else o.areRequiredCredentialsPresent=Ce.ERROR;return o}selectFrom(t,r,n){const s=JSON.parse(JSON.stringify(r)),i=yi.toInternalPresentationDefinition(t);return this._evaluationClientWrapper=new wy,this._evaluationClientWrapper.selectFrom(i,yi.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(t,r){const n=yi.toInternalPresentationDefinition(t);return this._evaluationClientWrapper.submissionFrom(n,yi.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(t,r,n){const s=(n==null?void 0:n.presentationSubmissionLocation)??vm.PRESENTATION,i=this.presentationSubmissionFrom(t,r);return{presentation:pl.constructPresentation(r,{...n,presentationSubmission:s===vm.PRESENTATION?i:void 0}),presentationSubmissionLocation:s,presentationSubmission:i}}static constructPresentation(t,r){var o,a,c,l;const n=r==null?void 0:r.holderDID,s=Array.isArray((o=r==null?void 0:r.basePresentationPayload)==null?void 0:o.type)?((a=r==null?void 0:r.basePresentationPayload)==null?void 0:a.type)||[]:(c=r==null?void 0:r.basePresentationPayload)!=null&&c.type?[r.basePresentationPayload.type]:[],i=(l=r==null?void 0:r.basePresentationPayload)!=null&&l["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return i.includes("https://www.w3.org/2018/credentials/v1")||i.push("https://www.w3.org/2018/credentials/v1"),s.includes("VerifiablePresentation")||s.push("VerifiablePresentation"),r!=null&&r.presentationSubmission&&(s.includes("PresentationSubmission")||s.push("PresentationSubmission"),i.includes("https://identity.foundation/presentation-exchange/submission/v1")||i.push("https://identity.foundation/presentation-exchange/submission/v1")),{...r==null?void 0:r.basePresentationPayload,"@context":i,type:s,holder:n,...!!(r!=null&&r.presentationSubmission)&&{presentation_submission:r.presentationSubmission},verifiableCredential:Array.isArray(t)?t:[t]}}static validateDefinition(t){const r=A2(t);if(r.error)throw r.error;const n=[];return r.version===Po.v1?n.push({bundler:new Ts("root"),target:yi.modelEntityToInternalPresentationDefinitionV1(t)}):n.push({bundler:new mo("root"),target:yi.modelEntityInternalPresentationDefinitionV2(t)}),new dT().validate(n)}static validateSubmission(t){return new dT().validate([{bundler:new Bi("root"),target:t}])}async verifiablePresentationFrom(t,r,n,s){const{holderDID:i,signatureOptions:o,proofOptions:a}=s,c=s.presentationSubmissionLocation??vm.PRESENTATION;function l(){let v=[];if(a!=null&&a.typeSupportsSelectiveDisclosure){if(!(a!=null&&a.type))throw Error("Please provide a proof type if you enable selective disclosure");v=[a.type]}return v}const u=i?[i]:[],d=l(),h=this.evaluateCredentials(t,r,{holderDIDs:u,limitDisclosureSignatureSuites:d}),f=this.presentationFrom(t,h.verifiableCredential,{...s,presentationSubmissionLocation:c}),p=this.evaluatePresentation(t,f.presentation,{limitDisclosureSignatureSuites:d});if(!p.value)throw new Error("Could not get evaluation results from presentationResult");const y={type:a==null?void 0:a.type,verificationMethod:o==null?void 0:o.verificationMethod,created:a!=null&&a.created?a.created:new Date().toISOString(),proofPurpose:a==null?void 0:a.proofPurpose,proofValue:o==null?void 0:o.proofValue,jws:o==null?void 0:o.jws,challenge:a==null?void 0:a.challenge,nonce:a==null?void 0:a.nonce,domain:a==null?void 0:a.domain},_={options:s,presentation:f.presentation,presentationDefinition:t,selectedCredentials:r,proof:y,presentationSubmission:p.value,evaluationResults:p};return{verifiablePresentation:await n(_),presentationSubmissionLocation:c,presentationSubmission:p.value}}static definitionVersionDiscovery(t){return A2(t)}}class sb{static selectCredentials({vcJwts:t,presentationDefinition:r}){var n,s;this.resetPex();const i=this.pex.selectFrom(r,t);return((n=i.errors)===null||n===void 0?void 0:n.length)!==0?[]:Array.from(new Set((s=i.verifiableCredential)!==null&&s!==void 0?s:[]))}static satisfiesPresentationDefinition({vcJwts:t,presentationDefinition:r}){var n,s,i;this.resetPex();const o=this.pex.evaluateCredentials(r,t);if(!((n=o.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(o.warnings)),o.areRequiredCredentialsPresent.toString()!=="info"||!((s=o.errors)===null||s===void 0)&&s.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw o.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(o.areRequiredCredentialsPresent)),!((i=o.errors)===null||i===void 0)&&i.length&&(a+="Errors: "+JSON.stringify(o.errors)),new Error(a)}}static createPresentationFromCredentials({vcJwts:t,presentationDefinition:r}){var n,s,i;this.resetPex();const o=pl.validateDefinition(r);fT(o);const a=this.pex.evaluateCredentials(r,t);if(!((n=a.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(a.warnings)),a.areRequiredCredentialsPresent.toString()!=="info"||!((s=a.errors)===null||s===void 0)&&s.length){let u="Failed to create Verifiable Presentation JWT due to: ";throw a.areRequiredCredentialsPresent&&(u+="Required Credentials Not Present: "+JSON.stringify(a.areRequiredCredentialsPresent)),!((i=a.errors)===null||i===void 0)&&i.length&&(u+="Errors: "+JSON.stringify(a.errors)),new Error(u)}const c=this.pex.presentationFrom(r,t),l=pl.validateSubmission(c.presentationSubmission);return fT(l),c}static validateDefinition({presentationDefinition:t}){return pl.validateDefinition(t)}static validateSubmission({presentationSubmission:t}){return pl.validateSubmission(t)}static evaluatePresentation({presentationDefinition:t,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(t,r)}static resetPex(){this.pex=new pl}}sb.pex=new pl;function fT(e){let t="Failed to pass validation check due to: ";if(Array.isArray(e)){if(!e.every(r=>r.status==="info"))throw t+="Validation Errors: "+JSON.stringify(e),new Error(t)}else if(e.status!=="info")throw t+="Validation Errors: "+JSON.stringify(e),new Error(t)}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Ade=4,pT=0,hT=1,Sde=2;function Eh(e){let t=e.length;for(;--t>=0;)e[t]=0}const xde=0,Y4=1,$de=2,Dde=3,Cde=258,M$=29,M0=256,Qm=M0+1+M$,Mp=30,j$=19,Q4=2*Qm+1,Jd=15,SE=16,Pde=7,U$=256,eM=16,tM=17,rM=18,F2=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),uw=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kde=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nM=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ode=512,Ou=new Array((Qm+2)*2);Eh(Ou);const wm=new Array(Mp*2);Eh(wm);const e0=new Array(Ode);Eh(e0);const t0=new Array(Cde-Dde+1);Eh(t0);const K$=new Array(M$);Eh(K$);const ob=new Array(Mp);Eh(ob);function xE(e,t,r,n,s){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}let iM,sM,oM;function $E(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const aM=e=>e<256?e0[e]:e0[256+(e>>>7)],r0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Hi=(e,t,r)=>{e.bi_valid>SE-r?(e.bi_buf|=t<<e.bi_valid&65535,r0(e,e.bi_buf),e.bi_buf=t>>SE-e.bi_valid,e.bi_valid+=r-SE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},ba=(e,t,r)=>{Hi(e,r[t*2],r[t*2+1])},uM=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},Tde=e=>{e.bi_valid===16?(r0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Ide=(e,t)=>{const r=t.dyn_tree,n=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,h,f,p,y=0;for(h=0;h<=Jd;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Q4;l++)u=e.heap[l],h=r[r[u*2+1]*2+1]+1,h>c&&(h=c,y++),r[u*2+1]=h,!(u>n)&&(e.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),p=r[u*2],e.opt_len+=p*(h+f),i&&(e.static_len+=p*(s[u*2+1]+f)));if(y!==0){do{for(h=c-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,y-=2}while(y>0);for(h=c;h!==0;h--)for(u=e.bl_count[h];u!==0;)d=e.heap[--l],!(d>n)&&(r[d*2+1]!==h&&(e.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),u--)}},cM=(e,t,r)=>{const n=new Array(Jd+1);let s=0,i,o;for(i=1;i<=Jd;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=uM(n[a]++,a))}},Bde=()=>{let e,t,r,n,s;const i=new Array(Jd+1);for(r=0,n=0;n<M$-1;n++)for(K$[n]=r,e=0;e<1<<F2[n];e++)t0[r++]=n;for(t0[r-1]=n,s=0,n=0;n<16;n++)for(ob[n]=s,e=0;e<1<<uw[n];e++)e0[s++]=n;for(s>>=7;n<Mp;n++)for(ob[n]=s<<7,e=0;e<1<<uw[n]-7;e++)e0[256+s++]=n;for(t=0;t<=Jd;t++)i[t]=0;for(e=0;e<=143;)Ou[e*2+1]=8,e++,i[8]++;for(;e<=255;)Ou[e*2+1]=9,e++,i[9]++;for(;e<=279;)Ou[e*2+1]=7,e++,i[7]++;for(;e<=287;)Ou[e*2+1]=8,e++,i[8]++;for(cM(Ou,Qm+1,i),e=0;e<Mp;e++)wm[e*2+1]=5,wm[e*2]=uM(e,5);iM=new xE(Ou,F2,M0+1,Qm,Jd),sM=new xE(wm,uw,0,Mp,Jd),oM=new xE(new Array(0),kde,0,j$,Pde)},lM=e=>{let t;for(t=0;t<Qm;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Mp;t++)e.dyn_dtree[t*2]=0;for(t=0;t<j$;t++)e.bl_tree[t*2]=0;e.dyn_ltree[U$*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},dM=e=>{e.bi_valid>8?r0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},yT=(e,t,r,n)=>{const s=t*2,i=r*2;return e[s]<e[i]||e[s]===e[i]&&n[t]<=n[r]},DE=(e,t,r)=>{const n=e.heap[r];let s=r<<1;for(;s<=e.heap_len&&(s<e.heap_len&&yT(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!yT(t,n,e.heap[s],e.depth));)e.heap[r]=e.heap[s],r=s,s<<=1;e.heap[r]=n},mT=(e,t,r)=>{let n,s,i=0,o,a;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+i++]&255,n+=(e.pending_buf[e.sym_buf+i++]&255)<<8,s=e.pending_buf[e.sym_buf+i++],n===0?ba(e,s,t):(o=t0[s],ba(e,o+M0+1,t),a=F2[o],a!==0&&(s-=K$[o],Hi(e,s,a)),n--,o=aM(n),ba(e,o,r),a=uw[o],a!==0&&(n-=ob[o],Hi(e,n,a)));while(i<e.sym_next);ba(e,U$,t)},N2=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,a,c=-1,l;for(e.heap_len=0,e.heap_max=Q4,o=0;o<i;o++)r[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,r[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=n[l*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)DE(e,r,o);l=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],DE(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[l*2]=r[o*2]+r[a*2],e.depth[l]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[o*2+1]=r[a*2+1]=l,e.heap[1]=l++,DE(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Ide(e,t),cM(r,c,e.bl_count)},gT=(e,t,r)=>{let n,s=-1,i,o=t[0*2+1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=t[(n+1)*2+1],!(++a<c&&i===o)&&(a<l?e.bl_tree[i*2]+=a:i!==0?(i!==s&&e.bl_tree[i*2]++,e.bl_tree[eM*2]++):a<=10?e.bl_tree[tM*2]++:e.bl_tree[rM*2]++,a=0,s=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},vT=(e,t,r)=>{let n,s=-1,i,o=t[0*2+1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),n=0;n<=r;n++)if(i=o,o=t[(n+1)*2+1],!(++a<c&&i===o)){if(a<l)do ba(e,i,e.bl_tree);while(--a!==0);else i!==0?(i!==s&&(ba(e,i,e.bl_tree),a--),ba(e,eM,e.bl_tree),Hi(e,a-3,2)):a<=10?(ba(e,tM,e.bl_tree),Hi(e,a-3,3)):(ba(e,rM,e.bl_tree),Hi(e,a-11,7));a=0,s=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}},Fde=e=>{let t;for(gT(e,e.dyn_ltree,e.l_desc.max_code),gT(e,e.dyn_dtree,e.d_desc.max_code),N2(e,e.bl_desc),t=j$-1;t>=3&&e.bl_tree[nM[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Nde=(e,t,r,n)=>{let s;for(Hi(e,t-257,5),Hi(e,r-1,5),Hi(e,n-4,4),s=0;s<n;s++)Hi(e,e.bl_tree[nM[s]*2+1],3);vT(e,e.dyn_ltree,t-1),vT(e,e.dyn_dtree,r-1)},Rde=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return pT;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return hT;for(r=32;r<M0;r++)if(e.dyn_ltree[r*2]!==0)return hT;return pT};let wT=!1;const Mde=e=>{wT||(Bde(),wT=!0),e.l_desc=new $E(e.dyn_ltree,iM),e.d_desc=new $E(e.dyn_dtree,sM),e.bl_desc=new $E(e.bl_tree,oM),e.bi_buf=0,e.bi_valid=0,lM(e)},fM=(e,t,r,n)=>{Hi(e,(xde<<1)+(n?1:0),3),dM(e),r0(e,r),r0(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},jde=e=>{Hi(e,Y4<<1,3),ba(e,U$,Ou),Tde(e)},Ude=(e,t,r,n)=>{let s,i,o=0;e.level>0?(e.strm.data_type===Sde&&(e.strm.data_type=Rde(e)),N2(e,e.l_desc),N2(e,e.d_desc),o=Fde(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&t!==-1?fM(e,t,r,n):e.strategy===Ade||i===s?(Hi(e,(Y4<<1)+(n?1:0),3),mT(e,Ou,wm)):(Hi(e,($de<<1)+(n?1:0),3),Nde(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),mT(e,e.dyn_ltree,e.dyn_dtree)),lM(e),n&&dM(e)},Kde=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(t0[r]+M0+1)*2]++,e.dyn_dtree[aM(t)*2]++),e.sym_next===e.sym_end);var Lde=Mde,qde=fM,Vde=Ude,Hde=Kde,zde=jde,Wde={_tr_init:Lde,_tr_stored_block:qde,_tr_flush_block:Vde,_tr_tally:Hde,_tr_align:zde};const Jde=(e,t,r,n)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+t[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var n0=Jde;const Gde=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Xde=new Uint32Array(Gde()),Zde=(e,t,r,n)=>{const s=Xde,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var En=Zde,i0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},S1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Yde,_tr_stored_block:R2,_tr_flush_block:Qde,_tr_tally:Sl,_tr_align:efe}=Wde,{Z_NO_FLUSH:xl,Z_PARTIAL_FLUSH:tfe,Z_FULL_FLUSH:rfe,Z_FINISH:zs,Z_BLOCK:bT,Z_OK:zn,Z_STREAM_END:_T,Z_STREAM_ERROR:Ta,Z_DATA_ERROR:nfe,Z_BUF_ERROR:CE,Z_DEFAULT_COMPRESSION:ife,Z_FILTERED:sfe,Z_HUFFMAN_ONLY:uv,Z_RLE:ofe,Z_FIXED:afe,Z_DEFAULT_STRATEGY:ufe,Z_UNKNOWN:cfe,Z_DEFLATED:x1}=S1,lfe=9,dfe=15,ffe=8,pfe=29,hfe=256,M2=hfe+1+pfe,yfe=30,mfe=19,gfe=2*M2+1,vfe=15,Lt=3,vl=258,Ia=vl+Lt+1,wfe=32,ih=42,L$=57,j2=69,U2=73,K2=91,L2=103,Gd=113,Gy=666,Ai=1,Ah=2,Pf=3,Sh=4,bfe=3,Xd=(e,t)=>(e.msg=i0[t],t),ET=e=>e*2-(e>4?9:0),hl=e=>{let t=e.length;for(;--t>=0;)e[t]=0},_fe=e=>{let t,r,n,s=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=s?r-s:0;while(--t);t=s,n=t;do r=e.prev[--n],e.prev[n]=r>=s?r-s:0;while(--t)};let Efe=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,$l=Efe;const Qi=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},ds=(e,t)=>{Qde(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qi(e.strm)},zt=(e,t)=>{e.pending_buf[e.pending++]=t},by=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},q2=(e,t,r,n)=>{let s=e.avail_in;return s>n&&(s=n),s===0?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),r),e.state.wrap===1?e.adler=n0(e.adler,t,s,r):e.state.wrap===2&&(e.adler=En(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)},pM=(e,t)=>{let r=e.max_chain_length,n=e.strstart,s,i,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Ia?e.strstart-(e.w_size-Ia):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+vl;let f=l[n+o-1],p=l[n+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(s=t,!(l[s+o]!==p||l[s+o-1]!==f||l[s]!==l[n]||l[++s]!==l[n+1])){n+=2,s++;do;while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<h);if(i=vl-(h-n),n=h-vl,i>o){if(e.match_start=t,o=i,i>=a)break;f=l[n+o-1],p=l[n+o]}}while((t=d[t&u])>c&&--r!==0);return o<=e.lookahead?o:e.lookahead},sh=e=>{const t=e.w_size;let r,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ia)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),_fe(e),n+=t),e.strm.avail_in===0)break;if(r=q2(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Lt)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=$l(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=$l(e,e.ins_h,e.window[s+Lt-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Lt)););}while(e.lookahead<Ia&&e.strm.avail_in!==0)},hM=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,s,i,o=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,s=e.strstart-e.block_start,n>s+e.strm.avail_in&&(n=s+e.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&t!==zs||t===xl||n!==s+e.strm.avail_in)))break;o=t===zs&&n===s+e.strm.avail_in?1:0,R2(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Qi(e.strm),s&&(s>n&&(s=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,n-=s),n&&(q2(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Sh:t!==xl&&t!==zs&&e.strm.avail_in===0&&e.strstart===e.block_start?Ah:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(q2(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,s=e.strstart-e.block_start,(s>=r||(s||t===zs)&&t!==xl&&e.strm.avail_in===0&&s<=i)&&(n=s>i?i:s,o=t===zs&&e.strm.avail_in===0&&n===s?1:0,R2(e,e.block_start,n,o),e.block_start+=n,Qi(e.strm)),o?Pf:Ai)},PE=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ia){if(sh(e),e.lookahead<Ia&&t===xl)return Ai;if(e.lookahead===0)break}if(r=0,e.lookahead>=Lt&&(e.ins_h=$l(e,e.ins_h,e.window[e.strstart+Lt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Ia&&(e.match_length=pM(e,r)),e.match_length>=Lt)if(n=Sl(e,e.strstart-e.match_start,e.match_length-Lt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Lt){e.match_length--;do e.strstart++,e.ins_h=$l(e,e.ins_h,e.window[e.strstart+Lt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$l(e,e.ins_h,e.window[e.strstart+1]);else n=Sl(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ds(e,!1),e.strm.avail_out===0))return Ai}return e.insert=e.strstart<Lt-1?e.strstart:Lt-1,t===zs?(ds(e,!0),e.strm.avail_out===0?Pf:Sh):e.sym_next&&(ds(e,!1),e.strm.avail_out===0)?Ai:Ah},rp=(e,t)=>{let r,n,s;for(;;){if(e.lookahead<Ia){if(sh(e),e.lookahead<Ia&&t===xl)return Ai;if(e.lookahead===0)break}if(r=0,e.lookahead>=Lt&&(e.ins_h=$l(e,e.ins_h,e.window[e.strstart+Lt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Lt-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ia&&(e.match_length=pM(e,r),e.match_length<=5&&(e.strategy===sfe||e.match_length===Lt&&e.strstart-e.match_start>4096)&&(e.match_length=Lt-1)),e.prev_length>=Lt&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-Lt,n=Sl(e,e.strstart-1-e.prev_match,e.prev_length-Lt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=$l(e,e.ins_h,e.window[e.strstart+Lt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Lt-1,e.strstart++,n&&(ds(e,!1),e.strm.avail_out===0))return Ai}else if(e.match_available){if(n=Sl(e,0,e.window[e.strstart-1]),n&&ds(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ai}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Sl(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Lt-1?e.strstart:Lt-1,t===zs?(ds(e,!0),e.strm.avail_out===0?Pf:Sh):e.sym_next&&(ds(e,!1),e.strm.avail_out===0)?Ai:Ah},Afe=(e,t)=>{let r,n,s,i;const o=e.window;for(;;){if(e.lookahead<=vl){if(sh(e),e.lookahead<=vl&&t===xl)return Ai;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Lt&&e.strstart>0&&(s=e.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=e.strstart+vl;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);e.match_length=vl-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Lt?(r=Sl(e,1,e.match_length-Lt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Sl(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ds(e,!1),e.strm.avail_out===0))return Ai}return e.insert=0,t===zs?(ds(e,!0),e.strm.avail_out===0?Pf:Sh):e.sym_next&&(ds(e,!1),e.strm.avail_out===0)?Ai:Ah},Sfe=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(sh(e),e.lookahead===0)){if(t===xl)return Ai;break}if(e.match_length=0,r=Sl(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ds(e,!1),e.strm.avail_out===0))return Ai}return e.insert=0,t===zs?(ds(e,!0),e.strm.avail_out===0?Pf:Sh):e.sym_next&&(ds(e,!1),e.strm.avail_out===0)?Ai:Ah};function Xo(e,t,r,n,s){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=s}const Xy=[new Xo(0,0,0,0,hM),new Xo(4,4,8,4,PE),new Xo(4,5,16,8,PE),new Xo(4,6,32,32,PE),new Xo(4,4,16,16,rp),new Xo(8,16,32,32,rp),new Xo(8,16,128,128,rp),new Xo(8,32,128,256,rp),new Xo(32,128,258,1024,rp),new Xo(32,258,258,4096,rp)],xfe=e=>{e.window_size=2*e.w_size,hl(e.head),e.max_lazy_match=Xy[e.level].max_lazy,e.good_match=Xy[e.level].good_length,e.nice_match=Xy[e.level].nice_length,e.max_chain_length=Xy[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Lt-1,e.match_available=0,e.ins_h=0};function $fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(gfe*2),this.dyn_dtree=new Uint16Array((2*yfe+1)*2),this.bl_tree=new Uint16Array((2*mfe+1)*2),hl(this.dyn_ltree),hl(this.dyn_dtree),hl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(vfe+1),this.heap=new Uint16Array(2*M2+1),hl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*M2+1),hl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const j0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ih&&t.status!==L$&&t.status!==j2&&t.status!==U2&&t.status!==K2&&t.status!==L2&&t.status!==Gd&&t.status!==Gy?1:0},yM=e=>{if(j0(e))return Xd(e,Ta);e.total_in=e.total_out=0,e.data_type=cfe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?L$:t.wrap?ih:Gd,e.adler=t.wrap===2?0:1,t.last_flush=-2,Yde(t),zn},mM=e=>{const t=yM(e);return t===zn&&xfe(e.state),t},Dfe=(e,t)=>j0(e)||e.state.wrap!==2?Ta:(e.state.gzhead=t,zn),gM=(e,t,r,n,s,i)=>{if(!e)return Ta;let o=1;if(t===ife&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>lfe||r!==x1||n<8||n>15||t<0||t>9||i<0||i>afe||n===8&&o!==1)return Xd(e,Ta);n===8&&(n=9);const a=new $fe;return e.state=a,a.strm=e,a.status=ih,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Lt-1)/Lt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=i,a.method=r,mM(e)},Cfe=(e,t)=>gM(e,t,x1,dfe,ffe,ufe),Pfe=(e,t)=>{if(j0(e)||t>bT||t<0)return e?Xd(e,Ta):Ta;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Gy&&t!==zs)return Xd(e,e.avail_out===0?CE:Ta);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Qi(e),e.avail_out===0)return r.last_flush=-1,zn}else if(e.avail_in===0&&ET(t)<=ET(n)&&t!==zs)return Xd(e,CE);if(r.status===Gy&&e.avail_in!==0)return Xd(e,CE);if(r.status===ih&&r.wrap===0&&(r.status=Gd),r.status===ih){let s=x1+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=uv||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,s|=i<<6,r.strstart!==0&&(s|=wfe),s+=31-s%31,by(r,s),r.strstart!==0&&(by(r,e.adler>>>16),by(r,e.adler&65535)),e.adler=1,r.status=Gd,Qi(e),r.pending!==0)return r.last_flush=-1,zn}if(r.status===L$){if(e.adler=0,zt(r,31),zt(r,139),zt(r,8),r.gzhead)zt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),zt(r,r.gzhead.time&255),zt(r,r.gzhead.time>>8&255),zt(r,r.gzhead.time>>16&255),zt(r,r.gzhead.time>>24&255),zt(r,r.level===9?2:r.strategy>=uv||r.level<2?4:0),zt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(zt(r,r.gzhead.extra.length&255),zt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=En(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=j2;else if(zt(r,0),zt(r,0),zt(r,0),zt(r,0),zt(r,0),zt(r,r.level===9?2:r.strategy>=uv||r.level<2?4:0),zt(r,bfe),r.status=Gd,Qi(e),r.pending!==0)return r.last_flush=-1,zn}if(r.status===j2){if(r.gzhead.extra){let s=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex+=a,Qi(e),r.pending!==0)return r.last_flush=-1,zn;s=0,i-=a}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=U2}if(r.status===U2){if(r.gzhead.name){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s)),Qi(e),r.pending!==0)return r.last_flush=-1,zn;s=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,zt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=K2}if(r.status===K2){if(r.gzhead.comment){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s)),Qi(e),r.pending!==0)return r.last_flush=-1,zn;s=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,zt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=En(e.adler,r.pending_buf,r.pending-s,s))}r.status=L2}if(r.status===L2){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Qi(e),r.pending!==0))return r.last_flush=-1,zn;zt(r,e.adler&255),zt(r,e.adler>>8&255),e.adler=0}if(r.status=Gd,Qi(e),r.pending!==0)return r.last_flush=-1,zn}if(e.avail_in!==0||r.lookahead!==0||t!==xl&&r.status!==Gy){let s=r.level===0?hM(r,t):r.strategy===uv?Sfe(r,t):r.strategy===ofe?Afe(r,t):Xy[r.level].func(r,t);if((s===Pf||s===Sh)&&(r.status=Gy),s===Ai||s===Pf)return e.avail_out===0&&(r.last_flush=-1),zn;if(s===Ah&&(t===tfe?efe(r):t!==bT&&(R2(r,0,0,!1),t===rfe&&(hl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Qi(e),e.avail_out===0))return r.last_flush=-1,zn}return t!==zs?zn:r.wrap<=0?_T:(r.wrap===2?(zt(r,e.adler&255),zt(r,e.adler>>8&255),zt(r,e.adler>>16&255),zt(r,e.adler>>24&255),zt(r,e.total_in&255),zt(r,e.total_in>>8&255),zt(r,e.total_in>>16&255),zt(r,e.total_in>>24&255)):(by(r,e.adler>>>16),by(r,e.adler&65535)),Qi(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?zn:_T)},kfe=e=>{if(j0(e))return Ta;const t=e.state.status;return e.state=null,t===Gd?Xd(e,nfe):zn},Ofe=(e,t)=>{let r=t.length;if(j0(e))return Ta;const n=e.state,s=n.wrap;if(s===2||s===1&&n.status!==ih||n.lookahead)return Ta;if(s===1&&(e.adler=n0(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){s===0&&(hl(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}const i=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,sh(n);n.lookahead>=Lt;){let c=n.strstart,l=n.lookahead-(Lt-1);do n.ins_h=$l(n,n.ins_h,n.window[c+Lt-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--l);n.strstart=c,n.lookahead=Lt-1,sh(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Lt-1,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=i,n.wrap=s,zn};var Tfe=Cfe,Ife=gM,Bfe=mM,Ffe=yM,Nfe=Dfe,Rfe=Pfe,Mfe=kfe,jfe=Ofe,Ufe="pako deflate (from Nodeca project)",bm={deflateInit:Tfe,deflateInit2:Ife,deflateReset:Bfe,deflateResetKeep:Ffe,deflateSetHeader:Nfe,deflate:Rfe,deflateEnd:Mfe,deflateSetDictionary:jfe,deflateInfo:Ufe};const Kfe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Lfe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Kfe(r,n)&&(e[n]=r[n])}}return e},qfe=e=>{let t=0;for(let n=0,s=e.length;n<s;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,s=0,i=e.length;n<i;n++){let o=e[n];r.set(o,s),s+=o.length}return r},$1={assign:Lfe,flattenChunks:qfe};let vM=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{vM=!1}const s0=new Uint8Array(256);for(let e=0;e<256;e++)s0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;s0[254]=s0[254]=1;var Vfe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,s,i,o=e.length,a=0;for(s=0;s<o;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),i=0,s=0;i<a;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const Hfe=(e,t)=>{if(t<65534&&e.subarray&&vM)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var zfe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let o=e[n++];if(o<128){i[s++]=o;continue}let a=s0[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return Hfe(i,s)},Wfe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+s0[e[r]]>t?r:t},o0={string2buf:Vfe,buf2string:zfe,utf8border:Wfe};function Jfe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var wM=Jfe;const bM=Object.prototype.toString,{Z_NO_FLUSH:Gfe,Z_SYNC_FLUSH:Xfe,Z_FULL_FLUSH:Zfe,Z_FINISH:Yfe,Z_OK:ab,Z_STREAM_END:Qfe,Z_DEFAULT_COMPRESSION:epe,Z_DEFAULT_STRATEGY:tpe,Z_DEFLATED:rpe}=S1;function q$(e){this.options=$1.assign({level:epe,method:rpe,chunkSize:16384,windowBits:15,memLevel:8,strategy:tpe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wM,this.strm.avail_out=0;let r=bm.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==ab)throw new Error(i0[r]);if(t.header&&bm.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=o0.string2buf(t.dictionary):bM.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=bm.deflateSetDictionary(this.strm,n),r!==ab)throw new Error(i0[r]);this._dict_set=!0}}q$.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let s,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?Yfe:Gfe,typeof e=="string"?r.input=o0.string2buf(e):bM.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===Xfe||i===Zfe)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(s=bm.deflate(r,i),s===Qfe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=bm.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===ab;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};q$.prototype.onData=function(e){this.chunks.push(e)};q$.prototype.onEnd=function(e){e===ab&&(this.result=$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const cv=16209,npe=16191;var ipe=function(t,r){let n,s,i,o,a,c,l,u,d,h,f,p,y,_,b,v,g,m,w,x,S,E,A,$;const I=t.state;n=t.next_in,A=t.input,s=n+(t.avail_in-5),i=t.next_out,$=t.output,o=i-(r-t.avail_out),a=i+(t.avail_out-257),c=I.dmax,l=I.wsize,u=I.whave,d=I.wnext,h=I.window,f=I.hold,p=I.bits,y=I.lencode,_=I.distcode,b=(1<<I.lenbits)-1,v=(1<<I.distbits)-1;e:do{p<15&&(f+=A[n++]<<p,p+=8,f+=A[n++]<<p,p+=8),g=y[f&b];t:for(;;){if(m=g>>>24,f>>>=m,p-=m,m=g>>>16&255,m===0)$[i++]=g&65535;else if(m&16){w=g&65535,m&=15,m&&(p<m&&(f+=A[n++]<<p,p+=8),w+=f&(1<<m)-1,f>>>=m,p-=m),p<15&&(f+=A[n++]<<p,p+=8,f+=A[n++]<<p,p+=8),g=_[f&v];r:for(;;){if(m=g>>>24,f>>>=m,p-=m,m=g>>>16&255,m&16){if(x=g&65535,m&=15,p<m&&(f+=A[n++]<<p,p+=8,p<m&&(f+=A[n++]<<p,p+=8)),x+=f&(1<<m)-1,x>c){t.msg="invalid distance too far back",I.mode=cv;break e}if(f>>>=m,p-=m,m=i-o,x>m){if(m=x-m,m>u&&I.sane){t.msg="invalid distance too far back",I.mode=cv;break e}if(S=0,E=h,d===0){if(S+=l-m,m<w){w-=m;do $[i++]=h[S++];while(--m);S=i-x,E=$}}else if(d<m){if(S+=l+d-m,m-=d,m<w){w-=m;do $[i++]=h[S++];while(--m);if(S=0,d<w){m=d,w-=m;do $[i++]=h[S++];while(--m);S=i-x,E=$}}}else if(S+=d-m,m<w){w-=m;do $[i++]=h[S++];while(--m);S=i-x,E=$}for(;w>2;)$[i++]=E[S++],$[i++]=E[S++],$[i++]=E[S++],w-=3;w&&($[i++]=E[S++],w>1&&($[i++]=E[S++]))}else{S=i-x;do $[i++]=$[S++],$[i++]=$[S++],$[i++]=$[S++],w-=3;while(w>2);w&&($[i++]=$[S++],w>1&&($[i++]=$[S++]))}}else if(m&64){t.msg="invalid distance code",I.mode=cv;break e}else{g=_[(g&65535)+(f&(1<<m)-1)];continue r}break}}else if(m&64)if(m&32){I.mode=npe;break e}else{t.msg="invalid literal/length code",I.mode=cv;break e}else{g=y[(g&65535)+(f&(1<<m)-1)];continue t}break}}while(n<s&&i<a);w=p>>3,n-=w,p-=w<<3,f&=(1<<p)-1,t.next_in=n,t.next_out=i,t.avail_in=n<s?5+(s-n):5-(n-s),t.avail_out=i<a?257+(a-i):257-(i-a),I.hold=f,I.bits=p};const np=15,AT=852,ST=592,xT=0,kE=1,$T=2,spe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ope=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ape=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),upe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cpe=(e,t,r,n,s,i,o,a)=>{const c=a.bits;let l=0,u=0,d=0,h=0,f=0,p=0,y=0,_=0,b=0,v=0,g,m,w,x,S,E=null,A;const $=new Uint16Array(np+1),I=new Uint16Array(np+1);let T=null,R,L,j;for(l=0;l<=np;l++)$[l]=0;for(u=0;u<n;u++)$[t[r+u]]++;for(f=c,h=np;h>=1&&$[h]===0;h--);if(f>h&&(f=h),h===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&$[d]===0;d++);for(f<d&&(f=d),_=1,l=1;l<=np;l++)if(_<<=1,_-=$[l],_<0)return-1;if(_>0&&(e===xT||h!==1))return-1;for(I[1]=0,l=1;l<np;l++)I[l+1]=I[l]+$[l];for(u=0;u<n;u++)t[r+u]!==0&&(o[I[t[r+u]]++]=u);if(e===xT?(E=T=o,A=20):e===kE?(E=spe,T=ope,A=257):(E=ape,T=upe,A=0),v=0,u=0,l=d,S=i,p=f,y=0,w=-1,b=1<<f,x=b-1,e===kE&&b>AT||e===$T&&b>ST)return 1;for(;;){R=l-y,o[u]+1<A?(L=0,j=o[u]):o[u]>=A?(L=T[o[u]-A],j=E[o[u]-A]):(L=96,j=0),g=1<<l-y,m=1<<p,d=m;do m-=g,s[S+(v>>y)+m]=R<<24|L<<16|j|0;while(m!==0);for(g=1<<l-1;v&g;)g>>=1;if(g!==0?(v&=g-1,v+=g):v=0,u++,--$[l]===0){if(l===h)break;l=t[r+o[u]]}if(l>f&&(v&x)!==w){for(y===0&&(y=f),S+=d,p=l-y,_=1<<p;p+y<h&&(_-=$[p+y],!(_<=0));)p++,_<<=1;if(b+=1<<p,e===kE&&b>AT||e===$T&&b>ST)return 1;w=v&x,s[w]=f<<24|p<<16|S-i|0}}return v!==0&&(s[S+v]=l-y<<24|64<<16|0),a.bits=f,0};var _m=cpe;const lpe=0,_M=1,EM=2,{Z_FINISH:DT,Z_BLOCK:dpe,Z_TREES:lv,Z_OK:kf,Z_STREAM_END:fpe,Z_NEED_DICT:ppe,Z_STREAM_ERROR:to,Z_DATA_ERROR:AM,Z_MEM_ERROR:SM,Z_BUF_ERROR:hpe,Z_DEFLATED:CT}=S1,D1=16180,PT=16181,kT=16182,OT=16183,TT=16184,IT=16185,BT=16186,FT=16187,NT=16188,RT=16189,ub=16190,mu=16191,OE=16192,MT=16193,TE=16194,jT=16195,UT=16196,KT=16197,LT=16198,dv=16199,fv=16200,qT=16201,VT=16202,HT=16203,zT=16204,WT=16205,IE=16206,JT=16207,GT=16208,kr=16209,xM=16210,$M=16211,ype=852,mpe=592,gpe=15,vpe=gpe,XT=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function wpe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Uf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<D1||t.mode>$M?1:0},DM=e=>{if(Uf(e))return to;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=D1,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ype),t.distcode=t.distdyn=new Int32Array(mpe),t.sane=1,t.back=-1,kf},CM=e=>{if(Uf(e))return to;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,DM(e)},PM=(e,t)=>{let r;if(Uf(e))return to;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?to:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,CM(e))},kM=(e,t)=>{if(!e)return to;const r=new wpe;e.state=r,r.strm=e,r.window=null,r.mode=D1;const n=PM(e,t);return n!==kf&&(e.state=null),n},bpe=e=>kM(e,vpe);let ZT=!0,BE,FE;const _pe=e=>{if(ZT){BE=new Int32Array(512),FE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_m(_M,e.lens,0,288,BE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_m(EM,e.lens,0,32,FE,0,e.work,{bits:5}),ZT=!1}e.lencode=BE,e.lenbits=9,e.distcode=FE,e.distbits=5},OM=(e,t,r,n)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(t.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Epe=(e,t)=>{let r,n,s,i,o,a,c,l,u,d,h,f,p,y,_=0,b,v,g,m,w,x,S,E;const A=new Uint8Array(4);let $,I;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Uf(e)||!e.output||!e.input&&e.avail_in!==0)return to;r=e.state,r.mode===mu&&(r.mode=OE),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,d=a,h=c,E=kf;e:for(;;)switch(r.mode){case D1:if(r.wrap===0){r.mode=OE;break}for(;u<16;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(r.wrap&2&&l===35615){r.wbits===0&&(r.wbits=15),r.check=0,A[0]=l&255,A[1]=l>>>8&255,r.check=En(r.check,A,2,0),l=0,u=0,r.mode=PT;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=kr;break}if((l&15)!==CT){e.msg="unknown compression method",r.mode=kr;break}if(l>>>=4,u-=4,S=(l&15)+8,r.wbits===0&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=kr;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=l&512?RT:mu,l=0,u=0;break;case PT:for(;u<16;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(r.flags=l,(r.flags&255)!==CT){e.msg="unknown compression method",r.mode=kr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=kr;break}r.head&&(r.head.text=l>>8&1),r.flags&512&&r.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,r.check=En(r.check,A,2,0)),l=0,u=0,r.mode=kT;case kT:for(;u<32;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.head&&(r.head.time=l),r.flags&512&&r.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,r.check=En(r.check,A,4,0)),l=0,u=0,r.mode=OT;case OT:for(;u<16;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=l&255,r.head.os=l>>8),r.flags&512&&r.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,r.check=En(r.check,A,2,0)),l=0,u=0,r.mode=TT;case TT:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),r.flags&512&&r.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,r.check=En(r.check,A,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=IT;case IT:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),S)),r.flags&512&&r.wrap&4&&(r.check=En(r.check,n,f,i)),a-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=BT;case BT:if(r.flags&2048){if(a===0)break e;f=0;do S=n[i+f++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S));while(S&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=En(r.check,n,f,i)),a-=f,i+=f,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=FT;case FT:if(r.flags&4096){if(a===0)break e;f=0;do S=n[i+f++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S));while(S&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=En(r.check,n,f,i)),a-=f,i+=f,S)break e}else r.head&&(r.head.comment=null);r.mode=NT;case NT:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(r.wrap&4&&l!==(r.check&65535)){e.msg="header crc mismatch",r.mode=kr;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=mu;break;case RT:for(;u<32;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}e.adler=r.check=XT(l),l=0,u=0,r.mode=ub;case ub:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=a,r.hold=l,r.bits=u,ppe;e.adler=r.check=1,r.mode=mu;case mu:if(t===dpe||t===lv)break e;case OE:if(r.last){l>>>=u&7,u-=u&7,r.mode=IE;break}for(;u<3;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}switch(r.last=l&1,l>>>=1,u-=1,l&3){case 0:r.mode=MT;break;case 1:if(_pe(r),r.mode=dv,t===lv){l>>>=2,u-=2;break e}break;case 2:r.mode=UT;break;case 3:e.msg="invalid block type",r.mode=kr}l>>>=2,u-=2;break;case MT:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=kr;break}if(r.length=l&65535,l=0,u=0,r.mode=TE,t===lv)break e;case TE:r.mode=jT;case jT:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),f===0)break e;s.set(n.subarray(i,i+f),o),a-=f,i+=f,c-=f,o+=f,r.length-=f;break}r.mode=mu;break;case UT:for(;u<14;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(r.nlen=(l&31)+257,l>>>=5,u-=5,r.ndist=(l&31)+1,l>>>=5,u-=5,r.ncode=(l&15)+4,l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=kr;break}r.have=0,r.mode=KT;case KT:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.lens[T[r.have++]]=l&7,l>>>=3,u-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,$={bits:r.lenbits},E=_m(lpe,r.lens,0,19,r.lencode,0,r.work,$),r.lenbits=$.bits,E){e.msg="invalid code lengths set",r.mode=kr;break}r.have=0,r.mode=LT;case LT:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[l&(1<<r.lenbits)-1],b=_>>>24,v=_>>>16&255,g=_&65535,!(b<=u);){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(g<16)l>>>=b,u-=b,r.lens[r.have++]=g;else{if(g===16){for(I=b+2;u<I;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(l>>>=b,u-=b,r.have===0){e.msg="invalid bit length repeat",r.mode=kr;break}S=r.lens[r.have-1],f=3+(l&3),l>>>=2,u-=2}else if(g===17){for(I=b+3;u<I;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}l>>>=b,u-=b,S=0,f=3+(l&7),l>>>=3,u-=3}else{for(I=b+7;u<I;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}l>>>=b,u-=b,S=0,f=11+(l&127),l>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=kr;break}for(;f--;)r.lens[r.have++]=S}}if(r.mode===kr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=kr;break}if(r.lenbits=9,$={bits:r.lenbits},E=_m(_M,r.lens,0,r.nlen,r.lencode,0,r.work,$),r.lenbits=$.bits,E){e.msg="invalid literal/lengths set",r.mode=kr;break}if(r.distbits=6,r.distcode=r.distdyn,$={bits:r.distbits},E=_m(EM,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,$),r.distbits=$.bits,E){e.msg="invalid distances set",r.mode=kr;break}if(r.mode=dv,t===lv)break e;case dv:r.mode=fv;case fv:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=a,r.hold=l,r.bits=u,ipe(e,h),o=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,r.mode===mu&&(r.back=-1);break}for(r.back=0;_=r.lencode[l&(1<<r.lenbits)-1],b=_>>>24,v=_>>>16&255,g=_&65535,!(b<=u);){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(v&&!(v&240)){for(m=b,w=v,x=g;_=r.lencode[x+((l&(1<<m+w)-1)>>m)],b=_>>>24,v=_>>>16&255,g=_&65535,!(m+b<=u);){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}l>>>=m,u-=m,r.back+=m}if(l>>>=b,u-=b,r.back+=b,r.length=g,v===0){r.mode=WT;break}if(v&32){r.back=-1,r.mode=mu;break}if(v&64){e.msg="invalid literal/length code",r.mode=kr;break}r.extra=v&15,r.mode=qT;case qT:if(r.extra){for(I=r.extra;u<I;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=VT;case VT:for(;_=r.distcode[l&(1<<r.distbits)-1],b=_>>>24,v=_>>>16&255,g=_&65535,!(b<=u);){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(!(v&240)){for(m=b,w=v,x=g;_=r.distcode[x+((l&(1<<m+w)-1)>>m)],b=_>>>24,v=_>>>16&255,g=_&65535,!(m+b<=u);){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}l>>>=m,u-=m,r.back+=m}if(l>>>=b,u-=b,r.back+=b,v&64){e.msg="invalid distance code",r.mode=kr;break}r.offset=g,r.extra=v&15,r.mode=HT;case HT:if(r.extra){for(I=r.extra;u<I;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=kr;break}r.mode=zT;case zT:if(c===0)break e;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=kr;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=s,p=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do s[o++]=y[p++];while(--f);r.length===0&&(r.mode=fv);break;case WT:if(c===0)break e;s[o++]=r.length,c--,r.mode=fv;break;case IE:if(r.wrap){for(;u<32;){if(a===0)break e;a--,l|=n[i++]<<u,u+=8}if(h-=c,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?En(r.check,s,h,o-h):n0(r.check,s,h,o-h)),h=c,r.wrap&4&&(r.flags?l:XT(l))!==r.check){e.msg="incorrect data check",r.mode=kr;break}l=0,u=0}r.mode=JT;case JT:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,l+=n[i++]<<u,u+=8}if(r.wrap&4&&l!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=kr;break}l=0,u=0}r.mode=GT;case GT:E=fpe;break e;case kr:E=AM;break e;case xM:return SM;case $M:default:return to}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=a,r.hold=l,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<kr&&(r.mode<IE||t!==DT))&&OM(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?En(r.check,s,h,e.next_out-h):n0(r.check,s,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===mu?128:0)+(r.mode===dv||r.mode===TE?256:0),(d===0&&h===0||t===DT)&&E===kf&&(E=hpe),E},Ape=e=>{if(Uf(e))return to;let t=e.state;return t.window&&(t.window=null),e.state=null,kf},Spe=(e,t)=>{if(Uf(e))return to;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,kf):to},xpe=(e,t)=>{const r=t.length;let n,s,i;return Uf(e)||(n=e.state,n.wrap!==0&&n.mode!==ub)?to:n.mode===ub&&(s=1,s=n0(s,t,r,0),s!==n.check)?AM:(i=OM(e,t,r,r),i?(n.mode=xM,SM):(n.havedict=1,kf))};var $pe=CM,Dpe=PM,Cpe=DM,Ppe=bpe,kpe=kM,Ope=Epe,Tpe=Ape,Ipe=Spe,Bpe=xpe,Fpe="pako inflate (from Nodeca project)",Tu={inflateReset:$pe,inflateReset2:Dpe,inflateResetKeep:Cpe,inflateInit:Ppe,inflateInit2:kpe,inflate:Ope,inflateEnd:Tpe,inflateGetHeader:Ipe,inflateSetDictionary:Bpe,inflateInfo:Fpe};function Npe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Rpe=Npe;const TM=Object.prototype.toString,{Z_NO_FLUSH:Mpe,Z_FINISH:jpe,Z_OK:a0,Z_STREAM_END:NE,Z_NEED_DICT:RE,Z_STREAM_ERROR:Upe,Z_DATA_ERROR:YT,Z_MEM_ERROR:Kpe}=S1;function V$(e){this.options=$1.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wM,this.strm.avail_out=0;let r=Tu.inflateInit2(this.strm,t.windowBits);if(r!==a0)throw new Error(i0[r]);if(this.header=new Rpe,Tu.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=o0.string2buf(t.dictionary):TM.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Tu.inflateSetDictionary(this.strm,t.dictionary),r!==a0)))throw new Error(i0[r])}V$.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?jpe:Mpe,TM.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Tu.inflate(r,o),i===RE&&s&&(i=Tu.inflateSetDictionary(r,s),i===a0?i=Tu.inflate(r,o):i===YT&&(i=RE));r.avail_in>0&&i===NE&&r.state.wrap>0&&e[r.next_in]!==0;)Tu.inflateReset(r),i=Tu.inflate(r,o);switch(i){case Upe:case YT:case RE:case Kpe:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===NE))if(this.options.to==="string"){let c=o0.utf8border(r.output,r.next_out),l=r.next_out-c,u=o0.buf2string(r.output,c);r.next_out=l,r.avail_out=n-l,l&&r.output.set(r.output.subarray(c,c+l),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===a0&&a===0)){if(i===NE)return i=Tu.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};V$.prototype.onData=function(e){this.chunks.push(e)};V$.prototype.onEnd=function(e){e===a0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Lpe(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function QT(e){return new Date(e*1e3).toISOString().replace(/\.\d{3}/,"")}function qpe(e){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e))return!1;const r=new Date(e);return!isNaN(r.getTime())}function Vpe(e){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(e))return!1;const r=new Date(e);return!isNaN(r.getTime())}const eI="VerifiablePresentation";class _y{static validateCredentialPayload(t){this.validateContext(t.vcDataModel["@context"]),this.validateVcType(t.type),this.validateCredentialSubject(t.vcDataModel.credentialSubject),t.vcDataModel.issuanceDate&&this.validateTimestamp(t.vcDataModel.issuanceDate),t.vcDataModel.expirationDate&&this.validateTimestamp(t.vcDataModel.expirationDate)}static validateContext(t){const r=this.asArray(t);if(r.length<1||r.indexOf(V2)===-1)throw new Error(`@context is missing default context "${V2}"`)}static validateVcType(t){const r=this.asArray(t);if(r.length<1||r.indexOf(Em)===-1)throw new Error(`type is missing default "${Em}"`)}static validateVpType(t){const r=this.asArray(t);if(r.length<1||r.indexOf(eI)===-1)throw new Error(`type is missing default "${eI}"`)}static validateCredentialSubject(t){if(Object.keys(t).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(t){if(!qpe(t)&&!Vpe(t))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(t){return Array.isArray(t)?t:[t]}}var ME=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const V2="https://www.w3.org/2018/credentials/v1",Em="VerifiableCredential";class cb{constructor(t){this.vcDataModel=t}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}sign(t){return ME(this,void 0,void 0,function*(){return yield Oa.sign({signerDid:t.did,payload:Object.assign({vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:t.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3)},this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)})})})}toString(){return JSON.stringify(this.vcDataModel)}static create(t){return ME(this,void 0,void 0,function*(){const{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,credentialStatus:c,credentialSchema:l,evidence:u}=t,d=JSON.parse(JSON.stringify(i));if(typeof d!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");const h=Object.assign({id:s},d),f=[V2];c!==null&&f.push(Hpe);const p=Object.assign(Object.assign(Object.assign(Object.assign({"@context":f,type:Array.isArray(r)?[Em,...r]:r?[Em,r]:[Em],id:`urn:uuid:${Gre()}`,issuer:n,issuanceDate:o||Lpe(),credentialSubject:h},a&&{expirationDate:a}),c&&{credentialStatus:c}),l&&{credentialSchema:l}),u&&{evidence:u});return jE(p),new cb(p)})}static verify(t){return ME(this,arguments,void 0,function*({vcJwt:r}){const{payload:n}=yield Oa.verify({jwt:r}),{exp:s,iss:i,nbf:o,jti:a,sub:c,vc:l}=n;if(!l)throw new Error("vc property missing.");const u=n.vc;if(s&&u.expirationDate&&s!==Math.floor(new Date(u.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(s&&(u.expirationDate=QT(s)),!i)throw new Error("Verification failed: iss claim is required");if(i!==u.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(o&&o>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(o&&u.issuanceDate&&o!==Math.floor(new Date(u.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(o&&(u.issuanceDate=QT(o)),c&&!Array.isArray(u.credentialSubject)&&c!==u.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(c&&!Array.isArray(u.credentialSubject)&&(u.credentialSubject.id=c),a&&a!==u.id)throw new Error("Verification failed: jti claim does not match id");return a&&(u.id=a),jE(u),{issuer:n.iss,subject:n.sub,vc:u}})}static parseJwt({vcJwt:t}){const n=Oa.parse({jwt:t}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return jE(n),new cb(n)}}function jE(e){_y.validateContext(e["@context"]),_y.validateVcType(e.type),_y.validateCredentialSubject(e.credentialSubject),e.issuanceDate&&_y.validateTimestamp(e.issuanceDate),e.expirationDate&&_y.validateTimestamp(e.expirationDate)}const Hpe="https://w3id.org/vc/status-list/2021/v1";var tI;(function(e){e.revocation="revocation",e.suspension="suspension"})(tI||(tI={}));var H2={exports:{}},IM={},Oo={},oh={},U0={},Rt={},u0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((g,m)=>`${g}${m}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((g,m)=>(m instanceof r&&(g[m.str]=(g[m.str]||0)+1),g),{})}}e._Code=n,e.nil=new n("");function s(b,...v){const g=[b[0]];let m=0;for(;m<v.length;)a(g,v[m]),g.push(b[++m]);return new n(g)}e._=s;const i=new n("+");function o(b,...v){const g=[f(b[0])];let m=0;for(;m<v.length;)g.push(i),a(g,v[m]),g.push(i,f(b[++m]));return c(g),new n(g)}e.str=o;function a(b,v){v instanceof n?b.push(...v._items):v instanceof r?b.push(v):b.push(d(v))}e.addCodeArg=a;function c(b){let v=1;for(;v<b.length-1;){if(b[v]===i){const g=l(b[v-1],b[v+1]);if(g!==void 0){b.splice(v-1,3,g);continue}b[v++]="+"}v++}}function l(b,v){if(v==='""')return b;if(b==='""')return v;if(typeof b=="string")return v instanceof r||b[b.length-1]!=='"'?void 0:typeof v!="string"?`${b.slice(0,-1)}${v}"`:v[0]==='"'?b.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(b instanceof r))return`"${b}${v.slice(1)}`}function u(b,v){return v.emptyStr()?b:b.emptyStr()?v:o`${b}${v}`}e.strConcat=u;function d(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:f(Array.isArray(b)?b.join(","):b)}function h(b){return new n(f(b))}e.stringify=h;function f(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=f;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new n(`.${b}`):s`[${b}]`}e.getProperty=p;function y(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new n(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=y;function _(b){return new n(b.toString())}e.regexpCode=_})(u0);var z2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=u0;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:l,parent:u}={}){this._names={},this._prefixes=l,this._parent=u}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const u=this._names[l]||this._nameGroup(l);return`${l}${u.index++}`}_nameGroup(l){var u,d;if(!((d=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=s;class i extends t.Name{constructor(l,u){super(u),this.prefix=l}setValue(l,{property:u,itemIndex:d}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(u)}[${d}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class a extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new i(l,this._newName(l))}value(l,u){var d;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:f}=h,p=(d=u.key)!==null&&d!==void 0?d:u.ref;let y=this._values[f];if(y){const v=y.get(p);if(v)return v}else y=this._values[f]=new Map;y.set(p,h);const _=this._scope[f]||(this._scope[f]=[]),b=_.length;return _[b]=u.ref,h.setValue(u,{property:f,itemIndex:b}),h}getValue(l,u){const d=this._values[l];if(d)return d.get(u)}scopeRefs(l,u=this._values){return this._reduceValues(u,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${l}${d.scopePath}`})}scopeCode(l=this._values,u,d){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,d)}_reduceValues(l,u,d={},h){let f=t.nil;for(const p in l){const y=l[p];if(!y)continue;const _=d[p]=d[p]||new Map;y.forEach(b=>{if(_.has(b))return;_.set(b,n.Started);let v=u(b);if(v){const g=this.opts.es5?e.varKinds.var:e.varKinds.const;f=(0,t._)`${f}${g} ${b} = ${v};${this.opts._n}`}else if(v=h==null?void 0:h(b))f=(0,t._)`${f}${v}${this.opts._n}`;else throw new r(b);_.set(b,n.Completed)})}return f}}e.ValueScope=a})(z2);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=u0,r=z2;var n=u0;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=z2;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(C,B){return this}}class o extends i{constructor(C,B,Z){super(),this.varKind=C,this.name=B,this.rhs=Z}render({es5:C,_n:B}){const Z=C?r.varKinds.var:this.varKind,Q=this.rhs===void 0?"":` = ${this.rhs}`;return`${Z} ${this.name}${Q};`+B}optimizeNames(C,B){if(C[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,C,B)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(C,B,Z){super(),this.lhs=C,this.rhs=B,this.sideEffects=Z}render({_n:C}){return`${this.lhs} = ${this.rhs};`+C}optimizeNames(C,B){if(!(this.lhs instanceof t.Name&&!C[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,C,B),this}get names(){const C=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(C,this.rhs)}}class c extends a{constructor(C,B,Z,Q){super(C,Z,Q),this.op=B}render({_n:C}){return`${this.lhs} ${this.op}= ${this.rhs};`+C}}class l extends i{constructor(C){super(),this.label=C,this.names={}}render({_n:C}){return`${this.label}:`+C}}class u extends i{constructor(C){super(),this.label=C,this.names={}}render({_n:C}){return`break${this.label?` ${this.label}`:""};`+C}}class d extends i{constructor(C){super(),this.error=C}render({_n:C}){return`throw ${this.error};`+C}get names(){return this.error.names}}class h extends i{constructor(C){super(),this.code=C}render({_n:C}){return`${this.code};`+C}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(C,B){return this.code=L(this.code,C,B),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class f extends i{constructor(C=[]){super(),this.nodes=C}render(C){return this.nodes.reduce((B,Z)=>B+Z.render(C),"")}optimizeNodes(){const{nodes:C}=this;let B=C.length;for(;B--;){const Z=C[B].optimizeNodes();Array.isArray(Z)?C.splice(B,1,...Z):Z?C[B]=Z:C.splice(B,1)}return C.length>0?this:void 0}optimizeNames(C,B){const{nodes:Z}=this;let Q=Z.length;for(;Q--;){const oe=Z[Q];oe.optimizeNames(C,B)||(j(C,oe.names),Z.splice(Q,1))}return Z.length>0?this:void 0}get names(){return this.nodes.reduce((C,B)=>T(C,B.names),{})}}class p extends f{render(C){return"{"+C._n+super.render(C)+"}"+C._n}}class y extends f{}class _ extends p{}_.kind="else";class b extends p{constructor(C,B){super(B),this.condition=C}render(C){let B=`if(${this.condition})`+super.render(C);return this.else&&(B+="else "+this.else.render(C)),B}optimizeNodes(){super.optimizeNodes();const C=this.condition;if(C===!0)return this.nodes;let B=this.else;if(B){const Z=B.optimizeNodes();B=this.else=Array.isArray(Z)?new _(Z):Z}if(B)return C===!1?B instanceof b?B:B.nodes:this.nodes.length?this:new b(U(C),B instanceof b?[B]:B.nodes);if(!(C===!1||!this.nodes.length))return this}optimizeNames(C,B){var Z;if(this.else=(Z=this.else)===null||Z===void 0?void 0:Z.optimizeNames(C,B),!!(super.optimizeNames(C,B)||this.else))return this.condition=L(this.condition,C,B),this}get names(){const C=super.names;return R(C,this.condition),this.else&&T(C,this.else.names),C}}b.kind="if";class v extends p{}v.kind="for";class g extends v{constructor(C){super(),this.iteration=C}render(C){return`for(${this.iteration})`+super.render(C)}optimizeNames(C,B){if(super.optimizeNames(C,B))return this.iteration=L(this.iteration,C,B),this}get names(){return T(super.names,this.iteration.names)}}class m extends v{constructor(C,B,Z,Q){super(),this.varKind=C,this.name=B,this.from=Z,this.to=Q}render(C){const B=C.es5?r.varKinds.var:this.varKind,{name:Z,from:Q,to:oe}=this;return`for(${B} ${Z}=${Q}; ${Z}<${oe}; ${Z}++)`+super.render(C)}get names(){const C=R(super.names,this.from);return R(C,this.to)}}class w extends v{constructor(C,B,Z,Q){super(),this.loop=C,this.varKind=B,this.name=Z,this.iterable=Q}render(C){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(C)}optimizeNames(C,B){if(super.optimizeNames(C,B))return this.iterable=L(this.iterable,C,B),this}get names(){return T(super.names,this.iterable.names)}}class x extends p{constructor(C,B,Z){super(),this.name=C,this.args=B,this.async=Z}render(C){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(C)}}x.kind="func";class S extends f{render(C){return"return "+super.render(C)}}S.kind="return";class E extends p{render(C){let B="try"+super.render(C);return this.catch&&(B+=this.catch.render(C)),this.finally&&(B+=this.finally.render(C)),B}optimizeNodes(){var C,B;return super.optimizeNodes(),(C=this.catch)===null||C===void 0||C.optimizeNodes(),(B=this.finally)===null||B===void 0||B.optimizeNodes(),this}optimizeNames(C,B){var Z,Q;return super.optimizeNames(C,B),(Z=this.catch)===null||Z===void 0||Z.optimizeNames(C,B),(Q=this.finally)===null||Q===void 0||Q.optimizeNames(C,B),this}get names(){const C=super.names;return this.catch&&T(C,this.catch.names),this.finally&&T(C,this.finally.names),C}}class A extends p{constructor(C){super(),this.error=C}render(C){return`catch(${this.error})`+super.render(C)}}A.kind="catch";class $ extends p{render(C){return"finally"+super.render(C)}}$.kind="finally";class I{constructor(C,B={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...B,_n:B.lines?`
`:""},this._extScope=C,this._scope=new r.Scope({parent:C}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(C){return this._scope.name(C)}scopeName(C){return this._extScope.name(C)}scopeValue(C,B){const Z=this._extScope.value(C,B);return(this._values[Z.prefix]||(this._values[Z.prefix]=new Set)).add(Z),Z}getScopeValue(C,B){return this._extScope.getValue(C,B)}scopeRefs(C){return this._extScope.scopeRefs(C,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(C,B,Z,Q){const oe=this._scope.toName(B);return Z!==void 0&&Q&&(this._constants[oe.str]=Z),this._leafNode(new o(C,oe,Z)),oe}const(C,B,Z){return this._def(r.varKinds.const,C,B,Z)}let(C,B,Z){return this._def(r.varKinds.let,C,B,Z)}var(C,B,Z){return this._def(r.varKinds.var,C,B,Z)}assign(C,B,Z){return this._leafNode(new a(C,B,Z))}add(C,B){return this._leafNode(new c(C,e.operators.ADD,B))}code(C){return typeof C=="function"?C():C!==t.nil&&this._leafNode(new h(C)),this}object(...C){const B=["{"];for(const[Z,Q]of C)B.length>1&&B.push(","),B.push(Z),(Z!==Q||this.opts.es5)&&(B.push(":"),(0,t.addCodeArg)(B,Q));return B.push("}"),new t._Code(B)}if(C,B,Z){if(this._blockNode(new b(C)),B&&Z)this.code(B).else().code(Z).endIf();else if(B)this.code(B).endIf();else if(Z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(C){return this._elseNode(new b(C))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(b,_)}_for(C,B){return this._blockNode(C),B&&this.code(B).endFor(),this}for(C,B){return this._for(new g(C),B)}forRange(C,B,Z,Q,oe=this.opts.es5?r.varKinds.var:r.varKinds.let){const fe=this._scope.toName(C);return this._for(new m(oe,fe,B,Z),()=>Q(fe))}forOf(C,B,Z,Q=r.varKinds.const){const oe=this._scope.toName(C);if(this.opts.es5){const fe=B instanceof t.Name?B:this.var("_arr",B);return this.forRange("_i",0,(0,t._)`${fe}.length`,he=>{this.var(oe,(0,t._)`${fe}[${he}]`),Z(oe)})}return this._for(new w("of",Q,oe,B),()=>Z(oe))}forIn(C,B,Z,Q=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(C,(0,t._)`Object.keys(${B})`,Z);const oe=this._scope.toName(C);return this._for(new w("in",Q,oe,B),()=>Z(oe))}endFor(){return this._endBlockNode(v)}label(C){return this._leafNode(new l(C))}break(C){return this._leafNode(new u(C))}return(C){const B=new S;if(this._blockNode(B),this.code(C),B.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(C,B,Z){if(!B&&!Z)throw new Error('CodeGen: "try" without "catch" and "finally"');const Q=new E;if(this._blockNode(Q),this.code(C),B){const oe=this.name("e");this._currNode=Q.catch=new A(oe),B(oe)}return Z&&(this._currNode=Q.finally=new $,this.code(Z)),this._endBlockNode(A,$)}throw(C){return this._leafNode(new d(C))}block(C,B){return this._blockStarts.push(this._nodes.length),C&&this.code(C).endBlock(B),this}endBlock(C){const B=this._blockStarts.pop();if(B===void 0)throw new Error("CodeGen: not in self-balancing block");const Z=this._nodes.length-B;if(Z<0||C!==void 0&&Z!==C)throw new Error(`CodeGen: wrong number of nodes: ${Z} vs ${C} expected`);return this._nodes.length=B,this}func(C,B=t.nil,Z,Q){return this._blockNode(new x(C,B,Z)),Q&&this.code(Q).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(C=1){for(;C-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(C){return this._currNode.nodes.push(C),this}_blockNode(C){this._currNode.nodes.push(C),this._nodes.push(C)}_endBlockNode(C,B){const Z=this._currNode;if(Z instanceof C||B&&Z instanceof B)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${B?`${C.kind}/${B.kind}`:C.kind}"`)}_elseNode(C){const B=this._currNode;if(!(B instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=B.else=C,this}get _root(){return this._nodes[0]}get _currNode(){const C=this._nodes;return C[C.length-1]}set _currNode(C){const B=this._nodes;B[B.length-1]=C}}e.CodeGen=I;function T(H,C){for(const B in C)H[B]=(H[B]||0)+(C[B]||0);return H}function R(H,C){return C instanceof t._CodeOrName?T(H,C.names):H}function L(H,C,B){if(H instanceof t.Name)return Z(H);if(!Q(H))return H;return new t._Code(H._items.reduce((oe,fe)=>(fe instanceof t.Name&&(fe=Z(fe)),fe instanceof t._Code?oe.push(...fe._items):oe.push(fe),oe),[]));function Z(oe){const fe=B[oe.str];return fe===void 0||C[oe.str]!==1?oe:(delete C[oe.str],fe)}function Q(oe){return oe instanceof t._Code&&oe._items.some(fe=>fe instanceof t.Name&&C[fe.str]===1&&B[fe.str]!==void 0)}}function j(H,C){for(const B in C)H[B]=(H[B]||0)-(C[B]||0)}function U(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${Y(H)}`}e.not=U;const te=O(e.operators.AND);function z(...H){return H.reduce(te)}e.and=z;const ee=O(e.operators.OR);function q(...H){return H.reduce(ee)}e.or=q;function O(H){return(C,B)=>C===t.nil?B:B===t.nil?C:(0,t._)`${Y(C)} ${H} ${Y(B)}`}function Y(H){return H instanceof t.Name?H:(0,t._)`(${H})`}})(Rt);var Vt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Rt,r=u0;function n(x){const S={};for(const E of x)S[E]=!0;return S}e.toHash=n;function s(x,S){return typeof S=="boolean"?S:Object.keys(S).length===0?!0:(i(x,S),!o(S,x.self.RULES.all))}e.alwaysValidSchema=s;function i(x,S=x.schema){const{opts:E,self:A}=x;if(!E.strictSchema||typeof S=="boolean")return;const $=A.RULES.keywords;for(const I in S)$[I]||w(x,`unknown keyword: "${I}"`)}e.checkUnknownRules=i;function o(x,S){if(typeof x=="boolean")return!x;for(const E in x)if(S[E])return!0;return!1}e.schemaHasRules=o;function a(x,S){if(typeof x=="boolean")return!x;for(const E in x)if(E!=="$ref"&&S.all[E])return!0;return!1}e.schemaHasRulesButRef=a;function c({topSchemaRef:x,schemaPath:S},E,A,$){if(!$){if(typeof E=="number"||typeof E=="boolean")return E;if(typeof E=="string")return(0,t._)`${E}`}return(0,t._)`${x}${S}${(0,t.getProperty)(A)}`}e.schemaRefOrVal=c;function l(x){return h(decodeURIComponent(x))}e.unescapeFragment=l;function u(x){return encodeURIComponent(d(x))}e.escapeFragment=u;function d(x){return typeof x=="number"?`${x}`:x.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=d;function h(x){return x.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=h;function f(x,S){if(Array.isArray(x))for(const E of x)S(E);else S(x)}e.eachItem=f;function p({mergeNames:x,mergeToName:S,mergeValues:E,resultToName:A}){return($,I,T,R)=>{const L=T===void 0?I:T instanceof t.Name?(I instanceof t.Name?x($,I,T):S($,I,T),T):I instanceof t.Name?(S($,T,I),I):E(I,T);return R===t.Name&&!(L instanceof t.Name)?A($,L):L}}e.mergeEvaluated={props:p({mergeNames:(x,S,E)=>x.if((0,t._)`${E} !== true && ${S} !== undefined`,()=>{x.if((0,t._)`${S} === true`,()=>x.assign(E,!0),()=>x.assign(E,(0,t._)`${E} || {}`).code((0,t._)`Object.assign(${E}, ${S})`))}),mergeToName:(x,S,E)=>x.if((0,t._)`${E} !== true`,()=>{S===!0?x.assign(E,!0):(x.assign(E,(0,t._)`${E} || {}`),_(x,E,S))}),mergeValues:(x,S)=>x===!0?!0:{...x,...S},resultToName:y}),items:p({mergeNames:(x,S,E)=>x.if((0,t._)`${E} !== true && ${S} !== undefined`,()=>x.assign(E,(0,t._)`${S} === true ? true : ${E} > ${S} ? ${E} : ${S}`)),mergeToName:(x,S,E)=>x.if((0,t._)`${E} !== true`,()=>x.assign(E,S===!0?!0:(0,t._)`${E} > ${S} ? ${E} : ${S}`)),mergeValues:(x,S)=>x===!0?!0:Math.max(x,S),resultToName:(x,S)=>x.var("items",S)})};function y(x,S){if(S===!0)return x.var("props",!0);const E=x.var("props",(0,t._)`{}`);return S!==void 0&&_(x,E,S),E}e.evaluatedPropsToName=y;function _(x,S,E){Object.keys(E).forEach(A=>x.assign((0,t._)`${S}${(0,t.getProperty)(A)}`,!0))}e.setEvaluated=_;const b={};function v(x,S){return x.scopeValue("func",{ref:S,code:b[S.code]||(b[S.code]=new r._Code(S.code))})}e.useFunc=v;var g;(function(x){x[x.Num=0]="Num",x[x.Str=1]="Str"})(g=e.Type||(e.Type={}));function m(x,S,E){if(x instanceof t.Name){const A=S===g.Num;return E?A?(0,t._)`"[" + ${x} + "]"`:(0,t._)`"['" + ${x} + "']"`:A?(0,t._)`"/" + ${x}`:(0,t._)`"/" + ${x}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return E?(0,t.getProperty)(x).toString():"/"+d(x)}e.getErrorPath=m;function w(x,S,E=x.opts.strictSchema){if(E){if(S=`strict mode: ${S}`,E===!0)throw new Error(S);x.self.logger.warn(S)}}e.checkStrictMode=w})(Vt);var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});const ni=Rt,zpe={data:new ni.Name("data"),valCxt:new ni.Name("valCxt"),instancePath:new ni.Name("instancePath"),parentData:new ni.Name("parentData"),parentDataProperty:new ni.Name("parentDataProperty"),rootData:new ni.Name("rootData"),dynamicAnchors:new ni.Name("dynamicAnchors"),vErrors:new ni.Name("vErrors"),errors:new ni.Name("errors"),this:new ni.Name("this"),self:new ni.Name("self"),scope:new ni.Name("scope"),json:new ni.Name("json"),jsonPos:new ni.Name("jsonPos"),jsonLen:new ni.Name("jsonLen"),jsonPart:new ni.Name("jsonPart")};Ja.default=zpe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Rt,r=Vt,n=Ja;e.keywordError={message:({keyword:_})=>(0,t.str)`must pass "${_}" keyword validation`},e.keyword$DataError={message:({keyword:_,schemaType:b})=>b?(0,t.str)`"${_}" keyword must be ${b} ($data)`:(0,t.str)`"${_}" keyword is invalid ($data)`};function s(_,b=e.keywordError,v,g){const{it:m}=_,{gen:w,compositeRule:x,allErrors:S}=m,E=d(_,b,v);g??(x||S)?c(w,E):l(m,(0,t._)`[${E}]`)}e.reportError=s;function i(_,b=e.keywordError,v){const{it:g}=_,{gen:m,compositeRule:w,allErrors:x}=g,S=d(_,b,v);c(m,S),w||x||l(g,n.default.vErrors)}e.reportExtraError=i;function o(_,b){_.assign(n.default.errors,b),_.if((0,t._)`${n.default.vErrors} !== null`,()=>_.if(b,()=>_.assign((0,t._)`${n.default.vErrors}.length`,b),()=>_.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:_,keyword:b,schemaValue:v,data:g,errsCount:m,it:w}){if(m===void 0)throw new Error("ajv implementation error");const x=_.name("err");_.forRange("i",m,n.default.errors,S=>{_.const(x,(0,t._)`${n.default.vErrors}[${S}]`),_.if((0,t._)`${x}.instancePath === undefined`,()=>_.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(n.default.instancePath,w.errorPath))),_.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${w.errSchemaPath}/${b}`),w.opts.verbose&&(_.assign((0,t._)`${x}.schema`,v),_.assign((0,t._)`${x}.data`,g))})}e.extendErrors=a;function c(_,b){const v=_.const("err",b);_.if((0,t._)`${n.default.vErrors} === null`,()=>_.assign(n.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${n.default.vErrors}.push(${v})`),_.code((0,t._)`${n.default.errors}++`)}function l(_,b){const{gen:v,validateName:g,schemaEnv:m}=_;m.$async?v.throw((0,t._)`new ${_.ValidationError}(${b})`):(v.assign((0,t._)`${g}.errors`,b),v.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(_,b,v){const{createErrors:g}=_.it;return g===!1?(0,t._)`{}`:h(_,b,v)}function h(_,b,v={}){const{gen:g,it:m}=_,w=[f(m,v),p(_,v)];return y(_,b,w),g.object(...w)}function f({errorPath:_},{instancePath:b}){const v=b?(0,t.str)`${_}${(0,r.getErrorPath)(b,r.Type.Str)}`:_;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,v)]}function p({keyword:_,it:{errSchemaPath:b}},{schemaPath:v,parentSchema:g}){let m=g?b:(0,t.str)`${b}/${_}`;return v&&(m=(0,t.str)`${m}${(0,r.getErrorPath)(v,r.Type.Str)}`),[u.schemaPath,m]}function y(_,{params:b,message:v},g){const{keyword:m,data:w,schemaValue:x,it:S}=_,{opts:E,propertyName:A,topSchemaRef:$,schemaPath:I}=S;g.push([u.keyword,m],[u.params,typeof b=="function"?b(_):b||(0,t._)`{}`]),E.messages&&g.push([u.message,typeof v=="function"?v(_):v]),E.verbose&&g.push([u.schema,x],[u.parentSchema,(0,t._)`${$}${I}`],[n.default.data,w]),A&&g.push([u.propertyName,A])}})(U0);Object.defineProperty(oh,"__esModule",{value:!0});oh.boolOrEmptySchema=oh.topBoolOrEmptySchema=void 0;const Wpe=U0,Jpe=Rt,Gpe=Ja,Xpe={message:"boolean schema is false"};function Zpe(e){const{gen:t,schema:r,validateName:n}=e;r===!1?BM(e,!1):typeof r=="object"&&r.$async===!0?t.return(Gpe.default.data):(t.assign((0,Jpe._)`${n}.errors`,null),t.return(!0))}oh.topBoolOrEmptySchema=Zpe;function Ype(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),BM(e)):r.var(t,!0)}oh.boolOrEmptySchema=Ype;function BM(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Wpe.reportError)(s,Xpe,void 0,t)}var K0={},Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.getRules=Of.isJSONType=void 0;const Qpe=["string","number","integer","boolean","null","object","array"],ehe=new Set(Qpe);function the(e){return typeof e=="string"&&ehe.has(e)}Of.isJSONType=the;function rhe(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Of.getRules=rhe;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.shouldUseRule=Hu.shouldUseGroup=Hu.schemaHasRulesForType=void 0;function nhe({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&FM(e,n)}Hu.schemaHasRulesForType=nhe;function FM(e,t){return t.rules.some(r=>NM(e,r))}Hu.shouldUseGroup=FM;function NM(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Hu.shouldUseRule=NM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=Of,r=Hu,n=U0,s=Rt,i=Vt;var o;(function(g){g[g.Correct=0]="Correct",g[g.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(g){const m=c(g.type);if(m.includes("null")){if(g.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!m.length&&g.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');g.nullable===!0&&m.push("null")}return m}e.getSchemaTypes=a;function c(g){const m=Array.isArray(g)?g:g?[g]:[];if(m.every(t.isJSONType))return m;throw new Error("type must be JSONType or JSONType[]: "+m.join(","))}e.getJSONTypes=c;function l(g,m){const{gen:w,data:x,opts:S}=g,E=d(m,S.coerceTypes),A=m.length>0&&!(E.length===0&&m.length===1&&(0,r.schemaHasRulesForType)(g,m[0]));if(A){const $=y(m,x,S.strictNumbers,o.Wrong);w.if($,()=>{E.length?h(g,m,E):b(g)})}return A}e.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function d(g,m){return m?g.filter(w=>u.has(w)||m==="array"&&w==="array"):[]}function h(g,m,w){const{gen:x,data:S,opts:E}=g,A=x.let("dataType",(0,s._)`typeof ${S}`),$=x.let("coerced",(0,s._)`undefined`);E.coerceTypes==="array"&&x.if((0,s._)`${A} == 'object' && Array.isArray(${S}) && ${S}.length == 1`,()=>x.assign(S,(0,s._)`${S}[0]`).assign(A,(0,s._)`typeof ${S}`).if(y(m,S,E.strictNumbers),()=>x.assign($,S))),x.if((0,s._)`${$} !== undefined`);for(const T of w)(u.has(T)||T==="array"&&E.coerceTypes==="array")&&I(T);x.else(),b(g),x.endIf(),x.if((0,s._)`${$} !== undefined`,()=>{x.assign(S,$),f(g,$)});function I(T){switch(T){case"string":x.elseIf((0,s._)`${A} == "number" || ${A} == "boolean"`).assign($,(0,s._)`"" + ${S}`).elseIf((0,s._)`${S} === null`).assign($,(0,s._)`""`);return;case"number":x.elseIf((0,s._)`${A} == "boolean" || ${S} === null
              || (${A} == "string" && ${S} && ${S} == +${S})`).assign($,(0,s._)`+${S}`);return;case"integer":x.elseIf((0,s._)`${A} === "boolean" || ${S} === null
              || (${A} === "string" && ${S} && ${S} == +${S} && !(${S} % 1))`).assign($,(0,s._)`+${S}`);return;case"boolean":x.elseIf((0,s._)`${S} === "false" || ${S} === 0 || ${S} === null`).assign($,!1).elseIf((0,s._)`${S} === "true" || ${S} === 1`).assign($,!0);return;case"null":x.elseIf((0,s._)`${S} === "" || ${S} === 0 || ${S} === false`),x.assign($,null);return;case"array":x.elseIf((0,s._)`${A} === "string" || ${A} === "number"
              || ${A} === "boolean" || ${S} === null`).assign($,(0,s._)`[${S}]`)}}}function f({gen:g,parentData:m,parentDataProperty:w},x){g.if((0,s._)`${m} !== undefined`,()=>g.assign((0,s._)`${m}[${w}]`,x))}function p(g,m,w,x=o.Correct){const S=x===o.Correct?s.operators.EQ:s.operators.NEQ;let E;switch(g){case"null":return(0,s._)`${m} ${S} null`;case"array":E=(0,s._)`Array.isArray(${m})`;break;case"object":E=(0,s._)`${m} && typeof ${m} == "object" && !Array.isArray(${m})`;break;case"integer":E=A((0,s._)`!(${m} % 1) && !isNaN(${m})`);break;case"number":E=A();break;default:return(0,s._)`typeof ${m} ${S} ${g}`}return x===o.Correct?E:(0,s.not)(E);function A($=s.nil){return(0,s.and)((0,s._)`typeof ${m} == "number"`,$,w?(0,s._)`isFinite(${m})`:s.nil)}}e.checkDataType=p;function y(g,m,w,x){if(g.length===1)return p(g[0],m,w,x);let S;const E=(0,i.toHash)(g);if(E.array&&E.object){const A=(0,s._)`typeof ${m} != "object"`;S=E.null?A:(0,s._)`!${m} || ${A}`,delete E.null,delete E.array,delete E.object}else S=s.nil;E.number&&delete E.integer;for(const A in E)S=(0,s.and)(S,p(A,m,w,x));return S}e.checkDataTypes=y;const _={message:({schema:g})=>`must be ${g}`,params:({schema:g,schemaValue:m})=>typeof g=="string"?(0,s._)`{type: ${g}}`:(0,s._)`{type: ${m}}`};function b(g){const m=v(g);(0,n.reportError)(m,_)}e.reportTypeError=b;function v(g){const{gen:m,data:w,schema:x}=g,S=(0,i.schemaRefOrVal)(g,x,"type");return{gen:m,keyword:"type",data:w,schema:x.type,schemaCode:S,schemaValue:S,parentSchema:x,params:{},it:g}}})(K0);var C1={};Object.defineProperty(C1,"__esModule",{value:!0});C1.assignDefaults=void 0;const ip=Rt,ihe=Vt;function she(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)rI(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>rI(e,i,s.default))}C1.assignDefaults=she;function rI(e,t,r){const{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;const a=(0,ip._)`${i}${(0,ip.getProperty)(t)}`;if(s){(0,ihe.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,ip._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,ip._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,ip._)`${a} = ${(0,ip.stringify)(r)}`)}var xa={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.validateUnion=Bt.validateArray=Bt.usePattern=Bt.callValidateCode=Bt.schemaProperties=Bt.allSchemaProperties=Bt.noPropertyInData=Bt.propertyInData=Bt.isOwnProperty=Bt.hasPropFunc=Bt.reportMissingProp=Bt.checkMissingProp=Bt.checkReportMissingProp=void 0;const xr=Rt,H$=Vt,Bc=Ja,ohe=Vt;function ahe(e,t){const{gen:r,data:n,it:s}=e;r.if(W$(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,xr._)`${t}`},!0),e.error()})}Bt.checkReportMissingProp=ahe;function uhe({gen:e,data:t,it:{opts:r}},n,s){return(0,xr.or)(...n.map(i=>(0,xr.and)(W$(e,t,i,r.ownProperties),(0,xr._)`${s} = ${i}`)))}Bt.checkMissingProp=uhe;function che(e,t){e.setParams({missingProperty:t},!0),e.error()}Bt.reportMissingProp=che;function RM(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,xr._)`Object.prototype.hasOwnProperty`})}Bt.hasPropFunc=RM;function z$(e,t,r){return(0,xr._)`${RM(e)}.call(${t}, ${r})`}Bt.isOwnProperty=z$;function lhe(e,t,r,n){const s=(0,xr._)`${t}${(0,xr.getProperty)(r)} !== undefined`;return n?(0,xr._)`${s} && ${z$(e,t,r)}`:s}Bt.propertyInData=lhe;function W$(e,t,r,n){const s=(0,xr._)`${t}${(0,xr.getProperty)(r)} === undefined`;return n?(0,xr.or)(s,(0,xr.not)(z$(e,t,r))):s}Bt.noPropertyInData=W$;function MM(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Bt.allSchemaProperties=MM;function dhe(e,t){return MM(t).filter(r=>!(0,H$.alwaysValidSchema)(e,t[r]))}Bt.schemaProperties=dhe;function fhe({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){const u=l?(0,xr._)`${e}, ${t}, ${n}${s}`:t,d=[[Bc.default.instancePath,(0,xr.strConcat)(Bc.default.instancePath,i)],[Bc.default.parentData,o.parentData],[Bc.default.parentDataProperty,o.parentDataProperty],[Bc.default.rootData,Bc.default.rootData]];o.opts.dynamicRef&&d.push([Bc.default.dynamicAnchors,Bc.default.dynamicAnchors]);const h=(0,xr._)`${u}, ${r.object(...d)}`;return c!==xr.nil?(0,xr._)`${a}.call(${c}, ${h})`:(0,xr._)`${a}(${h})`}Bt.callValidateCode=fhe;const phe=(0,xr._)`new RegExp`;function hhe({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,xr._)`${s.code==="new RegExp"?phe:(0,ohe.useFunc)(e,s)}(${r}, ${n})`})}Bt.usePattern=hhe;function yhe(e){const{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){const c=t.const("len",(0,xr._)`${r}.length`);t.forRange("i",0,c,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:H$.Type.Num},i),t.if((0,xr.not)(i),a)})}}Bt.validateArray=yhe;function mhe(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,H$.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,l)=>{const u=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,xr._)`${o} || ${a}`),e.mergeValidEvaluated(u,a)||t.if((0,xr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Bt.validateUnion=mhe;Object.defineProperty(xa,"__esModule",{value:!0});xa.validateKeywordUsage=xa.validSchemaType=xa.funcKeywordCode=xa.macroKeywordCode=void 0;const gi=Rt,Ld=Ja,ghe=Bt,vhe=U0;function whe(e,t){const{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),c=jM(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=r.name("valid");e.subschema({schema:a,schemaPath:gi.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}xa.macroKeywordCode=whe;function bhe(e,t){var r;const{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=e;Ehe(c,t);const l=!a&&t.compile?t.compile.call(c.self,i,o,c):t.validate,u=jM(n,s,l),d=n.let("valid");e.block$data(d,h),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function h(){if(t.errors===!1)y(),t.modifying&&nI(e),_(()=>e.error());else{const b=t.async?f():p();t.modifying&&nI(e),_(()=>_he(e,b))}}function f(){const b=n.let("ruleErrs",null);return n.try(()=>y((0,gi._)`await `),v=>n.assign(d,!1).if((0,gi._)`${v} instanceof ${c.ValidationError}`,()=>n.assign(b,(0,gi._)`${v}.errors`),()=>n.throw(v))),b}function p(){const b=(0,gi._)`${u}.errors`;return n.assign(b,null),y(gi.nil),b}function y(b=t.async?(0,gi._)`await `:gi.nil){const v=c.opts.passContext?Ld.default.this:Ld.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(d,(0,gi._)`${b}${(0,ghe.callValidateCode)(e,u,v,g)}`,t.modifying)}function _(b){var v;n.if((0,gi.not)((v=t.valid)!==null&&v!==void 0?v:d),b)}}xa.funcKeywordCode=bhe;function nI(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,gi._)`${n.parentData}[${n.parentDataProperty}]`))}function _he(e,t){const{gen:r}=e;r.if((0,gi._)`Array.isArray(${t})`,()=>{r.assign(Ld.default.vErrors,(0,gi._)`${Ld.default.vErrors} === null ? ${t} : ${Ld.default.vErrors}.concat(${t})`).assign(Ld.default.errors,(0,gi._)`${Ld.default.vErrors}.length`),(0,vhe.extendErrors)(e)},()=>e.error())}function Ehe({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function jM(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,gi.stringify)(r)})}function Ahe(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}xa.validSchemaType=Ahe;function She({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}xa.validateKeywordUsage=She;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.extendSubschemaMode=Dl.extendSubschemaData=Dl.getSubschema=void 0;const _a=Rt,UM=Vt;function xhe(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,_a._)`${e.schemaPath}${(0,_a.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,_a._)`${e.schemaPath}${(0,_a.getProperty)(t)}${(0,_a.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,UM.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Dl.getSubschema=xhe;function $he(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(r!==void 0){const{errorPath:l,dataPathArr:u,opts:d}=t,h=a.let("data",(0,_a._)`${t.data}${(0,_a.getProperty)(r)}`,!0);c(h),e.errorPath=(0,_a.str)`${l}${(0,UM.getErrorPath)(r,n,d.jsPropertySyntax)}`,e.parentDataProperty=(0,_a._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const l=s instanceof _a.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function c(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Dl.extendSubschemaData=$he;function Dhe(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}Dl.extendSubschemaMode=Dhe;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.getSchemaRefs=Xn.resolveUrl=Xn.normalizeId=Xn._getFullPath=Xn.getFullPath=Xn.inlineRef=void 0;const Che=Vt,Phe=c1,khe=PR,Ohe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function The(e,t=!0){return typeof e=="boolean"?!0:t===!0?!W2(e):t?KM(e)<=t:!1}Xn.inlineRef=The;const Ihe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function W2(e){for(const t in e){if(Ihe.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(W2)||typeof r=="object"&&W2(r))return!0}return!1}function KM(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Ohe.has(r)&&(typeof e[r]=="object"&&(0,Che.eachItem)(e[r],n=>t+=KM(n)),t===1/0))return 1/0}return t}function LM(e,t="",r){r!==!1&&(t=jp(t));const n=e.parse(t);return qM(e,n)}Xn.getFullPath=LM;function qM(e,t){return e.serialize(t).split("#")[0]+"#"}Xn._getFullPath=qM;const Bhe=/#\/?$/;function jp(e){return e?e.replace(Bhe,""):""}Xn.normalizeId=jp;function Fhe(e,t,r){return r=jp(r),e.resolve(t,r)}Xn.resolveUrl=Fhe;const Nhe=/^[a-z_][-a-z0-9._]*$/i;function Rhe(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=jp(e[r]||t),i={"":s},o=LM(n,s,!1),a={},c=new Set;return khe(e,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;const y=o+h;let _=i[p];typeof d[r]=="string"&&(_=b.call(this,d[r])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),i[h]=_;function b(g){const m=this.opts.uriResolver.resolve;if(g=jp(_?m(_,g):g),c.has(g))throw u(g);c.add(g);let w=this.refs[g];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?l(d,w.schema,g):g!==jp(y)&&(g[0]==="#"?(l(d,a[g],g),a[g]=d):this.refs[g]=y),g}function v(g){if(typeof g=="string"){if(!Nhe.test(g))throw new Error(`invalid anchor "${g}"`);b.call(this,`#${g}`)}}}),a;function l(d,h,f){if(h!==void 0&&!Phe(d,h))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Xn.getSchemaRefs=Rhe;Object.defineProperty(Oo,"__esModule",{value:!0});Oo.getData=Oo.KeywordCxt=Oo.validateFunctionCode=void 0;const VM=oh,iI=K0,J$=Hu,lb=K0,Mhe=C1,Am=xa,UE=Dl,We=Rt,gt=Ja,jhe=Xn,zu=Vt,Ey=U0;function Uhe(e){if(WM(e)&&(JM(e),zM(e))){qhe(e);return}HM(e,()=>(0,VM.topBoolOrEmptySchema)(e))}Oo.validateFunctionCode=Uhe;function HM({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,We._)`${gt.default.data}, ${gt.default.valCxt}`,n.$async,()=>{e.code((0,We._)`"use strict"; ${sI(r,s)}`),Lhe(e,s),e.code(i)}):e.func(t,(0,We._)`${gt.default.data}, ${Khe(s)}`,n.$async,()=>e.code(sI(r,s)).code(i))}function Khe(e){return(0,We._)`{${gt.default.instancePath}="", ${gt.default.parentData}, ${gt.default.parentDataProperty}, ${gt.default.rootData}=${gt.default.data}${e.dynamicRef?(0,We._)`, ${gt.default.dynamicAnchors}={}`:We.nil}}={}`}function Lhe(e,t){e.if(gt.default.valCxt,()=>{e.var(gt.default.instancePath,(0,We._)`${gt.default.valCxt}.${gt.default.instancePath}`),e.var(gt.default.parentData,(0,We._)`${gt.default.valCxt}.${gt.default.parentData}`),e.var(gt.default.parentDataProperty,(0,We._)`${gt.default.valCxt}.${gt.default.parentDataProperty}`),e.var(gt.default.rootData,(0,We._)`${gt.default.valCxt}.${gt.default.rootData}`),t.dynamicRef&&e.var(gt.default.dynamicAnchors,(0,We._)`${gt.default.valCxt}.${gt.default.dynamicAnchors}`)},()=>{e.var(gt.default.instancePath,(0,We._)`""`),e.var(gt.default.parentData,(0,We._)`undefined`),e.var(gt.default.parentDataProperty,(0,We._)`undefined`),e.var(gt.default.rootData,gt.default.data),t.dynamicRef&&e.var(gt.default.dynamicAnchors,(0,We._)`{}`)})}function qhe(e){const{schema:t,opts:r,gen:n}=e;HM(e,()=>{r.$comment&&t.$comment&&XM(e),Jhe(e),n.let(gt.default.vErrors,null),n.let(gt.default.errors,0),r.unevaluated&&Vhe(e),GM(e),Zhe(e)})}function Vhe(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,We._)`${r}.evaluated`),t.if((0,We._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,We._)`${e.evaluated}.props`,(0,We._)`undefined`)),t.if((0,We._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,We._)`${e.evaluated}.items`,(0,We._)`undefined`))}function sI(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,We._)`/*# sourceURL=${r} */`:We.nil}function Hhe(e,t){if(WM(e)&&(JM(e),zM(e))){zhe(e,t);return}(0,VM.boolOrEmptySchema)(e,t)}function zM({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function WM(e){return typeof e.schema!="boolean"}function zhe(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&XM(e),Ghe(e),Xhe(e);const i=n.const("_errs",gt.default.errors);GM(e,i),n.var(t,(0,We._)`${i} === ${gt.default.errors}`)}function JM(e){(0,zu.checkUnknownRules)(e),Whe(e)}function GM(e,t){if(e.opts.jtd)return oI(e,[],!1,t);const r=(0,iI.getSchemaTypes)(e.schema),n=(0,iI.coerceAndCheckDataType)(e,r);oI(e,r,!n,t)}function Whe(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,zu.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Jhe(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,zu.checkStrictMode)(e,"default is ignored in the schema root")}function Ghe(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,jhe.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Xhe(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function XM({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)e.code((0,We._)`${gt.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,We.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,We._)`${gt.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Zhe(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,We._)`${gt.default.errors} === 0`,()=>t.return(gt.default.data),()=>t.throw((0,We._)`new ${s}(${gt.default.vErrors})`)):(t.assign((0,We._)`${n}.errors`,gt.default.vErrors),i.unevaluated&&Yhe(e),t.return((0,We._)`${gt.default.errors} === 0`))}function Yhe({gen:e,evaluated:t,props:r,items:n}){r instanceof We.Name&&e.assign((0,We._)`${t}.props`,r),n instanceof We.Name&&e.assign((0,We._)`${t}.items`,n)}function oI(e,t,r,n){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=e,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,zu.schemaHasRulesButRef)(i,u))){s.block(()=>QM(e,"$ref",u.all.$ref.definition));return}c.jtd||Qhe(e,t),s.block(()=>{for(const h of u.rules)d(h);d(u.post)});function d(h){(0,J$.shouldUseGroup)(i,h)&&(h.type?(s.if((0,lb.checkDataType)(h.type,o,c.strictNumbers)),aI(e,h),t.length===1&&t[0]===h.type&&r&&(s.else(),(0,lb.reportTypeError)(e)),s.endIf()):aI(e,h),a||s.if((0,We._)`${gt.default.errors} === ${n||0}`))}}function aI(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Mhe.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,J$.shouldUseRule)(n,i)&&QM(e,i.keyword,i.definition,t.type)})}function Qhe(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(eye(e,t),e.opts.allowUnionTypes||tye(e,t),rye(e,e.dataTypes))}function eye(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{ZM(e.dataTypes,r)||G$(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),iye(e,t)}}function tye(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&G$(e,"use allowUnionTypes to allow union type keyword")}function rye(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,J$.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>nye(t,o))&&G$(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function nye(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function ZM(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function iye(e,t){const r=[];for(const n of e.dataTypes)ZM(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function G$(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,zu.checkStrictMode)(e,t,e.opts.strictTypes)}class YM{constructor(t,r,n){if((0,Am.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,zu.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",ej(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Am.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",gt.default.errors))}result(t,r,n){this.failResult((0,We.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,We.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,We._)`${r} !== undefined && (${(0,We.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Ey.reportExtraError:Ey.reportError)(this,this.def.error,r)}$dataError(){(0,Ey.reportError)(this,this.def.$dataError||Ey.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ey.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=We.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=We.nil,r=We.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,We.or)((0,We._)`${s} === undefined`,r)),t!==We.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==We.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,We.or)(o(),a());function o(){if(n.length){if(!(r instanceof We.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,We._)`${(0,lb.checkDataTypes)(c,r,i.opts.strictNumbers,lb.DataType.Wrong)}`}return We.nil}function a(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,We._)`!${c}(${r})`}return We.nil}}subschema(t,r){const n=(0,UE.getSubschema)(this.it,t);(0,UE.extendSubschemaData)(n,this.it,t),(0,UE.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Hhe(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=zu.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=zu.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,We.Name)),!0}}Oo.KeywordCxt=YM;function QM(e,t,r,n){const s=new YM(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Am.funcKeywordCode)(s,r):"macro"in r?(0,Am.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Am.funcKeywordCode)(s,r)}const sye=/^\/(?:[^~]|~0|~1)*$/,oye=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ej(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return gt.default.rootData;if(e[0]==="/"){if(!sye.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=gt.default.rootData}else{const l=oye.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+l[1];if(s=l[2],s==="#"){if(u>=t)throw new Error(c("property/index",u));return n[t-u]}if(u>t)throw new Error(c("data",u));if(i=r[t-u],!s)return i}let o=i;const a=s.split("/");for(const l of a)l&&(i=(0,We._)`${i}${(0,We.getProperty)((0,zu.unescapeJsonPointer)(l))}`,o=(0,We._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${t}`}}Oo.getData=ej;var L0={};Object.defineProperty(L0,"__esModule",{value:!0});let aye=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};L0.default=aye;var q0={};Object.defineProperty(q0,"__esModule",{value:!0});const KE=Xn;class uye extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,KE.resolveUrl)(t,r,n),this.missingSchema=(0,KE.normalizeId)((0,KE.getFullPath)(t,this.missingRef))}}q0.default=uye;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.resolveSchema=qi.getCompilingSchema=qi.resolveRef=qi.compileSchema=qi.SchemaEnv=void 0;const lo=Rt,cye=L0,_d=Ja,So=Xn,uI=Vt,lye=Oo;class P1{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,So.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}qi.SchemaEnv=P1;function X$(e){const t=tj.call(this,e);if(t)return t;const r=(0,So.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new lo.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let a;e.$async&&(a=o.scopeValue("Error",{ref:cye.default,code:(0,lo._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");e.validateName=c;const l={gen:o,allErrors:this.opts.allErrors,data:_d.default.data,parentData:_d.default.parentData,parentDataProperty:_d.default.parentDataProperty,dataNames:[_d.default.data],dataPathArr:[lo.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,lo.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:lo.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,lo._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,lye.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const d=o.toString();u=`${o.scopeRefs(_d.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const f=new Function(`${_d.default.self}`,`${_d.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=e.schema,f.schemaEnv=e,e.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:y}=l;f.evaluated={props:p instanceof lo.Name?void 0:p,items:y instanceof lo.Name?void 0:y,dynamicProps:p instanceof lo.Name,dynamicItems:y instanceof lo.Name},f.source&&(f.source.evaluated=(0,lo.stringify)(f.evaluated))}return e.validate=f,e}catch(d){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(e)}}qi.compileSchema=X$;function dye(e,t,r){var n;r=(0,So.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=hye.call(this,e,r);if(i===void 0){const o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new P1({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=fye.call(this,i)}qi.resolveRef=dye;function fye(e){return(0,So.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:X$.call(this,e)}function tj(e){for(const t of this._compilations)if(pye(t,e))return t}qi.getCompilingSchema=tj;function pye(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function hye(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||k1.call(this,e,t)}function k1(e,t){const r=this.opts.uriResolver.parse(t),n=(0,So._getFullPath)(this.opts.uriResolver,r);let s=(0,So.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return LE.call(this,r,e);const i=(0,So.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=k1.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:LE.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||X$.call(this,o),i===(0,So.normalizeId)(t)){const{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,So.resolveUrl)(this.opts.uriResolver,s,l)),new P1({schema:a,schemaId:c,root:e,baseId:s})}return LE.call(this,r,o)}}qi.resolveSchema=k1;const yye=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function LE(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,uI.unescapeFragment)(a)];if(c===void 0)return;r=c;const l=typeof r=="object"&&r[this.opts.schemaId];!yye.has(a)&&l&&(t=(0,So.resolveUrl)(this.opts.uriResolver,t,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,uI.schemaHasRulesButRef)(r,this.RULES)){const a=(0,So.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=k1.call(this,n,a)}const{schemaId:o}=this.opts;if(i=i||new P1({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}const mye="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",gye="Meta-schema for $data reference (JSON AnySchema extension proposal)",vye="object",wye=["$data"],bye={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},_ye=!1,Eye={$id:mye,description:gye,type:vye,required:wye,properties:bye,additionalProperties:_ye};var Z$={};Object.defineProperty(Z$,"__esModule",{value:!0});const rj=V3;rj.code='require("ajv/dist/runtime/uri").default';Z$.default=rj;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Oo;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=Rt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=L0,s=q0,i=Of,o=qi,a=Rt,c=Xn,l=K0,u=Vt,d=Eye,h=Z$,f=(q,O)=>new RegExp(q,O);f.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function g(q){var O,Y,H,C,B,Z,Q,oe,fe,he,_e,Ie,F,M,re,N,D,k,X,se,le,ue,Ae,ye,V;const W=q.strict,pe=(O=q.code)===null||O===void 0?void 0:O.optimize,ve=pe===!0||pe===void 0?1:pe||0,xe=(H=(Y=q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&H!==void 0?H:f,ht=(C=q.uriResolver)!==null&&C!==void 0?C:h.default;return{strictSchema:(Z=(B=q.strictSchema)!==null&&B!==void 0?B:W)!==null&&Z!==void 0?Z:!0,strictNumbers:(oe=(Q=q.strictNumbers)!==null&&Q!==void 0?Q:W)!==null&&oe!==void 0?oe:!0,strictTypes:(he=(fe=q.strictTypes)!==null&&fe!==void 0?fe:W)!==null&&he!==void 0?he:"log",strictTuples:(Ie=(_e=q.strictTuples)!==null&&_e!==void 0?_e:W)!==null&&Ie!==void 0?Ie:"log",strictRequired:(M=(F=q.strictRequired)!==null&&F!==void 0?F:W)!==null&&M!==void 0?M:!1,code:q.code?{...q.code,optimize:ve,regExp:xe}:{optimize:ve,regExp:xe},loopRequired:(re=q.loopRequired)!==null&&re!==void 0?re:v,loopEnum:(N=q.loopEnum)!==null&&N!==void 0?N:v,meta:(D=q.meta)!==null&&D!==void 0?D:!0,messages:(k=q.messages)!==null&&k!==void 0?k:!0,inlineRefs:(X=q.inlineRefs)!==null&&X!==void 0?X:!0,schemaId:(se=q.schemaId)!==null&&se!==void 0?se:"$id",addUsedSchema:(le=q.addUsedSchema)!==null&&le!==void 0?le:!0,validateSchema:(ue=q.validateSchema)!==null&&ue!==void 0?ue:!0,validateFormats:(Ae=q.validateFormats)!==null&&Ae!==void 0?Ae:!0,unicodeRegExp:(ye=q.unicodeRegExp)!==null&&ye!==void 0?ye:!0,int32range:(V=q.int32range)!==null&&V!==void 0?V:!0,uriResolver:ht}}class m{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...g(O)};const{es5:Y,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:Y,lines:H}),this.logger=T(O.logger);const C=O.validateFormats;O.validateFormats=!1,this.RULES=(0,i.getRules)(),w.call(this,_,O,"NOT SUPPORTED"),w.call(this,b,O,"DEPRECATED","warn"),this._metaOpts=$.call(this),O.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&A.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),S.call(this),O.validateFormats=C}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:Y,schemaId:H}=this.opts;let C=d;H==="id"&&(C={...d},C.id=C.$id,delete C.$id),Y&&O&&this.addMetaSchema(C,C[H],!1)}defaultMeta(){const{meta:O,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[Y]||O:void 0}validate(O,Y){let H;if(typeof O=="string"){if(H=this.getSchema(O),!H)throw new Error(`no schema with key or ref "${O}"`)}else H=this.compile(O);const C=H(Y);return"$async"in H||(this.errors=H.errors),C}compile(O,Y){const H=this._addSchema(O,Y);return H.validate||this._compileSchemaEnv(H)}compileAsync(O,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return C.call(this,O,Y);async function C(he,_e){await B.call(this,he.$schema);const Ie=this._addSchema(he,_e);return Ie.validate||Z.call(this,Ie)}async function B(he){he&&!this.getSchema(he)&&await C.call(this,{$ref:he},!0)}async function Z(he){try{return this._compileSchemaEnv(he)}catch(_e){if(!(_e instanceof s.default))throw _e;return Q.call(this,_e),await oe.call(this,_e.missingSchema),Z.call(this,he)}}function Q({missingSchema:he,missingRef:_e}){if(this.refs[he])throw new Error(`AnySchema ${he} is loaded but ${_e} cannot be resolved`)}async function oe(he){const _e=await fe.call(this,he);this.refs[he]||await B.call(this,_e.$schema),this.refs[he]||this.addSchema(_e,he,Y)}async function fe(he){const _e=this._loading[he];if(_e)return _e;try{return await(this._loading[he]=H(he))}finally{delete this._loading[he]}}}addSchema(O,Y,H,C=this.opts.validateSchema){if(Array.isArray(O)){for(const Z of O)this.addSchema(Z,void 0,H,C);return this}let B;if(typeof O=="object"){const{schemaId:Z}=this.opts;if(B=O[Z],B!==void 0&&typeof B!="string")throw new Error(`schema ${Z} must be string`)}return Y=(0,c.normalizeId)(Y||B),this._checkUnique(Y),this.schemas[Y]=this._addSchema(O,H,Y,C,!0),this}addMetaSchema(O,Y,H=this.opts.validateSchema){return this.addSchema(O,Y,!0,H),this}validateSchema(O,Y){if(typeof O=="boolean")return!0;let H;if(H=O.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const C=this.validate(H,O);if(!C&&Y){const B="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(B);else throw new Error(B)}return C}getSchema(O){let Y;for(;typeof(Y=x.call(this,O))=="string";)O=Y;if(Y===void 0){const{schemaId:H}=this.opts,C=new o.SchemaEnv({schema:{},schemaId:H});if(Y=o.resolveSchema.call(this,C,O),!Y)return;this.refs[O]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=x.call(this,O);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const Y=O;this._cache.delete(Y);let H=O[this.opts.schemaId];return H&&(H=(0,c.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const Y of O)this.addKeyword(Y);return this}addKeyword(O,Y){let H;if(typeof O=="string")H=O,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=H);else if(typeof O=="object"&&Y===void 0){if(Y=O,H=Y.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,H,Y),!Y)return(0,u.eachItem)(H,B=>j.call(this,B)),this;te.call(this,Y);const C={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,u.eachItem)(H,C.type.length===0?B=>j.call(this,B,C):B=>C.type.forEach(Z=>j.call(this,B,C,Z))),this}getKeyword(O){const Y=this.RULES.all[O];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(O){const{RULES:Y}=this;delete Y.keywords[O],delete Y.all[O];for(const H of Y.rules){const C=H.rules.findIndex(B=>B.keyword===O);C>=0&&H.rules.splice(C,1)}return this}addFormat(O,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[O]=Y,this}errorsText(O=this.errors,{separator:Y=", ",dataVar:H="data"}={}){return!O||O.length===0?"No errors":O.map(C=>`${H}${C.instancePath} ${C.message}`).reduce((C,B)=>C+Y+B)}$dataMetaSchema(O,Y){const H=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const C of Y){const B=C.split("/").slice(1);let Z=O;for(const Q of B)Z=Z[Q];for(const Q in H){const oe=H[Q];if(typeof oe!="object")continue;const{$data:fe}=oe.definition,he=Z[Q];fe&&he&&(Z[Q]=ee(he))}}return O}_removeAllSchemas(O,Y){for(const H in O){const C=O[H];(!Y||Y.test(H))&&(typeof C=="string"?delete O[H]:C&&!C.meta&&(this._cache.delete(C.schema),delete O[H]))}}_addSchema(O,Y,H,C=this.opts.validateSchema,B=this.opts.addUsedSchema){let Z;const{schemaId:Q}=this.opts;if(typeof O=="object")Z=O[Q];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let oe=this._cache.get(O);if(oe!==void 0)return oe;H=(0,c.normalizeId)(Z||H);const fe=c.getSchemaRefs.call(this,O,H);return oe=new o.SchemaEnv({schema:O,schemaId:Q,meta:Y,baseId:H,localRefs:fe}),this._cache.set(oe.schema,oe),B&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=oe),C&&this.validateSchema(O,!0),oe}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):o.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const Y=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,O)}finally{this.opts=Y}}}e.default=m,m.ValidationError=n.default,m.MissingRefError=s.default;function w(q,O,Y,H="error"){for(const C in q){const B=C;B in O&&this.logger[H](`${Y}: option ${C}. ${q[B]}`)}}function x(q){return q=(0,c.normalizeId)(q),this.schemas[q]||this.refs[q]}function S(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const O in q)this.addSchema(q[O],O)}function E(){for(const q in this.opts.formats){const O=this.opts.formats[q];O&&this.addFormat(q,O)}}function A(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in q){const Y=q[O];Y.keyword||(Y.keyword=O),this.addKeyword(Y)}}function $(){const q={...this.opts};for(const O of p)delete q[O];return q}const I={log(){},warn(){},error(){}};function T(q){if(q===!1)return I;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function L(q,O){const{RULES:Y}=this;if((0,u.eachItem)(q,H=>{if(Y.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!R.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function j(q,O,Y){var H;const C=O==null?void 0:O.post;if(Y&&C)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:B}=this;let Z=C?B.post:B.rules.find(({type:oe})=>oe===Y);if(Z||(Z={type:Y,rules:[]},B.rules.push(Z)),B.keywords[q]=!0,!O)return;const Q={keyword:q,definition:{...O,type:(0,l.getJSONTypes)(O.type),schemaType:(0,l.getJSONTypes)(O.schemaType)}};O.before?U.call(this,Z,Q,O.before):Z.rules.push(Q),B.all[q]=Q,(H=O.implements)===null||H===void 0||H.forEach(oe=>this.addKeyword(oe))}function U(q,O,Y){const H=q.rules.findIndex(C=>C.keyword===Y);H>=0?q.rules.splice(H,0,O):(q.rules.push(O),this.logger.warn(`rule ${Y} is not defined`))}function te(q){let{metaSchema:O}=q;O!==void 0&&(q.$data&&this.opts.$data&&(O=ee(O)),q.validateSchema=this.compile(O,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ee(q){return{anyOf:[q,z]}}})(IM);var Y$={},Q$={},eD={};Object.defineProperty(eD,"__esModule",{value:!0});const Aye={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};eD.default=Aye;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.callRef=Tf.getValidate=void 0;const Sye=q0,cI=Bt,ji=Rt,sp=Ja,lI=qi,pv=Vt,xye={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();const u=lI.resolveRef.call(c,l,s,r);if(u===void 0)throw new Sye.default(n.opts.uriResolver,s,r);if(u instanceof lI.SchemaEnv)return h(u);return f(u);function d(){if(i===l)return cw(e,o,i,i.$async);const p=t.scopeValue("root",{ref:l});return cw(e,(0,ji._)`${p}.validate`,l,l.$async)}function h(p){const y=nj(e,p);cw(e,y,p,p.$async)}function f(p){const y=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ji.stringify)(p)}:{ref:p}),_=t.name("valid"),b=e.subschema({schema:p,dataTypes:[],schemaPath:ji.nil,topSchemaRef:y,errSchemaPath:r},_);e.mergeEvaluated(b),e.ok(_)}}};function nj(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ji._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Tf.getValidate=nj;function cw(e,t,r,n){const{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?sp.default.this:ji.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=s.let("valid");s.try(()=>{s.code((0,ji._)`await ${(0,cI.callValidateCode)(e,t,l)}`),f(t),o||s.assign(p,!0)},y=>{s.if((0,ji._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),h(y),o||s.assign(p,!1)}),e.ok(p)}function d(){e.result((0,cI.callValidateCode)(e,t,l),()=>f(t),()=>h(t))}function h(p){const y=(0,ji._)`${p}.errors`;s.assign(sp.default.vErrors,(0,ji._)`${sp.default.vErrors} === null ? ${y} : ${sp.default.vErrors}.concat(${y})`),s.assign(sp.default.errors,(0,ji._)`${sp.default.vErrors}.length`)}function f(p){var y;if(!i.opts.unevaluated)return;const _=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(i.props=pv.mergeEvaluated.props(s,_.props,i.props));else{const b=s.var("props",(0,ji._)`${p}.evaluated.props`);i.props=pv.mergeEvaluated.props(s,b,i.props,ji.Name)}if(i.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(i.items=pv.mergeEvaluated.items(s,_.items,i.items));else{const b=s.var("items",(0,ji._)`${p}.evaluated.items`);i.items=pv.mergeEvaluated.items(s,b,i.items,ji.Name)}}}Tf.callRef=cw;Tf.default=xye;Object.defineProperty(Q$,"__esModule",{value:!0});const $ye=eD,Dye=Tf,Cye=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$ye.default,Dye.default];Q$.default=Cye;var tD={},rD={};Object.defineProperty(rD,"__esModule",{value:!0});const db=Rt,Fc=db.operators,fb={maximum:{okStr:"<=",ok:Fc.LTE,fail:Fc.GT},minimum:{okStr:">=",ok:Fc.GTE,fail:Fc.LT},exclusiveMaximum:{okStr:"<",ok:Fc.LT,fail:Fc.GTE},exclusiveMinimum:{okStr:">",ok:Fc.GT,fail:Fc.LTE}},Pye={message:({keyword:e,schemaCode:t})=>(0,db.str)`must be ${fb[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,db._)`{comparison: ${fb[e].okStr}, limit: ${t}}`},kye={keyword:Object.keys(fb),type:"number",schemaType:"number",$data:!0,error:Pye,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,db._)`${r} ${fb[t].fail} ${n} || isNaN(${r})`)}};rD.default=kye;var nD={};Object.defineProperty(nD,"__esModule",{value:!0});const Sm=Rt,Oye={message:({schemaCode:e})=>(0,Sm.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Sm._)`{multipleOf: ${e}}`},Tye={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Oye,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,Sm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Sm._)`${o} !== parseInt(${o})`;e.fail$data((0,Sm._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};nD.default=Tye;var iD={},sD={};Object.defineProperty(sD,"__esModule",{value:!0});function ij(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}sD.default=ij;ij.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(iD,"__esModule",{value:!0});const qd=Rt,Iye=Vt,Bye=sD,Fye={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,qd.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,qd._)`{limit: ${e}}`},Nye={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Fye,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?qd.operators.GT:qd.operators.LT,o=s.opts.unicode===!1?(0,qd._)`${r}.length`:(0,qd._)`${(0,Iye.useFunc)(e.gen,Bye.default)}(${r})`;e.fail$data((0,qd._)`${o} ${i} ${n}`)}};iD.default=Nye;var oD={};Object.defineProperty(oD,"__esModule",{value:!0});const Rye=Bt,pb=Rt,Mye={message:({schemaCode:e})=>(0,pb.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,pb._)`{pattern: ${e}}`},jye={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Mye,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,pb._)`(new RegExp(${s}, ${o}))`:(0,Rye.usePattern)(e,n);e.fail$data((0,pb._)`!${a}.test(${t})`)}};oD.default=jye;var aD={};Object.defineProperty(aD,"__esModule",{value:!0});const xm=Rt,Uye={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,xm.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,xm._)`{limit: ${e}}`},Kye={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Uye,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?xm.operators.GT:xm.operators.LT;e.fail$data((0,xm._)`Object.keys(${r}).length ${s} ${n}`)}};aD.default=Kye;var uD={};Object.defineProperty(uD,"__esModule",{value:!0});const Ay=Bt,$m=Rt,Lye=Vt,qye={message:({params:{missingProperty:e}})=>(0,$m.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,$m._)`{missingProperty: ${e}}`},Vye={keyword:"required",type:"object",schemaType:"array",$data:!0,error:qye,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;const c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){const f=e.parentSchema.properties,{definedProperties:p}=e.it;for(const y of r)if((f==null?void 0:f[y])===void 0&&!p.has(y)){const _=o.schemaEnv.baseId+o.errSchemaPath,b=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,Lye.checkStrictMode)(o,b,o.opts.strictRequired)}}function l(){if(c||i)e.block$data($m.nil,d);else for(const f of r)(0,Ay.checkReportMissingProp)(e,f)}function u(){const f=t.let("missing");if(c||i){const p=t.let("valid",!0);e.block$data(p,()=>h(f,p)),e.ok(p)}else t.if((0,Ay.checkMissingProp)(e,r,f)),(0,Ay.reportMissingProp)(e,f),t.else()}function d(){t.forOf("prop",n,f=>{e.setParams({missingProperty:f}),t.if((0,Ay.noPropertyInData)(t,s,f,a.ownProperties),()=>e.error())})}function h(f,p){e.setParams({missingProperty:f}),t.forOf(f,n,()=>{t.assign(p,(0,Ay.propertyInData)(t,s,f,a.ownProperties)),t.if((0,$m.not)(p),()=>{e.error(),t.break()})},$m.nil)}}};uD.default=Vye;var cD={};Object.defineProperty(cD,"__esModule",{value:!0});const Dm=Rt,Hye={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Dm.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Dm._)`{limit: ${e}}`},zye={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Hye,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?Dm.operators.GT:Dm.operators.LT;e.fail$data((0,Dm._)`${r}.length ${s} ${n}`)}};cD.default=zye;var lD={};Object.defineProperty(lD,"__esModule",{value:!0});const qE=K0,Hn=Rt,Wye=Vt,Jye=k0,Gye={message:({params:{i:e,j:t}})=>(0,Hn.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Hn._)`{i: ${e}, j: ${t}}`},Xye={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Gye,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;const c=t.let("valid"),l=i.items?(0,qE.getSchemaTypes)(i.items):[];e.block$data(c,u,(0,Hn._)`${o} === false`),e.ok(c);function u(){const p=t.let("i",(0,Hn._)`${r}.length`),y=t.let("j");e.setParams({i:p,j:y}),t.assign(c,!0),t.if((0,Hn._)`${p} > 1`,()=>(d()?h:f)(p,y))}function d(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,y){const _=t.name("item"),b=(0,qE.checkDataTypes)(l,_,a.opts.strictNumbers,qE.DataType.Wrong),v=t.const("indices",(0,Hn._)`{}`);t.for((0,Hn._)`;${p}--;`,()=>{t.let(_,(0,Hn._)`${r}[${p}]`),t.if(b,(0,Hn._)`continue`),l.length>1&&t.if((0,Hn._)`typeof ${_} == "string"`,(0,Hn._)`${_} += "_"`),t.if((0,Hn._)`typeof ${v}[${_}] == "number"`,()=>{t.assign(y,(0,Hn._)`${v}[${_}]`),e.error(),t.assign(c,!1).break()}).code((0,Hn._)`${v}[${_}] = ${p}`)})}function f(p,y){const _=(0,Wye.useFunc)(t,Jye.default),b=t.name("outer");t.label(b).for((0,Hn._)`;${p}--;`,()=>t.for((0,Hn._)`${y} = ${p}; ${y}--;`,()=>t.if((0,Hn._)`${_}(${r}[${p}], ${r}[${y}])`,()=>{e.error(),t.assign(c,!1).break(b)})))}}};lD.default=Xye;var dD={};Object.defineProperty(dD,"__esModule",{value:!0});const J2=Rt,Zye=Vt,Yye=k0,Qye={message:"must be equal to constant",params:({schemaCode:e})=>(0,J2._)`{allowedValue: ${e}}`},eme={keyword:"const",$data:!0,error:Qye,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,J2._)`!${(0,Zye.useFunc)(t,Yye.default)}(${r}, ${s})`):e.fail((0,J2._)`${i} !== ${r}`)}};dD.default=eme;var fD={};Object.defineProperty(fD,"__esModule",{value:!0});const Zy=Rt,tme=Vt,rme=k0,nme={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Zy._)`{allowedValues: ${e}}`},ime={keyword:"enum",schemaType:"array",$data:!0,error:nme,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const l=()=>c??(c=(0,tme.useFunc)(t,rme.default));let u;if(a||n)u=t.let("valid"),e.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const f=t.const("vSchema",i);u=(0,Zy.or)(...s.map((p,y)=>h(f,y)))}e.pass(u);function d(){t.assign(u,!1),t.forOf("v",i,f=>t.if((0,Zy._)`${l()}(${r}, ${f})`,()=>t.assign(u,!0).break()))}function h(f,p){const y=s[p];return typeof y=="object"&&y!==null?(0,Zy._)`${l()}(${r}, ${f}[${p}])`:(0,Zy._)`${r} === ${y}`}}};fD.default=ime;Object.defineProperty(tD,"__esModule",{value:!0});const sme=rD,ome=nD,ame=iD,ume=oD,cme=aD,lme=uD,dme=cD,fme=lD,pme=dD,hme=fD,yme=[sme.default,ome.default,ame.default,ume.default,cme.default,lme.default,dme.default,fme.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},pme.default,hme.default];tD.default=yme;var pD={},xh={};Object.defineProperty(xh,"__esModule",{value:!0});xh.validateAdditionalItems=void 0;const Vd=Rt,G2=Vt,mme={message:({params:{len:e}})=>(0,Vd.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Vd._)`{limit: ${e}}`},gme={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:mme,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,G2.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}sj(e,n)}};function sj(e,t){const{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;const a=r.const("len",(0,Vd._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Vd._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,G2.alwaysValidSchema)(o,n)){const l=r.var("valid",(0,Vd._)`${a} <= ${t.length}`);r.if((0,Vd.not)(l),()=>c(l)),e.ok(l)}function c(l){r.forRange("i",t.length,a,u=>{e.subschema({keyword:i,dataProp:u,dataPropType:G2.Type.Num},l),o.allErrors||r.if((0,Vd.not)(l),()=>r.break())})}}xh.validateAdditionalItems=sj;xh.default=gme;var hD={},$h={};Object.defineProperty($h,"__esModule",{value:!0});$h.validateTuple=void 0;const dI=Rt,lw=Vt,vme=Bt,wme={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return oj(e,"additionalItems",t);r.items=!0,!(0,lw.alwaysValidSchema)(r,t)&&e.ok((0,vme.validateArray)(e))}};function oj(e,t,r=e.schema){const{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=lw.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),l=n.const("len",(0,dI._)`${i}.length`);r.forEach((d,h)=>{(0,lw.alwaysValidSchema)(a,d)||(n.if((0,dI._)`${l} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},c)),e.ok(c))});function u(d){const{opts:h,errSchemaPath:f}=a,p=r.length,y=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(h.strictTuples&&!y){const _=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${f}"`;(0,lw.checkStrictMode)(a,_,h.strictTuples)}}}$h.validateTuple=oj;$h.default=wme;Object.defineProperty(hD,"__esModule",{value:!0});const bme=$h,_me={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,bme.validateTuple)(e,"items")};hD.default=_me;var yD={};Object.defineProperty(yD,"__esModule",{value:!0});const fI=Rt,Eme=Vt,Ame=Bt,Sme=xh,xme={message:({params:{len:e}})=>(0,fI.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,fI._)`{limit: ${e}}`},$me={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:xme,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,Eme.alwaysValidSchema)(n,t)&&(s?(0,Sme.validateAdditionalItems)(e,s):e.ok((0,Ame.validateArray)(e)))}};yD.default=$me;var mD={};Object.defineProperty(mD,"__esModule",{value:!0});const Ks=Rt,hv=Vt,Dme={message:({params:{min:e,max:t}})=>t===void 0?(0,Ks.str)`must contain at least ${e} valid item(s)`:(0,Ks.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ks._)`{minContains: ${e}}`:(0,Ks._)`{minContains: ${e}, maxContains: ${t}}`},Cme={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Dme,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;let o,a;const{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;const u=t.const("len",(0,Ks._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,hv.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,hv.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,hv.alwaysValidSchema)(i,r)){let y=(0,Ks._)`${u} >= ${o}`;a!==void 0&&(y=(0,Ks._)`${y} && ${u} <= ${a}`),e.pass(y);return}i.items=!0;const d=t.name("valid");a===void 0&&o===1?f(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,Ks._)`${s}.length > 0`,h)):(t.let(d,!1),h()),e.result(d,()=>e.reset());function h(){const y=t.name("_valid"),_=t.let("count",0);f(y,()=>t.if(y,()=>p(_)))}function f(y,_){t.forRange("i",0,u,b=>{e.subschema({keyword:"contains",dataProp:b,dataPropType:hv.Type.Num,compositeRule:!0},y),_()})}function p(y){t.code((0,Ks._)`${y}++`),a===void 0?t.if((0,Ks._)`${y} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,Ks._)`${y} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,Ks._)`${y} >= ${o}`,()=>t.assign(d,!0)))}}};mD.default=Cme;var aj={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Rt,r=Vt,n=Bt;e.error={message:({params:{property:c,depsCount:l,deps:u}})=>{const d=l===1?"property":"properties";return(0,t.str)`must have ${d} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:u,missingProperty:d}})=>(0,t._)`{property: ${c},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[l,u]=i(c);o(c,l),a(c,u)}};function i({schema:c}){const l={},u={};for(const d in c){if(d==="__proto__")continue;const h=Array.isArray(c[d])?l:u;h[d]=c[d]}return[l,u]}function o(c,l=c.schema){const{gen:u,data:d,it:h}=c;if(Object.keys(l).length===0)return;const f=u.let("missing");for(const p in l){const y=l[p];if(y.length===0)continue;const _=(0,n.propertyInData)(u,d,p,h.opts.ownProperties);c.setParams({property:p,depsCount:y.length,deps:y.join(", ")}),h.allErrors?u.if(_,()=>{for(const b of y)(0,n.checkReportMissingProp)(c,b)}):(u.if((0,t._)`${_} && (${(0,n.checkMissingProp)(c,y,f)})`),(0,n.reportMissingProp)(c,f),u.else())}}e.validatePropertyDeps=o;function a(c,l=c.schema){const{gen:u,data:d,keyword:h,it:f}=c,p=u.name("valid");for(const y in l)(0,r.alwaysValidSchema)(f,l[y])||(u.if((0,n.propertyInData)(u,d,y,f.opts.ownProperties),()=>{const _=c.subschema({keyword:h,schemaProp:y},p);c.mergeValidEvaluated(_,p)},()=>u.var(p,!0)),c.ok(p))}e.validateSchemaDeps=a,e.default=s})(aj);var gD={};Object.defineProperty(gD,"__esModule",{value:!0});const uj=Rt,Pme=Vt,kme={message:"property name must be valid",params:({params:e})=>(0,uj._)`{propertyName: ${e.propertyName}}`},Ome={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:kme,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Pme.alwaysValidSchema)(s,r))return;const i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,uj.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};gD.default=Ome;var O1={};Object.defineProperty(O1,"__esModule",{value:!0});const yv=Bt,ho=Rt,Tme=Ja,mv=Vt,Ime={message:"must NOT have additional properties",params:({params:e})=>(0,ho._)`{additionalProperty: ${e.additionalProperty}}`},Bme={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Ime,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,mv.alwaysValidSchema)(o,r))return;const l=(0,yv.allSchemaProperties)(n.properties),u=(0,yv.allSchemaProperties)(n.patternProperties);d(),e.ok((0,ho._)`${i} === ${Tme.default.errors}`);function d(){t.forIn("key",s,_=>{!l.length&&!u.length?p(_):t.if(h(_),()=>p(_))})}function h(_){let b;if(l.length>8){const v=(0,mv.schemaRefOrVal)(o,n.properties,"properties");b=(0,yv.isOwnProperty)(t,v,_)}else l.length?b=(0,ho.or)(...l.map(v=>(0,ho._)`${_} === ${v}`)):b=ho.nil;return u.length&&(b=(0,ho.or)(b,...u.map(v=>(0,ho._)`${(0,yv.usePattern)(e,v)}.test(${_})`))),(0,ho.not)(b)}function f(_){t.code((0,ho._)`delete ${s}[${_}]`)}function p(_){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,mv.alwaysValidSchema)(o,r)){const b=t.name("valid");c.removeAdditional==="failing"?(y(_,b,!1),t.if((0,ho.not)(b),()=>{e.reset(),f(_)})):(y(_,b),a||t.if((0,ho.not)(b),()=>t.break()))}}function y(_,b,v){const g={keyword:"additionalProperties",dataProp:_,dataPropType:mv.Type.Str};v===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,b)}}};O1.default=Bme;var vD={};Object.defineProperty(vD,"__esModule",{value:!0});const Fme=Oo,pI=Bt,VE=Vt,hI=O1,Nme={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&hI.default.code(new Fme.KeywordCxt(i,hI.default,"additionalProperties"));const o=(0,pI.allSchemaProperties)(r);for(const d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=VE.mergeEvaluated.props(t,(0,VE.toHash)(o),i.props));const a=o.filter(d=>!(0,VE.alwaysValidSchema)(i,r[d]));if(a.length===0)return;const c=t.name("valid");for(const d of a)l(d)?u(d):(t.if((0,pI.propertyInData)(t,s,d,i.opts.ownProperties)),u(d),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};vD.default=Nme;var wD={};Object.defineProperty(wD,"__esModule",{value:!0});const yI=Bt,gv=Rt,mI=Vt,gI=Vt,Rme={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,yI.allSchemaProperties)(r),c=a.filter(y=>(0,mI.alwaysValidSchema)(i,r[y]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=t.name("valid");i.props!==!0&&!(i.props instanceof gv.Name)&&(i.props=(0,gI.evaluatedPropsToName)(t,i.props));const{props:d}=i;h();function h(){for(const y of a)l&&f(y),i.allErrors?p(y):(t.var(u,!0),p(y),t.if(u))}function f(y){for(const _ in l)new RegExp(y).test(_)&&(0,mI.checkStrictMode)(i,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",n,_=>{t.if((0,gv._)`${(0,yI.usePattern)(e,y)}.test(${_})`,()=>{const b=c.includes(y);b||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:gI.Type.Str},u),i.opts.unevaluated&&d!==!0?t.assign((0,gv._)`${d}[${_}]`,!0):!b&&!i.allErrors&&t.if((0,gv.not)(u),()=>t.break())})})}}};wD.default=Rme;var bD={};Object.defineProperty(bD,"__esModule",{value:!0});const Mme=Vt,jme={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Mme.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};bD.default=jme;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});const Ume=Bt,Kme={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ume.validateUnion,error:{message:"must match a schema in anyOf"}};_D.default=Kme;var ED={};Object.defineProperty(ED,"__esModule",{value:!0});const dw=Rt,Lme=Vt,qme={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,dw._)`{passingSchemas: ${e.passing}}`},Vme={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:qme,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){i.forEach((u,d)=>{let h;(0,Lme.alwaysValidSchema)(s,u)?t.var(c,!0):h=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&t.if((0,dw._)`${c} && ${o}`).assign(o,!1).assign(a,(0,dw._)`[${a}, ${d}]`).else(),t.if(c,()=>{t.assign(o,!0),t.assign(a,d),h&&e.mergeEvaluated(h,dw.Name)})})}}};ED.default=Vme;var AD={};Object.defineProperty(AD,"__esModule",{value:!0});const Hme=Vt,zme={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((i,o)=>{if((0,Hme.alwaysValidSchema)(n,i))return;const a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};AD.default=zme;var SD={};Object.defineProperty(SD,"__esModule",{value:!0});const hb=Rt,cj=Vt,Wme={message:({params:e})=>(0,hb.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,hb._)`{failingKeyword: ${e.ifClause}}`},Jme={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Wme,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,cj.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=vI(n,"then"),i=vI(n,"else");if(!s&&!i)return;const o=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),s&&i){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(a,l("then",u),l("else",u))}else s?t.if(a,l("then")):t.if((0,hb.not)(a),l("else"));e.pass(o,()=>e.error(!0));function c(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(u)}function l(u,d){return()=>{const h=e.subschema({keyword:u},a);t.assign(o,a),e.mergeValidEvaluated(h,o),d?t.assign(d,(0,hb._)`${u}`):e.setParams({ifClause:u})}}}};function vI(e,t){const r=e.schema[t];return r!==void 0&&!(0,cj.alwaysValidSchema)(e,r)}SD.default=Jme;var xD={};Object.defineProperty(xD,"__esModule",{value:!0});const Gme=Vt,Xme={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Gme.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};xD.default=Xme;Object.defineProperty(pD,"__esModule",{value:!0});const Zme=xh,Yme=hD,Qme=$h,e0e=yD,t0e=mD,r0e=aj,n0e=gD,i0e=O1,s0e=vD,o0e=wD,a0e=bD,u0e=_D,c0e=ED,l0e=AD,d0e=SD,f0e=xD;function p0e(e=!1){const t=[a0e.default,u0e.default,c0e.default,l0e.default,d0e.default,f0e.default,n0e.default,i0e.default,r0e.default,s0e.default,o0e.default];return e?t.push(Yme.default,e0e.default):t.push(Zme.default,Qme.default),t.push(t0e.default),t}pD.default=p0e;var $D={},DD={};Object.defineProperty(DD,"__esModule",{value:!0});const Wr=Rt,h0e={message:({schemaCode:e})=>(0,Wr.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Wr._)`{format: ${e}}`},y0e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:h0e,code(e,t){const{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?h():f();function h(){const p=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),y=r.const("fDef",(0,Wr._)`${p}[${o}]`),_=r.let("fType"),b=r.let("format");r.if((0,Wr._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(_,(0,Wr._)`${y}.type || "string"`).assign(b,(0,Wr._)`${y}.validate`),()=>r.assign(_,(0,Wr._)`"string"`).assign(b,y)),e.fail$data((0,Wr.or)(v(),g()));function v(){return c.strictSchema===!1?Wr.nil:(0,Wr._)`${o} && !${b}`}function g(){const m=u.$async?(0,Wr._)`(${y}.async ? await ${b}(${n}) : ${b}(${n}))`:(0,Wr._)`${b}(${n})`,w=(0,Wr._)`(typeof ${b} == "function" ? ${m} : ${b}.test(${n}))`;return(0,Wr._)`${b} && ${b} !== true && ${_} === ${t} && !${w}`}}function f(){const p=d.formats[i];if(!p){v();return}if(p===!0)return;const[y,_,b]=g(p);y===t&&e.pass(m());function v(){if(c.strictSchema===!1){d.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function g(w){const x=w instanceof RegExp?(0,Wr.regexpCode)(w):c.code.formats?(0,Wr._)`${c.code.formats}${(0,Wr.getProperty)(i)}`:void 0,S=r.scopeValue("formats",{key:i,ref:w,code:x});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,Wr._)`${S}.validate`]:["string",w,S]}function m(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Wr._)`await ${b}(${n})`}return typeof _=="function"?(0,Wr._)`${b}(${n})`:(0,Wr._)`${b}.test(${n})`}}}};DD.default=y0e;Object.defineProperty($D,"__esModule",{value:!0});const m0e=DD,g0e=[m0e.default];$D.default=g0e;var ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.contentVocabulary=ah.metadataVocabulary=void 0;ah.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ah.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Y$,"__esModule",{value:!0});const v0e=Q$,w0e=tD,b0e=pD,_0e=$D,wI=ah,E0e=[v0e.default,w0e.default,(0,b0e.default)(),_0e.default,wI.metadataVocabulary,wI.contentVocabulary];Y$.default=E0e;var CD={},lj={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(lj);Object.defineProperty(CD,"__esModule",{value:!0});const mp=Rt,X2=lj,bI=qi,A0e=Vt,S0e={message:({params:{discrError:e,tagName:t}})=>e===X2.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,mp._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},x0e={keyword:"discriminator",type:"object",schemaType:"object",error:S0e,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",(0,mp._)`${r}${(0,mp.getProperty)(a)}`);t.if((0,mp._)`typeof ${l} == "string"`,()=>u(),()=>e.error(!1,{discrError:X2.DiscrError.Tag,tag:l,tagName:a})),e.ok(c);function u(){const f=h();t.if(!1);for(const p in f)t.elseIf((0,mp._)`${l} === ${p}`),t.assign(c,d(f[p]));t.else(),e.error(!1,{discrError:X2.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function d(f){const p=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:f},p);return e.mergeEvaluated(y,mp.Name),p}function h(){var f;const p={},y=b(s);let _=!0;for(let m=0;m<o.length;m++){let w=o[m];w!=null&&w.$ref&&!(0,A0e.schemaHasRulesButRef)(w,i.self.RULES)&&(w=bI.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,w==null?void 0:w.$ref),w instanceof bI.SchemaEnv&&(w=w.schema));const x=(f=w==null?void 0:w.properties)===null||f===void 0?void 0:f[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);_=_&&(y||b(w)),v(x,m)}if(!_)throw new Error(`discriminator: "${a}" must be required`);return p;function b({required:m}){return Array.isArray(m)&&m.includes(a)}function v(m,w){if(m.const)g(m.const,w);else if(m.enum)for(const x of m.enum)g(x,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(m,w){if(typeof m!="string"||m in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[m]=w}}}};CD.default=x0e;const $0e="http://json-schema.org/draft-07/schema#",D0e="http://json-schema.org/draft-07/schema#",C0e="Core schema meta-schema",P0e={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},k0e=["object","boolean"],O0e={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},T0e={$schema:$0e,$id:D0e,title:C0e,definitions:P0e,type:k0e,properties:O0e,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=IM,n=Y$,s=CD,i=T0e,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=Oo;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=Rt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var d=L0;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=q0;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(H2,H2.exports);var I0e=H2.exports;const B0e=La(I0e);class Ms extends Ra{constructor(r,n,s,i){super(r,n,s);ge(this,"validNext",new Set(["quote","close"]));ge(this,"kind","rfq");ge(this,"metadata");ge(this,"data");ge(this,"privateData");this.metadata=r,this.data=n,this.privateData=i}static async parse(r,n){const s=ro.rawToMessageModel(r),i=new Ms(s.metadata,s.data,s.signature,s.privateData);return await i.verify(),n!=null&&n.requireAllPrivateData?i.verifyAllPrivateData():i.verifyPresentPrivateData(),i}validate(){super.validate(),this.privateData!==void 0&&zm(this.privateData,"rfqPrivate")}static create(r){const n=Ra.generateId("rfq"),s={...r.metadata,kind:"rfq",id:n,exchangeId:n,createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},{data:i,privateData:o}=Ms.hashPrivateData(r.data),a=new Ms(s,i,void 0,o);return a.validateData(),a}static hashPrivateData(r){const n=yo.uint8Array(EY(16)).toBase64Url(),{claims:s,payin:i,payout:o,...a}=r,{paymentDetails:c,...l}=i,{paymentDetails:u,...d}=o,h={...a,payin:l,payout:d};return c!==void 0&&(h.payin.paymentDetailsHash=Ms.digestPrivateData(n,c)),u!==void 0&&(h.payout.paymentDetailsHash=Ms.digestPrivateData(n,u)),s!==void 0&&(s==null?void 0:s.length)>0&&(h.claimsHash=Ms.digestPrivateData(n,s)),{data:h,privateData:{salt:n,payin:{paymentDetails:c},payout:{paymentDetails:u},claims:s}}}verifyAllPrivateData(){if(this.privateData===void 0)throw new Error("Could not verify all privateData because privateData property is missing");this.data.payin.paymentDetailsHash!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.verifyClaimsHash()}verifyPresentPrivateData(){var r,n,s,i,o;this.data.payin.paymentDetailsHash!==void 0&&((n=(r=this.privateData)==null?void 0:r.payin)==null?void 0:n.paymentDetails)!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&((i=(s=this.privateData)==null?void 0:s.payout)==null?void 0:i.paymentDetails)!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&((o=this.privateData)==null?void 0:o.claims)!==void 0&&this.verifyClaimsHash()}verifyPayinDetailsHash(){var n,s;if(Ms.digestPrivateData(this.privateData.salt,(s=(n=this.privateData)==null?void 0:n.payin)==null?void 0:s.paymentDetails)!==this.data.payin.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payin.paymentDetailsHash does not match digest of privateData.payin.paymentDetails")}verifyPayoutDetailsHash(){var n,s;if(Ms.digestPrivateData(this.privateData.salt,(s=(n=this.privateData)==null?void 0:n.payout)==null?void 0:s.paymentDetails)!==this.data.payout.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payout.paymentDetailsHash does not match digest of privateData.payout.paymentDetails")}verifyClaimsHash(){var i;const r=this.data.claimsHash,n=(i=this.privateData)==null?void 0:i.claims;if(Ms.digestPrivateData(this.privateData.salt,n)!==r)throw new Error("Private data integrity check failed: data.claimsHash does not match digest of privateData.claims")}static digestPrivateData(r,n){const s=[r,n],i=df.digest(s);return yo.uint8Array(i).toBase64Url()}async verifyOfferingRequirements(r){var s,i,o,a;if(r.metadata.protocol!==this.metadata.protocol)throw new Error(`protocol version mismatch. (rfq) ${this.metadata.protocol} !== ${r.metadata.protocol} (offering)`);if(r.metadata.id!==this.data.offeringId)throw new Error(`offering id mismatch. (rfq) ${this.data.offeringId} !== ${r.metadata.id} (offering)`);let n;if(r.data.payin.max){n=Ug(this.data.payin.amount);const c=Ug(r.data.payin.max);if(n.isGreaterThan(c))throw new Error(`rfq payinAmount exceeds offering's maxAmount. (rfq) ${this.data.payin.amount} > ${r.data.payin.max} (offering)`)}if(r.data.payin.min){n??(n=Ug(this.data.payin.amount));const c=Ug(r.data.payin.min);if(n.isLessThan(c))throw new Error(`rfq payinAmount is below offering's minAmount. (rfq) ${this.data.payin.amount} > ${r.data.payin.min} (offering)`)}this.verifyPaymentMethod(this.data.payin.kind,this.data.payin.paymentDetailsHash,(i=(s=this.privateData)==null?void 0:s.payin)==null?void 0:i.paymentDetails,r.data.payin.methods,"payin"),this.verifyPaymentMethod(this.data.payout.kind,this.data.payout.paymentDetailsHash,(a=(o=this.privateData)==null?void 0:o.payout)==null?void 0:a.paymentDetails,r.data.payout.methods,"payout"),await this.verifyClaims(r)}verifyPaymentMethod(r,n,s,i,o){const a=i.filter(u=>u.kind===r);if(!a.length){const u=i.map(d=>d.kind).join(", ");throw new Error(`offering does not support rfq's ${o}Method kind. (rfq) ${r} was not found in: [${u}] (offering)`)}const c=new B0e.default,l=new Set;for(const u of a)if(u.requiredPaymentDetails){const d=c.compile(u.requiredPaymentDetails);if(d(s))return;l.add(d.errors)}else{if(n===void 0)return;l.add(new Error("paymentDetails must be omitted when requiredPaymentDetails is omitted"))}throw new Error(`rfq ${o}Method paymentDetails could not be validated against offering requiredPaymentDetails. Schema validation errors: ${Array.from(l).join()}`)}async verifyClaims(r){var s;if(!r.data.requiredClaims)return;const n=sb.selectCredentials({vcJwts:((s=this.privateData)==null?void 0:s.claims)??[],presentationDefinition:r.data.requiredClaims});if(n.length===0)throw new Error("claims do not fulfill the offering's requirements");for(let i of n)await cb.verify({vcJwt:i})}toJSON(){const r=super.toJSON();return this.privateData!==void 0&&(r.privateData=this.privateData),r}}class yb extends Ra{constructor(r,n,s){super(r,n,s);ge(this,"validNext",new Set(["order","close"]));ge(this,"kind","quote");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToMessageModel(r),s=new yb(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"quote",id:Ra.generateId("quote"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new yb(n,r.data);return s.validateData(),s}}class c0 extends Ra{constructor(r,n,s){super(r,n,s);ge(this,"validNext",new Set(["orderstatus"]));ge(this,"kind","order");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToMessageModel(r),s=new c0(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"order",id:Ra.generateId("order"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new c0(n,{});return s.validateData(),s}}class mb extends Ra{constructor(r,n,s){super(r,n,s);ge(this,"validNext",new Set(["orderstatus","close"]));ge(this,"kind","orderstatus");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToMessageModel(r),s=new mb(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"orderstatus",id:Ra.generateId("orderstatus"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new mb(n,r.data);return s.validateData(),s}get orderStatus(){return this.data.orderStatus}}class uh extends Ra{constructor(r,n,s){super(r,n,s);ge(this,"validNext",new Set([]));ge(this,"kind","close");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToMessageModel(r),s=new uh(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"close",id:Ra.generateId("close"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new uh(n,r.data);return s.validateData(),s}get reason(){return this.data.reason}}class ro{constructor(){}static async parseMessage(t){const r=ro.rawToMessageModel(t);let n;switch(r.metadata.kind){case"rfq":n=new Ms(r.metadata,r.data,r.signature,r.privateData);break;case"quote":n=new yb(r.metadata,r.data,r.signature);break;case"order":n=new c0(r.metadata,r.data,r.signature);break;case"orderstatus":n=new mb(r.metadata,r.data,r.signature);break;case"close":n=new uh(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized message kind (${r.metadata.kind})`)}return await n.verify(),n}static async parseResource(t){const r=ro.rawToResourceModel(t);let n;switch(r.metadata.kind){case"offering":n=new l0(r.metadata,r.data,r.signature);break;case"balance":n=new gb(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized resource kind (${r.metadata.kind})`)}return await n.verify(),n}static rawToMessageModel(t){try{return typeof t=="string"?JSON.parse(t):t}catch(r){const n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse message. Error: ${n}`)}}static rawToResourceModel(t){try{return typeof t=="string"?JSON.parse(t):t}catch(r){const n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse resource. Error: ${n}`)}}}class l0 extends Lw{constructor(r,n,s){super(r,n,s);ge(this,"kind","offering");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToResourceModel(r),s=new l0(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"offering",id:Lw.generateId("offering"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new l0(n,r.data);return s.validateData(),s}}class gb extends Lw{constructor(r,n,s){super(r,n,s);ge(this,"kind","balance");ge(this,"metadata");ge(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=ro.rawToResourceModel(r),s=new gb(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"balance",id:Lw.generateId("balance"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new gb(n,r.data);return s.validateData(),s}}class Sy extends Error{constructor(r){super(r.message,{cause:r.cause});ge(this,"recipientDid");ge(this,"url");this.name=this.constructor.name,this.recipientDid=r.recipientDid,this.url=r.url}}class xy extends Error{constructor(r){super();ge(this,"statusCode");ge(this,"details");ge(this,"recipientDid");ge(this,"url");this.name=this.constructor.name,this.statusCode=r.statusCode,this.details=r.details,this.recipientDid=r.recipientDid,this.url=r.url}}class dj extends Error{constructor(t){super(t),this.name=this.constructor.name}}class F0e extends dj{}class N0e extends dj{}class V0 extends Error{constructor(t){super(t.message,{cause:t.cause}),this.name=this.constructor.name}}class R0e extends V0{}class M0e extends V0{}class j0e extends V0{}class U0e extends V0{}class K0e extends V0{}var _I;(function(e){e.authentication="authentication",e.assertionMethod="assertionMethod",e.keyAgreement="keyAgreement",e.capabilityInvocation="capabilityInvocation",e.capabilityDelegation="capabilityDelegation"})(_I||(_I={}));var EI;(function(e){e.InvalidDid="invalidDid",e.MethodNotSupported="methodNotSupported",e.InternalError="internalError",e.InvalidDidDocument="invalidDidDocument",e.InvalidDidDocumentLength="invalidDidDocumentLength",e.InvalidDidUrl="invalidDidUrl",e.InvalidPreviousDidProof="invalidPreviousDidProof",e.InvalidPublicKey="invalidPublicKey",e.InvalidPublicKeyLength="invalidPublicKeyLength",e.InvalidPublicKeyType="invalidPublicKeyType",e.InvalidSignature="invalidSignature",e.NotFound="notFound",e.RepresentationNotSupported="representationNotSupported",e.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(EI||(EI={}));function L0e(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var q0e=L0e,V0e=q0e;const H0e=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};let z0e=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},W0e=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return fj(this,t)}},J0e=class{constructor(t){this.decoders=t}or(t){return fj(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const fj=(e,t)=>new J0e({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let G0e=class{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new z0e(t,r,n),this.decoder=new W0e(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const pj=({name:e,prefix:t,encode:r,decode:n})=>new G0e(e,t,r,n),hj=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=V0e(r,t);return pj({prefix:e,name:t,encode:n,decode:i=>H0e(s(i))})},X0e=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Z0e=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},vs=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>pj({prefix:t,name:e,encode(s){return Z0e(s,n,r)},decode(s){return X0e(s,n,r,e)}});vs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});vs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});vs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});vs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});vs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});vs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});vs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});vs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});vs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});hj({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});hj({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});vs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});vs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});vs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});vs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});new TextEncoder;new TextDecoder;var Y0e=yj,AI=128,Q0e=127,ege=~Q0e,tge=Math.pow(2,31);function yj(e,t,r){t=t||[],r=r||0;for(var n=r;e>=tge;)t[r++]=e&255|AI,e/=128;for(;e&ege;)t[r++]=e&255|AI,e>>>=7;return t[r]=e|0,yj.bytes=r-n+1,t}var rge=Z2,nge=128,SI=127;function Z2(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw Z2.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&SI)<<s:(o&SI)*Math.pow(2,s),s+=7}while(o>=nge);return Z2.bytes=i-n,r}var ige=Math.pow(2,7),sge=Math.pow(2,14),oge=Math.pow(2,21),age=Math.pow(2,28),uge=Math.pow(2,35),cge=Math.pow(2,42),lge=Math.pow(2,49),dge=Math.pow(2,56),fge=Math.pow(2,63),pge=function(e){return e<ige?1:e<sge?2:e<oge?3:e<age?4:e<uge?5:e<cge?6:e<lge?7:e<dge?8:e<fge?9:10},hge={encode:Y0e,decode:rge,encodingLength:pge},vb=hge;const xI=(e,t=0)=>[vb.decode(e,t),vb.decode.bytes],yge=(e,t,r=0)=>(vb.encode(e,t,r),t),mge=e=>vb.encodingLength(e);let Jl=class Qc{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Qc.codeToName.has(n)?n:Qc.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=mge(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),yge(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=xI(r);return n}static getCodeFromName(t){const{name:r}=t,n=Qc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=Qc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){Qc.codeToName.set(t.code,t.name),Qc.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=xI(r),i=Qc.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Jl.codeToName=new Map;Jl.nameToCode=new Map;Jl.registerCodec({code:237,name:"ed25519-pub"});Jl.registerCodec({code:4864,name:"ed25519-priv"});Jl.registerCodec({code:236,name:"x25519-pub"});Jl.registerCodec({code:4866,name:"x25519-priv"});Jl.registerCodec({code:231,name:"secp256k1-pub"});Jl.registerCodec({code:4865,name:"secp256k1-priv"});function gge({didDocument:e,id:t,type:r}){var n,s;return(s=(n=e==null?void 0:e.service)===null||n===void 0?void 0:n.filter(i=>!(t&&i.id!==t||r&&i.type!==r)))!==null&&s!==void 0?s:[]}var $I;(function(e){e[e.Discoverable=0]="Discoverable",e[e.Organization=1]="Organization",e[e.Government=2]="Government",e[e.Corporation=3]="Corporation",e[e.LocalBusiness=4]="LocalBusiness",e[e.SoftwarePackage=5]="SoftwarePackage",e[e.WebApp=6]="WebApp",e[e.FinancialInstitution=7]="FinancialInstitution"})($I||($I={}));var is;(function(e){e[e.Ed25519=0]="Ed25519",e[e.secp256k1=1]="secp256k1",e[e.secp256r1=2]="secp256r1",e[e.X25519=3]="X25519"})(is||(is={}));var DI;(function(e){e.authentication="auth",e.assertionMethod="asm",e.capabilityDelegation="del",e.capabilityInvocation="inv",e.keyAgreement="agm"})(DI||(DI={}));is.Ed25519,is.secp256k1,is.secp256r1,is.secp256r1,is.secp256k1,is.secp256r1,is.X25519;is.Ed25519+"",is.secp256k1+"",is.secp256r1+"",is.X25519+"";var al;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(al||(al={}));al.Ed25519,al.secp256k1,al.secp256r1,al.secp256r1,al.secp256k1,al.secp256r1;var Su;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(Su||(Su={}));Su.Ed25519,Su.secp256k1,Su.secp256r1,Su.secp256r1,Su.secp256k1,Su.secp256r1,Su.X25519;const mj="%[a-f0-9]{2}",CI=new RegExp("("+mj+")|([^%]+?)","gi"),PI=new RegExp("("+mj+")+","gi");function Y2(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Y2(r),Y2(n))}function vge(e){try{return decodeURIComponent(e)}catch{let t=e.match(CI)||[];for(let r=1;r<t.length;r++)e=Y2(t,r).join(""),t=e.match(CI)||[];return e}}function wge(e){const t={"%FE%FF":"","%FF%FE":""};let r=PI.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const s=vge(r[0]);s!==r[0]&&(t[r[0]]=s)}r=PI.exec(e)}t["%C2"]="";const n=Object.keys(t);for(const s of n)e=e.replace(new RegExp(s,"g"),t[s]);return e}function bge(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return wge(e)}}function gj(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function _ge(e,t){const r={};if(Array.isArray(t))for(const n of t){const s=Object.getOwnPropertyDescriptor(e,n);s!=null&&s.enumerable&&Object.defineProperty(r,n,s)}else for(const n of Reflect.ownKeys(e)){const s=Object.getOwnPropertyDescriptor(e,n);if(s.enumerable){const i=e[n];t(n,i,e)&&Object.defineProperty(r,n,s)}}return r}const Ege=e=>e==null,Age=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Q2=Symbol("encodeFragmentIdentifier");function Sge(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const s=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[en(t,e),"[",s,"]"].join("")]:[...r,[en(t,e),"[",en(s,e),"]=",en(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[en(t,e),"[]"].join("")]:[...r,[en(t,e),"[]=",en(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[en(t,e),":list="].join("")]:[...r,[en(t,e),":list=",en(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,s)=>s===void 0||e.skipNull&&s===null||e.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[en(r,e),t,en(s,e)].join("")]:[[n,en(s,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,en(t,e)]:[...r,[en(t,e),"=",en(n,e)].join("")]}}function xge(e){let t;switch(e.arrayFormat){case"index":return(r,n,s)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){s[r]=n;return}s[r]===void 0&&(s[r]={}),s[r][t[1]]=n};case"bracket":return(r,n,s)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"colon-list-separator":return(r,n,s)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"comma":case"separator":return(r,n,s)=>{const i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),o=typeof n=="string"&&!i&&Iu(n,e).includes(e.arrayFormatSeparator);n=o?Iu(n,e):n;const a=i||o?n.split(e.arrayFormatSeparator).map(c=>Iu(c,e)):n===null?n:Iu(n,e);s[r]=a};case"bracket-separator":return(r,n,s)=>{const i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){s[r]=n&&Iu(n,e);return}const o=n===null?[]:n.split(e.arrayFormatSeparator).map(a=>Iu(a,e));if(s[r]===void 0){s[r]=o;return}s[r]=[...s[r],...o]};default:return(r,n,s)=>{if(s[r]===void 0){s[r]=n;return}s[r]=[...[s[r]].flat(),n]}}}function vj(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function en(e,t){return t.encode?t.strict?Age(e):encodeURIComponent(e):e}function Iu(e,t){return t.decode?bge(e):e}function wj(e){return Array.isArray(e)?e.sort():typeof e=="object"?wj(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function bj(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function $ge(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function kI(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function PD(e){e=bj(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function kD(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},vj(t.arrayFormatSeparator);const r=xge(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const s of e.split("&")){if(s==="")continue;const i=t.decode?s.replace(/\+/g," "):s;let[o,a]=gj(i,"=");o===void 0&&(o=i),a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Iu(a,t),r(Iu(o,t),a,n)}for(const[s,i]of Object.entries(n))if(typeof i=="object"&&i!==null)for(const[o,a]of Object.entries(i))i[o]=kI(a,t);else n[s]=kI(i,t);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((s,i)=>{const o=n[i];return s[i]=o&&typeof o=="object"&&!Array.isArray(o)?wj(o):o,s},Object.create(null))}function _j(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},vj(t.arrayFormatSeparator);const r=o=>t.skipNull&&Ege(e[o])||t.skipEmptyString&&e[o]==="",n=Sge(t),s={};for(const[o,a]of Object.entries(e))r(o)||(s[o]=a);const i=Object.keys(s);return t.sort!==!1&&i.sort(t.sort),i.map(o=>{const a=e[o];return a===void 0?"":a===null?en(o,t):Array.isArray(a)?a.length===0&&t.arrayFormat==="bracket-separator"?en(o,t)+"[]":a.reduce(n(o),[]).join("&"):en(o,t)+"="+en(a,t)}).filter(o=>o.length>0).join("&")}function Ej(e,t){var s;t={decode:!0,...t};let[r,n]=gj(e,"#");return r===void 0&&(r=e),{url:((s=r==null?void 0:r.split("?"))==null?void 0:s[0])??"",query:kD(PD(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:Iu(n,t)}:{}}}function Aj(e,t){t={encode:!0,strict:!0,[Q2]:!0,...t};const r=bj(e.url).split("?")[0]||"",n=PD(e.url),s={...kD(n,{sort:!1}),...e.query};let i=_j(s,t);i&&(i=`?${i}`);let o=$ge(e.url);if(e.fragmentIdentifier){const a=new URL(r);a.hash=e.fragmentIdentifier,o=t[Q2]?a.hash:`#${e.fragmentIdentifier}`}return`${r}${i}${o}`}function Sj(e,t,r){r={parseFragmentIdentifier:!0,[Q2]:!1,...r};const{url:n,query:s,fragmentIdentifier:i}=Ej(e,r);return Aj({url:n,query:_ge(s,t),fragmentIdentifier:i},r)}function Dge(e,t,r){const n=Array.isArray(t)?s=>!t.includes(s):(s,i)=>!t(s,i);return Sj(e,n,r)}const Cge=Object.freeze(Object.defineProperty({__proto__:null,exclude:Dge,extract:PD,parse:kD,parseUrl:Ej,pick:Sj,stringify:_j,stringifyUrl:Aj},Symbol.toStringTag,{value:"Module"})),OI=["aud","iss","exp","iat","jti"];class Jn{static async createExchange(t,r){await t.verify();const{to:n}=t.metadata,s=JSON.stringify({rfq:t,replyTo:r==null?void 0:r.replyTo});await Jn.sendMessage(n,"POST","/exchanges",s)}static async submitOrder(t){await t.verify();const{to:r,exchangeId:n}=t.metadata,s=JSON.stringify(t);await Jn.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async submitClose(t){await t.verify();const{to:r,exchangeId:n}=t.metadata,s=JSON.stringify(t);await Jn.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async sendMessage(t,r,n,s){const o=`${await Jn.getPfiServiceEndpoint(t)}${n}`;let a;try{a=await fetch(o,{method:r,headers:{"content-type":"application/json"},body:s})}catch(c){throw new Sy({message:`Failed to send message to ${t}`,recipientDid:t,url:o,cause:c})}if(!a.ok){const c=await a.json();throw new xy({statusCode:a.status,details:c,recipientDid:t,url:o})}}static async getOfferings(t){const{pfiDid:r}=t,s=`${await Jn.getPfiServiceEndpoint(r)}/offerings`;let i;try{i=await fetch(s)}catch(l){throw new Sy({message:`Failed to get offerings from ${r}`,recipientDid:r,url:s,cause:l})}const o=[];if(!i.ok){const l=await i.json();throw new xy({statusCode:i.status,details:l,recipientDid:r,url:s})}const c=(await i.json()).data;for(let l of c){const u=await l0.parse(l);o.push(u)}return o}static async getBalances(t){const{pfiDid:r,did:n}=t,i=`${await Jn.getPfiServiceEndpoint(r)}/balances`,o=await Jn.generateRequestToken({requesterDid:n,pfiDid:r});let a;try{a=await fetch(i,{headers:{authorization:`Bearer ${o}`}})}catch(u){throw new Sy({message:`Failed to get balances from ${r}`,recipientDid:r,url:i,cause:u})}if(!a.ok){const u=await a.json();throw new xy({statusCode:a.status,details:u,recipientDid:r,url:i})}return(await a.json()).data}static async getExchange(t){const{pfiDid:r,exchangeId:n,did:s}=t,o=`${await Jn.getPfiServiceEndpoint(r)}/exchanges/${n}`,a=await Jn.generateRequestToken({requesterDid:s,pfiDid:r});let c;try{c=await fetch(o,{headers:{authorization:`Bearer ${a}`}})}catch(d){throw new Sy({message:`Failed to get exchange from ${r}`,recipientDid:r,url:o,cause:d})}const l=[];if(!c.ok){const d=await c.json();throw new xy({statusCode:c.status,details:d,recipientDid:r,url:o})}const u=await c.json();for(let d of u.data){const h=await ro.parseMessage(d);l.push(h)}return l}static async getExchanges(t){const{pfiDid:r,filter:n,did:s}=t,i=await Jn.getPfiServiceEndpoint(r),o=n?`?${Cge.stringify(n)}`:"",a=`${i}/exchanges${o}`,c=await Jn.generateRequestToken({requesterDid:s,pfiDid:r});let l;try{l=await fetch(a,{headers:{authorization:`Bearer ${c}`}})}catch(h){throw new Sy({message:`Failed to get exchanges from ${r}`,recipientDid:r,url:a,cause:h})}const u=[];if(!l.ok){const h=await l.json();throw new xy({statusCode:l.status,details:h,recipientDid:r,url:a})}const d=await l.json();for(let h of d.data){const f=[];for(let p of h){const y=await ro.parseMessage(p);f.push(y)}u.push(f)}return u}static async getPfiServiceEndpoint(t){let r;try{r=await Gee(t)}catch(s){throw new F0e(s.message)}const[n]=gge({didDocument:r,type:"PFI"});if(!(n!=null&&n.serviceEndpoint))throw new N0e(`${t} has no PFI service entry`);return n.serviceEndpoint}static async generateRequestToken(t){const{pfiDid:r,requesterDid:n}=t,s=Date.now(),i=s+zee("1m"),o={aud:r,iss:n.uri,exp:Math.floor(i/1e3),iat:Math.floor(s/1e3),jti:FS().getSuffix()};try{return await Oa.sign({signerDid:n,payload:o})}catch(a){throw new R0e({message:a.message,cause:a})}}static async verifyRequestToken(t){let r;try{r=await Oa.verify({jwt:t.requestToken})}catch(a){throw new M0e({message:a.message,cause:a})}const{header:n,payload:s}=r;for(let a of OI)if(!s[a])throw new j0e({message:`Request token missing ${a} claim. Expected ${OI}.`});if(s.aud!==t.pfiDid)throw new U0e({message:"Request token contains invalid audience. Expected aud property to be PFI DID."});const i=n.kid,o=s.iss;if(!i.includes(o))throw new K0e({message:"Request token issuer does not match signer"});return o}}var d0;(function(e){e.authentication="authentication",e.assertionMethod="assertionMethod",e.keyAgreement="keyAgreement",e.capabilityInvocation="capabilityInvocation",e.capabilityDelegation="capabilityDelegation"})(d0||(d0={}));const Si={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class er{constructor({method:t,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${t}:${r}`,this.method=t,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(t){if(!t)return null;const r=er.DID_URI_PATTERN.exec(t);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,c={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(c.path=i),o&&(c.query=o.slice(1)),a&&(c.fragment=a.slice(1)),o){const l={},u=o.slice(1).split("&");for(const d of u){const[h,f]=d.split("=");l[h]=f}c.params=l}return c}}er.METHOD_PATTERN="([a-z0-9]+)";er.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";er.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${er.PCT_ENCODED_PATTERN})`;er.METHOD_ID_PATTERN=`((?:${er.ID_CHAR_PATTERN}*:)*(${er.ID_CHAR_PATTERN}+))`;er.PATH_PATTERN="(/[^#?]*)?";er.QUERY_PATTERN="([?][^#]*)?";er.FRAGMENT_PATTERN="(#.*)?";er.DID_URI_PATTERN=new RegExp(`^did:(?<method>${er.METHOD_PATTERN}):(?<id>${er.METHOD_ID_PATTERN})(?<path>${er.PATH_PATTERN})(?<query>${er.QUERY_PATTERN})(?<fragment>${er.FRAGMENT_PATTERN})$`);class Xe extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe)}}var st;(function(e){e.InvalidDid="invalidDid",e.MethodNotSupported="methodNotSupported",e.InternalError="internalError",e.InvalidDidDocument="invalidDidDocument",e.InvalidDidDocumentLength="invalidDidDocumentLength",e.InvalidDidUrl="invalidDidUrl",e.InvalidPreviousDidProof="invalidPreviousDidProof",e.InvalidPublicKey="invalidPublicKey",e.InvalidPublicKeyLength="invalidPublicKeyLength",e.InvalidPublicKeyType="invalidPublicKeyType",e.InvalidSignature="invalidSignature",e.NotFound="notFound",e.RepresentationNotSupported="representationNotSupported",e.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(st||(st={}));function Pge(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,_=0,b=0,v=p.length;b!==v&&p[b]===0;)b++,y++;for(var g=(v-b)*u+1>>>0,m=new Uint8Array(g);b!==v;){for(var w=p[b],x=0,S=g-1;(w!==0||x<_)&&S!==-1;S--,x++)w+=256*m[S]>>>0,m[S]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");_=x,b++}for(var E=g-_;E!==g&&m[E]===0;)E++;for(var A=c.repeat(y);E<g;++E)A+=e.charAt(m[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var _=0,b=0;p[y]===c;)_++,y++;for(var v=(p.length-y)*l+1>>>0,g=new Uint8Array(v);p[y];){var m=r[p.charCodeAt(y)];if(m===255)return;for(var w=0,x=v-1;(m!==0||w<b)&&x!==-1;x--,w++)m+=a*g[x]>>>0,g[x]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=w,y++}if(p[y]!==" "){for(var S=v-b;S!==v&&g[S]===0;)S++;for(var E=new Uint8Array(_+(v-S)),A=_;S!==v;)E[A++]=g[S++];return E}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var kge=Pge,Oge=kge;const Tge=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Ige{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Bge{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return xj(this,t)}}class Fge{constructor(t){this.decoders=t}or(t){return xj(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xj=(e,t)=>new Fge({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Nge{constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Ige(t,r,n),this.decoder=new Bge(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const $j=({name:e,prefix:t,encode:r,decode:n})=>new Nge(e,t,r,n),Dj=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:s}=Oge(r,t);return $j({prefix:e,name:t,encode:n,decode:i=>Tge(s(i))})},Rge=(e,t,r,n)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Mge=(e,t,r)=>{const n=t[t.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ws=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>$j({prefix:t,name:e,encode(s){return Mge(s,n,r)},decode(s){return Rge(s,n,r,e)}});ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const TI=ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),vv=Dj({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Dj({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const gu=ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function jge(e){return e.byteOffset!==0||e.byteLength!==e.buffer.byteLength}function Uge(e){return typeof e!="object"||e===null?!1:typeof e[Symbol.asyncIterator]=="function"}function eS(e){const r=Object.prototype.toString.call(e).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var $y=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},II=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}};const wv=new TextEncoder,Ed=new TextDecoder;class Ue{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Ue(t,"ArrayBuffer")}static asyncIterable(t){if(!Uge(t))throw new TypeError("Input must be of type AsyncIterable.");return new Ue(t,"AsyncIterable")}static base32Z(t){return new Ue(t,"Base32Z")}static base58Btc(t){return new Ue(t,"Base58Btc")}static base64Url(t){return new Ue(t,"Base64Url")}static bufferSource(t){return new Ue(t,"BufferSource")}static hex(t){if(typeof t!="string")throw new TypeError("Hex input must be a string.");if(t.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ue(t,"Hex")}static multibase(t){return new Ue(t,"Multibase")}static object(t){return new Ue(t,"Object")}static string(t){return new Ue(t,"String")}static uint8Array(t){return new Ue(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return vv.baseDecode(this.data).buffer;case"Base64Url":return gu.baseDecode(this.data).buffer;case"BufferSource":{if(eS(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return jge(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return $y(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return TI.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return vv.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return vv.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return gu.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return gu.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=wv.encode(t);return gu.baseEncode(r)}case"String":{const t=wv.encode(this.data);return gu.baseEncode(t)}case"Uint8Array":return gu.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,n,s;return $y(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const c=[];try{for(var i=!0,o=II(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const u=s;c.push(u)}}catch(u){r={error:u}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const t=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ue.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ue.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=t[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const t=gu.baseDecode(this.data),r=Ed.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=Ed.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return $y(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toStringAsync();return JSON.parse(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Ed.decode(this.data);case"Base64Url":{const t=gu.baseDecode(this.data);return Ed.decode(t)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Ed.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,n,s;return $y(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=II(this.data),a;a=yield o.next(),t=a.done,!t;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?c+=l:c+=Ed.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!t&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=Ed.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return TI.baseDecode(this.data);case"Base58Btc":return vv.baseDecode(this.data);case"Base64Url":return gu.baseDecode(this.data);case"BufferSource":{const t=eS(this.data);if(t==="Uint8Array")return this.data;if(t==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=n}return t}case"Object":{const t=JSON.stringify(this.data);return wv.encode(t)}case"String":return wv.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return $y(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}}var Kge=Cj,BI=128,Lge=127,qge=~Lge,Vge=Math.pow(2,31);function Cj(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Vge;)t[r++]=e&255|BI,e/=128;for(;e&qge;)t[r++]=e&255|BI,e>>>=7;return t[r]=e|0,Cj.bytes=r-n+1,t}var Hge=tS,zge=128,FI=127;function tS(e,n){var r=0,n=n||0,s=0,i=n,o,a=e.length;do{if(i>=a)throw tS.bytes=0,new RangeError("Could not decode varint");o=e[i++],r+=s<28?(o&FI)<<s:(o&FI)*Math.pow(2,s),s+=7}while(o>=zge);return tS.bytes=i-n,r}var Wge=Math.pow(2,7),Jge=Math.pow(2,14),Gge=Math.pow(2,21),Xge=Math.pow(2,28),Zge=Math.pow(2,35),Yge=Math.pow(2,42),Qge=Math.pow(2,49),eve=Math.pow(2,56),tve=Math.pow(2,63),rve=function(e){return e<Wge?1:e<Jge?2:e<Gge?3:e<Xge?4:e<Zge?5:e<Yge?6:e<Qge?7:e<eve?8:e<tve?9:10},nve={encode:Kge,decode:Hge,encodingLength:rve},wb=nve;const NI=(e,t=0)=>[wb.decode(e,t),wb.decode.bytes],ive=(e,t,r=0)=>(wb.encode(e,t,r),t),sve=e=>wb.encodingLength(e);class rn{static addPrefix(t){var r;let{code:n,data:s,name:i}=t;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=rn.codeToName.has(n)?n:rn.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=t.name)!==null&&r!==void 0?r:t.code}`);const o=sve(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),ive(n,a),a}static getCodeFromData(t){const{prefixedData:r}=t,[n,s]=NI(r);return n}static getCodeFromName(t){const{name:r}=t,n=rn.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(t){const{code:r}=t,n=rn.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(t){rn.codeToName.set(t.code,t.name),rn.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[n,s]=NI(r),i=rn.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}}rn.codeToName=new Map;rn.nameToCode=new Map;rn.registerCodec({code:237,name:"ed25519-pub"});rn.registerCodec({code:4864,name:"ed25519-priv"});rn.registerCodec({code:236,name:"x25519-pub"});rn.registerCodec({code:4866,name:"x25519-priv"});rn.registerCodec({code:231,name:"secp256k1-pub"});rn.registerCodec({code:4865,name:"secp256k1-priv"});function Pj(e){Object.keys(e).forEach(t=>{e[t]===void 0?delete e[t]:typeof e[t]=="object"&&Pj(e[t])})}var Ad=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class ove{constructor(){this.store=new Map}clear(){return Ad(this,void 0,void 0,function*(){this.store.clear()})}close(){return Ad(this,void 0,void 0,function*(){})}delete(t){return Ad(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return Ad(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return Ad(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return Ad(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return Ad(this,void 0,void 0,function*(){this.store.set(t,r)})}}function ave(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function kj(e,...t){if(!ave(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function RI(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function uve(e,t){kj(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Zo=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function cve(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Oj(e){return typeof e=="string"&&(e=cve(e)),kj(e),e}class lve{clone(){return this._cloneInto()}}function dve(e){const t=n=>e().update(Oj(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function fve(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}const pve=(e,t,r)=>e&t^~e&r,hve=(e,t,r)=>e&t^e&r^t&r;class yve extends lve{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=HE(this.buffer)}update(t){RI(this);const{view:r,buffer:n,blockLen:s}=this;t=Oj(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=HE(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){RI(this),uve(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;fve(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=HE(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}}const mve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rc=new Uint32Array(64);class gve extends yve{constructor(){super(64,32,8,!1),this.A=Nc[0]|0,this.B=Nc[1]|0,this.C=Nc[2]|0,this.D=Nc[3]|0,this.E=Nc[4]|0,this.F=Nc[5]|0,this.G=Nc[6]|0,this.H=Nc[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,r,n,s,i,o,a,c]}set(t,r,n,s,i,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)Rc[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const h=Rc[d-15],f=Rc[d-2],p=Zo(h,7)^Zo(h,18)^h>>>3,y=Zo(f,17)^Zo(f,19)^f>>>10;Rc[d]=y+Rc[d-7]+p+Rc[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Zo(a,6)^Zo(a,11)^Zo(a,25),f=u+h+pve(a,c,l)+mve[d]+Rc[d]|0,y=(Zo(n,2)^Zo(n,13)^Zo(n,22))+hve(n,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Rc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const f0=dve(()=>new gve);var vve=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class Tj{static digest(t){return vve(this,arguments,void 0,function*({data:r}){return f0(r)})}}class OD{}var wve=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class bve extends OD{digest(t){return wve(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield Tj.digest({data:n})}})}}function _ve(e){const t=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=t(n[o]);return i}return n},r=t(e);return JSON.stringify(r)}var Eve=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const MI="urn:jwk:";function dr(e){return Eve(this,arguments,void 0,function*({jwk:t}){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);Pj(n);const s=_ve(n),i=Ue.string(s).toUint8Array(),o=yield Tj.digest({data:i});return Ue.uint8Array(o).toBase64Url()})}function mf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="EC"||typeof e.d!="string"||typeof e.x!="string")}function TD(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e)||"d"in e||e.kty!=="EC"||typeof e.x!="string")}function gf(e){return!(!e||typeof e!="object"||!("kty"in e&&"crv"in e&&"x"in e&&"d"in e)||e.kty!=="OKP"||typeof e.d!="string"||typeof e.x!="string")}function ID(e){return!(!e||typeof e!="object"||"d"in e||!("kty"in e&&"crv"in e&&"x"in e)||e.kty!=="OKP"||typeof e.x!="string")}function Ave(e){if(!e||typeof e!="object")return!1;switch(e.kty){case"EC":case"OKP":case"RSA":return"d"in e;case"oct":return"k"in e;default:return!1}}var Un=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Sve=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Fr{static adjustSignatureToLowS(t){return Un(this,arguments,void 0,function*({signature:r}){const n=Ve.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return Un(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield Fr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:Ue.uint8Array(r).toBase64Url(),x:Ue.uint8Array(n.x).toBase64Url(),y:Ue.uint8Array(n.y).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static bytesToPublicKey(t){return Un(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield Fr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Ue.uint8Array(n.x).toBase64Url(),y:Ue.uint8Array(n.y).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static compressPublicKey(t){return Un(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return Un(this,arguments,void 0,function*({key:r}){const n=yield Fr.privateKeyToBytes({privateKey:r}),s=yield Fr.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:Ue.uint8Array(s.x).toBase64Url(),y:Ue.uint8Array(s.y).toBase64Url()};return i.kid=yield dr({jwk:i}),i})}static convertDerToCompactSignature(t){return Un(this,arguments,void 0,function*({derSignature:r}){return Ve.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return Un(this,arguments,void 0,function*({publicKeyBytes:r}){return Ve.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Un(this,void 0,void 0,function*(){const t=Ve.utils.randomPrivateKey(),r=yield Fr.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield dr({jwk:r}),r})}static getPublicKey(t){return Un(this,arguments,void 0,function*({key:r}){var n;if(!(mf(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=Sve(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield dr({jwk:s})),s})}static privateKeyToBytes(t){return Un(this,arguments,void 0,function*({privateKey:r}){if(!mf(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Ue.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Un(this,arguments,void 0,function*({publicKey:r}){if(!(TD(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Ue.base64Url(r.x).toUint8Array(),i=Ue.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return Un(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Fr.privateKeyToBytes({privateKey:r}),i=yield Fr.publicKeyToBytes({publicKey:n});return Ve.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return Un(this,arguments,void 0,function*({data:r,key:n}){const s=yield Fr.privateKeyToBytes({privateKey:n}),i=f0(r);return Ve.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return Un(this,arguments,void 0,function*({privateKeyBytes:r}){return Ve.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return Un(this,arguments,void 0,function*({publicKeyBytes:r}){try{Ve.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Un(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Fr.publicKeyToBytes({publicKey:r}),o=f0(s);return Ve.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return Un(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Ve.getPublicKey(r));const n=Ve.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}}var Kn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},xve=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class jr{static adjustSignatureToLowS(t){return Kn(this,arguments,void 0,function*({signature:r}){const n=He.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(t){return Kn(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield jr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:Ue.uint8Array(r).toBase64Url(),x:Ue.uint8Array(n.x).toBase64Url(),y:Ue.uint8Array(n.y).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static bytesToPublicKey(t){return Kn(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield jr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Ue.uint8Array(n.x).toBase64Url(),y:Ue.uint8Array(n.y).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static compressPublicKey(t){return Kn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(t){return Kn(this,arguments,void 0,function*({key:r}){const n=yield jr.privateKeyToBytes({privateKey:r}),s=yield jr.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:Ue.uint8Array(s.x).toBase64Url(),y:Ue.uint8Array(s.y).toBase64Url()};return i.kid=yield dr({jwk:i}),i})}static convertDerToCompactSignature(t){return Kn(this,arguments,void 0,function*({derSignature:r}){return He.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(t){return Kn(this,arguments,void 0,function*({publicKeyBytes:r}){return He.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Kn(this,void 0,void 0,function*(){const t=He.utils.randomPrivateKey(),r=yield jr.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield dr({jwk:r}),r})}static getPublicKey(t){return Kn(this,arguments,void 0,function*({key:r}){var n;if(!(mf(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=xve(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield dr({jwk:s})),s})}static privateKeyToBytes(t){return Kn(this,arguments,void 0,function*({privateKey:r}){if(!mf(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Ue.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Kn(this,arguments,void 0,function*({publicKey:r}){if(!(TD(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Ue.base64Url(r.x).toUint8Array(),i=Ue.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(t){return Kn(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield jr.privateKeyToBytes({privateKey:r}),i=yield jr.publicKeyToBytes({publicKey:n});return He.getSharedSecret(s,i,!0).slice(1)})}static sign(t){return Kn(this,arguments,void 0,function*({data:r,key:n}){const s=yield jr.privateKeyToBytes({privateKey:n}),i=f0(r);return He.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(t){return Kn(this,arguments,void 0,function*({privateKeyBytes:r}){return He.utils.isValidPrivateKey(r)})}static validatePublicKey(t){return Kn(this,arguments,void 0,function*({publicKeyBytes:r}){try{He.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Kn(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield jr.publicKeyToBytes({publicKey:r}),o=f0(s);return He.verify(n,o,i,{lowS:!1})})}static getCurvePoint(t){return Kn(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=He.getPublicKey(r));const n=He.ProjectivePoint.fromHex(r),s=Er(n.x,32),i=Er(n.y,32);return{x:s,y:i}})}}var Dy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class jI extends OD{computePublicKey(t){return Dy(this,arguments,void 0,function*({key:r}){if(!mf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Fr.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield jr.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return Dy(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield Fr.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield jr.generateKey();return n.alg="ES256",n}}})}getPublicKey(t){return Dy(this,arguments,void 0,function*({key:r}){if(!mf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Fr.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield jr.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return Dy(this,arguments,void 0,function*({key:r,data:n}){if(!mf(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield Fr.sign({key:r,data:n});case"P-256":return yield jr.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return Dy(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!TD(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield Fr.verify({key:r,signature:n,data:s});case"P-256":return yield jr.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}}var Ps=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},$ve=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Ur{static bytesToPrivateKey(t){return Ps(this,arguments,void 0,function*({privateKeyBytes:r}){const n=Zt.getPublicKey(r),s={crv:"Ed25519",d:Ue.uint8Array(r).toBase64Url(),kty:"OKP",x:Ue.uint8Array(n).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static bytesToPublicKey(t){return Ps(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:Ue.uint8Array(r).toBase64Url()};return n.kid=yield dr({jwk:n}),n})}static computePublicKey(t){return Ps(this,arguments,void 0,function*({key:r}){const n=yield Ur.privateKeyToBytes({privateKey:r}),s=Zt.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:Ue.uint8Array(s).toBase64Url()};return i.kid=yield dr({jwk:i}),i})}static convertPrivateKeyToX25519(t){return Ps(this,arguments,void 0,function*({privateKey:r}){const n=yield Ur.privateKeyToBytes({privateKey:r}),s=S0(n),i=Zn.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:Ue.uint8Array(s).toBase64Url(),x:Ue.uint8Array(i).toBase64Url()};return o.kid=yield dr({jwk:o}),o})}static convertPublicKeyToX25519(t){return Ps(this,arguments,void 0,function*({publicKey:r}){const n=yield Ur.publicKeyToBytes({publicKey:r});if(!(yield Ur.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=A0(n),o={kty:"OKP",crv:"X25519",x:Ue.uint8Array(i).toBase64Url()};return o.kid=yield dr({jwk:o}),o})}static generateKey(){return Ps(this,void 0,void 0,function*(){const t=Zt.utils.randomPrivateKey(),r=yield Ur.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield dr({jwk:r}),r})}static getPublicKey(t){return Ps(this,arguments,void 0,function*({key:r}){var n;if(!(gf(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=$ve(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield dr({jwk:s})),s})}static privateKeyToBytes(t){return Ps(this,arguments,void 0,function*({privateKey:r}){if(!gf(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Ue.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Ps(this,arguments,void 0,function*({publicKey:r}){if(!ID(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Ue.base64Url(r.x).toUint8Array()})}static sign(t){return Ps(this,arguments,void 0,function*({key:r,data:n}){const s=yield Ur.privateKeyToBytes({privateKey:r});return Zt.sign(n,s)})}static validatePublicKey(t){return Ps(this,arguments,void 0,function*({publicKeyBytes:r}){try{Zt.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(t){return Ps(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield Ur.publicKeyToBytes({publicKey:r});return Zt.verify(n,s,i)})}}var Cy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class Dve extends OD{computePublicKey(t){return Cy(this,arguments,void 0,function*({key:r}){if(!gf(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Ur.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(t){return Cy(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield Ur.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(t){return Cy(this,arguments,void 0,function*({key:r}){if(!gf(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Ur.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(t){return Cy(this,arguments,void 0,function*({key:r,data:n}){if(!gf(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Ur.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(t){return Cy(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!ID(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Ur.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}}var vu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};const zE={Ed25519:{implementation:Dve,names:["Ed25519"]},secp256k1:{implementation:jI,names:["ES256K","secp256k1"]},secp256r1:{implementation:jI,names:["ES256","secp256r1"]},"SHA-256":{implementation:bve,names:["SHA-256"]}};class ec{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=(r=t==null?void 0:t.keyStore)!==null&&r!==void 0?r:new ove}digest(t){return vu(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(t){return vu(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(t){return vu(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${MI}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(t){return vu(this,arguments,void 0,function*({key:r}){const n=yield dr({jwk:r});return`${MI}${n}`})}getPublicKey(t){return vu(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(t){return vu(this,arguments,void 0,function*({key:r}){var n;if(!Ave(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield dr({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(t){return vu(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(t){return vu(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:t}){var r;const n=(r=zE[t])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:t}){const r=t.alg,n=t.crv;for(const s in zE){const i=zE[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(t){return vu(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}}function Cve(e){const t={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(e.alg&&Object.values(t).includes(e.alg))return e.alg;if(e.crv&&Object.keys(t).includes(e.crv))return t[e.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${e.alg}, crv=${e.crv}. Supported 'alg' values: ${Object.values(t).join(", ")}. Supported 'crv' values: ${Object.keys(t).join(", ")}.`)}var Mc=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},Pve=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Zd{static bytesToPrivateKey(t){return Mc(this,arguments,void 0,function*({privateKeyBytes:r}){const n=Zn.getPublicKey(r),s={kty:"OKP",crv:"X25519",d:Ue.uint8Array(r).toBase64Url(),x:Ue.uint8Array(n).toBase64Url()};return s.kid=yield dr({jwk:s}),s})}static bytesToPublicKey(t){return Mc(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"X25519",x:Ue.uint8Array(r).toBase64Url()};return n.kid=yield dr({jwk:n}),n})}static computePublicKey(t){return Mc(this,arguments,void 0,function*({key:r}){const n=yield Zd.privateKeyToBytes({privateKey:r}),s=Zn.getPublicKey(n),i={kty:"OKP",crv:"X25519",x:Ue.uint8Array(s).toBase64Url()};return i.kid=yield dr({jwk:i}),i})}static generateKey(){return Mc(this,void 0,void 0,function*(){const t=Zn.utils.randomPrivateKey(),r=yield Zd.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield dr({jwk:r}),r})}static getPublicKey(t){return Mc(this,arguments,void 0,function*({key:r}){var n;if(!(gf(r)&&r.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let s=Pve(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield dr({jwk:s})),s})}static privateKeyToBytes(t){return Mc(this,arguments,void 0,function*({privateKey:r}){if(!gf(r))throw new Error("X25519: The provided key is not a valid OKP private key.");return Ue.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(t){return Mc(this,arguments,void 0,function*({publicKey:r}){if(!ID(r))throw new Error("X25519: The provided key is not a valid OKP public key.");return Ue.base64Url(r.x).toUint8Array()})}static sharedSecret(t){return Mc(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Zd.privateKeyToBytes({privateKey:r}),i=yield Zd.publicKeyToBytes({publicKey:n});return Zn.getSharedSecret(s,i)})}}function Do(e){if(typeof e=="string"&&e.length!==0)return e.split("#").pop()}function Ij({didDocument:e}){var t,r;if(!e)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(t=e.verificationMethod)===null||t===void 0?void 0:t.filter(rS))!==null&&r!==void 0?r:[]),Object.keys(d0).forEach(s=>{var i,o;n.push(...(o=(i=e[s])===null||i===void 0?void 0:i.filter(rS))!==null&&o!==void 0?o:[])}),n}function kve({didDocument:e}){const r=Ij({didDocument:e}).map(n=>n.type);return[...new Set(r)]}function Ove({didDocument:e,methodId:t}){const r=[];return Object.keys(d0).forEach(n=>{if(Array.isArray(e[n])){const s=e[n],i=Do(t);s.some(a=>{const c=Do(a)===i,l=rS(a)&&Do(a.id)===i;return c||l})&&r.push(n)}}),r}function rS(e){return!(!e||typeof e!="object"||e===null||!("id"in e&&"type"in e&&"controller"in e)||typeof e.id!="string"||typeof e.type!="string"||typeof e.controller!="string")}function Bj({keyBytes:e,multicodecCode:t,multicodecName:r}){const n=rn.addPrefix({code:t,data:e,name:r}),s=Ue.uint8Array(n).toBase58Btc();return Ue.base58Btc(s).toMultibase()}function UI({multibaseKeyId:e}){try{const t=Ue.multibase(e).toBase58Btc(),r=Ue.base58Btc(t).toUint8Array(),{code:n,data:s,name:i}=rn.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new Xe(st.InvalidDid,`Invalid multibase identifier: ${e}`)}}var Py=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class Ka{constructor({uri:t,document:r,metadata:n,keyManager:s}){this.uri=t,this.document=r,this.metadata=n,this.keyManager=s}export(){return Py(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let t={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}t.privateKeys=r}return t})}getSigner(t){return Py(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(c=>{var l,u;return Do(c.id)===((l=Do(t==null?void 0:t.methodId))!==null&&l!==void 0?l:Do((u=this.document.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(n&&n.publicKeyJwk))throw new Xe(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:Cve(i),keyId:n.id,sign(c){return Py(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(c){return Py(this,arguments,void 0,function*({data:l,signature:u}){return yield o.verify({data:l,key:i,signature:u})})}}})}static import(t){return Py(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ec}){var s;const i=Ij({didDocument:r.document});if(i.length===0)throw new Xe(st.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const c=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:c})}return new Ka({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}}var KI=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class H0{static getSigningMethod(t){return KI(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(t,r){return KI(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}}var $n=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},LI=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const qI="https://diddht.tbddev.org",Tve=0,jc=7200,fw=";",fi=",";var nS;(function(e){e[e.Discoverable=0]="Discoverable",e[e.Organization=1]="Organization",e[e.Government=2]="Government",e[e.Corporation=3]="Corporation",e[e.LocalBusiness=4]="LocalBusiness",e[e.SoftwarePackage=5]="SoftwarePackage",e[e.WebApp=6]="WebApp",e[e.FinancialInstitution=7]="FinancialInstitution"})(nS||(nS={}));var bi;(function(e){e[e.Ed25519=0]="Ed25519",e[e.secp256k1=1]="secp256k1",e[e.secp256r1=2]="secp256r1",e[e.X25519=3]="X25519"})(bi||(bi={}));var iS;(function(e){e.authentication="auth",e.assertionMethod="asm",e.capabilityDelegation="del",e.capabilityInvocation="inv",e.keyAgreement="agm"})(iS||(iS={}));const Fj={Ed25519:bi.Ed25519,ES256K:bi.secp256k1,ES256:bi.secp256r1,"P-256":bi.secp256r1,secp256k1:bi.secp256k1,secp256r1:bi.secp256r1,X25519:bi.X25519},VI={[bi.Ed25519]:"EdDSA",[bi.secp256k1]:"ES256K",[bi.secp256r1]:"ES256",[bi.X25519]:"ECDH-ES+A256KW"};class Nl extends H0{static create(){return $n(this,arguments,void 0,function*({keyManager:t=new ec,options:r={}}={}){var n,s,i,o,a,c,l,u,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in Fj)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const y=yield t.generateKey({algorithm:"Ed25519"}),_=yield t.getPublicKey({keyUri:y}),b=yield tn.identityKeyToIdentifier({identityKey:_}),v=Object.assign(Object.assign({id:b},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(w=>{var x;return((x=w.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const w of g){const x=w.id&&w.id.split("#").pop()==="0"?y:yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});let E=(c=(a=w.id)!==null&&a!==void 0?a:S.kid)!==null&&c!==void 0?c:yield dr({jwk:S});E=`${b}#${Do(E)}`,(l=v.verificationMethod)!==null&&l!==void 0||(v.verificationMethod=[]),v.verificationMethod.push({id:E,type:"JsonWebKey",controller:(u=w.controller)!==null&&u!==void 0?u:b,publicKeyJwk:S});for(const A of(d=w.purposes)!==null&&d!==void 0?d:[])v[A]||(v[A]=[]),v[A].push(E)}(h=r.services)===null||h===void 0||h.forEach(w=>{var x;(x=v.service)!==null&&x!==void 0||(v.service=[]),w.id=`${b}#${w.id.split("#").pop()}`,v.service.push(w)});const m=new Ka({uri:b,document:v,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:t});if(!((f=r.publish)!==null&&f!==void 0)||f){const w=yield Nl.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static import(t){return $n(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ec}){var s;const i=er.parse(r.uri);if((i==null?void 0:i.method)!==Nl.methodName)throw new Xe(st.MethodNotSupported,"Method not supported");const o=yield Ka.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var c;return((c=a.id)===null||c===void 0?void 0:c.split("#").pop())==="0"})))throw new Xe(st.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(t){return $n(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=er.parse(r.id);if(i&&i.method!==this.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c,l;return Do(a.id)===((c=Do(n))!==null&&c!==void 0?c:Do((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new Xe(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(t){return $n(this,arguments,void 0,function*({did:r,gatewayUri:n=qI}){return yield Bu.put({did:r,gatewayUri:n})})}static resolve(t){return $n(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:qI;try{yield tn.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield Bu.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},Si),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof Xe))throw new Error(o);return Object.assign(Object.assign({},Si),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}}Nl.methodName="dht";class Bu{static get(t){return $n(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=tn.identifierToIdentityKeyBytes({didUri:r}),i=yield Bu.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield tn.parseBep44GetMessage({bep44Message:i}),a=yield Bu.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(t){return $n(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield Bu.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield tn.createBep44PutMessage({dnsPacket:s,publicKeyBytes:tn.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield Bu.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(t){return $n(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=Ue.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new Xe(st.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof Xe?l:new Xe(st.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new Xe(st.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new Xe(st.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new Xe(st.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(t){return $n(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=Ue.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(c){throw new Xe(st.InternalError,`Failed to put Pkarr record for identifier ${s}: ${c.message}`)}return a.ok})}static fromDnsPacket(t){return $n(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},c={published:!0},l=new Map;for(const u of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(u.type!=="TXT")continue;const d=u.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=tn.parseTxtDataToString(u.data);a.alsoKnownAs=h.split(fi);break}case d.startsWith("cnt"):{const h=tn.parseTxtDataToString(u.data);a.controller=h.includes(fi)?h.split(fi):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:y,a:_}=tn.parseTxtDataToObject(u.data),b=Ue.base64Url(p).toUint8Array(),v=bi[Number(f)];let g=yield tn.keyConverter(v).bytesToPublicKey({publicKeyBytes:b});g.alg=_||VI[Number(f)];const m=d==="k0"?"0":h!==void 0?h:yield dr({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const w=`${r}#${m}`;a.verificationMethod.push({id:w,type:"JsonWebKey",controller:y??r,publicKeyJwk:g}),l.set(d,w);break}case d.startsWith("s"):{const h=tn.parseTxtDataToObject(u.data),{id:f,t:p,se:y}=h,_=LI(h,["id","t","se"]),b=y.includes(fi)?y.split(fi):[y],v=Object.fromEntries(Object.entries(_).map(([g,m])=>[g,m.includes(fi)?m.split(fi):m]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},v),{id:`${r}#${f}`,type:p,serviceEndpoint:b}));break}case d.startsWith("typ"):{const{id:h}=tn.parseTxtDataToObject(u.data);c.types=h.split(fi).map(f=>Number(f));break}case d.startsWith("did"):{const h=v=>v.split(fi).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:y,inv:_,agm:b}=tn.parseTxtDataToObject(u.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),y&&(a.capabilityDelegation=h(y)),_&&(a.capabilityInvocation=h(_)),b&&(a.keyAgreement=h(b));break}}}return{didDocument:a,didDocumentMetadata:c,didResolutionMetadata:{}}})}static toDnsPacket(t){return $n(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,c,l,u;const d=[],h=[],f=new Map,p=[],y=[];if(i!==void 0){const{signature:v,previousDid:g}=i;yield tn.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:jc,data:`id=${g};s=${v}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:jc,data:r.alsoKnownAs.join(fi)}),r.controller){const v=Array.isArray(r.controller)?r.controller.join(fi):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:jc,data:v})}for(const[v,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const m=`k${v}`;y.push(m);let w=g.id.split("#").pop();f.set(w,m);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in Fj))throw new Xe(st.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(c=x==null?void 0:x.crv)!==null&&c!==void 0?c:"undefined"}`);const S=bi[x.crv],E=yield tn.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),A=Ue.uint8Array(E).toBase64Url(),$=[`t=${S}`,`k=${A}`];w!=="0"&&(yield dr({jwk:x}))!==w&&$.unshift(`id=${w}`),x.alg!==VI[S]&&$.push(`a=${x.alg}`),g.controller!==r.id&&$.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${m}._did.`,ttl:jc,data:$.join(fw)})}(l=r.service)===null||l===void 0||l.forEach((v,g)=>{const m=`s${g}`;p.push(m);let{id:w,type:x,serviceEndpoint:S}=v,E=LI(v,["id","type","serviceEndpoint"]);w=Do(w),S=Array.isArray(S)?S.join(","):S;const $=Object.entries(Object.assign({id:w,t:x,se:S},E)).map(([T,R])=>`${T}=${R}`).join(fw),I=tn.chunkDataIfNeeded($);d.push({type:"TXT",name:`_${m}._did.`,ttl:jc,data:I})});const _=[`v=${Tve}`];if(y.length&&_.push(`vm=${y.join(fi)}`),Object.keys(d0).forEach(v=>{var g;const m=(g=r[v])===null||g===void 0?void 0:g.map(w=>f.get(w.split("#").pop()));if(m){const w=iS[v];_.push(`${w}=${m.join(fi)}`)}}),p.length&&_.push(`svc=${p.join(fi)}`),!((u=n.types)===null||u===void 0)&&u.length){const g=n.types.map(m=>typeof m=="string"?nS[m]:m);d.push({type:"TXT",name:"_typ._did.",ttl:jc,data:`id=${g.join(fi)}`})}d.push({type:"TXT",name:"_did."+Bu.getUniqueDidSuffix(r.id)+".",ttl:jc,data:_.join(fw)});for(const v of s||[])h.push({type:"NS",name:"_did."+Bu.getUniqueDidSuffix(r.id)+".",ttl:jc,data:v+"."});return{id:0,type:"response",flags:xx,answers:[...d,...h]}})}static getUniqueDidSuffix(t){return t.split(":")[2]}}class tn{static createBep44PutMessage(t){return $n(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Hm(r),a=Xp.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new Xe(st.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const c=yield s.sign({data:a});return{k:n,seq:i,sig:c,v:o}})}static identifierToIdentityKey(t){return $n(this,arguments,void 0,function*({didUri:r}){let n=tn.identifierToIdentityKeyBytes({didUri:r});return yield Ur.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:t}){const r=er.parse(t);if(!r)throw new Xe(st.InvalidDid,`Invalid DID URI: ${t}`);if(r.method!==Nl.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=Ue.base32Z(r.id).toUint8Array()}catch{throw new Xe(st.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Xe(st.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(t){return $n(this,arguments,void 0,function*({identityKey:r}){const n=yield Ur.publicKeyToBytes({publicKey:r}),s=Ue.uint8Array(n).toBase32Z();return`did:${Nl.methodName}:${s}`})}static keyConverter(t){const n={Ed25519:Ur,"P-256":{publicKeyToBytes:s=>$n(this,[s],void 0,function*({publicKey:i}){const o=yield jr.publicKeyToBytes({publicKey:i});return yield jr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:jr.bytesToPublicKey,privateKeyToBytes:jr.privateKeyToBytes,bytesToPrivateKey:jr.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>$n(this,[s],void 0,function*({publicKey:i}){const o=yield Fr.publicKeyToBytes({publicKey:i});return yield Fr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Fr.bytesToPublicKey,privateKeyToBytes:Fr.privateKeyToBytes,bytesToPrivateKey:Fr.bytesToPrivateKey},X25519:Zd}[t];if(!n)throw new Xe(st.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static parseBep44GetMessage(t){return $n(this,arguments,void 0,function*({bep44Message:r}){const n=yield Ur.bytesToPublicKey({publicKeyBytes:r.k}),s=Xp.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Ur.verify({key:n,signature:r.sig,data:s})))throw new Xe(st.InvalidSignature,"Invalid signature for DHT BEP44 message");return $x(r.v)})}static parseTxtDataToObject(t){return this.parseTxtDataToString(t).split(fw).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(t){if(typeof t=="string")return t;if(t instanceof Uint8Array)return Ue.uint8Array(t).toString();if(Array.isArray(t))return t.map(r=>this.parseTxtDataToString(r)).join("");throw new Xe(st.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(t){return $n(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield tn.identifierToIdentityKey({didUri:n.previousDid}),i=tn.identifierToIdentityKeyBytes({didUri:r}),o=Ue.base64Url(n.signature).toUint8Array();if(!(yield Ur.verify({key:s,data:i,signature:o})))throw new Xe(st.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(t){if(t.length<=255)return t;const r=[];for(let n=0;n<t.length;n+=255)r.push(t.slice(n,n+255));return r}}var yl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},ga;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(ga||(ga={}));const Ive={Ed25519:ga.Ed25519,ES256K:ga.secp256k1,ES256:ga.secp256r1,"P-256":ga.secp256r1,secp256k1:ga.secp256k1,secp256r1:ga.secp256r1},HI="https://ion.tbd.engineering";class _p extends H0{static create(){return yl(this,arguments,void 0,function*({keyManager:t=new ec,options:r={}}={}){var n,s,i,o,a,c,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(w=>!(w.algorithm in Ive)))throw new Error("One or more verification method algorithms are not supported");const u=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(w=>"id"in w).map(w=>w.id);if(u&&u.length!==new Set(u).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(w=>!w.id||!w.type||!w.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const w of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield t.generateKey({algorithm:w.algorithm}),S=yield t.getPublicKey({keyUri:x});h.push({id:w.id,publicKeyJwk:S,purposes:(a=w.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield t.generateKey({algorithm:ga.secp256k1}),p=yield t.getPublicKey({keyUri:f}),y=yield t.generateKey({algorithm:ga.secp256k1}),_=yield t.getPublicKey({keyUri:y}),b=yield qs.computeLongFormDidUri({recoveryKey:p,updateKey:_,services:(c=r.services)!==null&&c!==void 0?c:[],verificationMethods:h}),{didDocument:v,didResolutionMetadata:g}=yield _p.resolve(b,{gatewayUri:r.gatewayUri});if(v===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const m=new Ka({uri:b,document:v,metadata:{published:!1,canonicalId:b.split(":",3).join(":"),recoveryKey:p,updateKey:_},keyManager:t});if(!((l=r.publish)!==null&&l!==void 0)||l){const w=yield _p.publish({did:m,gatewayUri:r.gatewayUri});m.metadata=w.didDocumentMetadata}return m})}static getSigningMethod(t){return yl(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=er.parse(r.id);if(i&&i.method!==this.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c;return a.id===(n??((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new Xe(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return yl(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ec}){const s=er.parse(r.uri);if((s==null?void 0:s.method)!==_p.methodName)throw new Xe(st.MethodNotSupported,"Method not supported");return yield Ka.import({portableDid:r,keyManager:n})})}static publish(t){return yl(this,arguments,void 0,function*({did:r,gatewayUri:n=HI}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(u=>({id:u.id,publicKeyJwk:u.publicKeyJwk,purposes:Ove({didDocument:r.document,methodId:u.id})})))!==null&&i!==void 0?i:[],c=yield qs.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield qs.constructCreateRequest({ionDocument:c,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const u=qs.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(u,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:st.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(t){return yl(this,arguments,void 0,function*(r,n={}){var s,i;const o=er.parse(r);if(!o)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==_p.methodName)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:HI;try{const c=qs.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(c);if(!l.ok)throw new Xe(st.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:u,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},Si),u&&{didDocument:u}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(c){if(!(c instanceof Xe))throw new Error(c);return Object.assign(Object.assign({},Si),{didResolutionMetadata:Object.assign({error:c.code},c.message&&{errorMessage:c.message})})}})}}_p.methodName="ion";class qs{static appendPathToUrl({baseUrl:t,path:r}){const n=new URL(t);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(t){return yl(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield qs.createIonDocument({services:s,verificationMethods:i}),a=qs.normalizeJwk(r),c=qs.normalizeJwk(n);return yield P0.createLongFormDid({document:o,recoveryKey:a,updateKey:c})})}static constructCreateRequest(t){return yl(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield oi.createCreateRequest({document:r,recoveryKey:qs.normalizeJwk(n),updateKey:qs.normalizeJwk(s)})})}static createIonDocument(t){return yl(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let u=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield dr({jwk:l.publicKeyJwk});u=`${u.split("#").pop()}`;const d={id:u,publicKeyJwk:qs.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(t){const r=t.kty;let n;if(r==="EC")n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")n={k:t.k,kty:t.kty};else if(r==="OKP")n={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")n={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);return n}}var bv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class Ep extends H0{static create(){return bv(this,arguments,void 0,function*({keyManager:t=new ec,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=Ue.object(l).toBase64Url(),d=`did:${Ep.methodName}:${u}`,f=(yield Ep.resolve(d)).didDocument;return new Ka({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return bv(this,arguments,void 0,function*({didDocument:r}){var n;const s=er.parse(r.id);if(s&&s.method!==this.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new Xe(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(t){return bv(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ec}){const s=er.parse(r.uri);if((s==null?void 0:s.method)!==Ep.methodName)throw new Xe(st.MethodNotSupported,"Method not supported");const i=yield Ka.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Xe(st.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return bv(this,void 0,void 0,function*(){const n=er.parse(t);let s;try{s=Ue.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==Ep.methodName)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},Si),{didDocument:i})})}}Ep.methodName="jwk";var bo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})},xu;(function(e){e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.secp256r1="secp256r1",e.X25519="X25519"})(xu||(xu={}));const WE={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},Bve={Ed25519:xu.Ed25519,ES256K:xu.secp256k1,ES256:xu.secp256r1,"P-256":xu.secp256r1,secp256k1:xu.secp256k1,secp256r1:xu.secp256r1,X25519:xu.X25519};class ca extends H0{static create(){return bo(this,arguments,void 0,function*({keyManager:t=new ec,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield t.generateKey({algorithm:a}),l=yield t.getPublicKey({keyUri:c}),u=yield An.publicKeyToMultibaseId({publicKey:l}),d=`did:${ca.methodName}:${u}`,f=(yield ca.resolve(d,r)).didDocument;return new Ka({uri:d,document:f,metadata:{},keyManager:t})})}static getSigningMethod(t){return bo(this,arguments,void 0,function*({didDocument:r}){var n;const s=er.parse(r.id);if(s&&s.method!==this.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new Xe(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(t){return bo(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ec}){const s=er.parse(r.uri);if((s==null?void 0:s.method)!==ca.methodName)throw new Xe(st.MethodNotSupported,"Method not supported");const i=yield Ka.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Xe(st.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(t,r){return bo(this,void 0,void 0,function*(){try{const n=yield ca.createDocument({didUri:t,options:r});return Object.assign(Object.assign({},Si),{didDocument:n})}catch(n){if(!(n instanceof Xe))throw new Error(n);return Object.assign(Object.assign({},Si),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(t){return bo(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,c={id:""},l=er.parse(r);if(!l)throw new Xe(st.InvalidDid,`Invalid DID URI: ${r}`);const u=l.id;if(l.method!==ca.methodName)throw new Xe(st.MethodNotSupported,`Method not supported: ${l.method}`);if(!ca.validateIdentifier(l))throw new Xe(st.InvalidDid,`Invalid DID URI: ${r}`);const d=yield ca.createSignatureMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(c.id=l.uri,c.verificationMethod=[d],c.authentication=[d.id],c.assertionMethod=[d.id],c.capabilityInvocation=[d.id],c.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",y=yield this.createEncryptionMethod({didUri:r,multibaseValue:u,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});c.verificationMethod.push(y),c.keyAgreement=[y.id]}const h=[s];return kve({didDocument:c}).forEach(p=>{const y=WE[p];h.push(y)}),c["@context"]=h,c})}static createEncryptionMethod(t){return bo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l}=yield ca.deriveEncryptionKey({multibaseValue:n}),u=c.byteLength,d=An.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(u!==d)throw new Xe(st.InvalidPublicKeyLength,`Expected ${u} bytes. Actual: ${d}`);const h=Bj({keyBytes:c,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new Xe(st.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in WE))throw new Xe(st.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new Xe(st.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield An.multicodecToJwk({code:l});a.publicKeyJwk=yield An.keyConverter(p).bytesToPublicKey({publicKeyBytes:c})}return a})}static createSignatureMethod(t){return bo(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:l,multicodecName:u}=UI({multibaseKeyId:n}),d=c.byteLength,h=An.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new Xe(st.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(u){case"secp256k1-pub":f=yield Fr.validatePublicKey({publicKeyBytes:c});break;case"ed25519-pub":f=yield Ur.validatePublicKey({publicKeyBytes:c});break;case"x25519-pub":f=!0;break}if(!f)throw new Xe(st.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new Xe(st.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in WE))throw new Xe(st.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new Xe(st.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:y}=yield An.multicodecToJwk({code:l});a.publicKeyJwk=yield An.keyConverter(y).bytesToPublicKey({publicKeyBytes:c})}return a})}static deriveEncryptionKey(t){return bo(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=UI({multibaseKeyId:r});if(i===237){const o=yield An.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Ur.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield An.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(t){const{method:r,id:n}=t,[s]=t.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&eS(n)==="String"&&n.startsWith("z")}}ca.methodName="key";class An{static jwkToMulticodec(t){return bo(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=An.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:rn.getCodeFromName({name:i}),name:i}})}static keyCompressor(t){const n={"P-256":jr.compressPublicKey,secp256k1:Fr.compressPublicKey}[t];if(!n)throw new Xe(st.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static keyConverter(t){const n={Ed25519:Ur,"P-256":jr,secp256k1:Fr,X25519:Zd}[t];if(!n)throw new Xe(st.InvalidPublicKeyType,`Unsupported curve: ${t}`);return n}static multicodecToJwk(t){return bo(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?rn.getNameFromCode({code:r}):n;const s=n,i=An.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(t){return bo(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in Bve))throw new Xe(st.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield An.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield An.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield An.jwkToMulticodec({jwk:r});return Bj({keyBytes:s,multicodecName:i})})}}An.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};An.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};An.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var Fve=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})};class BD extends H0{static resolve(t,r){return Fve(this,void 0,void 0,function*(){const n=er.parse(t);if(!n)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==BD.methodName)return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},Si),{didDocument:a})}catch{return Object.assign(Object.assign({},Si),{didResolutionMetadata:{error:"notFound"}})}})}}BD.methodName="web";const _v={aquafinance_capital:{uri:"did:dht:qewzcx3fj8uuq7y551deqdfd1wbe6ymicr8xnua3xzkdw4n6j3bo",name:"AquaFinance Capital",description:"Provides exchanges with the Ghanaian Cedis: GHS to USDC, GHS to KES"},swiftliquidity_solutions:{uri:"did:dht:zz3m6ph36p1d8qioqfhp5dh5j6xn49cequ1yw9jnfxbz1uyfnddy",name:"SwiftLiquidity Solutions",description:"Offers exchange rates with the South African Rand: ZAR to BTC and EUR to ZAR."},flowback_financial:{uri:"did:dht:gxwaxgihty7ar5u44gcmmdbw4ka1rbpj8agu4fom6tmsaz7aoffo",name:"Flowback Financial",description:"Offers international rates with various currencies - USD to GBP, GBP to CAD."},vertex_liquid_assets:{uri:"did:dht:7zkzxjf84xuy6icw6fyjcn3uw14fty4umqd3nc4f8ih881h6bjby",name:"Vertex Liquid Assets",description:"Offers currency exchanges between African currencies - MAD to EGP, GHS to NGN."},titanium_trust:{uri:"did:dht:kuggrw7nx3n4ehz455stdkdeuaekfjimhnbenpo8t4xz9gb8qzyy",name:"Titanium Trust",description:"Provides offerings to exchange USD to African currencies - USD to GHS, USD to KES."}},Nve=()=>{const e=tc({balance:100,transactions:[],transactionsLoading:!0,pfiAllowlist:Object.keys(_v).map(S=>({pfiUri:_v[S].uri,pfiName:_v[S].name,pfiDescription:_v[S].description})),selectedTransaction:null,offering:null,payinCurrencies:[],payoutCurrencies:[],offerings:[],customerDid:null,customerCredentials:[]});if(typeof window<"u"){const S=localStorage.getItem("walletBalance");e.balance=parseFloat(S)||100}const t=async()=>{try{const S=[];for(const E of e.pfiAllowlist){const A=E.pfiUri,$=await Jn.getOfferings({pfiDid:A});S.push(...$)}e.offerings=S,g()}catch(S){console.error("Failed to fetch offerings:",S)}},r=async(S,E,A)=>{const $=sb.selectCredentials({vcJwts:e.customerCredentials,presentationDefinition:S.data.requiredClaims}),I=Ms.create({metadata:{from:e.customerDid.uri,to:S.metadata.from,protocol:"1.0"},data:{offeringId:S.id,payin:{amount:E.toString(),kind:S.data.payin.methods[0].kind,paymentDetails:{}},payout:{kind:S.data.payout.methods[0].kind,paymentDetails:A},claims:$}});try{I.verifyOfferingRequirements(S)}catch(T){console.log("Offering requirements not met",T)}await I.sign(e.customerDid),console.log("RFQ:",I);try{await Jn.createExchange(I)}catch(T){console.error("Failed to create exchange:",T)}},n=async S=>{try{const E=await Jn.getExchanges({pfiDid:S,did:e.customerDid});return c(E)}catch(E){console.error("Failed to fetch exchanges:",E)}},s=async(S,E,A)=>{const $=uh.create({metadata:{from:e.customerDid.uri,to:E,exchangeId:S},data:{reason:A}});await $.sign(e.customerDid);try{await Jn.submitClose($)}catch(I){console.error("Failed to close exchange:",I)}},i=async(S,E)=>{const A=c0.create({metadata:{from:e.customerDid.uri,to:E,exchangeId:S}});await A.sign(e.customerDid);try{return await Jn.submitOrder(A)}catch($){console.error("Failed to submit order:",$)}},o=()=>{const S=async()=>{if(console.log("Polling exchanges again..."),!e.customerDid)return;const E=[];try{for(const A of e.pfiAllowlist){const $=await n(A.pfiUri);E.push(...$)}console.log("All exchanges:",E),x(E.reverse()),e.transactionsLoading=!1}catch(A){console.error("Failed to fetch exchanges:",A)}};S(),CV(S,5e3)},a=async()=>{try{if(typeof window<"u"){const S=localStorage.getItem("customerDid");if(S)e.customerDid=await Nl.import({portableDid:JSON.parse(S)});else{e.customerDid=await Nl.create({options:{publish:!0}});const E=await e.customerDid.export();localStorage.setItem("customerDid",JSON.stringify(E))}}}catch(S){console.error("Failed to initialize DID:",S)}},c=S=>S.map(A=>{var te,z,ee,q,O,Y;const $=A[A.length-1],I=A.find(H=>H.kind==="rfq"),T=A.find(H=>H.kind==="quote"),R=h($),L=(te=T==null?void 0:T.data.payin)==null?void 0:te.fee,j=(z=T==null?void 0:T.data.payin)==null?void 0:z.amount,U=(ee=I.privateData)==null?void 0:ee.payout.paymentDetails;return{id:$.metadata.exchangeId,payinAmount:(L?Number(j)+Number(L):Number(j)).toString()||I.data.payinAmount,payinCurrency:((q=T.data.payin)==null?void 0:q.currencyCode)??null,payoutAmount:((O=T==null?void 0:T.data.payout)==null?void 0:O.amount)??null,payoutCurrency:(Y=T.data.payout)==null?void 0:Y.currencyCode,status:R,createdTime:I.createdAt,...$.kind==="quote"&&{expirationTime:T.data.expiresAt??null},from:"You",to:(U==null?void 0:U.address)||(U==null?void 0:U.accountNumber)+", "+(U==null?void 0:U.bankName)||(U==null?void 0:U.phoneNumber)+", "+(U==null?void 0:U.networkProvider)||"Unknown",pfiDid:I.metadata.to}}),l=()=>{const S=localStorage.getItem("customerCredentials");S?e.customerCredentials=JSON.parse(S):console.log("No credentials exist")},u=S=>{e.customerCredentials.push(S),localStorage.setItem("customerCredentials",JSON.stringify(e.customerCredentials))},d=S=>{const E=Oa.parse({jwt:S}).decoded.payload.vc;return{title:E.type[E.type.length-1].replace(new RegExp("(?<!^)(?<![A-Z])[A-Z](?=[a-z])","g")," $&"),name:E.credentialSubject.name,countryCode:E.credentialSubject.countryOfResidence,issuanceDate:new Date(E.issuanceDate).toLocaleDateString(void 0,{dateStyle:"medium"})}};wl(()=>e.balance,S=>{typeof window<"u"&&localStorage.setItem("walletBalance",S.toString())});const h=S=>S instanceof uh?S.data.reason.toLowerCase().includes("complete")||S.data.reason.toLowerCase().includes("success")?"completed":S.data.reason.toLowerCase().includes("expired")?S.data.reason.toLowerCase():S.data.reason.toLowerCase().includes("cancelled")?"cancelled":"failed":S.kind,f=S=>{const E=h(S);switch(E){case"rfq":return"Requested";case"quote":return"Quoted";case"order":case"orderstatus":return"Pending";case"completed":return"Completed";case"expired":return"Expired";case"cancelled":return"Cancelled";case"failed":return"Failed";default:return E}},p=S=>{e.selectedTransaction=S},y=S=>{e.offering=S},_=S=>{const E=parseFloat(S);!isNaN(E)&&E>0&&(e.balance-=E,localStorage.setItem("walletBalance",e.balance.toString()))},b=S=>{if(Math.abs(S)>=1)return S.toFixed(2);const E=Math.abs(S)>=.01?4:6;return parseFloat(S.toFixed(E)).toString()},v=S=>{const E=e.offerings.find(A=>A.id===S);return console.log("Selected offering:",E),E},g=()=>{const S=new Set,E=new Set;e.offerings.forEach(A=>{S.add(A.data.payin.currencyCode),E.add(A.data.payout.currencyCode)}),e.payinCurrencies=Array.from(S),e.payoutCurrencies=Array.from(E)},m=(S,E)=>e.offerings.filter(A=>A.data.payin.currencyCode===S&&A.data.payout.currencyCode===E),w=(S,E)=>{if(E.length===0||!S.data.requiredClaims)return!1;try{return sb.satisfiesPresentationDefinition({vcJwts:E,presentationDefinition:S.data.requiredClaims}),!0}catch{return!1}},x=S=>{e.transactions.map(A=>A.id);const E=[...e.transactions];S.forEach(A=>{const $=E.findIndex(I=>I.id===A.id);$>-1?E[$]=A:E.push(A)}),e.transactions=E};return Cb(async()=>{console.log("Fetching offerings..."),t(),console.log("Initializing DID..."),await a(),console.log("Loading credentials..."),l()}),{state:e,selectTransaction:p,setOffering:y,deductAmount:_,formatAmount:b,fetchOfferings:t,filterOfferings:m,satisfiesOfferingRequirements:w,addCredential:u,renderCredential:d,createExchange:r,fetchExchanges:n,renderOrderStatus:f,addOrder:i,addClose:s,getOfferingById:v,pollExchanges:o}},Rve=ph({__name:"app",setup(e){const t=Nve();return rf("store",t),q7({title:"CareCove",meta:[{name:"description",content:"Donation platform using tbDEX SDK"}]}),(r,n)=>{const s=SV;return pa(),l8("div",null,[Kr(s)])}}}),Mve={__name:"nuxt-error-page",props:{error:Object},setup(e){const r=e.error;r.stack&&r.stack.split(`
`).splice(1).map(d=>({text:d.replace("webpack:/","").replace(".vue",".js").trim(),internal:d.includes("node_modules")&&!d.includes(".cache")||d.includes("internal")||d.includes("new Promise")})).map(d=>`<span class="stack${d.internal?" internal":""}">${d.text}</span>`).join(`
`);const n=Number(r.statusCode||500),s=n===404,i=r.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=r.message||r.toString(),a=void 0,u=s?ZD(()=>sm(()=>import("./D7efB6VW.js"),__vite__mapDeps([9,4,2,10]),import.meta.url).then(d=>d.default||d)):ZD(()=>sm(()=>import("./B-2PopZT.js"),__vite__mapDeps([11,2,12]),import.meta.url).then(d=>d.default||d));return(d,h)=>(pa(),Fd(Or(u),Jj(p8({statusCode:Or(n),statusMessage:Or(i),description:Or(o),stack:Or(a)})),null,16))}},jve={key:0},zI={__name:"nuxt-root",setup(e){const t=()=>null,r=sn(),n=r.deferHydration();if(r.isHydrating){const c=r.hooks.hookOnce("app:error",n);Bo().beforeEach(c)}const s=!1;rf(Bb,M8()),r.hooks.callHookWith(c=>c.map(l=>l()),"vue:setup");const i=Fb(),o=!1;RB((c,l,u)=>{if(r.hooks.callHook("vue:error",c,l,u).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),ZL(c)&&(c.fatal||c.unhandled))return r.runWithContext(()=>vp(c)),!1});const a=!1;return(c,l)=>(pa(),Fd(s8,{onResolve:Or(n)},{default:xB(()=>[Or(o)?(pa(),l8("div",jve)):Or(i)?(pa(),Fd(Or(Mve),{key:1,error:Or(i)},null,8,["error"])):Or(a)?(pa(),Fd(Or(t),{key:2,context:Or(a)},null,8,["context"])):Or(s)?(pa(),Fd(Z9(Or(s)),{key:3})):(pa(),Fd(Or(Rve),{key:4}))]),_:1},8,["onResolve"]))}};let WI;{let e;WI=async function(){var o,a;if(e)return e;const n=!!(((o=window.__NUXT__)==null?void 0:o.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?SK(zI):AK(zI),s=BL({vueApp:n});async function i(c){await s.callHook("app:error",c),s.payload.error=s.payload.error||Nb(c)}n.config.errorHandler=i;try{await RL(s,EV)}catch(c){i(c)}try{await s.hooks.callHook("app:created",n),await s.hooks.callHook("app:beforeMount",n),n.mount(TL),await s.hooks.callHook("app:mounted",n),await fh()}catch(c){i(c)}return n.config.errorHandler===i&&(n.config.errorHandler=void 0),n},e=WI().catch(t=>{throw console.error("Error while mounting app:",t),t})}export{Zve as A,Ea as B,Lve as C,KK as D,Jve as E,ss as F,Bf as G,GL as H,CS as I,Gve as J,Ib as K,lA as L,DS as M,wl as N,gK as O,Ab as P,zve as Q,Vve as R,f8 as a,Kr as b,l8 as c,h8 as d,Xve as e,Nve as f,Wve as g,Kve as h,Eo as i,Or as j,qve as k,Hve as l,Cb as m,Fd as n,pa as o,Bo as p,ph as q,Da as r,sn as s,Yj as t,q7 as u,x5 as v,xB as w,BS as x,lC as y,Pb as z};
