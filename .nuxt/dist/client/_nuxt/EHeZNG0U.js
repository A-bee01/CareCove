const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DLDt8Ny3.js","./BQ07X04h.js","./DlAUqK2U.js","./WTHpDhWG.js","./BBsuypLp.js","./N9DRYeAd.js","./Spinner.ZxSAjLa7.css","./dashboard.D3rqu6o3.css","./ylVngtX-.js","./BOVbRNwb.js","./BY17uPMb.js","./error-404.DXySnQZL.css","./DhNRp_fQ.js","./error-500.CIkJDsQj.css"])))=>i.map(i=>d[i]);
var CW=Object.defineProperty;var IW=(t,e,r)=>e in t?CW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Se=(t,e,r)=>IW(t,typeof e!="symbol"?e+"":e,r);/**
* @vue/shared v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function tC(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const qr={},Om=[],Iu=()=>{},kW=()=>!1,yw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),rC=t=>t.startsWith("onUpdate:"),Wn=Object.assign,nC=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},$W=Object.prototype.hasOwnProperty,Dr=(t,e)=>$W.call(t,e),dt=Array.isArray,Rm=t=>$y(t)==="[object Map]",ky=t=>$y(t)==="[object Set]",GO=t=>$y(t)==="[object Date]",OW=t=>$y(t)==="[object RegExp]",Pt=t=>typeof t=="function",an=t=>typeof t=="string",Lu=t=>typeof t=="symbol",Mr=t=>t!==null&&typeof t=="object",y3=t=>(Mr(t)||Pt(t))&&Pt(t.then)&&Pt(t.catch),g3=Object.prototype.toString,$y=t=>g3.call(t),RW=t=>$y(t).slice(8,-1),v3=t=>$y(t)==="[object Object]",iC=t=>an(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Nm=tC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gA=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},NW=/-(\w)/g,ja=gA(t=>t.replace(NW,(e,r)=>r?r.toUpperCase():"")),BW=/\B([A-Z])/g,Dp=gA(t=>t.replace(BW,"-$1").toLowerCase()),vA=gA(t=>t.charAt(0).toUpperCase()+t.slice(1)),JS=gA(t=>t?`on${vA(t)}`:""),af=(t,e)=>!Object.is(t,e),Bm=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},w3=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},G1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},_3=t=>{const e=an(t)?Number(t):NaN;return isNaN(e)?t:e};let JO;const b3=()=>JO||(JO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wA(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=an(n)?UW(n):wA(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(an(t)||Mr(t))return t}const FW=/;(?![^(]*\))/g,MW=/:([^]+)/,jW=/\/\*[^]*?\*\//g;function UW(t){const e={};return t.replace(jW,"").split(FW).forEach(r=>{if(r){const n=r.split(MW);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function _A(t){let e="";if(an(t))e=t;else if(dt(t))for(let r=0;r<t.length;r++){const n=_A(t[r]);n&&(e+=n+" ")}else if(Mr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function LW(t){if(!t)return null;let{class:e,style:r}=t;return e&&!an(e)&&(t.class=_A(e)),r&&(t.style=wA(r)),t}const KW="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VW=tC(KW);function E3(t){return!!t||t===""}function qW(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=op(t[n],e[n]);return r}function op(t,e){if(t===e)return!0;let r=GO(t),n=GO(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=Lu(t),n=Lu(e),r||n)return t===e;if(r=dt(t),n=dt(e),r||n)return r&&n?qW(t,e):!1;if(r=Mr(t),n=Mr(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!op(t[o],e[o]))return!1}}return String(t)===String(e)}function sC(t,e){return t.findIndex(r=>op(r,e))}const A3=t=>!!(t&&t.__v_isRef===!0),HW=t=>an(t)?t:t==null?"":dt(t)||Mr(t)&&(t.toString===g3||!Pt(t.toString))?A3(t)?HW(t.value):JSON.stringify(t,S3,2):String(t),S3=(t,e)=>A3(e)?S3(t,e.value):Rm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[XS(n,i)+" =>"]=s,r),{})}:ky(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>XS(r))}:Lu(e)?XS(e):Mr(e)&&!dt(e)&&!v3(e)?String(e):e,XS=(t,e="")=>{var r;return Lu(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let eo;class T3{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=eo,!e&&eo&&(this.index=(eo.scopes||(eo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=eo;try{return eo=this,e()}finally{eo=r}}}on(){eo=this}off(){eo=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function zW(t){return new T3(t)}function D3(){return eo}let Kr;const ZS=new WeakSet;class x3{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,eo&&eo.active&&eo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ZS.has(this)&&(ZS.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=U0,U0=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,XO(this),C3(this);const e=Kr,r=Ra;Kr=this,Ra=!0;try{return this.fn()}finally{I3(this),Kr=e,Ra=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)uC(e);this.deps=this.depsTail=void 0,XO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ZS.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){AD(this)&&this.run()}get dirty(){return AD(this)}}let P3=0,U0;function oC(){P3++}function aC(){if(--P3>0)return;let t;for(;U0;){let e=U0;for(U0=void 0;e;){const r=e.nextEffect;if(e.nextEffect=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function C3(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function I3(t){let e,r=t.depsTail;for(let n=r;n;n=n.prevDep)n.version===-1?(n===r&&(r=n.prevDep),uC(n),WW(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0;t.deps=e,t.depsTail=r}function AD(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&k3(e.dep.computed)||e.dep.version!==e.version)return!0;return!!t._dirty}function k3(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===_v))return;t.globalVersion=_v;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&!AD(t)){t.flags&=-3;return}const r=Kr,n=Ra;Kr=t,Ra=!0;try{C3(t);const s=t.fn(t._value);(e.version===0||af(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Kr=r,Ra=n,I3(t),t.flags&=-3}}function uC(t){const{dep:e,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),e.subs===t&&(e.subs=r),!e.subs&&e.computed){e.computed.flags&=-5;for(let s=e.computed.deps;s;s=s.nextDep)uC(s)}}function WW(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Ra=!0;const $3=[];function wf(){$3.push(Ra),Ra=!1}function _f(){const t=$3.pop();Ra=t===void 0?!0:t}function XO(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Kr;Kr=void 0;try{e()}finally{Kr=r}}}let _v=0;class cC{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!Kr||!Ra||Kr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Kr)r=this.activeLink={dep:this,sub:Kr,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},Kr.deps?(r.prevDep=Kr.depsTail,Kr.depsTail.nextDep=r,Kr.depsTail=r):Kr.deps=Kr.depsTail=r,Kr.flags&4&&O3(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Kr.depsTail,r.nextDep=void 0,Kr.depsTail.nextDep=r,Kr.depsTail=r,Kr.deps===r&&(Kr.deps=n)}return r}trigger(e){this.version++,_v++,this.notify(e)}notify(e){oC();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()}finally{aC()}}}function O3(t){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)O3(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}const J1=new WeakMap,Uh=Symbol(""),SD=Symbol(""),bv=Symbol("");function es(t,e,r){if(Ra&&Kr){let n=J1.get(t);n||J1.set(t,n=new Map);let s=n.get(r);s||n.set(r,s=new cC),s.track()}}function el(t,e,r,n,s,i){const o=J1.get(t);if(!o){_v++;return}const a=u=>{u&&u.trigger()};if(oC(),e==="clear")o.forEach(a);else{const u=dt(t),l=u&&iC(r);if(u&&r==="length"){const c=Number(n);o.forEach((d,h)=>{(h==="length"||h===bv||!Lu(h)&&h>=c)&&a(d)})}else switch(r!==void 0&&a(o.get(r)),l&&a(o.get(bv)),e){case"add":u?l&&a(o.get("length")):(a(o.get(Uh)),Rm(t)&&a(o.get(SD)));break;case"delete":u||(a(o.get(Uh)),Rm(t)&&a(o.get(SD)));break;case"set":Rm(t)&&a(o.get(Uh));break}}aC()}function GW(t,e){var r;return(r=J1.get(t))==null?void 0:r.get(e)}function qp(t){const e=hr(t);return e===t?e:(es(e,"iterate",bv),Zo(t)?e:e.map(Zi))}function bA(t){return es(t=hr(t),"iterate",bv),t}const JW={__proto__:null,[Symbol.iterator](){return YS(this,Symbol.iterator,Zi)},concat(...t){return qp(this).concat(...t.map(e=>dt(e)?qp(e):e))},entries(){return YS(this,"entries",t=>(t[1]=Zi(t[1]),t))},every(t,e){return oc(this,"every",t,e,void 0,arguments)},filter(t,e){return oc(this,"filter",t,e,r=>r.map(Zi),arguments)},find(t,e){return oc(this,"find",t,e,Zi,arguments)},findIndex(t,e){return oc(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return oc(this,"findLast",t,e,Zi,arguments)},findLastIndex(t,e){return oc(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return oc(this,"forEach",t,e,void 0,arguments)},includes(...t){return QS(this,"includes",t)},indexOf(...t){return QS(this,"indexOf",t)},join(t){return qp(this).join(t)},lastIndexOf(...t){return QS(this,"lastIndexOf",t)},map(t,e){return oc(this,"map",t,e,void 0,arguments)},pop(){return lg(this,"pop")},push(...t){return lg(this,"push",t)},reduce(t,...e){return ZO(this,"reduce",t,e)},reduceRight(t,...e){return ZO(this,"reduceRight",t,e)},shift(){return lg(this,"shift")},some(t,e){return oc(this,"some",t,e,void 0,arguments)},splice(...t){return lg(this,"splice",t)},toReversed(){return qp(this).toReversed()},toSorted(t){return qp(this).toSorted(t)},toSpliced(...t){return qp(this).toSpliced(...t)},unshift(...t){return lg(this,"unshift",t)},values(){return YS(this,"values",Zi)}};function YS(t,e,r){const n=bA(t),s=n[e]();return n!==t&&!Zo(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const XW=Array.prototype;function oc(t,e,r,n,s,i){const o=bA(t),a=o!==t&&!Zo(t),u=o[e];if(u!==XW[e]){const d=u.apply(t,i);return a?Zi(d):d}let l=r;o!==t&&(a?l=function(d,h){return r.call(this,Zi(d),h,t)}:r.length>2&&(l=function(d,h){return r.call(this,d,h,t)}));const c=u.call(o,l,n);return a&&s?s(c):c}function ZO(t,e,r,n){const s=bA(t);let i=r;return s!==t&&(Zo(t)?r.length>3&&(i=function(o,a,u){return r.call(this,o,a,u,t)}):i=function(o,a,u){return r.call(this,o,Zi(a),u,t)}),s[e](i,...n)}function QS(t,e,r){const n=hr(t);es(n,"iterate",bv);const s=n[e](...r);return(s===-1||s===!1)&&hC(r[0])?(r[0]=hr(r[0]),n[e](...r)):s}function lg(t,e,r=[]){wf(),oC();const n=hr(t)[e].apply(t,r);return aC(),_f(),n}const ZW=tC("__proto__,__v_isRef,__isVue"),R3=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lu));function YW(t){Lu(t)||(t=String(t));const e=hr(this);return es(e,"has",t),e.hasOwnProperty(t)}class N3{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?dG:j3:i?M3:F3).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=dt(e);if(!s){let u;if(o&&(u=JW[r]))return u;if(r==="hasOwnProperty")return YW}const a=Reflect.get(e,r,ui(e)?e:n);return(Lu(r)?R3.has(r):ZW(r))||(s||es(e,"get",r),i)?a:ui(a)?o&&iC(r)?a:a.value:Mr(a)?s?U3(a):vl(a):a}}class B3 extends N3{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const u=uf(i);if(!Zo(n)&&!uf(n)&&(i=hr(i),n=hr(n)),!dt(e)&&ui(i)&&!ui(n))return u?!1:(i.value=n,!0)}const o=dt(e)&&iC(r)?Number(r)<e.length:Dr(e,r),a=Reflect.set(e,r,n,ui(e)?e:s);return e===hr(s)&&(o?af(n,i)&&el(e,"set",r,n):el(e,"add",r,n)),a}deleteProperty(e,r){const n=Dr(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&el(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!Lu(r)||!R3.has(r))&&es(e,"has",r),n}ownKeys(e){return es(e,"iterate",dt(e)?"length":Uh),Reflect.ownKeys(e)}}class QW extends N3{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const eG=new B3,tG=new QW,rG=new B3(!0);const lC=t=>t,EA=t=>Reflect.getPrototypeOf(t);function g_(t,e,r=!1,n=!1){t=t.__v_raw;const s=hr(t),i=hr(e);r||(af(e,i)&&es(s,"get",e),es(s,"get",i));const{has:o}=EA(s),a=n?lC:r?pC:Zi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function v_(t,e=!1){const r=this.__v_raw,n=hr(r),s=hr(t);return e||(af(t,s)&&es(n,"has",t),es(n,"has",s)),t===s?r.has(t):r.has(t)||r.has(s)}function w_(t,e=!1){return t=t.__v_raw,!e&&es(hr(t),"iterate",Uh),Reflect.get(t,"size",t)}function YO(t,e=!1){!e&&!Zo(t)&&!uf(t)&&(t=hr(t));const r=hr(this);return EA(r).has.call(r,t)||(r.add(t),el(r,"add",t,t)),this}function QO(t,e,r=!1){!r&&!Zo(e)&&!uf(e)&&(e=hr(e));const n=hr(this),{has:s,get:i}=EA(n);let o=s.call(n,t);o||(t=hr(t),o=s.call(n,t));const a=i.call(n,t);return n.set(t,e),o?af(e,a)&&el(n,"set",t,e):el(n,"add",t,e),this}function e5(t){const e=hr(this),{has:r,get:n}=EA(e);let s=r.call(e,t);s||(t=hr(t),s=r.call(e,t)),n&&n.call(e,t);const i=e.delete(t);return s&&el(e,"delete",t,void 0),i}function t5(){const t=hr(this),e=t.size!==0,r=t.clear();return e&&el(t,"clear",void 0,void 0),r}function __(t,e){return function(n,s){const i=this,o=i.__v_raw,a=hr(o),u=e?lC:t?pC:Zi;return!t&&es(a,"iterate",Uh),o.forEach((l,c)=>n.call(s,u(l),u(c),i))}}function b_(t,e,r){return function(...n){const s=this.__v_raw,i=hr(s),o=Rm(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,l=s[t](...n),c=r?lC:e?pC:Zi;return!e&&es(i,"iterate",u?SD:Uh),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:a?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function Il(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nG(){const t={get(i){return g_(this,i)},get size(){return w_(this)},has:v_,add:YO,set:QO,delete:e5,clear:t5,forEach:__(!1,!1)},e={get(i){return g_(this,i,!1,!0)},get size(){return w_(this)},has:v_,add(i){return YO.call(this,i,!0)},set(i,o){return QO.call(this,i,o,!0)},delete:e5,clear:t5,forEach:__(!1,!0)},r={get(i){return g_(this,i,!0)},get size(){return w_(this,!0)},has(i){return v_.call(this,i,!0)},add:Il("add"),set:Il("set"),delete:Il("delete"),clear:Il("clear"),forEach:__(!0,!1)},n={get(i){return g_(this,i,!0,!0)},get size(){return w_(this,!0)},has(i){return v_.call(this,i,!0)},add:Il("add"),set:Il("set"),delete:Il("delete"),clear:Il("clear"),forEach:__(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=b_(i,!1,!1),r[i]=b_(i,!0,!1),e[i]=b_(i,!1,!0),n[i]=b_(i,!0,!0)}),[t,r,e,n]}const[iG,sG,oG,aG]=nG();function dC(t,e){const r=e?t?aG:oG:t?sG:iG;return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Dr(r,s)&&s in n?r:n,s,i)}const uG={get:dC(!1,!1)},cG={get:dC(!1,!0)},lG={get:dC(!0,!1)};const F3=new WeakMap,M3=new WeakMap,j3=new WeakMap,dG=new WeakMap;function fG(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hG(t){return t.__v_skip||!Object.isExtensible(t)?0:fG(RW(t))}function vl(t){return uf(t)?t:fC(t,!1,eG,uG,F3)}function Jc(t){return fC(t,!1,rG,cG,M3)}function U3(t){return fC(t,!0,tG,lG,j3)}function fC(t,e,r,n,s){if(!Mr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=hG(t);if(o===0)return t;const a=new Proxy(t,o===2?n:r);return s.set(t,a),a}function Lh(t){return uf(t)?Lh(t.__v_raw):!!(t&&t.__v_isReactive)}function uf(t){return!!(t&&t.__v_isReadonly)}function Zo(t){return!!(t&&t.__v_isShallow)}function hC(t){return t?!!t.__v_raw:!1}function hr(t){const e=t&&t.__v_raw;return e?hr(e):t}function pG(t){return!Dr(t,"__v_skip")&&Object.isExtensible(t)&&w3(t,"__v_skip",!0),t}const Zi=t=>Mr(t)?vl(t):t,pC=t=>Mr(t)?U3(t):t;function ui(t){return t?t.__v_isRef===!0:!1}function ku(t){return L3(t,!1)}function Ev(t){return L3(t,!0)}function L3(t,e){return ui(t)?t:new mG(t,e)}class mG{constructor(e,r){this.dep=new cC,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:hr(e),this._value=r?e:Zi(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Zo(e)||uf(e);e=n?e:hr(e),af(e,r)&&(this._rawValue=e,this._value=n?e:Zi(e),this.dep.trigger())}}function on(t){return ui(t)?t.value:t}const yG={get:(t,e,r)=>e==="__v_raw"?t:on(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return ui(s)&&!ui(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function K3(t){return Lh(t)?t:new Proxy(t,yG)}class gG{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return GW(hr(this._object),this._key)}}class vG{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function wG(t,e,r){return ui(t)?t:Pt(t)?new vG(t):Mr(t)&&arguments.length>1?_G(t,e,r):ku(t)}function _G(t,e,r){const n=t[e];return ui(n)?n:new gG(t,e,r)}class bG{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new cC(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_v-1,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){this.flags|=16,Kr!==this&&this.dep.notify()}get value(){const e=this.dep.track();return k3(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function EG(t,e,r=!1){let n,s;return Pt(t)?n=t:(n=t.get,s=t.set),new bG(n,s,r)}const E_={},X1=new WeakMap;let ch;function AG(t,e=!1,r=ch){if(r){let n=X1.get(r);n||X1.set(r,n=[]),n.push(t)}}function SG(t,e,r=qr){const{immediate:n,deep:s,once:i,scheduler:o,augmentJob:a,call:u}=r,l=v=>s?v:Zo(v)||s===!1||s===0?qc(v,1):qc(v);let c,d,h,f,p=!1,m=!1;if(ui(t)?(d=()=>t.value,p=Zo(t)):Lh(t)?(d=()=>l(t),p=!0):dt(t)?(m=!0,p=t.some(v=>Lh(v)||Zo(v)),d=()=>t.map(v=>{if(ui(v))return v.value;if(Lh(v))return l(v);if(Pt(v))return u?u(v,2):v()})):Pt(t)?e?d=u?()=>u(t,2):t:d=()=>{if(h){wf();try{h()}finally{_f()}}const v=ch;ch=c;try{return u?u(t,3,[f]):t(f)}finally{ch=v}}:d=Iu,e&&s){const v=d,S=s===!0?1/0:s;d=()=>qc(v(),S)}const E=D3(),A=()=>{c.stop(),E&&nC(E.effects,c)};if(i)if(e){const v=e;e=(...S)=>{v(...S),A()}}else{const v=d;d=()=>{v(),A()}}let _=m?new Array(t.length).fill(E_):E_;const g=v=>{if(!(!(c.flags&1)||!c.dirty&&!v))if(e){const S=c.run();if(s||p||(m?S.some((x,D)=>af(x,_[D])):af(S,_))){h&&h();const x=ch;ch=c;try{const D=[S,_===E_?void 0:m&&_[0]===E_?[]:_,f];u?u(e,3,D):e(...D),_=S}finally{ch=x}}}else c.run()};return a&&a(g),c=new x3(d),c.scheduler=o?()=>o(g,!1):g,f=v=>AG(v,!1,c),h=c.onStop=()=>{const v=X1.get(c);if(v){if(u)u(v,4);else for(const S of v)S();X1.delete(c)}},e?n?g(!0):_=c.run():o?o(g.bind(null,!0),!0):c.run(),A.pause=c.pause.bind(c),A.resume=c.resume.bind(c),A.stop=A,A}function qc(t,e=1/0,r){if(e<=0||!Mr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,ui(t))qc(t.value,e,r);else if(dt(t))for(let n=0;n<t.length;n++)qc(t[n],e,r);else if(ky(t)||Rm(t))t.forEach(n=>{qc(n,e,r)});else if(v3(t)){for(const n in t)qc(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&qc(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gw(t,e,r,n){try{return n?t(...n):t()}catch(s){Oy(s,e,r)}}function Ua(t,e,r,n){if(Pt(t)){const s=gw(t,e,r,n);return s&&y3(s)&&s.catch(i=>{Oy(i,e,r)}),s}if(dt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Ua(t[i],e,r,n));return s}}function Oy(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||qr;if(e){let a=e.parent;const u=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,u,l)===!1)return}a=a.parent}if(i){wf(),gw(i,null,10,[t,u,l]),_f();return}}TG(t,r,s,n,o)}function TG(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}let Av=!1,TD=!1;const ms=[];let lu=0;const Fm=[];let Ed=null,lm=0;const V3=Promise.resolve();let mC=null;function Ry(t){const e=mC||V3;return t?e.then(this?t.bind(this):t):e}function DG(t){let e=Av?lu+1:0,r=ms.length;for(;e<r;){const n=e+r>>>1,s=ms[n],i=Sv(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function AA(t){if(!(t.flags&1)){const e=Sv(t),r=ms[ms.length-1];!r||!(t.flags&2)&&e>=Sv(r)?ms.push(t):ms.splice(DG(e),0,t),t.flags|=1,q3()}}function q3(){!Av&&!TD&&(TD=!0,mC=V3.then(H3))}function DD(t){dt(t)?Fm.push(...t):Ed&&t.id===-1?Ed.splice(lm+1,0,t):t.flags&1||(Fm.push(t),t.flags|=1),q3()}function r5(t,e,r=Av?lu+1:0){for(;r<ms.length;r++){const n=ms[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ms.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&=-2}}}function Z1(t){if(Fm.length){const e=[...new Set(Fm)].sort((r,n)=>Sv(r)-Sv(n));if(Fm.length=0,Ed){Ed.push(...e);return}for(Ed=e,lm=0;lm<Ed.length;lm++){const r=Ed[lm];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Ed=null,lm=0}}const Sv=t=>t.id==null?t.flags&2?-1:1/0:t.id;function H3(t){TD=!1,Av=!0;try{for(lu=0;lu<ms.length;lu++){const e=ms[lu];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),gw(e,e.i,e.i?15:14),e.flags&=-2)}}finally{for(;lu<ms.length;lu++){const e=ms[lu];e&&(e.flags&=-2)}lu=0,ms.length=0,Z1(),Av=!1,mC=null,(ms.length||Fm.length)&&H3()}}let ys=null,z3=null;function Y1(t){const e=ys;return ys=t,z3=t&&t.type.__scopeId||null,e}function W3(t,e=ys,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&m5(-1);const i=Y1(e);let o;try{o=t(...s)}finally{Y1(i),n._d&&m5(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function OOe(t,e){if(ys===null)return t;const r=CA(ys),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,u=qr]=e[s];i&&(Pt(i)&&(i={mounted:i,updated:i}),i.deep&&qc(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function hu(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[n];u&&(wf(),Ua(u,r,8,[t.el,a,t,e]),_f())}}const xG=Symbol("_vte"),G3=t=>t.__isTeleport,Ad=Symbol("_leaveCb"),A_=Symbol("_enterCb");function PG(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return TA(()=>{t.isMounted=!0}),DA(()=>{t.isUnmounting=!0}),t}const So=[Function,Array],J3={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:So,onEnter:So,onAfterEnter:So,onEnterCancelled:So,onBeforeLeave:So,onLeave:So,onAfterLeave:So,onLeaveCancelled:So,onBeforeAppear:So,onAppear:So,onAfterAppear:So,onAppearCancelled:So},X3=t=>{const e=t.subTree;return e.component?X3(e.component):e},CG={name:"BaseTransition",props:J3,setup(t,{slots:e}){const r=PA(),n=PG();return()=>{const s=e.default&&Q3(e.default(),!0);if(!s||!s.length)return;const i=Z3(s),o=hr(t),{mode:a}=o;if(n.isLeaving)return e2(i);const u=n5(i);if(!u)return e2(i);let l=xD(u,o,n,r,h=>l=h);u.type!==si&&Qm(u,l);const c=r.subTree,d=c&&n5(c);if(d&&d.type!==si&&!Da(u,d)&&X3(r).type!==si){const h=xD(d,o,n,r);if(Qm(d,h),a==="out-in"&&u.type!==si)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave},e2(i);a==="in-out"&&u.type!==si&&(h.delayLeave=(f,p,m)=>{const E=Y3(n,d);E[String(d.key)]=d,f[Ad]=()=>{p(),f[Ad]=void 0,delete l.delayedLeave},l.delayedLeave=m})}return i}}};function Z3(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==si){e=r;break}}return e}const IG=CG;function Y3(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function xD(t,e,r,n,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:E,onAppear:A,onAfterAppear:_,onAppearCancelled:g}=e,v=String(t.key),S=Y3(r,t),x=(b,T)=>{b&&Ua(b,n,9,T)},D=(b,T)=>{const P=T[1];x(b,T),dt(b)?b.every(C=>C.length<=1)&&P():b.length<=1&&P()},w={mode:o,persisted:a,beforeEnter(b){let T=u;if(!r.isMounted)if(i)T=E||u;else return;b[Ad]&&b[Ad](!0);const P=S[v];P&&Da(t,P)&&P.el[Ad]&&P.el[Ad](),x(T,[b])},enter(b){let T=l,P=c,C=d;if(!r.isMounted)if(i)T=A||l,P=_||c,C=g||d;else return;let k=!1;const K=b[A_]=L=>{k||(k=!0,L?x(C,[b]):x(P,[b]),w.delayedLeave&&w.delayedLeave(),b[A_]=void 0)};T?D(T,[b,K]):K()},leave(b,T){const P=String(t.key);if(b[A_]&&b[A_](!0),r.isUnmounting)return T();x(h,[b]);let C=!1;const k=b[Ad]=K=>{C||(C=!0,T(),K?x(m,[b]):x(p,[b]),b[Ad]=void 0,S[P]===t&&delete S[P])};S[P]=t,f?D(f,[b,k]):k()},clone(b){const T=xD(b,e,r,n,s);return s&&s(T),T}};return w}function e2(t){if(vw(t))return t=ol(t),t.children=null,t}function n5(t){if(!vw(t))return G3(t.type)&&t.children?Z3(t.children):t;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Pt(r.default))return r.default()}}function Qm(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Qm(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Q3(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===so?(o.patchFlag&128&&s++,n=n.concat(Q3(o.children,e,a))):(e||o.type!==si)&&n.push(a!=null?ol(o,{key:a}):o)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ny(t,e){return Pt(t)?Wn({name:t.name},e,{setup:t}):t}function yC(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Q1(t,e,r,n,s=!1){if(dt(t)){t.forEach((p,m)=>Q1(p,e&&(dt(e)?e[m]:e),r,n,s));return}if(Kh(n)&&!s)return;const i=n.shapeFlag&4?CA(n.component):n.el,o=s?null:i,{i:a,r:u}=t,l=e&&e.r,c=a.refs===qr?a.refs={}:a.refs,d=a.setupState,h=hr(d),f=d===qr?()=>!1:p=>Dr(h,p);if(l!=null&&l!==u&&(an(l)?(c[l]=null,f(l)&&(d[l]=null)):ui(l)&&(l.value=null)),Pt(u))gw(u,a,12,[o,c]);else{const p=an(u),m=ui(u);if(p||m){const E=()=>{if(t.f){const A=p?f(u)?d[u]:c[u]:u.value;s?dt(A)&&nC(A,i):dt(A)?A.includes(i)||A.push(i):p?(c[u]=[i],f(u)&&(d[u]=c[u])):(u.value=[i],t.k&&(c[t.k]=u.value))}else p?(c[u]=o,f(u)&&(d[u]=o)):m&&(u.value=o,t.k&&(c[t.k]=o))};o?(E.id=-1,xi(E,r)):E()}}}let i5=!1;const Hp=()=>{i5||(console.error("Hydration completed but contains mismatches."),i5=!0)},kG=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",$G=t=>t.namespaceURI.includes("MathML"),S_=t=>{if(t.nodeType===1){if(kG(t))return"svg";if($G(t))return"mathml"}},Tm=t=>t.nodeType===8;function OG(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:o,remove:a,insert:u,createComment:l}}=t,c=(g,v)=>{if(!v.hasChildNodes()){r(null,g,v),Z1(),v._vnode=g;return}d(v.firstChild,g,null,null,null),Z1(),v._vnode=g},d=(g,v,S,x,D,w=!1)=>{w=w||!!v.dynamicChildren;const b=Tm(g)&&g.data==="[",T=()=>m(g,v,S,x,D,b),{type:P,ref:C,shapeFlag:k,patchFlag:K}=v;let L=g.nodeType;v.el=g,K===-2&&(w=!1,v.dynamicChildren=null);let q=null;switch(P){case Hh:L!==3?v.children===""?(u(v.el=s(""),o(g),g),q=g):q=T():(g.data!==v.children&&(Hp(),g.data=v.children),q=i(g));break;case si:_(g)?(q=i(g),A(v.el=g.content.firstChild,g,S)):L!==8||b?q=T():q=i(g);break;case K0:if(b&&(g=i(g),L=g.nodeType),L===1||L===3){q=g;const se=!v.children.length;for(let X=0;X<v.staticCount;X++)se&&(v.children+=q.nodeType===1?q.outerHTML:q.data),X===v.staticCount-1&&(v.anchor=q),q=i(q);return b?i(q):q}else T();break;case so:b?q=p(g,v,S,x,D,w):q=T();break;default:if(k&1)(L!==1||v.type.toLowerCase()!==g.tagName.toLowerCase())&&!_(g)?q=T():q=h(g,v,S,x,D,w);else if(k&6){v.slotScopeIds=D;const se=o(g);if(b?q=E(g):Tm(g)&&g.data==="teleport start"?q=E(g,g.data,"teleport end"):q=i(g),e(v,se,null,S,x,S_(se),w),Kh(v)){let X;b?(X=wn(so),X.anchor=q?q.previousSibling:se.lastChild):X=g.nodeType===3?B4(""):wn("div"),X.el=g,v.component.subTree=X}}else k&64?L!==8?q=T():q=v.type.hydrate(g,v,S,x,D,w,t,f):k&128&&(q=v.type.hydrate(g,v,S,x,S_(o(g)),D,w,t,d))}return C!=null&&Q1(C,null,x,v),q},h=(g,v,S,x,D,w)=>{w=w||!!v.dynamicChildren;const{type:b,props:T,patchFlag:P,shapeFlag:C,dirs:k,transition:K}=v,L=b==="input"||b==="option";if(L||P!==-1){k&&hu(v,null,S,"created");let q=!1;if(_(g)){q=E4(x,K)&&S&&S.vnode.props&&S.vnode.props.appear;const X=g.content.firstChild;q&&K.beforeEnter(X),A(X,g,S),v.el=g=X}if(C&16&&!(T&&(T.innerHTML||T.textContent))){let X=f(g.firstChild,v,g,S,x,D,w);for(;X;){T_(g,1)||Hp();const re=X;X=X.nextSibling,a(re)}}else C&8&&g.textContent!==v.children&&(T_(g,0)||Hp(),g.textContent=v.children);if(T){if(L||!w||P&48){const X=g.tagName.includes("-");for(const re in T)(L&&(re.endsWith("value")||re==="indeterminate")||yw(re)&&!Nm(re)||re[0]==="."||X)&&n(g,re,null,T[re],void 0,S)}else if(T.onClick)n(g,"onClick",null,T.onClick,void 0,S);else if(P&4&&Lh(T.style))for(const X in T.style)T.style[X]}let se;(se=T&&T.onVnodeBeforeMount)&&$s(se,S,v),k&&hu(v,null,S,"beforeMount"),((se=T&&T.onVnodeMounted)||k||q)&&C4(()=>{se&&$s(se,S,v),q&&K.enter(g),k&&hu(v,null,S,"mounted")},x)}return g.nextSibling},f=(g,v,S,x,D,w,b)=>{b=b||!!v.dynamicChildren;const T=v.children,P=T.length;for(let C=0;C<P;C++){const k=b?T[C]:T[C]=oo(T[C]),K=k.type===Hh;g?(K&&!b&&C+1<P&&oo(T[C+1]).type===Hh&&(u(s(g.data.slice(k.children.length)),S,i(g)),g.data=k.children),g=d(g,k,x,D,w,b)):K&&!k.children?u(k.el=s(""),S):(T_(S,1)||Hp(),r(null,k,S,null,x,D,S_(S),w))}return g},p=(g,v,S,x,D,w)=>{const{slotScopeIds:b}=v;b&&(D=D?D.concat(b):b);const T=o(g),P=f(i(g),v,T,S,x,D,w);return P&&Tm(P)&&P.data==="]"?i(v.anchor=P):(Hp(),u(v.anchor=l("]"),T,P),P)},m=(g,v,S,x,D,w)=>{if(T_(g.parentElement,1)||Hp(),v.el=null,w){const P=E(g);for(;;){const C=i(g);if(C&&C!==P)a(C);else break}}const b=i(g),T=o(g);return a(g),r(null,v,T,b,S,x,S_(T),D),b},E=(g,v="[",S="]")=>{let x=0;for(;g;)if(g=i(g),g&&Tm(g)&&(g.data===v&&x++,g.data===S)){if(x===0)return i(g);x--}return g},A=(g,v,S)=>{const x=v.parentNode;x&&x.replaceChild(g,v);let D=S;for(;D;)D.vnode.el===v&&(D.vnode.el=D.subTree.el=g),D=D.parent},_=g=>g.nodeType===1&&g.tagName.toLowerCase()==="template";return[c,d]}const s5="data-allow-mismatch",RG={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function T_(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(s5);)t=t.parentElement;const r=t&&t.getAttribute(s5);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:r.split(",").includes(RG[e])}}function NG(t,e){if(Tm(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1)e(n);else if(Tm(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const Kh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function o5(t){Pt(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:u}=t;let l=null,c,d=0;const h=()=>(d++,l=null,f()),f=()=>{let p;return l||(p=l=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),u)return new Promise((E,A)=>{u(m,()=>E(h()),()=>A(m),d+1)});throw m}).then(m=>p!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return Ny({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,m,E){const A=i?()=>{const _=i(E,g=>NG(p,g));_&&(m.bum||(m.bum=[])).push(_)}:E;c?A():f().then(()=>!m.isUnmounted&&A())},get __asyncResolved(){return c},setup(){const p=qn;if(yC(p),c)return()=>t2(c,p);const m=g=>{l=null,Oy(g,p,13,!n)};if(a&&p.suspense||_w)return f().then(g=>()=>t2(g,p)).catch(g=>(m(g),()=>n?wn(n,{error:g}):null));const E=ku(!1),A=ku(),_=ku(!!s);return s&&setTimeout(()=>{_.value=!1},s),o!=null&&setTimeout(()=>{if(!E.value&&!A.value){const g=new Error(`Async component timed out after ${o}ms.`);m(g),A.value=g}},o),f().then(()=>{E.value=!0,p.parent&&vw(p.parent.vnode)&&AA(p.parent.update)}).catch(g=>{m(g),A.value=g}),()=>{if(E.value&&c)return t2(c,p);if(A.value&&n)return wn(n,{error:A.value});if(r&&!_.value)return wn(r)}}})}function t2(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,o=wn(t,n,s);return o.ref=r,o.ce=i,delete e.vnode.ce,o}const vw=t=>t.type.__isKeepAlive,BG={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=PA(),n=r.ctx;if(!n.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const s=new Map,i=new Set;let o=null;const a=r.suspense,{renderer:{p:u,m:l,um:c,o:{createElement:d}}}=n,h=d("div");n.activate=(_,g,v,S,x)=>{const D=_.component;l(_,g,v,0,a),u(D.vnode,_,g,v,D,a,S,_.slotScopeIds,x),xi(()=>{D.isDeactivated=!1,D.a&&Bm(D.a);const w=_.props&&_.props.onVnodeMounted;w&&$s(w,D.parent,_)},a)},n.deactivate=_=>{const g=_.component;tE(g.m),tE(g.a),l(_,h,null,1,a),xi(()=>{g.da&&Bm(g.da);const v=_.props&&_.props.onVnodeUnmounted;v&&$s(v,g.parent,_),g.isDeactivated=!0},a)};function f(_){r2(_),c(_,r,a,!0)}function p(_){s.forEach((g,v)=>{const S=ND(g.type);S&&!_(S)&&m(v)})}function m(_){const g=s.get(_);g&&(!o||!Da(g,o))?f(g):o&&r2(o),s.delete(_),i.delete(_)}zd(()=>[t.include,t.exclude],([_,g])=>{_&&p(v=>h0(_,v)),g&&p(v=>!h0(g,v))},{flush:"post",deep:!0});let E=null;const A=()=>{E!=null&&(rE(r.subTree.type)?xi(()=>{s.set(E,D_(r.subTree))},r.subTree.suspense):s.set(E,D_(r.subTree)))};return TA(A),n4(A),DA(()=>{s.forEach(_=>{const{subTree:g,suspense:v}=r,S=D_(g);if(_.type===S.type&&_.key===S.key){r2(S);const x=S.component.da;x&&xi(x,v);return}f(_)})}),()=>{if(E=null,!e.default)return o=null;const _=e.default(),g=_[0];if(_.length>1)return o=null,_;if(!Dv(g)||!(g.shapeFlag&4)&&!(g.shapeFlag&128))return o=null,g;let v=D_(g);if(v.type===si)return o=null,v;const S=v.type,x=ND(Kh(v)?v.type.__asyncResolved||{}:S),{include:D,exclude:w,max:b}=t;if(D&&(!x||!h0(D,x))||w&&x&&h0(w,x))return v.shapeFlag&=-257,o=v,g;const T=v.key==null?S:v.key,P=s.get(T);return v.el&&(v=ol(v),g.shapeFlag&128&&(g.ssContent=v)),E=T,P?(v.el=P.el,v.component=P.component,v.transition&&Qm(v,v.transition),v.shapeFlag|=512,i.delete(T),i.add(T)):(i.add(T),b&&i.size>parseInt(b,10)&&m(i.values().next().value)),v.shapeFlag|=256,o=v,rE(g.type)?g:v}}},FG=BG;function h0(t,e){return dt(t)?t.some(r=>h0(r,e)):an(t)?t.split(",").includes(e):OW(t)?(t.lastIndex=0,t.test(e)):!1}function e4(t,e){r4(t,"a",e)}function t4(t,e){r4(t,"da",e)}function r4(t,e,r=qn){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(SA(e,n,r),r){let s=r.parent;for(;s&&s.parent;)vw(s.parent.vnode)&&MG(n,e,r,s),s=s.parent}}function MG(t,e,r,n){const s=SA(e,t,n,!0);i4(()=>{nC(n[e],s)},r)}function r2(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function D_(t){return t.shapeFlag&128?t.ssContent:t}function SA(t,e,r=qn,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{wf();const a=ww(r),u=Ua(e,r,t,o);return a(),_f(),u});return n?s.unshift(i):s.push(i),i}}const wl=t=>(e,r=qn)=>{(!_w||t==="sp")&&SA(t,(...n)=>e(...n),r)},jG=wl("bm"),TA=wl("m"),UG=wl("bu"),n4=wl("u"),DA=wl("bum"),i4=wl("um"),LG=wl("sp"),KG=wl("rtg"),VG=wl("rtc");function s4(t,e=qn){SA("ec",t,e)}const o4="components";function ROe(t,e){return u4(o4,t,!0,e)||t}const a4=Symbol.for("v-ndc");function qG(t){return an(t)?u4(o4,t,!1)||t:t||a4}function u4(t,e,r=!0,n=!1){const s=ys||qn;if(s){const i=s.type;{const a=ND(i,!1);if(a&&(a===e||a===ja(e)||a===vA(ja(e))))return i}const o=a5(s[t]||i[t],e)||a5(s.appContext[t],e);return!o&&n?i:o}}function a5(t,e){return t&&(t[e]||t[ja(e)]||t[vA(ja(e))])}function NOe(t,e,r,n){let s;const i=r,o=dt(t);if(o||an(t)){const a=o&&Lh(t);let u=!1;a&&(u=!Zo(t),t=bA(t)),s=new Array(t.length);for(let l=0,c=t.length;l<c;l++)s[l]=e(u?Zi(t[l]):t[l],l,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Mr(t))if(t[Symbol.iterator])s=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let u=0,l=a.length;u<l;u++){const c=a[u];s[u]=e(t[c],c,u,i)}}else s=[];return s}const PD=t=>t?F4(t)?CA(t):PD(t.parent):null,L0=Wn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>PD(t.parent),$root:t=>PD(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>gC(t),$forceUpdate:t=>t.f||(t.f=()=>{AA(t.update)}),$nextTick:t=>t.n||(t.n=Ry.bind(t.proxy)),$watch:t=>dJ.bind(t)}),n2=(t,e)=>t!==qr&&!t.__isScriptSetup&&Dr(t,e),HG={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(n2(n,e))return o[e]=1,n[e];if(s!==qr&&Dr(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&Dr(l,e))return o[e]=3,i[e];if(r!==qr&&Dr(r,e))return o[e]=4,r[e];CD&&(o[e]=0)}}const c=L0[e];let d,h;if(c)return e==="$attrs"&&es(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(r!==qr&&Dr(r,e))return o[e]=4,r[e];if(h=u.config.globalProperties,Dr(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return n2(s,e)?(s[e]=r,!0):n!==qr&&Dr(n,e)?(n[e]=r,!0):Dr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!r[o]||t!==qr&&Dr(t,o)||n2(e,o)||(a=i[0])&&Dr(a,o)||Dr(n,o)||Dr(L0,o)||Dr(s.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Dr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function u5(t){return dt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let CD=!0;function zG(t){const e=gC(t),r=t.proxy,n=t.ctx;CD=!1,e.beforeCreate&&c5(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:l,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:E,beforeDestroy:A,beforeUnmount:_,destroyed:g,unmounted:v,render:S,renderTracked:x,renderTriggered:D,errorCaptured:w,serverPrefetch:b,expose:T,inheritAttrs:P,components:C,directives:k,filters:K}=e;if(l&&WG(l,n,null),o)for(const se in o){const X=o[se];Pt(X)&&(n[se]=X.bind(r))}if(s){const se=s.call(r,r);Mr(se)&&(t.data=vl(se))}if(CD=!0,i)for(const se in i){const X=i[se],re=Pt(X)?X.bind(r,r):Pt(X.get)?X.get.bind(r,r):Iu,W=!Pt(X)&&Pt(X.set)?X.set.bind(r):Iu,B=xa({get:re,set:W});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>B.value,set:te=>B.value=te})}if(a)for(const se in a)c4(a[se],n,r,se);if(u){const se=Pt(u)?u.call(r):u;Reflect.ownKeys(se).forEach(X=>{qh(X,se[X])})}c&&c5(c,t,"c");function q(se,X){dt(X)?X.forEach(re=>se(re.bind(r))):X&&se(X.bind(r))}if(q(jG,d),q(TA,h),q(UG,f),q(n4,p),q(e4,m),q(t4,E),q(s4,w),q(VG,x),q(KG,D),q(DA,_),q(i4,v),q(LG,b),dt(T))if(T.length){const se=t.exposed||(t.exposed={});T.forEach(X=>{Object.defineProperty(se,X,{get:()=>r[X],set:re=>r[X]=re})})}else t.exposed||(t.exposed={});S&&t.render===Iu&&(t.render=S),P!=null&&(t.inheritAttrs=P),C&&(t.components=C),k&&(t.directives=k),b&&yC(t)}function WG(t,e,r=Iu){dt(t)&&(t=ID(t));for(const n in t){const s=t[n];let i;Mr(s)?"default"in s?i=Ks(s.from||n,s.default,!0):i=Ks(s.from||n):i=Ks(s),ui(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function c5(t,e,r){Ua(dt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function c4(t,e,r,n){let s=n.includes(".")?T4(r,n):()=>r[n];if(an(t)){const i=e[t];Pt(i)&&zd(s,i)}else if(Pt(t))zd(s,t.bind(r));else if(Mr(t))if(dt(t))t.forEach(i=>c4(i,e,r,n));else{const i=Pt(t.handler)?t.handler.bind(r):e[t.handler];Pt(i)&&zd(s,i,t)}}function gC(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!r&&!n?u=e:(u={},s.length&&s.forEach(l=>eE(u,l,o,!0)),eE(u,e,o)),Mr(e)&&i.set(e,u),u}function eE(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&eE(t,i,r,!0),s&&s.forEach(o=>eE(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const a=GG[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const GG={data:l5,props:d5,emits:d5,methods:p0,computed:p0,beforeCreate:as,created:as,beforeMount:as,mounted:as,beforeUpdate:as,updated:as,beforeDestroy:as,beforeUnmount:as,destroyed:as,unmounted:as,activated:as,deactivated:as,errorCaptured:as,serverPrefetch:as,components:p0,directives:p0,watch:XG,provide:l5,inject:JG};function l5(t,e){return e?t?function(){return Wn(Pt(t)?t.call(this,this):t,Pt(e)?e.call(this,this):e)}:e:t}function JG(t,e){return p0(ID(t),ID(e))}function ID(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function as(t,e){return t?[...new Set([].concat(t,e))]:e}function p0(t,e){return t?Wn(Object.create(null),t,e):e}function d5(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:Wn(Object.create(null),u5(t),u5(e??{})):e}function XG(t,e){if(!t)return e;if(!e)return t;const r=Wn(Object.create(null),t);for(const n in e)r[n]=as(t[n],e[n]);return r}function l4(){return{app:null,config:{isNativeTag:kW,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ZG=0;function YG(t,e){return function(n,s=null){Pt(n)||(n=Wn({},n)),s!=null&&!Mr(s)&&(s=null);const i=l4(),o=new WeakSet,a=[];let u=!1;const l=i.app={_uid:ZG++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:j4,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&Pt(c.install)?(o.add(c),c.install(l,...d)):Pt(c)&&(o.add(c),c(l,...d))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,d){return d?(i.components[c]=d,l):i.components[c]},directive(c,d){return d?(i.directives[c]=d,l):i.directives[c]},mount(c,d,h){if(!u){const f=l._ceVNode||wn(n,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(f,c):t(f,c,h),u=!0,l._container=c,c.__vue_app__=l,CA(f.component)}},onUnmount(c){a.push(c)},unmount(){u&&(Ua(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(c,d){return i.provides[c]=d,l},runWithContext(c){const d=Vh;Vh=l;try{return c()}finally{Vh=d}}};return l}}let Vh=null;function qh(t,e){if(qn){let r=qn.provides;const n=qn.parent&&qn.parent.provides;n===r&&(r=qn.provides=Object.create(n)),r[t]=e}}function Ks(t,e,r=!1){const n=qn||ys;if(n||Vh){const s=Vh?Vh._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Pt(e)?e.call(n&&n.proxy):e}}function d4(){return!!(qn||ys||Vh)}const f4={},h4=()=>Object.create(f4),p4=t=>Object.getPrototypeOf(t)===f4;function QG(t,e,r,n=!1){const s={},i=h4();t.propsDefaults=Object.create(null),m4(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);r?t.props=n?s:Jc(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function eJ(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=hr(s),[u]=t.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(xA(t.emitsOptions,h))continue;const f=e[h];if(u)if(Dr(i,h))f!==i[h]&&(i[h]=f,l=!0);else{const p=ja(h);s[p]=kD(u,a,p,f,t,!1)}else f!==i[h]&&(i[h]=f,l=!0)}}}else{m4(t,e,s,i)&&(l=!0);let c;for(const d in a)(!e||!Dr(e,d)&&((c=Dp(d))===d||!Dr(e,c)))&&(u?r&&(r[d]!==void 0||r[c]!==void 0)&&(s[d]=kD(u,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Dr(e,d))&&(delete i[d],l=!0)}l&&el(t.attrs,"set","")}function m4(t,e,r,n){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(Nm(u))continue;const l=e[u];let c;s&&Dr(s,c=ja(u))?!i||!i.includes(c)?r[c]=l:(a||(a={}))[c]=l:xA(t.emitsOptions,u)||(!(u in n)||l!==n[u])&&(n[u]=l,o=!0)}if(i){const u=hr(r),l=a||qr;for(let c=0;c<i.length;c++){const d=i[c];r[d]=kD(s,u,d,l[d],t,!Dr(l,d))}}return o}function kD(t,e,r,n,s,i){const o=t[r];if(o!=null){const a=Dr(o,"default");if(a&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Pt(u)){const{propsDefaults:l}=s;if(r in l)n=l[r];else{const c=ww(s);n=l[r]=u.call(null,e),c()}}else n=u;s.ce&&s.ce._setProp(r,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Dp(r))&&(n=!0))}return n}const tJ=new WeakMap;function y4(t,e,r=!1){const n=r?tJ:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!Pt(t)){const c=d=>{u=!0;const[h,f]=y4(d,e,!0);Wn(o,h),f&&a.push(...f)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!u)return Mr(t)&&n.set(t,Om),Om;if(dt(i))for(let c=0;c<i.length;c++){const d=ja(i[c]);f5(d)&&(o[d]=qr)}else if(i)for(const c in i){const d=ja(c);if(f5(d)){const h=i[c],f=o[d]=dt(h)||Pt(h)?{type:h}:Wn({},h),p=f.type;let m=!1,E=!0;if(dt(p))for(let A=0;A<p.length;++A){const _=p[A],g=Pt(_)&&_.name;if(g==="Boolean"){m=!0;break}else g==="String"&&(E=!1)}else m=Pt(p)&&p.name==="Boolean";f[0]=m,f[1]=E,(m||Dr(f,"default"))&&a.push(d)}}const l=[o,a];return Mr(t)&&n.set(t,l),l}function f5(t){return t[0]!=="$"&&!Nm(t)}const g4=t=>t[0]==="_"||t==="$stable",vC=t=>dt(t)?t.map(oo):[oo(t)],rJ=(t,e,r)=>{if(e._n)return e;const n=W3((...s)=>vC(e(...s)),r);return n._c=!1,n},v4=(t,e,r)=>{const n=t._ctx;for(const s in t){if(g4(s))continue;const i=t[s];if(Pt(i))e[s]=rJ(s,i,n);else if(i!=null){const o=vC(i);e[s]=()=>o}}},w4=(t,e)=>{const r=vC(e);t.slots.default=()=>r},_4=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},nJ=(t,e,r)=>{const n=t.slots=h4();if(t.vnode.shapeFlag&32){const s=e._;s?(_4(n,e,r),r&&w3(n,"_",s,!0)):v4(e,n)}else e&&w4(t,e)},iJ=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,o=qr;if(n.shapeFlag&32){const a=e._;a?r&&a===1?i=!1:_4(s,e,r):(i=!e.$stable,v4(e,s)),o=e}else e&&(w4(t,e),o={default:1});if(i)for(const a in s)!g4(a)&&o[a]==null&&delete s[a]},xi=C4;function sJ(t){return b4(t)}function oJ(t){return b4(t,OG)}function b4(t,e){const r=b3();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:l,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=Iu,insertStaticContent:p}=t,m=(M,V,oe,j=null,I=null,N=null,Q=void 0,ce=null,pe=!!V.dynamicChildren)=>{if(M===V)return;M&&!Da(M,V)&&(j=ne(M),te(M,I,N,!0),M=null),V.patchFlag===-2&&(pe=!1,V.dynamicChildren=null);const{type:he,ref:Ce,shapeFlag:_e}=V;switch(he){case Hh:E(M,V,oe,j);break;case si:A(M,V,oe,j);break;case K0:M==null&&_(V,oe,j,Q);break;case so:C(M,V,oe,j,I,N,Q,ce,pe);break;default:_e&1?S(M,V,oe,j,I,N,Q,ce,pe):_e&6?k(M,V,oe,j,I,N,Q,ce,pe):(_e&64||_e&128)&&he.process(M,V,oe,j,I,N,Q,ce,pe,ve)}Ce!=null&&I&&Q1(Ce,M&&M.ref,N,V||M,!V)},E=(M,V,oe,j)=>{if(M==null)n(V.el=a(V.children),oe,j);else{const I=V.el=M.el;V.children!==M.children&&l(I,V.children)}},A=(M,V,oe,j)=>{M==null?n(V.el=u(V.children||""),oe,j):V.el=M.el},_=(M,V,oe,j)=>{[M.el,M.anchor]=p(M.children,V,oe,j,M.el,M.anchor)},g=({el:M,anchor:V},oe,j)=>{let I;for(;M&&M!==V;)I=h(M),n(M,oe,j),M=I;n(V,oe,j)},v=({el:M,anchor:V})=>{let oe;for(;M&&M!==V;)oe=h(M),s(M),M=oe;s(V)},S=(M,V,oe,j,I,N,Q,ce,pe)=>{V.type==="svg"?Q="svg":V.type==="math"&&(Q="mathml"),M==null?x(V,oe,j,I,N,Q,ce,pe):b(M,V,I,N,Q,ce,pe)},x=(M,V,oe,j,I,N,Q,ce)=>{let pe,he;const{props:Ce,shapeFlag:_e,transition:G,dirs:J}=M;if(pe=M.el=o(M.type,N,Ce&&Ce.is,Ce),_e&8?c(pe,M.children):_e&16&&w(M.children,pe,null,j,I,i2(M,N),Q,ce),J&&hu(M,null,j,"created"),D(pe,M,M.scopeId,Q,j),Ce){for(const be in Ce)be!=="value"&&!Nm(be)&&i(pe,be,null,Ce[be],N,j);"value"in Ce&&i(pe,"value",null,Ce.value,N),(he=Ce.onVnodeBeforeMount)&&$s(he,j,M)}J&&hu(M,null,j,"beforeMount");const ge=E4(I,G);ge&&G.beforeEnter(pe),n(pe,V,oe),((he=Ce&&Ce.onVnodeMounted)||ge||J)&&xi(()=>{he&&$s(he,j,M),ge&&G.enter(pe),J&&hu(M,null,j,"mounted")},I)},D=(M,V,oe,j,I)=>{if(oe&&f(M,oe),j)for(let N=0;N<j.length;N++)f(M,j[N]);if(I){let N=I.subTree;if(V===N||rE(N.type)&&(N.ssContent===V||N.ssFallback===V)){const Q=I.vnode;D(M,Q,Q.scopeId,Q.slotScopeIds,I.parent)}}},w=(M,V,oe,j,I,N,Q,ce,pe=0)=>{for(let he=pe;he<M.length;he++){const Ce=M[he]=ce?Sd(M[he]):oo(M[he]);m(null,Ce,V,oe,j,I,N,Q,ce)}},b=(M,V,oe,j,I,N,Q)=>{const ce=V.el=M.el;let{patchFlag:pe,dynamicChildren:he,dirs:Ce}=V;pe|=M.patchFlag&16;const _e=M.props||qr,G=V.props||qr;let J;if(oe&&Bf(oe,!1),(J=G.onVnodeBeforeUpdate)&&$s(J,oe,V,M),Ce&&hu(V,M,oe,"beforeUpdate"),oe&&Bf(oe,!0),(_e.innerHTML&&G.innerHTML==null||_e.textContent&&G.textContent==null)&&c(ce,""),he?T(M.dynamicChildren,he,ce,oe,j,i2(V,I),N):Q||X(M,V,ce,null,oe,j,i2(V,I),N,!1),pe>0){if(pe&16)P(ce,_e,G,oe,I);else if(pe&2&&_e.class!==G.class&&i(ce,"class",null,G.class,I),pe&4&&i(ce,"style",_e.style,G.style,I),pe&8){const ge=V.dynamicProps;for(let be=0;be<ge.length;be++){const ke=ge[be],At=_e[ke],kt=G[ke];(kt!==At||ke==="value")&&i(ce,ke,At,kt,I,oe)}}pe&1&&M.children!==V.children&&c(ce,V.children)}else!Q&&he==null&&P(ce,_e,G,oe,I);((J=G.onVnodeUpdated)||Ce)&&xi(()=>{J&&$s(J,oe,V,M),Ce&&hu(V,M,oe,"updated")},j)},T=(M,V,oe,j,I,N,Q)=>{for(let ce=0;ce<V.length;ce++){const pe=M[ce],he=V[ce],Ce=pe.el&&(pe.type===so||!Da(pe,he)||pe.shapeFlag&70)?d(pe.el):oe;m(pe,he,Ce,null,j,I,N,Q,!0)}},P=(M,V,oe,j,I)=>{if(V!==oe){if(V!==qr)for(const N in V)!Nm(N)&&!(N in oe)&&i(M,N,V[N],null,I,j);for(const N in oe){if(Nm(N))continue;const Q=oe[N],ce=V[N];Q!==ce&&N!=="value"&&i(M,N,ce,Q,I,j)}"value"in oe&&i(M,"value",V.value,oe.value,I)}},C=(M,V,oe,j,I,N,Q,ce,pe)=>{const he=V.el=M?M.el:a(""),Ce=V.anchor=M?M.anchor:a("");let{patchFlag:_e,dynamicChildren:G,slotScopeIds:J}=V;J&&(ce=ce?ce.concat(J):J),M==null?(n(he,oe,j),n(Ce,oe,j),w(V.children||[],oe,Ce,I,N,Q,ce,pe)):_e>0&&_e&64&&G&&M.dynamicChildren?(T(M.dynamicChildren,G,oe,I,N,Q,ce),(V.key!=null||I&&V===I.subTree)&&A4(M,V,!0)):X(M,V,oe,Ce,I,N,Q,ce,pe)},k=(M,V,oe,j,I,N,Q,ce,pe)=>{V.slotScopeIds=ce,M==null?V.shapeFlag&512?I.ctx.activate(V,oe,j,Q,pe):K(V,oe,j,I,N,Q,pe):L(M,V,pe)},K=(M,V,oe,j,I,N,Q)=>{const ce=M.component=PJ(M,j,I);if(vw(M)&&(ce.ctx.renderer=ve),CJ(ce,!1,Q),ce.asyncDep){if(I&&I.registerDep(ce,q,Q),!M.el){const pe=ce.subTree=wn(si);A(null,pe,V,oe)}}else q(ce,M,V,oe,I,N,Q)},L=(M,V,oe)=>{const j=V.component=M.component;if(gJ(M,V,oe))if(j.asyncDep&&!j.asyncResolved){se(j,V,oe);return}else j.next=V,j.update();else V.el=M.el,j.vnode=V},q=(M,V,oe,j,I,N,Q)=>{const ce=()=>{if(M.isMounted){let{next:_e,bu:G,u:J,parent:ge,vnode:be}=M;{const Wt=S4(M);if(Wt){_e&&(_e.el=be.el,se(M,_e,Q)),Wt.asyncDep.then(()=>{M.isUnmounted||ce()});return}}let ke=_e,At;Bf(M,!1),_e?(_e.el=be.el,se(M,_e,Q)):_e=be,G&&Bm(G),(At=_e.props&&_e.props.onVnodeBeforeUpdate)&&$s(At,ge,_e,be),Bf(M,!0);const kt=s2(M),$r=M.subTree;M.subTree=kt,m($r,kt,d($r.el),ne($r),M,I,N),_e.el=kt.el,ke===null&&_C(M,kt.el),J&&xi(J,I),(At=_e.props&&_e.props.onVnodeUpdated)&&xi(()=>$s(At,ge,_e,be),I)}else{let _e;const{el:G,props:J}=V,{bm:ge,m:be,parent:ke,root:At,type:kt}=M,$r=Kh(V);if(Bf(M,!1),ge&&Bm(ge),!$r&&(_e=J&&J.onVnodeBeforeMount)&&$s(_e,ke,V),Bf(M,!0),G&&Ue){const Wt=()=>{M.subTree=s2(M),Ue(G,M.subTree,M,I,null)};$r&&kt.__asyncHydrate?kt.__asyncHydrate(G,M,Wt):Wt()}else{At.ce&&At.ce._injectChildStyle(kt);const Wt=M.subTree=s2(M);m(null,Wt,oe,j,M,I,N),V.el=Wt.el}if(be&&xi(be,I),!$r&&(_e=J&&J.onVnodeMounted)){const Wt=V;xi(()=>$s(_e,ke,Wt),I)}(V.shapeFlag&256||ke&&Kh(ke.vnode)&&ke.vnode.shapeFlag&256)&&M.a&&xi(M.a,I),M.isMounted=!0,V=oe=j=null}};M.scope.on();const pe=M.effect=new x3(ce);M.scope.off();const he=M.update=pe.run.bind(pe),Ce=M.job=pe.runIfDirty.bind(pe);Ce.i=M,Ce.id=M.uid,pe.scheduler=()=>AA(Ce),Bf(M,!0),he()},se=(M,V,oe)=>{V.component=M;const j=M.vnode.props;M.vnode=V,M.next=null,eJ(M,V.props,j,oe),iJ(M,V.children,oe),wf(),r5(M),_f()},X=(M,V,oe,j,I,N,Q,ce,pe=!1)=>{const he=M&&M.children,Ce=M?M.shapeFlag:0,_e=V.children,{patchFlag:G,shapeFlag:J}=V;if(G>0){if(G&128){W(he,_e,oe,j,I,N,Q,ce,pe);return}else if(G&256){re(he,_e,oe,j,I,N,Q,ce,pe);return}}J&8?(Ce&16&&ee(he,I,N),_e!==he&&c(oe,_e)):Ce&16?J&16?W(he,_e,oe,j,I,N,Q,ce,pe):ee(he,I,N,!0):(Ce&8&&c(oe,""),J&16&&w(_e,oe,j,I,N,Q,ce,pe))},re=(M,V,oe,j,I,N,Q,ce,pe)=>{M=M||Om,V=V||Om;const he=M.length,Ce=V.length,_e=Math.min(he,Ce);let G;for(G=0;G<_e;G++){const J=V[G]=pe?Sd(V[G]):oo(V[G]);m(M[G],J,oe,null,I,N,Q,ce,pe)}he>Ce?ee(M,I,N,!0,!1,_e):w(V,oe,j,I,N,Q,ce,pe,_e)},W=(M,V,oe,j,I,N,Q,ce,pe)=>{let he=0;const Ce=V.length;let _e=M.length-1,G=Ce-1;for(;he<=_e&&he<=G;){const J=M[he],ge=V[he]=pe?Sd(V[he]):oo(V[he]);if(Da(J,ge))m(J,ge,oe,null,I,N,Q,ce,pe);else break;he++}for(;he<=_e&&he<=G;){const J=M[_e],ge=V[G]=pe?Sd(V[G]):oo(V[G]);if(Da(J,ge))m(J,ge,oe,null,I,N,Q,ce,pe);else break;_e--,G--}if(he>_e){if(he<=G){const J=G+1,ge=J<Ce?V[J].el:j;for(;he<=G;)m(null,V[he]=pe?Sd(V[he]):oo(V[he]),oe,ge,I,N,Q,ce,pe),he++}}else if(he>G)for(;he<=_e;)te(M[he],I,N,!0),he++;else{const J=he,ge=he,be=new Map;for(he=ge;he<=G;he++){const un=V[he]=pe?Sd(V[he]):oo(V[he]);un.key!=null&&be.set(un.key,he)}let ke,At=0;const kt=G-ge+1;let $r=!1,Wt=0;const cr=new Array(kt);for(he=0;he<kt;he++)cr[he]=0;for(he=J;he<=_e;he++){const un=M[he];if(At>=kt){te(un,I,N,!0);continue}let Ct;if(un.key!=null)Ct=be.get(un.key);else for(ke=ge;ke<=G;ke++)if(cr[ke-ge]===0&&Da(un,V[ke])){Ct=ke;break}Ct===void 0?te(un,I,N,!0):(cr[Ct-ge]=he+1,Ct>=Wt?Wt=Ct:$r=!0,m(un,V[Ct],oe,null,I,N,Q,ce,pe),At++)}const qs=$r?aJ(cr):Om;for(ke=qs.length-1,he=kt-1;he>=0;he--){const un=ge+he,Ct=V[un],Wr=un+1<Ce?V[un+1].el:j;cr[he]===0?m(null,Ct,oe,Wr,I,N,Q,ce,pe):$r&&(ke<0||he!==qs[ke]?B(Ct,oe,Wr,2):ke--)}}},B=(M,V,oe,j,I=null)=>{const{el:N,type:Q,transition:ce,children:pe,shapeFlag:he}=M;if(he&6){B(M.component.subTree,V,oe,j);return}if(he&128){M.suspense.move(V,oe,j);return}if(he&64){Q.move(M,V,oe,ve);return}if(Q===so){n(N,V,oe);for(let _e=0;_e<pe.length;_e++)B(pe[_e],V,oe,j);n(M.anchor,V,oe);return}if(Q===K0){g(M,V,oe);return}if(j!==2&&he&1&&ce)if(j===0)ce.beforeEnter(N),n(N,V,oe),xi(()=>ce.enter(N),I);else{const{leave:_e,delayLeave:G,afterLeave:J}=ce,ge=()=>n(N,V,oe),be=()=>{_e(N,()=>{ge(),J&&J()})};G?G(N,ge,be):be()}else n(N,V,oe)},te=(M,V,oe,j=!1,I=!1)=>{const{type:N,props:Q,ref:ce,children:pe,dynamicChildren:he,shapeFlag:Ce,patchFlag:_e,dirs:G,cacheIndex:J}=M;if(_e===-2&&(I=!1),ce!=null&&Q1(ce,null,oe,M,!0),J!=null&&(V.renderCache[J]=void 0),Ce&256){V.ctx.deactivate(M);return}const ge=Ce&1&&G,be=!Kh(M);let ke;if(be&&(ke=Q&&Q.onVnodeBeforeUnmount)&&$s(ke,V,M),Ce&6)F(M.component,oe,j);else{if(Ce&128){M.suspense.unmount(oe,j);return}ge&&hu(M,null,V,"beforeUnmount"),Ce&64?M.type.remove(M,V,oe,ve,j):he&&!he.hasOnce&&(N!==so||_e>0&&_e&64)?ee(he,V,oe,!1,!0):(N===so&&_e&384||!I&&Ce&16)&&ee(pe,V,oe),j&&z(M)}(be&&(ke=Q&&Q.onVnodeUnmounted)||ge)&&xi(()=>{ke&&$s(ke,V,M),ge&&hu(M,null,V,"unmounted")},oe)},z=M=>{const{type:V,el:oe,anchor:j,transition:I}=M;if(V===so){$(oe,j);return}if(V===K0){v(M);return}const N=()=>{s(oe),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(M.shapeFlag&1&&I&&!I.persisted){const{leave:Q,delayLeave:ce}=I,pe=()=>Q(oe,N);ce?ce(M.el,N,pe):pe()}else N()},$=(M,V)=>{let oe;for(;M!==V;)oe=h(M),s(M),M=oe;s(V)},F=(M,V,oe)=>{const{bum:j,scope:I,job:N,subTree:Q,um:ce,m:pe,a:he}=M;tE(pe),tE(he),j&&Bm(j),I.stop(),N&&(N.flags|=8,te(Q,M,V,oe)),ce&&xi(ce,V),xi(()=>{M.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},ee=(M,V,oe,j=!1,I=!1,N=0)=>{for(let Q=N;Q<M.length;Q++)te(M[Q],V,oe,j,I)},ne=M=>{if(M.shapeFlag&6)return ne(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const V=h(M.anchor||M.el),oe=V&&V[xG];return oe?h(oe):V};let le=!1;const me=(M,V,oe)=>{M==null?V._vnode&&te(V._vnode,null,null,!0):m(V._vnode||null,M,V,null,null,null,oe),V._vnode=M,le||(le=!0,r5(),Z1(),le=!1)},ve={p:m,um:te,m:B,r:z,mt:K,mc:w,pc:X,pbc:T,n:ne,o:t};let Pe,Ue;return e&&([Pe,Ue]=e(ve)),{render:me,hydrate:Pe,createApp:YG(me,Pe)}}function i2({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Bf({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function E4(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function A4(t,e,r=!1){const n=t.children,s=e.children;if(dt(n)&&dt(s))for(let i=0;i<n.length;i++){const o=n[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Sd(s[i]),a.el=o.el),!r&&a.patchFlag!==-2&&A4(o,a)),a.type===Hh&&(a.el=o.el)}}function aJ(t){const e=t.slice(),r=[0];let n,s,i,o,a;const u=t.length;for(n=0;n<u;n++){const l=t[n];if(l!==0){if(s=r[r.length-1],t[s]<l){e[n]=s,r.push(n);continue}for(i=0,o=r.length-1;i<o;)a=i+o>>1,t[r[a]]<l?i=a+1:o=a;l<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function S4(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:S4(e)}function tE(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const uJ=Symbol.for("v-scx"),cJ=()=>Ks(uJ);function lJ(t,e){return wC(t,null,e)}function zd(t,e,r){return wC(t,e,r)}function wC(t,e,r=qr){const{immediate:n,deep:s,flush:i,once:o}=r,a=Wn({},r);let u;if(_w)if(i==="sync"){const h=cJ();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!e||n)a.once=!0;else return{stop:Iu,resume:Iu,pause:Iu};const l=qn;a.call=(h,f,p)=>Ua(h,l,f,p);let c=!1;i==="post"?a.scheduler=h=>{xi(h,l&&l.suspense)}:i!=="sync"&&(c=!0,a.scheduler=(h,f)=>{f?h():AA(h)}),a.augmentJob=h=>{e&&(h.flags|=4),c&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const d=SG(t,e,a);return u&&u.push(d),d}function dJ(t,e,r){const n=this.proxy,s=an(t)?t.includes(".")?T4(n,t):()=>n[t]:t.bind(n,n);let i;Pt(e)?i=e:(i=e.handler,r=e);const o=ww(this),a=wC(s,i.bind(n),r);return o(),a}function T4(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const fJ=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ja(e)}Modifiers`]||t[`${Dp(e)}Modifiers`];function hJ(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||qr;let s=r;const i=e.startsWith("update:"),o=i&&fJ(n,e.slice(7));o&&(o.trim&&(s=r.map(c=>an(c)?c.trim():c)),o.number&&(s=r.map(G1)));let a,u=n[a=JS(e)]||n[a=JS(ja(e))];!u&&i&&(u=n[a=JS(Dp(e))]),u&&Ua(u,t,6,s);const l=n[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ua(l,t,6,s)}}function D4(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Pt(t)){const u=l=>{const c=D4(l,e,!0);c&&(a=!0,Wn(o,c))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Mr(t)&&n.set(t,null),null):(dt(i)?i.forEach(u=>o[u]=null):Wn(o,i),Mr(t)&&n.set(t,o),o)}function xA(t,e){return!t||!yw(e)?!1:(e=e.slice(2).replace(/Once$/,""),Dr(t,e[0].toLowerCase()+e.slice(1))||Dr(t,Dp(e))||Dr(t,e))}function s2(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:u,render:l,renderCache:c,props:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=t,E=Y1(t);let A,_;try{if(r.shapeFlag&4){const v=s||n,S=v;A=oo(l.call(S,v,c,d,f,h,p)),_=a}else{const v=e;A=oo(v.length>1?v(d,{attrs:a,slots:o,emit:u}):v(d,null)),_=e.props?a:mJ(a)}}catch(v){V0.length=0,Oy(v,t,1),A=wn(si)}let g=A;if(_&&m!==!1){const v=Object.keys(_),{shapeFlag:S}=g;v.length&&S&7&&(i&&v.some(rC)&&(_=yJ(_,i)),g=ol(g,_,!1,!0))}return r.dirs&&(g=ol(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(r.dirs):r.dirs),r.transition&&Qm(g,r.transition),A=g,Y1(E),A}function pJ(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(Dv(s)){if(s.type!==si||s.children==="v-if"){if(r)return;r=s}}else return}return r}const mJ=t=>{let e;for(const r in t)(r==="class"||r==="style"||yw(r))&&((e||(e={}))[r]=t[r]);return e},yJ=(t,e)=>{const r={};for(const n in t)(!rC(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function gJ(t,e,r){const{props:n,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?h5(n,o,l):!!o;if(u&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(o[h]!==n[h]&&!xA(l,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?h5(n,o,l):!0:!!o;return!1}function h5(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!xA(r,i))return!0}return!1}function _C({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const rE=t=>t.__isSuspense;let $D=0;const vJ={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,o,a,u,l){if(t==null)wJ(e,r,n,s,i,o,a,u,l);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}_J(t,e,r,n,s,o,a,u,l)}},hydrate:bJ,normalize:EJ},x4=vJ;function Tv(t,e){const r=t.props&&t.props[e];Pt(r)&&r()}function wJ(t,e,r,n,s,i,o,a,u){const{p:l,o:{createElement:c}}=u,d=c("div"),h=t.suspense=P4(t,s,n,e,d,r,i,o,a,u);l(null,h.pendingBranch=t.ssContent,d,null,n,h,i,o),h.deps>0?(Tv(t,"onPending"),Tv(t,"onFallback"),l(null,t.ssFallback,e,r,n,null,i,o),Mm(h,t.ssFallback)):h.resolve(!1,!0)}function _J(t,e,r,n,s,i,o,a,{p:u,um:l,o:{createElement:c}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:E,isHydrating:A}=d;if(m)d.pendingBranch=h,Da(h,m)?(u(m,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():E&&(A||(u(p,f,r,n,s,null,i,o,a),Mm(d,f)))):(d.pendingId=$D++,A?(d.isHydrating=!1,d.activeBranch=m):l(m,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),E?(u(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(u(p,f,r,n,s,null,i,o,a),Mm(d,f))):p&&Da(h,p)?(u(p,h,r,n,s,d,i,o,a),d.resolve(!0)):(u(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(p&&Da(h,p))u(p,h,r,n,s,d,i,o,a),Mm(d,h);else if(Tv(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=$D++,u(null,h,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:_,pendingId:g}=d;_>0?setTimeout(()=>{d.pendingId===g&&d.fallback(f)},_):_===0&&d.fallback(f)}}function P4(t,e,r,n,s,i,o,a,u,l,c=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:E}}=l;let A;const _=AJ(t);_&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const g=t.props?_3(t.props.timeout):void 0,v=i,S={vnode:t,parent:e,parentComponent:r,namespace:o,container:n,hiddenContainer:s,deps:0,pendingId:$D++,timeout:typeof g=="number"?g:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(x=!1,D=!1){const{vnode:w,activeBranch:b,pendingBranch:T,pendingId:P,effects:C,parentComponent:k,container:K}=S;let L=!1;S.isHydrating?S.isHydrating=!1:x||(L=b&&T.transition&&T.transition.mode==="out-in",L&&(b.transition.afterLeave=()=>{P===S.pendingId&&(h(T,K,i===v?p(b):i,0),DD(C))}),b&&(m(b.el)===K&&(i=p(b)),f(b,k,S,!0)),L||h(T,K,i,0)),Mm(S,T),S.pendingBranch=null,S.isInFallback=!1;let q=S.parent,se=!1;for(;q;){if(q.pendingBranch){q.effects.push(...C),se=!0;break}q=q.parent}!se&&!L&&DD(C),S.effects=[],_&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!D&&e.resolve()),Tv(w,"onResolve")},fallback(x){if(!S.pendingBranch)return;const{vnode:D,activeBranch:w,parentComponent:b,container:T,namespace:P}=S;Tv(D,"onFallback");const C=p(w),k=()=>{S.isInFallback&&(d(null,x,T,C,b,null,P,a,u),Mm(S,x))},K=x.transition&&x.transition.mode==="out-in";K&&(w.transition.afterLeave=k),S.isInFallback=!0,f(w,b,null,!0),K||k()},move(x,D,w){S.activeBranch&&h(S.activeBranch,x,D,w),S.container=x},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(x,D,w){const b=!!S.pendingBranch;b&&S.deps++;const T=x.vnode.el;x.asyncDep.catch(P=>{Oy(P,x,0)}).then(P=>{if(x.isUnmounted||S.isUnmounted||S.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:C}=x;RD(x,P,!1),T&&(C.el=T);const k=!T&&x.subTree.el;D(x,C,m(T||x.subTree.el),T?null:p(x.subTree),S,o,w),k&&E(k),_C(x,C.el),b&&--S.deps===0&&S.resolve()})},unmount(x,D){S.isUnmounted=!0,S.activeBranch&&f(S.activeBranch,r,x,D),S.pendingBranch&&f(S.pendingBranch,r,x,D)}};return S}function bJ(t,e,r,n,s,i,o,a,u){const l=e.suspense=P4(e,n,r,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),c=u(t,l.pendingBranch=e.ssContent,r,l,i,o);return l.deps===0&&l.resolve(!1,!0),c}function EJ(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=p5(n?r.default:r),t.ssFallback=n?p5(r.fallback):wn(si)}function p5(t){let e;if(Pt(t)){const r=ey&&t._c;r&&(t._d=!1,yu()),t=t(),r&&(t._d=!0,e=Us,I4())}return dt(t)&&(t=pJ(t)),t=oo(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function C4(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):DD(t)}function Mm(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,_C(n,s))}function AJ(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const so=Symbol.for("v-fgt"),Hh=Symbol.for("v-txt"),si=Symbol.for("v-cmt"),K0=Symbol.for("v-stc"),V0=[];let Us=null;function yu(t=!1){V0.push(Us=t?null:[])}function I4(){V0.pop(),Us=V0[V0.length-1]||null}let ey=1;function m5(t){ey+=t,t<0&&Us&&(Us.hasOnce=!0)}function k4(t){return t.dynamicChildren=ey>0?Us||Om:null,I4(),ey>0&&Us&&Us.push(t),t}function $4(t,e,r,n,s,i){return k4(R4(t,e,r,n,s,i,!0))}function bh(t,e,r,n,s){return k4(wn(t,e,r,n,s,!0))}function Dv(t){return t?t.__v_isVNode===!0:!1}function Da(t,e){return t.type===e.type&&t.key===e.key}const O4=({key:t})=>t??null,Jb=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?an(t)||ui(t)||Pt(t)?{i:ys,r:t,k:e,f:!!r}:t:null);function R4(t,e=null,r=null,n=0,s=null,i=t===so?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&O4(e),ref:e&&Jb(e),scopeId:z3,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ys};return a?(bC(u,r),i&128&&t.normalize(u)):r&&(u.shapeFlag|=an(r)?8:16),ey>0&&!o&&Us&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Us.push(u),u}const wn=SJ;function SJ(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===a4)&&(t=si),Dv(t)){const a=ol(t,e,!0);return r&&bC(a,r),ey>0&&!i&&Us&&(a.shapeFlag&6?Us[Us.indexOf(t)]=a:Us.push(a)),a.patchFlag=-2,a}if(OJ(t)&&(t=t.__vccOpts),e){e=N4(e);let{class:a,style:u}=e;a&&!an(a)&&(e.class=_A(a)),Mr(u)&&(hC(u)&&!dt(u)&&(u=Wn({},u)),e.style=wA(u))}const o=an(t)?1:rE(t)?128:G3(t)?64:Mr(t)?4:Pt(t)?2:0;return R4(t,e,r,n,s,o,i,!0)}function N4(t){return t?hC(t)||p4(t)?Wn({},t):t:null}function ol(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:u}=t,l=e?TJ(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&O4(l),ref:e&&e.ref?r&&i?dt(i)?i.concat(Jb(e)):[i,Jb(e)]:Jb(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==so?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ol(t.ssContent),ssFallback:t.ssFallback&&ol(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&Qm(c,u.clone(c)),c}function B4(t=" ",e=0){return wn(Hh,null,t,e)}function BOe(t,e){const r=wn(K0,null,t);return r.staticCount=e,r}function FOe(t="",e=!1){return e?(yu(),bh(si,null,t)):wn(si,null,t)}function oo(t){return t==null||typeof t=="boolean"?wn(si):dt(t)?wn(so,null,t.slice()):typeof t=="object"?Sd(t):wn(Hh,null,String(t))}function Sd(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ol(t)}function bC(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(dt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),bC(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!p4(e)?e._ctx=ys:s===3&&ys&&(ys.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pt(e)?(e={default:e,_ctx:ys},r=32):(e=String(e),n&64?(r=16,e=[B4(e)]):r=8);t.children=e,t.shapeFlag|=r}function TJ(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=_A([e.class,n.class]));else if(s==="style")e.style=wA([e.style,n.style]);else if(yw(s)){const i=e[s],o=n[s];o&&i!==o&&!(dt(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=n[s])}return e}function $s(t,e,r,n=null){Ua(t,e,7,[r,n])}const DJ=l4();let xJ=0;function PJ(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||DJ,i={uid:xJ++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new T3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:y4(n,s),emitsOptions:D4(n,s),emit:null,emitted:null,propsDefaults:qr,inheritAttrs:n.inheritAttrs,ctx:qr,data:qr,props:qr,attrs:qr,slots:qr,refs:qr,setupState:qr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=hJ.bind(null,i),t.ce&&t.ce(i),i}let qn=null;const PA=()=>qn||ys;let nE,OD;{const t=b3(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};nE=e("__VUE_INSTANCE_SETTERS__",r=>qn=r),OD=e("__VUE_SSR_SETTERS__",r=>_w=r)}const ww=t=>{const e=qn;return nE(t),t.scope.on(),()=>{t.scope.off(),nE(e)}},y5=()=>{qn&&qn.scope.off(),nE(null)};function F4(t){return t.vnode.shapeFlag&4}let _w=!1;function CJ(t,e=!1,r=!1){e&&OD(e);const{props:n,children:s}=t.vnode,i=F4(t);QG(t,n,i,e),nJ(t,s,r);const o=i?IJ(t,e):void 0;return e&&OD(!1),o}function IJ(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,HG);const{setup:n}=r;if(n){const s=t.setupContext=n.length>1?$J(t):null,i=ww(t);wf();const o=gw(n,t,0,[t.props,s]);if(_f(),i(),y3(o)){if(Kh(t)||yC(t),o.then(y5,y5),e)return o.then(a=>{RD(t,a,e)}).catch(a=>{Oy(a,t,0)});t.asyncDep=o}else RD(t,o,e)}else M4(t,e)}function RD(t,e,r){Pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Mr(e)&&(t.setupState=K3(e)),M4(t,r)}let g5;function M4(t,e,r){const n=t.type;if(!t.render){if(!e&&g5&&!n.render){const s=n.template||gC(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:u}=n,l=Wn(Wn({isCustomElement:i,delimiters:a},o),u);n.render=g5(s,l)}}t.render=n.render||Iu}{const s=ww(t);wf();try{zG(t)}finally{_f(),s()}}}const kJ={get(t,e){return es(t,"get",""),t[e]}};function $J(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,kJ),slots:t.slots,emit:t.emit,expose:e}}function CA(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(K3(pG(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in L0)return L0[r](t)},has(e,r){return r in e||r in L0}})):t.proxy}function ND(t,e=!0){return Pt(t)?t.displayName||t.name:t.name||e&&t.__name}function OJ(t){return Pt(t)&&"__vccOpts"in t}const xa=(t,e)=>EG(t,e,_w);function Tu(t,e,r){const n=arguments.length;return n===2?Mr(e)&&!dt(e)?Dv(e)?wn(t,null,[e]):wn(t,e):wn(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Dv(r)&&(r=[r]),wn(t,e,r))}const j4="3.5.4";/**
* @vue/runtime-dom v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let BD;const v5=typeof window<"u"&&window.trustedTypes;if(v5)try{BD=v5.createPolicy("vue",{createHTML:t=>t})}catch{}const U4=BD?t=>BD.createHTML(t):t=>t,RJ="http://www.w3.org/2000/svg",NJ="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,w5=Ic&&Ic.createElement("template"),BJ={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ic.createElementNS(RJ,t):e==="mathml"?Ic.createElementNS(NJ,t):r?Ic.createElement(t,{is:r}):Ic.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ic.createTextNode(t),createComment:t=>Ic.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ic.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const o=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{w5.innerHTML=U4(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=w5.content;if(n==="svg"||n==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},kl="transition",dg="animation",xv=Symbol("_vtc"),L4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},FJ=Wn({},J3,L4),MJ=t=>(t.displayName="Transition",t.props=FJ,t),jJ=MJ((t,{slots:e})=>Tu(IG,UJ(t),e)),Ff=(t,e=[])=>{dt(t)?t.forEach(r=>r(...e)):t&&t(...e)},_5=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function UJ(t){const e={};for(const C in t)C in L4||(e[C]=t[C]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:u=i,appearActiveClass:l=o,appearToClass:c=a,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:f=`${r}-leave-to`}=t,p=LJ(s),m=p&&p[0],E=p&&p[1],{onBeforeEnter:A,onEnter:_,onEnterCancelled:g,onLeave:v,onLeaveCancelled:S,onBeforeAppear:x=A,onAppear:D=_,onAppearCancelled:w=g}=e,b=(C,k,K)=>{Mf(C,k?c:a),Mf(C,k?l:o),K&&K()},T=(C,k)=>{C._isLeaving=!1,Mf(C,d),Mf(C,f),Mf(C,h),k&&k()},P=C=>(k,K)=>{const L=C?D:_,q=()=>b(k,C,K);Ff(L,[k,q]),b5(()=>{Mf(k,C?u:i),$l(k,C?c:a),_5(L)||E5(k,n,m,q)})};return Wn(e,{onBeforeEnter(C){Ff(A,[C]),$l(C,i),$l(C,o)},onBeforeAppear(C){Ff(x,[C]),$l(C,u),$l(C,l)},onEnter:P(!1),onAppear:P(!0),onLeave(C,k){C._isLeaving=!0;const K=()=>T(C,k);$l(C,d),$l(C,h),qJ(),b5(()=>{C._isLeaving&&(Mf(C,d),$l(C,f),_5(v)||E5(C,n,E,K))}),Ff(v,[C,K])},onEnterCancelled(C){b(C,!1),Ff(g,[C])},onAppearCancelled(C){b(C,!0),Ff(w,[C])},onLeaveCancelled(C){T(C),Ff(S,[C])}})}function LJ(t){if(t==null)return null;if(Mr(t))return[o2(t.enter),o2(t.leave)];{const e=o2(t);return[e,e]}}function o2(t){return _3(t)}function $l(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[xv]||(t[xv]=new Set)).add(e)}function Mf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[xv];r&&(r.delete(e),r.size||(t[xv]=void 0))}function b5(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let KJ=0;function E5(t,e,r,n){const s=t._endId=++KJ,i=()=>{s===t._endId&&n()};if(r)return setTimeout(i,r);const{type:o,timeout:a,propCount:u}=VJ(t,e);if(!o)return n();const l=o+"end";let c=0;const d=()=>{t.removeEventListener(l,h),i()},h=f=>{f.target===t&&++c>=u&&d()};setTimeout(()=>{c<u&&d()},a+1),t.addEventListener(l,h)}function VJ(t,e){const r=window.getComputedStyle(t),n=p=>(r[p]||"").split(", "),s=n(`${kl}Delay`),i=n(`${kl}Duration`),o=A5(s,i),a=n(`${dg}Delay`),u=n(`${dg}Duration`),l=A5(a,u);let c=null,d=0,h=0;e===kl?o>0&&(c=kl,d=o,h=i.length):e===dg?l>0&&(c=dg,d=l,h=u.length):(d=Math.max(o,l),c=d>0?o>l?kl:dg:null,h=c?c===kl?i.length:u.length:0);const f=c===kl&&/\b(transform|all)(,|$)/.test(n(`${kl}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function A5(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>S5(r)+S5(t[n])))}function S5(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function qJ(){return document.body.offsetHeight}function HJ(t,e,r){const n=t[xv];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const T5=Symbol("_vod"),zJ=Symbol("_vsh"),WJ=Symbol(""),GJ=/(^|;)\s*display\s*:/;function JJ(t,e,r){const n=t.style,s=an(r);let i=!1;if(r&&!s){if(e)if(an(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&Xb(n,a,"")}else for(const o in e)r[o]==null&&Xb(n,o,"");for(const o in r)o==="display"&&(i=!0),Xb(n,o,r[o])}else if(s){if(e!==r){const o=n[WJ];o&&(r+=";"+o),n.cssText=r,i=GJ.test(r)}}else e&&t.removeAttribute("style");T5 in t&&(t[T5]=i?n.display:"",t[zJ]&&(n.display="none"))}const D5=/\s*!important$/;function Xb(t,e,r){if(dt(r))r.forEach(n=>Xb(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=XJ(t,e);D5.test(r)?t.setProperty(Dp(n),r.replace(D5,""),"important"):t[n]=r}}const x5=["Webkit","Moz","ms"],a2={};function XJ(t,e){const r=a2[e];if(r)return r;let n=ja(e);if(n!=="filter"&&n in t)return a2[e]=n;n=vA(n);for(let s=0;s<x5.length;s++){const i=x5[s]+n;if(i in t)return a2[e]=i}return e}const P5="http://www.w3.org/1999/xlink";function C5(t,e,r,n,s,i=VW(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(P5,e.slice(6,e.length)):t.setAttributeNS(P5,e,r):r==null||i&&!E3(r)?t.removeAttribute(e):t.setAttribute(e,i?"":Lu(r)?String(r):r)}function ZJ(t,e,r,n){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?U4(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=r==null?t.type==="checkbox"?"on":"":String(r);(o!==a||!("_value"in t))&&(t.value=a),r==null&&t.removeAttribute(e),t._value=r;return}let i=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=E3(r):r==null&&o==="string"?(r="",i=!0):o==="number"&&(r=0,i=!0)}try{t[e]=r}catch{}i&&t.removeAttribute(e)}function Hc(t,e,r,n){t.addEventListener(e,r,n)}function YJ(t,e,r,n){t.removeEventListener(e,r,n)}const I5=Symbol("_vei");function QJ(t,e,r,n,s=null){const i=t[I5]||(t[I5]={}),o=i[e];if(n&&o)o.value=n;else{const[a,u]=eX(e);if(n){const l=i[e]=nX(n,s);Hc(t,a,l,u)}else o&&(YJ(t,a,o,u),i[e]=void 0)}}const k5=/(?:Once|Passive|Capture)$/;function eX(t){let e;if(k5.test(t)){e={};let n;for(;n=t.match(k5);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Dp(t.slice(2)),e]}let u2=0;const tX=Promise.resolve(),rX=()=>u2||(tX.then(()=>u2=0),u2=Date.now());function nX(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ua(iX(n,r.value),e,5,[n])};return r.value=t,r.attached=rX(),r}function iX(t,e){if(dt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const $5=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,sX=(t,e,r,n,s,i)=>{const o=s==="svg";e==="class"?HJ(t,n,o):e==="style"?JJ(t,r,n):yw(e)?rC(e)||QJ(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):oX(t,e,n,o))?(ZJ(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&C5(t,e,n,o,i,e!=="value")):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),C5(t,e,n,o))};function oX(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&$5(e)&&Pt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return $5(e)&&an(r)?!1:!!(e in t||t._isVueCE&&(/[A-Z]/.test(e)||!an(r)))}const cf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dt(e)?r=>Bm(e,r):e};function aX(t){t.target.composing=!0}function O5(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yo=Symbol("_assign"),R5={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Yo]=cf(s);const i=n||s.props&&s.props.type==="number";Hc(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;r&&(a=a.trim()),i&&(a=G1(a)),t[Yo](a)}),r&&Hc(t,"change",()=>{t.value=t.value.trim()}),e||(Hc(t,"compositionstart",aX),Hc(t,"compositionend",O5),Hc(t,"change",O5))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},o){if(t[Yo]=cf(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?G1(t.value):t.value,u=e??"";a!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===u)||(t.value=u))}},uX={deep:!0,created(t,e,r){t[Yo]=cf(r),Hc(t,"change",()=>{const n=t._modelValue,s=ty(t),i=t.checked,o=t[Yo];if(dt(n)){const a=sC(n,s),u=a!==-1;if(i&&!u)o(n.concat(s));else if(!i&&u){const l=[...n];l.splice(a,1),o(l)}}else if(ky(n)){const a=new Set(n);i?a.add(s):a.delete(s),o(a)}else o(K4(t,i))})},mounted:N5,beforeUpdate(t,e,r){t[Yo]=cf(r),N5(t,e,r)}};function N5(t,{value:e,oldValue:r},n){t._modelValue=e;let s;dt(e)?s=sC(e,n.props.value)>-1:ky(e)?s=e.has(n.props.value):s=op(e,K4(t,!0)),t.checked!==s&&(t.checked=s)}const cX={created(t,{value:e},r){t.checked=op(e,r.props.value),t[Yo]=cf(r),Hc(t,"change",()=>{t[Yo](ty(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Yo]=cf(n),e!==r&&(t.checked=op(e,n.props.value))}},lX={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=ky(e);Hc(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>r?G1(ty(o)):ty(o));t[Yo](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ry(()=>{t._assigning=!1})}),t[Yo]=cf(n)},mounted(t,{value:e,modifiers:{number:r}}){B5(t,e)},beforeUpdate(t,e,r){t[Yo]=cf(r)},updated(t,{value:e,modifiers:{number:r}}){t._assigning||B5(t,e)}};function B5(t,e,r){const n=t.multiple,s=dt(e);if(!(n&&!s&&!ky(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],u=ty(a);if(n)if(s){const l=typeof u;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(u)):a.selected=sC(e,u)>-1}else a.selected=e.has(u);else if(op(ty(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ty(t){return"_value"in t?t._value:t.value}function K4(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const MOe={created(t,e,r){x_(t,e,r,null,"created")},mounted(t,e,r){x_(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){x_(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){x_(t,e,r,n,"updated")}};function dX(t,e){switch(t){case"SELECT":return lX;case"TEXTAREA":return R5;default:switch(e){case"checkbox":return uX;case"radio":return cX;default:return R5}}}function x_(t,e,r,n,s){const o=dX(t.tagName,r.props&&r.props.type)[s];o&&o(t,e,r,n)}const fX=["ctrl","shift","alt","meta"],hX={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>fX.some(r=>t[`${r}Key`]&&!e.includes(r))},jOe=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=hX[e[o]];if(a&&a(s,e))return}return t(s,...i)})},V4=Wn({patchProp:sX},BJ);let q0,F5=!1;function pX(){return q0||(q0=sJ(V4))}function mX(){return q0=F5?q0:oJ(V4),F5=!0,q0}const yX=(...t)=>{const e=pX().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=H4(n);if(!s)return;const i=e._component;!Pt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=r(s,!1,q4(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},gX=(...t)=>{const e=mX().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=H4(n);if(s)return r(s,!0,q4(s))},e};function q4(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function H4(t){return an(t)?document.querySelector(t):t}const vX=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,wX=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_X=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function bX(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){EX(t);return}return e}function EX(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function iE(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!_X.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(vX.test(t)||wX.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,bX)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}const AX=/#/g,SX=/&/g,TX=/\//g,DX=/=/g,EC=/\+/g,xX=/%5e/gi,PX=/%60/gi,CX=/%7c/gi,IX=/%20/gi;function kX(t){return encodeURI(""+t).replace(CX,"|")}function FD(t){return kX(typeof t=="string"?t:JSON.stringify(t)).replace(EC,"%2B").replace(IX,"+").replace(AX,"%23").replace(SX,"%26").replace(PX,"`").replace(xX,"^").replace(TX,"%2F")}function c2(t){return FD(t).replace(DX,"%3D")}function sE(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function $X(t){return sE(t.replace(EC," "))}function OX(t){return sE(t.replace(EC," "))}function RX(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const r of t.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const s=$X(n[1]);if(s==="__proto__"||s==="constructor")continue;const i=OX(n[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function NX(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(r=>`${c2(t)}=${FD(r)}`).join("&"):`${c2(t)}=${FD(e)}`:c2(t)}function BX(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>NX(e,t[e])).filter(Boolean).join("&")}const FX=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,MX=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,jX=/^([/\\]\s*){2,}[^/\\]/,UX=/^[\s\0]*(blob|data|javascript|vbscript):$/i,LX=/\/$|\/\?|\/#/,KX=/^\.?\//;function xp(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?FX.test(t):MX.test(t)||(e.acceptRelative?jX.test(t):!1)}function VX(t){return!!t&&UX.test(t)}function MD(t="",e){return e?LX.test(t):t.endsWith("/")}function AC(t="",e){if(!e)return(MD(t)?t.slice(0,-1):t)||"/";if(!MD(t,!0))return t||"/";let r=t,n="";const s=t.indexOf("#");s>=0&&(r=t.slice(0,s),n=t.slice(s));const[i,...o]=r.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+n}function jD(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(MD(t,!0))return t||"/";let r=t,n="";const s=t.indexOf("#");if(s>=0&&(r=t.slice(0,s),n=t.slice(s),!r))return n;const[i,...o]=r.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+n}function qX(t=""){return t.startsWith("/")}function M5(t=""){return qX(t)?t:"/"+t}function HX(t,e){if(W4(e)||xp(t))return t;const r=AC(e);return t.startsWith(r)?t:SC(r,t)}function j5(t,e){if(W4(e))return t;const r=AC(e);if(!t.startsWith(r))return t;const n=t.slice(r.length);return n[0]==="/"?n:"/"+n}function z4(t,e){const r=GX(t),n={...RX(r.search),...e};return r.search=BX(n),JX(r)}function W4(t){return!t||t==="/"}function zX(t){return t&&t!=="/"}function SC(t,...e){let r=t||"";for(const n of e.filter(s=>zX(s)))if(r){const s=n.replace(KX,"");r=jD(r)+s}else r=n;return r}function G4(...t){var o,a,u,l;const e=/\/(?!\/)/,r=t.filter(Boolean),n=[];let s=0;for(const c of r)if(!(!c||c==="/")){for(const[d,h]of c.split(e).entries())if(!(!h||h===".")){if(h===".."){if(n.length===1&&xp(n[0]))continue;n.pop(),s--;continue}if(d===1&&((o=n[n.length-1])!=null&&o.endsWith(":/"))){n[n.length-1]+="/"+h;continue}n.push(h),s++}}let i=n.join("/");return s>=0?(a=r[0])!=null&&a.startsWith("/")&&!i.startsWith("/")?i="/"+i:(u=r[0])!=null&&u.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,(l=r[r.length-1])!=null&&l.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function WX(t,e,r={}){return r.trailingSlash||(t=jD(t),e=jD(e)),r.leadingSlash||(t=M5(t),e=M5(e)),r.encoding||(t=sE(t),e=sE(e)),t===e}const J4=Symbol.for("ufo:protocolRelative");function GX(t="",e){const r=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,d,h=""]=r;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!xp(t,{acceptRelative:!0}))return U5(t);const[,n="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:u,search:l,hash:c}=U5(a);return{protocol:n.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:u,search:l,hash:c,[J4]:!n}}function U5(t=""){const[e="",r="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:r,hash:n}}function JX(t){const e=t.pathname||"",r=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",n=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[J4]?(t.protocol||"")+"//":"")+s+i+e+r+n}class XX extends Error{constructor(e,r){super(e,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function ZX(t){var u,l,c,d,h;const e=((u=t.error)==null?void 0:u.message)||((l=t.error)==null?void 0:l.toString())||"",r=((c=t.request)==null?void 0:c.method)||((d=t.options)==null?void 0:d.method)||"GET",n=((h=t.request)==null?void 0:h.url)||String(t.request)||"/",s=`[${r}] ${JSON.stringify(n)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new XX(o,t.error?{cause:t.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(a,f,{get(){return t[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,f,{get(){return t.response&&t.response[p]}});return a}const YX=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function L5(t="GET"){return YX.has(t.toUpperCase())}function QX(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const eZ=new Set(["image/svg","application/xml","application/xhtml","application/html"]),tZ=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function rZ(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return tZ.test(e)?"json":eZ.has(e)||e.startsWith("text/")?"text":"blob"}function nZ(t,e,r=globalThis.Headers){const n={...e,...t};if(e!=null&&e.params&&(t!=null&&t.params)&&(n.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&(t!=null&&t.query)&&(n.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&(t!=null&&t.headers)){n.headers=new r((e==null?void 0:e.headers)||{});for(const[s,i]of new r((t==null?void 0:t.headers)||{}))n.headers.set(s,i)}return n}const iZ=new Set([408,409,425,429,500,502,503,504]),sZ=new Set([101,204,205,304]);function X4(t={}){const{fetch:e=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=t;async function s(a){const u=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!u){let c;typeof a.options.retry=="number"?c=a.options.retry:c=L5(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(c>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):iZ.has(d))){const h=a.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),i(a.request,{...a.options,retry:c-1})}}const l=ZX(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(u,l={}){var f;const c={request:u,options:nZ(l,t.defaults,r),response:void 0,error:void 0};c.options.method=(f=c.options.method)==null?void 0:f.toUpperCase(),c.options.onRequest&&await c.options.onRequest(c),typeof c.request=="string"&&(c.options.baseURL&&(c.request=HX(c.request,c.options.baseURL)),(c.options.query||c.options.params)&&(c.request=z4(c.request,{...c.options.params,...c.options.query}))),c.options.body&&L5(c.options.method)&&(QX(c.options.body)?(c.options.body=typeof c.options.body=="string"?c.options.body:JSON.stringify(c.options.body),c.options.headers=new r(c.options.headers||{}),c.options.headers.has("content-type")||c.options.headers.set("content-type","application/json"),c.options.headers.has("accept")||c.options.headers.set("accept","application/json")):("pipeTo"in c.options.body&&typeof c.options.body.pipeTo=="function"||typeof c.options.body.pipe=="function")&&("duplex"in c.options||(c.options.duplex="half")));let d;if(!c.options.signal&&c.options.timeout){const p=new n;d=setTimeout(()=>p.abort(),c.options.timeout),c.options.signal=p.signal}try{c.response=await e(c.request,c.options)}catch(p){return c.error=p,c.options.onRequestError&&await c.options.onRequestError(c),await s(c)}finally{d&&clearTimeout(d)}if(c.response.body&&!sZ.has(c.response.status)&&c.options.method!=="HEAD"){const p=(c.options.parseResponse?"json":c.options.responseType)||rZ(c.response.headers.get("content-type")||"");switch(p){case"json":{const m=await c.response.text(),E=c.options.parseResponse||iE;c.response._data=E(m);break}case"stream":{c.response._data=c.response.body;break}default:c.response._data=await c.response[p]()}}return c.options.onResponse&&await c.options.onResponse(c),!c.options.ignoreResponseError&&c.response.status>=400&&c.response.status<600?(c.options.onResponseError&&await c.options.onResponseError(c),await s(c)):c.response},o=async function(u,l){return(await i(u,l))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={})=>X4({...t,defaults:{...t.defaults,...a}}),o}const TC=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),oZ=TC.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),aZ=TC.Headers,uZ=TC.AbortController,cZ=X4({fetch:oZ,Headers:aZ,AbortController:uZ}),lZ=cZ,dZ=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},oE=dZ().app,fZ=()=>oE.baseURL,hZ=()=>oE.buildAssetsDir,DC=(...t)=>G4(Z4(),hZ(),...t),Z4=(...t)=>{const e=oE.cdnURL||oE.baseURL;return t.length?G4(e,...t):e};globalThis.__buildAssetsURL=DC,globalThis.__publicAssetsURL=Z4;globalThis.$fetch||(globalThis.$fetch=lZ.create({baseURL:fZ()}));function UD(t,e={},r){for(const n in t){const s=t[n],i=r?`${r}:${n}`:n;typeof s=="object"&&s!==null?UD(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const pZ={run:t=>t()},mZ=()=>pZ,Y4=typeof console.createTask<"u"?console.createTask:mZ;function yZ(t,e){const r=e.shift(),n=Y4(r);return t.reduce((s,i)=>s.then(()=>n.run(()=>i(...e))),Promise.resolve())}function gZ(t,e){const r=e.shift(),n=Y4(r);return Promise.all(t.map(s=>n.run(()=>s(...e))))}function l2(t,e){for(const r of[...t])r(e)}class vZ{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,r,n={}){if(!e||typeof r!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!r.name)try{Object.defineProperty(r,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(r),()=>{r&&(this.removeHook(e,r),r=void 0)}}hookOnce(e,r){let n,s=(...i)=>(typeof n=="function"&&n(),n=void 0,s=void 0,r(...i));return n=this.hook(e,s),n}removeHook(e,r){if(this._hooks[e]){const n=this._hooks[e].indexOf(r);n!==-1&&this._hooks[e].splice(n,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,r){this._deprecatedHooks[e]=typeof r=="string"?{to:r}:r;const n=this._hooks[e]||[];delete this._hooks[e];for(const s of n)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const r in e)this.deprecateHook(r,e[r])}addHooks(e){const r=UD(e),n=Object.keys(r).map(s=>this.hook(s,r[s]));return()=>{for(const s of n.splice(0,n.length))s()}}removeHooks(e){const r=UD(e);for(const n in r)this.removeHook(n,r[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...r){return r.unshift(e),this.callHookWith(yZ,e,...r)}callHookParallel(e,...r){return r.unshift(e),this.callHookWith(gZ,e,...r)}callHookWith(e,r,...n){const s=this._before||this._after?{name:r,args:n,context:{}}:void 0;this._before&&l2(this._before,s);const i=e(r in this._hooks?[...this._hooks[r]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&s&&l2(this._after,s)}):(this._after&&s&&l2(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const r=this._before.indexOf(e);r!==-1&&this._before.splice(r,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const r=this._after.indexOf(e);r!==-1&&this._after.splice(r,1)}}}}function Q4(){return new vZ}function wZ(t={}){let e,r=!1;const n=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s&&e===void 0){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||n(o),e=o,r=!0},unset:()=>{e=void 0,r=!1},call:(o,a)=>{n(o),e=o;try{return s?s.run(o,a):a()}finally{r||(e=void 0)}},async callAsync(o,a){e=o;const u=()=>{e=o},l=()=>e===o?u:void 0;LD.add(l);try{const c=s?s.run(o,a):a();return r||(e=void 0),await c}finally{LD.delete(l)}}}}function _Z(t={}){const e={};return{get(r,n={}){return e[r]||(e[r]=wZ({...t,...n})),e[r],e[r]}}}const aE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},K5="__unctx__",bZ=aE[K5]||(aE[K5]=_Z()),EZ=(t,e={})=>bZ.get(t,e),V5="__unctx_async_handlers__",LD=aE[V5]||(aE[V5]=new Set);function jm(t){const e=[];for(const s of LD){const i=s();i&&e.push(i)}const r=()=>{for(const s of e)s()};let n=t();return n&&typeof n=="object"&&"catch"in n&&(n=n.catch(s=>{throw r(),s})),[n,r]}const KD=!1,AZ=!1,UOe={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},SZ=null,TZ="#__nuxt",ej="nuxt-app",q5=36e5;function tj(t=ej){return EZ(t,{asyncContext:!1})}const DZ="__nuxt_plugin";function xZ(t){var s;let e=0;const r={_id:t.id||ej||"nuxt-app",_scope:zW(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.13.1"},get vue(){return r.vueApp.version}},payload:Jc({...((s=t.ssrContext)==null?void 0:s.payload)||{},data:Jc({}),state:vl({}),once:new Set,_errors:Jc({})}),static:{data:{}},runWithContext(i){return r._scope.active&&!D3()?r._scope.run(()=>H5(r,i)):H5(r,i)},isHydrating:!0,deferHydration(){if(!r.isHydrating)return()=>{};e++;let i=!1;return()=>{if(!i&&(i=!0,e--,e===0))return r.isHydrating=!1,r.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Jc({}),_payloadRevivers:{},...t};{const i=window.__NUXT__;if(i)for(const o in i)switch(o){case"data":case"state":case"_errors":Object.assign(r.payload[o],i[o]);break;default:r.payload[o]=i[o]}}r.hooks=Q4(),r.hook=r.hooks.hook,r.callHook=r.hooks.callHook,r.provide=(i,o)=>{const a="$"+i;P_(r,a,o),P_(r.vueApp.config.globalProperties,a,o)},P_(r.vueApp,"$nuxt",r),P_(r.vueApp.config.globalProperties,"$nuxt",r);{window.addEventListener("nuxt.preloadError",o=>{r.callHook("app:chunkError",{error:o.payload})}),window.useNuxtApp=window.useNuxtApp||Rn;const i=r.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});r.hook("app:mounted",i)}const n=r.payload.config;return r.provide("config",n),r}function PZ(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function CZ(t,e){if(typeof e=="function"){const{provide:r}=await t.runWithContext(()=>e(t))||{};if(r&&typeof r=="object")for(const n in r)t.provide(n,r[n])}}async function IZ(t,e){const r=[],n=[],s=[],i=[];let o=0;async function a(u){var c;const l=((c=u.dependsOn)==null?void 0:c.filter(d=>e.some(h=>h._name===d)&&!r.includes(d)))??[];if(l.length>0)n.push([new Set(l),u]);else{const d=CZ(t,u).then(async()=>{u._name&&(r.push(u._name),await Promise.all(n.map(async([h,f])=>{h.has(u._name)&&(h.delete(u._name),h.size===0&&(o++,await a(f)))})))});u.parallel?s.push(d.catch(h=>i.push(h))):await d}}for(const u of e)PZ(t,u);for(const u of e)await a(u);if(await Promise.all(s),o)for(let u=0;u<o;u++)await Promise.all(s);if(i.length)throw i[0]}function _l(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[DZ]:!0,_name:e})}function H5(t,e,r){const n=()=>e();return tj(t._id).set(t),t.vueApp.runWithContext(n)}function kZ(t){var r;let e;return d4()&&(e=(r=PA())==null?void 0:r.appContext.app.$nuxt),e=e||tj(t).tryUse(),e||null}function Rn(t){const e=kZ(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function IA(t){return Rn().$config}function P_(t,e,r){Object.defineProperty(t,e,{get:()=>r})}function $Z(t,e){return{ctx:{table:t},matchAll:r=>nj(r,t)}}function rj(t){const e={};for(const r in t)e[r]=r==="dynamic"?new Map(Object.entries(t[r]).map(([n,s])=>[n,rj(s)])):new Map(Object.entries(t[r]));return e}function OZ(t){return $Z(rj(t))}function nj(t,e,r){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const n=[];for(const[i,o]of z5(e.wildcard))(t===i||t.startsWith(i+"/"))&&n.push(o);for(const[i,o]of z5(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");n.push(...nj(a,o))}const s=e.static.get(t);return s&&n.push(s),n.filter(Boolean)}function z5(t){return[...t.entries()].sort((e,r)=>e[0].length-r[0].length)}function d2(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function VD(t,e,r=".",n){if(!d2(e))return VD(t,{},r,n);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(n&&n(s,i,o,r)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:d2(o)&&d2(s[i])?s[i]=VD(o,s[i],(r?`${r}.`:"")+i.toString(),n):s[i]=o))}return s}function RZ(t){return(...e)=>e.reduce((r,n)=>VD(r,n,"",t),{})}const ij=RZ();function NZ(t,e){try{return e in t}catch{return!1}}var BZ=Object.defineProperty,FZ=(t,e,r)=>e in t?BZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lh=(t,e,r)=>(FZ(t,typeof e!="symbol"?e+"":e,r),r);class qD extends Error{constructor(e,r={}){super(e,r),lh(this,"statusCode",500),lh(this,"fatal",!1),lh(this,"unhandled",!1),lh(this,"statusMessage"),lh(this,"data"),lh(this,"cause"),r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const e={message:this.message,statusCode:zD(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sj(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}lh(qD,"__h3_error__",!0);function HD(t){if(typeof t=="string")return new qD(t);if(MZ(t))return t;const e=new qD(t.message??t.statusMessage??"",{cause:t.cause||t});if(NZ(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=zD(t.statusCode,e.statusCode):t.status&&(e.statusCode=zD(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const r=e.statusMessage;sj(e.statusMessage)!==r&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function MZ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const jZ=/[^\u0009\u0020-\u007E]/g;function sj(t=""){return t.replace(jZ,"")}function zD(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const UZ=Symbol("layout-meta"),kA=Symbol("route"),La=()=>{var t;return(t=Rn())==null?void 0:t.$router},oj=()=>d4()?Ks(kA,Rn()._route):Rn()._route;const LZ=()=>{try{if(Rn()._processingMiddleware)return!0}catch{return!1}return!1},LOe=(t,e)=>{t||(t="/");const r=typeof t=="string"?t:"path"in t?KZ(t):La().resolve(t).href;if(e!=null&&e.open){const{target:u="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d.toLowerCase()}=${h}`).join(", ");return open(r,u,c),Promise.resolve()}const n=xp(r,{acceptRelative:!0}),s=(e==null?void 0:e.external)||n;if(s){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:u}=new URL(r,window.location.href);if(u&&VX(u))throw new Error(`Cannot navigate to a URL with '${u}' protocol.`)}const i=LZ();if(!s&&i)return t;const o=La(),a=Rn();return s?(a._scope.stop(),e!=null&&e.replace?location.replace(r):location.href=r,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?o.replace(t):o.push(t)};function KZ(t){return z4(t.path||"",t.query||{})+(t.hash||"")}const aj="__nuxt_error",$A=()=>wG(Rn().payload,"error"),Dm=t=>{const e=OA(t);try{const r=Rn(),n=$A();r.hooks.callHook("app:error",e),n.value=n.value||e}catch{throw e}return e},VZ=async(t={})=>{const e=Rn(),r=$A();e.callHook("app:error:cleared",t),t.redirect&&await La().replace(t.redirect),r.value=SZ},qZ=t=>!!t&&typeof t=="object"&&aj in t,OA=t=>{const e=HD(t);return Object.defineProperty(e,aj,{value:!0,configurable:!1,writable:!1}),e},HZ=-1,zZ=-2,WZ=-3,GZ=-4,JZ=-5,XZ=-6;function ZZ(t,e){return YZ(JSON.parse(t),e)}function YZ(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const r=t,n=Array(r.length);function s(i,o=!1){if(i===HZ)return;if(i===WZ)return NaN;if(i===GZ)return 1/0;if(i===JZ)return-1/0;if(i===XZ)return-0;if(o)throw new Error("Invalid input");if(i in n)return n[i];const a=r[i];if(!a||typeof a!="object")n[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const u=a[0],l=e==null?void 0:e[u];if(l)return n[i]=l(s(a[1]));switch(u){case"Date":n[i]=new Date(a[1]);break;case"Set":const c=new Set;n[i]=c;for(let f=1;f<a.length;f+=1)c.add(s(a[f]));break;case"Map":const d=new Map;n[i]=d;for(let f=1;f<a.length;f+=2)d.set(s(a[f]),s(a[f+1]));break;case"RegExp":n[i]=new RegExp(a[1],a[2]);break;case"Object":n[i]=Object(a[1]);break;case"BigInt":n[i]=BigInt(a[1]);break;case"null":const h=Object.create(null);n[i]=h;for(let f=1;f<a.length;f+=2)h[a[f]]=s(a[f+1]);break;default:throw new Error(`Unknown type ${u}`)}}else{const u=new Array(a.length);n[i]=u;for(let l=0;l<a.length;l+=1){const c=a[l];c!==zZ&&(u[l]=s(c))}}else{const u={};n[i]=u;for(const l in a){const c=a[l];u[l]=s(c)}}return n[i]}return s(0)}const QZ=new Set(["title","titleTemplate","script","style","noscript"]),Zb=new Set(["base","meta","link","style","script","noscript"]),eY=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),tY=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),uj=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),rY=typeof window<"u";function uE(t){let e=9;for(let r=0;r<t.length;)e=Math.imul(e^t.charCodeAt(r++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function WD(t){if(t._h)return t._h;if(t._d)return uE(t._d);let e=`${t.tag}:${t.textContent||t.innerHTML||""}:`;for(const r in t.props)e+=`${r}:${String(t.props[r])},`;return uE(e)}function nY(t,e){return t instanceof Promise?t.then(e):e(t)}function GD(t,e,r,n){const s=n||lj(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},t==="templateParams"||t==="titleTemplate");if(s instanceof Promise)return s.then(o=>GD(t,e,r,o));const i={tag:t,props:s};for(const o of uj){const a=i.props[o]!==void 0?i.props[o]:r[o];a!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||QZ.has(i.tag))&&(i[o==="children"?"innerHTML":o]=a),delete i.props[o])}return i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(o=>({...i,props:{...i.props,content:o}})):i}function iY(t,e){var n;const r=t==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,s])=>s).map(([s,i])=>t==="style"?`${s}:${i}`:s)),(n=String(Array.isArray(e)?e.join(r):e))==null?void 0:n.split(r).filter(s=>!!s.trim()).join(r)}function cj(t,e,r,n){for(let s=n;s<r.length;s+=1){const i=r[s];if(i==="class"||i==="style"){t[i]=iY(i,t[i]);continue}if(t[i]instanceof Promise)return t[i].then(o=>(t[i]=o,cj(t,e,r,s)));if(!e&&!uj.has(i)){const o=String(t[i]),a=i.startsWith("data-");o==="true"||o===""?t[i]=a?"true":!0:t[i]||(a&&o==="false"?t[i]="false":delete t[i])}}}function lj(t,e=!1){const r=cj(t,e,Object.keys(t),0);return r instanceof Promise?r.then(()=>t):t}const sY=10;function dj(t,e,r){for(let n=r;n<e.length;n+=1){const s=e[n];if(s instanceof Promise)return s.then(i=>(e[n]=i,dj(t,e,n)));Array.isArray(s)?t.push(...s):t.push(s)}}function oY(t){const e=[],r=t.resolvedInput;for(const s in r){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const i=r[s];if(!(i===void 0||!eY.has(s))){if(Array.isArray(i)){for(const o of i)e.push(GD(s,o,t));continue}e.push(GD(s,i,t))}}if(e.length===0)return[];const n=[];return nY(dj(n,e,0),()=>n.map((s,i)=>(s._e=t._i,t.mode&&(s._m=t.mode),s._p=(t._i<<sY)+i,s)))}const W5=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),G5={base:-10,title:10},J5={critical:-80,high:-10,low:20};function cE(t){const e=t.tagPriority;if(typeof e=="number")return e;let r=100;return t.tag==="meta"?t.props["http-equiv"]==="content-security-policy"?r=-30:t.props.charset?r=-20:t.props.name==="viewport"&&(r=-15):t.tag==="link"&&t.props.rel==="preconnect"?r=20:t.tag in G5&&(r=G5[t.tag]),e&&e in J5?r+J5[e]:r}const aY=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],uY=["name","property","http-equiv"];function fj(t){const{props:e,tag:r}=t;if(tY.has(r))return r;if(r==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${r}:id:${e.id}`;for(const n of uY)if(e[n]!==void 0)return`${r}:${n}:${e[n]}`;return!1}const Td="%separator";function cY(t,e){var n;let r;if(e==="s"||e==="pageTitle")r=t.pageTitle;else if(e.includes(".")){const s=e.indexOf(".");r=(n=t[e.substring(0,s)])==null?void 0:n[e.substring(s+1)]}else r=t[e];return r!==void 0?(r||"").replace(/"/g,'\\"'):void 0}const lY=new RegExp(`${Td}(?:\\s*${Td})*`,"g");function C_(t,e,r){if(typeof t!="string"||!t.includes("%"))return t;let n=t;try{n=decodeURI(t)}catch{}const s=n.match(/%\w+(?:\.\w+)?/g);if(!s)return t;const i=t.includes(Td);return t=t.replace(/%\w+(?:\.\w+)?/g,o=>{if(o===Td||!s.includes(o))return o;const a=cY(e,o.slice(1));return a!==void 0?a:o}).trim(),i&&(t.endsWith(Td)&&(t=t.slice(0,-Td.length)),t.startsWith(Td)&&(t=t.slice(Td.length)),t=t.replace(lY,r).trim()),t}function X5(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function hj(t,e={}){const r=e.document||t.resolvedOptions.document;if(!r||!t.dirty)return;const n={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",n),!!n.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{var d;const i=(await t.resolveTags()).map(h=>({tag:h,id:Zb.has(h.tag)?WD(h):h.tag,shouldRender:!0}));let o=t._dom;if(!o){o={elMap:{htmlAttrs:r.documentElement,bodyAttrs:r.body}};const h=new Set;for(const f of["body","head"]){const p=(d=r[f])==null?void 0:d.children;for(const m of p){const E=m.tagName.toLowerCase();if(!Zb.has(E))continue;const A={tag:E,props:await lj(m.getAttributeNames().reduce((S,x)=>({...S,[x]:m.getAttribute(x)}),{})),innerHTML:m.innerHTML},_=fj(A);let g=_,v=1;for(;g&&h.has(g);)g=`${_}:${v++}`;g&&(A._d=g,h.add(g)),o.elMap[m.getAttribute("data-hid")||WD(A)]=m}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function a(h,f,p){const m=`${h}:${f}`;o.sideEffects[m]=p,delete o.pendingSideEffects[m]}function u({id:h,$el:f,tag:p}){const m=p.tag.endsWith("Attrs");if(o.elMap[h]=f,m||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),a(h,"el",()=>{var E;(E=o.elMap[h])==null||E.remove(),delete o.elMap[h]})),p._eventHandlers)for(const E in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,E)&&f.getAttribute(`data-${E}`)!==""&&((p.tag==="bodyAttrs"?r.defaultView:f).addEventListener(E.substring(2),p._eventHandlers[E].bind(f)),f.setAttribute(`data-${E}`,""));for(const E in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,E))continue;const A=p.props[E],_=`attr:${E}`;if(E==="class"){if(!A)continue;for(const g of A.split(" "))m&&a(h,`${_}:${g}`,()=>f.classList.remove(g)),!f.classList.contains(g)&&f.classList.add(g)}else if(E==="style"){if(!A)continue;for(const g of A.split(";")){const v=g.indexOf(":"),S=g.substring(0,v).trim(),x=g.substring(v+1).trim();a(h,`${_}:${S}`,()=>{f.style.removeProperty(S)}),f.style.setProperty(S,x)}}else f.getAttribute(E)!==A&&f.setAttribute(E,A===!0?"":String(A)),m&&a(h,_,()=>f.removeAttribute(E))}}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of i){const{tag:f,shouldRender:p,id:m}=h;if(p){if(f.tag==="title"){r.title=f.textContent;continue}h.$el=h.$el||o.elMap[m],h.$el?u(h):Zb.has(f.tag)&&l.push(h)}}for(const h of l){const f=h.tag.tagPosition||"head";h.$el=r.createElement(h.tag.tag),u(h),c[f]=c[f]||r.createDocumentFragment(),c[f].appendChild(h.$el)}for(const h of i)await t.hooks.callHook("dom:renderTag",h,r,a);c.head&&r.head.appendChild(c.head),c.bodyOpen&&r.body.insertBefore(c.bodyOpen,r.body.firstChild),c.bodyClose&&r.body.appendChild(c.bodyClose);for(const h in o.pendingSideEffects)o.pendingSideEffects[h]();t._dom=o,await t.hooks.callHook("dom:rendered",{renders:i}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function dY(t,e={}){const r=e.delayFn||(n=>setTimeout(n,10));return t._domDebouncedUpdatePromise=t._domDebouncedUpdatePromise||new Promise(n=>r(()=>hj(t,e).then(()=>{delete t._domDebouncedUpdatePromise,n()})))}function fY(t){return e=>{var n,s;const r=((s=(n=e.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return r&&e.push(JSON.parse(r)),{mode:"client",hooks:{"entries:updated":i=>{dY(i,t)}}}}}const hY=new Set(["templateParams","htmlAttrs","bodyAttrs"]),pY={hooks:{"tag:normalise":({tag:t})=>{t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.key&&(t.key=t.props.key,delete t.props.key);const e=fj(t);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete t.key;const r=e||(t.key?`${t.tag}:${t.key}`:!1);r&&(t._d=r)},"tags:resolve":t=>{const e=Object.create(null);for(const n of t.tags){const s=(n.key?`${n.tag}:${n.key}`:n._d)||WD(n),i=e[s];if(i){let a=n==null?void 0:n.tagDuplicateStrategy;if(!a&&hY.has(n.tag)&&(a="merge"),a==="merge"){const u=i.props;u.style&&n.props.style&&(u.style[u.style.length-1]!==";"&&(u.style+=";"),n.props.style=`${u.style} ${n.props.style}`),u.class&&n.props.class?n.props.class=`${u.class} ${n.props.class}`:u.class&&(n.props.class=u.class),e[s].props={...u,...n.props};continue}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);continue}else if(cE(n)>cE(i))continue}if(!(n.innerHTML||n.textContent||Object.keys(n.props).length!==0)&&Zb.has(n.tag)){delete e[s];continue}e[s]=n}const r=[];for(const n in e){const s=e[n],i=s._duped;r.push(s),i&&(delete s._duped,r.push(...i))}t.tags=r,t.tags=t.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},mY=new Set(["script","link","bodyAttrs"]),yY=t=>({hooks:{"tags:resolve":e=>{for(const r of e.tags){if(!mY.has(r.tag))continue;const n=r.props;for(const s in n){if(s[0]!=="o"||s[1]!=="n"||!Object.prototype.hasOwnProperty.call(n,s))continue;const i=n[s];typeof i=="function"&&(t.ssr&&W5.has(s)?n[s]=`this.dataset.${s}fired = true`:delete n[s],r._eventHandlers=r._eventHandlers||{},r._eventHandlers[s]=i)}t.ssr&&r._eventHandlers&&(r.props.src||r.props.href)&&(r.key=r.key||uE(r.props.src||r.props.href))}},"dom:renderTag":({$el:e,tag:r})=>{var s,i;const n=e==null?void 0:e.dataset;if(n)for(const o in n){if(!o.endsWith("fired"))continue;const a=o.slice(0,-5);W5.has(a)&&((i=(s=r._eventHandlers)==null?void 0:s[a])==null||i.call(e,new Event(a.substring(2))))}}}}),gY=new Set(["link","style","script","noscript"]),vY={hooks:{"tag:normalise":({tag:t})=>{t.key&&gY.has(t.tag)&&(t.props["data-hid"]=t._h=uE(t.key))}}},wY={mode:"server",hooks:{"tags:beforeResolve":t=>{const e={};let r=!1;for(const n of t.tags)n._m!=="server"||n.tag!=="titleTemplate"&&n.tag!=="templateParams"&&n.tag!=="title"||(e[n.tag]=n.tag==="title"||n.tag==="titleTemplate"?n.textContent:n.props,r=!0);r&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},_Y={hooks:{"tags:resolve":t=>{var e;for(const r of t.tags)if(typeof r.tagPriority=="string")for(const{prefix:n,offset:s}of aY){if(!r.tagPriority.startsWith(n))continue;const i=r.tagPriority.substring(n.length),o=(e=t.tags.find(a=>a._d===i))==null?void 0:e._p;if(o!==void 0){r._p=o+s;break}}t.tags.sort((r,n)=>{const s=cE(r),i=cE(n);return s<i?-1:s>i?1:r._p-n._p})}}},bY={meta:"content",link:"href",htmlAttrs:"lang"},EY=["innerHTML","textContent"],AY=t=>({hooks:{"tags:resolve":e=>{var o;const{tags:r}=e;let n;for(let a=0;a<r.length;a+=1)r[a].tag==="templateParams"&&(n=e.tags.splice(a,1)[0].props,a-=1);const s=n||{},i=s.separator||"|";delete s.separator,s.pageTitle=C_(s.pageTitle||((o=r.find(a=>a.tag==="title"))==null?void 0:o.textContent)||"",s,i);for(const a of r){if(a.processTemplateParams===!1)continue;const u=bY[a.tag];if(u&&typeof a.props[u]=="string")a.props[u]=C_(a.props[u],s,i);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const l of EY)typeof a[l]=="string"&&(a[l]=C_(a[l],s,i))}t._templateParams=s,t._separator=i},"tags:afterResolve":({tags:e})=>{let r;for(let n=0;n<e.length;n+=1){const s=e[n];s.tag==="title"&&s.processTemplateParams!==!1&&(r=s)}r!=null&&r.textContent&&(r.textContent=C_(r.textContent,t._templateParams,t._separator))}}}),SY={hooks:{"tags:resolve":t=>{const{tags:e}=t;let r,n;for(let s=0;s<e.length;s+=1){const i=e[s];i.tag==="title"?r=i:i.tag==="titleTemplate"&&(n=i)}if(n&&r){const s=X5(n.textContent,r.textContent);s!==null?r.textContent=s||r.textContent:t.tags.splice(t.tags.indexOf(r),1)}else if(n){const s=X5(n.textContent);s!==null&&(n.textContent=s,n.tag="title",n=void 0)}n&&t.tags.splice(t.tags.indexOf(n),1)}}},TY={hooks:{"tags:afterResolve":t=>{for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let pj;function DY(t={}){const e=xY(t);return e.use(fY()),pj=e}function Z5(t,e){return!t||t==="server"&&e||t==="client"&&!e}function xY(t={}){const e=Q4();e.addHooks(t.hooks||{}),t.document=t.document||(rY?document:void 0);const r=!t.document,n=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let s=0,i=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return i},use(u){const l=typeof u=="function"?u(a):u;(!l.key||!o.some(c=>c.key===l.key))&&(o.push(l),Z5(l.mode,r)&&e.addHooks(l.hooks||{}))},push(u,l){l==null||delete l.head;const c={_i:s++,input:u,...l};return Z5(c.mode,r)&&(i.push(c),n()),{dispose(){i=i.filter(d=>d._i!==c._i),n()},patch(d){for(const h of i)h._i===c._i&&(h.input=c.input=d);n()}}},async resolveTags(){const u={tags:[],entries:[...i]};await e.callHook("entries:resolve",u);for(const l of u.entries){const c=l.resolvedInput||l.input;if(l.resolvedInput=await(l.transform?l.transform(c):c),l.resolvedInput)for(const d of await oY(l)){const h={tag:d,entry:l,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",h),u.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",u),await e.callHook("tags:resolve",u),await e.callHook("tags:afterResolve",u),u.tags},ssr:r};return[pY,wY,yY,vY,_Y,AY,SY,TY,...(t==null?void 0:t.plugins)||[]].forEach(u=>a.use(u)),a.hooks.callHook("init",a),a}function PY(){return pj}const CY=j4[0]==="3";function IY(t){return typeof t=="function"?t():on(t)}function lE(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const e=IY(t);if(!t||!e)return e;if(Array.isArray(e))return e.map(r=>lE(r));if(typeof e=="object"){const r={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n==="titleTemplate"||n[0]==="o"&&n[1]==="n"){r[n]=on(e[n]);continue}r[n]=lE(e[n])}return r}return e}const kY={hooks:{"entries:resolve":t=>{for(const e of t.entries)e.resolvedInput=lE(e.input)}}},mj="usehead";function $Y(t){return{install(r){CY&&(r.config.globalProperties.$unhead=t,r.config.globalProperties.$head=t,r.provide(mj,t))}}.install}function OY(t={}){t.domDelayFn=t.domDelayFn||(r=>Ry(()=>setTimeout(()=>r(),0)));const e=DY(t);return e.use(kY),e.install=$Y(e),e}const JD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XD="__unhead_injection_handler__";function RY(t){JD[XD]=t}function NY(){if(XD in JD)return JD[XD]();const t=Ks(mj);return t||PY()}function BY(t,e={}){const r=e.head||NY();if(r)return r.ssr?r.push(t,e):FY(r,t,e)}function FY(t,e,r={}){const n=ku(!1),s=ku({});lJ(()=>{s.value=n.value?{}:lE(e)});const i=t.push(s.value,r);return zd(s,a=>{i.patch(a)}),PA()&&(DA(()=>{i.dispose()}),t4(()=>{n.value=!0}),e4(()=>{n.value=!1})),i}let Yb,Qb;function MY(){return Yb=$fetch(DC(`builds/meta/${IA().app.buildId}.json`),{responseType:"json"}),Yb.then(t=>{Qb=OZ(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Yb}function RA(){return Yb||MY()}async function xC(t){if(await RA(),!Qb)return console.error("[nuxt] Error creating app manifest matcher.",Qb),{};try{return ij({},...Qb.matchAll(t).reverse())}catch(e){return console.error("[nuxt] Error matching route rules.",e),{}}}async function Y5(t,e={}){const r=await UY(t,e),n=Rn(),s=n._payloadCache=n._payloadCache||{};return r in s||(s[r]=gj(t).then(i=>i?yj(r).then(o=>o||(delete s[r],null)):(s[r]=null,null))),s[r]}const jY="_payload.json";async function UY(t,e={}){const r=new URL(t,"http://localhost");if(r.host!=="localhost"||xp(r.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const n=IA(),s=e.hash||(e.fresh?Date.now():n.app.buildId),i=n.app.cdnURL,o=i&&await gj(t)?i:n.app.baseURL;return SC(o,r.pathname,jY+(s?`?${s}`:""))}async function yj(t){const e=fetch(t).then(r=>r.text().then(vj));try{return await e}catch(r){console.warn("[nuxt] Cannot load payload ",t,r)}return null}async function gj(t=oj().path){if(t=AC(t),(await RA()).prerendered.includes(t))return!0;const r=await xC(t);return!!r.prerender&&!r.redirect}let jf=null;async function LY(){var n;if(jf)return jf;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await vj(t.textContent||""),r=t.dataset.src?await yj(t.dataset.src):void 0;return jf={...e,...r,...window.__NUXT__},(n=jf.config)!=null&&n.public&&(jf.config.public=vl(jf.config.public)),jf}async function vj(t){return await ZZ(t,Rn()._payloadRevivers)}function KY(t,e){Rn()._payloadRevivers[t]=e}const Q5={NuxtError:t=>OA(t),EmptyShallowRef:t=>Ev(t==="_"?void 0:t==="0n"?BigInt(0):iE(t)),EmptyRef:t=>ku(t==="_"?void 0:t==="0n"?BigInt(0):iE(t)),ShallowRef:t=>Ev(t),ShallowReactive:t=>Jc(t),Ref:t=>ku(t),Reactive:t=>vl(t)},VY=_l({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,r;for(const n in Q5)KY(n,Q5[n]);Object.assign(t.payload,([e,r]=jm(()=>t.runWithContext(LY)),e=await e,r(),e)),window.__NUXT__=t.payload}}),qY=[],HY=_l({name:"nuxt:head",enforce:"pre",setup(t){const e=OY({plugins:qY});RY(()=>Rn().vueApp._context.provides.usehead),t.vueApp.use(e);{let r=!0;const n=async()=>{r=!1,await hj(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!r}),t.hooks.hook("page:start",()=>{r=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||n()}),t.hooks.hook("app:error",n),t.hooks.hook("app:suspense:resolve",n)}}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const dm=typeof document<"u";function wj(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function zY(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&wj(t.default)}const Cr=Object.assign;function f2(t,e){const r={};for(const n in e){const s=e[n];r[n]=Ka(s)?s.map(t):t(s)}return r}const H0=()=>{},Ka=Array.isArray,_j=/#/g,WY=/&/g,GY=/\//g,JY=/=/g,XY=/\?/g,bj=/\+/g,ZY=/%5B/g,YY=/%5D/g,Ej=/%5E/g,QY=/%60/g,Aj=/%7B/g,eQ=/%7C/g,Sj=/%7D/g,tQ=/%20/g;function PC(t){return encodeURI(""+t).replace(eQ,"|").replace(ZY,"[").replace(YY,"]")}function rQ(t){return PC(t).replace(Aj,"{").replace(Sj,"}").replace(Ej,"^")}function ZD(t){return PC(t).replace(bj,"%2B").replace(tQ,"+").replace(_j,"%23").replace(WY,"%26").replace(QY,"`").replace(Aj,"{").replace(Sj,"}").replace(Ej,"^")}function nQ(t){return ZD(t).replace(JY,"%3D")}function iQ(t){return PC(t).replace(_j,"%23").replace(XY,"%3F")}function sQ(t){return t==null?"":iQ(t).replace(GY,"%2F")}function Pv(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const oQ=/\/$/,aQ=t=>t.replace(oQ,"");function h2(t,e,r="/"){let n,s={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(n=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),s=t(i)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=dQ(n??e,r),{fullPath:n+(i&&"?")+i+o,path:n,query:s,hash:Pv(o)}}function uQ(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function eR(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function cQ(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&ry(e.matched[n],r.matched[s])&&Tj(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function ry(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tj(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!lQ(t[r],e[r]))return!1;return!0}function lQ(t,e){return Ka(t)?tR(t,e):Ka(e)?tR(e,t):t===e}function tR(t,e){return Ka(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function dQ(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const Ea={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Cv;(function(t){t.pop="pop",t.push="push"})(Cv||(Cv={}));var z0;(function(t){t.back="back",t.forward="forward",t.unknown=""})(z0||(z0={}));function fQ(t){if(!t)if(dm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),aQ(t)}const hQ=/^[^#]+#/;function pQ(t,e){return t.replace(hQ,"#")+e}function mQ(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const NA=()=>({left:window.scrollX,top:window.scrollY});function yQ(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=mQ(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function rR(t,e){return(history.state?history.state.position-e:-1)+t}const YD=new Map;function gQ(t,e){YD.set(t,e)}function vQ(t){const e=YD.get(t);return YD.delete(t),e}let wQ=()=>location.protocol+"//"+location.host;function Dj(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,u=s.slice(a);return u[0]!=="/"&&(u="/"+u),eR(u,"")}return eR(r,t)+n+s}function _Q(t,e,r,n){let s=[],i=[],o=null;const a=({state:h})=>{const f=Dj(t,location),p=r.value,m=e.value;let E=0;if(h){if(r.value=f,e.value=h,o&&o===p){o=null;return}E=m?h.position-m.position:0}else n(f);s.forEach(A=>{A(r.value,p,{delta:E,type:Cv.pop,direction:E?E>0?z0.forward:z0.back:z0.unknown})})};function u(){o=r.value}function l(h){s.push(h);const f=()=>{const p=s.indexOf(h);p>-1&&s.splice(p,1)};return i.push(f),f}function c(){const{history:h}=window;h.state&&h.replaceState(Cr({},h.state,{scroll:NA()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:u,listen:l,destroy:d}}function nR(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?NA():null}}function bQ(t){const{history:e,location:r}=window,n={value:Dj(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,l,c){const d=t.indexOf("#"),h=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+u:wQ()+t+u;try{e[c?"replaceState":"pushState"](l,"",h),s.value=l}catch(f){console.error(f),r[c?"replace":"assign"](h)}}function o(u,l){const c=Cr({},e.state,nR(s.value.back,u,s.value.forward,!0),l,{position:s.value.position});i(u,c,!0),n.value=u}function a(u,l){const c=Cr({},s.value,e.state,{forward:u,scroll:NA()});i(c.current,c,!0);const d=Cr({},nR(n.value,u,null),{position:c.position+1},l);i(u,d,!1),n.value=u}return{location:n,state:s,push:a,replace:o}}function xj(t){t=fQ(t);const e=bQ(t),r=_Q(t,e.state,e.location,e.replace);function n(i,o=!0){o||r.pauseListeners(),history.go(i)}const s=Cr({location:"",base:t,go:n,createHref:pQ.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function EQ(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),xj(t)}function AQ(t){return typeof t=="string"||t&&typeof t=="object"}function Pj(t){return typeof t=="string"||typeof t=="symbol"}const Cj=Symbol("");var iR;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(iR||(iR={}));function ny(t,e){return Cr(new Error,{type:t,[Cj]:!0},e)}function ac(t,e){return t instanceof Error&&Cj in t&&(e==null||!!(t.type&e))}const sR="[^/]+?",SQ={sensitive:!1,strict:!1,start:!0,end:!0},TQ=/[.+*?^${}()[\]/\\]/g;function DQ(t,e){const r=Cr({},SQ,e),n=[];let s=r.start?"^":"";const i=[];for(const l of t){const c=l.length?[]:[90];r.strict&&!l.length&&(s+="/");for(let d=0;d<l.length;d++){const h=l[d];let f=40+(r.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(TQ,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:E,regexp:A}=h;i.push({name:p,repeatable:m,optional:E});const _=A||sR;if(_!==sR){f+=10;try{new RegExp(`(${_})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+v.message)}}let g=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(g=E&&l.length<2?`(?:/${g})`:"/"+g),E&&(g+="?"),s+=g,f+=20,E&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}c.push(f)}n.push(c)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&(s+="(?:/|$)");const o=new RegExp(s,r.sensitive?"":"i");function a(l){const c=l.match(o),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",p=i[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function u(l){let c="",d=!1;for(const h of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:E}=f,A=p in l?l[p]:"";if(Ka(A)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Ka(A)?A.join("/"):A;if(!_)if(E)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=_}}return c||"/"}return{re:o,score:n,keys:i,parse:a,stringify:u}}function xQ(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ij(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=xQ(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(oR(n))return 1;if(oR(s))return-1}return s.length-n.length}function oR(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const PQ={type:0,value:""},CQ=/[a-zA-Z0-9_]/;function IQ(t){if(!t)return[[]];if(t==="/")return[[PQ]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${r})/"${l}": ${f}`)}let r=0,n=r;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,u,l="",c="";function d(){l&&(r===0?i.push({type:0,value:l}):r===1||r===2||r===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:u==="/"?(l&&d(),o()):u===":"?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:u==="("?r=2:CQ.test(u)?h():(d(),r=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:r=3:c+=u;break;case 3:d(),r=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,c="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),s}function kQ(t,e,r){const n=DQ(IQ(t.path),r),s=Cr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function $Q(t,e){const r=[],n=new Map;e=lR({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,h,f){const p=!f,m=uR(d);m.aliasOf=f&&f.record;const E=lR(e,d),A=[m];if("alias"in d){const v=typeof d.alias=="string"?[d.alias]:d.alias;for(const S of v)A.push(uR(Cr({},m,{components:f?f.record.components:m.components,path:S,aliasOf:f?f.record:m})))}let _,g;for(const v of A){const{path:S}=v;if(h&&S[0]!=="/"){const x=h.record.path,D=x[x.length-1]==="/"?"":"/";v.path=h.record.path+(S&&D+S)}if(_=kQ(v,h,E),f?f.alias.push(_):(g=g||_,g!==_&&g.alias.push(_),p&&d.name&&!cR(_)&&o(d.name)),kj(_)&&u(_),m.children){const x=m.children;for(let D=0;D<x.length;D++)i(x[D],_,f&&f.children[D])}f=f||_}return g?()=>{o(g)}:H0}function o(d){if(Pj(d)){const h=n.get(d);h&&(n.delete(d),r.splice(r.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=r.indexOf(d);h>-1&&(r.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return r}function u(d){const h=NQ(d,r);r.splice(h,0,d),d.record.name&&!cR(d)&&n.set(d.record.name,d)}function l(d,h){let f,p={},m,E;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw ny(1,{location:d});E=f.record.name,p=Cr(aR(h.params,f.keys.filter(g=>!g.optional).concat(f.parent?f.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),d.params&&aR(d.params,f.keys.map(g=>g.name))),m=f.stringify(p)}else if(d.path!=null)m=d.path,f=r.find(g=>g.re.test(m)),f&&(p=f.parse(m),E=f.record.name);else{if(f=h.name?n.get(h.name):r.find(g=>g.re.test(h.path)),!f)throw ny(1,{location:d,currentLocation:h});E=f.record.name,p=Cr({},h.params,d.params),m=f.stringify(p)}const A=[];let _=f;for(;_;)A.unshift(_.record),_=_.parent;return{name:E,path:m,params:p,matched:A,meta:RQ(A)}}t.forEach(d=>i(d));function c(){r.length=0,n.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function aR(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function uR(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:OQ(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function OQ(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function cR(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function RQ(t){return t.reduce((e,r)=>Cr(e,r.meta),{})}function lR(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function NQ(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;Ij(t,e[i])<0?n=i:r=i+1}const s=BQ(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function BQ(t){let e=t;for(;e=e.parent;)if(kj(e)&&Ij(t,e)===0)return e}function kj({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function FQ(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(bj," "),o=i.indexOf("="),a=Pv(o<0?i:i.slice(0,o)),u=o<0?null:Pv(i.slice(o+1));if(a in e){let l=e[a];Ka(l)||(l=e[a]=[l]),l.push(u)}else e[a]=u}return e}function dR(t){let e="";for(let r in t){const n=t[r];if(r=nQ(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Ka(n)?n.map(i=>i&&ZD(i)):[n&&ZD(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function MQ(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Ka(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const jQ=Symbol(""),fR=Symbol(""),BA=Symbol(""),$j=Symbol(""),QD=Symbol("");function fg(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Dd(t,e,r,n,s,i=o=>o()){const o=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,u)=>{const l=h=>{h===!1?u(ny(4,{from:r,to:e})):h instanceof Error?u(h):AQ(h)?u(ny(2,{from:e,to:h})):(o&&n.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},c=i(()=>t.call(n&&n.instances[s],e,r,l));let d=Promise.resolve(c);t.length<3&&(d=d.then(l)),d.catch(h=>u(h))})}function p2(t,e,r,n,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(wj(u)){const c=(u.__vccOpts||u)[e];c&&i.push(Dd(c,r,n,o,a,s))}else{let l=u();i.push(()=>l.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=zY(c)?c.default:c;o.mods[a]=c,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Dd(f,r,n,o,a,s)()}))}}return i}function hR(t){const e=Ks(BA),r=Ks($j),n=xa(()=>{const u=on(t.to);return e.resolve(u)}),s=xa(()=>{const{matched:u}=n.value,{length:l}=u,c=u[l-1],d=r.matched;if(!c||!d.length)return-1;const h=d.findIndex(ry.bind(null,c));if(h>-1)return h;const f=pR(u[l-2]);return l>1&&pR(c)===f&&d[d.length-1].path!==f?d.findIndex(ry.bind(null,u[l-2])):h}),i=xa(()=>s.value>-1&&VQ(r.params,n.value.params)),o=xa(()=>s.value>-1&&s.value===r.matched.length-1&&Tj(r.params,n.value.params));function a(u={}){return KQ(u)?e[on(t.replace)?"replace":"push"](on(t.to)).catch(H0):Promise.resolve()}return{route:n,href:xa(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}const UQ=Ny({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hR,setup(t,{slots:e}){const r=vl(hR(t)),{options:n}=Ks(BA),s=xa(()=>({[mR(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[mR(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&e.default(r);return t.custom?i:Tu("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),LQ=UQ;function KQ(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function VQ(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Ka(s)||s.length!==n.length||n.some((i,o)=>i!==s[o]))return!1}return!0}function pR(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const mR=(t,e,r)=>t??e??r,qQ=Ny({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Ks(QD),s=xa(()=>t.route||n.value),i=Ks(fR,0),o=xa(()=>{let l=on(i);const{matched:c}=s.value;let d;for(;(d=c[l])&&!d.components;)l++;return l}),a=xa(()=>s.value.matched[o.value]);qh(fR,xa(()=>o.value+1)),qh(jQ,a),qh(QD,s);const u=ku();return zd(()=>[u.value,a.value,t.name],([l,c,d],[h,f,p])=>{c&&(c.instances[d]=l,f&&f!==c&&l&&l===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),l&&c&&(!f||!ry(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=s.value,c=t.name,d=a.value,h=d&&d.components[c];if(!h)return yR(r.default,{Component:h,route:l});const f=d.props[c],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,E=Tu(h,Cr({},p,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(d.instances[c]=null)},ref:u}));return yR(r.default,{Component:E,route:l})||E}}});function yR(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const Oj=qQ;function HQ(t){const e=$Q(t.routes,t),r=t.parseQuery||FQ,n=t.stringifyQuery||dR,s=t.history,i=fg(),o=fg(),a=fg(),u=Ev(Ea);let l=Ea;dm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=f2.bind(null,ne=>""+ne),d=f2.bind(null,sQ),h=f2.bind(null,Pv);function f(ne,le){let me,ve;return Pj(ne)?(me=e.getRecordMatcher(ne),ve=le):ve=ne,e.addRoute(ve,me)}function p(ne){const le=e.getRecordMatcher(ne);le&&e.removeRoute(le)}function m(){return e.getRoutes().map(ne=>ne.record)}function E(ne){return!!e.getRecordMatcher(ne)}function A(ne,le){if(le=Cr({},le||u.value),typeof ne=="string"){const V=h2(r,ne,le.path),oe=e.resolve({path:V.path},le),j=s.createHref(V.fullPath);return Cr(V,oe,{params:h(oe.params),hash:Pv(V.hash),redirectedFrom:void 0,href:j})}let me;if(ne.path!=null)me=Cr({},ne,{path:h2(r,ne.path,le.path).path});else{const V=Cr({},ne.params);for(const oe in V)V[oe]==null&&delete V[oe];me=Cr({},ne,{params:d(V)}),le.params=d(le.params)}const ve=e.resolve(me,le),Pe=ne.hash||"";ve.params=c(h(ve.params));const Ue=uQ(n,Cr({},ne,{hash:rQ(Pe),path:ve.path})),M=s.createHref(Ue);return Cr({fullPath:Ue,hash:Pe,query:n===dR?MQ(ne.query):ne.query||{}},ve,{redirectedFrom:void 0,href:M})}function _(ne){return typeof ne=="string"?h2(r,ne,u.value.path):Cr({},ne)}function g(ne,le){if(l!==ne)return ny(8,{from:le,to:ne})}function v(ne){return D(ne)}function S(ne){return v(Cr(_(ne),{replace:!0}))}function x(ne){const le=ne.matched[ne.matched.length-1];if(le&&le.redirect){const{redirect:me}=le;let ve=typeof me=="function"?me(ne):me;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=_(ve):{path:ve},ve.params={}),Cr({query:ne.query,hash:ne.hash,params:ve.path!=null?{}:ne.params},ve)}}function D(ne,le){const me=l=A(ne),ve=u.value,Pe=ne.state,Ue=ne.force,M=ne.replace===!0,V=x(me);if(V)return D(Cr(_(V),{state:typeof V=="object"?Cr({},Pe,V.state):Pe,force:Ue,replace:M}),le||me);const oe=me;oe.redirectedFrom=le;let j;return!Ue&&cQ(n,ve,me)&&(j=ny(16,{to:oe,from:ve}),B(ve,ve,!0,!1)),(j?Promise.resolve(j):T(oe,ve)).catch(I=>ac(I)?ac(I,2)?I:W(I):X(I,oe,ve)).then(I=>{if(I){if(ac(I,2))return D(Cr({replace:M},_(I.to),{state:typeof I.to=="object"?Cr({},Pe,I.to.state):Pe,force:Ue}),le||oe)}else I=C(oe,ve,!0,M,Pe);return P(oe,ve,I),I})}function w(ne,le){const me=g(ne,le);return me?Promise.reject(me):Promise.resolve()}function b(ne){const le=$.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(ne):ne()}function T(ne,le){let me;const[ve,Pe,Ue]=zQ(ne,le);me=p2(ve.reverse(),"beforeRouteLeave",ne,le);for(const V of ve)V.leaveGuards.forEach(oe=>{me.push(Dd(oe,ne,le))});const M=w.bind(null,ne,le);return me.push(M),ee(me).then(()=>{me=[];for(const V of i.list())me.push(Dd(V,ne,le));return me.push(M),ee(me)}).then(()=>{me=p2(Pe,"beforeRouteUpdate",ne,le);for(const V of Pe)V.updateGuards.forEach(oe=>{me.push(Dd(oe,ne,le))});return me.push(M),ee(me)}).then(()=>{me=[];for(const V of Ue)if(V.beforeEnter)if(Ka(V.beforeEnter))for(const oe of V.beforeEnter)me.push(Dd(oe,ne,le));else me.push(Dd(V.beforeEnter,ne,le));return me.push(M),ee(me)}).then(()=>(ne.matched.forEach(V=>V.enterCallbacks={}),me=p2(Ue,"beforeRouteEnter",ne,le,b),me.push(M),ee(me))).then(()=>{me=[];for(const V of o.list())me.push(Dd(V,ne,le));return me.push(M),ee(me)}).catch(V=>ac(V,8)?V:Promise.reject(V))}function P(ne,le,me){a.list().forEach(ve=>b(()=>ve(ne,le,me)))}function C(ne,le,me,ve,Pe){const Ue=g(ne,le);if(Ue)return Ue;const M=le===Ea,V=dm?history.state:{};me&&(ve||M?s.replace(ne.fullPath,Cr({scroll:M&&V&&V.scroll},Pe)):s.push(ne.fullPath,Pe)),u.value=ne,B(ne,le,me,M),W()}let k;function K(){k||(k=s.listen((ne,le,me)=>{if(!F.listening)return;const ve=A(ne),Pe=x(ve);if(Pe){D(Cr(Pe,{replace:!0}),ve).catch(H0);return}l=ve;const Ue=u.value;dm&&gQ(rR(Ue.fullPath,me.delta),NA()),T(ve,Ue).catch(M=>ac(M,12)?M:ac(M,2)?(D(M.to,ve).then(V=>{ac(V,20)&&!me.delta&&me.type===Cv.pop&&s.go(-1,!1)}).catch(H0),Promise.reject()):(me.delta&&s.go(-me.delta,!1),X(M,ve,Ue))).then(M=>{M=M||C(ve,Ue,!1),M&&(me.delta&&!ac(M,8)?s.go(-me.delta,!1):me.type===Cv.pop&&ac(M,20)&&s.go(-1,!1)),P(ve,Ue,M)}).catch(H0)}))}let L=fg(),q=fg(),se;function X(ne,le,me){W(ne);const ve=q.list();return ve.length?ve.forEach(Pe=>Pe(ne,le,me)):console.error(ne),Promise.reject(ne)}function re(){return se&&u.value!==Ea?Promise.resolve():new Promise((ne,le)=>{L.add([ne,le])})}function W(ne){return se||(se=!ne,K(),L.list().forEach(([le,me])=>ne?me(ne):le()),L.reset()),ne}function B(ne,le,me,ve){const{scrollBehavior:Pe}=t;if(!dm||!Pe)return Promise.resolve();const Ue=!me&&vQ(rR(ne.fullPath,0))||(ve||!me)&&history.state&&history.state.scroll||null;return Ry().then(()=>Pe(ne,le,Ue)).then(M=>M&&yQ(M)).catch(M=>X(M,ne,le))}const te=ne=>s.go(ne);let z;const $=new Set,F={currentRoute:u,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:m,resolve:A,options:t,push:v,replace:S,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:q.add,isReady:re,install(ne){const le=this;ne.component("RouterLink",LQ),ne.component("RouterView",Oj),ne.config.globalProperties.$router=le,Object.defineProperty(ne.config.globalProperties,"$route",{enumerable:!0,get:()=>on(u)}),dm&&!z&&u.value===Ea&&(z=!0,v(s.location).catch(Pe=>{}));const me={};for(const Pe in Ea)Object.defineProperty(me,Pe,{get:()=>u.value[Pe],enumerable:!0});ne.provide(BA,le),ne.provide($j,Jc(me)),ne.provide(QD,u);const ve=ne.unmount;$.add(ne),ne.unmount=function(){$.delete(ne),$.size<1&&(l=Ea,k&&k(),k=null,u.value=Ea,z=!1,se=!1),ve()}}};function ee(ne){return ne.reduce((le,me)=>le.then(()=>b(me)),Promise.resolve())}return F}function zQ(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>ry(l,a))?n.push(a):r.push(a));const u=t.matched[o];u&&(e.matched.find(l=>ry(l,u))||s.push(u))}return[r,n,s]}function WQ(){return Ks(BA)}const GQ=(t,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,r=>{var n;return((n=t.params[r.slice(1)])==null?void 0:n.toString())||""}),ex=(t,e)=>{const r=t.route.matched.find(s=>{var i;return((i=s.components)==null?void 0:i.default)===t.Component.type}),n=e??(r==null?void 0:r.meta.key)??(r&&GQ(t.route,r));return typeof n=="function"?n(t.route):n},JQ=(t,e)=>({default:()=>t?Tu(FG,t===!0?{}:t,e):e});function CC(t){return Array.isArray(t)?t:[t]}const XQ="modulepreload",ZQ=function(t,e){return new URL(t,e).href},gR={},YQ=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=ZQ(l,n),l in gR)return;gR[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!n)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===l&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":XQ,c||(f.as="script"),f.crossOrigin="",f.href=l,u&&f.setAttribute("nonce",u),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},xm=(...t)=>YQ(...t).catch(e=>{const r=new Event("nuxt.preloadError");throw r.payload=e,window.dispatchEvent(r),e}),m2=[{name:"credentials",path:"/credentials",component:()=>xm(()=>import("./DLDt8Ny3.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>t.default||t)},{name:"dashboard",path:"/dashboard",component:()=>xm(()=>import("./WTHpDhWG.js"),__vite__mapDeps([3,1,2,4,5,6,7]),import.meta.url).then(t=>t.default||t)},{name:"donate",path:"/donate",component:()=>xm(()=>import("./ylVngtX-.js"),__vite__mapDeps([8,1,2,5,6]),import.meta.url).then(t=>t.default||t)},{name:"login",path:"/login",component:()=>xm(()=>import("./BOVbRNwb.js"),__vite__mapDeps([9,1,2]),import.meta.url).then(t=>t.default||t)}],QQ=(t,e,r)=>(e=e===!0?{}:e,{default:()=>{var n;return e?Tu(t,e,r):(n=r.default)==null?void 0:n.call(r)}});function vR(t){const e=(t==null?void 0:t.meta.key)??t.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,r=>{var n;return((n=t.params[r.slice(1)])==null?void 0:n.toString())||""});return typeof e=="function"?e(t):e}function eee(t,e){return t===e||e===Ea?!1:vR(t)!==vR(e)?!0:!t.matched.every((n,s)=>{var i,o;return n.components&&n.components.default===((o=(i=e.matched[s])==null?void 0:i.components)==null?void 0:o.default)})}const tee={scrollBehavior(t,e,r){var l;const n=Rn(),s=((l=La().options)==null?void 0:l.scrollBehaviorType)??"auto";let i=r||void 0;const o=typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop;if(!i&&e&&t&&o!==!1&&eee(t,e)&&(i={left:0,top:0}),t.path===e.path)return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:wR(t.hash),behavior:s}:!1;const a=c=>!!(c.meta.pageTransition??KD),u=a(e)&&a(t)?"page:transition:finish":"page:finish";return new Promise(c=>{n.hooks.hookOnce(u,async()=>{await new Promise(d=>setTimeout(d,0)),t.hash&&(i={el:t.hash,top:wR(t.hash),behavior:s}),c(i)})})}};function wR(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const ree={hashMode:!1,scrollBehaviorType:"auto"},To={...ree,...tee},nee=async t=>{var u;let e,r;if(!((u=t.meta)!=null&&u.validate))return;const n=Rn(),s=La(),i=([e,r]=jm(()=>Promise.resolve(t.meta.validate(t))),e=await e,r(),e);if(i===!0)return;const o=OA({statusCode:i&&i.statusCode||404,statusMessage:i&&i.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}}),a=s.beforeResolve(l=>{if(a(),l===t){const c=s.afterEach(async()=>{c(),await n.runWithContext(()=>Dm(o)),window==null||window.history.pushState({},"",t.fullPath)});return!1}})},iee=async t=>{let e,r;const n=([e,r]=jm(()=>xC(t.path)),e=await e,r(),e);if(n.redirect)return xp(n.redirect,{acceptRelative:!0})?(window.location.href=n.redirect,!1):n.redirect},see=[nee,iee],W0={};function oee(t,e,r){const{pathname:n,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const l=i.includes(t.slice(o))?t.slice(o).length:1;let c=i.slice(l);return c[0]!=="/"&&(c="/"+c),j5(c,"")}const a=j5(n,t),u=!r||WX(a,r,{trailingSlash:!0})?a:r;return u+(u.includes("?")?"":s)+i}const aee=_l({name:"nuxt:router",enforce:"pre",async setup(t){var E;let e,r,n=IA().app.baseURL;To.hashMode&&!n.includes("#")&&(n+="#");const s=((E=To.history)==null?void 0:E.call(To,n))??(To.hashMode?EQ(n):xj(n)),i=To.routes?([e,r]=jm(()=>To.routes(m2)),e=await e,r(),e??m2):m2;let o;const a=HQ({...To,scrollBehavior:(A,_,g)=>{if(_===Ea){o=g;return}if(To.scrollBehavior){if(a.options.scrollBehavior=To.scrollBehavior,"scrollRestoration"in window.history){const v=a.beforeEach(()=>{v(),window.history.scrollRestoration="manual"})}return To.scrollBehavior(A,Ea,o||g)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const u=Ev(a.currentRoute.value);a.afterEach((A,_)=>{u.value=_}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>u.value});const l=oee(n,window.location,t.payload.path),c=Ev(a.currentRoute.value),d=()=>{c.value=a.currentRoute.value};t.hook("page:finish",d),a.afterEach((A,_)=>{var g,v,S,x;((v=(g=A.matched[0])==null?void 0:g.components)==null?void 0:v.default)===((x=(S=_.matched[0])==null?void 0:S.components)==null?void 0:x.default)&&d()});const h={};for(const A in c.value)Object.defineProperty(h,A,{get:()=>c.value[A]});t._route=Jc(h),t._middleware=t._middleware||{global:[],named:{}};const f=$A();a.afterEach(async(A,_,g)=>{delete t._processingMiddleware,!t.isHydrating&&f.value&&await t.runWithContext(VZ),g&&await t.callHook("page:loading:end"),A.matched.length===0&&await t.runWithContext(()=>Dm(HD({statusCode:404,fatal:!1,statusMessage:`Page not found: ${A.fullPath}`,data:{path:A.fullPath}})))});try{[e,r]=jm(()=>a.isReady()),await e,r()}catch(A){[e,r]=jm(()=>t.runWithContext(()=>Dm(A))),await e,r()}const p=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;d();const m=t.payload.state._layout;return a.beforeEach(async(A,_)=>{var g;await t.callHook("page:loading:start"),A.meta=vl(A.meta),t.isHydrating&&m&&!uf(A.meta.layout)&&(A.meta.layout=m),t._processingMiddleware=!0;{const v=new Set([...see,...t._middleware.global]);for(const S of A.matched){const x=S.meta.middleware;if(x)for(const D of CC(x))v.add(D)}{const S=await t.runWithContext(()=>xC(A.path));if(S.appMiddleware)for(const x in S.appMiddleware)S.appMiddleware[x]?v.add(x):v.delete(x)}for(const S of v){const x=typeof S=="string"?t._middleware.named[S]||await((g=W0[S])==null?void 0:g.call(W0).then(w=>w.default||w)):S;if(!x)throw new Error(`Unknown route middleware: '${S}'.`);const D=await t.runWithContext(()=>x(A,_));if(!t.payload.serverRendered&&t.isHydrating&&(D===!1||D instanceof Error)){const w=D||HD({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>Dm(w)),!1}if(D!==!0&&(D||D===!1))return D}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),t.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await a.replace({...p,force:!0}),a.options.scrollBehavior=To.scrollBehavior}catch(A){await t.runWithContext(()=>Dm(A))}}),{provide:{router:a}}}}),_R=globalThis.requestIdleCallback||(t=>{const e=Date.now(),r={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(r)},1)}),KOe=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),IC=t=>{const e=Rn();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{_R(()=>t())}):_R(()=>t())},uee=_l({name:"nuxt:payload",setup(t){La().beforeResolve(async(e,r)=>{if(e.path===r.path)return;const n=await Y5(e.path);n&&Object.assign(t.static.data,n.data)}),IC(()=>{var e;t.hooks.hook("link:prefetch",async r=>{const{hostname:n}=new URL(r,window.location.href);n===window.location.hostname&&await Y5(r)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(RA,1e3)})}}),cee=_l(()=>{const t=La();IC(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),lee=_l(t=>{let e;async function r(){const n=await RA();e&&clearTimeout(e),e=setTimeout(r,q5);try{const s=await $fetch(DC("builds/latest.json")+`?${Date.now()}`);s.id!==n.id&&t.hooks.callHook("app:manifest:update",s)}catch{}}IC(()=>{e=setTimeout(r,q5)})});function dee(t={}){const e=t.path||window.location.pathname;let r={};try{r=iE(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||(r==null?void 0:r.path)!==e||(r==null?void 0:r.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Rn().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const fee=_l({name:"nuxt:chunk-reload",setup(t){const e=La(),r=IA(),n=new Set;e.beforeEach(()=>{n.clear()}),t.hook("app:chunkError",({error:i})=>{n.add(i)});function s(i){const a="href"in i&&i.href[0]==="#"?r.app.baseURL+i.href:SC(r.app.baseURL,i.fullPath);dee({path:a,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{n.has(i)&&s(o)})}}),hee=_l({name:"nuxt:global-components"}),I_={},pee=_l({name:"nuxt:prefetch",setup(t){const e=La();t.hooks.hook("app:mounted",()=>{e.beforeEach(async r=>{var s;const n=(s=r==null?void 0:r.meta)==null?void 0:s.layout;n&&typeof I_[n]=="function"&&await I_[n]()})}),t.hooks.hook("link:prefetch",r=>{if(xp(r))return;const n=e.resolve(r);if(!n)return;const s=n.meta.layout;let i=CC(n.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof W0[o]=="function"&&W0[o]();s&&typeof I_[s]=="function"&&I_[s]()})}}),mee=[VY,HY,aee,uee,cee,lee,fee,hee,pee],yee=Ny({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const e=t.renderKey,r=t.route,n={};for(const s in t.route)Object.defineProperty(n,s,{get:()=>e===t.renderKey?t.route[s]:r[s]});return qh(kA,Jc(n)),()=>Tu(t.vnode,{ref:t.vnodeRef})}}),gee=Ny({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:r,expose:n}){const s=Rn(),i=ku(),o=Ks(kA,null);let a;n({pageRef:i});const u=Ks(UZ,null);let l;const c=s.deferHydration();if(s.isHydrating){const d=s.hooks.hookOnce("app:error",c);La().beforeEach(d)}return t.pageKey&&zd(()=>t.pageKey,(d,h)=>{d!==h&&s.callHook("page:loading:start")}),()=>Tu(Oj,{name:t.name,route:t.route,...e},{default:d=>{const h=wee(o,d.route,d.Component),f=o&&o.matched.length===d.route.matched.length;if(!d.Component){if(l&&!f)return l;c();return}if(l&&u&&!u.isCurrent(d.route))return l;if(h&&o&&(!u||u!=null&&u.isCurrent(o)))return f?l:null;const p=ex(d,t.pageKey);!s.isHydrating&&!_ee(o,d.route,d.Component)&&a===p&&s.callHook("page:loading:end"),a=p;const m=!!(t.transition??d.route.meta.pageTransition??KD),E=m&&vee([t.transition,d.route.meta.pageTransition,KD,{onAfterLeave:()=>{s.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),A=t.keepalive??d.route.meta.keepalive??AZ;return l=QQ(jJ,m&&E,JQ(A,Tu(x4,{suspensible:!0,onPending:()=>s.callHook("page:start",d.Component),onResolve:()=>{Ry(()=>s.callHook("page:finish",d.Component).then(()=>s.callHook("page:loading:end")).finally(c))}},{default:()=>{const _=Tu(yee,{key:p||void 0,vnode:r.default?Tu(so,void 0,r.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:m,vnodeRef:i});return A&&(_.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),_}}))).default(),l}})}});function vee(t){const e=t.map(r=>({...r,onAfterLeave:r.onAfterLeave?CC(r.onAfterLeave):void 0}));return ij(...e)}function wee(t,e,r){if(!t)return!1;const n=e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(r==null?void 0:r.type)});return!n||n===-1?!1:e.matched.slice(0,n).some((s,i)=>{var o,a,u;return((o=s.components)==null?void 0:o.default)!==((u=(a=t.matched[i])==null?void 0:a.components)==null?void 0:u.default)})||r&&ex({route:e,Component:r})!==ex({route:t,Component:r})}function _ee(t,e,r){return t?e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(r==null?void 0:r.type)})<e.matched.length-1:!1}const bee=window.setInterval;var Jr="0123456789abcdefghjkmnpqrstvwxyz",Xe=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,255,18,19,255,20,21,255,22,23,24,25,26,255,27,28,29,30,31,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]);function y2(t){const e=new Array(26).fill("");if(t.length!==16)throw new Error("Invalid length");return e[0]=Jr[(t[0]&224)>>5],e[1]=Jr[t[0]&31],e[2]=Jr[(t[1]&248)>>3],e[3]=Jr[(t[1]&7)<<2|(t[2]&192)>>6],e[4]=Jr[(t[2]&62)>>1],e[5]=Jr[(t[2]&1)<<4|(t[3]&240)>>4],e[6]=Jr[(t[3]&15)<<1|(t[4]&128)>>7],e[7]=Jr[(t[4]&124)>>2],e[8]=Jr[(t[4]&3)<<3|(t[5]&224)>>5],e[9]=Jr[t[5]&31],e[10]=Jr[(t[6]&248)>>3],e[11]=Jr[(t[6]&7)<<2|(t[7]&192)>>6],e[12]=Jr[(t[7]&62)>>1],e[13]=Jr[(t[7]&1)<<4|(t[8]&240)>>4],e[14]=Jr[(t[8]&15)<<1|(t[9]&128)>>7],e[15]=Jr[(t[9]&124)>>2],e[16]=Jr[(t[9]&3)<<3|(t[10]&224)>>5],e[17]=Jr[t[10]&31],e[18]=Jr[(t[11]&248)>>3],e[19]=Jr[(t[11]&7)<<2|(t[12]&192)>>6],e[20]=Jr[(t[12]&62)>>1],e[21]=Jr[(t[12]&1)<<4|(t[13]&240)>>4],e[22]=Jr[(t[13]&15)<<1|(t[14]&128)>>7],e[23]=Jr[(t[14]&124)>>2],e[24]=Jr[(t[14]&3)<<3|(t[15]&224)>>5],e[25]=Jr[t[15]&31],e.join("")}function bR(t){if(t.length!==26)throw new Error("Invalid length");const r=new TextEncoder().encode(t);if(Xe[r[0]]===255||Xe[r[1]]===255||Xe[r[2]]===255||Xe[r[3]]===255||Xe[r[4]]===255||Xe[r[5]]===255||Xe[r[6]]===255||Xe[r[7]]===255||Xe[r[8]]===255||Xe[r[9]]===255||Xe[r[10]]===255||Xe[r[11]]===255||Xe[r[12]]===255||Xe[r[13]]===255||Xe[r[14]]===255||Xe[r[15]]===255||Xe[r[16]]===255||Xe[r[17]]===255||Xe[r[18]]===255||Xe[r[19]]===255||Xe[r[20]]===255||Xe[r[21]]===255||Xe[r[22]]===255||Xe[r[23]]===255||Xe[r[24]]===255||Xe[r[25]]===255)throw new Error("Invalid base32 character");const n=new Uint8Array(16);return n[0]=Xe[r[0]]<<5|Xe[r[1]],n[1]=Xe[r[2]]<<3|Xe[r[3]]>>2,n[2]=(Xe[r[3]]&3)<<6|Xe[r[4]]<<1|Xe[r[5]]>>4,n[3]=(Xe[r[5]]&15)<<4|Xe[r[6]]>>1,n[4]=(Xe[r[6]]&1)<<7|Xe[r[7]]<<2|Xe[r[8]]>>3,n[5]=(Xe[r[8]]&7)<<5|Xe[r[9]],n[6]=Xe[r[10]]<<3|Xe[r[11]]>>2,n[7]=(Xe[r[11]]&3)<<6|Xe[r[12]]<<1|Xe[r[13]]>>4,n[8]=(Xe[r[13]]&15)<<4|Xe[r[14]]>>1,n[9]=(Xe[r[14]]&1)<<7|Xe[r[15]]<<2|Xe[r[16]]>>3,n[10]=(Xe[r[16]]&7)<<5|Xe[r[17]],n[11]=Xe[r[18]]<<3|Xe[r[19]]>>2,n[12]=(Xe[r[19]]&3)<<6|Xe[r[20]]<<1|Xe[r[21]]>>4,n[13]=(Xe[r[21]]&15)<<4|Xe[r[22]]>>1,n[14]=(Xe[r[22]]&1)<<7|Xe[r[23]]<<2|Xe[r[24]]>>3,n[15]=(Xe[r[24]]&7)<<5|Xe[r[25]],n}function Eee(t){let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Eh=Math.pow,ER="0123456789abcdef",dE=class{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,r,n){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(r)||!Number.isInteger(n)||t<0||e<0||r<0||n<0||t>0xffffffffffff||e>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");const s=new Uint8Array(16);return s[0]=t/Eh(2,40),s[1]=t/Eh(2,32),s[2]=t/Eh(2,24),s[3]=t/Eh(2,16),s[4]=t/Eh(2,8),s[5]=t,s[6]=112|e>>>8,s[7]=e,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=n>>>24,s[13]=n>>>16,s[14]=n>>>8,s[15]=n,new dE(s)}toString(){let t="";for(let e=0;e<this.bytes.length;e++)t+=ER.charAt(this.bytes[e]>>>4),t+=ER.charAt(this.bytes[e]&15),(e===3||e===5||e===7||e===9)&&(t+="-");return t}clone(){return new dE(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let e=0;e<16;e++){const r=this.bytes[e]-t.bytes[e];if(r!==0)return Math.sign(r)}return 0}},Aee=class{constructor(){this.timestamp=0,this.counter=0,this.random=new See}generate(){const t=this.generateOrAbort();return t!==void 0?t:(this.timestamp=0,this.generateOrAbort())}generateOrAbort(){const r=Date.now();if(r>this.timestamp)this.timestamp=r,this.resetCounter();else if(r+1e4>this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return dE.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Eh(2,30)),this.counter&Eh(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}},Rj=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(let e=0;e<t.length;e++)t[e]=Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536);return t};typeof crypto<"u"&&crypto.getRandomValues&&(Rj=t=>crypto.getRandomValues(t));var See=class{constructor(){this.buffer=new Uint32Array(8),this.cursor=99}nextUint32(){return this.cursor>=this.buffer.length&&(Rj(this.buffer),this.cursor=0),this.buffer[this.cursor++]}},AR,Tee=()=>(AR||(AR=new Aee)).generate();function Dee(t){if(t.length>63)return!1;let e,r,n;for(r=0,n=t.length;r<n;r+=1)if(e=t.charCodeAt(r),!(e>96&&e<123))return!1;return!0}var m0=class{constructor(t,e=""){if(this.prefix=t,this.suffix=e,!Dee(t))throw new Error("Invalid prefix. Must be at most 63 ascii letters [a-z]");if(this.prefix=t,e)this.suffix=e;else{const r=Tee();this.suffix=y2(r.bytes)}if(this.suffix.length!==26)throw new Error(`Invalid length. Suffix should have 26 characters, got ${e.length}`);if(this.suffix[0]>"7")throw new Error("Invalid suffix. First character must be in the range [0-7]");bR(this.suffix)}getType(){return this.prefix}getSuffix(){return this.suffix}asType(t){const e=this;if(e.prefix!==t)throw new Error(`Cannot convert TypeID of type ${e.prefix} to type ${t}`);return e}toUUIDBytes(){return bR(this.suffix)}toUUID(){return new dE(this.toUUIDBytes()).toString()}toString(){return this.prefix===""?this.suffix:`${this.prefix}_${this.suffix}`}static fromString(t){const e=t.split("_");if(e.length===1)return new m0("",e[0]);if(e.length===2){if(e[0]==="")throw new Error(`Invalid TypeID. Prefix cannot be empty when there's a separator: ${t}`);return new m0(e[0],e[1])}throw new Error(`Invalid TypeID string: ${t}`)}static fromUUIDBytes(t,e){const r=y2(e);return new m0(t,r)}static fromUUID(t,e){const r=y2(Eee(e));return new m0(t,r)}};function kC(t="",e=""){return new m0(t,e)}/*! Bundled license information:

uuidv7/dist/index.js:
  (**
   * uuidv7: An experimental implementation of the proposed UUID Version 7
   *
   * @license Apache-2.0
   * @copyright 2021-2023 LiosK
   * @packageDocumentation
   *)
*/function SR(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function xee(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Nj(t,...e){if(!xee(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Pee(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");SR(t.outputLen),SR(t.blockLen)}function fE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cee(t,e){Nj(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const g2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bj(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const v2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),za=(t,e)=>t<<32-e|t>>>e,Iee=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Iee)throw new Error("Non little-endian hardware is not supported");function Fj(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $C(t){if(typeof t=="string"&&(t=Fj(t)),!Bj(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Mj(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];if(!Bj(s))throw new Error("Uint8Array expected");e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let jj=class{clone(){return this._cloneInto()}};function Uj(t){const e=n=>t().update($C(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function OC(t=32){if(g2&&typeof g2.getRandomValues=="function")return g2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function kee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}let Lj=class extends jj{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=v2(this.buffer)}update(e){fE(this);const{view:r,buffer:n,blockLen:s}=this;e=$C(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=v2(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fE(this),Cee(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;kee(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=v2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const $ee=(t,e,r)=>t&e^~t&r,Oee=(t,e,r)=>t&e^t&r^e&r,Ree=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ol=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rl=new Uint32Array(64);let Nee=class extends Lj{constructor(){super(64,32,8,!1),this.A=Ol[0]|0,this.B=Ol[1]|0,this.C=Ol[2]|0,this.D=Ol[3]|0,this.E=Ol[4]|0,this.F=Ol[5]|0,this.G=Ol[6]|0,this.H=Ol[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Rl[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Rl[d-15],f=Rl[d-2],p=za(h,7)^za(h,18)^h>>>3,m=za(f,17)^za(f,19)^f>>>10;Rl[d]=m+Rl[d-7]+p+Rl[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=za(a,6)^za(a,11)^za(a,25),f=c+h+$ee(a,u,l)+Ree[d]+Rl[d]|0,m=(za(n,2)^za(n,13)^za(n,22))+Oee(n,s,i)|0;c=l,l=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,i,o,a,u,l,c)}roundClean(){Rl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const lf=Uj(()=>new Nee);var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bee(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}function Fee(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Mee(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var jee=Mee,Uee=jee;let Lee=class{constructor(e,r,n){Se(this,"name");Se(this,"prefix");Se(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Kee=class{constructor(e,r,n){Se(this,"name");Se(this,"prefix");Se(this,"baseDecode");Se(this,"prefixCodePoint");if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Kj(this,e)}},Vee=class{constructor(e){Se(this,"decoders");this.decoders=e}or(e){return Kj(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Kj(t,e){return new Vee({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let qee=class{constructor(e,r,n,s){Se(this,"name");Se(this,"prefix");Se(this,"baseEncode");Se(this,"baseDecode");Se(this,"encoder");Se(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Lee(e,r,n),this.decoder=new Kee(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Vj({name:t,prefix:e,encode:r,decode:n}){return new qee(t,e,r,n)}function qj({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=Uee(r,t);return Vj({prefix:e,name:t,encode:n,decode:i=>Fee(s(i))})}function Hee(t,e,r,n){const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function zee(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function ho({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Vj({prefix:e,name:t,encode(s){return zee(s,n,r)},decode(s){return Hee(s,n,r,t)}})}ho({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ho({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ho({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ho({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ho({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ho({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ho({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ho({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const TR=ho({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),k_=qj({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});qj({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});ho({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ho({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const uc=ho({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ho({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Wee(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function Gee(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function DR(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var hg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},xR=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const $_=new TextEncoder,Uf=new TextDecoder;let _a=class Es{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Es(e,"ArrayBuffer")}static asyncIterable(e){if(!Gee(e))throw new TypeError("Input must be of type AsyncIterable.");return new Es(e,"AsyncIterable")}static base32Z(e){return new Es(e,"Base32Z")}static base58Btc(e){return new Es(e,"Base58Btc")}static base64Url(e){return new Es(e,"Base64Url")}static bufferSource(e){return new Es(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Es(e,"Hex")}static multibase(e){return new Es(e,"Multibase")}static object(e){return new Es(e,"Object")}static string(e){return new Es(e,"String")}static uint8Array(e){return new Es(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return k_.baseDecode(this.data).buffer;case"Base64Url":return uc.baseDecode(this.data).buffer;case"BufferSource":{if(DR(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Wee(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return hg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return TR.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return k_.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return k_.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return uc.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return uc.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=$_.encode(e);return uc.baseEncode(r)}case"String":{const e=$_.encode(this.data);return uc.baseEncode(e)}case"Uint8Array":return uc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return hg(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=xR(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Es.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Es.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=uc.baseDecode(this.data),r=Uf.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=Uf.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return hg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Uf.decode(this.data);case"Base64Url":{const e=uc.baseDecode(this.data);return Uf.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Uf.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return hg(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=xR(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=Uf.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Uf.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return TR.baseDecode(this.data);case"Base58Btc":return k_.baseDecode(this.data);case"Base64Url":return uc.baseDecode(this.data);case"BufferSource":{const e=DR(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return $_.encode(e)}case"String":return $_.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return hg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Jee=Hj,PR=128,Xee=127,Zee=~Xee,Yee=Math.pow(2,31);function Hj(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Yee;)e[r++]=t&255|PR,t/=128;for(;t&Zee;)e[r++]=t&255|PR,t>>>=7;return e[r]=t|0,Hj.bytes=r-n+1,e}var Qee=tx,ete=128,CR=127;function tx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw tx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&CR)<<s:(o&CR)*Math.pow(2,s),s+=7}while(o>=ete);return tx.bytes=i-n,r}var tte=Math.pow(2,7),rte=Math.pow(2,14),nte=Math.pow(2,21),ite=Math.pow(2,28),ste=Math.pow(2,35),ote=Math.pow(2,42),ate=Math.pow(2,49),ute=Math.pow(2,56),cte=Math.pow(2,63),lte=function(t){return t<tte?1:t<rte?2:t<nte?3:t<ite?4:t<ste?5:t<ote?6:t<ate?7:t<ute?8:t<cte?9:10},dte={encode:Jee,decode:Qee,encodingLength:lte},hE=dte;function IR(t,e=0){return[hE.decode(t,e),hE.decode.bytes]}function fte(t,e,r=0){return hE.encode(t,e,r),e}function hte(t){return hE.encodingLength(t)}let bf=class ud{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=ud.codeToName.has(n)?n:ud.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=hte(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),fte(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=IR(r);return n}static getCodeFromName(e){const{name:r}=e,n=ud.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=ud.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){ud.codeToName.set(e.code,e.name),ud.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=IR(r),i=ud.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};bf.codeToName=new Map;bf.nameToCode=new Map;bf.registerCodec({code:237,name:"ed25519-pub"});bf.registerCodec({code:4864,name:"ed25519-priv"});bf.registerCodec({code:236,name:"x25519-pub"});bf.registerCodec({code:4866,name:"x25519-priv"});bf.registerCodec({code:231,name:"secp256k1-pub"});bf.registerCodec({code:4865,name:"secp256k1-priv"});var Ef={},FA={},zj={};zj.supports=function(...e){const r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var Wj={},Yu=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Pp={},la={},MA={};MA.byteLength=yte;MA.toByteArray=vte;MA.fromByteArray=bte;var bu=[],Bo=[],pte=typeof Uint8Array<"u"?Uint8Array:Array,w2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zp=0,mte=w2.length;zp<mte;++zp)bu[zp]=w2[zp],Bo[w2.charCodeAt(zp)]=zp;Bo[45]=62;Bo[95]=63;function Gj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function yte(t){var e=Gj(t),r=e[0],n=e[1];return(r+n)*3/4-n}function gte(t,e,r){return(e+r)*3/4-r}function vte(t){var e,r=Gj(t),n=r[0],s=r[1],i=new pte(gte(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=Bo[t.charCodeAt(u)]<<18|Bo[t.charCodeAt(u+1)]<<12|Bo[t.charCodeAt(u+2)]<<6|Bo[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Bo[t.charCodeAt(u)]<<2|Bo[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=Bo[t.charCodeAt(u)]<<10|Bo[t.charCodeAt(u+1)]<<4|Bo[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function wte(t){return bu[t>>18&63]+bu[t>>12&63]+bu[t>>6&63]+bu[t&63]}function _te(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(wte(n));return s.join("")}function bte(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(_te(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(bu[e>>2]+bu[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(bu[e>>10]+bu[e>>4&63]+bu[e<<2&63]+"=")),s.join("")}var RC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */RC.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,l=u>>1,c=-7,d=r?s-1:0,h=r?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=a;c>0;i=i*256+t[e+d],d+=h,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=o*256+t[e+d],d+=h,c-=8);if(i===0)i=1-l;else{if(i===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-l}return(f?-1:1)*o*Math.pow(2,i-n)};RC.write=function(t,e,r,n,s,i){var o,a,u,l=i*8-s-1,c=(1<<l)-1,d=c>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=h/u:e+=h*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=c?(a=0,o=c):o+d>=1?(a=(e*u-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[r+f]=o&255,f+=p,o/=256,l-=8);t[r+f-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=MA,r=RC,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;var s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var j=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(j,I),j.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(j){if(j>s)throw new RangeError('The value "'+j+'" is invalid for option "size"');var I=new Uint8Array(j);return Object.setPrototypeOf(I,a.prototype),I}function a(j,I,N){if(typeof j=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(j)}return u(j,I,N)}a.poolSize=8192;function u(j,I,N){if(typeof j=="string")return h(j,I);if(ArrayBuffer.isView(j))return p(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(M(j,ArrayBuffer)||j&&M(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(M(j,SharedArrayBuffer)||j&&M(j.buffer,SharedArrayBuffer)))return m(j,I,N);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=j.valueOf&&j.valueOf();if(Q!=null&&Q!==j)return a.from(Q,I,N);var ce=E(j);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return a.from(j[Symbol.toPrimitive]("string"),I,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}a.from=function(j,I,N){return u(j,I,N)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function c(j,I,N){return l(j),j<=0?o(j):I!==void 0?typeof N=="string"?o(j).fill(I,N):o(j).fill(I):o(j)}a.alloc=function(j,I,N){return c(j,I,N)};function d(j){return l(j),o(j<0?0:A(j)|0)}a.allocUnsafe=function(j){return d(j)},a.allocUnsafeSlow=function(j){return d(j)};function h(j,I){if((typeof I!="string"||I==="")&&(I="utf8"),!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);var N=g(j,I)|0,Q=o(N),ce=Q.write(j,I);return ce!==N&&(Q=Q.slice(0,ce)),Q}function f(j){for(var I=j.length<0?0:A(j.length)|0,N=o(I),Q=0;Q<I;Q+=1)N[Q]=j[Q]&255;return N}function p(j){if(M(j,Uint8Array)){var I=new Uint8Array(j);return m(I.buffer,I.byteOffset,I.byteLength)}return f(j)}function m(j,I,N){if(I<0||j.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<I+(N||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return I===void 0&&N===void 0?Q=new Uint8Array(j):N===void 0?Q=new Uint8Array(j,I):Q=new Uint8Array(j,I,N),Object.setPrototypeOf(Q,a.prototype),Q}function E(j){if(a.isBuffer(j)){var I=A(j.length)|0,N=o(I);return N.length===0||j.copy(N,0,0,I),N}if(j.length!==void 0)return typeof j.length!="number"||V(j.length)?o(0):f(j);if(j.type==="Buffer"&&Array.isArray(j.data))return f(j.data)}function A(j){if(j>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return j|0}function _(j){return+j!=j&&(j=0),a.alloc(+j)}a.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==a.prototype},a.compare=function(I,N){if(M(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),M(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),!a.isBuffer(I)||!a.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===N)return 0;for(var Q=I.length,ce=N.length,pe=0,he=Math.min(Q,ce);pe<he;++pe)if(I[pe]!==N[pe]){Q=I[pe],ce=N[pe];break}return Q<ce?-1:ce<Q?1:0},a.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(I,N){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return a.alloc(0);var Q;if(N===void 0)for(N=0,Q=0;Q<I.length;++Q)N+=I[Q].length;var ce=a.allocUnsafe(N),pe=0;for(Q=0;Q<I.length;++Q){var he=I[Q];if(M(he,Uint8Array))pe+he.length>ce.length?a.from(he).copy(ce,pe):Uint8Array.prototype.set.call(ce,he,pe);else if(a.isBuffer(he))he.copy(ce,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=he.length}return ce};function g(j,I){if(a.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||M(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var N=j.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&N===0)return 0;for(var ce=!1;;)switch(I){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return le(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Pe(j).length;default:if(ce)return Q?-1:le(j).length;I=(""+I).toLowerCase(),ce=!0}}a.byteLength=g;function v(j,I,N){var Q=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,I>>>=0,N<=I))return"";for(j||(j="utf8");;)switch(j){case"hex":return re(this,I,N);case"utf8":case"utf-8":return K(this,I,N);case"ascii":return se(this,I,N);case"latin1":case"binary":return X(this,I,N);case"base64":return k(this,I,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,I,N);default:if(Q)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),Q=!0}}a.prototype._isBuffer=!0;function S(j,I,N){var Q=j[I];j[I]=j[N],j[N]=Q}a.prototype.swap16=function(){var I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<I;N+=2)S(this,N,N+1);return this},a.prototype.swap32=function(){var I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<I;N+=4)S(this,N,N+3),S(this,N+1,N+2);return this},a.prototype.swap64=function(){var I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<I;N+=8)S(this,N,N+7),S(this,N+1,N+6),S(this,N+2,N+5),S(this,N+3,N+4);return this},a.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?K(this,0,I):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(I){if(!a.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:a.compare(this,I)===0},a.prototype.inspect=function(){var I="",N=t.INSPECT_MAX_BYTES;return I=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(I+=" ... "),"<Buffer "+I+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(I,N,Q,ce,pe){if(M(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(N===void 0&&(N=0),Q===void 0&&(Q=I?I.length:0),ce===void 0&&(ce=0),pe===void 0&&(pe=this.length),N<0||Q>I.length||ce<0||pe>this.length)throw new RangeError("out of range index");if(ce>=pe&&N>=Q)return 0;if(ce>=pe)return-1;if(N>=Q)return 1;if(N>>>=0,Q>>>=0,ce>>>=0,pe>>>=0,this===I)return 0;for(var he=pe-ce,Ce=Q-N,_e=Math.min(he,Ce),G=this.slice(ce,pe),J=I.slice(N,Q),ge=0;ge<_e;++ge)if(G[ge]!==J[ge]){he=G[ge],Ce=J[ge];break}return he<Ce?-1:Ce<he?1:0};function x(j,I,N,Q,ce){if(j.length===0)return-1;if(typeof N=="string"?(Q=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,V(N)&&(N=ce?0:j.length-1),N<0&&(N=j.length+N),N>=j.length){if(ce)return-1;N=j.length-1}else if(N<0)if(ce)N=0;else return-1;if(typeof I=="string"&&(I=a.from(I,Q)),a.isBuffer(I))return I.length===0?-1:D(j,I,N,Q,ce);if(typeof I=="number")return I=I&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(j,I,N):Uint8Array.prototype.lastIndexOf.call(j,I,N):D(j,[I],N,Q,ce);throw new TypeError("val must be string, number or Buffer")}function D(j,I,N,Q,ce){var pe=1,he=j.length,Ce=I.length;if(Q!==void 0&&(Q=String(Q).toLowerCase(),Q==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(j.length<2||I.length<2)return-1;pe=2,he/=2,Ce/=2,N/=2}function _e(ke,At){return pe===1?ke[At]:ke.readUInt16BE(At*pe)}var G;if(ce){var J=-1;for(G=N;G<he;G++)if(_e(j,G)===_e(I,J===-1?0:G-J)){if(J===-1&&(J=G),G-J+1===Ce)return J*pe}else J!==-1&&(G-=G-J),J=-1}else for(N+Ce>he&&(N=he-Ce),G=N;G>=0;G--){for(var ge=!0,be=0;be<Ce;be++)if(_e(j,G+be)!==_e(I,be)){ge=!1;break}if(ge)return G}return-1}a.prototype.includes=function(I,N,Q){return this.indexOf(I,N,Q)!==-1},a.prototype.indexOf=function(I,N,Q){return x(this,I,N,Q,!0)},a.prototype.lastIndexOf=function(I,N,Q){return x(this,I,N,Q,!1)};function w(j,I,N,Q){N=Number(N)||0;var ce=j.length-N;Q?(Q=Number(Q),Q>ce&&(Q=ce)):Q=ce;var pe=I.length;Q>pe/2&&(Q=pe/2);for(var he=0;he<Q;++he){var Ce=parseInt(I.substr(he*2,2),16);if(V(Ce))return he;j[N+he]=Ce}return he}function b(j,I,N,Q){return Ue(le(I,j.length-N),j,N,Q)}function T(j,I,N,Q){return Ue(me(I),j,N,Q)}function P(j,I,N,Q){return Ue(Pe(I),j,N,Q)}function C(j,I,N,Q){return Ue(ve(I,j.length-N),j,N,Q)}a.prototype.write=function(I,N,Q,ce){if(N===void 0)ce="utf8",Q=this.length,N=0;else if(Q===void 0&&typeof N=="string")ce=N,Q=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(Q)?(Q=Q>>>0,ce===void 0&&(ce="utf8")):(ce=Q,Q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-N;if((Q===void 0||Q>pe)&&(Q=pe),I.length>0&&(Q<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var he=!1;;)switch(ce){case"hex":return w(this,I,N,Q);case"utf8":case"utf-8":return b(this,I,N,Q);case"ascii":case"latin1":case"binary":return T(this,I,N,Q);case"base64":return P(this,I,N,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,I,N,Q);default:if(he)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),he=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(j,I,N){return I===0&&N===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(I,N))}function K(j,I,N){N=Math.min(j.length,N);for(var Q=[],ce=I;ce<N;){var pe=j[ce],he=null,Ce=pe>239?4:pe>223?3:pe>191?2:1;if(ce+Ce<=N){var _e,G,J,ge;switch(Ce){case 1:pe<128&&(he=pe);break;case 2:_e=j[ce+1],(_e&192)===128&&(ge=(pe&31)<<6|_e&63,ge>127&&(he=ge));break;case 3:_e=j[ce+1],G=j[ce+2],(_e&192)===128&&(G&192)===128&&(ge=(pe&15)<<12|(_e&63)<<6|G&63,ge>2047&&(ge<55296||ge>57343)&&(he=ge));break;case 4:_e=j[ce+1],G=j[ce+2],J=j[ce+3],(_e&192)===128&&(G&192)===128&&(J&192)===128&&(ge=(pe&15)<<18|(_e&63)<<12|(G&63)<<6|J&63,ge>65535&&ge<1114112&&(he=ge))}}he===null?(he=65533,Ce=1):he>65535&&(he-=65536,Q.push(he>>>10&1023|55296),he=56320|he&1023),Q.push(he),ce+=Ce}return q(Q)}var L=4096;function q(j){var I=j.length;if(I<=L)return String.fromCharCode.apply(String,j);for(var N="",Q=0;Q<I;)N+=String.fromCharCode.apply(String,j.slice(Q,Q+=L));return N}function se(j,I,N){var Q="";N=Math.min(j.length,N);for(var ce=I;ce<N;++ce)Q+=String.fromCharCode(j[ce]&127);return Q}function X(j,I,N){var Q="";N=Math.min(j.length,N);for(var ce=I;ce<N;++ce)Q+=String.fromCharCode(j[ce]);return Q}function re(j,I,N){var Q=j.length;(!I||I<0)&&(I=0),(!N||N<0||N>Q)&&(N=Q);for(var ce="",pe=I;pe<N;++pe)ce+=oe[j[pe]];return ce}function W(j,I,N){for(var Q=j.slice(I,N),ce="",pe=0;pe<Q.length-1;pe+=2)ce+=String.fromCharCode(Q[pe]+Q[pe+1]*256);return ce}a.prototype.slice=function(I,N){var Q=this.length;I=~~I,N=N===void 0?Q:~~N,I<0?(I+=Q,I<0&&(I=0)):I>Q&&(I=Q),N<0?(N+=Q,N<0&&(N=0)):N>Q&&(N=Q),N<I&&(N=I);var ce=this.subarray(I,N);return Object.setPrototypeOf(ce,a.prototype),ce};function B(j,I,N){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+I>N)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(I,N,Q){I=I>>>0,N=N>>>0,Q||B(I,N,this.length);for(var ce=this[I],pe=1,he=0;++he<N&&(pe*=256);)ce+=this[I+he]*pe;return ce},a.prototype.readUintBE=a.prototype.readUIntBE=function(I,N,Q){I=I>>>0,N=N>>>0,Q||B(I,N,this.length);for(var ce=this[I+--N],pe=1;N>0&&(pe*=256);)ce+=this[I+--N]*pe;return ce},a.prototype.readUint8=a.prototype.readUInt8=function(I,N){return I=I>>>0,N||B(I,1,this.length),this[I]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(I,N){return I=I>>>0,N||B(I,2,this.length),this[I]|this[I+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(I,N){return I=I>>>0,N||B(I,2,this.length),this[I]<<8|this[I+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(I,N){return I=I>>>0,N||B(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(I,N){return I=I>>>0,N||B(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},a.prototype.readIntLE=function(I,N,Q){I=I>>>0,N=N>>>0,Q||B(I,N,this.length);for(var ce=this[I],pe=1,he=0;++he<N&&(pe*=256);)ce+=this[I+he]*pe;return pe*=128,ce>=pe&&(ce-=Math.pow(2,8*N)),ce},a.prototype.readIntBE=function(I,N,Q){I=I>>>0,N=N>>>0,Q||B(I,N,this.length);for(var ce=N,pe=1,he=this[I+--ce];ce>0&&(pe*=256);)he+=this[I+--ce]*pe;return pe*=128,he>=pe&&(he-=Math.pow(2,8*N)),he},a.prototype.readInt8=function(I,N){return I=I>>>0,N||B(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},a.prototype.readInt16LE=function(I,N){I=I>>>0,N||B(I,2,this.length);var Q=this[I]|this[I+1]<<8;return Q&32768?Q|4294901760:Q},a.prototype.readInt16BE=function(I,N){I=I>>>0,N||B(I,2,this.length);var Q=this[I+1]|this[I]<<8;return Q&32768?Q|4294901760:Q},a.prototype.readInt32LE=function(I,N){return I=I>>>0,N||B(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},a.prototype.readInt32BE=function(I,N){return I=I>>>0,N||B(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},a.prototype.readFloatLE=function(I,N){return I=I>>>0,N||B(I,4,this.length),r.read(this,I,!0,23,4)},a.prototype.readFloatBE=function(I,N){return I=I>>>0,N||B(I,4,this.length),r.read(this,I,!1,23,4)},a.prototype.readDoubleLE=function(I,N){return I=I>>>0,N||B(I,8,this.length),r.read(this,I,!0,52,8)},a.prototype.readDoubleBE=function(I,N){return I=I>>>0,N||B(I,8,this.length),r.read(this,I,!1,52,8)};function te(j,I,N,Q,ce,pe){if(!a.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>ce||I<pe)throw new RangeError('"value" argument is out of bounds');if(N+Q>j.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(I,N,Q,ce){if(I=+I,N=N>>>0,Q=Q>>>0,!ce){var pe=Math.pow(2,8*Q)-1;te(this,I,N,Q,pe,0)}var he=1,Ce=0;for(this[N]=I&255;++Ce<Q&&(he*=256);)this[N+Ce]=I/he&255;return N+Q},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(I,N,Q,ce){if(I=+I,N=N>>>0,Q=Q>>>0,!ce){var pe=Math.pow(2,8*Q)-1;te(this,I,N,Q,pe,0)}var he=Q-1,Ce=1;for(this[N+he]=I&255;--he>=0&&(Ce*=256);)this[N+he]=I/Ce&255;return N+Q},a.prototype.writeUint8=a.prototype.writeUInt8=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,1,255,0),this[N]=I&255,N+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,2,65535,0),this[N]=I&255,this[N+1]=I>>>8,N+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,2,65535,0),this[N]=I>>>8,this[N+1]=I&255,N+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,4,4294967295,0),this[N+3]=I>>>24,this[N+2]=I>>>16,this[N+1]=I>>>8,this[N]=I&255,N+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,4,4294967295,0),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=I&255,N+4},a.prototype.writeIntLE=function(I,N,Q,ce){if(I=+I,N=N>>>0,!ce){var pe=Math.pow(2,8*Q-1);te(this,I,N,Q,pe-1,-pe)}var he=0,Ce=1,_e=0;for(this[N]=I&255;++he<Q&&(Ce*=256);)I<0&&_e===0&&this[N+he-1]!==0&&(_e=1),this[N+he]=(I/Ce>>0)-_e&255;return N+Q},a.prototype.writeIntBE=function(I,N,Q,ce){if(I=+I,N=N>>>0,!ce){var pe=Math.pow(2,8*Q-1);te(this,I,N,Q,pe-1,-pe)}var he=Q-1,Ce=1,_e=0;for(this[N+he]=I&255;--he>=0&&(Ce*=256);)I<0&&_e===0&&this[N+he+1]!==0&&(_e=1),this[N+he]=(I/Ce>>0)-_e&255;return N+Q},a.prototype.writeInt8=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,1,127,-128),I<0&&(I=255+I+1),this[N]=I&255,N+1},a.prototype.writeInt16LE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,2,32767,-32768),this[N]=I&255,this[N+1]=I>>>8,N+2},a.prototype.writeInt16BE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,2,32767,-32768),this[N]=I>>>8,this[N+1]=I&255,N+2},a.prototype.writeInt32LE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,4,2147483647,-2147483648),this[N]=I&255,this[N+1]=I>>>8,this[N+2]=I>>>16,this[N+3]=I>>>24,N+4},a.prototype.writeInt32BE=function(I,N,Q){return I=+I,N=N>>>0,Q||te(this,I,N,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=I&255,N+4};function z(j,I,N,Q,ce,pe){if(N+Q>j.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function $(j,I,N,Q,ce){return I=+I,N=N>>>0,ce||z(j,I,N,4),r.write(j,I,N,Q,23,4),N+4}a.prototype.writeFloatLE=function(I,N,Q){return $(this,I,N,!0,Q)},a.prototype.writeFloatBE=function(I,N,Q){return $(this,I,N,!1,Q)};function F(j,I,N,Q,ce){return I=+I,N=N>>>0,ce||z(j,I,N,8),r.write(j,I,N,Q,52,8),N+8}a.prototype.writeDoubleLE=function(I,N,Q){return F(this,I,N,!0,Q)},a.prototype.writeDoubleBE=function(I,N,Q){return F(this,I,N,!1,Q)},a.prototype.copy=function(I,N,Q,ce){if(!a.isBuffer(I))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!ce&&ce!==0&&(ce=this.length),N>=I.length&&(N=I.length),N||(N=0),ce>0&&ce<Q&&(ce=Q),ce===Q||I.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),I.length-N<ce-Q&&(ce=I.length-N+Q);var pe=ce-Q;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,Q,ce):Uint8Array.prototype.set.call(I,this.subarray(Q,ce),N),pe},a.prototype.fill=function(I,N,Q,ce){if(typeof I=="string"){if(typeof N=="string"?(ce=N,N=0,Q=this.length):typeof Q=="string"&&(ce=Q,Q=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!a.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(I.length===1){var pe=I.charCodeAt(0);(ce==="utf8"&&pe<128||ce==="latin1")&&(I=pe)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(N<0||this.length<N||this.length<Q)throw new RangeError("Out of range index");if(Q<=N)return this;N=N>>>0,Q=Q===void 0?this.length:Q>>>0,I||(I=0);var he;if(typeof I=="number")for(he=N;he<Q;++he)this[he]=I;else{var Ce=a.isBuffer(I)?I:a.from(I,ce),_e=Ce.length;if(_e===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(he=0;he<Q-N;++he)this[he+N]=Ce[he%_e]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function ne(j){if(j=j.split("=")[0],j=j.trim().replace(ee,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function le(j,I){I=I||1/0;for(var N,Q=j.length,ce=null,pe=[],he=0;he<Q;++he){if(N=j.charCodeAt(he),N>55295&&N<57344){if(!ce){if(N>56319){(I-=3)>-1&&pe.push(239,191,189);continue}else if(he+1===Q){(I-=3)>-1&&pe.push(239,191,189);continue}ce=N;continue}if(N<56320){(I-=3)>-1&&pe.push(239,191,189),ce=N;continue}N=(ce-55296<<10|N-56320)+65536}else ce&&(I-=3)>-1&&pe.push(239,191,189);if(ce=null,N<128){if((I-=1)<0)break;pe.push(N)}else if(N<2048){if((I-=2)<0)break;pe.push(N>>6|192,N&63|128)}else if(N<65536){if((I-=3)<0)break;pe.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((I-=4)<0)break;pe.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return pe}function me(j){for(var I=[],N=0;N<j.length;++N)I.push(j.charCodeAt(N)&255);return I}function ve(j,I){for(var N,Q,ce,pe=[],he=0;he<j.length&&!((I-=2)<0);++he)N=j.charCodeAt(he),Q=N>>8,ce=N%256,pe.push(ce),pe.push(Q);return pe}function Pe(j){return e.toByteArray(ne(j))}function Ue(j,I,N,Q){for(var ce=0;ce<Q&&!(ce+N>=I.length||ce>=j.length);++ce)I[ce+N]=j[ce];return ce}function M(j,I){return j instanceof I||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===I.name}function V(j){return j!==j}var oe=function(){for(var j="0123456789abcdef",I=new Array(256),N=0;N<16;++N)for(var Q=N*16,ce=0;ce<16;++ce)I[Q+ce]=j[N]+j[ce];return I}()})(la);let _2=null;var Jj=function(){return _2===null&&(_2={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),_2},bw={},NC={};const b2=Yu,Ete=new Set(["buffer","view","utf8"]);let Ate=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Ete.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new b2(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new b2(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new b2(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};NC.Encoding=Ate;const{Buffer:BC}=la||{},{Encoding:FC}=NC,Ste=Jj;let MC=class extends FC{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new jC({encode:this.encode,decode:e=>this.decode(BC.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},jC=class extends FC{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new MC({encode:e=>{const r=this.encode(e);return BC.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Tte=class extends FC{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new MC({encode:e=>BC.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:r}=Ste();return new jC({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};bw.BufferFormat=MC;bw.ViewFormat=jC;bw.UTF8Format=Tte;const{Buffer:Qi}=la||{Buffer:{isBuffer:()=>!1}},{textEncoder:Xj,textDecoder:kR}=Jj(),{BufferFormat:Ew,ViewFormat:UC,UTF8Format:Zj}=bw,pE=t=>t;Pp.utf8=new Zj({encode:function(t){return Qi.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?kR.decode(t):String(t)},decode:pE,name:"utf8",createViewTranscoder(){return new UC({encode:function(t){return ArrayBuffer.isView(t)?t:Xj.encode(t)},decode:function(t){return kR.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Ew({encode:function(t){return Qi.isBuffer(t)?t:ArrayBuffer.isView(t)?Qi.from(t.buffer,t.byteOffset,t.byteLength):Qi.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Pp.json=new Zj({encode:JSON.stringify,decode:JSON.parse,name:"json"});Pp.buffer=new Ew({encode:function(t){return Qi.isBuffer(t)?t:ArrayBuffer.isView(t)?Qi.from(t.buffer,t.byteOffset,t.byteLength):Qi.from(String(t),"utf8")},decode:pE,name:"buffer",createViewTranscoder(){return new UC({encode:function(t){return ArrayBuffer.isView(t)?t:Qi.from(String(t),"utf8")},decode:function(t){return Qi.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Pp.view=new UC({encode:function(t){return ArrayBuffer.isView(t)?t:Xj.encode(t)},decode:pE,name:"view",createBufferTranscoder(){return new Ew({encode:function(t){return Qi.isBuffer(t)?t:ArrayBuffer.isView(t)?Qi.from(t.buffer,t.byteOffset,t.byteLength):Qi.from(String(t),"utf8")},decode:pE,name:`${this.name}+buffer`})}});Pp.hex=new Ew({encode:function(t){return Qi.isBuffer(t)?t:Qi.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Pp.base64=new Ew({encode:function(t){return Qi.isBuffer(t)?t:Qi.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const $R=Yu,mE=Pp,{Encoding:Dte}=NC,{BufferFormat:xte,ViewFormat:Pte,UTF8Format:Cte}=bw,pg=Symbol("formats"),O_=Symbol("encodings"),Ite=new Set(["buffer","view","utf8"]);let kte=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>Ite.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[O_]=new Map,this[pg]=new Set(e);for(const r in mE)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[O_].values()))}encoding(e){let r=this[O_].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=Nte[e],!r)throw new $R(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=$te(e)}const{name:n,format:s}=r;if(!this[pg].has(s))if(this[pg].has("view"))r=r.createViewTranscoder();else if(this[pg].has("buffer"))r=r.createBufferTranscoder();else if(this[pg].has("utf8"))r=r.createUTF8Transcoder();else throw new $R(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const i of[e,n,r.name,r.commonName])this[O_].set(i,r)}return r}};Wj.Transcoder=kte;function $te(t){if(t instanceof Dte)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${Bte++}`;switch(Ote(t)){case"view":return new Pte({...t,name:r});case"utf8":return new Cte({...t,name:r});case"buffer":return new xte({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Ote(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const Rte={binary:mE.buffer,"utf-8":mE.utf8},Nte={...mE,...Rte};let Bte=0;var LC={exports:{}},Um=typeof Reflect=="object"?Reflect:null,OR=Um&&typeof Um.apply=="function"?Um.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},e1;Um&&typeof Um.ownKeys=="function"?e1=Um.ownKeys:Object.getOwnPropertySymbols?e1=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:e1=function(e){return Object.getOwnPropertyNames(e)};function Fte(t){console&&console.warn&&console.warn(t)}var Yj=Number.isNaN||function(e){return e!==e};function jr(){jr.init.call(this)}LC.exports=jr;LC.exports.once=Lte;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var RR=10;function jA(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return RR},set:function(t){if(typeof t!="number"||t<0||Yj(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");RR=t}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Yj(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Qj(t){return t._maxListeners===void 0?jr.defaultMaxListeners:t._maxListeners}jr.prototype.getMaxListeners=function(){return Qj(this)};jr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")OR(u,this,r);else for(var l=u.length,c=iU(u,l),n=0;n<l;++n)OR(c[n],this,r);return!0};function eU(t,e,r,n){var s,i,o;if(jA(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=Qj(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Fte(a)}return t}jr.prototype.addListener=function(e,r){return eU(this,e,r,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(e,r){return eU(this,e,r,!0)};function Mte(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function tU(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=Mte.bind(n);return s.listener=r,n.wrapFn=s,s}jr.prototype.once=function(e,r){return jA(r),this.on(e,tU(this,e,r)),this};jr.prototype.prependOnceListener=function(e,r){return jA(r),this.prependListener(e,tU(this,e,r)),this};jr.prototype.removeListener=function(e,r){var n,s,i,o,a;if(jA(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():jte(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function rU(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Ute(s):iU(s,s.length)}jr.prototype.listeners=function(e){return rU(this,e,!0)};jr.prototype.rawListeners=function(e){return rU(this,e,!1)};jr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nU.call(t,e)};jr.prototype.listenerCount=nU;function nU(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?e1(this._events):[]};function iU(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function jte(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ute(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Lte(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}sU(t,e,i,{once:!0}),e!=="error"&&Kte(t,s,{once:!0})})}function Kte(t,e,r){typeof t.on=="function"&&sU(t,"error",e,r)}function sU(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var UA=LC.exports,By={},Vte=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),NR=Vte;By.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};By.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){NR(()=>e(null,r))}).catch(function(r){NR(()=>e(r))})};var Qu={},Aw={};Aw.getCallback=function(t,e){return typeof t=="function"?t:e};Aw.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:E2}=By,to=Yu,{getOptions:A2,getCallback:BR}=Aw,Lf=Symbol("promise"),Wp=Symbol("callback"),Wa=Symbol("working"),kh=Symbol("handleOne"),Bc=Symbol("handleMany"),S2=Symbol("autoClose"),df=Symbol("finishWork"),$u=Symbol("returnMany"),Nl=Symbol("closing"),mg=Symbol("handleClose"),R_=Symbol("closed"),yg=Symbol("closeCallbacks"),Wd=Symbol("keyEncoding"),ap=Symbol("valueEncoding"),T2=Symbol("abortOnClose"),N_=Symbol("legacy"),D2=Symbol("keys"),x2=Symbol("values"),Bl=Symbol("limit"),Ho=Symbol("count"),B_=Object.freeze({}),qte=()=>{};let FR=!1;class KC{constructor(e,r,n){if(typeof e!="object"||e===null){const s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[R_]=!1,this[yg]=[],this[Wa]=!1,this[Nl]=!1,this[S2]=!1,this[Wp]=null,this[kh]=this[kh].bind(this),this[Bc]=this[Bc].bind(this),this[mg]=this[mg].bind(this),this[Wd]=r[Wd],this[ap]=r[ap],this[N_]=n,this[Bl]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Ho]=0,this[T2]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Ho]}get limit(){return this[Bl]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[N_]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Nl]?this.nextTick(e,new to("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Wa]?this.nextTick(e,new to("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Wa]=!0,this[Wp]=e,this[Ho]>=this[Bl]?this.nextTick(this[kh],null):this._next(this[kh])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=BR(r,n),n=E2(n,Lf),r=A2(r,B_),Number.isInteger(e)?(this[Nl]?this.nextTick(n,new to("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Wa]?this.nextTick(n,new to("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Bl]<1/0&&(e=Math.min(e,this[Bl]-this[Ho])),this[Wa]=!0,this[Wp]=n,e<=0?this.nextTick(this[Bc],null,[]):this._nextv(e,r,this[Bc])),n[Lf]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Lf])}_nextv(e,r,n){const s=[],i=(o,a,u)=>{if(o)return n(o);if(this[N_]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[N_]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=BR(e,r),r=E2(r,Lf),e=A2(e,B_),this[Nl]?this.nextTick(r,new to("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Wa]?this.nextTick(r,new to("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Wa]=!0,this[Wp]=r,this[S2]=!0,this[Ho]>=this[Bl]?this.nextTick(this[Bc],null,[]):this._all(e,this[Bc])),r[Lf]}_all(e,r){let n=this[Ho];const s=[],i=()=>{const a=this[Bl]<1/0?Math.min(1e3,this[Bl]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,B_,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[df](){const e=this[Wp];return this[T2]&&e===null?qte:(this[Wa]=!1,this[Wp]=null,this[Nl]&&this._close(this[mg]),e)}[$u](e,r,n){this[S2]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=A2(r,B_),!this[Nl]){if(this[Wa])throw new to("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[Wd]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});const i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new to("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=E2(e,Lf),this[R_]?this.nextTick(e):this[Nl]?this[yg].push(e):(this[Nl]=!0,this[yg].push(e),this[Wa]?this[T2]&&this[df]()(new to("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[mg])),e[Lf]}_close(e){this.nextTick(e)}[mg](){this[R_]=!0,this.db.detachResource(this);const e=this[yg];this[yg]=[];for(const r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[R_]||await this.close()}}}let LA=class extends KC{constructor(e,r){super(e,r,!0),this[D2]=r.keys!==!1,this[x2]=r.values!==!1}[kh](e,r,n){const s=this[df]();if(e)return s(e);try{r=this[D2]&&r!==void 0?this[Wd].decode(r):void 0,n=this[x2]&&n!==void 0?this[ap].decode(n):void 0}catch(i){return s(new iy("entry",i))}r===void 0&&n===void 0||this[Ho]++,s(null,r,n)}[Bc](e,r){const n=this[df]();if(e)return this[$u](n,e);try{for(const s of r){const i=s[0],o=s[1];s[0]=this[D2]&&i!==void 0?this[Wd].decode(i):void 0,s[1]=this[x2]&&o!==void 0?this[ap].decode(o):void 0}}catch(s){return this[$u](n,new iy("entries",s))}this[Ho]+=r.length,this[$u](n,null,r)}end(e){return!FR&&typeof console<"u"&&(FR=!0,console.warn(new to("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Hte=class extends KC{constructor(e,r){super(e,r,!1)}[kh](e,r){const n=this[df]();if(e)return n(e);try{r=r!==void 0?this[Wd].decode(r):void 0}catch(s){return n(new iy("key",s))}r!==void 0&&this[Ho]++,n(null,r)}[Bc](e,r){const n=this[df]();if(e)return this[$u](n,e);try{for(let s=0;s<r.length;s++){const i=r[s];r[s]=i!==void 0?this[Wd].decode(i):void 0}}catch(s){return this[$u](n,new iy("keys",s))}this[Ho]+=r.length,this[$u](n,null,r)}},zte=class extends KC{constructor(e,r){super(e,r,!1)}[kh](e,r){const n=this[df]();if(e)return n(e);try{r=r!==void 0?this[ap].decode(r):void 0}catch(s){return n(new iy("value",s))}r!==void 0&&this[Ho]++,n(null,r)}[Bc](e,r){const n=this[df]();if(e)return this[$u](n,e);try{for(let s=0;s<r.length;s++){const i=r[s];r[s]=i!==void 0?this[ap].decode(i):void 0}}catch(s){return this[$u](n,new iy("values",s))}this[Ho]+=r.length,this[$u](n,null,r)}};class iy extends to{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(LA.prototype,t.split(" ")[0],{get(){throw new to(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new to(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});LA.keyEncoding=Wd;LA.valueEncoding=ap;Qu.AbstractIterator=LA;Qu.AbstractKeyIterator=Hte;Qu.AbstractValueIterator=zte;var VC={};const{AbstractKeyIterator:Wte,AbstractValueIterator:Gte}=Qu,Ah=Symbol("iterator"),gg=Symbol("callback"),sy=Symbol("handleOne"),zh=Symbol("handleMany");let rx=class extends Wte{constructor(e,r){super(e,r),this[Ah]=e.iterator({...r,keys:!0,values:!1}),this[sy]=this[sy].bind(this),this[zh]=this[zh].bind(this)}},oU=class extends Gte{constructor(e,r){super(e,r),this[Ah]=e.iterator({...r,keys:!1,values:!0}),this[sy]=this[sy].bind(this),this[zh]=this[zh].bind(this)}};for(const t of[rx,oU]){const e=t===rx,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[gg]=n,this[Ah].next(this[sy])},t.prototype[sy]=function(n,s,i){const o=this[gg];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[gg]=i,this[Ah].nextv(n,s,this[zh])},t.prototype._all=function(n,s){this[gg]=s,this[Ah].all(n,this[zh])},t.prototype[zh]=function(n,s){const i=this[gg];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[Ah].seek(n,s)},t.prototype._close=function(n){this[Ah].close(n)}}VC.DefaultKeyIterator=rx;VC.DefaultValueIterator=oU;var KA={};const{AbstractIterator:Jte,AbstractKeyIterator:Xte,AbstractValueIterator:Zte}=Qu,P2=Yu,ks=Symbol("nut"),VA=Symbol("undefer"),qA=Symbol("factory");let aU=class extends Jte{constructor(e,r){super(e,r),this[ks]=null,this[qA]=()=>e.iterator(r),this.db.defer(()=>this[VA]())}},uU=class extends Xte{constructor(e,r){super(e,r),this[ks]=null,this[qA]=()=>e.keys(r),this.db.defer(()=>this[VA]())}},cU=class extends Zte{constructor(e,r){super(e,r),this[ks]=null,this[qA]=()=>e.values(r),this.db.defer(()=>this[VA]())}};for(const t of[aU,uU,cU])t.prototype[VA]=function(){this.db.status==="open"&&(this[ks]=this[qA]())},t.prototype._next=function(e){this[ks]!==null?this[ks].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new P2("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[ks]!==null?this[ks].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new P2("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[ks]!==null?this[ks].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new P2("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[ks]!==null?this[ks]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[ks]!==null?this[ks].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};KA.DeferredIterator=aU;KA.DeferredKeyIterator=uU;KA.DeferredValueIterator=cU;var lU={},qC={};const{fromCallback:MR}=By,F_=Yu,{getCallback:Yte,getOptions:Qte}=Aw,M_=Symbol("promise"),Do=Symbol("status"),Gp=Symbol("operations"),vg=Symbol("finishClose"),Jp=Symbol("closeCallbacks");let ere=class{constructor(e){if(typeof e!="object"||e===null){const r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Gp]=[],this[Jp]=[],this[Do]="open",this[vg]=this[vg].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Gp].length}put(e,r,n){if(this[Do]!=="open")throw new F_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;const i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),l=a.format;n={...n,keyEncoding:l,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);const c=i.prefixKey(a.encode(e),l),d=u.encode(r);return this._put(c,d,n),this[Gp].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[Do]!=="open")throw new F_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[Gp].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[Do]!=="open")throw new F_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Gp]=[],this}_clear(){}write(e,r){return r=Yte(e,r),r=MR(r,M_),e=Qte(e),this[Do]!=="open"?this.nextTick(r,new F_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[Do]="writing",this._write(e,n=>{this[Do]="closing",this[Jp].push(()=>r(n)),n||this.db.emit("batch",this[Gp]),this._close(this[vg])})),r[M_]}_write(e,r){}close(e){return e=MR(e,M_),this[Do]==="closing"?this[Jp].push(e):this[Do]==="closed"?this.nextTick(e):(this[Jp].push(e),this[Do]!=="writing"&&(this[Do]="closing",this._close(this[vg]))),e[M_]}_close(e){this.nextTick(e)}[vg](){this[Do]="closed",this.db.detachResource(this);const e=this[Jp];this[Jp]=[];for(const r of e)r()}};qC.AbstractChainedBatch=ere;const{AbstractChainedBatch:tre}=qC,rre=Yu,Xp=Symbol("encoded");let nre=class extends tre{constructor(e){super(e),this[Xp]=[]}_put(e,r,n){this[Xp].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Xp].push({...r,type:"del",key:e})}_clear(){this[Xp]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Xp].length===0?this.nextTick(r):this.db._batch(this[Xp],e,r):this.nextTick(r,new rre("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};lU.DefaultChainedBatch=nre;const jR=Yu,ire=Object.prototype.hasOwnProperty,sre=new Set(["lt","lte","gt","gte"]);var ore=function(t,e){const r={};for(const n in t)if(ire.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new jR(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new jR("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});sre.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let UR;var dU=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ar):t=>(UR||(UR=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),C2,LR;function are(){if(LR)return C2;LR=1;const t=dU;return C2=function(e,...r){r.length===0?t(e):t(()=>e(...r))},C2}var wg={},KR;function ure(){if(KR)return wg;KR=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=Qu,n=Symbol("unfix"),s=Symbol("iterator"),i=Symbol("handleOne"),o=Symbol("handleMany"),a=Symbol("callback");class u extends t{constructor(h,f,p,m){super(h,f),this[s]=p,this[n]=m,this[i]=this[i].bind(this),this[o]=this[o].bind(this),this[a]=null}[i](h,f,p){const m=this[a];if(h)return m(h);f!==void 0&&(f=this[n](f)),m(h,f,p)}[o](h,f){const p=this[a];if(h)return p(h);for(const m of f){const E=m[0];E!==void 0&&(m[0]=this[n](E))}p(h,f)}}class l extends e{constructor(h,f,p,m){super(h,f),this[s]=p,this[n]=m,this[i]=this[i].bind(this),this[o]=this[o].bind(this),this[a]=null}[i](h,f){const p=this[a];if(h)return p(h);f!==void 0&&(f=this[n](f)),p(h,f)}[o](h,f){const p=this[a];if(h)return p(h);for(let m=0;m<f.length;m++){const E=f[m];E!==void 0&&(f[m]=this[n](E))}p(h,f)}}class c extends r{constructor(h,f,p){super(h,f),this[s]=p}}for(const d of[u,l])d.prototype._next=function(h){this[a]=h,this[s].next(this[i])},d.prototype._nextv=function(h,f,p){this[a]=p,this[s].nextv(h,f,this[o])},d.prototype._all=function(h,f){this[a]=f,this[s].all(h,this[o])};for(const d of[c])d.prototype._next=function(h){this[s].next(h)},d.prototype._nextv=function(h,f,p){this[s].nextv(h,f,p)},d.prototype._all=function(h,f){this[s].all(h,f)};for(const d of[u,l,c])d.prototype._seek=function(h,f){this[s].seek(h,f)},d.prototype._close=function(h){this[s].close(h)};return wg.AbstractSublevelIterator=u,wg.AbstractSublevelKeyIterator=l,wg.AbstractSublevelValueIterator=c,wg}var I2,VR;function cre(){if(VR)return I2;VR=1;const t=Yu,{Buffer:e}=la||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:s}=ure(),i=Symbol("prefix"),o=Symbol("upperBound"),a=Symbol("prefixRange"),u=Symbol("parent"),l=Symbol("unfix"),c=new TextEncoder,d={separator:"!"};I2=function({AbstractLevel:A}){class _ extends A{static defaults(v){if(typeof v=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(v&&v.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return v==null?d:v.separator?v:{...v,separator:"!"}}constructor(v,S,x){const{separator:D,manifest:w,...b}=_.defaults(x);S=E(S,D);const T=D.charCodeAt(0)+1,P=v[u]||v;if(!c.encode(S).every(K=>K>T&&K<127))throw new t(`Prefix must use bytes > ${T} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(h(P,w),b);const C=(v.prefix||"")+D+S+D,k=C.slice(0,-1)+String.fromCharCode(T);this[u]=P,this[i]=new p(C),this[o]=new p(k),this[l]=new m,this.nextTick=P.nextTick}prefixKey(v,S){if(S==="utf8")return this[i].utf8+v;if(v.byteLength===0)return this[i][S];if(S==="view"){const x=this[i].view,D=new Uint8Array(x.byteLength+v.byteLength);return D.set(x,0),D.set(v,x.byteLength),D}else{const x=this[i].buffer;return e.concat([x,v],x.byteLength+v.byteLength)}}[a](v,S){v.gte!==void 0?v.gte=this.prefixKey(v.gte,S):v.gt!==void 0?v.gt=this.prefixKey(v.gt,S):v.gte=this[i][S],v.lte!==void 0?v.lte=this.prefixKey(v.lte,S):v.lt!==void 0?v.lt=this.prefixKey(v.lt,S):v.lte=this[o][S]}get prefix(){return this[i].utf8}get db(){return this[u]}_open(v,S){this[u].open({passive:!0},S)}_put(v,S,x,D){this[u].put(v,S,x,D)}_get(v,S,x){this[u].get(v,S,x)}_getMany(v,S,x){this[u].getMany(v,S,x)}_del(v,S,x){this[u].del(v,S,x)}_batch(v,S,x){this[u].batch(v,S,x)}_clear(v,S){this[a](v,v.keyEncoding),this[u].clear(v,S)}_iterator(v){this[a](v,v.keyEncoding);const S=this[u].iterator(v),x=this[l].get(this[i].utf8.length,v.keyEncoding);return new r(this,v,S,x)}_keys(v){this[a](v,v.keyEncoding);const S=this[u].keys(v),x=this[l].get(this[i].utf8.length,v.keyEncoding);return new n(this,v,S,x)}_values(v){this[a](v,v.keyEncoding);const S=this[u].values(v);return new s(this,v,S)}}return{AbstractSublevel:_}};const h=function(A,_){return{...A.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},..._,encodings:{utf8:f(A,"utf8"),buffer:f(A,"buffer"),view:f(A,"view")}}},f=function(A,_){return A.supports.encodings[_]?A.keyEncoding(_).name===_:!1};class p{constructor(_){this.utf8=_,this.view=c.encode(_),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class m{constructor(){this.cache=new Map}get(_,g){let v=this.cache.get(g);return v===void 0&&(g==="view"?v=(function(S,x){return x.subarray(S)}).bind(null,_):v=(function(S,x){return x.slice(S)}).bind(null,_),this.cache.set(g,v)),v}}const E=function(A,_){let g=0,v=A.length;for(;g<v&&A[g]===_;)g++;for(;v>g&&A[v-1]===_;)v--;return A.slice(g,v)};return I2}const{supports:lre}=zj,{Transcoder:dre}=Wj,{EventEmitter:fre}=UA,{fromCallback:Fl}=By,ga=Yu,{AbstractIterator:Kf}=Qu,{DefaultKeyIterator:hre,DefaultValueIterator:pre}=VC,{DeferredIterator:mre,DeferredKeyIterator:yre,DeferredValueIterator:gre}=KA,{DefaultChainedBatch:qR}=lU,{getCallback:Vf,getOptions:Ml}=Aw,j_=ore,Vt=Symbol("promise"),cc=Symbol("landed"),qf=Symbol("resources"),k2=Symbol("closeResources"),_g=Symbol("operations"),bg=Symbol("undefer"),U_=Symbol("deferOpen"),HR=Symbol("options"),nr=Symbol("status"),Hf=Symbol("defaultOptions"),Zp=Symbol("transcoder"),L_=Symbol("keyEncoding"),$2=Symbol("valueEncoding"),vre=()=>{};let HC=class extends fre{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Ml(r);const{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[qf]=new Set,this[_g]=[],this[U_]=!0,this[HR]=o,this[nr]="opening",this.supports=lre(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Zp]=new dre(wre(this)),this[L_]=this[Zp].encoding(n||"utf8"),this[$2]=this[Zp].encoding(s||"utf8");for(const a of this[Zp].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[Hf]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[L_].commonName,valueEncoding:this[$2].commonName}),key:Object.freeze({keyEncoding:this[L_].commonName})},this.nextTick(()=>{this[U_]&&this.open({passive:!1},vre)})}get status(){return this[nr]}keyEncoding(e){return this[Zp].encoding(e??this[L_])}valueEncoding(e){return this[Zp].encoding(e??this[$2])}open(e,r){r=Vf(e,r),r=Fl(r,Vt),e={...this[HR],...Ml(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=s=>{this[nr]==="closing"||this[nr]==="opening"?this.once(cc,s?()=>n(s):n):this[nr]!=="open"?r(new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[nr]==="opening"?this.once(cc,n):this.nextTick(n):this[nr]==="closed"||this[U_]?(this[U_]=!1,this[nr]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[nr]="closed",this[k2](()=>{this.emit(cc),n(s)}),this[bg]();return}this[nr]="open",this[bg](),this.emit(cc),this[nr]==="open"&&this.emit("open"),this[nr]==="open"&&this.emit("ready"),n()})):this[nr]==="open"?this.nextTick(n):this.once(cc,()=>this.open(e,r)),r[Vt]}_open(e,r){this.nextTick(r)}close(e){e=Fl(e,Vt);const r=n=>{this[nr]==="opening"||this[nr]==="closing"?this.once(cc,n?r(n):r):this[nr]!=="closed"?e(new ga("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[nr]==="open"){this[nr]="closing",this.emit("closing");const n=s=>{this[nr]="open",this[bg](),this.emit(cc),r(s)};this[k2](()=>{this._close(s=>{if(s)return n(s);this[nr]="closed",this[bg](),this.emit(cc),this[nr]==="closed"&&this.emit("closed"),r()})})}else this[nr]==="closed"?this.nextTick(r):this.once(cc,()=>this.close(e));return e[Vt]}[k2](e){if(this[qf].size===0)return this.nextTick(e);let r=this[qf].size,n=!0;const s=()=>{--r===0&&(n?this.nextTick(e):e())};for(const i of this[qf])i.close(s);n=!1,this[qf].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=Vf(r,n),n=Fl(n,Vt),r=Ml(r,this[Hf].entry),this[nr]==="opening")return this.defer(()=>this.get(e,r,n)),n[Vt];if(Yp(this,n))return n[Vt];const s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Vt];const i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(l,c)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{c=o.decode(c)}catch(d){return n(new ga("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,c)}),n[Vt]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=Vf(r,n),n=Fl(n,Vt),r=Ml(r,this[Hf].entry),this[nr]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Vt];if(Yp(this,n))return n[Vt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Vt];if(e.length===0)return this.nextTick(n,null,[]),n[Vt];const s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));const u=new Array(e.length);for(let l=0;l<e.length;l++){const c=e[l],d=this._checkKey(c);if(d)return this.nextTick(n,d),n[Vt];u[l]=this.prefixKey(s.encode(c),o)}return this._getMany(u,r,(l,c)=>{if(l)return n(l);try{for(let d=0;d<c.length;d++)c[d]!==void 0&&(c[d]=i.decode(c[d]))}catch(d){return n(new ga(`Could not decode one or more of ${c.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,c)}),n[Vt]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=Vf(n,s),s=Fl(s,Vt),n=Ml(n,this[Hf].entry),this[nr]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[Vt];if(Yp(this,s))return s[Vt];const i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[Vt];const o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,l=a.format;(n.keyEncoding!==u||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:l}));const c=this.prefixKey(o.encode(e),u),d=a.encode(r);return this._put(c,d,n,h=>{if(h)return s(h);this.emit("put",e,r),s()}),s[Vt]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=Vf(r,n),n=Fl(n,Vt),r=Ml(r,this[Hf].key),this[nr]==="opening")return this.defer(()=>this.del(e,r,n)),n[Vt];if(Yp(this,n))return n[Vt];const s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Vt];const i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[Vt]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[nr]==="opening")return new qR(this);if(this[nr]!=="open")throw new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Vf(r,n),n=Fl(n,Vt),r=Ml(r,this[Hf].empty),this[nr]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Vt];if(Yp(this,n))return n[Vt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Vt];if(e.length===0)return this.nextTick(n),n[Vt];const s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Vt];const l=Object.assign({},e[u]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Vt];const c=this._checkKey(l.key);if(c)return this.nextTick(n,c),n[Vt];const d=l.sublevel!=null?l.sublevel:this,h=d.keyEncoding(l.keyEncoding||i),f=h.format;if(l.key=d.prefixKey(h.encode(l.key),f),l.keyEncoding=f,l.type==="put"){const p=this._checkValue(l.value);if(p)return this.nextTick(n,p),n[Vt];const m=d.valueEncoding(l.valueEncoding||o);l.value=m.encode(l.value),l.valueEncoding=m.format}d!==this&&(l.sublevel=null),s[u]=l}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[Vt]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,nx.defaults(r))}_sublevel(e,r){return new nx(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=Vf(e,r),r=Fl(r,Vt),e=Ml(e,this[Hf].empty),this[nr]==="opening")return this.defer(()=>this.clear(e,r)),r[Vt];if(Yp(this,r))return r[Vt];const n=e,s=this.keyEncoding(e.keyEncoding);return e=j_(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[Vt]}_clear(e,r){this.nextTick(r)}iterator(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=j_(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Kf.keyEncoding]=r,e[Kf.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[nr]==="opening")return new mre(this,e);if(this[nr]!=="open")throw new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Kf(this,e)}keys(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=j_(e,r),e[Kf.keyEncoding]=r,e[Kf.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[nr]==="opening")return new yre(this,e);if(this[nr]!=="open")throw new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new hre(this,e)}values(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=j_(e,r),e[Kf.keyEncoding]=r,e[Kf.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[nr]==="opening")return new gre(this,e);if(this[nr]!=="open")throw new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new pre(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[_g].push(e)}[bg](){if(this[_g].length===0)return;const e=this[_g];this[_g]=[];for(const r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[qf].add(e)}detachResource(e){this[qf].delete(e)}_chainedBatch(){return new qR(this)}_checkKey(e){if(e==null)return new ga("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ga("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};HC.prototype.nextTick=are();const{AbstractSublevel:nx}=cre()({AbstractLevel:HC});FA.AbstractLevel=HC;FA.AbstractSublevel=nx;const Yp=function(t,e){return t[nr]!=="open"?(t.nextTick(e,new ga("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},wre=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};Ef.AbstractLevel=FA.AbstractLevel;Ef.AbstractSublevel=FA.AbstractSublevel;Ef.AbstractIterator=Qu.AbstractIterator;Ef.AbstractKeyIterator=Qu.AbstractKeyIterator;Ef.AbstractValueIterator=Qu.AbstractValueIterator;Ef.AbstractChainedBatch=qC.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var _re=Ere;const bre=dU;function Ere(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,l;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function c(h){function f(){r&&r(h,n),r=null}u?bre(f):f()}function d(h,f,p){if(n[h]=p,f&&(a=!0),--i===0||f)c(f);else if(!a&&l<s){let m;o?(m=o[l],l+=1,t[m](function(E,A){d(m,E,A)})):(m=l,l+=1,t[m](function(E,A){d(m,E,A)}))}}l=e,i?o?o.some(function(h,f){return t[h](function(p,m){d(h,p,m)}),f===e-1}):t.some(function(h,f){return h(function(p,m){d(f,p,m)}),f===e-1}):c(null),u=!1}var fU={},hU=function(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null};const Are=new TextEncoder;var pU=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Are.encode(t)};const{AbstractIterator:Sre}=Ef,zR=hU,K_=pU,Ga=Symbol("cache"),lc=Symbol("finished"),Js=Symbol("options"),dc=Symbol("currentOptions"),zf=Symbol("position"),O2=Symbol("location"),Qp=Symbol("first"),WR={};let Tre=class extends Sre{constructor(e,r,n){super(e,n),this[Ga]=[],this[lc]=this.limit===0,this[Js]=n,this[dc]={...n},this[zf]=void 0,this[O2]=r,this[Qp]=!0}_nextv(e,r,n){if(this[Qp]=!1,this[lc])return this.nextTick(n,null,[]);if(this[Ga].length>0)return e=Math.min(e,this[Ga].length),this.nextTick(n,null,this[Ga].splice(0,e));this[zf]!==void 0&&(this[Js].reverse?(this[dc].lt=this[zf],this[dc].lte=void 0):(this[dc].gt=this[zf],this[dc].gte=void 0));let s;try{s=zR(this[dc])}catch{return this[lc]=!0,this.nextTick(n,null,[])}const i=this.db.db.transaction([this[O2]],"readonly"),o=i.objectStore(this[O2]),a=[];if(this[Js].reverse){const u=!this[Js].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=l=>{const c=l.target.result;if(c){const{key:d,value:h}=c;this[zf]=d,a.push([this[Js].keys&&d!==void 0?K_(d):void 0,this[Js].values&&h!==void 0?K_(h):void 0]),a.length<e?c.continue():GR(i)}else this[lc]=!0}}else{let u,l;const c=()=>{if(u===void 0||l===void 0)return;const d=Math.max(u.length,l.length);d===0||e===1/0?this[lc]=!0:this[zf]=u[d-1],a.length=d;for(let h=0;h<d;h++){const f=u[h],p=l[h];a[h]=[this[Js].keys&&f!==void 0?K_(f):void 0,this[Js].values&&p!==void 0?K_(p):void 0]}GR(i)};this[Js].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,c()}:(u=[],this.nextTick(c)),this[Js].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{l=d.target.result,c()}:(l=[],this.nextTick(c))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[Ga].length>0){const[r,n]=this[Ga].shift();this.nextTick(e,null,r,n)}else if(this[lc])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Qp]&&(this[Qp]=!1,r=1),this._nextv(r,WR,(n,s)=>{if(n)return e(n);this[Ga]=s,this._next(e)})}}_all(e,r){this[Qp]=!1;const n=this[Ga].splice(0,this[Ga].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,WR,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Qp]=!0,this[Ga]=[],this[lc]=!1,this[zf]=void 0,this[dc]={...this[Js]};let n;try{n=zR(this[Js])}catch{this[lc]=!0;return}n!==null&&!n.includes(e)?this[lc]=!0:this[Js].reverse?this[dc].lte=e:this[dc].gte=e}};fU.Iterator=Tre;function GR(t){typeof t.commit=="function"&&t.commit()}var Dre=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);const o=e.db.transaction([r],"readwrite"),a=o.objectStore(r);let u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};const l=a.openKeyCursor?"openKeyCursor":"openCursor",c=s.reverse?"prev":"next";a[l](n,c).onsuccess=function(d){const h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&h.continue()})}};const{AbstractLevel:xre}=Ef,JR=Yu,Pre=_re,{fromCallback:Cre}=By,{Iterator:Ire}=fU,XR=pU,kre=Dre,$re=hU,mU="level-js-",Eg=Symbol("idb"),R2=Symbol("namePrefix"),fc=Symbol("location"),N2=Symbol("version"),Wf=Symbol("store"),Ag=Symbol("onComplete"),ZR=Symbol("promise");class Ore extends xre{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new JR("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[fc]=e,this[R2]=s??mU,this[N2]=parseInt(i||1,10),this[Eg]=null}get location(){return this[fc]}get namePrefix(){return this[R2]}get version(){return this[N2]}get db(){return this[Eg]}get type(){return"browser-level"}_open(e,r){const n=indexedDB.open(this[R2]+this[fc],this[N2]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Eg]=n.result,r()},n.onupgradeneeded=s=>{const i=s.target.result;i.objectStoreNames.contains(this[fc])||i.createObjectStore(this[fc])}}[Wf](e){return this[Eg].transaction([this[fc]],e).objectStore(this[fc])}[Ag](e,r){const n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){const s=this[Wf]("readonly");let i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[Ag](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new JR("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,XR(a))})}_getMany(e,r,n){const s=this[Wf]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(l){return a(l)}u.onsuccess=()=>{const l=u.result;a(null,l===void 0?l:XR(l))},u.onerror=l=>{l.stopPropagation(),a(u.error)}});Pre(i,16,n)}_del(e,r,n){const s=this[Wf]("readwrite");let i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[Ag](i,n)}_put(e,r,n,s){const i=this[Wf]("readwrite");let o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[Ag](o,s)}_iterator(e){return new Ire(this,this[fc],e)}_batch(e,r,n){const s=this[Wf]("readwrite"),i=s.transaction;let o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){const l=e[o++],c=l.key;let d;try{d=l.type==="del"?s.delete(c):s.put(l.value,c)}catch(h){a=h,i.abort();return}o<e.length?d.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=$re(e)}catch{return this.nextTick(r)}if(e.limit>=0)return kre(this,this[fc],n,e,r);try{const i=this[Wf]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[Ag](s,r)}_close(e){this[Eg].close(),this.nextTick(e)}}Ore.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=mU),r=Cre(r,ZR);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[ZR]};var Rre={exports:{}},B2={exports:{}},Gn={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array},yU={exports:{}};(function(t){const e=la,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||e.Blob,s=typeof n<"u"?function(a){return a instanceof n}:function(a){return!1};class i extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let u="";for(let l=0;l<a.length;l++)u+=`    ${a[l].stack}
`;super(u),this.name="AggregateError",this.errors=a}}t.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(o){let a=!1;return function(...u){a||(a=!0,o.apply(this,u))}},createDeferredPromise:function(){let o,a;return{promise:new Promise((l,c)=>{o=l,a=c}),resolve:o,reject:a}},promisify(o){return new Promise((a,u)=>{o((l,...c)=>l?u(l):a(...c))})},debuglog(){return function(){}},format(o,...a){return o.replace(/%([sdifj])/g,function(...[u,l]){const c=a.shift();return l==="f"?c.toFixed(6):l==="j"?JSON.stringify(c):l==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}},types:{isAsyncFunction(o){return o instanceof r},isArrayBufferView(o){return ArrayBuffer.isView(o)}},isBlob:s},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(yU);var bl=yU.exports,zC={},t1={exports:{}},Nre=t1.exports,YR;function WC(){return YR||(YR=1,Object.defineProperty(Nre,"__esModule",{value:!0}),t1.exports=Object.freeze(Object.create(null,{__unenv__:{get:()=>!0}}))),t1.exports}const{format:Bre,inspect:yE,AggregateError:Fre}=bl,Mre=globalThis.AggregateError||Fre,jre=Symbol("kIsNodeError"),Ure=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Lre=/^([A-Z][a-z0-9]*)+$/,Kre="__node_internal_",HA={};function Wh(t,e){if(!t)throw new HA.ERR_INTERNAL_ASSERTION(e)}function QR(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Vre(t,e,r){if(typeof e=="function")return Wh(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return Wh(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Bre(e,...r)}function ji(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(Vre(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[jre]=!0,HA[t]=n}function eN(t){const e=Kre+t.name;return Object.defineProperty(t,"name",{value:e}),t}function qre(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new Mre([e,t],e.message);return r.code=e.code,r}return t||e}let Hre=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new HA.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ji("ERR_ASSERTION","%s",Error);ji("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Wh(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const s=[],i=[],o=[];for(const u of e)Wh(typeof u=="string","All expected entries have to be of type string"),Ure.includes(u)?s.push(u.toLowerCase()):Lre.test(u)?i.push(u):(Wh(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){const u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{const u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{const u=yE(r,{depth:-1});n+=`. Received ${u}`}}else{let u=yE(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);ji("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=yE(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ji("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);ji("ERR_MISSING_ARGS",(...t)=>{Wh(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ji("ERR_OUT_OF_RANGE",(t,e,r)=>{Wh(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=QR(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=QR(n)),n+="n"):n=yE(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ji("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ji("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ji("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ji("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ji("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ji("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ji("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ji("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ji("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ji("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ji("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Vs={AbortError:Hre,aggregateTwoErrors:eN(qre),hideStackFrames:eN,codes:HA};const{ArrayIsArray:GC,ArrayPrototypeIncludes:gU,ArrayPrototypeJoin:vU,ArrayPrototypeMap:zre,NumberIsInteger:JC,NumberIsNaN:Wre,NumberMAX_SAFE_INTEGER:Gre,NumberMIN_SAFE_INTEGER:Jre,NumberParseInt:Xre,ObjectPrototypeHasOwnProperty:Zre,RegExpPrototypeExec:wU,String:Yre,StringPrototypeToUpperCase:Qre,StringPrototypeTrim:ene}=Gn,{hideStackFrames:da,codes:{ERR_SOCKET_BAD_PORT:tne,ERR_INVALID_ARG_TYPE:ws,ERR_INVALID_ARG_VALUE:Fy,ERR_OUT_OF_RANGE:up,ERR_UNKNOWN_SIGNAL:tN}}=Vs,{normalizeEncoding:rne}=bl,{isAsyncFunction:nne,isArrayBufferView:ine}=bl.types,rN={};function sne(t){return t===(t|0)}function one(t){return t===t>>>0}const ane=/^[0-7]+$/,une="must be a 32-bit unsigned integer or an octal string";function cne(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(wU(ane,t)===null)throw new Fy(e,t,une);t=Xre(t,8)}return _U(t,e),t}const lne=da((t,e,r=Jre,n=Gre)=>{if(typeof t!="number")throw new ws(e,"number",t);if(!JC(t))throw new up(e,"an integer",t);if(t<r||t>n)throw new up(e,`>= ${r} && <= ${n}`,t)}),dne=da((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ws(e,"number",t);if(!JC(t))throw new up(e,"an integer",t);if(t<r||t>n)throw new up(e,`>= ${r} && <= ${n}`,t)}),_U=da((t,e,r=!1)=>{if(typeof t!="number")throw new ws(e,"number",t);if(!JC(t))throw new up(e,"an integer",t);const n=r?1:0,s=4294967295;if(t<n||t>s)throw new up(e,`>= ${n} && <= ${s}`,t)});function XC(t,e){if(typeof t!="string")throw new ws(e,"string",t)}function fne(t,e,r=void 0,n){if(typeof t!="number")throw new ws(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Wre(t))throw new up(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const hne=da((t,e,r)=>{if(!gU(r,t)){const s="must be one of: "+vU(zre(r,i=>typeof i=="string"?`'${i}'`:Yre(i)),", ");throw new Fy(e,t,s)}});function bU(t,e){if(typeof t!="boolean")throw new ws(e,"boolean",t)}function F2(t,e,r){return t==null||!Zre(t,e)?r:t[e]}const pne=da((t,e,r=null)=>{const n=F2(r,"allowArray",!1),s=F2(r,"allowFunction",!1);if(!F2(r,"nullable",!1)&&t===null||!n&&GC(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new ws(e,"Object",t)}),mne=da((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ws(e,"a dictionary",t)}),ZC=da((t,e,r=0)=>{if(!GC(t))throw new ws(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new Fy(e,t,n)}});function yne(t,e){ZC(t,e);for(let r=0;r<t.length;r++)XC(t[r],`${e}[${r}]`)}function gne(t,e){ZC(t,e);for(let r=0;r<t.length;r++)bU(t[r],`${e}[${r}]`)}function vne(t,e="signal"){if(XC(t,e),rN[t]===void 0)throw rN[Qre(t)]!==void 0?new tN(t+" (signals must use all capital letters)"):new tN(t)}const wne=da((t,e="buffer")=>{if(!ine(t))throw new ws(e,["Buffer","TypedArray","DataView"],t)});function _ne(t,e){const r=rne(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Fy("encoding",e,`is invalid for data of length ${n}`)}function bne(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ene(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new tne(e,t,r);return t|0}const Ene=da((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ws(e,"AbortSignal",t)}),Ane=da((t,e)=>{if(typeof t!="function")throw new ws(e,"Function",t)}),Sne=da((t,e)=>{if(typeof t!="function"||nne(t))throw new ws(e,"Function",t)}),Tne=da((t,e)=>{if(t!==void 0)throw new ws(e,"undefined",t)});function Dne(t,e,r){if(!gU(r,t))throw new ws(e,`('${vU(r,"|")}')`,t)}const xne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function nN(t,e){if(typeof t>"u"||!wU(xne,t))throw new Fy(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Pne(t){if(typeof t=="string")return nN(t,"hints"),t;if(GC(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const s=t[n];nN(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new Fy("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var zA={isInt32:sne,isUint32:one,parseFileMode:cne,validateArray:ZC,validateStringArray:yne,validateBooleanArray:gne,validateBoolean:bU,validateBuffer:wne,validateDictionary:mne,validateEncoding:_ne,validateFunction:Ane,validateInt32:dne,validateInteger:lne,validateNumber:fne,validateObject:pne,validateOneOf:hne,validatePlainFunction:Sne,validatePort:bne,validateSignalName:vne,validateString:XC,validateUint32:_U,validateUndefined:Tne,validateUnion:Dne,validateAbortSignal:Ene,validateLinkHeaderValue:Pne},YC={exports:{}},EU={exports:{}},xn=EU.exports={},pu,mu;function ix(){throw new Error("setTimeout has not been defined")}function sx(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?pu=setTimeout:pu=ix}catch{pu=ix}try{typeof clearTimeout=="function"?mu=clearTimeout:mu=sx}catch{mu=sx}})();function AU(t){if(pu===setTimeout)return setTimeout(t,0);if((pu===ix||!pu)&&setTimeout)return pu=setTimeout,setTimeout(t,0);try{return pu(t,0)}catch{try{return pu.call(null,t,0)}catch{return pu.call(this,t,0)}}}function Cne(t){if(mu===clearTimeout)return clearTimeout(t);if((mu===sx||!mu)&&clearTimeout)return mu=clearTimeout,clearTimeout(t);try{return mu(t)}catch{try{return mu.call(null,t)}catch{return mu.call(this,t)}}}var Xc=[],Lm=!1,$h,r1=-1;function Ine(){!Lm||!$h||(Lm=!1,$h.length?Xc=$h.concat(Xc):r1=-1,Xc.length&&SU())}function SU(){if(!Lm){var t=AU(Ine);Lm=!0;for(var e=Xc.length;e;){for($h=Xc,Xc=[];++r1<e;)$h&&$h[r1].run();r1=-1,e=Xc.length}$h=null,Lm=!1,Cne(t)}}xn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Xc.push(new TU(t,e)),Xc.length===1&&!Lm&&AU(SU)};function TU(t,e){this.fun=t,this.array=e}TU.prototype.run=function(){this.fun.apply(null,this.array)};xn.title="browser";xn.browser=!0;xn.env={};xn.argv=[];xn.version="";xn.versions={};function El(){}xn.on=El;xn.addListener=El;xn.once=El;xn.off=El;xn.removeListener=El;xn.removeAllListeners=El;xn.emit=El;xn.prependListener=El;xn.prependOnceListener=El;xn.listeners=function(t){return[]};xn.binding=function(t){throw new Error("process.binding is not supported")};xn.cwd=function(){return"/"};xn.chdir=function(t){throw new Error("process.chdir is not supported")};xn.umask=function(){return 0};var Cp=EU.exports;const{Symbol:WA,SymbolAsyncIterator:iN,SymbolIterator:sN,SymbolFor:DU}=Gn,xU=WA("kDestroyed"),PU=WA("kIsErrored"),ox=WA("kIsReadable"),CU=WA("kIsDisturbed"),kne=DU("nodejs.webstream.isClosedPromise"),$ne=DU("nodejs.webstream.controllerErrorFunction");function GA(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function JA(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function One(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ec(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function IU(t){return!!(t&&!ec(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function kU(t){return!!(t&&!ec(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function $U(t){return!!(t&&!ec(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Rne(t){return IU(t)||kU(t)||$U(t)}function Nne(t,e){return t==null?!1:e===!0?typeof t[iN]=="function":e===!1?typeof t[sN]=="function":typeof t[iN]=="function"||typeof t[sN]=="function"}function XA(t){if(!ec(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[xU]||n!=null&&n.destroyed)}function OU(t){if(!JA(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function Bne(t,e){if(!JA(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Fne(t){if(!GA(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function RU(t,e){if(!GA(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function NU(t){return t&&t[ox]!=null?t[ox]:typeof(t==null?void 0:t.readable)!="boolean"?null:XA(t)?!1:GA(t)&&t.readable&&!RU(t)}function BU(t){return typeof(t==null?void 0:t.writable)!="boolean"?null:XA(t)?!1:JA(t)&&t.writable&&!OU(t)}function Mne(t,e){return ec(t)?XA(t)?!0:!((e==null?void 0:e.readable)!==!1&&NU(t)||(e==null?void 0:e.writable)!==!1&&BU(t)):null}function jne(t){var e,r;return ec(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Une(t){var e,r;return ec(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Lne(t){if(!ec(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&FU(t)?t._closed:null}function FU(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function MU(t){return typeof t._sent100=="boolean"&&FU(t)}function Kne(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Vne(t){if(!ec(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&MU(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function qne(t){var e;return!!(t&&((e=t[CU])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Hne(t){var e,r,n,s,i,o,a,u,l,c;return!!(t&&((e=(r=(n=(s=(i=(o=t[PU])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}var Al={kDestroyed:xU,isDisturbed:qne,kIsDisturbed:CU,isErrored:Hne,kIsErrored:PU,isReadable:NU,kIsReadable:ox,kIsClosedPromise:kne,kControllerErrorFunction:$ne,isClosed:Lne,isDestroyed:XA,isDuplexNodeStream:One,isFinished:Mne,isIterable:Nne,isReadableNodeStream:GA,isReadableStream:IU,isReadableEnded:Fne,isReadableFinished:RU,isReadableErrored:Une,isNodeStream:ec,isWebStream:Rne,isWritable:BU,isWritableNodeStream:JA,isWritableStream:kU,isWritableEnded:OU,isWritableFinished:Bne,isWritableErrored:jne,isServerRequest:Kne,isServerResponse:MU,willEmitClose:Vne,isTransformStream:$U};const xd=Cp,{AbortError:jU,codes:zne}=Vs,{ERR_INVALID_ARG_TYPE:Wne,ERR_STREAM_PREMATURE_CLOSE:oN}=zne,{kEmptyObject:ax,once:ux}=bl,{validateAbortSignal:Gne,validateFunction:Jne,validateObject:Xne,validateBoolean:Zne}=zA,{Promise:Yne,PromisePrototypeThen:Qne}=Gn,{isClosed:eie,isReadable:aN,isReadableNodeStream:M2,isReadableStream:tie,isReadableFinished:uN,isReadableErrored:cN,isWritable:lN,isWritableNodeStream:dN,isWritableStream:rie,isWritableFinished:fN,isWritableErrored:hN,isNodeStream:nie,willEmitClose:iie,kIsClosedPromise:sie}=Al;function oie(t){return t.setHeader&&typeof t.abort=="function"}const cx=()=>{};function UU(t,e,r){var n,s;if(arguments.length===2?(r=e,e=ax):e==null?e=ax:Xne(e,"options"),Jne(r,"callback"),Gne(e.signal,"options.signal"),r=ux(r),tie(t)||rie(t))return aie(t,e,r);if(!nie(t))throw new Wne("stream",["ReadableStream","WritableStream","Stream"],t);const i=(n=e.readable)!==null&&n!==void 0?n:M2(t),o=(s=e.writable)!==null&&s!==void 0?s:dN(t),a=t._writableState,u=t._readableState,l=()=>{t.writable||h()};let c=iie(t)&&M2(t)===i&&dN(t)===o,d=fN(t,!1);const h=()=>{d=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||i))&&(!i||f)&&r.call(t)};let f=uN(t,!1);const p=()=>{f=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||o))&&(!o||d)&&r.call(t)},m=S=>{r.call(t,S)};let E=eie(t);const A=()=>{E=!0;const S=hN(t)||cN(t);if(S&&typeof S!="boolean")return r.call(t,S);if(i&&!f&&M2(t,!0)&&!uN(t,!1))return r.call(t,new oN);if(o&&!d&&!fN(t,!1))return r.call(t,new oN);r.call(t)},_=()=>{E=!0;const S=hN(t)||cN(t);if(S&&typeof S!="boolean")return r.call(t,S);r.call(t)},g=()=>{t.req.on("finish",h)};oie(t)?(t.on("complete",h),c||t.on("abort",A),t.req?g():t.on("request",g)):o&&!a&&(t.on("end",l),t.on("close",l)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",A),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",m),t.on("close",A),E?xd.nextTick(A):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?c||xd.nextTick(_):(!i&&(!c||aN(t))&&(d||lN(t)===!1)||!o&&(!c||lN(t))&&(f||aN(t)===!1)||u&&t.req&&t.aborted)&&xd.nextTick(_);const v=()=>{r=cx,t.removeListener("aborted",A),t.removeListener("complete",h),t.removeListener("abort",A),t.removeListener("request",g),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",A)};if(e.signal&&!E){const S=()=>{const x=r;v(),x.call(t,new jU(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)xd.nextTick(S);else{const x=r;r=ux((...D)=>{e.signal.removeEventListener("abort",S),x.apply(t,D)}),e.signal.addEventListener("abort",S)}}return v}function aie(t,e,r){let n=!1,s=cx;if(e.signal)if(s=()=>{n=!0,r.call(t,new jU(void 0,{cause:e.signal.reason}))},e.signal.aborted)xd.nextTick(s);else{const o=r;r=ux((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}const i=(...o)=>{n||xd.nextTick(()=>r.apply(t,o))};return Qne(t[sie].promise,i,i),cx}function uie(t,e){var r;let n=!1;return e===null&&(e=ax),(r=e)!==null&&r!==void 0&&r.cleanup&&(Zne(e.cleanup,"cleanup"),n=e.cleanup),new Yne((s,i)=>{const o=UU(t,e,a=>{n&&o(),a?i(a):s()})})}YC.exports=UU;YC.exports.finished=uie;var Af=YC.exports;const Ou=Cp,{aggregateTwoErrors:cie,codes:{ERR_MULTIPLE_CALLBACK:lie},AbortError:die}=Vs,{Symbol:LU}=Gn,{kDestroyed:fie,isDestroyed:hie,isFinished:pie,isServerRequest:mie}=Al,KU=LU("kDestroy"),lx=LU("kConstruct");function VU(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function yie(t,e){const r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(VU(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?pN(this,t,e):this.once(KU,function(i){pN(this,cie(i,t),e)}),this)}function pN(t,e,r){let n=!1;function s(i){if(n)return;n=!0;const o=t._readableState,a=t._writableState;VU(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Ou.nextTick(gie,t,i):Ou.nextTick(qU,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function gie(t,e){dx(t,e),qU(t)}function qU(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function dx(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function vie(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function fx(t,e,r){const n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?Ou.nextTick(dx,t,e):dx(t,e))}function wie(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(lx,e),!(t.listenerCount(lx)>1)&&Ou.nextTick(_ie,t)}function _ie(t){let e=!1;function r(n){if(e){fx(t,n??new lie);return}e=!0;const s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(KU,n):n?fx(t,n,!0):Ou.nextTick(bie,t)}try{t._construct(n=>{Ou.nextTick(r,n)})}catch(n){Ou.nextTick(r,n)}}function bie(t){t.emit(lx)}function mN(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function HU(t){t.emit("close")}function Eie(t,e){t.emit("error",e),Ou.nextTick(HU,t)}function Aie(t,e){!t||hie(t)||(!e&&!pie(t)&&(e=new die),mie(t)?(t.socket=null,t.destroy(e)):mN(t)?t.abort():mN(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ou.nextTick(Eie,t,e):Ou.nextTick(HU,t),t.destroyed||(t[fie]=!0))}var My={construct:wie,destroyer:Aie,destroy:yie,undestroy:vie,errorOrDestroy:fx};const{ArrayIsArray:Sie,ObjectSetPrototypeOf:zU}=Gn,{EventEmitter:ZA}=UA;function YA(t){ZA.call(this,t)}zU(YA.prototype,ZA.prototype);zU(YA,ZA);YA.prototype.pipe=function(t,e){const r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(c){l(),ZA.listenerCount(this,"error")===0&&this.emit("error",c)}hx(r,"error",u),hx(t,"error",u);function l(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function hx(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Sie(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var QC={Stream:YA,prependListener:hx},WU={exports:{}};(function(t){const{AbortError:e,codes:r}=Vs,{isNodeStream:n,isWebStream:s,kControllerErrorFunction:i}=Al,o=Af,{ERR_INVALID_ARG_TYPE:a}=r,u=(l,c)=>{if(typeof l!="object"||!("aborted"in l))throw new a(c,"AbortSignal",l)};t.exports.addAbortSignal=function(c,d){if(u(c,"signal"),!n(d)&&!s(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return t.exports.addAbortSignalNoValidate(c,d)},t.exports.addAbortSignalNoValidate=function(l,c){if(typeof l!="object"||!("aborted"in l))return c;const d=n(c)?()=>{c.destroy(new e(void 0,{cause:l.reason}))}:()=>{c[i](new e(void 0,{cause:l.reason}))};return l.aborted?d():(l.addEventListener("abort",d),o(c,()=>l.removeEventListener("abort",d))),c}})(WU);var QA=WU.exports;const{StringPrototypeSlice:yN,SymbolIterator:Tie,TypedArrayPrototypeSet:V_,Uint8Array:Die}=Gn,{Buffer:j2}=la,{inspect:xie}=bl;var Pie=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return j2.alloc(0);const r=j2.allocUnsafe(e>>>0);let n=this.head,s=0;for(;n;)V_(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Tie](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{const i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=yN(i,0,e),this.head=n,n.data=yN(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){const r=j2.allocUnsafe(e),n=e;let s=this.head,i=0;do{const o=s.data;if(e>o.length)V_(r,o,n-e),e-=o.length;else{e===o.length?(V_(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(V_(r,new Die(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return xie(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Cie,NumberIsInteger:Iie}=Gn,{ERR_INVALID_ARG_VALUE:kie}=Vs.codes;function $ie(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function GU(t){return t?16:16*1024}function Oie(t,e,r,n){const s=$ie(e,n,r);if(s!=null){if(!Iie(s)||s<0){const i=n?`options.${r}`:"options.highWaterMark";throw new kie(i,s)}return Cie(s)}return GU(t.objectMode)}var eI={getHighWaterMark:Oie,getDefaultHighWaterMark:GU},JU={},px={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=la,n=r.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof u=="string"?l.fill(a,u):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(px,px.exports);var Rie=px.exports,tI=Rie.Buffer,gN=tI.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Nie(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Bie(t){var e=Nie(t);if(typeof e!="string"&&(tI.isEncoding===gN||!gN(t)))throw new Error("Unknown encoding: "+t);return e||t}JU.StringDecoder=Sw;function Sw(t){this.encoding=Bie(t);var e;switch(this.encoding){case"utf16le":this.text=Kie,this.end=Vie,e=4;break;case"utf8":this.fillLast=jie,e=4;break;case"base64":this.text=qie,this.end=Hie,e=3;break;default:this.write=zie,this.end=Wie;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=tI.allocUnsafe(e)}Sw.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Sw.prototype.end=Lie;Sw.prototype.text=Uie;Sw.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function U2(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Fie(t,e,r){var n=e.length-1;if(n<r)return 0;var s=U2(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=U2(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=U2(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function Mie(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function jie(t){var e=this.lastTotal-this.lastNeed,r=Mie(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Uie(t,e){var r=Fie(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Lie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function Kie(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Vie(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function qie(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Hie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function zie(t){return t.toString(this.encoding)}function Wie(t){return t&&t.length?this.write(t):""}const vN=Cp,{PromisePrototypeThen:Gie,SymbolAsyncIterator:wN,SymbolIterator:_N}=Gn,{Buffer:Jie}=la,{ERR_INVALID_ARG_TYPE:Xie,ERR_STREAM_NULL_VALUES:Zie}=Vs.codes;function Yie(t,e,r){let n;if(typeof e=="string"||e instanceof Jie)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[wN])s=!0,n=e[wN]();else if(e&&e[_N])s=!1,n=e[_N]();else throw new Xie("iterable",["Iterable"],e);const i=new t({objectMode:!0,highWaterMark:1,...r});let o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(l,c){Gie(a(l),()=>vN.nextTick(c,l),d=>vN.nextTick(c,d||l))};async function a(l){const c=l!=null,d=typeof n.throw=="function";if(c&&d){const{value:h,done:f}=await n.throw(l);if(await h,f)return}if(typeof n.return=="function"){const{value:h}=await n.return();await h}}async function u(){for(;;){try{const{value:l,done:c}=s?await n.next():n.next();if(c)i.push(null);else{const d=l&&typeof l.then=="function"?await l:l;if(d===null)throw o=!1,new Zie;if(i.push(d))continue;o=!1}}catch(l){i.destroy(l)}break}}return i}var XU=Yie,L2,bN;function eS(){if(bN)return L2;bN=1;const t=Cp,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:s,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:a,Promise:u,SafeSet:l,SymbolAsyncIterator:c,Symbol:d}=Gn;L2=W,W.ReadableState=re;const{EventEmitter:h}=UA,{Stream:f,prependListener:p}=QC,{Buffer:m}=la,{addAbortSignal:E}=QA,A=Af;let _=bl.debuglog("stream",G=>{_=G});const g=Pie,v=My,{getHighWaterMark:S,getDefaultHighWaterMark:x}=eI,{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:C}}=Vs,{validateObject:k}=zA,K=d("kPaused"),{StringDecoder:L}=JU,q=XU;a(W.prototype,f.prototype),a(W,f);const se=()=>{},{errorOrDestroy:X}=v;function re(G,J,ge){typeof ge!="boolean"&&(ge=J instanceof al()),this.objectMode=!!(G&&G.objectMode),ge&&(this.objectMode=this.objectMode||!!(G&&G.readableObjectMode)),this.highWaterMark=G?S(this,G,"readableHighWaterMark",ge):x(!1),this.buffer=new g,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[K]=null,this.errorEmitted=!1,this.emitClose=!G||G.emitClose!==!1,this.autoDestroy=!G||G.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=G&&G.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,G&&G.encoding&&(this.decoder=new L(G.encoding),this.encoding=G.encoding)}function W(G){if(!(this instanceof W))return new W(G);const J=this instanceof al();this._readableState=new re(G,this,J),G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.construct=="function"&&(this._construct=G.construct),G.signal&&!J&&E(G.signal,this)),f.call(this,G),v.construct(this,()=>{this._readableState.needReadable&&me(this,this._readableState)})}W.prototype.destroy=v.destroy,W.prototype._undestroy=v.undestroy,W.prototype._destroy=function(G,J){J(G)},W.prototype[h.captureRejectionSymbol]=function(G){this.destroy(G)},W.prototype.push=function(G,J){return B(this,G,J,!1)},W.prototype.unshift=function(G,J){return B(this,G,J,!0)};function B(G,J,ge,be){_("readableAddChunk",J);const ke=G._readableState;let At;if(ke.objectMode||(typeof J=="string"?(ge=ge||ke.defaultEncoding,ke.encoding!==ge&&(be&&ke.encoding?J=m.from(J,ge).toString(ke.encoding):(J=m.from(J,ge),ge=""))):J instanceof m?ge="":f._isUint8Array(J)?(J=f._uint8ArrayToBuffer(J),ge=""):J!=null&&(At=new w("chunk",["string","Buffer","Uint8Array"],J))),At)X(G,At);else if(J===null)ke.reading=!1,ee(G,ke);else if(ke.objectMode||J&&J.length>0)if(be)if(ke.endEmitted)X(G,new C);else{if(ke.destroyed||ke.errored)return!1;te(G,ke,J,!0)}else if(ke.ended)X(G,new P);else{if(ke.destroyed||ke.errored)return!1;ke.reading=!1,ke.decoder&&!ge?(J=ke.decoder.write(J),ke.objectMode||J.length!==0?te(G,ke,J,!1):me(G,ke)):te(G,ke,J,!1)}else be||(ke.reading=!1,me(G,ke));return!ke.ended&&(ke.length<ke.highWaterMark||ke.length===0)}function te(G,J,ge,be){J.flowing&&J.length===0&&!J.sync&&G.listenerCount("data")>0?(J.multiAwaitDrain?J.awaitDrainWriters.clear():J.awaitDrainWriters=null,J.dataEmitted=!0,G.emit("data",ge)):(J.length+=J.objectMode?1:ge.length,be?J.buffer.unshift(ge):J.buffer.push(ge),J.needReadable&&ne(G)),me(G,J)}W.prototype.isPaused=function(){const G=this._readableState;return G[K]===!0||G.flowing===!1},W.prototype.setEncoding=function(G){const J=new L(G);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;const ge=this._readableState.buffer;let be="";for(const ke of ge)be+=J.write(ke);return ge.clear(),be!==""&&ge.push(be),this._readableState.length=be.length,this};const z=1073741824;function $(G){if(G>z)throw new T("size","<= 1GiB",G);return G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++,G}function F(G,J){return G<=0||J.length===0&&J.ended?0:J.objectMode?1:n(G)?J.flowing&&J.length?J.buffer.first().length:J.length:G<=J.length?G:J.ended?J.length:0}W.prototype.read=function(G){_("read",G),G===void 0?G=NaN:r(G)||(G=s(G,10));const J=this._readableState,ge=G;if(G>J.highWaterMark&&(J.highWaterMark=$(G)),G!==0&&(J.emittedReadable=!1),G===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended))return _("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?ce(this):ne(this),null;if(G=F(G,J),G===0&&J.ended)return J.length===0&&ce(this),null;let be=J.needReadable;if(_("need readable",be),(J.length===0||J.length-G<J.highWaterMark)&&(be=!0,_("length less than watermark",be)),J.ended||J.reading||J.destroyed||J.errored||!J.constructed)be=!1,_("reading, ended or constructing",be);else if(be){_("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0);try{this._read(J.highWaterMark)}catch(At){X(this,At)}J.sync=!1,J.reading||(G=F(ge,J))}let ke;return G>0?ke=Q(G,J):ke=null,ke===null?(J.needReadable=J.length<=J.highWaterMark,G=0):(J.length-=G,J.multiAwaitDrain?J.awaitDrainWriters.clear():J.awaitDrainWriters=null),J.length===0&&(J.ended||(J.needReadable=!0),ge!==G&&J.ended&&ce(this)),ke!==null&&!J.errorEmitted&&!J.closeEmitted&&(J.dataEmitted=!0,this.emit("data",ke)),ke};function ee(G,J){if(_("onEofChunk"),!J.ended){if(J.decoder){const ge=J.decoder.end();ge&&ge.length&&(J.buffer.push(ge),J.length+=J.objectMode?1:ge.length)}J.ended=!0,J.sync?ne(G):(J.needReadable=!1,J.emittedReadable=!0,le(G))}}function ne(G){const J=G._readableState;_("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(_("emitReadable",J.flowing),J.emittedReadable=!0,t.nextTick(le,G))}function le(G){const J=G._readableState;_("emitReadable_",J.destroyed,J.length,J.ended),!J.destroyed&&!J.errored&&(J.length||J.ended)&&(G.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,j(G)}function me(G,J){!J.readingMore&&J.constructed&&(J.readingMore=!0,t.nextTick(ve,G,J))}function ve(G,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0);){const ge=J.length;if(_("maybeReadMore read 0"),G.read(0),ge===J.length)break}J.readingMore=!1}W.prototype._read=function(G){throw new b("_read()")},W.prototype.pipe=function(G,J){const ge=this,be=this._readableState;be.pipes.length===1&&(be.multiAwaitDrain||(be.multiAwaitDrain=!0,be.awaitDrainWriters=new l(be.awaitDrainWriters?[be.awaitDrainWriters]:[]))),be.pipes.push(G),_("pipe count=%d opts=%j",be.pipes.length,J);const At=(!J||J.end!==!1)&&G!==t.stdout&&G!==t.stderr?$r:Ui;be.endEmitted?t.nextTick(At):ge.once("end",At),G.on("unpipe",kt);function kt(rs,ci){_("onunpipe"),rs===ge&&ci&&ci.hasUnpiped===!1&&(ci.hasUnpiped=!0,qs())}function $r(){_("onend"),G.end()}let Wt,cr=!1;function qs(){_("cleanup"),G.removeListener("close",_s),G.removeListener("finish",Hs),Wt&&G.removeListener("drain",Wt),G.removeListener("error",Wr),G.removeListener("unpipe",kt),ge.removeListener("end",$r),ge.removeListener("end",Ui),ge.removeListener("data",Ct),cr=!0,Wt&&be.awaitDrainWriters&&(!G._writableState||G._writableState.needDrain)&&Wt()}function un(){cr||(be.pipes.length===1&&be.pipes[0]===G?(_("false write response, pause",0),be.awaitDrainWriters=G,be.multiAwaitDrain=!1):be.pipes.length>1&&be.pipes.includes(G)&&(_("false write response, pause",be.awaitDrainWriters.size),be.awaitDrainWriters.add(G)),ge.pause()),Wt||(Wt=Pe(ge,G),G.on("drain",Wt))}ge.on("data",Ct);function Ct(rs){_("ondata");const ci=G.write(rs);_("dest.write",ci),ci===!1&&un()}function Wr(rs){if(_("onerror",rs),Ui(),G.removeListener("error",Wr),G.listenerCount("error")===0){const ci=G._writableState||G._readableState;ci&&!ci.errorEmitted?X(G,rs):G.emit("error",rs)}}p(G,"error",Wr);function _s(){G.removeListener("finish",Hs),Ui()}G.once("close",_s);function Hs(){_("onfinish"),G.removeListener("close",_s),Ui()}G.once("finish",Hs);function Ui(){_("unpipe"),ge.unpipe(G)}return G.emit("pipe",ge),G.writableNeedDrain===!0?be.flowing&&un():be.flowing||(_("pipe resume"),ge.resume()),G};function Pe(G,J){return function(){const be=G._readableState;be.awaitDrainWriters===J?(_("pipeOnDrain",1),be.awaitDrainWriters=null):be.multiAwaitDrain&&(_("pipeOnDrain",be.awaitDrainWriters.size),be.awaitDrainWriters.delete(J)),(!be.awaitDrainWriters||be.awaitDrainWriters.size===0)&&G.listenerCount("data")&&G.resume()}}W.prototype.unpipe=function(G){const J=this._readableState,ge={hasUnpiped:!1};if(J.pipes.length===0)return this;if(!G){const ke=J.pipes;J.pipes=[],this.pause();for(let At=0;At<ke.length;At++)ke[At].emit("unpipe",this,{hasUnpiped:!1});return this}const be=e(J.pipes,G);return be===-1?this:(J.pipes.splice(be,1),J.pipes.length===0&&this.pause(),G.emit("unpipe",this,ge),this)},W.prototype.on=function(G,J){const ge=f.prototype.on.call(this,G,J),be=this._readableState;return G==="data"?(be.readableListening=this.listenerCount("readable")>0,be.flowing!==!1&&this.resume()):G==="readable"&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,_("on readable",be.length,be.reading),be.length?ne(this):be.reading||t.nextTick(M,this)),ge},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(G,J){const ge=f.prototype.removeListener.call(this,G,J);return G==="readable"&&t.nextTick(Ue,this),ge},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(G){const J=f.prototype.removeAllListeners.apply(this,arguments);return(G==="readable"||G===void 0)&&t.nextTick(Ue,this),J};function Ue(G){const J=G._readableState;J.readableListening=G.listenerCount("readable")>0,J.resumeScheduled&&J[K]===!1?J.flowing=!0:G.listenerCount("data")>0?G.resume():J.readableListening||(J.flowing=null)}function M(G){_("readable nexttick read 0"),G.read(0)}W.prototype.resume=function(){const G=this._readableState;return G.flowing||(_("resume"),G.flowing=!G.readableListening,V(this,G)),G[K]=!1,this};function V(G,J){J.resumeScheduled||(J.resumeScheduled=!0,t.nextTick(oe,G,J))}function oe(G,J){_("resume",J.reading),J.reading||G.read(0),J.resumeScheduled=!1,G.emit("resume"),j(G),J.flowing&&!J.reading&&G.read(0)}W.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[K]=!0,this};function j(G){const J=G._readableState;for(_("flow",J.flowing);J.flowing&&G.read()!==null;);}W.prototype.wrap=function(G){let J=!1;G.on("data",be=>{!this.push(be)&&G.pause&&(J=!0,G.pause())}),G.on("end",()=>{this.push(null)}),G.on("error",be=>{X(this,be)}),G.on("close",()=>{this.destroy()}),G.on("destroy",()=>{this.destroy()}),this._read=()=>{J&&G.resume&&(J=!1,G.resume())};const ge=o(G);for(let be=1;be<ge.length;be++){const ke=ge[be];this[ke]===void 0&&typeof G[ke]=="function"&&(this[ke]=G[ke].bind(G))}return this},W.prototype[c]=function(){return I(this)},W.prototype.iterator=function(G){return G!==void 0&&k(G,"options"),I(this,G)};function I(G,J){typeof G.read!="function"&&(G=W.wrap(G,{objectMode:!0}));const ge=N(G,J);return ge.stream=G,ge}async function*N(G,J){let ge=se;function be(kt){this===G?(ge(),ge=se):ge=kt}G.on("readable",be);let ke;const At=A(G,{writable:!1},kt=>{ke=kt?D(ke,kt):null,ge(),ge=se});try{for(;;){const kt=G.destroyed?null:G.read();if(kt!==null)yield kt;else{if(ke)throw ke;if(ke===null)return;await new u(be)}}}catch(kt){throw ke=D(ke,kt),ke}finally{(ke||(J==null?void 0:J.destroyOnReturn)!==!1)&&(ke===void 0||G._readableState.autoDestroy)?v.destroyer(G,null):(G.off("readable",be),At())}}i(W.prototype,{readable:{__proto__:null,get(){const G=this._readableState;return!!G&&G.readable!==!1&&!G.destroyed&&!G.errorEmitted&&!G.endEmitted},set(G){this._readableState&&(this._readableState.readable=!!G)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(G){this._readableState&&(this._readableState.destroyed=G)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[K]!==!1},set(G){this[K]=!!G}}}),W._fromList=Q;function Q(G,J){if(J.length===0)return null;let ge;return J.objectMode?ge=J.buffer.shift():!G||G>=J.length?(J.decoder?ge=J.buffer.join(""):J.buffer.length===1?ge=J.buffer.first():ge=J.buffer.concat(J.length),J.buffer.clear()):ge=J.buffer.consume(G,J.decoder),ge}function ce(G){const J=G._readableState;_("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,t.nextTick(pe,J,G))}function pe(G,J){if(_("endReadableNT",G.endEmitted,G.length),!G.errored&&!G.closeEmitted&&!G.endEmitted&&G.length===0){if(G.endEmitted=!0,J.emit("end"),J.writable&&J.allowHalfOpen===!1)t.nextTick(he,J);else if(G.autoDestroy){const ge=J._writableState;(!ge||ge.autoDestroy&&(ge.finished||ge.writable===!1))&&J.destroy()}}}function he(G){G.writable&&!G.writableEnded&&!G.destroyed&&G.end()}W.from=function(G,J){return q(W,G,J)};let Ce;function _e(){return Ce===void 0&&(Ce={}),Ce}return W.fromWeb=function(G,J){return _e().newStreamReadableFromReadableStream(G,J)},W.toWeb=function(G,J){return _e().newReadableStreamFromStreamReadable(G,J)},W.wrap=function(G,J){var ge,be;return new W({objectMode:(ge=(be=G.readableObjectMode)!==null&&be!==void 0?be:G.objectMode)!==null&&ge!==void 0?ge:!0,...J,destroy(ke,At){v.destroyer(G,ke),At(ke)}}).wrap(G)},L2}var K2,EN;function ZU(){if(EN)return K2;EN=1;const t=Cp,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:s,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:a,Symbol:u,SymbolHasInstance:l}=Gn;K2=L,L.WritableState=k;const{EventEmitter:c}=UA,d=QC.Stream,{Buffer:h}=la,f=My,{addAbortSignal:p}=QA,{getHighWaterMark:m,getDefaultHighWaterMark:E}=eI,{ERR_INVALID_ARG_TYPE:A,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:g,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:D,ERR_STREAM_WRITE_AFTER_END:w,ERR_UNKNOWN_ENCODING:b}=Vs.codes,{errorOrDestroy:T}=f;o(L.prototype,d.prototype),o(L,d);function P(){}const C=u("kOnFinished");function k(M,V,oe){typeof oe!="boolean"&&(oe=V instanceof al()),this.objectMode=!!(M&&M.objectMode),oe&&(this.objectMode=this.objectMode||!!(M&&M.writableObjectMode)),this.highWaterMark=M?m(this,M,"writableHighWaterMark",oe):E(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const j=!!(M&&M.decodeStrings===!1);this.decodeStrings=!j,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,V),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,K(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!M||M.emitClose!==!1,this.autoDestroy=!M||M.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[C]=[]}function K(M){M.buffered=[],M.bufferedIndex=0,M.allBuffers=!0,M.allNoop=!0}k.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},s(k.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function L(M){const V=this instanceof al();if(!V&&!n(L,this))return new L(M);this._writableState=new k(M,this,V),M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&p(M.signal,this)),d.call(this,M),f.construct(this,()=>{const oe=this._writableState;oe.writing||$(this,oe),le(this,oe)})}s(L,l,{__proto__:null,value:function(M){return n(this,M)?!0:this!==L?!1:M&&M._writableState instanceof k}}),L.prototype.pipe=function(){T(this,new v)};function q(M,V,oe,j){const I=M._writableState;if(typeof oe=="function")j=oe,oe=I.defaultEncoding;else{if(!oe)oe=I.defaultEncoding;else if(oe!=="buffer"&&!h.isEncoding(oe))throw new b(oe);typeof j!="function"&&(j=P)}if(V===null)throw new D;if(!I.objectMode)if(typeof V=="string")I.decodeStrings!==!1&&(V=h.from(V,oe),oe="buffer");else if(V instanceof h)oe="buffer";else if(d._isUint8Array(V))V=d._uint8ArrayToBuffer(V),oe="buffer";else throw new A("chunk",["string","Buffer","Uint8Array"],V);let N;return I.ending?N=new w:I.destroyed&&(N=new S("write")),N?(t.nextTick(j,N),T(M,N,!0),N):(I.pendingcb++,se(M,I,V,oe,j))}L.prototype.write=function(M,V,oe){return q(this,M,V,oe)===!0},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){const M=this._writableState;M.corked&&(M.corked--,M.writing||$(this,M))},L.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=a(V)),!h.isEncoding(V))throw new b(V);return this._writableState.defaultEncoding=V,this};function se(M,V,oe,j,I){const N=V.objectMode?1:oe.length;V.length+=N;const Q=V.length<V.highWaterMark;return Q||(V.needDrain=!0),V.writing||V.corked||V.errored||!V.constructed?(V.buffered.push({chunk:oe,encoding:j,callback:I}),V.allBuffers&&j!=="buffer"&&(V.allBuffers=!1),V.allNoop&&I!==P&&(V.allNoop=!1)):(V.writelen=N,V.writecb=I,V.writing=!0,V.sync=!0,M._write(oe,j,V.onwrite),V.sync=!1),Q&&!V.errored&&!V.destroyed}function X(M,V,oe,j,I,N,Q){V.writelen=j,V.writecb=Q,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new S("write")):oe?M._writev(I,V.onwrite):M._write(I,N,V.onwrite),V.sync=!1}function re(M,V,oe,j){--V.pendingcb,j(oe),z(V),T(M,oe)}function W(M,V){const oe=M._writableState,j=oe.sync,I=oe.writecb;if(typeof I!="function"){T(M,new g);return}oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0,V?(V.stack,oe.errored||(oe.errored=V),M._readableState&&!M._readableState.errored&&(M._readableState.errored=V),j?t.nextTick(re,M,oe,V,I):re(M,oe,V,I)):(oe.buffered.length>oe.bufferedIndex&&$(M,oe),j?oe.afterWriteTickInfo!==null&&oe.afterWriteTickInfo.cb===I?oe.afterWriteTickInfo.count++:(oe.afterWriteTickInfo={count:1,cb:I,stream:M,state:oe},t.nextTick(B,oe.afterWriteTickInfo)):te(M,oe,1,I))}function B({stream:M,state:V,count:oe,cb:j}){return V.afterWriteTickInfo=null,te(M,V,oe,j)}function te(M,V,oe,j){for(!V.ending&&!M.destroyed&&V.length===0&&V.needDrain&&(V.needDrain=!1,M.emit("drain"));oe-- >0;)V.pendingcb--,j();V.destroyed&&z(V),le(M,V)}function z(M){if(M.writing)return;for(let I=M.bufferedIndex;I<M.buffered.length;++I){var V;const{chunk:N,callback:Q}=M.buffered[I],ce=M.objectMode?1:N.length;M.length-=ce,Q((V=M.errored)!==null&&V!==void 0?V:new S("write"))}const oe=M[C].splice(0);for(let I=0;I<oe.length;I++){var j;oe[I]((j=M.errored)!==null&&j!==void 0?j:new S("end"))}K(M)}function $(M,V){if(V.corked||V.bufferProcessing||V.destroyed||!V.constructed)return;const{buffered:oe,bufferedIndex:j,objectMode:I}=V,N=oe.length-j;if(!N)return;let Q=j;if(V.bufferProcessing=!0,N>1&&M._writev){V.pendingcb-=N-1;const ce=V.allNoop?P:he=>{for(let Ce=Q;Ce<oe.length;++Ce)oe[Ce].callback(he)},pe=V.allNoop&&Q===0?oe:e(oe,Q);pe.allBuffers=V.allBuffers,X(M,V,!0,V.length,pe,"",ce),K(V)}else{do{const{chunk:ce,encoding:pe,callback:he}=oe[Q];oe[Q++]=null;const Ce=I?1:ce.length;X(M,V,!1,Ce,ce,pe,he)}while(Q<oe.length&&!V.writing);Q===oe.length?K(V):Q>256?(oe.splice(0,Q),V.bufferedIndex=0):V.bufferedIndex=Q}V.bufferProcessing=!1}L.prototype._write=function(M,V,oe){if(this._writev)this._writev([{chunk:M,encoding:V}],oe);else throw new _("_write()")},L.prototype._writev=null,L.prototype.end=function(M,V,oe){const j=this._writableState;typeof M=="function"?(oe=M,M=null,V=null):typeof V=="function"&&(oe=V,V=null);let I;if(M!=null){const N=q(this,M,V);N instanceof r&&(I=N)}return j.corked&&(j.corked=1,this.uncork()),I||(!j.errored&&!j.ending?(j.ending=!0,le(this,j,!0),j.ended=!0):j.finished?I=new x("end"):j.destroyed&&(I=new S("end"))),typeof oe=="function"&&(I||j.finished?t.nextTick(oe,I):j[C].push(oe)),this};function F(M){return M.ending&&!M.destroyed&&M.constructed&&M.length===0&&!M.errored&&M.buffered.length===0&&!M.finished&&!M.writing&&!M.errorEmitted&&!M.closeEmitted}function ee(M,V){let oe=!1;function j(I){if(oe){T(M,I??g());return}if(oe=!0,V.pendingcb--,I){const N=V[C].splice(0);for(let Q=0;Q<N.length;Q++)N[Q](I);T(M,I,V.sync)}else F(V)&&(V.prefinished=!0,M.emit("prefinish"),V.pendingcb++,t.nextTick(me,M,V))}V.sync=!0,V.pendingcb++;try{M._final(j)}catch(I){j(I)}V.sync=!1}function ne(M,V){!V.prefinished&&!V.finalCalled&&(typeof M._final=="function"&&!V.destroyed?(V.finalCalled=!0,ee(M,V)):(V.prefinished=!0,M.emit("prefinish")))}function le(M,V,oe){F(V)&&(ne(M,V),V.pendingcb===0&&(oe?(V.pendingcb++,t.nextTick((j,I)=>{F(I)?me(j,I):I.pendingcb--},M,V)):F(V)&&(V.pendingcb++,me(M,V))))}function me(M,V){V.pendingcb--,V.finished=!0;const oe=V[C].splice(0);for(let j=0;j<oe.length;j++)oe[j]();if(M.emit("finish"),V.autoDestroy){const j=M._readableState;(!j||j.autoDestroy&&(j.endEmitted||j.readable===!1))&&M.destroy()}}i(L.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(M){this._writableState&&(this._writableState.destroyed=M)}},writable:{__proto__:null,get(){const M=this._writableState;return!!M&&M.writable!==!1&&!M.destroyed&&!M.errored&&!M.ending&&!M.ended},set(M){this._writableState&&(this._writableState.writable=!!M)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const M=this._writableState;return M?!M.destroyed&&!M.ending&&M.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ve=f.destroy;L.prototype.destroy=function(M,V){const oe=this._writableState;return!oe.destroyed&&(oe.bufferedIndex<oe.buffered.length||oe[C].length)&&t.nextTick(z,oe),ve.call(this,M,V),this},L.prototype._undestroy=f.undestroy,L.prototype._destroy=function(M,V){V(M)},L.prototype[c.captureRejectionSymbol]=function(M){this.destroy(M)};let Pe;function Ue(){return Pe===void 0&&(Pe={}),Pe}return L.fromWeb=function(M,V){return Ue().newStreamWritableFromWritableStream(M,V)},L.toWeb=function(M){return Ue().newWritableStreamFromStreamWritable(M)},K2}var V2,AN;function Qie(){if(AN)return V2;AN=1;const t=Cp,e=la,{isReadable:r,isWritable:n,isIterable:s,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:a,isDuplexNodeStream:u}=Al,l=Af,{AbortError:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h}}=Vs,{destroyer:f}=My,p=al(),m=eS(),{createDeferredPromise:E}=bl,A=XU,_=globalThis.Blob||e.Blob,g=typeof _<"u"?function(T){return T instanceof _}:function(T){return!1},v=globalThis.AbortController||WC().AbortController,{FunctionPrototypeCall:S}=Gn;class x extends p{constructor(T){super(T),(T==null?void 0:T.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(T==null?void 0:T.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}V2=function b(T,P){if(u(T))return T;if(o(T))return w({readable:T});if(a(T))return w({writable:T});if(i(T))return w({writable:!1,readable:!1});if(typeof T=="function"){const{value:k,write:K,final:L,destroy:q}=D(T);if(s(k))return A(x,k,{objectMode:!0,write:K,final:L,destroy:q});const se=k==null?void 0:k.then;if(typeof se=="function"){let X;const re=S(se,k,W=>{if(W!=null)throw new h("nully","body",W)},W=>{f(X,W)});return X=new x({objectMode:!0,readable:!1,write:K,final(W){L(async()=>{try{await re,t.nextTick(W,null)}catch(B){t.nextTick(W,B)}})},destroy:q})}throw new h("Iterable, AsyncIterable or AsyncFunction",P,k)}if(g(T))return b(T.arrayBuffer());if(s(T))return A(x,T,{objectMode:!0,writable:!1});if(typeof(T==null?void 0:T.writable)=="object"||typeof(T==null?void 0:T.readable)=="object"){const k=T!=null&&T.readable?o(T==null?void 0:T.readable)?T==null?void 0:T.readable:b(T.readable):void 0,K=T!=null&&T.writable?a(T==null?void 0:T.writable)?T==null?void 0:T.writable:b(T.writable):void 0;return w({readable:k,writable:K})}const C=T==null?void 0:T.then;if(typeof C=="function"){let k;return S(C,T,K=>{K!=null&&k.push(K),k.push(null)},K=>{f(k,K)}),k=new x({objectMode:!0,writable:!1,read(){}})}throw new d(P,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],T)};function D(b){let{promise:T,resolve:P}=E();const C=new v,k=C.signal;return{value:b(async function*(){for(;;){const L=T;T=null;const{chunk:q,done:se,cb:X}=await L;if(t.nextTick(X),se)return;if(k.aborted)throw new c(void 0,{cause:k.reason});({promise:T,resolve:P}=E()),yield q}}(),{signal:k}),write(L,q,se){const X=P;P=null,X({chunk:L,done:!1,cb:se})},final(L){const q=P;P=null,q({done:!0,cb:L})},destroy(L,q){C.abort(),q(L)}}}function w(b){const T=b.readable&&typeof b.readable.read!="function"?m.wrap(b.readable):b.readable,P=b.writable;let C=!!r(T),k=!!n(P),K,L,q,se,X;function re(W){const B=se;se=null,B?B(W):W&&X.destroy(W)}return X=new x({readableObjectMode:!!(T!=null&&T.readableObjectMode),writableObjectMode:!!(P!=null&&P.writableObjectMode),readable:C,writable:k}),k&&(l(P,W=>{k=!1,W&&f(T,W),re(W)}),X._write=function(W,B,te){P.write(W,B)?te():K=te},X._final=function(W){P.end(),L=W},P.on("drain",function(){if(K){const W=K;K=null,W()}}),P.on("finish",function(){if(L){const W=L;L=null,W()}})),C&&(l(T,W=>{C=!1,W&&f(T,W),re(W)}),T.on("readable",function(){if(q){const W=q;q=null,W()}}),T.on("end",function(){X.push(null)}),X._read=function(){for(;;){const W=T.read();if(W===null){q=X._read;return}if(!X.push(W))return}}),X._destroy=function(W,B){!W&&se!==null&&(W=new c),q=null,K=null,L=null,se===null?B(W):(se=B,f(P,W),f(T,W))},X}return V2}var q2,SN;function al(){if(SN)return q2;SN=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=Gn;q2=o;const s=eS(),i=ZU();n(o.prototype,s.prototype),n(o,s);{const c=r(i.prototype);for(let d=0;d<c.length;d++){const h=c[d];o.prototype[h]||(o.prototype[h]=i.prototype[h])}}function o(c){if(!(this instanceof o))return new o(c);s.call(this,c),i.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let a;function u(){return a===void 0&&(a={}),a}o.fromWeb=function(c,d){return u().newStreamDuplexFromReadableWritablePair(c,d)},o.toWeb=function(c){return u().newReadableWritablePairFromDuplex(c)};let l;return o.from=function(c){return l||(l=Qie()),l(c,"body")},q2}const{ObjectSetPrototypeOf:YU,Symbol:ese}=Gn;var QU=ul;const{ERR_METHOD_NOT_IMPLEMENTED:tse}=Vs.codes,rI=al(),{getHighWaterMark:rse}=eI;YU(ul.prototype,rI.prototype);YU(ul,rI);const G0=ese("kCallback");function ul(t){if(!(this instanceof ul))return new ul(t);const e=t?rse(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),rI.call(this,t),this._readableState.sync=!1,this[G0]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",nse)}function mx(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function nse(){this._final!==mx&&mx.call(this)}ul.prototype._final=mx;ul.prototype._transform=function(t,e,r){throw new tse("_transform()")};ul.prototype._write=function(t,e,r){const n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[G0]=r})};ul.prototype._read=function(){if(this[G0]){const t=this[G0];this[G0]=null,t()}};const{ObjectSetPrototypeOf:e9}=Gn;var t9=oy;const nI=QU;e9(oy.prototype,nI.prototype);e9(oy,nI);function oy(t){if(!(this instanceof oy))return new oy(t);nI.call(this,t)}oy.prototype._transform=function(t,e,r){r(null,t)};const y0=Cp,{ArrayIsArray:ise,Promise:sse,SymbolAsyncIterator:ose}=Gn,gE=Af,{once:ase}=bl,use=My,TN=al(),{aggregateTwoErrors:cse,codes:{ERR_INVALID_ARG_TYPE:yx,ERR_INVALID_RETURN_VALUE:H2,ERR_MISSING_ARGS:lse,ERR_STREAM_DESTROYED:dse,ERR_STREAM_PREMATURE_CLOSE:fse},AbortError:hse}=Vs,{validateFunction:pse,validateAbortSignal:mse}=zA,{isIterable:dh,isReadable:z2,isReadableNodeStream:n1,isNodeStream:DN,isTransformStream:fm,isWebStream:yse,isReadableStream:W2,isReadableEnded:gse}=Al,vse=globalThis.AbortController||WC().AbortController;let G2,J2;function xN(t,e,r){let n=!1;t.on("close",()=>{n=!0});const s=gE(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,use.destroyer(t,i||new dse("pipe")))},cleanup:s}}function wse(t){return pse(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function X2(t){if(dh(t))return t;if(n1(t))return _se(t);throw new yx("val",["Readable","Iterable","AsyncIterable"],t)}async function*_se(t){J2||(J2=eS()),yield*J2.prototype[ose].call(t)}async function q_(t,e,r,{end:n}){let s,i=null;const o=l=>{if(l&&(s=l),i){const c=i;i=null,c()}},a=()=>new sse((l,c)=>{s?c(s):i=()=>{s?c(s):l()}});e.on("drain",o);const u=gE(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(const l of t)e.write(l)||await a();n&&e.end(),await a(),r()}catch(l){r(s!==l?cse(s,l):l)}finally{u(),e.off("drain",o)}}async function Z2(t,e,r,{end:n}){fm(e)&&(e=e.writable);const s=e.getWriter();try{for await(const i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function bse(...t){return r9(t,ase(wse(t)))}function r9(t,e,r){if(t.length===1&&ise(t[0])&&(t=t[0]),t.length<2)throw new lse("streams");const n=new vse,s=n.signal,i=r==null?void 0:r.signal,o=[];mse(i,"options.signal");function a(){f(new hse)}i==null||i.addEventListener("abort",a);let u,l;const c=[];let d=0;function h(A){f(A,--d===0)}function f(A,_){if(A&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=A),!(!u&&!_)){for(;c.length;)c.shift()(u);i==null||i.removeEventListener("abort",a),n.abort(),_&&(u||o.forEach(g=>g()),y0.nextTick(e,u,l))}}let p;for(let A=0;A<t.length;A++){const _=t[A],g=A<t.length-1,v=A>0,S=g||(r==null?void 0:r.end)!==!1,x=A===t.length-1;if(DN(_)){let D=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(w)};if(S){const{destroy:w,cleanup:b}=xN(_,g,v);c.push(w),z2(_)&&x&&o.push(b)}_.on("error",D),z2(_)&&x&&o.push(()=>{_.removeListener("error",D)})}if(A===0)if(typeof _=="function"){if(p=_({signal:s}),!dh(p))throw new H2("Iterable, AsyncIterable or Stream","source",p)}else dh(_)||n1(_)||fm(_)?p=_:p=TN.from(_);else if(typeof _=="function"){if(fm(p)){var m;p=X2((m=p)===null||m===void 0?void 0:m.readable)}else p=X2(p);if(p=_(p,{signal:s}),g){if(!dh(p,!0))throw new H2("AsyncIterable",`transform[${A-1}]`,p)}else{var E;G2||(G2=t9);const D=new G2({objectMode:!0}),w=(E=p)===null||E===void 0?void 0:E.then;if(typeof w=="function")d++,w.call(p,P=>{l=P,P!=null&&D.write(P),S&&D.end(),y0.nextTick(h)},P=>{D.destroy(P),y0.nextTick(h,P)});else if(dh(p,!0))d++,q_(p,D,h,{end:S});else if(W2(p)||fm(p)){const P=p.readable||p;d++,q_(P,D,h,{end:S})}else throw new H2("AsyncIterable or Promise","destination",p);p=D;const{destroy:b,cleanup:T}=xN(p,!1,!0);c.push(b),x&&o.push(T)}}else if(DN(_)){if(n1(p)){d+=2;const D=Ese(p,_,h,{end:S});z2(_)&&x&&o.push(D)}else if(fm(p)||W2(p)){const D=p.readable||p;d++,q_(D,_,h,{end:S})}else if(dh(p))d++,q_(p,_,h,{end:S});else throw new yx("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=_}else if(yse(_)){if(n1(p))d++,Z2(X2(p),_,h,{end:S});else if(W2(p)||dh(p))d++,Z2(p,_,h,{end:S});else if(fm(p))d++,Z2(p.readable,_,h,{end:S});else throw new yx("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=_}else p=TN.from(_)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&y0.nextTick(a),p}function Ese(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new fse)}),t.pipe(e,{end:!1}),n){let i=function(){s=!0,e.end()};gse(t)?y0.nextTick(i):t.once("end",i)}else r();return gE(t,{readable:!0,writable:!1},i=>{const o=t._readableState;i&&i.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",r).once("error",r):r(i)}),gE(e,{readable:!1,writable:!0},r)}var iI={pipelineImpl:r9,pipeline:bse};const{pipeline:Ase}=iI,H_=al(),{destroyer:Sse}=My,{isNodeStream:z_,isReadable:PN,isWritable:CN,isWebStream:Y2,isTransformStream:Gf,isWritableStream:IN,isReadableStream:kN}=Al,{AbortError:Tse,codes:{ERR_INVALID_ARG_VALUE:$N,ERR_MISSING_ARGS:Dse}}=Vs,xse=Af;var n9=function(...e){if(e.length===0)throw new Dse("streams");if(e.length===1)return H_.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=H_.from(e[0])),typeof e[e.length-1]=="function"){const f=e.length-1;e[f]=H_.from(e[f])}for(let f=0;f<e.length;++f)if(!(!z_(e[f])&&!Y2(e[f]))){if(f<e.length-1&&!(PN(e[f])||kN(e[f])||Gf(e[f])))throw new $N(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(CN(e[f])||IN(e[f])||Gf(e[f])))throw new $N(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function u(f){const p=o;o=null,p?p(f):f?a.destroy(f):!h&&!d&&a.destroy()}const l=e[0],c=Ase(e,u),d=!!(CN(l)||IN(l)||Gf(l)),h=!!(PN(c)||kN(c)||Gf(c));if(a=new H_({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(c!=null&&c.writableObjectMode),writable:d,readable:h}),d){if(z_(l))a._write=function(p,m,E){l.write(p,m)?E():n=E},a._final=function(p){l.end(),s=p},l.on("drain",function(){if(n){const p=n;n=null,p()}});else if(Y2(l)){const m=(Gf(l)?l.writable:l).getWriter();a._write=async function(E,A,_){try{await m.ready,m.write(E).catch(()=>{}),_()}catch(g){_(g)}},a._final=async function(E){try{await m.ready,m.close().catch(()=>{}),s=E}catch(A){E(A)}}}const f=Gf(c)?c.readable:c;xse(f,()=>{if(s){const p=s;s=null,p()}})}if(h){if(z_(c))c.on("readable",function(){if(i){const f=i;i=null,f()}}),c.on("end",function(){a.push(null)}),a._read=function(){for(;;){const f=c.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(Y2(c)){const p=(Gf(c)?c.readable:c).getReader();a._read=async function(){for(;;)try{const{value:m,done:E}=await p.read();if(!a.push(m))return;if(E){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Tse),i=null,n=null,s=null,o===null?p(f):(o=p,z_(c)&&Sse(c,f))},a};const i9=globalThis.AbortController||WC().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Pse,ERR_INVALID_ARG_TYPE:Tw,ERR_MISSING_ARGS:Cse,ERR_OUT_OF_RANGE:Ise},AbortError:Ku}=Vs,{validateAbortSignal:Ip,validateInteger:kse,validateObject:kp}=zA,$se=Gn.Symbol("kWeak"),{finished:Ose}=Af,Rse=n9,{addAbortSignalNoValidate:Nse}=QA,{isWritable:Bse,isNodeStream:Fse}=Al,{ArrayPrototypePush:Mse,MathFloor:jse,Number:Use,NumberIsNaN:Lse,Promise:ON,PromiseReject:RN,PromisePrototypeThen:Kse,Symbol:s9}=Gn,vE=s9("kEmpty"),NN=s9("kEof");function Vse(t,e){if(e!=null&&kp(e,"options"),(e==null?void 0:e.signal)!=null&&Ip(e.signal,"options.signal"),Fse(t)&&!Bse(t))throw new Pse("stream",t,"must be writable");const r=Rse(this,t);return e!=null&&e.signal&&Nse(e.signal,r),r}function tS(t,e){if(typeof t!="function")throw new Tw("fn",["Function","AsyncFunction"],t);e!=null&&kp(e,"options"),(e==null?void 0:e.signal)!=null&&Ip(e.signal,"options.signal");let r=1;return(e==null?void 0:e.concurrency)!=null&&(r=jse(e.concurrency)),kse(r,"concurrency",1),(async function*(){var s,i;const o=new i9,a=this,u=[],l=o.signal,c={signal:l},d=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&d(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",d);let h,f,p=!1;function m(){p=!0}async function E(){try{for await(let g of a){var A;if(p)return;if(l.aborted)throw new Ku;try{g=t(g,c)}catch(v){g=RN(v)}g!==vE&&(typeof((A=g)===null||A===void 0?void 0:A.catch)=="function"&&g.catch(m),u.push(g),h&&(h(),h=null),!p&&u.length&&u.length>=r&&await new ON(v=>{f=v}))}u.push(NN)}catch(g){const v=RN(g);Kse(v,void 0,m),u.push(v)}finally{var _;p=!0,h&&(h(),h=null),e==null||(_=e.signal)===null||_===void 0||_.removeEventListener("abort",d)}}E();try{for(;;){for(;u.length>0;){const A=await u[0];if(A===NN)return;if(l.aborted)throw new Ku;A!==vE&&(yield A),u.shift(),f&&(f(),f=null)}await new ON(A=>{h=A})}}finally{o.abort(),p=!0,f&&(f(),f=null)}}).call(this)}function qse(t=void 0){return t!=null&&kp(t,"options"),(t==null?void 0:t.signal)!=null&&Ip(t.signal,"options.signal"),(async function*(){let r=0;for await(const s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ku({cause:t.signal.reason});yield[r++,s]}}).call(this)}async function o9(t,e=void 0){for await(const r of sI.call(this,t,e))return!0;return!1}async function Hse(t,e=void 0){if(typeof t!="function")throw new Tw("fn",["Function","AsyncFunction"],t);return!await o9.call(this,async(...r)=>!await t(...r),e)}async function zse(t,e){for await(const r of sI.call(this,t,e))return r}async function Wse(t,e){if(typeof t!="function")throw new Tw("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),vE}for await(const n of tS.call(this,r,e));}function sI(t,e){if(typeof t!="function")throw new Tw("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:vE}return tS.call(this,r,e)}class Gse extends Cse{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Jse(t,e,r){var n;if(typeof t!="function")throw new Tw("reducer",["Function","AsyncFunction"],t);r!=null&&kp(r,"options"),(r==null?void 0:r.signal)!=null&&Ip(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new Ku(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Ose(this.destroy(l)),l}const i=new i9,o=i.signal;if(r!=null&&r.signal){const l={once:!0,[$se]:this};r.signal.addEventListener("abort",()=>i.abort(),l)}let a=!1;try{for await(const l of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Ku;s?e=await t(e,l,{signal:o}):(e=l,s=!0)}if(!a&&!s)throw new Gse}finally{i.abort()}return e}async function Xse(t){t!=null&&kp(t,"options"),(t==null?void 0:t.signal)!=null&&Ip(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ku(void 0,{cause:t.signal.reason});Mse(e,n)}return e}function Zse(t,e){const r=tS.call(this,t,e);return(async function*(){for await(const s of r)yield*s}).call(this)}function a9(t){if(t=Use(t),Lse(t))return 0;if(t<0)throw new Ise("number",">= 0",t);return t}function Yse(t,e=void 0){return e!=null&&kp(e,"options"),(e==null?void 0:e.signal)!=null&&Ip(e.signal,"options.signal"),t=a9(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ku;for await(const i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Ku;t--<=0&&(yield i)}}).call(this)}function Qse(t,e=void 0){return e!=null&&kp(e,"options"),(e==null?void 0:e.signal)!=null&&Ip(e.signal,"options.signal"),t=a9(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ku;for await(const i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Ku;if(t-- >0)yield i;else return}}).call(this)}zC.streamReturningOperators={asIndexedPairs:qse,drop:Yse,filter:sI,flatMap:Zse,map:tS,take:Qse,compose:Vse};zC.promiseReturningOperators={every:Hse,forEach:Wse,reduce:Jse,toArray:Xse,some:o9,find:zse};var Q2,BN;function u9(){if(BN)return Q2;BN=1;const{ArrayPrototypePop:t,Promise:e}=Gn,{isIterable:r,isNodeStream:n,isWebStream:s}=Al,{pipelineImpl:i}=iI,{finished:o}=Af;c9();function a(...u){return new e((l,c)=>{let d,h;const f=u[u.length-1];if(f&&typeof f=="object"&&!n(f)&&!r(f)&&!s(f)){const p=t(u);d=p.signal,h=p.end}i(u,(p,m)=>{p?c(p):l(m)},{signal:d,end:h})})}return Q2={finished:o,pipeline:a},Q2}var FN;function c9(){if(FN)return B2.exports;FN=1;const{Buffer:t}=la,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=Gn,{promisify:{custom:s}}=bl,{streamReturningOperators:i,promiseReturningOperators:o}=zC,{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Vs,u=n9,{pipeline:l}=iI,{destroyer:c}=My,d=Af,h=u9(),f=Al,p=B2.exports=QC.Stream;p.isDisturbed=f.isDisturbed,p.isErrored=f.isErrored,p.isReadable=f.isReadable,p.Readable=eS();for(const E of r(i)){let _=function(...g){if(new.target)throw a();return p.Readable.from(n(A,this,g))};const A=i[E];e(_,"name",{__proto__:null,value:A.name}),e(_,"length",{__proto__:null,value:A.length}),e(p.Readable.prototype,E,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(const E of r(o)){let _=function(...g){if(new.target)throw a();return n(A,this,g)};const A=o[E];e(_,"name",{__proto__:null,value:A.name}),e(_,"length",{__proto__:null,value:A.length}),e(p.Readable.prototype,E,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}p.Writable=ZU(),p.Duplex=al(),p.Transform=QU,p.PassThrough=t9,p.pipeline=l;const{addAbortSignal:m}=QA;return p.addAbortSignal=m,p.finished=d,p.destroy=c,p.compose=u,e(p,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),e(l,s,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),e(d,s,{__proto__:null,enumerable:!0,get(){return h.finished}}),p.Stream=p,p._isUint8Array=function(A){return A instanceof Uint8Array},p._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)},B2.exports}(function(t){const e=c9(),r=u9(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(Rre);function eoe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var toe=eoe,roe=toe;const noe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let ioe=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},soe=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return l9(this,e)}},ooe=class{constructor(e){this.decoders=e}or(e){return l9(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const l9=(t,e)=>new ooe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let aoe=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new ioe(e,r,n),this.decoder=new soe(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const d9=({name:t,prefix:e,encode:r,decode:n})=>new aoe(t,e,r,n),f9=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=roe(r,e);return d9({prefix:t,name:e,encode:n,decode:i=>noe(s(i))})},uoe=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},coe=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},po=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>d9({prefix:e,name:t,encode(s){return coe(s,n,r)},decode(s){return uoe(s,n,r,t)}});po({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});po({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});po({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});po({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});po({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});po({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});po({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});po({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const MN=po({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),W_=f9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});f9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});po({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});po({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const hc=po({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});po({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function loe(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function doe(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function jN(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Sg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},UN=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const G_=new TextEncoder,Jf=new TextDecoder;let mr=class As{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new As(e,"ArrayBuffer")}static asyncIterable(e){if(!doe(e))throw new TypeError("Input must be of type AsyncIterable.");return new As(e,"AsyncIterable")}static base32Z(e){return new As(e,"Base32Z")}static base58Btc(e){return new As(e,"Base58Btc")}static base64Url(e){return new As(e,"Base64Url")}static bufferSource(e){return new As(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new As(e,"Hex")}static multibase(e){return new As(e,"Multibase")}static object(e){return new As(e,"Object")}static string(e){return new As(e,"String")}static uint8Array(e){return new As(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return W_.baseDecode(this.data).buffer;case"Base64Url":return hc.baseDecode(this.data).buffer;case"BufferSource":{if(jN(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return loe(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Sg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return MN.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return W_.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return W_.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return hc.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return hc.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=G_.encode(e);return hc.baseEncode(r)}case"String":{const e=G_.encode(this.data);return hc.baseEncode(e)}case"Uint8Array":return hc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return Sg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=UN(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return As.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return As.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=hc.baseDecode(this.data),r=Jf.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=Jf.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Sg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Jf.decode(this.data);case"Base64Url":{const e=hc.baseDecode(this.data);return Jf.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Jf.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return Sg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=UN(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=Jf.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Jf.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return MN.baseDecode(this.data);case"Base58Btc":return W_.baseDecode(this.data);case"Base64Url":return hc.baseDecode(this.data);case"BufferSource":{const e=jN(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return G_.encode(e)}case"String":return G_.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Sg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var foe=h9,LN=128,hoe=127,poe=~hoe,moe=Math.pow(2,31);function h9(t,e,r){e=e||[],r=r||0;for(var n=r;t>=moe;)e[r++]=t&255|LN,t/=128;for(;t&poe;)e[r++]=t&255|LN,t>>>=7;return e[r]=t|0,h9.bytes=r-n+1,e}var yoe=gx,goe=128,KN=127;function gx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw gx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&KN)<<s:(o&KN)*Math.pow(2,s),s+=7}while(o>=goe);return gx.bytes=i-n,r}var voe=Math.pow(2,7),woe=Math.pow(2,14),_oe=Math.pow(2,21),boe=Math.pow(2,28),Eoe=Math.pow(2,35),Aoe=Math.pow(2,42),Soe=Math.pow(2,49),Toe=Math.pow(2,56),Doe=Math.pow(2,63),xoe=function(t){return t<voe?1:t<woe?2:t<_oe?3:t<boe?4:t<Eoe?5:t<Aoe?6:t<Soe?7:t<Toe?8:t<Doe?9:10},Poe={encode:foe,decode:yoe,encodingLength:xoe},wE=Poe;const VN=(t,e=0)=>[wE.decode(t,e),wE.decode.bytes],Coe=(t,e,r=0)=>(wE.encode(t,e,r),e),Ioe=t=>wE.encodingLength(t);let Sf=class cd{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=cd.codeToName.has(n)?n:cd.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=Ioe(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),Coe(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=VN(r);return n}static getCodeFromName(e){const{name:r}=e,n=cd.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=cd.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){cd.codeToName.set(e.code,e.name),cd.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=VN(r),i=cd.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Sf.codeToName=new Map;Sf.nameToCode=new Map;Sf.registerCodec({code:237,name:"ed25519-pub"});Sf.registerCodec({code:4864,name:"ed25519-priv"});Sf.registerCodec({code:236,name:"x25519-pub"});Sf.registerCodec({code:4866,name:"x25519-priv"});Sf.registerCodec({code:231,name:"secp256k1-pub"});Sf.registerCodec({code:4865,name:"secp256k1-priv"});function p9(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&p9(t[e])})}var Xf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let koe=class{constructor(){this.store=new Map}clear(){return Xf(this,void 0,void 0,function*(){this.store.clear()})}close(){return Xf(this,void 0,void 0,function*(){})}delete(e){return Xf(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return Xf(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return Xf(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return Xf(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return Xf(this,void 0,void 0,function*(){this.store.set(e,r)})}};function $oe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function m9(t,...e){if(!$oe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function qN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ooe(t,e){m9(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const eT=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ja=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Roe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function y9(t){return typeof t=="string"&&(t=Roe(t)),m9(t),t}let Noe=class{clone(){return this._cloneInto()}};function Boe(t){const e=n=>t().update(y9(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Foe(t=32){if(eT&&typeof eT.getRandomValues=="function")return eT.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Moe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}const joe=(t,e,r)=>t&e^~t&r,Uoe=(t,e,r)=>t&e^t&r^e&r;let Loe=class extends Noe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tT(this.buffer)}update(e){qN(this);const{view:r,buffer:n,blockLen:s}=this;e=y9(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=tT(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qN(this),Ooe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Moe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=tT(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Koe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ul=new Uint32Array(64);let Voe=class extends Loe{constructor(){super(64,32,8,!1),this.A=jl[0]|0,this.B=jl[1]|0,this.C=jl[2]|0,this.D=jl[3]|0,this.E=jl[4]|0,this.F=jl[5]|0,this.G=jl[6]|0,this.H=jl[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Ul[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Ul[d-15],f=Ul[d-2],p=Ja(h,7)^Ja(h,18)^h>>>3,m=Ja(f,17)^Ja(f,19)^f>>>10;Ul[d]=m+Ul[d-7]+p+Ul[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=Ja(a,6)^Ja(a,11)^Ja(a,25),f=c+h+joe(a,u,l)+Koe[d]+Ul[d]|0,m=(Ja(n,2)^Ja(n,13)^Ja(n,22))+Uoe(n,s,i)|0;c=l,l=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,i,o,a,u,l,c)}roundClean(){Ul.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Iv=Boe(()=>new Voe);var qoe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let g9=class{static digest(e){return qoe(this,arguments,void 0,function*({data:r}){return Iv(r)})}},oI=class{};var Hoe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let zoe=class extends oI{digest(e){return Hoe(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield g9.digest({data:n})}})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const v9=BigInt(0),rS=BigInt(1),Woe=BigInt(2);function Vu(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const Goe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cp(t){if(!Vu(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Goe[t[r]];return e}function w9(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function aI(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const pc={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function HN(t){if(t>=pc._0&&t<=pc._9)return t-pc._0;if(t>=pc._A&&t<=pc._F)return t-(pc._A-10);if(t>=pc._a&&t<=pc._f)return t-(pc._a-10)}function ay(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=HN(t.charCodeAt(i)),a=HN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function Gh(t){return aI(cp(t))}function Gd(t){if(!Vu(t))throw new Error("Uint8Array expected");return aI(cp(Uint8Array.from(t).reverse()))}function Zr(t,e){return ay(t.toString(16).padStart(e*2,"0"))}function uy(t,e){return Zr(t,e).reverse()}function Joe(t){return ay(w9(t))}function Tn(t,e,r){let n;if(typeof e=="string")try{n=ay(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Vu(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function lp(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];if(!Vu(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){const i=t[s];r.set(i,n),n+=i.length}return r}function Xoe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Zoe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Yoe(t){let e;for(e=0;t>v9;t>>=rS,e+=1);return e}function Qoe(t,e){return t>>BigInt(e)&rS}const eae=(t,e,r)=>t|(r?rS:v9)<<BigInt(e),uI=t=>(Woe<<BigInt(t-1))-rS,rT=t=>new Uint8Array(t),zN=t=>Uint8Array.from(t);function _9(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=rT(t),s=rT(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),u=(d=rT())=>{s=a(zN([0]),d),n=a(),d.length!==0&&(s=a(zN([1]),d),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){n=a();const f=n.slice();h.push(f),d+=n.length}return lp(...h)};return(d,h)=>{o(),u(d);let f;for(;!(f=h(l()));)u();return o(),f}}const tae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Vu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $p(t,e,r={}){const n=(s,i,o)=>{const a=tae[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const rae=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Qoe,bitLen:Yoe,bitMask:uI,bitSet:eae,bytesToHex:cp,bytesToNumberBE:Gh,bytesToNumberLE:Gd,concatBytes:lp,createHmacDrbg:_9,ensureBytes:Tn,equalBytes:Xoe,hexToBytes:ay,hexToNumber:aI,isBytes:Vu,numberToBytesBE:Zr,numberToBytesLE:uy,numberToHexUnpadded:w9,numberToVarBytesBE:Joe,utf8ToBytes:Zoe,validateObject:$p},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ai=BigInt(0),hn=BigInt(1),Sh=BigInt(2),nae=BigInt(3),vx=BigInt(4),WN=BigInt(5),GN=BigInt(8);BigInt(9);BigInt(16);function Xr(t,e){const r=t%e;return r>=ai?r:e+r}function b9(t,e,r){if(r<=ai||e<ai)throw new Error("Expected power/modulo > 0");if(r===hn)return ai;let n=hn;for(;e>ai;)e&hn&&(n=n*t%r),t=t*t%r,e>>=hn;return n}function dn(t,e,r){let n=t;for(;e-- >ai;)n*=n,n%=r;return n}function wx(t,e){if(t===ai||e<=ai)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Xr(t,e),n=e,s=ai,i=hn;for(;r!==ai;){const a=n/r,u=n%r,l=s-i*a;n=r,r=u,s=i,i=l}if(n!==hn)throw new Error("invert: does not exist");return Xr(s,e)}function iae(t){const e=(t-hn)/Sh;let r,n,s;for(r=t-hn,n=0;r%Sh===ai;r/=Sh,n++);for(s=Sh;s<t&&b9(s,e,t)!==t-hn;s++);if(n===1){const o=(t+hn)/vx;return function(u,l){const c=u.pow(l,o);if(!u.eql(u.sqr(c),l))throw new Error("Cannot find square root");return c}}const i=(r+hn)/Sh;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,c=a.pow(a.mul(a.ONE,s),r),d=a.pow(u,i),h=a.pow(u,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let m=a.sqr(h);f<l&&!a.eql(m,a.ONE);f++)m=a.sqr(m);const p=a.pow(c,hn<<BigInt(l-f-1));c=a.sqr(p),d=a.mul(d,p),h=a.mul(h,c),l=f}return d}}function sae(t){if(t%vx===nae){const e=(t+hn)/vx;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%GN===WN){const e=(t-WN)/GN;return function(n,s){const i=n.mul(s,Sh),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,Sh),o),l=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return iae(t)}const oae=(t,e)=>(Xr(t,e)&hn)===hn,aae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uae(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=aae.reduce((n,s)=>(n[s]="function",n),e);return $p(t,r)}function cae(t,e,r){if(r<ai)throw new Error("Expected power > 0");if(r===ai)return t.ONE;if(r===hn)return e;let n=t.ONE,s=e;for(;r>ai;)r&hn&&(n=t.mul(n,s)),s=t.sqr(s),r>>=hn;return n}function lae(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function E9(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function cI(t,e,r=!1,n={}){if(t<=ai)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=E9(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sae(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:uI(s),ZERO:ai,ONE:hn,create:u=>Xr(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return ai<=u&&u<t},is0:u=>u===ai,isOdd:u=>(u&hn)===hn,neg:u=>Xr(-u,t),eql:(u,l)=>u===l,sqr:u=>Xr(u*u,t),add:(u,l)=>Xr(u+l,t),sub:(u,l)=>Xr(u-l,t),mul:(u,l)=>Xr(u*l,t),pow:(u,l)=>cae(a,u,l),div:(u,l)=>Xr(u*wx(l,t),t),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>wx(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>lae(a,u),cmov:(u,l,c)=>c?l:u,toBytes:u=>r?uy(u,i):Zr(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?Gd(u):Gh(u)}});return Object.freeze(a)}function dae(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function A9(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function S9(t){const e=A9(t);return e+Math.ceil(e/2)}function fae(t,e,r=!1){const n=t.length,s=A9(e),i=S9(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Gh(t):Gd(t),a=Xr(o,e-hn)+hn;return r?uy(a,s):Zr(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hae=BigInt(0),nT=BigInt(1);function T9(t,e){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>hae;)i&nT&&(o=o.add(a)),a=a.double(),i>>=nT;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),u=[];let l=s,c=l;for(let d=0;d<o;d++){c=l,u.push(c);for(let h=1;h<a;h++)c=c.add(l),u.push(c);l=c.double()}return u},wNAF(s,i,o){const{windows:a,windowSize:u}=n(s);let l=t.ZERO,c=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const m=p*u;let E=Number(o&d);o>>=f,E>u&&(E-=h,o+=nT);const A=m,_=m+Math.abs(E)-1,g=p%2!==0,v=E<0;E===0?c=c.add(r(g,i[A])):l=l.add(r(v,i[_]))}return{p:l,f:c}},wNAFCached(s,i,o,a){const u=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,u),u!==1&&i.set(s,a(l))),this.wNAF(u,l,o)}}}function lI(t){return uae(t.Fp),$p(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...E9(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pae(t){const e=lI(t);$p(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:mae,hexToBytes:yae}=rae,Oh={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Oh;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:mae(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=Oh,r=typeof t=="string"?yae(t):t;if(!Vu(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Oh._parseInt(r.subarray(2)),{d:o,l:a}=Oh._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const c=l.toString(16);return c.length&1?`0${c}`:c},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},zc=BigInt(0),Ko=BigInt(1);BigInt(2);const JN=BigInt(3);BigInt(4);function gae(t){const e=pae(t),{Fp:r}=e,n=e.toBytes||((p,m,E)=>{const A=m.toAffine();return lp(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),E=r.fromBytes(m.subarray(0,r.BYTES)),A=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:E,y:A}});function i(p){const{a:m,b:E}=e,A=r.sqr(p),_=r.mul(A,p);return r.add(r.add(_,r.mul(p,m)),E)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&zc<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(p){const{allowedPrivateKeyLengths:m,nByteLength:E,wrapPrivateKey:A,n:_}=e;if(m&&typeof p!="bigint"){if(Vu(p)&&(p=cp(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(E*2,"0")}let g;try{g=typeof p=="bigint"?p:Gh(Tn("private key",p,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof p}`)}return A&&(g=Xr(g,_)),a(g),g}const l=new Map;function c(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(m,E,A){if(this.px=m,this.py=E,this.pz=A,m==null||!r.isValid(m))throw new Error("x required");if(E==null||!r.isValid(E))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required")}static fromAffine(m){const{x:E,y:A}=m||{};if(!m||!r.isValid(E)||!r.isValid(A))throw new Error("invalid affine point");if(m instanceof d)throw new Error("projective point not allowed");const _=g=>r.eql(g,r.ZERO);return _(E)&&_(A)?d.ZERO:new d(E,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const E=r.invertBatch(m.map(A=>A.pz));return m.map((A,_)=>A.toAffine(E[_])).map(d.fromAffine)}static fromHex(m){const E=d.fromAffine(s(Tn("pointHex",m)));return E.assertValidity(),E}static fromPrivateKey(m){return d.BASE.multiply(u(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:E}=this.toAffine();if(!r.isValid(m)||!r.isValid(E))throw new Error("bad point: x or y not FE");const A=r.sqr(E),_=i(m);if(!r.eql(A,_))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){c(m);const{px:E,py:A,pz:_}=this,{px:g,py:v,pz:S}=m,x=r.eql(r.mul(E,S),r.mul(g,_)),D=r.eql(r.mul(A,S),r.mul(v,_));return x&&D}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:E}=e,A=r.mul(E,JN),{px:_,py:g,pz:v}=this;let S=r.ZERO,x=r.ZERO,D=r.ZERO,w=r.mul(_,_),b=r.mul(g,g),T=r.mul(v,v),P=r.mul(_,g);return P=r.add(P,P),D=r.mul(_,v),D=r.add(D,D),S=r.mul(m,D),x=r.mul(A,T),x=r.add(S,x),S=r.sub(b,x),x=r.add(b,x),x=r.mul(S,x),S=r.mul(P,S),D=r.mul(A,D),T=r.mul(m,T),P=r.sub(w,T),P=r.mul(m,P),P=r.add(P,D),D=r.add(w,w),w=r.add(D,w),w=r.add(w,T),w=r.mul(w,P),x=r.add(x,w),T=r.mul(g,v),T=r.add(T,T),w=r.mul(T,P),S=r.sub(S,w),D=r.mul(T,b),D=r.add(D,D),D=r.add(D,D),new d(S,x,D)}add(m){c(m);const{px:E,py:A,pz:_}=this,{px:g,py:v,pz:S}=m;let x=r.ZERO,D=r.ZERO,w=r.ZERO;const b=e.a,T=r.mul(e.b,JN);let P=r.mul(E,g),C=r.mul(A,v),k=r.mul(_,S),K=r.add(E,A),L=r.add(g,v);K=r.mul(K,L),L=r.add(P,C),K=r.sub(K,L),L=r.add(E,_);let q=r.add(g,S);return L=r.mul(L,q),q=r.add(P,k),L=r.sub(L,q),q=r.add(A,_),x=r.add(v,S),q=r.mul(q,x),x=r.add(C,k),q=r.sub(q,x),w=r.mul(b,L),x=r.mul(T,k),w=r.add(x,w),x=r.sub(C,w),w=r.add(C,w),D=r.mul(x,w),C=r.add(P,P),C=r.add(C,P),k=r.mul(b,k),L=r.mul(T,L),C=r.add(C,k),k=r.sub(P,k),k=r.mul(b,k),L=r.add(L,k),P=r.mul(C,L),D=r.add(D,P),P=r.mul(q,L),x=r.mul(K,x),x=r.sub(x,P),P=r.mul(K,C),w=r.mul(q,w),w=r.add(w,P),new d(x,D,w)}subtract(m){return this.add(m.negate())}is0(){return this.equals(d.ZERO)}wNAF(m){return f.wNAFCached(this,l,m,E=>{const A=r.invertBatch(E.map(_=>_.pz));return E.map((_,g)=>_.toAffine(A[g])).map(d.fromAffine)})}multiplyUnsafe(m){const E=d.ZERO;if(m===zc)return E;if(a(m),m===Ko)return this;const{endo:A}=e;if(!A)return f.unsafeLadder(this,m);let{k1neg:_,k1:g,k2neg:v,k2:S}=A.splitScalar(m),x=E,D=E,w=this;for(;g>zc||S>zc;)g&Ko&&(x=x.add(w)),S&Ko&&(D=D.add(w)),w=w.double(),g>>=Ko,S>>=Ko;return _&&(x=x.negate()),v&&(D=D.negate()),D=new d(r.mul(D.px,A.beta),D.py,D.pz),x.add(D)}multiply(m){a(m);let E=m,A,_;const{endo:g}=e;if(g){const{k1neg:v,k1:S,k2neg:x,k2:D}=g.splitScalar(E);let{p:w,f:b}=this.wNAF(S),{p:T,f:P}=this.wNAF(D);w=f.constTimeNegate(v,w),T=f.constTimeNegate(x,T),T=new d(r.mul(T.px,g.beta),T.py,T.pz),A=w.add(T),_=b.add(P)}else{const{p:v,f:S}=this.wNAF(E);A=v,_=S}return d.normalizeZ([A,_])[0]}multiplyAndAddUnsafe(m,E,A){const _=d.BASE,g=(S,x)=>x===zc||x===Ko||!S.equals(_)?S.multiplyUnsafe(x):S.multiply(x),v=g(this,E).add(g(m,A));return v.is0()?void 0:v}toAffine(m){const{px:E,py:A,pz:_}=this,g=this.is0();m==null&&(m=g?r.ONE:r.inv(_));const v=r.mul(E,m),S=r.mul(A,m),x=r.mul(_,m);if(g)return{x:r.ZERO,y:r.ZERO};if(!r.eql(x,r.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}isTorsionFree(){const{h:m,isTorsionFree:E}=e;if(m===Ko)return!0;if(E)return E(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:E}=e;return m===Ko?this:E?E(d,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),n(d,this,m)}toHex(m=!0){return cp(this.toRawBytes(m))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,f=T9(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function vae(t){const e=lI(t);return $p(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function wae(t){const e=vae(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(L){return zc<L&&L<r.ORDER}function a(L){return Xr(L,n)}function u(L){return wx(L,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:h}=gae({...e,toBytes(L,q,se){const X=q.toAffine(),re=r.toBytes(X.x),W=lp;return se?W(Uint8Array.from([q.hasEvenY()?2:3]),re):W(Uint8Array.from([4]),re,r.toBytes(X.y))},fromBytes(L){const q=L.length,se=L[0],X=L.subarray(1);if(q===s&&(se===2||se===3)){const re=Gh(X);if(!o(re))throw new Error("Point is not on curve");const W=d(re);let B=r.sqrt(W);const te=(B&Ko)===Ko;return(se&1)===1!==te&&(B=r.neg(B)),{x:re,y:B}}else if(q===i&&se===4){const re=r.fromBytes(X.subarray(0,r.BYTES)),W=r.fromBytes(X.subarray(r.BYTES,2*r.BYTES));return{x:re,y:W}}else throw new Error(`Point of length ${q} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=L=>cp(Zr(L,e.nByteLength));function p(L){const q=n>>Ko;return L>q}function m(L){return p(L)?a(-L):L}const E=(L,q,se)=>Gh(L.slice(q,se));class A{constructor(q,se,X){this.r=q,this.s=se,this.recovery=X,this.assertValidity()}static fromCompact(q){const se=e.nByteLength;return q=Tn("compactSignature",q,se*2),new A(E(q,0,se),E(q,se,2*se))}static fromDER(q){const{r:se,s:X}=Oh.toSig(Tn("DER",q));return new A(se,X)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(q){return new A(this.r,this.s,q)}recoverPublicKey(q){const{r:se,s:X,recovery:re}=this,W=D(Tn("msgHash",q));if(re==null||![0,1,2,3].includes(re))throw new Error("recovery id invalid");const B=re===2||re===3?se+e.n:se;if(B>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=re&1?"03":"02",z=l.fromHex(te+f(B)),$=u(B),F=a(-W*$),ee=a(X*$),ne=l.BASE.multiplyAndAddUnsafe(z,F,ee);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ay(this.toDERHex())}toDERHex(){return Oh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ay(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const _={isValidPrivateKey(L){try{return c(L),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const L=S9(e.n);return fae(e.randomBytes(L),e.n)},precompute(L=8,q=l.BASE){return q._setWindowSize(L),q.multiply(BigInt(3)),q}};function g(L,q=!0){return l.fromPrivateKey(L).toRawBytes(q)}function v(L){const q=Vu(L),se=typeof L=="string",X=(q||se)&&L.length;return q?X===s||X===i:se?X===2*s||X===2*i:L instanceof l}function S(L,q,se=!0){if(v(L))throw new Error("first arg must be private key");if(!v(q))throw new Error("second arg must be public key");return l.fromHex(q).multiply(c(L)).toRawBytes(se)}const x=e.bits2int||function(L){const q=Gh(L),se=L.length*8-e.nBitLength;return se>0?q>>BigInt(se):q},D=e.bits2int_modN||function(L){return a(x(L))},w=uI(e.nBitLength);function b(L){if(typeof L!="bigint")throw new Error("bigint expected");if(!(zc<=L&&L<w))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Zr(L,e.nByteLength)}function T(L,q,se=P){if(["recovered","canonical"].some(me=>me in se))throw new Error("sign() legacy options not supported");const{hash:X,randomBytes:re}=e;let{lowS:W,prehash:B,extraEntropy:te}=se;W==null&&(W=!0),L=Tn("msgHash",L),B&&(L=Tn("prehashed msgHash",X(L)));const z=D(L),$=c(q),F=[b($),b(z)];if(te!=null){const me=te===!0?re(r.BYTES):te;F.push(Tn("extraEntropy",me))}const ee=lp(...F),ne=z;function le(me){const ve=x(me);if(!h(ve))return;const Pe=u(ve),Ue=l.BASE.multiply(ve).toAffine(),M=a(Ue.x);if(M===zc)return;const V=a(Pe*a(ne+M*$));if(V===zc)return;let oe=(Ue.x===M?0:2)|Number(Ue.y&Ko),j=V;return W&&p(V)&&(j=m(V),oe^=1),new A(M,j,oe)}return{seed:ee,k2sig:le}}const P={lowS:e.lowS,prehash:!1},C={lowS:e.lowS,prehash:!1};function k(L,q,se=P){const{seed:X,k2sig:re}=T(L,q,se),W=e;return _9(W.hash.outputLen,W.nByteLength,W.hmac)(X,re)}l.BASE._setWindowSize(8);function K(L,q,se,X=C){var Ue;const re=L;if(q=Tn("msgHash",q),se=Tn("publicKey",se),"strict"in X)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:B}=X;let te,z;try{if(typeof re=="string"||Vu(re))try{te=A.fromDER(re)}catch(M){if(!(M instanceof Oh.Err))throw M;te=A.fromCompact(re)}else if(typeof re=="object"&&typeof re.r=="bigint"&&typeof re.s=="bigint"){const{r:M,s:V}=re;te=new A(M,V)}else throw new Error("PARSE");z=l.fromHex(se)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&te.hasHighS())return!1;B&&(q=e.hash(q));const{r:$,s:F}=te,ee=D(q),ne=u(F),le=a(ee*ne),me=a($*ne),ve=(Ue=l.BASE.multiplyAndAddUnsafe(z,le,me))==null?void 0:Ue.toAffine();return ve?a(ve.x)===$:!1}return{CURVE:e,getPublicKey:g,getSharedSecret:S,sign:k,verify:K,ProjectivePoint:l,Signature:A,utils:_}}class D9 extends jj{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Pee(e);const n=$C(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return fE(this),this.iHash.update(e),this}digestInto(e){fE(this),Nj(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const x9=(t,e,r)=>new D9(t,e).update(r).digest();x9.create=(t,e)=>new D9(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _ae(t){return{hash:t,hmac:(e,...r)=>x9(t,e,Mj(...r)),randomBytes:OC}}function P9(t,e){const r=n=>wae({...t,..._ae(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C9=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),XN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bae=BigInt(1),_x=BigInt(2),ZN=(t,e)=>(t+e/_x)/e;function Eae(t){const e=C9,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),l=t*t*t%e,c=l*l*t%e,d=dn(c,r,e)*c%e,h=dn(d,r,e)*c%e,f=dn(h,_x,e)*l%e,p=dn(f,s,e)*f%e,m=dn(p,i,e)*p%e,E=dn(m,a,e)*m%e,A=dn(E,u,e)*E%e,_=dn(A,a,e)*m%e,g=dn(_,r,e)*c%e,v=dn(g,o,e)*p%e,S=dn(v,n,e)*l%e,x=dn(S,_x,e);if(!bx.eql(bx.sqr(x),t))throw new Error("Cannot find square root");return x}const bx=cI(C9,void 0,void 0,{sqrt:Eae}),et=P9({a:BigInt(0),b:BigInt(7),Fp:bx,n:XN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=XN,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-bae*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=ZN(i*t,e),u=ZN(-n*t,e);let l=Xr(t-a*r-u*s,e),c=Xr(-a*n-u*i,e);const d=l>o,h=c>o;if(d&&(l=e-l),h&&(c=e-c),l>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:c}}}},lf);BigInt(0);et.ProjectivePoint;function Aae(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var Sae=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const YN="urn:jwk:";function Ln(t){return Sae(this,arguments,void 0,function*({jwk:e}){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);p9(n);const s=Aae(n),i=mr.string(s).toUint8Array(),o=yield g9.digest({data:i});return mr.uint8Array(o).toBase64Url()})}function Jh(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function dI(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function J0(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function I9(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function Tae(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var di=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Dae=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Tg=class tu{static adjustSignatureToLowS(e){return di(this,arguments,void 0,function*({signature:r}){const n=et.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return di(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield tu.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:mr.uint8Array(r).toBase64Url(),x:mr.uint8Array(n.x).toBase64Url(),y:mr.uint8Array(n.y).toBase64Url()};return s.kid=yield Ln({jwk:s}),s})}static bytesToPublicKey(e){return di(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield tu.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:mr.uint8Array(n.x).toBase64Url(),y:mr.uint8Array(n.y).toBase64Url()};return s.kid=yield Ln({jwk:s}),s})}static compressPublicKey(e){return di(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return di(this,arguments,void 0,function*({key:r}){const n=yield tu.privateKeyToBytes({privateKey:r}),s=yield tu.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:mr.uint8Array(s.x).toBase64Url(),y:mr.uint8Array(s.y).toBase64Url()};return i.kid=yield Ln({jwk:i}),i})}static convertDerToCompactSignature(e){return di(this,arguments,void 0,function*({derSignature:r}){return et.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return di(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return di(this,void 0,void 0,function*(){const e=et.utils.randomPrivateKey(),r=yield tu.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Ln({jwk:r}),r})}static getPublicKey(e){return di(this,arguments,void 0,function*({key:r}){var n;if(!(Jh(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=Dae(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Ln({jwk:s})),s})}static privateKeyToBytes(e){return di(this,arguments,void 0,function*({privateKey:r}){if(!Jh(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return mr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return di(this,arguments,void 0,function*({publicKey:r}){if(!(dI(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=mr.base64Url(r.x).toUint8Array(),i=mr.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return di(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield tu.privateKeyToBytes({privateKey:r}),i=yield tu.publicKeyToBytes({publicKey:n});return et.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return di(this,arguments,void 0,function*({data:r,key:n}){const s=yield tu.privateKeyToBytes({privateKey:n}),i=Iv(r);return et.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return di(this,arguments,void 0,function*({privateKeyBytes:r}){return et.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return di(this,arguments,void 0,function*({publicKeyBytes:r}){try{et.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return di(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield tu.publicKeyToBytes({publicKey:r}),o=Iv(s);return et.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return di(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=et.getPublicKey(r));const n=et.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k9=cI(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),xae=k9.create(BigInt("-3")),Pae=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Cae=P9({a:xae,b:Pae,Fp:k9,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},lf),tt=Cae;var fi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Iae=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Dg=class ru{static adjustSignatureToLowS(e){return fi(this,arguments,void 0,function*({signature:r}){const n=tt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return fi(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield ru.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:mr.uint8Array(r).toBase64Url(),x:mr.uint8Array(n.x).toBase64Url(),y:mr.uint8Array(n.y).toBase64Url()};return s.kid=yield Ln({jwk:s}),s})}static bytesToPublicKey(e){return fi(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield ru.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:mr.uint8Array(n.x).toBase64Url(),y:mr.uint8Array(n.y).toBase64Url()};return s.kid=yield Ln({jwk:s}),s})}static compressPublicKey(e){return fi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return fi(this,arguments,void 0,function*({key:r}){const n=yield ru.privateKeyToBytes({privateKey:r}),s=yield ru.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:mr.uint8Array(s.x).toBase64Url(),y:mr.uint8Array(s.y).toBase64Url()};return i.kid=yield Ln({jwk:i}),i})}static convertDerToCompactSignature(e){return fi(this,arguments,void 0,function*({derSignature:r}){return tt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return fi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return fi(this,void 0,void 0,function*(){const e=tt.utils.randomPrivateKey(),r=yield ru.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Ln({jwk:r}),r})}static getPublicKey(e){return fi(this,arguments,void 0,function*({key:r}){var n;if(!(Jh(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=Iae(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Ln({jwk:s})),s})}static privateKeyToBytes(e){return fi(this,arguments,void 0,function*({privateKey:r}){if(!Jh(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return mr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return fi(this,arguments,void 0,function*({publicKey:r}){if(!(dI(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=mr.base64Url(r.x).toUint8Array(),i=mr.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return fi(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield ru.privateKeyToBytes({privateKey:r}),i=yield ru.publicKeyToBytes({publicKey:n});return tt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return fi(this,arguments,void 0,function*({data:r,key:n}){const s=yield ru.privateKeyToBytes({privateKey:n}),i=Iv(r);return tt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return fi(this,arguments,void 0,function*({privateKeyBytes:r}){return tt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return fi(this,arguments,void 0,function*({publicKeyBytes:r}){try{tt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return fi(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield ru.publicKeyToBytes({publicKey:r}),o=Iv(s);return tt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return fi(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=tt.getPublicKey(r));const n=tt.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}};var xg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let QN=class extends oI{computePublicKey(e){return xg(this,arguments,void 0,function*({key:r}){if(!Jh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Tg.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Dg.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return xg(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield Tg.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield Dg.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return xg(this,arguments,void 0,function*({key:r}){if(!Jh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield Tg.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Dg.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return xg(this,arguments,void 0,function*({key:r,data:n}){if(!Jh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield Tg.sign({key:r,data:n});case"P-256":return yield Dg.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return xg(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!dI(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield Tg.verify({key:r,signature:n,data:s});case"P-256":return yield Dg.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};const J_=BigInt(2**32-1),Ex=BigInt(32);function $9(t,e=!1){return e?{h:Number(t&J_),l:Number(t>>Ex&J_)}:{h:Number(t>>Ex&J_)|0,l:Number(t&J_)|0}}function kae(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=$9(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const $ae=(t,e)=>BigInt(t>>>0)<<Ex|BigInt(e>>>0),Oae=(t,e,r)=>t>>>r,Rae=(t,e,r)=>t<<32-r|e>>>r,Nae=(t,e,r)=>t>>>r|e<<32-r,Bae=(t,e,r)=>t<<32-r|e>>>r,Fae=(t,e,r)=>t<<64-r|e>>>r-32,Mae=(t,e,r)=>t>>>r-32|e<<64-r,jae=(t,e)=>e,Uae=(t,e)=>t,Lae=(t,e,r)=>t<<r|e>>>32-r,Kae=(t,e,r)=>e<<r|t>>>32-r,Vae=(t,e,r)=>e<<r-32|t>>>64-r,qae=(t,e,r)=>t<<r-32|e>>>64-r;function Hae(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const zae=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Wae=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Gae=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Jae=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Xae=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Zae=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,qt={fromBig:$9,split:kae,toBig:$ae,shrSH:Oae,shrSL:Rae,rotrSH:Nae,rotrSL:Bae,rotrBH:Fae,rotrBL:Mae,rotr32H:jae,rotr32L:Uae,rotlSH:Lae,rotlSL:Kae,rotlBH:Vae,rotlBL:qae,add:Hae,add3L:zae,add3H:Wae,add4L:Gae,add4H:Jae,add5H:Zae,add5L:Xae},[Yae,Qae]=qt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ll=new Uint32Array(80),Kl=new Uint32Array(80);class eue extends Lj{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:l,El:c,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:E}=this;return[e,r,n,s,i,o,a,u,l,c,d,h,f,p,m,E]}set(e,r,n,s,i,o,a,u,l,c,d,h,f,p,m,E){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=c|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=E|0}process(e,r){for(let g=0;g<16;g++,r+=4)Ll[g]=e.getUint32(r),Kl[g]=e.getUint32(r+=4);for(let g=16;g<80;g++){const v=Ll[g-15]|0,S=Kl[g-15]|0,x=qt.rotrSH(v,S,1)^qt.rotrSH(v,S,8)^qt.shrSH(v,S,7),D=qt.rotrSL(v,S,1)^qt.rotrSL(v,S,8)^qt.shrSL(v,S,7),w=Ll[g-2]|0,b=Kl[g-2]|0,T=qt.rotrSH(w,b,19)^qt.rotrBH(w,b,61)^qt.shrSH(w,b,6),P=qt.rotrSL(w,b,19)^qt.rotrBL(w,b,61)^qt.shrSL(w,b,6),C=qt.add4L(D,P,Kl[g-7],Kl[g-16]),k=qt.add4H(C,x,T,Ll[g-7],Ll[g-16]);Ll[g]=k|0,Kl[g]=C|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:l,Dl:c,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:A,Hl:_}=this;for(let g=0;g<80;g++){const v=qt.rotrSH(d,h,14)^qt.rotrSH(d,h,18)^qt.rotrBH(d,h,41),S=qt.rotrSL(d,h,14)^qt.rotrSL(d,h,18)^qt.rotrBL(d,h,41),x=d&f^~d&m,D=h&p^~h&E,w=qt.add5L(_,S,D,Qae[g],Kl[g]),b=qt.add5H(w,A,v,x,Yae[g],Ll[g]),T=w|0,P=qt.rotrSH(n,s,28)^qt.rotrBH(n,s,34)^qt.rotrBH(n,s,39),C=qt.rotrSL(n,s,28)^qt.rotrBL(n,s,34)^qt.rotrBL(n,s,39),k=n&i^n&a^i&a,K=s&o^s&u^o&u;A=m|0,_=E|0,m=f|0,E=p|0,f=d|0,p=h|0,{h:d,l:h}=qt.add(l|0,c|0,b|0,T|0),l=a|0,c=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const L=qt.add3L(T,C,K);n=qt.add3H(L,b,P,k),s=L|0}({h:n,l:s}=qt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=qt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=qt.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:c}=qt.add(this.Dh|0,this.Dl|0,l|0,c|0),{h:d,l:h}=qt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=qt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:E}=qt.add(this.Gh|0,this.Gl|0,m|0,E|0),{h:A,l:_}=qt.add(this.Hh|0,this.Hl|0,A|0,_|0),this.set(n,s,i,o,a,u,l,c,d,h,f,p,m,E,A,_)}roundClean(){Ll.fill(0),Kl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const O9=Uj(()=>new eue);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ha=BigInt(0),Xs=BigInt(1),X_=BigInt(2),tue=BigInt(8),rue={zip215:!0};function nue(t){const e=lI(t);return $p(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function fI(t){const e=nue(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,l=X_<<BigInt(a*8)-Xs,c=r.create,d=e.uvRatio||((X,re)=>{try{return{isValid:!0,value:r.sqrt(X*r.inv(re))}}catch{return{isValid:!1,value:ha}}}),h=e.adjustScalarBytes||(X=>X),f=e.domain||((X,re,W)=>{if(re.length||W)throw new Error("Contexts/pre-hash are not supported");return X}),p=X=>typeof X=="bigint"&&ha<X,m=(X,re)=>p(X)&&p(re)&&X<re,E=X=>X===ha||m(X,l);function A(X,re){if(m(X,re))return X;throw new Error(`Expected valid scalar < ${re}, got ${typeof X} ${X}`)}function _(X){return X===ha?X:A(X,n)}const g=new Map;function v(X){if(!(X instanceof S))throw new Error("ExtendedPoint expected")}class S{constructor(re,W,B,te){if(this.ex=re,this.ey=W,this.ez=B,this.et=te,!E(re))throw new Error("x required");if(!E(W))throw new Error("y required");if(!E(B))throw new Error("z required");if(!E(te))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(re){if(re instanceof S)throw new Error("extended point not allowed");const{x:W,y:B}=re||{};if(!E(W)||!E(B))throw new Error("invalid affine point");return new S(W,B,Xs,c(W*B))}static normalizeZ(re){const W=r.invertBatch(re.map(B=>B.ez));return re.map((B,te)=>B.toAffine(W[te])).map(S.fromAffine)}_setWindowSize(re){this._WINDOW_SIZE=re,g.delete(this)}assertValidity(){const{a:re,d:W}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:B,ey:te,ez:z,et:$}=this,F=c(B*B),ee=c(te*te),ne=c(z*z),le=c(ne*ne),me=c(F*re),ve=c(ne*c(me+ee)),Pe=c(le+c(W*c(F*ee)));if(ve!==Pe)throw new Error("bad point: equation left != right (1)");const Ue=c(B*te),M=c(z*$);if(Ue!==M)throw new Error("bad point: equation left != right (2)")}equals(re){v(re);const{ex:W,ey:B,ez:te}=this,{ex:z,ey:$,ez:F}=re,ee=c(W*F),ne=c(z*te),le=c(B*F),me=c($*te);return ee===ne&&le===me}is0(){return this.equals(S.ZERO)}negate(){return new S(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:re}=e,{ex:W,ey:B,ez:te}=this,z=c(W*W),$=c(B*B),F=c(X_*c(te*te)),ee=c(re*z),ne=W+B,le=c(c(ne*ne)-z-$),me=ee+$,ve=me-F,Pe=ee-$,Ue=c(le*ve),M=c(me*Pe),V=c(le*Pe),oe=c(ve*me);return new S(Ue,M,oe,V)}add(re){v(re);const{a:W,d:B}=e,{ex:te,ey:z,ez:$,et:F}=this,{ex:ee,ey:ne,ez:le,et:me}=re;if(W===BigInt(-1)){const he=c((z-te)*(ne+ee)),Ce=c((z+te)*(ne-ee)),_e=c(Ce-he);if(_e===ha)return this.double();const G=c($*X_*me),J=c(F*X_*le),ge=J+G,be=Ce+he,ke=J-G,At=c(ge*_e),kt=c(be*ke),$r=c(ge*ke),Wt=c(_e*be);return new S(At,kt,Wt,$r)}const ve=c(te*ee),Pe=c(z*ne),Ue=c(F*B*me),M=c($*le),V=c((te+z)*(ee+ne)-ve-Pe),oe=M-Ue,j=M+Ue,I=c(Pe-W*ve),N=c(V*oe),Q=c(j*I),ce=c(V*I),pe=c(oe*j);return new S(N,Q,pe,ce)}subtract(re){return this.add(re.negate())}wNAF(re){return w.wNAFCached(this,g,re,S.normalizeZ)}multiply(re){const{p:W,f:B}=this.wNAF(A(re,n));return S.normalizeZ([W,B])[0]}multiplyUnsafe(re){let W=_(re);return W===ha?D:this.equals(D)||W===Xs?this:this.equals(x)?this.wNAF(W).p:w.unsafeLadder(this,W)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return w.unsafeLadder(this,n).is0()}toAffine(re){const{ex:W,ey:B,ez:te}=this,z=this.is0();re==null&&(re=z?tue:r.inv(te));const $=c(W*re),F=c(B*re),ee=c(te*re);if(z)return{x:ha,y:Xs};if(ee!==Xs)throw new Error("invZ was invalid");return{x:$,y:F}}clearCofactor(){const{h:re}=e;return re===Xs?this:this.multiplyUnsafe(re)}static fromHex(re,W=!1){const{d:B,a:te}=e,z=r.BYTES;re=Tn("pointHex",re,z);const $=re.slice(),F=re[z-1];$[z-1]=F&-129;const ee=Gd($);ee===ha||(W?A(ee,l):A(ee,r.ORDER));const ne=c(ee*ee),le=c(ne-Xs),me=c(B*ne-te);let{isValid:ve,value:Pe}=d(le,me);if(!ve)throw new Error("Point.fromHex: invalid y coordinate");const Ue=(Pe&Xs)===Xs,M=(F&128)!==0;if(!W&&Pe===ha&&M)throw new Error("Point.fromHex: x=0 and x_0=1");return M!==Ue&&(Pe=c(-Pe)),S.fromAffine({x:Pe,y:ee})}static fromPrivateKey(re){return P(re).point}toRawBytes(){const{x:re,y:W}=this.toAffine(),B=uy(W,r.BYTES);return B[B.length-1]|=re&Xs?128:0,B}toHex(){return cp(this.toRawBytes())}}S.BASE=new S(e.Gx,e.Gy,Xs,c(e.Gx*e.Gy)),S.ZERO=new S(ha,Xs,Xs,ha);const{BASE:x,ZERO:D}=S,w=T9(S,a*8);function b(X){return Xr(X,n)}function T(X){return b(Gd(X))}function P(X){const re=a;X=Tn("private key",X,re);const W=Tn("hashed private key",i(X),2*re),B=h(W.slice(0,re)),te=W.slice(re,2*re),z=T(B),$=x.multiply(z),F=$.toRawBytes();return{head:B,prefix:te,scalar:z,point:$,pointBytes:F}}function C(X){return P(X).pointBytes}function k(X=new Uint8Array,...re){const W=lp(...re);return T(i(f(W,Tn("context",X),!!s)))}function K(X,re,W={}){X=Tn("message",X),s&&(X=s(X));const{prefix:B,scalar:te,pointBytes:z}=P(re),$=k(W.context,B,X),F=x.multiply($).toRawBytes(),ee=k(W.context,F,z,X),ne=b($+ee*te);_(ne);const le=lp(F,uy(ne,r.BYTES));return Tn("result",le,a*2)}const L=rue;function q(X,re,W,B=L){const{context:te,zip215:z}=B,$=r.BYTES;X=Tn("signature",X,2*$),re=Tn("message",re),s&&(re=s(re));const F=Gd(X.slice($,2*$));let ee,ne,le;try{ee=S.fromHex(W,z),ne=S.fromHex(X.slice(0,$),z),le=x.multiplyUnsafe(F)}catch{return!1}if(!z&&ee.isSmallOrder())return!1;const me=k(te,ne.toRawBytes(),ee.toRawBytes(),re);return ne.add(ee.multiplyUnsafe(me)).subtract(le).clearCofactor().equals(S.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:C,sign:K,verify:q,ExtendedPoint:S,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>o(r.BYTES),precompute(X=8,re=S.BASE){return re._setWindowSize(X),re.multiply(BigInt(3)),re}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pg=BigInt(0),iT=BigInt(1);function iue(t){return $p(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function sue(t){const e=iue(t),{P:r}=e,n=g=>Xr(g,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(g=>g),u=e.powPminus2||(g=>b9(g,r-BigInt(2),r));function l(g,v,S){const x=n(g*(v-S));return v=n(v-x),S=n(S+x),[v,S]}function c(g){if(typeof g=="bigint"&&Pg<=g&&g<r)return g;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const d=(e.a-BigInt(2))/BigInt(4);function h(g,v){const S=c(g),x=c(v),D=S;let w=iT,b=Pg,T=S,P=iT,C=Pg,k;for(let L=BigInt(s-1);L>=Pg;L--){const q=x>>L&iT;C^=q,k=l(C,w,T),w=k[0],T=k[1],k=l(C,b,P),b=k[0],P=k[1],C=q;const se=w+b,X=n(se*se),re=w-b,W=n(re*re),B=X-W,te=T+P,z=T-P,$=n(z*se),F=n(te*re),ee=$+F,ne=$-F;T=n(ee*ee),P=n(D*n(ne*ne)),w=n(X*W),b=n(B*(X+n(d*B)))}k=l(C,w,T),w=k[0],T=k[1],k=l(C,b,P),b=k[0],P=k[1];const K=u(b);return n(w*K)}function f(g){return uy(n(g),i)}function p(g){const v=Tn("u coordinate",g,i);return o===32&&(v[31]&=127),Gd(v)}function m(g){const v=Tn("scalar",g),S=v.length;if(S!==i&&S!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${S}`);return Gd(a(v))}function E(g,v){const S=p(v),x=m(g),D=h(S,x);if(D===Pg)throw new Error("Invalid private or public key received");return f(D)}const A=f(e.Gu);function _(g){return E(g,A)}return{scalarMult:E,scalarMultBase:_,getSharedSecret:(g,v)=>E(g,v),getPublicKey:g=>_(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),eB=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const oue=BigInt(1),Ax=BigInt(2),aue=BigInt(5),tB=BigInt(10),uue=BigInt(20),cue=BigInt(40),rB=BigInt(80);function R9(t){const e=kv,n=t*t%e*t%e,s=dn(n,Ax,e)*n%e,i=dn(s,oue,e)*t%e,o=dn(i,aue,e)*i%e,a=dn(o,tB,e)*o%e,u=dn(a,uue,e)*a%e,l=dn(u,cue,e)*u%e,c=dn(l,rB,e)*l%e,d=dn(c,rB,e)*l%e,h=dn(d,tB,e)*o%e;return{pow_p_5_8:dn(h,Ax,e)*t%e,b2:n}}function N9(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function lue(t,e){const r=kv,n=Xr(e*e*e,r),s=Xr(n*n*e,r),i=R9(t*s).pow_p_5_8;let o=Xr(t*n*i,r);const a=Xr(e*o*o,r),u=o,l=Xr(o*eB,r),c=a===t,d=a===Xr(-t,r),h=a===Xr(-t*eB,r);return c&&(o=u),(d||h)&&(o=l),oae(o,r)&&(o=Xr(-o,r)),{isValid:c||d,value:o}}const Qo=cI(kv,void 0,!0),$v={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qo,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:O9,randomBytes:OC,adjustScalarBytes:N9,uvRatio:lue},wr=fI($v);function B9(t,e,r){if(e.length>255)throw new Error("Context is too big");return Mj(Fj("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}({...$v});({...$v});const Oi=sue({P:kv,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=kv,{pow_p_5_8:r,b2:n}=R9(t);return Xr(dn(r,BigInt(3),e)*n,e)},adjustScalarBytes:N9,randomBytes:OC});function Dw(t){const{y:e}=wr.ExtendedPoint.fromHex(t),r=BigInt(1);return Qo.toBytes(Qo.create((r+e)*Qo.inv(r-e)))}function xw(t){const e=$v.hash(t.subarray(0,32));return $v.adjustScalarBytes(e).subarray(0,32)}const due=(Qo.ORDER+BigInt(3))/BigInt(8);Qo.pow(Ax,due);Qo.sqrt(Qo.neg(Qo.ONE));(Qo.ORDER-BigInt(5))/BigInt(8);BigInt(486662);dae(Qo,Qo.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var xo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},fue=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Cg=class ld{static bytesToPrivateKey(e){return xo(this,arguments,void 0,function*({privateKeyBytes:r}){const n=wr.getPublicKey(r),s={crv:"Ed25519",d:mr.uint8Array(r).toBase64Url(),kty:"OKP",x:mr.uint8Array(n).toBase64Url()};return s.kid=yield Ln({jwk:s}),s})}static bytesToPublicKey(e){return xo(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:mr.uint8Array(r).toBase64Url()};return n.kid=yield Ln({jwk:n}),n})}static computePublicKey(e){return xo(this,arguments,void 0,function*({key:r}){const n=yield ld.privateKeyToBytes({privateKey:r}),s=wr.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:mr.uint8Array(s).toBase64Url()};return i.kid=yield Ln({jwk:i}),i})}static convertPrivateKeyToX25519(e){return xo(this,arguments,void 0,function*({privateKey:r}){const n=yield ld.privateKeyToBytes({privateKey:r}),s=xw(n),i=Oi.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:mr.uint8Array(s).toBase64Url(),x:mr.uint8Array(i).toBase64Url()};return o.kid=yield Ln({jwk:o}),o})}static convertPublicKeyToX25519(e){return xo(this,arguments,void 0,function*({publicKey:r}){const n=yield ld.publicKeyToBytes({publicKey:r});if(!(yield ld.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=Dw(n),o={kty:"OKP",crv:"X25519",x:mr.uint8Array(i).toBase64Url()};return o.kid=yield Ln({jwk:o}),o})}static generateKey(){return xo(this,void 0,void 0,function*(){const e=wr.utils.randomPrivateKey(),r=yield ld.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Ln({jwk:r}),r})}static getPublicKey(e){return xo(this,arguments,void 0,function*({key:r}){var n;if(!(J0(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=fue(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Ln({jwk:s})),s})}static privateKeyToBytes(e){return xo(this,arguments,void 0,function*({privateKey:r}){if(!J0(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return mr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return xo(this,arguments,void 0,function*({publicKey:r}){if(!I9(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return mr.base64Url(r.x).toUint8Array()})}static sign(e){return xo(this,arguments,void 0,function*({key:r,data:n}){const s=yield ld.privateKeyToBytes({privateKey:r});return wr.sign(n,s)})}static validatePublicKey(e){return xo(this,arguments,void 0,function*({publicKeyBytes:r}){try{wr.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return xo(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield ld.publicKeyToBytes({publicKey:r});return wr.verify(n,s,i)})}};var Ig=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let hue=class extends oI{computePublicKey(e){return Ig(this,arguments,void 0,function*({key:r}){if(!J0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Cg.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Ig(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield Cg.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return Ig(this,arguments,void 0,function*({key:r}){if(!J0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Cg.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Ig(this,arguments,void 0,function*({key:r,data:n}){if(!J0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Cg.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Ig(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!I9(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Cg.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var mc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const sT={Ed25519:{implementation:hue,names:["Ed25519"]},secp256k1:{implementation:QN,names:["ES256K","secp256k1"]},secp256r1:{implementation:QN,names:["ES256","secp256r1"]},"SHA-256":{implementation:zoe,names:["SHA-256"]}};let pue=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e==null?void 0:e.keyStore)!==null&&r!==void 0?r:new koe}digest(e){return mc(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return mc(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return mc(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${YN}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return mc(this,arguments,void 0,function*({key:r}){const n=yield Ln({jwk:r});return`${YN}${n}`})}getPublicKey(e){return mc(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return mc(this,arguments,void 0,function*({key:r}){var n;if(!Tae(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield Ln({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return mc(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return mc(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;const n=(r=sT[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const s in sT){const i=sT[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return mc(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};function mue(t){return Foe(t)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const F9=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function M9(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const yue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yue)throw new Error("Non little-endian hardware is not supported");function hI(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Sx(t){if(typeof t=="string")t=hI(t);else if(M9(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function gue(t,e){if(!M9(t))throw new Error("Uint8Array expected");if(t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function vue(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function wue(t,...e){if(!vue(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function nB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _ue(t,e){wue(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const hi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class bue{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Sx(e),gue(e,32);const r=hi(e,0),n=hi(e,2),s=hi(e,4),i=hi(e,6),o=hi(e,8),a=hi(e,10),u=hi(e,12),l=hi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let c=0;c<8;c++)this.pad[c]=hi(e,16+2*c)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],l=o[2],c=o[3],d=o[4],h=o[5],f=o[6],p=o[7],m=o[8],E=o[9],A=hi(e,r+0),_=hi(e,r+2),g=hi(e,r+4),v=hi(e,r+6),S=hi(e,r+8),x=hi(e,r+10),D=hi(e,r+12),w=hi(e,r+14);let b=i[0]+(A&8191),T=i[1]+((A>>>13|_<<3)&8191),P=i[2]+((_>>>10|g<<6)&8191),C=i[3]+((g>>>7|v<<9)&8191),k=i[4]+((v>>>4|S<<12)&8191),K=i[5]+(S>>>1&8191),L=i[6]+((S>>>14|x<<2)&8191),q=i[7]+((x>>>11|D<<5)&8191),se=i[8]+((D>>>8|w<<8)&8191),X=i[9]+(w>>>5|s),re=0,W=re+b*a+T*(5*E)+P*(5*m)+C*(5*p)+k*(5*f);re=W>>>13,W&=8191,W+=K*(5*h)+L*(5*d)+q*(5*c)+se*(5*l)+X*(5*u),re+=W>>>13,W&=8191;let B=re+b*u+T*a+P*(5*E)+C*(5*m)+k*(5*p);re=B>>>13,B&=8191,B+=K*(5*f)+L*(5*h)+q*(5*d)+se*(5*c)+X*(5*l),re+=B>>>13,B&=8191;let te=re+b*l+T*u+P*a+C*(5*E)+k*(5*m);re=te>>>13,te&=8191,te+=K*(5*p)+L*(5*f)+q*(5*h)+se*(5*d)+X*(5*c),re+=te>>>13,te&=8191;let z=re+b*c+T*l+P*u+C*a+k*(5*E);re=z>>>13,z&=8191,z+=K*(5*m)+L*(5*p)+q*(5*f)+se*(5*h)+X*(5*d),re+=z>>>13,z&=8191;let $=re+b*d+T*c+P*l+C*u+k*a;re=$>>>13,$&=8191,$+=K*(5*E)+L*(5*m)+q*(5*p)+se*(5*f)+X*(5*h),re+=$>>>13,$&=8191;let F=re+b*h+T*d+P*c+C*l+k*u;re=F>>>13,F&=8191,F+=K*a+L*(5*E)+q*(5*m)+se*(5*p)+X*(5*f),re+=F>>>13,F&=8191;let ee=re+b*f+T*h+P*d+C*c+k*l;re=ee>>>13,ee&=8191,ee+=K*u+L*a+q*(5*E)+se*(5*m)+X*(5*p),re+=ee>>>13,ee&=8191;let ne=re+b*p+T*f+P*h+C*d+k*c;re=ne>>>13,ne&=8191,ne+=K*l+L*u+q*a+se*(5*E)+X*(5*m),re+=ne>>>13,ne&=8191;let le=re+b*m+T*p+P*f+C*h+k*d;re=le>>>13,le&=8191,le+=K*c+L*l+q*u+se*a+X*(5*E),re+=le>>>13,le&=8191;let me=re+b*E+T*m+P*p+C*f+k*h;re=me>>>13,me&=8191,me+=K*d+L*c+q*l+se*u+X*a,re+=me>>>13,me&=8191,re=(re<<2)+re|0,re=re+W|0,W=re&8191,re=re>>>13,B+=re,i[0]=W,i[1]=B,i[2]=te,i[3]=z,i[4]=$,i[5]=F,i[6]=ee,i[7]=ne,i[8]=le,i[9]=me}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){nB(this);const{buffer:r,blockLen:n}=this;e=Sx(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){nB(this),_ue(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Eue(t){const e=(n,s)=>t(s).update(Sx(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Eue(t=>new bue(t));const Aue=hI("expand 16-byte k"),Sue=hI("expand 32-byte k");F9(Aue);F9(Sue);var Ov;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(Ov||(Ov={}));const Ri={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};let _r=class j9{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;const r=j9.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){const l={},c=o.slice(1).split("&");for(const d of c){const[h,f]=d.split("=");l[h]=f}u.params=l}return u}};_r.METHOD_PATTERN="([a-z0-9]+)";_r.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";_r.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${_r.PCT_ENCODED_PATTERN})`;_r.METHOD_ID_PATTERN=`((?:${_r.ID_CHAR_PATTERN}*:)*(${_r.ID_CHAR_PATTERN}+))`;_r.PATH_PATTERN="(/[^#?]*)?";_r.QUERY_PATTERN="([?][^#]*)?";_r.FRAGMENT_PATTERN="(#.*)?";_r.DID_URI_PATTERN=new RegExp(`^did:(?<method>${_r.METHOD_PATTERN}):(?<id>${_r.METHOD_ID_PATTERN})(?<path>${_r.PATH_PATTERN})(?<query>${_r.QUERY_PATTERN})(?<fragment>${_r.FRAGMENT_PATTERN})$`);let ht=class U9 extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U9)}};var st;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(st||(st={}));function Tue(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Due=Tue,xue=Due;const Pue=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Cue=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Iue=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return L9(this,e)}},kue=class{constructor(e){this.decoders=e}or(e){return L9(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const L9=(t,e)=>new kue({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let $ue=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Cue(e,r,n),this.decoder=new Iue(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const K9=({name:t,prefix:e,encode:r,decode:n})=>new $ue(t,e,r,n),V9=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=xue(r,e);return K9({prefix:t,name:e,encode:n,decode:i=>Pue(s(i))})},Oue=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Rue=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},mo=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>K9({prefix:e,name:t,encode(s){return Rue(s,n,r)},decode(s){return Oue(s,n,r,t)}});mo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});mo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});mo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});mo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});mo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});mo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});mo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});mo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const iB=mo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Z_=V9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});V9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});mo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});mo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const yc=mo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});mo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Nue(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function Bue(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Tx(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var kg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},sB=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const Y_=new TextEncoder,Zf=new TextDecoder;let vt=class Ss{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Ss(e,"ArrayBuffer")}static asyncIterable(e){if(!Bue(e))throw new TypeError("Input must be of type AsyncIterable.");return new Ss(e,"AsyncIterable")}static base32Z(e){return new Ss(e,"Base32Z")}static base58Btc(e){return new Ss(e,"Base58Btc")}static base64Url(e){return new Ss(e,"Base64Url")}static bufferSource(e){return new Ss(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ss(e,"Hex")}static multibase(e){return new Ss(e,"Multibase")}static object(e){return new Ss(e,"Object")}static string(e){return new Ss(e,"String")}static uint8Array(e){return new Ss(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Z_.baseDecode(this.data).buffer;case"Base64Url":return yc.baseDecode(this.data).buffer;case"BufferSource":{if(Tx(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Nue(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return kg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return iB.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return Z_.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Z_.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return yc.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return yc.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=Y_.encode(e);return yc.baseEncode(r)}case"String":{const e=Y_.encode(this.data);return yc.baseEncode(e)}case"Uint8Array":return yc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return kg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=sB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ss.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ss.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=yc.baseDecode(this.data),r=Zf.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=Zf.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return kg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Zf.decode(this.data);case"Base64Url":{const e=yc.baseDecode(this.data);return Zf.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Zf.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return kg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=sB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=Zf.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Zf.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return iB.baseDecode(this.data);case"Base58Btc":return Z_.baseDecode(this.data);case"Base64Url":return yc.baseDecode(this.data);case"BufferSource":{const e=Tx(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return Y_.encode(e)}case"String":return Y_.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return kg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Fue=q9,oB=128,Mue=127,jue=~Mue,Uue=Math.pow(2,31);function q9(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Uue;)e[r++]=t&255|oB,t/=128;for(;t&jue;)e[r++]=t&255|oB,t>>>=7;return e[r]=t|0,q9.bytes=r-n+1,e}var Lue=Dx,Kue=128,aB=127;function Dx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Dx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&aB)<<s:(o&aB)*Math.pow(2,s),s+=7}while(o>=Kue);return Dx.bytes=i-n,r}var Vue=Math.pow(2,7),que=Math.pow(2,14),Hue=Math.pow(2,21),zue=Math.pow(2,28),Wue=Math.pow(2,35),Gue=Math.pow(2,42),Jue=Math.pow(2,49),Xue=Math.pow(2,56),Zue=Math.pow(2,63),Yue=function(t){return t<Vue?1:t<que?2:t<Hue?3:t<zue?4:t<Wue?5:t<Gue?6:t<Jue?7:t<Xue?8:t<Zue?9:10},Que={encode:Fue,decode:Lue,encodingLength:Yue},_E=Que;const uB=(t,e=0)=>[_E.decode(t,e),_E.decode.bytes],ece=(t,e,r=0)=>(_E.encode(t,e,r),e),tce=t=>_E.encodingLength(t);let na=class dd{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=dd.codeToName.has(n)?n:dd.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=tce(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),ece(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=uB(r);return n}static getCodeFromName(e){const{name:r}=e,n=dd.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=dd.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){dd.codeToName.set(e.code,e.name),dd.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=uB(r),i=dd.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};na.codeToName=new Map;na.nameToCode=new Map;na.registerCodec({code:237,name:"ed25519-pub"});na.registerCodec({code:4864,name:"ed25519-priv"});na.registerCodec({code:236,name:"x25519-pub"});na.registerCodec({code:4866,name:"x25519-priv"});na.registerCodec({code:231,name:"secp256k1-pub"});na.registerCodec({code:4865,name:"secp256k1-priv"});function H9(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&H9(t[e])})}var Yf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let rce=class{constructor(){this.store=new Map}clear(){return Yf(this,void 0,void 0,function*(){this.store.clear()})}close(){return Yf(this,void 0,void 0,function*(){})}delete(e){return Yf(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return Yf(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return Yf(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return Yf(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return Yf(this,void 0,void 0,function*(){this.store.set(e,r)})}};var nce=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let z9=class{static digest({data:e}){return nce(this,void 0,void 0,function*(){return lf(e)})}},pI=class{};var ice=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let sce=class extends pI{digest({algorithm:e,data:r}){return ice(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield z9.digest({data:r})}})}};function oce(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var ace=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const cB="urn:jwk:";function Rr({jwk:t}){return ace(this,void 0,void 0,function*(){const e=t.kty;let r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);H9(r);const n=oce(r),s=vt.string(n).toUint8Array(),i=yield z9.digest({data:s});return vt.uint8Array(i).toBase64Url()})}function Xh(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function mI(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Zh(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function yI(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function uce(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var pi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},cce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let uo=class nu{static adjustSignatureToLowS({signature:e}){return pi(this,void 0,void 0,function*(){const r=et.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return pi(this,void 0,void 0,function*(){const r=yield nu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:vt.uint8Array(e).toBase64Url(),x:vt.uint8Array(r.x).toBase64Url(),y:vt.uint8Array(r.y).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return pi(this,void 0,void 0,function*(){const r=yield nu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:vt.uint8Array(r.x).toBase64Url(),y:vt.uint8Array(r.y).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return pi(this,void 0,void 0,function*(){return et.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return pi(this,void 0,void 0,function*(){const r=yield nu.privateKeyToBytes({privateKey:e}),n=yield nu.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:vt.uint8Array(n.x).toBase64Url(),y:vt.uint8Array(n.y).toBase64Url()};return s.kid=yield Rr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return pi(this,void 0,void 0,function*(){return et.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return pi(this,void 0,void 0,function*(){return et.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return pi(this,void 0,void 0,function*(){const e=et.utils.randomPrivateKey(),r=yield nu.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rr({jwk:r}),r})}static getPublicKey({key:e}){var r;return pi(this,void 0,void 0,function*(){if(!(Xh(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let n=cce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Rr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return pi(this,void 0,void 0,function*(){if(!Xh(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return vt.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return pi(this,void 0,void 0,function*(){if(!(mI(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=vt.base64Url(e.x).toUint8Array(),s=vt.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return pi(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield nu.privateKeyToBytes({privateKey:e}),s=yield nu.publicKeyToBytes({publicKey:r});return et.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return pi(this,void 0,void 0,function*(){const n=yield nu.privateKeyToBytes({privateKey:r}),s=lf(e);return et.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return pi(this,void 0,void 0,function*(){return et.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return pi(this,void 0,void 0,function*(){try{et.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return pi(this,void 0,void 0,function*(){const s=yield nu.publicKeyToBytes({publicKey:e}),i=lf(n);return et.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return pi(this,void 0,void 0,function*(){e.byteLength===32&&(e=et.getPublicKey(e));const r=et.ProjectivePoint.fromHex(e),n=Zr(r.x,32),s=Zr(r.y,32);return{x:n,y:s}})}};var mi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},lce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Wo=class iu{static adjustSignatureToLowS({signature:e}){return mi(this,void 0,void 0,function*(){const r=tt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return mi(this,void 0,void 0,function*(){const r=yield iu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:vt.uint8Array(e).toBase64Url(),x:vt.uint8Array(r.x).toBase64Url(),y:vt.uint8Array(r.y).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return mi(this,void 0,void 0,function*(){const r=yield iu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:vt.uint8Array(r.x).toBase64Url(),y:vt.uint8Array(r.y).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return mi(this,void 0,void 0,function*(){return tt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return mi(this,void 0,void 0,function*(){const r=yield iu.privateKeyToBytes({privateKey:e}),n=yield iu.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:vt.uint8Array(n.x).toBase64Url(),y:vt.uint8Array(n.y).toBase64Url()};return s.kid=yield Rr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return mi(this,void 0,void 0,function*(){return tt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return mi(this,void 0,void 0,function*(){return tt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return mi(this,void 0,void 0,function*(){const e=tt.utils.randomPrivateKey(),r=yield iu.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rr({jwk:r}),r})}static getPublicKey({key:e}){var r;return mi(this,void 0,void 0,function*(){if(!(Xh(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let n=lce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Rr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return mi(this,void 0,void 0,function*(){if(!Xh(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return vt.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return mi(this,void 0,void 0,function*(){if(!(mI(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=vt.base64Url(e.x).toUint8Array(),s=vt.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return mi(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield iu.privateKeyToBytes({privateKey:e}),s=yield iu.publicKeyToBytes({publicKey:r});return tt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return mi(this,void 0,void 0,function*(){const n=yield iu.privateKeyToBytes({privateKey:r}),s=lf(e);return tt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return mi(this,void 0,void 0,function*(){return tt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return mi(this,void 0,void 0,function*(){try{tt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return mi(this,void 0,void 0,function*(){const s=yield iu.publicKeyToBytes({publicKey:e}),i=lf(n);return tt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return mi(this,void 0,void 0,function*(){e.byteLength===32&&(e=tt.getPublicKey(e));const r=tt.ProjectivePoint.fromHex(e),n=Zr(r.x,32),s=Zr(r.y,32);return{x:n,y:s}})}};var $g=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let lB=class extends pI{computePublicKey({key:e}){return $g(this,void 0,void 0,function*(){if(!Xh(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield uo.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Wo.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return $g(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{const r=yield uo.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Wo.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return $g(this,void 0,void 0,function*(){if(!Xh(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield uo.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Wo.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return $g(this,void 0,void 0,function*(){if(!Xh(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield uo.sign({key:e,data:r});case"P-256":return yield Wo.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return $g(this,void 0,void 0,function*(){if(!mI(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield uo.verify({key:e,signature:r,data:n});case"P-256":return yield Wo.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Po=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},dce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Bs=class fd{static bytesToPrivateKey({privateKeyBytes:e}){return Po(this,void 0,void 0,function*(){const r=wr.getPublicKey(e),n={crv:"Ed25519",d:vt.uint8Array(e).toBase64Url(),kty:"OKP",x:vt.uint8Array(r).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Po(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:vt.uint8Array(e).toBase64Url()};return r.kid=yield Rr({jwk:r}),r})}static computePublicKey({key:e}){return Po(this,void 0,void 0,function*(){const r=yield fd.privateKeyToBytes({privateKey:e}),n=wr.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:vt.uint8Array(n).toBase64Url()};return s.kid=yield Rr({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return Po(this,void 0,void 0,function*(){const r=yield fd.privateKeyToBytes({privateKey:e}),n=xw(r),s=Oi.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:vt.uint8Array(n).toBase64Url(),x:vt.uint8Array(s).toBase64Url()};return i.kid=yield Rr({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return Po(this,void 0,void 0,function*(){const r=yield fd.publicKeyToBytes({publicKey:e});if(!(yield fd.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const s=Dw(r),i={kty:"OKP",crv:"X25519",x:vt.uint8Array(s).toBase64Url()};return i.kid=yield Rr({jwk:i}),i})}static generateKey(){return Po(this,void 0,void 0,function*(){const e=wr.utils.randomPrivateKey(),r=yield fd.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rr({jwk:r}),r})}static getPublicKey({key:e}){var r;return Po(this,void 0,void 0,function*(){if(!(Zh(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let n=dce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Rr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return Po(this,void 0,void 0,function*(){if(!Zh(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return vt.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Po(this,void 0,void 0,function*(){if(!yI(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return vt.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return Po(this,void 0,void 0,function*(){const n=yield fd.privateKeyToBytes({privateKey:e});return wr.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return Po(this,void 0,void 0,function*(){try{wr.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Po(this,void 0,void 0,function*(){const s=yield fd.publicKeyToBytes({publicKey:e});return wr.verify(r,n,s)})}};var Og=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let fce=class extends pI{computePublicKey({key:e}){return Og(this,void 0,void 0,function*(){if(!Zh(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Bs.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Og(this,void 0,void 0,function*(){switch(e){case"Ed25519":{const r=yield Bs.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Og(this,void 0,void 0,function*(){if(!Zh(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Bs.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Og(this,void 0,void 0,function*(){if(!Zh(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Bs.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Og(this,void 0,void 0,function*(){if(!yI(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Bs.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var gc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const oT={Ed25519:{implementation:fce,names:["Ed25519"]},secp256k1:{implementation:lB,names:["ES256K","secp256k1"]},secp256r1:{implementation:lB,names:["ES256","secp256r1"]},"SHA-256":{implementation:sce,names:["SHA-256"]}};let cl=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e==null?void 0:e.keyStore)!==null&&r!==void 0?r:new rce}digest({algorithm:e,data:r}){return gc(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return gc(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return gc(this,void 0,void 0,function*(){const n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if((n==null?void 0:n.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const s=`${cB}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return gc(this,void 0,void 0,function*(){const r=yield Rr({jwk:e});return`${cB}${r}`})}getPublicKey({keyUri:e}){return gc(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return gc(this,void 0,void 0,function*(){if(!uce(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield Rr({jwk:n}));const s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return gc(this,void 0,void 0,function*(){const n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return gc(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;const n=(r=oT[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const s in oT){const i=oT[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return gc(this,void 0,void 0,function*(){const r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};function hce(t){const e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}var Vl=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},pce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let W9=class g0{static bytesToPrivateKey({privateKeyBytes:e}){return Vl(this,void 0,void 0,function*(){const r=Oi.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:vt.uint8Array(e).toBase64Url(),x:vt.uint8Array(r).toBase64Url()};return n.kid=yield Rr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Vl(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:vt.uint8Array(e).toBase64Url()};return r.kid=yield Rr({jwk:r}),r})}static computePublicKey({key:e}){return Vl(this,void 0,void 0,function*(){const r=yield g0.privateKeyToBytes({privateKey:e}),n=Oi.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:vt.uint8Array(n).toBase64Url()};return s.kid=yield Rr({jwk:s}),s})}static generateKey(){return Vl(this,void 0,void 0,function*(){const e=Oi.utils.randomPrivateKey(),r=yield g0.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rr({jwk:r}),r})}static getPublicKey({key:e}){var r;return Vl(this,void 0,void 0,function*(){if(!(Zh(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let n=pce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Rr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return Vl(this,void 0,void 0,function*(){if(!Zh(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return vt.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Vl(this,void 0,void 0,function*(){if(!yI(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return vt.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Vl(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield g0.privateKeyToBytes({privateKey:e}),s=yield g0.publicKeyToBytes({publicKey:r});return Oi.getSharedSecret(n,s)})}};function Ia(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function G9({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(xx))!==null&&r!==void 0?r:[]),Object.keys(Ov).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(xx))!==null&&o!==void 0?o:[])}),n}function mce({didDocument:t}){const r=G9({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function yce({didDocument:t,methodId:e}){const r=[];return Object.keys(Ov).forEach(n=>{if(Array.isArray(t[n])){const s=t[n],i=Ia(e);s.some(a=>{const u=Ia(a)===i,l=xx(a)&&Ia(a.id)===i;return u||l})&&r.push(n)}}),r}function xx(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function J9({keyBytes:t,multicodecCode:e,multicodecName:r}){const n=na.addPrefix({code:e,data:t,name:r}),s=vt.uint8Array(n).toBase58Btc();return vt.base58Btc(s).toMultibase()}function dB({multibaseKeyId:t}){try{const e=vt.multibase(t).toBase58Btc(),r=vt.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=na.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new ht(st.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Rg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let ff=class X9{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Rg(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return Rg(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var l,c;return Ia(u.id)===((l=Ia(e==null?void 0:e.methodId))!==null&&l!==void 0?l:Ia((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new ht(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:hce(i),keyId:n.id,sign(u){return Rg(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(u){return Rg(this,arguments,void 0,function*({data:l,signature:c}){return yield o.verify({data:l,key:i,signature:c})})}}})}static import(e){return Rg(this,arguments,void 0,function*({portableDid:r,keyManager:n=new cl}){var s;const i=G9({didDocument:r.document});if(i.length===0)throw new ht(st.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new X9({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const fB="0123456789abcdef",Z9=[];for(let t=0;t<256;t++)Z9[t]=fB[t>>4&15]+fB[t&15];const gce=t=>{const e=t.length;let r="",n=0;for(;n<e;)r+=Z9[t[n++]];return r},vce=(t,e=0)=>{const r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}const n=new Uint8Array(e);let s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var hB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wce=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Q_=0;Q_<hB.length;Q_++)wce[hB.charCodeAt(Q_)]=Q_;const _ce=new TextDecoder,Y9=(t,e)=>_ce.decode(t),bce=new TextEncoder,ll=t=>bce.encode(t),pB=typeof window<"u"?window:self,mB=pB.crypto||pB.msCrypto||{};mB.subtle||mB.webkitSubtle;function Pw(t){const e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function Q9(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function yr(t,e,r){const n=[];let s=null;return yr._encode(n,t),s=vce(n),yr.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}yr.bytes=-1;yr._floatConversionDetected=!1;yr._encode=function(t,e){if(e!=null)switch(Q9(e)){case"object":yr.dict(t,e);break;case"map":yr.dictMap(t,e);break;case"array":yr.list(t,e);break;case"set":yr.listSet(t,e);break;case"string":yr.string(t,e);break;case"number":yr.number(t,e);break;case"boolean":yr.number(t,e);break;case"arraybufferview":yr.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":yr.buffer(t,new Uint8Array(e));break}};const nS=new Uint8Array([101]),eL=new Uint8Array([100]),tL=new Uint8Array([108]);yr.buffer=function(t,e){t.push(ll(e.length+":"),e)};yr.string=function(t,e){t.push(ll(ll(e).byteLength+":"+e))};yr.number=function(t,e){if(Number.isInteger(e))return t.push(ll("i"+BigInt(e)+"e"));const r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(ll("i"+i+"e")),i!==e&&!yr._floatConversionDetected&&(yr._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};yr.dict=function(t,e){t.push(eL);let r=0,n;const s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(yr.string(t,n),yr._encode(t,e[n]));t.push(nS)};yr.dictMap=function(t,e){t.push(eL);const r=Array.from(e.keys()).sort();for(const n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?yr._encode(t,n):yr.string(t,String(n)),yr._encode(t,e.get(n)));t.push(nS)};yr.list=function(t,e){let r=0;const n=e.length;for(t.push(tL);r<n;r++)e[r]!=null&&yr._encode(t,e[r]);t.push(nS)};yr.listSet=function(t,e){t.push(tL);for(const r of e)r!=null&&yr._encode(t,r);t.push(nS)};const Ece=105,Ace=58,Sce=100,Tce=108,gI=101;function rL(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){const o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function St(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),St.position=0,St.encoding=n||null,St.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):ll(t),St.bytes=St.data.length,St.next())}St.bytes=0;St.position=0;St.data=null;St.encoding=null;St.next=function(){switch(St.data[St.position]){case Sce:return St.dictionary();case Tce:return St.list();case Ece:return St.integer();default:return St.buffer()}};St.find=function(t){let e=St.position;const r=St.data.length,n=St.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};St.dictionary=function(){St.position++;const t={};for(;St.data[St.position]!==gI;){const e=St.buffer();let r=Y9(e);r.includes("�")&&(r=gce(e)),t[r]=St.next()}return St.position++,t};St.list=function(){St.position++;const t=[];for(;St.data[St.position]!==gI;)t.push(St.next());return St.position++,t};St.integer=function(){const t=St.find(gI),e=rL(St.data,St.position+1,t);return St.position+=t+1-St.position,e};St.buffer=function(){let t=St.find(Ace);const e=rL(St.data,St.position,t),r=++t+e;return St.position=r,St.encoding?Y9(St.data.slice(t,r)):St.data.slice(t,r)};function Dce(t){let e=2;for(const r of t)e+=Cw(r);return e}function xce(t){let e=2;for(const[r,n]of t){const s=ll(r).byteLength;e+=Pw(s)+1+s,e+=Cw(n)}return e}function Pce(t){let e=2;const r=Object.keys(t);for(let n=0;n<r.length;n++){const s=ll(r[n]).byteLength;e+=Pw(s)+1+s,e+=Cw(t[r[n]])}return e}function Cce(t){const e=ll(t).byteLength;return Pw(e)+1+e}function Ice(t){const e=t.byteLength-t.byteOffset;return Pw(e)+1+e}function Cw(t){if(t==null)return 0;const r=Q9(t);switch(r){case"arraybufferview":return Ice(t);case"string":return Cce(t);case"array":case"set":return Dce(t);case"number":return 1+Pw(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return Pce(t);case"map":return xce(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}const kce=Cw,cy={encode:yr,decode:St,byteLength:Cw,encodingLength:kce},$ce=/^(\d{1,3}\.){3,3}\d{1,3}$/,yB=4,Oce=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,eb=16,Ru={name:"v4",size:yB,isFormat:t=>$ce.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+yB);const n=t.length;let s=0;for(let i=0;i<n;){const o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Jd={name:"v6",size:eb,isFormat:t=>t.length>0&&Oce.test(t),encode(t,e,r){r=~~r;let n=r+eb,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+eb);for(let l=0;l<t.length;l++){let c=t.charCodeAt(l);c===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):c===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,c>=97?c-=87:c>=65?c-=55:(c-=48,o=o*10+c),i=(i<<4)+c)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let l=Math.min(r-1,n-1);l>=s+2;l--)e[l]=e[l-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<eb;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function nL(t){if(Ru.isFormat(t))return Ru.size;if(Jd.isFormat(t))return Jd.size;throw Error(`Invalid ip address: ${t}`)}function Rce(t){return nL(t)===Ru.size?1:2}function Nce(t,e,r){r=~~r;const n=nL(t);return typeof e=="function"&&(e=e(r+n)),n===Ru.size?Ru.encode(t,e,r):Jd.encode(t,e,r)}function Bce(t,e,r){if(e=~~e,r=r||t.length-e,r===Ru.size)return Ru.decode(t,e,r);if(r===Jd.size)return Jd.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${Ru.size} for v4 or ${Jd.size} for v6.`)}function iS(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function Rv(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function Fce(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function Mce(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function iL(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function sL(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function jce(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function gB(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}const vI=55296,Nv=56320;function oL(t){let e=0;const r=t.length;for(let n=0;n<r;n+=1){const s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==vI)e+=3;else{const i=n+1;i===r||s>=Nv||(t.charCodeAt(i)&64512)!==Nv?e+=3:(n=i,e+=4)}}return e}function Bv(t,e,r){const n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(oL(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==vI)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{const a=i+1;if(a===n||o>=Nv)e[s++]=239,e[s++]=191,e[s++]=189;else{const u=t.charCodeAt(a);(u&64512)!==Nv?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return Bv.bytes=s-r,e}Bv.bytes=0;function Iw(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){const i=t[s++];let o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;const a=vI|o>>10&1023;n+=String.fromCharCode(a),o=Nv|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return Iw.bytes=r-e,n}Iw.bytes=0;const dp=t=>t instanceof Uint8Array;function Tf(t){return typeof t=="string"?oL(t):t.byteLength}function wI(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):Bv(t)}function _I(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return Bv(e,t,r),Bv.bytes}const v0={},aL=new Array(255);for(let t=0;t<=15;t+=1){const e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){const s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;aL[o]=a,v0[a]=o,v0[`${r}${s}`]=o,v0[`${e}${i}`]=o,v0[`${r}${i}`]=o}}function Uce(t,e,r){let n="";for(let s=e;s<r;){const i=t[s++];n+=aL[i]}return n}function vB(t){return t.length>>>1}function Lce(t,e,r,n){let s=0;for(;r<n;){const i=e.substr(s,2),o=v0[i];if(o===void 0)return;t[r++]=o,s+=2}return t}const Kce=Math.pow(2,24),Vce=Math.pow(2,16),qce=Math.pow(2,8),Wc=(t,e)=>t[e]*Kce+t[e+1]*Vce+t[e+2]*qce+t[e+3],Xt=(t,e)=>t[e]<<8|t[e+1],Gc=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),wt=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function ea(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:Hce(t,e,r,n,s)}function Hce(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n;const o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}const zce=0,wB=32768,Px=32768,Wce=~Px,uL=32768,Gce=~uL;function zr({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}const Ye=zr({encode(t,e,r){e||(e=new Uint8Array(Ye.encodingLength(t))),r||(r=0);const n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){const i=s.split(".");for(let o=0;o<i.length;o++){const a=_I(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,Ye.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=[];let n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");const a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");const u=Xt(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(Iw(t,e,e+a)),e+=a,i+=o?0:a}}return Ye.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:Tf(t.replace(/^\.|\.$/gm,""))+2}}),Un=zr({encode(t,e,r){e||(e=new Uint8Array(Un.encodingLength(t))),r||(r=0);const n=_I(e,t,r+1);return e[r]=n,Un.encode.bytes=n+1,e},decode(t,e){e||(e=0);const r=t[e],n=Iw(t,e+1,e+1+r);return Un.decode.bytes=r+1,n},encodingLength(t){return Tf(t)+1}}),hm=zr({bytes:12,encode(t,e,r){e||(e=new Uint8Array(hm.encodingLength(t))),r||(r=0);const n=(t.flags||0)&32767,s=t.type==="response"?wB:zce;return wt(e,t.id||0,r),wt(e,n|s,r+2),wt(e,t.questions.length,r+4),wt(e,t.answers.length,r+6),wt(e,t.authorities.length,r+8),wt(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");const r=Xt(t,e+2);return{id:Xt(t,e),type:r&wB?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:Mce(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:Fce(r&15),questions:new Array(Xt(t,e+4)),answers:new Array(Xt(t,e+6)),authorities:new Array(Xt(t,e+8)),additionals:new Array(Xt(t,e+10))}},encodingLength(){return 12}}),i1=zr({encode(t,e,r){e||(e=new Uint8Array(i1.encodingLength(t))),r||(r=0);const n=t.length;return wt(e,n,r),ea(t,e,r+2,0,n),i1.encode.bytes=n+2,e},decode(t,e){e||(e=0);const r=Xt(t,e),n=t.slice(e+2,e+2+r);return i1.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),s1=zr({encode(t,e,r){return e||(e=new Uint8Array(s1.encodingLength(t))),r||(r=0),Ye.encode(t,e,r+2),wt(e,Ye.encode.bytes,r),s1.encode.bytes=Ye.encode.bytes+2,e},decode(t,e){e||(e=0);const r=Xt(t,e),n=Ye.decode(t,e+2);return s1.decode.bytes=r+2,n},encodingLength(t){return Ye.encodingLength(t)+2}}),o1=zr({encode(t,e,r){e||(e=new Uint8Array(o1.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ye.encode(t.mname,e,r),r+=Ye.encode.bytes,Ye.encode(t.rname,e,r),r+=Ye.encode.bytes,Gc(e,t.serial||0,r),r+=4,Gc(e,t.refresh||0,r),r+=4,Gc(e,t.retry||0,r),r+=4,Gc(e,t.expire||0,r),r+=4,Gc(e,t.minimum||0,r),r+=4,wt(e,r-n-2,n),o1.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.mname=Ye.decode(t,e),e+=Ye.decode.bytes,n.rname=Ye.decode(t,e),e+=Ye.decode.bytes,n.serial=Wc(t,e),e+=4,n.refresh=Wc(t,e),e+=4,n.retry=Wc(t,e),e+=4,n.expire=Wc(t,e),e+=4,n.minimum=Wc(t,e),e+=4,o1.decode.bytes=e-r,n},encodingLength(t){return 22+Ye.encodingLength(t.mname)+Ye.encodingLength(t.rname)}}),a1=zr({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=wI(t[s])),!dp(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(a1.encodingLength(t))),r||(r=0);const n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,ea(s,e,r,0,s.length),r+=s.length}),wt(e,r-n-2,n),a1.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e;let n=Xt(t,e);e+=2;const s=[];for(;n>0;){const i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return a1.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=Tf(r)+1:e+=r.length+1}),e}}),u1=zr({encode(t,e,r){e||(e=new Uint8Array(u1.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=wI(t)),t||(t=new Uint8Array(0));const n=r;r+=2;const s=t.length;return ea(t,e,r,0,s),r+=s,wt(e,r-n-2,n),u1.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n=Xt(t,e);e+=2;const s=t.slice(e,e+n);return e+=n,u1.decode.bytes=e-r,s},encodingLength(t){return t?(dp(t)?t.length:Tf(t))+2:2}}),c1=zr({encode(t,e,r){e||(e=new Uint8Array(c1.encodingLength(t))),r||(r=0);const n=r;return r+=2,Un.encode(t.cpu,e,r),r+=Un.encode.bytes,Un.encode(t.os,e,r),r+=Un.encode.bytes,wt(e,r-n-2,n),c1.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.cpu=Un.decode(t,e),e+=Un.decode.bytes,n.os=Un.decode(t,e),e+=Un.decode.bytes,c1.decode.bytes=e-r,n},encodingLength(t){return Un.encodingLength(t.cpu)+Un.encodingLength(t.os)+2}}),Km=zr({encode(t,e,r){return e||(e=new Uint8Array(Km.encodingLength(t))),r||(r=0),Ye.encode(t,e,r+2),wt(e,Ye.encode.bytes,r),Km.encode.bytes=Ye.encode.bytes+2,e},decode(t,e){e||(e=0);const r=Ye.decode(t,e+2);return Km.decode.bytes=Ye.decode.bytes+2,r},encodingLength(t){return Ye.encodingLength(t)+2}}),l1=zr({encode(t,e,r){e||(e=new Uint8Array(l1.encodingLength(t))),r||(r=0),wt(e,t.priority||0,r+2),wt(e,t.weight||0,r+4),wt(e,t.port||0,r+6),Ye.encode(t.target,e,r+8);const n=Ye.encode.bytes+6;return wt(e,n,r),l1.encode.bytes=n+2,e},decode(t,e){e||(e=0);const r=Xt(t,e),n={};return n.priority=Xt(t,e+2),n.weight=Xt(t,e+4),n.port=Xt(t,e+6),n.target=Ye.decode(t,e+8),l1.decode.bytes=r+2,n},encodingLength(t){return 8+Ye.encodingLength(t.target)}}),Pd=zr({encode(t,e,r){const n=Pd.encodingLength(t);return e||(e=new Uint8Array(Pd.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=Pd.ISSUER_CRITICAL),wt(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Un.encode(t.tag,e,r),r+=Un.encode.bytes,_I(e,t.value,r),r+=Tf(t.value),Pd.encode.bytes=n,e},decode(t,e){e||(e=0);const r=Xt(t,e);e+=2;const n=e,s={};return s.flags=t[e],e+=1,s.tag=Un.decode(t,e),e+=Un.decode.bytes,s.value=Iw(t,e,n+r),s.issuerCritical=!!(s.flags&Pd.ISSUER_CRITICAL),Pd.decode.bytes=r+2,s},encodingLength(t){return Un.encodingLength(t.tag)+Un.encodingLength(t.value)+2}});Pd.ISSUER_CRITICAL=128;const d1=zr({encode(t,e,r){e||(e=new Uint8Array(d1.encodingLength(t))),r||(r=0);const n=r;return r+=2,wt(e,t.preference||0,r),r+=2,Ye.encode(t.exchange,e,r),r+=Ye.encode.bytes,wt(e,r-n-2,n),d1.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.preference=Xt(t,e),e+=2,n.exchange=Ye.decode(t,e),e+=Ye.decode.bytes,d1.decode.bytes=e-r,n},encodingLength(t){return 4+Ye.encodingLength(t.exchange)}}),cL=zr({encode(t,e,r){return e||(e=new Uint8Array(cL.encodingLength(t))),r||(r=0),wt(e,4,r),r+=2,Ru.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,Ru.decode(t,e)},bytes:6}),f1=zr({encode(t,e,r){return e||(e=new Uint8Array(f1.encodingLength(t))),r||(r=0),wt(e,16,r),r+=2,Jd.encode(t,e,r),f1.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;const r=Jd.decode(t,e);return f1.decode.bytes=18,r},bytes:18}),Jce=t=>new Uint8Array(t),Fc=zr({encode(t,e,r){e||(e=new Uint8Array(Fc.encodingLength(t))),r||(r=0);const n=r,s=gB(t.code);if(wt(e,s,r),r+=2,t.data)wt(e,t.data.length,r),r+=2,ea(t.data,e,r),r+=t.data.length;else switch(s){case 8:{const i=t.sourcePrefixLength||0,o=t.family||Rce(t.ip),a=Nce(t.ip,Jce),u=Math.ceil(i/8);wt(e,u+4,r),r+=2,wt(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,ea(a,e,r,0,u),r+=u}break;case 11:t.timeout?(wt(e,2,r),r+=2,wt(e,t.timeout,r),r+=2):(wt(e,0,r),r+=2);break;case 12:{const i=t.length||0;wt(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{const i=t.tags.length*2;wt(e,i,r),r+=2;for(const o of t.tags)wt(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Fc.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r={};r.code=Xt(t,e),r.type=jce(r.code),e+=2;const n=Xt(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=Xt(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{const s=new Uint8Array(r.family===1?4:16);ea(t,s,0,e,e+n-4),r.ip=Bce(s)}break;case 11:n>0&&(r.timeout=Xt(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(Xt(t,e)),e+=2}return Fc.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(gB(t.code)){case 8:{const r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),Kd=zr({encode(t,e,r){e||(e=new Uint8Array(Kd.encodingLength(t))),r||(r=0);const n=r,s=Cm(t,Fc);return wt(e,s,r),r=S0(t,Fc,e,r+2),Kd.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n=[];let s=Xt(t,e);e+=2;let i=0;for(;s>0;)n[i++]=Fc.decode(t,e),e+=Fc.decode.bytes,s-=Fc.decode.bytes;return Kd.decode.bytes=e-r,n},encodingLength(t){return 2+Cm(t||[],Fc)}}),gu=zr({encode(t,e,r){e||(e=new Uint8Array(gu.encodingLength(t))),r||(r=0);const n=r,s=t.key;if(!dp(s))throw new Error("Key must be a Buffer");return r+=2,wt(e,t.flags,r),r+=2,e[r]=gu.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,ea(s,e,r,0,s.length),r+=s.length,gu.encode.bytes=r-n,wt(e,gu.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},s=Xt(t,e);if(e+=2,n.flags=Xt(t,e),e+=2,t[e]!==gu.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,gu.decode.bytes=e-r,n},encodingLength(t){return 6+Tf(t.key)}});gu.PROTOCOL_DNSSEC=3;gu.ZONE_KEY=128;gu.SECURE_ENTRYPOINT=32768;const w0=zr({encode(t,e,r){e||(e=new Uint8Array(w0.encodingLength(t))),r||(r=0);const n=r,s=t.signature;if(!dp(s))throw new Error("Signature must be a Buffer");return r+=2,wt(e,Rv(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Gc(e,t.originalTTL,r),r+=4,Gc(e,t.expiration,r),r+=4,Gc(e,t.inception,r),r+=4,wt(e,t.keyTag,r),r+=2,Ye.encode(t.signersName,e,r),r+=Ye.encode.bytes,ea(s,e,r,0,s.length),r+=s.length,w0.encode.bytes=r-n,wt(e,w0.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},s=Xt(t,e);return e+=2,n.typeCovered=iS(Xt(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Wc(t,e),e+=4,n.expiration=Wc(t,e),e+=4,n.inception=Wc(t,e),e+=4,n.keyTag=Xt(t,e),e+=2,n.signersName=Ye.decode(t,e),e+=Ye.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,w0.decode.bytes=e-r,n},encodingLength(t){return 20+Ye.encodingLength(t.signersName)+Tf(t.signature)}}),_0=zr({encode(t,e,r){e||(e=new Uint8Array(_0.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ye.encode(t.mbox||".",e,r),r+=Ye.encode.bytes,Ye.encode(t.txt||".",e,r),r+=Ye.encode.bytes,_0.encode.bytes=r-n,wt(e,_0.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.mbox=Ye.decode(t,e)||".",e+=Ye.decode.bytes,n.txt=Ye.decode(t,e)||".",e+=Ye.decode.bytes,_0.decode.bytes=e-r,n},encodingLength(t){return 2+Ye.encodingLength(t.mbox||".")+Ye.encodingLength(t.txt||".")}}),co=zr({encode(t,e,r){e||(e=new Uint8Array(co.encodingLength(t))),r||(r=0);const n=r,s=[];for(let i=0;i<t.length;i++){const o=Rv(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){const o=wI(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,ea(o,e,r,0,o.length),r+=o.length}return co.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);const n=e,s=[];for(;e-n<r;){const i=t[e];e+=1;const o=t[e];e+=1;for(let a=0;a<o;a++){const u=t[e+a];for(let l=0;l<8;l++)if(u&1<<7-l){const c=iS(i<<8|a<<3|l);s.push(c)}}e+=o}return co.decode.bytes=e-n,s},encodingLength(t){const e=[];for(let n=0;n<t.length;n++){const s=Rv(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),b0=zr({encode(t,e,r){e||(e=new Uint8Array(b0.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ye.encode(t.nextDomain,e,r),r+=Ye.encode.bytes,co.encode(t.rrtypes,e,r),r+=co.encode.bytes,b0.encode.bytes=r-n,wt(e,b0.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},s=Xt(t,e);return e+=2,n.nextDomain=Ye.decode(t,e),e+=Ye.decode.bytes,n.rrtypes=co.decode(t,e,s-(e-r)),e+=co.decode.bytes,b0.decode.bytes=e-r,n},encodingLength(t){return 2+Ye.encodingLength(t.nextDomain)+co.encodingLength(t.rrtypes)}}),E0=zr({encode(t,e,r){e||(e=new Uint8Array(E0.encodingLength(t))),r||(r=0);const n=r,s=t.salt;if(!dp(s))throw new Error("salt must be a Buffer");const i=t.nextDomain;if(!dp(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,wt(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,ea(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,ea(i,e,r,0,i.length),r+=i.length,co.encode(t.rrtypes,e,r),r+=co.encode.bytes,E0.encode.bytes=r-n,wt(e,E0.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},s=Xt(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=Xt(t,e),e+=2;const i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;const o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=co.decode(t,e,s-(e-r)),e+=co.decode.bytes,E0.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+co.encodingLength(t.rrtypes)}}),A0=zr({encode(t,e,r){e||(e=new Uint8Array(A0.encodingLength(t))),r||(r=0);const n=r,s=t.digest;if(!dp(s))throw new Error("Digest must be a Buffer");return r+=2,wt(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,ea(s,e,r,0,s.length),r+=s.length,A0.encode.bytes=r-n,wt(e,A0.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},s=Xt(t,e);return e+=2,n.keyTag=Xt(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,A0.decode.bytes=e-r,n},encodingLength(t){return 6+Tf(t.digest)}}),Pm=zr({encode(t,e,r){e||(e=new Uint8Array(Pm.encodingLength(t))),r||(r=0);const n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;const s=vB(t.fingerprint),i=Cx(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return Lce(e,t.fingerprint,r,r+=s),Pm.encode.bytes=r-n,wt(e,Pm.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;const s=Cx(n.hash);return n.fingerprint=Uce(t,e,e+s),e+=s,Pm.decode.bytes=e-r,n},encodingLength(t){return 4+vB(t.fingerprint)}});function Cx(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}Pm.getFingerprintLengthForHashType=Cx;function aT(t){switch(t.toUpperCase()){case"A":return cL;case"PTR":return Km;case"CNAME":return Km;case"DNAME":return Km;case"TXT":return a1;case"NULL":return u1;case"AAAA":return f1;case"SRV":return l1;case"HINFO":return c1;case"CAA":return Pd;case"NS":return s1;case"SOA":return o1;case"MX":return d1;case"OPT":return Kd;case"DNSKEY":return gu;case"RRSIG":return w0;case"RP":return _0;case"NSEC":return b0;case"NSEC3":return E0;case"SSHFP":return Pm;case"DS":return A0}return i1}const Fo=zr({encode(t,e,r){e||(e=new Uint8Array(Fo.encodingLength(t))),r||(r=0);const n=r;if(Ye.encode(t.name,e,r),r+=Ye.encode.bytes,wt(e,Rv(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");wt(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,wt(e,t.flags||0,r+6),r+=8,Kd.encode(t.options||[],e,r),r+=Kd.encode.bytes}else{let s=sL(t.class===void 0?"IN":t.class);t.flush&&(s|=Px),wt(e,s,r+2),Gc(e,t.ttl||0,r+4),r+=8;const i=aT(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return Fo.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r={},n=e;if(r.name=Ye.decode(t,e),e+=Ye.decode.bytes,r.type=iS(Xt(t,e)),r.type==="OPT")r.udpPayloadSize=Xt(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=Xt(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=Kd.decode(t,e+8),e+=8+Kd.decode.bytes;else{const s=Xt(t,e+2);r.ttl=Wc(t,e+4),r.class=iL(s&Wce),r.flush=!!(s&Px);const i=aT(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return Fo.decode.bytes=e-n,r},encodingLength(t){const e=t.data!==null&&t.data!==void 0?t.data:t.options;return Ye.encodingLength(t.name)+8+aT(t.type).encodingLength(e)}}),Vm=zr({encode(t,e,r){e||(e=new Uint8Array(Vm.encodingLength(t))),r||(r=0);const n=r;return Ye.encode(t.name,e,r),r+=Ye.encode.bytes,wt(e,Rv(t.type),r),r+=2,wt(e,sL(t.class===void 0?"IN":t.class),r),r+=2,Vm.encode.bytes=r-n,t},decode(t,e){e||(e=0);const r=e,n={};return n.name=Ye.decode(t,e),e+=Ye.decode.bytes,n.type=iS(Xt(t,e)),e+=2,n.class=iL(Xt(t,e)),e+=2,!!(n.class&uL)&&(n.class&=Gce),Vm.decode.bytes=e-r,n},encodingLength(t){return Ye.encodingLength(t.name)+4}}),bI=1024,fp={encode:function(t,e,r){const n=!e;n&&(e=new Uint8Array(Xce(t))),r||(r=0);const s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),hm.encode(t,e,r),r+=hm.encode.bytes,r=S0(t.questions,Vm,e,r),r=S0(t.answers,Fo,e,r),r=S0(t.authorities,Fo,e,r),r=S0(t.additionals,Fo,e,r),fp.encode.bytes=r-s,n&&Fv.bytes!==e.length?e.slice(0,Fv.bytes):e},decode:function(t,e){e||(e=0);const r=e,n=hm.decode(t,e);return e+=hm.decode.bytes,e=tb(n.questions,Vm,t,e),e=tb(n.answers,Fo,t,e),e=tb(n.authorities,Fo,t,e),e=tb(n.additionals,Fo,t,e),fp.decode.bytes=e-r,n},encodingLength:function(t){return hm.encodingLength(t)+Cm(t.questions||[],Vm)+Cm(t.answers||[],Fo)+Cm(t.authorities||[],Fo)+Cm(t.additionals||[],Fo)}};fp.encode.bytes=0;fp.decode.bytes=0;const Fv=fp.encode,EI=fp.decode,Xce=fp.encodingLength;function Cm(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function S0(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function tb(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var _B=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let kw=class{static getSigningMethod(e){return _B(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return _B(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var ri=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},bB=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const EB="https://diddht.tbddev.org",Zce=0,ql=7200,h1=";",is=",";var Ix;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(Ix||(Ix={}));var fs;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(fs||(fs={}));var kx;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(kx||(kx={}));const lL={Ed25519:fs.Ed25519,ES256K:fs.secp256k1,ES256:fs.secp256r1,"P-256":fs.secp256r1,secp256k1:fs.secp256k1,secp256r1:fs.secp256r1,X25519:fs.X25519},AB={[fs.Ed25519]:"EdDSA",[fs.secp256k1]:"ES256K",[fs.secp256r1]:"ES256",[fs.X25519]:"ECDH-ES+A256KW"};let bE=class $x extends kw{static create(){return ri(this,arguments,void 0,function*({keyManager:e=new cl,options:r={}}={}){var n,s,i,o,a,u,l,c,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in lL)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const m=yield e.generateKey({algorithm:"Ed25519"}),E=yield e.getPublicKey({keyUri:m}),A=yield Wi.identityKeyToIdentifier({identityKey:E}),_=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(S=>{var x;return((x=S.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const S of g){const x=S.id&&S.id.split("#").pop()==="0"?m:yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});let w=(u=(a=S.id)!==null&&a!==void 0?a:D.kid)!==null&&u!==void 0?u:yield Rr({jwk:D});w=`${A}#${Ia(w)}`,(l=_.verificationMethod)!==null&&l!==void 0||(_.verificationMethod=[]),_.verificationMethod.push({id:w,type:"JsonWebKey",controller:(c=S.controller)!==null&&c!==void 0?c:A,publicKeyJwk:D});for(const b of(d=S.purposes)!==null&&d!==void 0?d:[])_[b]||(_[b]=[]),_[b].push(w)}(h=r.services)===null||h===void 0||h.forEach(S=>{var x;(x=_.service)!==null&&x!==void 0||(_.service=[]),S.id=`${A}#${S.id.split("#").pop()}`,_.service.push(S)});const v=new ff({uri:A,document:_,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){const S=yield $x.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static import(e){return ri(this,arguments,void 0,function*({portableDid:r,keyManager:n=new cl}){var s;const i=_r.parse(r.uri);if((i==null?void 0:i.method)!==$x.methodName)throw new ht(st.MethodNotSupported,"Method not supported");const o=yield ff.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new ht(st.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return ri(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=_r.parse(r.id);if(i&&i.method!==this.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u,l;return Ia(a.id)===((u=Ia(n))!==null&&u!==void 0?u:Ia((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new ht(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return ri(this,arguments,void 0,function*({did:r,gatewayUri:n=EB}){return yield SB.put({did:r,gatewayUri:n})})}static resolve(e){return ri(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:EB;try{yield Wi.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield SB.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},Ri),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof ht))throw new Error(o);return Object.assign(Object.assign({},Ri),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};bE.methodName="dht";let SB=class fh{static get(e){return ri(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=Wi.identifierToIdentityKeyBytes({didUri:r}),i=yield fh.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield Wi.parseBep44GetMessage({bep44Message:i}),a=yield fh.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return ri(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield fh.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield Wi.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Wi.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield fh.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return ri(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=vt.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new ht(st.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof ht?l:new ht(st.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new ht(st.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new ht(st.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new ht(st.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return ri(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=vt.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(u){throw new ht(st.InternalError,`Failed to put Pkarr record for identifier ${s}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return ri(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},u={published:!0},l=new Map;for(const c of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(c.type!=="TXT")continue;const d=c.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=Wi.parseTxtDataToString(c.data);a.alsoKnownAs=h.split(is);break}case d.startsWith("cnt"):{const h=Wi.parseTxtDataToString(c.data);a.controller=h.includes(is)?h.split(is):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:m,a:E}=Wi.parseTxtDataToObject(c.data),A=vt.base64Url(p).toUint8Array(),_=fs[Number(f)];let g=yield Wi.keyConverter(_).bytesToPublicKey({publicKeyBytes:A});g.alg=E||AB[Number(f)];const v=d==="k0"?"0":h!==void 0?h:yield Rr({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const S=`${r}#${v}`;a.verificationMethod.push({id:S,type:"JsonWebKey",controller:m??r,publicKeyJwk:g}),l.set(d,S);break}case d.startsWith("s"):{const h=Wi.parseTxtDataToObject(c.data),{id:f,t:p,se:m}=h,E=bB(h,["id","t","se"]),A=m.includes(is)?m.split(is):[m],_=Object.fromEntries(Object.entries(E).map(([g,v])=>[g,v.includes(is)?v.split(is):v]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},_),{id:`${r}#${f}`,type:p,serviceEndpoint:A}));break}case d.startsWith("typ"):{const{id:h}=Wi.parseTxtDataToObject(c.data);u.types=h.split(is).map(f=>Number(f));break}case d.startsWith("did"):{const h=_=>_.split(is).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:m,inv:E,agm:A}=Wi.parseTxtDataToObject(c.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),m&&(a.capabilityDelegation=h(m)),E&&(a.capabilityInvocation=h(E)),A&&(a.keyAgreement=h(A));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return ri(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,u,l,c;const d=[],h=[],f=new Map,p=[],m=[];if(i!==void 0){const{signature:_,previousDid:g}=i;yield Wi.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:ql,data:`id=${g};s=${_}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:ql,data:r.alsoKnownAs.join(is)}),r.controller){const _=Array.isArray(r.controller)?r.controller.join(is):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:ql,data:_})}for(const[_,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const v=`k${_}`;m.push(v);let S=g.id.split("#").pop();f.set(S,v);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in lL))throw new ht(st.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(u=x==null?void 0:x.crv)!==null&&u!==void 0?u:"undefined"}`);const D=fs[x.crv],w=yield Wi.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),b=vt.uint8Array(w).toBase64Url(),T=[`t=${D}`,`k=${b}`];S!=="0"&&(yield Rr({jwk:x}))!==S&&T.unshift(`id=${S}`),x.alg!==AB[D]&&T.push(`a=${x.alg}`),g.controller!==r.id&&T.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${v}._did.`,ttl:ql,data:T.join(h1)})}(l=r.service)===null||l===void 0||l.forEach((_,g)=>{const v=`s${g}`;p.push(v);let{id:S,type:x,serviceEndpoint:D}=_,w=bB(_,["id","type","serviceEndpoint"]);S=Ia(S),D=Array.isArray(D)?D.join(","):D;const T=Object.entries(Object.assign({id:S,t:x,se:D},w)).map(([C,k])=>`${C}=${k}`).join(h1),P=Wi.chunkDataIfNeeded(T);d.push({type:"TXT",name:`_${v}._did.`,ttl:ql,data:P})});const E=[`v=${Zce}`];if(m.length&&E.push(`vm=${m.join(is)}`),Object.keys(Ov).forEach(_=>{var g;const v=(g=r[_])===null||g===void 0?void 0:g.map(S=>f.get(S.split("#").pop()));if(v){const S=kx[_];E.push(`${S}=${v.join(is)}`)}}),p.length&&E.push(`svc=${p.join(is)}`),!((c=n.types)===null||c===void 0)&&c.length){const g=n.types.map(v=>typeof v=="string"?Ix[v]:v);d.push({type:"TXT",name:"_typ._did.",ttl:ql,data:`id=${g.join(is)}`})}d.push({type:"TXT",name:"_did."+fh.getUniqueDidSuffix(r.id)+".",ttl:ql,data:E.join(h1)});for(const _ of s||[])h.push({type:"NS",name:"_did."+fh.getUniqueDidSuffix(r.id)+".",ttl:ql,data:_+"."});return{id:0,type:"response",flags:bI,answers:[...d,...h]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Wi=class p1{static createBep44PutMessage(e){return ri(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Fv(r),a=cy.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new ht(st.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const u=yield s.sign({data:a});return{k:n,seq:i,sig:u,v:o}})}static identifierToIdentityKey(e){return ri(this,arguments,void 0,function*({didUri:r}){let n=p1.identifierToIdentityKeyBytes({didUri:r});return yield Bs.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){const r=_r.parse(e);if(!r)throw new ht(st.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==bE.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=vt.base32Z(r.id).toUint8Array()}catch{throw new ht(st.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new ht(st.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return ri(this,arguments,void 0,function*({identityKey:r}){const n=yield Bs.publicKeyToBytes({publicKey:r}),s=vt.uint8Array(n).toBase32Z();return`did:${bE.methodName}:${s}`})}static keyConverter(e){const n={Ed25519:Bs,"P-256":{publicKeyToBytes:s=>ri(this,[s],void 0,function*({publicKey:i}){const o=yield Wo.publicKeyToBytes({publicKey:i});return yield Wo.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Wo.bytesToPublicKey,privateKeyToBytes:Wo.privateKeyToBytes,bytesToPrivateKey:Wo.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>ri(this,[s],void 0,function*({publicKey:i}){const o=yield uo.publicKeyToBytes({publicKey:i});return yield uo.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:uo.bytesToPublicKey,privateKeyToBytes:uo.privateKeyToBytes,bytesToPrivateKey:uo.bytesToPrivateKey},X25519:W9}[e];if(!n)throw new ht(st.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return ri(this,arguments,void 0,function*({bep44Message:r}){const n=yield Bs.bytesToPublicKey({publicKeyBytes:r.k}),s=cy.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Bs.verify({key:n,signature:r.sig,data:s})))throw new ht(st.InvalidSignature,"Invalid signature for DHT BEP44 message");return EI(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(h1).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return vt.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new ht(st.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return ri(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield p1.identifierToIdentityKey({didUri:n.previousDid}),i=p1.identifierToIdentityKeyBytes({didUri:r}),o=vt.base64Url(n.signature).toUint8Array();if(!(yield Bs.verify({key:s,data:i,signature:o})))throw new ht(st.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;const r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};const An={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};class Sn extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}const Yce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Qce=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ele=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return dL(this,e)}},tle=class{constructor(e){this.decoders=e}or(e){return dL(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const dL=(t,e)=>new tle({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let rle=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Qce(e,r,n),this.decoder=new ele(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const nle=({name:t,prefix:e,encode:r,decode:n})=>new rle(t,e,r,n),ile=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},sle=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},sS=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>nle({prefix:e,name:t,encode(s){return sle(s,n,r)},decode(s){return ile(s,n,r,t)}});sS({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});sS({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const TB=sS({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});sS({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});let ly=class m1{static encode(e){return TB.baseEncode(e)}static decodeAsBytes(e,r){if(!m1.isBase64UrlString(e))throw new Sn(An.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return TB.baseDecode(e)}static decodeAsString(e,r){const n=m1.decodeAsBytes(e,r);return m1.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var Ox={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,n){n(e)})(Ar,function(r){function n(){for(var de=arguments.length,ue=Array(de),fe=0;fe<de;fe++)ue[fe]=arguments[fe];if(ue.length>1){ue[0]=ue[0].slice(0,-1);for(var Ae=ue.length-1,Ee=1;Ee<Ae;++Ee)ue[Ee]=ue[Ee].slice(1,-1);return ue[Ae]=ue[Ae].slice(1),ue.join("")}else return ue[0]}function s(de){return"(?:"+de+")"}function i(de){return de===void 0?"undefined":de===null?"null":Object.prototype.toString.call(de).split(" ").pop().split("]").shift().toLowerCase()}function o(de){return de.toUpperCase()}function a(de){return de!=null?de instanceof Array?de:typeof de.length!="number"||de.split||de.setInterval||de.call?[de]:Array.prototype.slice.call(de):[]}function u(de,ue){var fe=de;if(ue)for(var Ae in ue)fe[Ae]=ue[Ae];return fe}function l(de){var ue="[A-Za-z]",fe="[0-9]",Ae=n(fe,"[A-Fa-f]"),Ee=s(s("%[EFef]"+Ae+"%"+Ae+Ae+"%"+Ae+Ae)+"|"+s("%[89A-Fa-f]"+Ae+"%"+Ae+Ae)+"|"+s("%"+Ae+Ae)),We="[\\:\\/\\?\\#\\[\\]\\@]",it="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Zt=n(We,it),Sr=de?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Tr=de?"[\\uE000-\\uF8FF]":"[]",Gt=n(ue,fe,"[\\-\\.\\_\\~]",Sr);s(ue+n(ue,fe,"[\\+\\-\\.]")+"*"),s(s(Ee+"|"+n(Gt,it,"[\\:]"))+"*");var Pr=s(s("25[0-5]")+"|"+s("2[0-4]"+fe)+"|"+s("1"+fe+fe)+"|"+s("0?[1-9]"+fe)+"|0?0?"+fe),Yr=s(Pr+"\\."+Pr+"\\."+Pr+"\\."+Pr),Dt=s(Ae+"{1,4}"),Ur=s(s(Dt+"\\:"+Dt)+"|"+Yr),cn=s(s(Dt+"\\:")+"{6}"+Ur),Gr=s("\\:\\:"+s(Dt+"\\:")+"{5}"+Ur),zs=s(s(Dt)+"?\\:\\:"+s(Dt+"\\:")+"{4}"+Ur),Ws=s(s(s(Dt+"\\:")+"{0,1}"+Dt)+"?\\:\\:"+s(Dt+"\\:")+"{3}"+Ur),bs=s(s(s(Dt+"\\:")+"{0,2}"+Dt)+"?\\:\\:"+s(Dt+"\\:")+"{2}"+Ur),bo=s(s(s(Dt+"\\:")+"{0,3}"+Dt)+"?\\:\\:"+Dt+"\\:"+Ur),ns=s(s(s(Dt+"\\:")+"{0,4}"+Dt)+"?\\:\\:"+Ur),Li=s(s(s(Dt+"\\:")+"{0,5}"+Dt)+"?\\:\\:"+Dt),Eo=s(s(s(Dt+"\\:")+"{0,6}"+Dt)+"?\\:\\:"),Ha=s([cn,Gr,zs,Ws,bs,bo,ns,Li,Eo].join("|")),Ao=s(s(Gt+"|"+Ee)+"+");s("[vV]"+Ae+"+\\."+n(Gt,it,"[\\:]")+"+"),s(s(Ee+"|"+n(Gt,it))+"*");var Dl=s(Ee+"|"+n(Gt,it,"[\\:\\@]"));return s(s(Ee+"|"+n(Gt,it,"[\\@]"))+"+"),s(s(Dl+"|"+n("[\\/\\?]",Tr))+"*"),{NOT_SCHEME:new RegExp(n("[^]",ue,fe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Gt,it),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Gt,it),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Gt,it),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Gt,it),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Gt,it,"[\\:\\@\\/\\?]",Tr),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Gt,it,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Gt,it),"g"),UNRESERVED:new RegExp(Gt,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Gt,Zt),"g"),PCT_ENCODED:new RegExp(Ee,"g"),IPV4ADDRESS:new RegExp("^("+Yr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ha+")"+s(s("\\%25|\\%(?!"+Ae+"{2})")+"("+Ao+")")+"?\\]?$")}}var c=l(!1),d=l(!0),h=function(){function de(ue,fe){var Ae=[],Ee=!0,We=!1,it=void 0;try{for(var Zt=ue[Symbol.iterator](),Sr;!(Ee=(Sr=Zt.next()).done)&&(Ae.push(Sr.value),!(fe&&Ae.length===fe));Ee=!0);}catch(Tr){We=!0,it=Tr}finally{try{!Ee&&Zt.return&&Zt.return()}finally{if(We)throw it}}return Ae}return function(ue,fe){if(Array.isArray(ue))return ue;if(Symbol.iterator in Object(ue))return de(ue,fe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(de){if(Array.isArray(de)){for(var ue=0,fe=Array(de.length);ue<de.length;ue++)fe[ue]=de[ue];return fe}else return Array.from(de)},p=2147483647,m=36,E=1,A=26,_=38,g=700,v=72,S=128,x="-",D=/^xn--/,w=/[^\0-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-E,C=Math.floor,k=String.fromCharCode;function K(de){throw new RangeError(T[de])}function L(de,ue){for(var fe=[],Ae=de.length;Ae--;)fe[Ae]=ue(de[Ae]);return fe}function q(de,ue){var fe=de.split("@"),Ae="";fe.length>1&&(Ae=fe[0]+"@",de=fe[1]),de=de.replace(b,".");var Ee=de.split("."),We=L(Ee,ue).join(".");return Ae+We}function se(de){for(var ue=[],fe=0,Ae=de.length;fe<Ae;){var Ee=de.charCodeAt(fe++);if(Ee>=55296&&Ee<=56319&&fe<Ae){var We=de.charCodeAt(fe++);(We&64512)==56320?ue.push(((Ee&1023)<<10)+(We&1023)+65536):(ue.push(Ee),fe--)}else ue.push(Ee)}return ue}var X=function(ue){return String.fromCodePoint.apply(String,f(ue))},re=function(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:m},W=function(ue,fe){return ue+22+75*(ue<26)-((fe!=0)<<5)},B=function(ue,fe,Ae){var Ee=0;for(ue=Ae?C(ue/g):ue>>1,ue+=C(ue/fe);ue>P*A>>1;Ee+=m)ue=C(ue/P);return C(Ee+(P+1)*ue/(ue+_))},te=function(ue){var fe=[],Ae=ue.length,Ee=0,We=S,it=v,Zt=ue.lastIndexOf(x);Zt<0&&(Zt=0);for(var Sr=0;Sr<Zt;++Sr)ue.charCodeAt(Sr)>=128&&K("not-basic"),fe.push(ue.charCodeAt(Sr));for(var Tr=Zt>0?Zt+1:0;Tr<Ae;){for(var Gt=Ee,Pr=1,Yr=m;;Yr+=m){Tr>=Ae&&K("invalid-input");var Dt=re(ue.charCodeAt(Tr++));(Dt>=m||Dt>C((p-Ee)/Pr))&&K("overflow"),Ee+=Dt*Pr;var Ur=Yr<=it?E:Yr>=it+A?A:Yr-it;if(Dt<Ur)break;var cn=m-Ur;Pr>C(p/cn)&&K("overflow"),Pr*=cn}var Gr=fe.length+1;it=B(Ee-Gt,Gr,Gt==0),C(Ee/Gr)>p-We&&K("overflow"),We+=C(Ee/Gr),Ee%=Gr,fe.splice(Ee++,0,We)}return String.fromCodePoint.apply(String,fe)},z=function(ue){var fe=[];ue=se(ue);var Ae=ue.length,Ee=S,We=0,it=v,Zt=!0,Sr=!1,Tr=void 0;try{for(var Gt=ue[Symbol.iterator](),Pr;!(Zt=(Pr=Gt.next()).done);Zt=!0){var Yr=Pr.value;Yr<128&&fe.push(k(Yr))}}catch(xl){Sr=!0,Tr=xl}finally{try{!Zt&&Gt.return&&Gt.return()}finally{if(Sr)throw Tr}}var Dt=fe.length,Ur=Dt;for(Dt&&fe.push(x);Ur<Ae;){var cn=p,Gr=!0,zs=!1,Ws=void 0;try{for(var bs=ue[Symbol.iterator](),bo;!(Gr=(bo=bs.next()).done);Gr=!0){var ns=bo.value;ns>=Ee&&ns<cn&&(cn=ns)}}catch(xl){zs=!0,Ws=xl}finally{try{!Gr&&bs.return&&bs.return()}finally{if(zs)throw Ws}}var Li=Ur+1;cn-Ee>C((p-We)/Li)&&K("overflow"),We+=(cn-Ee)*Li,Ee=cn;var Eo=!0,Ha=!1,Ao=void 0;try{for(var Dl=ue[Symbol.iterator](),Mp;!(Eo=(Mp=Dl.next()).done);Eo=!0){var jp=Mp.value;if(jp<Ee&&++We>p&&K("overflow"),jp==Ee){for(var $f=We,Of=m;;Of+=m){var Up=Of<=it?E:Of>=it+A?A:Of-it;if($f<Up)break;var o_=$f-Up,tg=m-Up;fe.push(k(W(Up+o_%tg,0))),$f=C(o_/tg)}fe.push(k(W($f,0))),it=B(We,Li,Ur==Dt),We=0,++Ur}}}catch(xl){Ha=!0,Ao=xl}finally{try{!Eo&&Dl.return&&Dl.return()}finally{if(Ha)throw Ao}}++We,++Ee}return fe.join("")},$=function(ue){return q(ue,function(fe){return D.test(fe)?te(fe.slice(4).toLowerCase()):fe})},F=function(ue){return q(ue,function(fe){return w.test(fe)?"xn--"+z(fe):fe})},ee={version:"2.1.0",ucs2:{decode:se,encode:X},decode:te,encode:z,toASCII:F,toUnicode:$},ne={};function le(de){var ue=de.charCodeAt(0),fe=void 0;return ue<16?fe="%0"+ue.toString(16).toUpperCase():ue<128?fe="%"+ue.toString(16).toUpperCase():ue<2048?fe="%"+(ue>>6|192).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase():fe="%"+(ue>>12|224).toString(16).toUpperCase()+"%"+(ue>>6&63|128).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase(),fe}function me(de){for(var ue="",fe=0,Ae=de.length;fe<Ae;){var Ee=parseInt(de.substr(fe+1,2),16);if(Ee<128)ue+=String.fromCharCode(Ee),fe+=3;else if(Ee>=194&&Ee<224){if(Ae-fe>=6){var We=parseInt(de.substr(fe+4,2),16);ue+=String.fromCharCode((Ee&31)<<6|We&63)}else ue+=de.substr(fe,6);fe+=6}else if(Ee>=224){if(Ae-fe>=9){var it=parseInt(de.substr(fe+4,2),16),Zt=parseInt(de.substr(fe+7,2),16);ue+=String.fromCharCode((Ee&15)<<12|(it&63)<<6|Zt&63)}else ue+=de.substr(fe,9);fe+=9}else ue+=de.substr(fe,3),fe+=3}return ue}function ve(de,ue){function fe(Ae){var Ee=me(Ae);return Ee.match(ue.UNRESERVED)?Ee:Ae}return de.scheme&&(de.scheme=String(de.scheme).replace(ue.PCT_ENCODED,fe).toLowerCase().replace(ue.NOT_SCHEME,"")),de.userinfo!==void 0&&(de.userinfo=String(de.userinfo).replace(ue.PCT_ENCODED,fe).replace(ue.NOT_USERINFO,le).replace(ue.PCT_ENCODED,o)),de.host!==void 0&&(de.host=String(de.host).replace(ue.PCT_ENCODED,fe).toLowerCase().replace(ue.NOT_HOST,le).replace(ue.PCT_ENCODED,o)),de.path!==void 0&&(de.path=String(de.path).replace(ue.PCT_ENCODED,fe).replace(de.scheme?ue.NOT_PATH:ue.NOT_PATH_NOSCHEME,le).replace(ue.PCT_ENCODED,o)),de.query!==void 0&&(de.query=String(de.query).replace(ue.PCT_ENCODED,fe).replace(ue.NOT_QUERY,le).replace(ue.PCT_ENCODED,o)),de.fragment!==void 0&&(de.fragment=String(de.fragment).replace(ue.PCT_ENCODED,fe).replace(ue.NOT_FRAGMENT,le).replace(ue.PCT_ENCODED,o)),de}function Pe(de){return de.replace(/^0*(.*)/,"$1")||"0"}function Ue(de,ue){var fe=de.match(ue.IPV4ADDRESS)||[],Ae=h(fe,2),Ee=Ae[1];return Ee?Ee.split(".").map(Pe).join("."):de}function M(de,ue){var fe=de.match(ue.IPV6ADDRESS)||[],Ae=h(fe,3),Ee=Ae[1],We=Ae[2];if(Ee){for(var it=Ee.toLowerCase().split("::").reverse(),Zt=h(it,2),Sr=Zt[0],Tr=Zt[1],Gt=Tr?Tr.split(":").map(Pe):[],Pr=Sr.split(":").map(Pe),Yr=ue.IPV4ADDRESS.test(Pr[Pr.length-1]),Dt=Yr?7:8,Ur=Pr.length-Dt,cn=Array(Dt),Gr=0;Gr<Dt;++Gr)cn[Gr]=Gt[Gr]||Pr[Ur+Gr]||"";Yr&&(cn[Dt-1]=Ue(cn[Dt-1],ue));var zs=cn.reduce(function(Li,Eo,Ha){if(!Eo||Eo==="0"){var Ao=Li[Li.length-1];Ao&&Ao.index+Ao.length===Ha?Ao.length++:Li.push({index:Ha,length:1})}return Li},[]),Ws=zs.sort(function(Li,Eo){return Eo.length-Li.length})[0],bs=void 0;if(Ws&&Ws.length>1){var bo=cn.slice(0,Ws.index),ns=cn.slice(Ws.index+Ws.length);bs=bo.join(":")+"::"+ns.join(":")}else bs=cn.join(":");return We&&(bs+="%"+We),bs}else return de}var V=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,oe="".match(/(){0}/)[1]===void 0;function j(de){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe={},Ae=ue.iri!==!1?d:c;ue.reference==="suffix"&&(de=(ue.scheme?ue.scheme+":":"")+"//"+de);var Ee=de.match(V);if(Ee){oe?(fe.scheme=Ee[1],fe.userinfo=Ee[3],fe.host=Ee[4],fe.port=parseInt(Ee[5],10),fe.path=Ee[6]||"",fe.query=Ee[7],fe.fragment=Ee[8],isNaN(fe.port)&&(fe.port=Ee[5])):(fe.scheme=Ee[1]||void 0,fe.userinfo=de.indexOf("@")!==-1?Ee[3]:void 0,fe.host=de.indexOf("//")!==-1?Ee[4]:void 0,fe.port=parseInt(Ee[5],10),fe.path=Ee[6]||"",fe.query=de.indexOf("?")!==-1?Ee[7]:void 0,fe.fragment=de.indexOf("#")!==-1?Ee[8]:void 0,isNaN(fe.port)&&(fe.port=de.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ee[4]:void 0)),fe.host&&(fe.host=M(Ue(fe.host,Ae),Ae)),fe.scheme===void 0&&fe.userinfo===void 0&&fe.host===void 0&&fe.port===void 0&&!fe.path&&fe.query===void 0?fe.reference="same-document":fe.scheme===void 0?fe.reference="relative":fe.fragment===void 0?fe.reference="absolute":fe.reference="uri",ue.reference&&ue.reference!=="suffix"&&ue.reference!==fe.reference&&(fe.error=fe.error||"URI is not a "+ue.reference+" reference.");var We=ne[(ue.scheme||fe.scheme||"").toLowerCase()];if(!ue.unicodeSupport&&(!We||!We.unicodeSupport)){if(fe.host&&(ue.domainHost||We&&We.domainHost))try{fe.host=ee.toASCII(fe.host.replace(Ae.PCT_ENCODED,me).toLowerCase())}catch(it){fe.error=fe.error||"Host's domain name can not be converted to ASCII via punycode: "+it}ve(fe,c)}else ve(fe,Ae);We&&We.parse&&We.parse(fe,ue)}else fe.error=fe.error||"URI can not be parsed.";return fe}function I(de,ue){var fe=ue.iri!==!1?d:c,Ae=[];return de.userinfo!==void 0&&(Ae.push(de.userinfo),Ae.push("@")),de.host!==void 0&&Ae.push(M(Ue(String(de.host),fe),fe).replace(fe.IPV6ADDRESS,function(Ee,We,it){return"["+We+(it?"%25"+it:"")+"]"})),(typeof de.port=="number"||typeof de.port=="string")&&(Ae.push(":"),Ae.push(String(de.port))),Ae.length?Ae.join(""):void 0}var N=/^\.\.?\//,Q=/^\/\.(\/|$)/,ce=/^\/\.\.(\/|$)/,pe=/^\/?(?:.|\n)*?(?=\/|$)/;function he(de){for(var ue=[];de.length;)if(de.match(N))de=de.replace(N,"");else if(de.match(Q))de=de.replace(Q,"/");else if(de.match(ce))de=de.replace(ce,"/"),ue.pop();else if(de==="."||de==="..")de="";else{var fe=de.match(pe);if(fe){var Ae=fe[0];de=de.slice(Ae.length),ue.push(Ae)}else throw new Error("Unexpected dot segment condition")}return ue.join("")}function Ce(de){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=ue.iri?d:c,Ae=[],Ee=ne[(ue.scheme||de.scheme||"").toLowerCase()];if(Ee&&Ee.serialize&&Ee.serialize(de,ue),de.host&&!fe.IPV6ADDRESS.test(de.host)){if(ue.domainHost||Ee&&Ee.domainHost)try{de.host=ue.iri?ee.toUnicode(de.host):ee.toASCII(de.host.replace(fe.PCT_ENCODED,me).toLowerCase())}catch(Zt){de.error=de.error||"Host's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+Zt}}ve(de,fe),ue.reference!=="suffix"&&de.scheme&&(Ae.push(de.scheme),Ae.push(":"));var We=I(de,ue);if(We!==void 0&&(ue.reference!=="suffix"&&Ae.push("//"),Ae.push(We),de.path&&de.path.charAt(0)!=="/"&&Ae.push("/")),de.path!==void 0){var it=de.path;!ue.absolutePath&&(!Ee||!Ee.absolutePath)&&(it=he(it)),We===void 0&&(it=it.replace(/^\/\//,"/%2F")),Ae.push(it)}return de.query!==void 0&&(Ae.push("?"),Ae.push(de.query)),de.fragment!==void 0&&(Ae.push("#"),Ae.push(de.fragment)),Ae.join("")}function _e(de,ue){var fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],Ee={};return Ae||(de=j(Ce(de,fe),fe),ue=j(Ce(ue,fe),fe)),fe=fe||{},!fe.tolerant&&ue.scheme?(Ee.scheme=ue.scheme,Ee.userinfo=ue.userinfo,Ee.host=ue.host,Ee.port=ue.port,Ee.path=he(ue.path||""),Ee.query=ue.query):(ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0?(Ee.userinfo=ue.userinfo,Ee.host=ue.host,Ee.port=ue.port,Ee.path=he(ue.path||""),Ee.query=ue.query):(ue.path?(ue.path.charAt(0)==="/"?Ee.path=he(ue.path):((de.userinfo!==void 0||de.host!==void 0||de.port!==void 0)&&!de.path?Ee.path="/"+ue.path:de.path?Ee.path=de.path.slice(0,de.path.lastIndexOf("/")+1)+ue.path:Ee.path=ue.path,Ee.path=he(Ee.path)),Ee.query=ue.query):(Ee.path=de.path,ue.query!==void 0?Ee.query=ue.query:Ee.query=de.query),Ee.userinfo=de.userinfo,Ee.host=de.host,Ee.port=de.port),Ee.scheme=de.scheme),Ee.fragment=ue.fragment,Ee}function G(de,ue,fe){var Ae=u({scheme:"null"},fe);return Ce(_e(j(de,Ae),j(ue,Ae),Ae,!0),Ae)}function J(de,ue){return typeof de=="string"?de=Ce(j(de,ue),ue):i(de)==="object"&&(de=j(Ce(de,ue),ue)),de}function ge(de,ue,fe){return typeof de=="string"?de=Ce(j(de,fe),fe):i(de)==="object"&&(de=Ce(de,fe)),typeof ue=="string"?ue=Ce(j(ue,fe),fe):i(ue)==="object"&&(ue=Ce(ue,fe)),de===ue}function be(de,ue){return de&&de.toString().replace(!ue||!ue.iri?c.ESCAPE:d.ESCAPE,le)}function ke(de,ue){return de&&de.toString().replace(!ue||!ue.iri?c.PCT_ENCODED:d.PCT_ENCODED,me)}var At={scheme:"http",domainHost:!0,parse:function(ue,fe){return ue.host||(ue.error=ue.error||"HTTP URIs must have a host."),ue},serialize:function(ue,fe){var Ae=String(ue.scheme).toLowerCase()==="https";return(ue.port===(Ae?443:80)||ue.port==="")&&(ue.port=void 0),ue.path||(ue.path="/"),ue}},kt={scheme:"https",domainHost:At.domainHost,parse:At.parse,serialize:At.serialize};function $r(de){return typeof de.secure=="boolean"?de.secure:String(de.scheme).toLowerCase()==="wss"}var Wt={scheme:"ws",domainHost:!0,parse:function(ue,fe){var Ae=ue;return Ae.secure=$r(Ae),Ae.resourceName=(Ae.path||"/")+(Ae.query?"?"+Ae.query:""),Ae.path=void 0,Ae.query=void 0,Ae},serialize:function(ue,fe){if((ue.port===($r(ue)?443:80)||ue.port==="")&&(ue.port=void 0),typeof ue.secure=="boolean"&&(ue.scheme=ue.secure?"wss":"ws",ue.secure=void 0),ue.resourceName){var Ae=ue.resourceName.split("?"),Ee=h(Ae,2),We=Ee[0],it=Ee[1];ue.path=We&&We!=="/"?We:void 0,ue.query=it,ue.resourceName=void 0}return ue.fragment=void 0,ue}},cr={scheme:"wss",domainHost:Wt.domainHost,parse:Wt.parse,serialize:Wt.serialize},qs={},un="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Ct="[0-9A-Fa-f]",Wr=s(s("%[EFef]"+Ct+"%"+Ct+Ct+"%"+Ct+Ct)+"|"+s("%[89A-Fa-f]"+Ct+"%"+Ct+Ct)+"|"+s("%"+Ct+Ct)),_s="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Hs="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ui=n(Hs,'[\\"\\\\]'),rs="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ci=new RegExp(un,"g"),O=new RegExp(Wr,"g"),Z=new RegExp(n("[^]",_s,"[\\.]",'[\\"]',Ui),"g"),H=new RegExp(n("[^]",un,rs),"g"),Y=H;function ae(de){var ue=me(de);return ue.match(ci)?ue:de}var Te={scheme:"mailto",parse:function(ue,fe){var Ae=ue,Ee=Ae.to=Ae.path?Ae.path.split(","):[];if(Ae.path=void 0,Ae.query){for(var We=!1,it={},Zt=Ae.query.split("&"),Sr=0,Tr=Zt.length;Sr<Tr;++Sr){var Gt=Zt[Sr].split("=");switch(Gt[0]){case"to":for(var Pr=Gt[1].split(","),Yr=0,Dt=Pr.length;Yr<Dt;++Yr)Ee.push(Pr[Yr]);break;case"subject":Ae.subject=ke(Gt[1],fe);break;case"body":Ae.body=ke(Gt[1],fe);break;default:We=!0,it[ke(Gt[0],fe)]=ke(Gt[1],fe);break}}We&&(Ae.headers=it)}Ae.query=void 0;for(var Ur=0,cn=Ee.length;Ur<cn;++Ur){var Gr=Ee[Ur].split("@");if(Gr[0]=ke(Gr[0]),fe.unicodeSupport)Gr[1]=ke(Gr[1],fe).toLowerCase();else try{Gr[1]=ee.toASCII(ke(Gr[1],fe).toLowerCase())}catch(zs){Ae.error=Ae.error||"Email address's domain name can not be converted to ASCII via punycode: "+zs}Ee[Ur]=Gr.join("@")}return Ae},serialize:function(ue,fe){var Ae=ue,Ee=a(ue.to);if(Ee){for(var We=0,it=Ee.length;We<it;++We){var Zt=String(Ee[We]),Sr=Zt.lastIndexOf("@"),Tr=Zt.slice(0,Sr).replace(O,ae).replace(O,o).replace(Z,le),Gt=Zt.slice(Sr+1);try{Gt=fe.iri?ee.toUnicode(Gt):ee.toASCII(ke(Gt,fe).toLowerCase())}catch(Ur){Ae.error=Ae.error||"Email address's domain name can not be converted to "+(fe.iri?"Unicode":"ASCII")+" via punycode: "+Ur}Ee[We]=Tr+"@"+Gt}Ae.path=Ee.join(",")}var Pr=ue.headers=ue.headers||{};ue.subject&&(Pr.subject=ue.subject),ue.body&&(Pr.body=ue.body);var Yr=[];for(var Dt in Pr)Pr[Dt]!==qs[Dt]&&Yr.push(Dt.replace(O,ae).replace(O,o).replace(H,le)+"="+Pr[Dt].replace(O,ae).replace(O,o).replace(Y,le));return Yr.length&&(Ae.query=Yr.join("&")),Ae}},xe=/^([^\:]+)\:(.*)/,$e={scheme:"urn",parse:function(ue,fe){var Ae=ue.path&&ue.path.match(xe),Ee=ue;if(Ae){var We=fe.scheme||Ee.scheme||"urn",it=Ae[1].toLowerCase(),Zt=Ae[2],Sr=We+":"+(fe.nid||it),Tr=ne[Sr];Ee.nid=it,Ee.nss=Zt,Ee.path=void 0,Tr&&(Ee=Tr.parse(Ee,fe))}else Ee.error=Ee.error||"URN can not be parsed.";return Ee},serialize:function(ue,fe){var Ae=fe.scheme||ue.scheme||"urn",Ee=ue.nid,We=Ae+":"+(fe.nid||Ee),it=ne[We];it&&(ue=it.serialize(ue,fe));var Zt=ue,Sr=ue.nss;return Zt.path=(Ee||fe.nid)+":"+Sr,Zt}},qe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Nt={scheme:"urn:uuid",parse:function(ue,fe){var Ae=ue;return Ae.uuid=Ae.nss,Ae.nss=void 0,!fe.tolerant&&(!Ae.uuid||!Ae.uuid.match(qe))&&(Ae.error=Ae.error||"UUID is not valid."),Ae},serialize:function(ue,fe){var Ae=ue;return Ae.nss=(ue.uuid||"").toLowerCase(),Ae}};ne[At.scheme]=At,ne[kt.scheme]=kt,ne[Wt.scheme]=Wt,ne[cr.scheme]=cr,ne[Te.scheme]=Te,ne[$e.scheme]=$e,ne[Nt.scheme]=Nt,r.SCHEMES=ne,r.pctEncChar=le,r.pctDecChars=me,r.parse=j,r.removeDotSegments=he,r.serialize=Ce,r.resolveComponents=_e,r.resolve=G,r.normalize=J,r.equal=ge,r.escapeComponent=be,r.unescapeComponent=ke,Object.defineProperty(r,"__esModule",{value:!0})})})(Ox,Ox.exports);var fL=Ox.exports,Rx;(function(t){t.Public="public",t.Private="private"})(Rx||(Rx={}));const du=Rx;class Zs{static validateEs256kOperationKey(e,r){const n=new Set(["kty","crv","x","y"]);r===du.Private&&n.add("d");for(const s in e)if(!n.has(s))throw new Sn(An.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Sn(An.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Sn(An.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Sn(An.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Sn(An.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===du.Private&&(e.d===void 0||e.d.length!==43))throw new Sn(An.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Sn(An.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!ly.isBase64UrlString(e))throw new Sn(An.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;const r=new Set;for(const n of e){if(r.has(n))throw new Sn(An.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}}class ao{}ao.hashAlgorithmInMultihashCode=18;ao.maxCanonicalizedDeltaSizeInBytes=1e3;var ole=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;const i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`};const hL=Zu(ole);class hf{static canonicalizeAsBytes(e){const r=hf.removeAllUndefinedProperties(e),n=hL(r);return ly.stringToBytes(n)}static removeAllUndefinedProperties(e){for(const r in e)typeof e[r]=="object"?hf.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}}var ale=pL,DB=128,ule=127,cle=~ule,lle=Math.pow(2,31);function pL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=lle;)e[r++]=t&255|DB,t/=128;for(;t&cle;)e[r++]=t&255|DB,t>>>=7;return e[r]=t|0,pL.bytes=r-n+1,e}var dle=Nx,fle=128,xB=127;function Nx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Nx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&xB)<<s:(o&xB)*Math.pow(2,s),s+=7}while(o>=fle);return Nx.bytes=i-n,r}var hle=Math.pow(2,7),ple=Math.pow(2,14),mle=Math.pow(2,21),yle=Math.pow(2,28),gle=Math.pow(2,35),vle=Math.pow(2,42),wle=Math.pow(2,49),_le=Math.pow(2,56),ble=Math.pow(2,63),Ele=function(t){return t<hle?1:t<ple?2:t<mle?3:t<yle?4:t<gle?5:t<vle?6:t<wle?7:t<_le?8:t<ble?9:10},Ale={encode:ale,decode:dle,encodingLength:Ele},EE=Ale;const PB=(t,e=0)=>[EE.decode(t,e),EE.decode.bytes],CB=(t,e,r=0)=>(EE.encode(t,e,r),e),IB=t=>EE.encodingLength(t),kB=(t,e)=>{const r=e.byteLength,n=IB(t),s=n+IB(r),i=new Uint8Array(s+r);return CB(t,i,0),CB(r,i,n),i.set(e,s),new mL(t,r,e,i)},Sle=t=>{const e=Yce(t),[r,n]=PB(e),[s,i]=PB(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new mL(r,s,o,e)};class mL{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const Tle=({name:t,code:e,encode:r})=>new Dle(t,e,r);class Dle{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?kB(this.code,r):r.then(n=>kB(this.code,n))}else throw Error("Unknown type, must be binary type")}}const xle=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$B=Tle({name:"sha2-256",code:18,encode:xle("SHA-256")});var Ng=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class Yn{static hash(e,r){return Ng(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield $B.digest(e)).bytes;break;default:throw new Sn(An.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return Ng(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield $B.encode(e);break;default:throw new Sn(An.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return Ng(this,void 0,void 0,function*(){const n=hf.canonicalizeAsBytes(e);return yield Yn.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return Ng(this,void 0,void 0,function*(){const n=hf.canonicalizeAsBytes(e),s=yield Yn.hashAsNonMultihashBytes(n,r);return yield Yn.hashThenEncode(s,r)})}static hashThenEncode(e,r){return Ng(this,void 0,void 0,function*(){const n=yield Yn.hash(e,r);return ly.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n;const s=ly.decodeAsBytes(e,r);try{n=Sle(s)}catch{throw new Sn(An.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}const i=ao.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Sn(An.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}}var Bx;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(Bx||(Bx={}));const rb=Bx;var Fx;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(Fx||(Fx={}));const em=Fx;var nb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class Ji{static createCreateRequest(e){return nb(this,void 0,void 0,function*(){const r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;Zs.validateEs256kOperationKey(r,du.Public),Zs.validateEs256kOperationKey(n,du.Public),Ji.validateDidDocumentKeys(s),Ji.validateServices(i);const o=ao.hashAlgorithmInMultihashCode,a=[{action:em.Replace,document:e.document}],u={updateCommitment:yield Yn.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};Ji.validateDeltaSize(u);const c={deltaHash:yield Yn.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield Yn.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:rb.Create,suffixData:c,delta:u}})}static createDeactivateRequest(e){return nb(this,void 0,void 0,function*(){Ji.validateDidSuffix(e.didSuffix),Zs.validateEs256kOperationKey(e.recoveryPublicKey,du.Public);const r=ao.hashAlgorithmInMultihashCode,n=yield Yn.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:rb.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return nb(this,void 0,void 0,function*(){Ji.validateDidSuffix(e.didSuffix),Zs.validateEs256kOperationKey(e.recoveryPublicKey,du.Public),Zs.validateEs256kOperationKey(e.nextRecoveryPublicKey,du.Public),Zs.validateEs256kOperationKey(e.nextUpdatePublicKey,du.Public),Ji.validateDidDocumentKeys(e.document.publicKeys),Ji.validateServices(e.document.services);const r=ao.hashAlgorithmInMultihashCode,n=yield Yn.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:em.Replace,document:e.document}],i=yield Yn.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield Yn.canonicalizeThenHashThenEncode(o,r),l={recoveryCommitment:yield Yn.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},c=yield e.signer.sign({alg:"ES256K"},l);return{type:rb.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:c}})}static createUpdateRequest(e){return nb(this,void 0,void 0,function*(){if(Ji.validateDidSuffix(e.didSuffix),Zs.validateEs256kOperationKey(e.updatePublicKey,du.Public),Zs.validateEs256kOperationKey(e.nextUpdatePublicKey,du.Public),Ji.validateServices(e.servicesToAdd),Ji.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(const p of e.idsOfServicesToRemove)Zs.validateId(p);if(e.idsOfPublicKeysToRemove!==void 0)for(const p of e.idsOfPublicKeysToRemove)Zs.validateId(p);const r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){const p={action:em.AddServices,services:n};r.push(p)}const s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){const p={action:em.RemoveServices,ids:s};r.push(p)}const i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){const p={action:em.AddPublicKeys,publicKeys:i};r.push(p)}const o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){const p={action:em.RemovePublicKeys,ids:o};r.push(p)}const a=ao.hashAlgorithmInMultihashCode,u=yield Yn.canonicalizeThenHashThenEncode(e.updatePublicKey,a),l=yield Yn.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),c={patches:r,updateCommitment:l},d=yield Yn.canonicalizeThenHashThenEncode(c,a),h={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},h);return{type:rb.Update,didSuffix:e.didSuffix,revealValue:u,delta:c,signedData:f}})}static validateDidSuffix(e){Yn.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;const r=new Set;for(const n of e){if(Array.isArray(n.publicKeyJwk))throw new Sn(An.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Zs.validateId(n.id),r.has(n.id))throw new Sn(An.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Zs.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){const r=new Set;for(const n of e){if(Ji.validateService(n),r.has(n.id))throw new Sn(An.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Zs.validateId(e.id);const r=30;if(e.type.length>r){const n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Sn(An.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){const n="Service endpoint value cannot be an array.";throw new Sn(An.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&fL.parse(e.serviceEndpoint).error!==void 0)throw new Sn(An.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){const r=hf.canonicalizeAsBytes(e);if(r.length>ao.maxCanonicalizedDeltaSizeInBytes){const n=`Delta of ${r.length} bytes exceeded limit of ${ao.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Sn(An.DeltaExceedsMaximumSize,n)}}}var OB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class $w{static createLongFormDid(e){return OB(this,void 0,void 0,function*(){const r=yield Ji.createCreateRequest(e),n=yield $w.computeDidUniqueSuffix(r.suffixData);let s;ao.network===void 0||ao.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${ao.network}:${n}`;const i={suffixData:r.suffixData,delta:r.delta},o=hf.canonicalizeAsBytes(i),a=ly.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return OB(this,void 0,void 0,function*(){const r=hf.canonicalizeAsBytes(e),n=yield Yn.hash(r,ao.hashAlgorithmInMultihashCode);return ly.encode(n)})}}var RB;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(RB||(RB={}));var NB;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(NB||(NB={}));var Id=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},vu;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(vu||(vu={}));const Ple={Ed25519:vu.Ed25519,ES256K:vu.secp256k1,ES256:vu.secp256r1,"P-256":vu.secp256r1,secp256k1:vu.secp256k1,secp256r1:vu.secp256r1},BB="https://ion.tbd.engineering";let Cle=class T0 extends kw{static create(){return Id(this,arguments,void 0,function*({keyManager:e=new cl,options:r={}}={}){var n,s,i,o,a,u,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in Ple)))throw new Error("One or more verification method algorithms are not supported");const c=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const S of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});h.push({id:S.id,publicKeyJwk:D,purposes:(a=S.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield e.generateKey({algorithm:vu.secp256k1}),p=yield e.getPublicKey({keyUri:f}),m=yield e.generateKey({algorithm:vu.secp256k1}),E=yield e.getPublicKey({keyUri:m}),A=yield Bg.computeLongFormDidUri({recoveryKey:p,updateKey:E,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:h}),{didDocument:_,didResolutionMetadata:g}=yield T0.resolve(A,{gatewayUri:r.gatewayUri});if(_===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const v=new ff({uri:A,document:_,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:p,updateKey:E},keyManager:e});if(!((l=r.publish)!==null&&l!==void 0)||l){const S=yield T0.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static getSigningMethod(e){return Id(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=_r.parse(r.id);if(i&&i.method!==this.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new ht(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Id(this,arguments,void 0,function*({portableDid:r,keyManager:n=new cl}){const s=_r.parse(r.uri);if((s==null?void 0:s.method)!==T0.methodName)throw new ht(st.MethodNotSupported,"Method not supported");return yield ff.import({portableDid:r,keyManager:n})})}static publish(e){return Id(this,arguments,void 0,function*({did:r,gatewayUri:n=BB}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:yce({didDocument:r.document,methodId:c.id})})))!==null&&i!==void 0?i:[],u=yield Bg.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield Bg.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const c=Bg.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:st.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Id(this,arguments,void 0,function*(r,n={}){var s,i;const o=_r.parse(r);if(!o)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==T0.methodName)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:BB;try{const u=Bg.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(u);if(!l.ok)throw new ht(st.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:c,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},Ri),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(u){if(!(u instanceof ht))throw new Error(u);return Object.assign(Object.assign({},Ri),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}};Cle.methodName="ion";let Bg=class hh{static appendPathToUrl({baseUrl:e,path:r}){const n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Id(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield hh.createIonDocument({services:s,verificationMethods:i}),a=hh.normalizeJwk(r),u=hh.normalizeJwk(n);return yield $w.createLongFormDid({document:o,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return Id(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield Ji.createCreateRequest({document:r,recoveryKey:hh.normalizeJwk(n),updateKey:hh.normalizeJwk(s)})})}static createIonDocument(e){return Id(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let c=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield Rr({jwk:l.publicKeyJwk});c=`${c.split("#").pop()}`;const d={id:c,publicKeyJwk:hh.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var ib=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let yL=class D0 extends kw{static create(){return ib(this,arguments,void 0,function*({keyManager:e=new cl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=vt.object(l).toBase64Url(),d=`did:${D0.methodName}:${c}`,f=(yield D0.resolve(d)).didDocument;return new ff({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return ib(this,arguments,void 0,function*({didDocument:r}){var n;const s=_r.parse(r.id);if(s&&s.method!==this.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new ht(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return ib(this,arguments,void 0,function*({portableDid:r,keyManager:n=new cl}){const s=_r.parse(r.uri);if((s==null?void 0:s.method)!==D0.methodName)throw new ht(st.MethodNotSupported,"Method not supported");const i=yield ff.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new ht(st.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return ib(this,void 0,void 0,function*(){const n=_r.parse(e);let s;try{s=vt.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==D0.methodName)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},Ri),{didDocument:i})})}};yL.methodName="jwk";var Aa=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},kc;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(kc||(kc={}));const uT={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},Ile={Ed25519:kc.Ed25519,ES256K:kc.secp256k1,ES256:kc.secp256r1,"P-256":kc.secp256r1,secp256k1:kc.secp256k1,secp256r1:kc.secp256r1,X25519:kc.X25519};let kle=class Pc extends kw{static create(){return Aa(this,arguments,void 0,function*({keyManager:e=new cl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=yield Mo.publicKeyToMultibaseId({publicKey:l}),d=`did:${Pc.methodName}:${c}`,f=(yield Pc.resolve(d,r)).didDocument;return new ff({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return Aa(this,arguments,void 0,function*({didDocument:r}){var n;const s=_r.parse(r.id);if(s&&s.method!==this.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new ht(st.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Aa(this,arguments,void 0,function*({portableDid:r,keyManager:n=new cl}){const s=_r.parse(r.uri);if((s==null?void 0:s.method)!==Pc.methodName)throw new ht(st.MethodNotSupported,"Method not supported");const i=yield ff.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new ht(st.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return Aa(this,void 0,void 0,function*(){try{const n=yield Pc.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},Ri),{didDocument:n})}catch(n){if(!(n instanceof ht))throw new Error(n);return Object.assign(Object.assign({},Ri),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Aa(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},l=_r.parse(r);if(!l)throw new ht(st.InvalidDid,`Invalid DID URI: ${r}`);const c=l.id;if(l.method!==Pc.methodName)throw new ht(st.MethodNotSupported,`Method not supported: ${l.method}`);if(!Pc.validateIdentifier(l))throw new ht(st.InvalidDid,`Invalid DID URI: ${r}`);const d=yield Pc.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(u.id=l.uri,u.verificationMethod=[d],u.authentication=[d.id],u.assertionMethod=[d.id],u.capabilityInvocation=[d.id],u.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",m=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});u.verificationMethod.push(m),u.keyAgreement=[m.id]}const h=[s];return mce({didDocument:u}).forEach(p=>{const m=uT[p];h.push(m)}),u["@context"]=h,u})}static createEncryptionMethod(e){return Aa(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l}=yield Pc.deriveEncryptionKey({multibaseValue:n}),c=u.byteLength,d=Mo.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(c!==d)throw new ht(st.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${d}`);const h=J9({keyBytes:u,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new ht(st.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in uT))throw new ht(st.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new ht(st.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield Mo.multicodecToJwk({code:l});a.publicKeyJwk=yield Mo.keyConverter(p).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return Aa(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l,multicodecName:c}=dB({multibaseKeyId:n}),d=u.byteLength,h=Mo.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new ht(st.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(c){case"secp256k1-pub":f=yield uo.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":f=yield Bs.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":f=!0;break}if(!f)throw new ht(st.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new ht(st.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in uT))throw new ht(st.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new ht(st.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:m}=yield Mo.multicodecToJwk({code:l});a.publicKeyJwk=yield Mo.keyConverter(m).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return Aa(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=dB({multibaseKeyId:r});if(i===237){const o=yield Mo.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Bs.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Mo.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){const{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Tx(n)==="String"&&n.startsWith("z")}};kle.methodName="key";let Mo=class pm{static jwkToMulticodec(e){return Aa(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=pm.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:na.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){const n={"P-256":Wo.compressPublicKey,secp256k1:uo.compressPublicKey}[e];if(!n)throw new ht(st.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){const n={Ed25519:Bs,"P-256":Wo,secp256k1:uo,X25519:W9}[e];if(!n)throw new ht(st.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Aa(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?na.getNameFromCode({code:r}):n;const s=n,i=pm.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return Aa(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in Ile))throw new ht(st.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield pm.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield pm.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield pm.jwkToMulticodec({jwk:r});return J9({keyBytes:s,multicodecName:i})})}};Mo.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Mo.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Mo.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var $le=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let gL=class vL extends kw{static resolve(e,r){return $le(this,void 0,void 0,function*(){const n=_r.parse(e);if(!n)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==vL.methodName)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},Ri),{didDocument:a})}catch{return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:"notFound"}})}})}};gL.methodName="web";var dy=1e3,fy=dy*60,hy=fy*60,hp=hy*24,Ole=hp*7,Rle=hp*365.25,Nle=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Ble(t);if(r==="number"&&isFinite(t))return e.long?Mle(t):Fle(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ble(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Rle;case"weeks":case"week":case"w":return r*Ole;case"days":case"day":case"d":return r*hp;case"hours":case"hour":case"hrs":case"hr":case"h":return r*hy;case"minutes":case"minute":case"mins":case"min":case"m":return r*fy;case"seconds":case"second":case"secs":case"sec":case"s":return r*dy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Fle(t){var e=Math.abs(t);return e>=hp?Math.round(t/hp)+"d":e>=hy?Math.round(t/hy)+"h":e>=fy?Math.round(t/fy)+"m":e>=dy?Math.round(t/dy)+"s":t+"ms"}function Mle(t){var e=Math.abs(t);return e>=hp?sb(t,e,hp,"day"):e>=hy?sb(t,e,hy,"hour"):e>=fy?sb(t,e,fy,"minute"):e>=dy?sb(t,e,dy,"second"):t+" ms"}function sb(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}const jle=Zu(Nle),Ule={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var FB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let Lle=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||Ule;for(const n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return FB(this,void 0,void 0,function*(){const n=_r.parse(e);if(!n)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:st.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});const s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},Ri),{didResolutionMetadata:{error:st.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});const i=yield this.cache.get(n.uri);if(i)return i;{const o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return FB(this,void 0,void 0,function*(){const n=_r.parse(e);if(!n)return{dereferencingMetadata:{error:st.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};const{service:a=[],verificationMethod:u=[]}=s,l=new Set([e,n.fragment,`#${n.fragment}`]);let c;for(let d of u)if(l.has(d.id)){c=d;break}for(let d of a)if(l.has(d.id)){c=d;break}return c?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:c,contentMetadata:i}:{dereferencingMetadata:{error:st.NotFound},contentStream:null,contentMetadata:{}}})}};const wL=new Lle({didResolvers:[bE,yL,gL]});async function Kle(t){const{didResolutionMetadata:e,didDocument:r}=await wL.resolve(t);if(e.error)throw new Error(`Failed to resolve DID: ${t}. Error: ${e.error}`);return r}function Vle(t){return!!t&&"id"in t&&"type"in t&&"controller"in t}const qle=new pue;class Yh{static digest(e){const r=hL(e),n=_a.string(r).toUint8Array();return lf(n)}static async sign(e){const{did:r,payload:n,detached:s}=e,i=await r.getSigner();let o=i.keyId;o.startsWith("#")&&(o=`${r.uri}${o}`);const a={alg:i.algorithm,kid:o},u=_a.object(a).toBase64Url(),l=_a.uint8Array(n).toBase64Url(),c=`${u}.${l}`,d=_a.string(c).toUint8Array(),h=await i.sign({data:d}),f=_a.uint8Array(h).toBase64Url();return s?`${u}..${f}`:`${u}.${l}.${f}`}static async verify(e){const{signature:r,detachedPayload:n}=e;if(!r)throw new Error("Signature verification failed: Expected signature property to exist");const s=r.split(".");if(s.length!==3)throw new Error("Signature verification failed: Expected valid JWS with detached content");let[i,o,a]=s;if(n){if(o.length!==0)throw new Error("Signature verification failed: Expected valid JWS with detached content");o=_a.uint8Array(n).toBase64Url()}const u=_a.base64Url(i).toObject();if(!u.alg||!u.kid)throw new Error("Signature verification failed: Expected JWS header to contain alg and kid");const c=(await wL.dereference(u.kid)).contentStream;if(!Vle(c))throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method");const d=c.publicKeyJwk;if(!d)throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method with publicKeyJwk");const h=`${i}.${o}`,f=_a.string(h).toUint8Array(),p=_a.base64Url(a).toUint8Array();if(!await qle.verify({key:d,data:f,signature:p}))throw new Error("Signature verification failed: Integrity mismatch");const[E]=u.kid.split("#");return E}}var Ow={},oS=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};Object.defineProperty(Ow,"__esModule",{value:!0});const _L=oS;_L.code='require("ajv/dist/runtime/equal").default';var MB=Ow.default=_L;const Hle=mm;function mm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(const u in t)if(!(u==="reason"||u==="success"))return mm.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(t.reason!==void 0){const u=o;if(typeof t.reason!="string")return mm.errors=[{instancePath:e+"/reason",schemaPath:"#/properties/reason/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=u===o}else var a=!0;if(a)if(t.success!==void 0){const u=o;if(typeof t.success!="boolean")return mm.errors=[{instancePath:e+"/success",schemaPath:"#/properties/success/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=u===o}else var a=!0}}else return mm.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return mm.errors=i,o===0}const zle=Mx;function Mx(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return t&&typeof t=="object"&&!Array.isArray(t)?(Mx.errors=i,o===0):(Mx.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}const Wle=ft,Gle={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/offering.schema.json",type:"object",properties:{additionalProperties:!1,description:{type:"string",description:"Brief description of what is being offered."},payin:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. Absence of this field implies that there is no _additional_ fee associated to the respective payment method."}},required:["kind"]}}},required:["currencyCode","methods"]},payout:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. absence of this field implies that there is no _additional_ fee associated to the respective payment method"},estimatedSettlementTime:{type:"number",description:"Estimated time in seconds for the payout to be settled. e.g. 3600 for 1 hour. 0 for instant settlement.",minimum:0}},required:["kind","estimatedSettlementTime"]}}},required:["currencyCode","methods"]},payoutUnitsPerPayinUnit:{type:"string",description:"Number of payout currency units for one payin currency unit (i.e 290000 USD for 1 BTC)"},requiredClaims:{type:"object",description:"PresentationDefinition that describes the credential(s) the PFI requires in order to provide a quote."}},required:["description","payin","payout","payoutUnitsPerPayinUnit"]},Os=new RegExp("^([0-9]+(?:[.][0-9]+)?)$","u"),Jle={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},jB={enum:["array","boolean","integer","null","number","object","string"]};function jo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(jo.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(jo.errors=i,o===0):(jo.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}const cT={validate:Me};function us(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return us.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;const u=t.length;for(let l=0;l<u;l++){const c=o;cT.validate(t[l],{instancePath:e+"/"+l,parentData:t,parentDataProperty:l,rootData:s})||(i=i===null?cT.validate.errors:i.concat(cT.validate.errors),o=i.length);var a=c===o;if(!a)break}}}else return us.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return us.errors=i,o===0}function Me(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return Me.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:Jle.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){const g=o;if(o===g&&o===g&&typeof t.$id!="string")return Me.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.$schema!==void 0){const g=o;if(o===g&&o===g&&typeof t.$schema!="string")return Me.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.$ref!==void 0){const g=o;if(o===g&&o===g&&typeof t.$ref!="string")return Me.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.$comment!==void 0){const g=o;if(typeof t.$comment!="string")return Me.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.title!==void 0){const g=o;if(typeof t.title!="string")return Me.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.description!==void 0){const g=o;if(typeof t.description!="string")return Me.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.readOnly!==void 0){const g=o;if(typeof t.readOnly!="boolean")return Me.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(t.examples!==void 0){const g=o;if(o===g&&!Array.isArray(t.examples))return Me.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let g=t.multipleOf;const v=o;if(o===v)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return Me.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return Me.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maximum!==void 0){let g=t.maximum;const v=o;if(!(typeof g=="number"&&isFinite(g)))return Me.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let g=t.exclusiveMaximum;const v=o;if(!(typeof g=="number"&&isFinite(g)))return Me.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.minimum!==void 0){let g=t.minimum;const v=o;if(!(typeof g=="number"&&isFinite(g)))return Me.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let g=t.exclusiveMinimum;const v=o;if(!(typeof g=="number"&&isFinite(g)))return Me.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maxLength!==void 0){let g=t.maxLength;const v=o,S=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return Me.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return Me.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minLength!==void 0){const g=o;jo(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?jo.errors:i.concat(jo.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.pattern!==void 0){const g=o;if(o===g&&o===g&&typeof t.pattern!="string")return Me.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.additionalItems!==void 0){const g=o;Me(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.items!==void 0){let g=t.items;const v=o,S=o;let x=!1;const D=o;Me(g,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var u=D===o;if(x=x||u,!x){const b=o;us(g,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?us.errors:i.concat(us.errors),o=i.length);var u=b===o;x=x||u}if(x)o=S,i!==null&&(S?i.length=S:i=null);else{const b={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,Me.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.maxItems!==void 0){let g=t.maxItems;const v=o,S=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return Me.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return Me.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minItems!==void 0){const g=o;jo(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?jo.errors:i.concat(jo.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){const g=o;if(typeof t.uniqueItems!="boolean")return Me.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(t.contains!==void 0){const g=o;Me(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let g=t.maxProperties;const v=o,S=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return Me.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return Me.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minProperties!==void 0){const g=o;jo(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?jo.errors:i.concat(jo.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.required!==void 0){let g=t.required;const v=o;if(o===o)if(Array.isArray(g)){var l=!0;const D=g.length;for(let w=0;w<D;w++){const b=o;if(typeof g[w]!="string")return Me.errors=[{instancePath:e+"/required/"+w,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=b===o;if(!l)break}if(l){let w=g.length,b;if(w>1){const T={};for(;w--;){let P=g[w];if(typeof P=="string"){if(typeof T[P]=="number")return b=T[P],Me.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:w,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+w+" are identical)"}],!1;T[P]=w}}}}}else return Me.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){const g=o;Me(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.definitions!==void 0){let g=t.definitions;const v=o;if(o===v)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){const D=o;Me(g[x],{instancePath:e+"/definitions/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var c=D===o;if(!c)break}else return Me.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.properties!==void 0){let g=t.properties;const v=o;if(o===v)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){const D=o;Me(g[x],{instancePath:e+"/properties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var d=D===o;if(!d)break}else return Me.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let g=t.patternProperties;const v=o;if(o===v)if(g&&typeof g=="object"&&!Array.isArray(g)){for(const x in g){var h=o===o;if(!h){const w={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:x},message:"property name must be valid"};return i===null?i=[w]:i.push(w),o++,Me.errors=i,!1}}if(h)for(const x in g){const D=o;Me(g[x],{instancePath:e+"/patternProperties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var f=D===o;if(!f)break}}else return Me.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.dependencies!==void 0){let g=t.dependencies;const v=o;if(o===v)if(g&&typeof g=="object"&&!Array.isArray(g))for(const x in g){let D=g[x];const w=o,b=o;let T=!1;const P=o;Me(D,{instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:x,rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var p=P===o;if(T=T||p,!T){const C=o;if(o===o)if(Array.isArray(D)){var m=!0;const L=D.length;for(let q=0;q<L;q++){const se=o;if(typeof D[q]!="string"){const re={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+q,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[re]:i.push(re),o++}var m=se===o;if(!m)break}if(m){let q=D.length,se;if(q>1){const X={};for(;q--;){let re=D[q];if(typeof re=="string"){if(typeof X[re]=="number"){se=X[re];const W={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:q,j:se},message:"must NOT have duplicate items (items ## "+se+" and "+q+" are identical)"};i===null?i=[W]:i.push(W),o++;break}X[re]=q}}}}}else{const L={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[L]:i.push(L),o++}var p=C===o;T=T||p}if(T)o=b,i!==null&&(b?i.length=b:i=null);else{const C={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[C]:i.push(C),o++,Me.errors=i,!1}var E=w===o;if(!E)break}else return Me.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.propertyNames!==void 0){const g=o;Me(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.enum!==void 0){let g=t.enum;const v=o;if(o===v)if(Array.isArray(g)){if(g.length<1)return Me.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let x=g.length,D;if(x>1){for(;x--;)for(D=x;D--;)if(MB(g[x],g[D]))return Me.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:x,j:D},message:"must NOT have duplicate items (items ## "+D+" and "+x+" are identical)"}],!1}}}else return Me.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.type!==void 0){let g=t.type;const v=o,S=o;let x=!1;const D=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){const b={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:jB.enum},message:"must be equal to one of the allowed values"};i===null?i=[b]:i.push(b),o++}var A=D===o;if(x=x||A,!x){const b=o;if(o===b)if(Array.isArray(g))if(g.length<1){const P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[P]:i.push(P),o++}else{var _=!0;const P=g.length;for(let C=0;C<P;C++){let k=g[C];const K=o;if(!(k==="array"||k==="boolean"||k==="integer"||k==="null"||k==="number"||k==="object"||k==="string")){const q={instancePath:e+"/type/"+C,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:jB.enum},message:"must be equal to one of the allowed values"};i===null?i=[q]:i.push(q),o++}var _=K===o;if(!_)break}if(_){let C=g.length,k;if(C>1){e:for(;C--;)for(k=C;k--;)if(MB(g[C],g[k])){const K={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:C,j:k},message:"must NOT have duplicate items (items ## "+k+" and "+C+" are identical)"};i===null?i=[K]:i.push(K),o++;break e}}}}else{const P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[P]:i.push(P),o++}var A=b===o;x=x||A}if(x)o=S,i!==null&&(S?i.length=S:i=null);else{const b={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,Me.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.format!==void 0){const g=o;if(typeof t.format!="string")return Me.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){const g=o;if(typeof t.contentMediaType!="string")return Me.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){const g=o;if(typeof t.contentEncoding!="string")return Me.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.if!==void 0){const g=o;Me(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.then!==void 0){const g=o;Me(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.else!==void 0){const g=o;Me(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.allOf!==void 0){const g=o;us(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?us.errors:i.concat(us.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.anyOf!==void 0){const g=o;us(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?us.errors:i.concat(us.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(t.oneOf!==void 0){const g=o;us(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?us.errors:i.concat(us.errors),o=i.length);var a=g===o}else var a=!0;if(a)if(t.not!==void 0){const g=o;Me(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return Me.errors=i,o===0}const Xle=Object.prototype.hasOwnProperty;function ft(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.description===void 0&&(p="description")||t.payin===void 0&&(p="payin")||t.payout===void 0&&(p="payout")||t.payoutUnitsPerPayinUnit===void 0&&(p="payoutUnitsPerPayinUnit"))return ft.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return ft.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.description!==void 0){const m=o;if(typeof t.description!="string")return ft.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(t.payin!==void 0){let m=t.payin;const E=o;if(o===E)if(m&&typeof m=="object"&&!Array.isArray(m)){let _;if(m.currencyCode===void 0&&(_="currencyCode")||m.methods===void 0&&(_="methods"))return ft.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:_},message:"must have required property '"+_+"'"}],!1;{const g=o;for(const v in m)if(!(v==="currencyCode"||v==="min"||v==="max"||v==="methods"))return ft.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"}],!1;if(g===o){if(m.currencyCode!==void 0){const v=o;if(typeof m.currencyCode!="string")return ft.errors=[{instancePath:e+"/payin/currencyCode",schemaPath:"#/properties/payin/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=v===o}else var u=!0;if(u){if(m.min!==void 0){let v=m.min;const S=o;if(o===o)if(typeof v=="string"){if(!Os.test(v))return ft.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=S===o}else var u=!0;if(u){if(m.max!==void 0){let v=m.max;const S=o;if(o===o)if(typeof v=="string"){if(!Os.test(v))return ft.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=S===o}else var u=!0;if(u)if(m.methods!==void 0){let v=m.methods;const S=o;if(o===S)if(Array.isArray(v)){var l=!0;const D=v.length;for(let w=0;w<D;w++){let b=v[w];const T=o;if(o===T)if(b&&typeof b=="object"&&!Array.isArray(b)){let C;if(b.kind===void 0&&(C="kind"))return ft.errors=[{instancePath:e+"/payin/methods/"+w,schemaPath:"#/properties/payin/properties/methods/items/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{const k=o;for(const K in b)if(!(K==="kind"||K==="name"||K==="description"||K==="group"||K==="requiredPaymentDetails"||K==="min"||K==="max"||K==="fee"))return ft.errors=[{instancePath:e+"/payin/methods/"+w,schemaPath:"#/properties/payin/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:K},message:"must NOT have additional properties"}],!1;if(k===o){if(b.kind!==void 0){const K=o;if(typeof b.kind!="string")return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/kind",schemaPath:"#/properties/payin/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=K===o}else var c=!0;if(c){if(b.name!==void 0){const K=o;if(typeof b.name!="string")return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/name",schemaPath:"#/properties/payin/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=K===o}else var c=!0;if(c){if(b.description!==void 0){const K=o;if(typeof b.description!="string")return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/description",schemaPath:"#/properties/payin/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=K===o}else var c=!0;if(c){if(b.group!==void 0){const K=o;if(typeof b.group!="string")return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/group",schemaPath:"#/properties/payin/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=K===o}else var c=!0;if(c){if(b.requiredPaymentDetails!==void 0){const K=o;Me(b.requiredPaymentDetails,{instancePath:e+"/payin/methods/"+w+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var c=K===o}else var c=!0;if(c){if(b.min!==void 0){let K=b.min;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=L===o}else var c=!0;if(c){if(b.max!==void 0){let K=b.max;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=L===o}else var c=!0;if(c)if(b.fee!==void 0){let K=b.fee;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payin/methods/"+w+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=L===o}else var c=!0}}}}}}}}}else return ft.errors=[{instancePath:e+"/payin/methods/"+w,schemaPath:"#/properties/payin/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=T===o;if(!l)break}}else return ft.errors=[{instancePath:e+"/payin/methods",schemaPath:"#/properties/payin/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=S===o}else var u=!0}}}}}else return ft.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=E===o}else var a=!0;if(a){if(t.payout!==void 0){let m=t.payout;const E=o;if(o===E)if(m&&typeof m=="object"&&!Array.isArray(m)){let _;if(m.currencyCode===void 0&&(_="currencyCode")||m.methods===void 0&&(_="methods"))return ft.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:_},message:"must have required property '"+_+"'"}],!1;{const g=o;for(const v in m)if(!(v==="currencyCode"||v==="min"||v==="max"||v==="methods"))return ft.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"}],!1;if(g===o){if(m.currencyCode!==void 0){const v=o;if(typeof m.currencyCode!="string")return ft.errors=[{instancePath:e+"/payout/currencyCode",schemaPath:"#/properties/payout/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=v===o}else var d=!0;if(d){if(m.min!==void 0){let v=m.min;const S=o;if(o===o)if(typeof v=="string"){if(!Os.test(v))return ft.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=S===o}else var d=!0;if(d){if(m.max!==void 0){let v=m.max;const S=o;if(o===o)if(typeof v=="string"){if(!Os.test(v))return ft.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=S===o}else var d=!0;if(d)if(m.methods!==void 0){let v=m.methods;const S=o;if(o===S)if(Array.isArray(v)){var h=!0;const D=v.length;for(let w=0;w<D;w++){let b=v[w];const T=o;if(o===T)if(b&&typeof b=="object"&&!Array.isArray(b)){let C;if(b.kind===void 0&&(C="kind")||b.estimatedSettlementTime===void 0&&(C="estimatedSettlementTime"))return ft.errors=[{instancePath:e+"/payout/methods/"+w,schemaPath:"#/properties/payout/properties/methods/items/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{const k=o;for(const K in b)if(!Xle.call(Gle.properties.payout.properties.methods.items.properties,K))return ft.errors=[{instancePath:e+"/payout/methods/"+w,schemaPath:"#/properties/payout/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:K},message:"must NOT have additional properties"}],!1;if(k===o){if(b.kind!==void 0){const K=o;if(typeof b.kind!="string")return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/kind",schemaPath:"#/properties/payout/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=K===o}else var f=!0;if(f){if(b.name!==void 0){const K=o;if(typeof b.name!="string")return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/name",schemaPath:"#/properties/payout/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=K===o}else var f=!0;if(f){if(b.description!==void 0){const K=o;if(typeof b.description!="string")return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/description",schemaPath:"#/properties/payout/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=K===o}else var f=!0;if(f){if(b.group!==void 0){const K=o;if(typeof b.group!="string")return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/group",schemaPath:"#/properties/payout/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=K===o}else var f=!0;if(f){if(b.requiredPaymentDetails!==void 0){const K=o;Me(b.requiredPaymentDetails,{instancePath:e+"/payout/methods/"+w+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?Me.errors:i.concat(Me.errors),o=i.length);var f=K===o}else var f=!0;if(f){if(b.min!==void 0){let K=b.min;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(b.max!==void 0){let K=b.max;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f){if(b.fee!==void 0){let K=b.fee;const L=o;if(o===o)if(typeof K=="string"){if(!Os.test(K))return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=L===o}else var f=!0;if(f)if(b.estimatedSettlementTime!==void 0){let K=b.estimatedSettlementTime;const L=o;if(o===L)if(typeof K=="number"&&isFinite(K)){if(K<0||isNaN(K))return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return ft.errors=[{instancePath:e+"/payout/methods/"+w+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var f=L===o}else var f=!0}}}}}}}}}}else return ft.errors=[{instancePath:e+"/payout/methods/"+w,schemaPath:"#/properties/payout/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=T===o;if(!h)break}}else return ft.errors=[{instancePath:e+"/payout/methods",schemaPath:"#/properties/payout/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=S===o}else var d=!0}}}}}else return ft.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=E===o}else var a=!0;if(a){if(t.payoutUnitsPerPayinUnit!==void 0){const m=o;if(typeof t.payoutUnitsPerPayinUnit!="string")return ft.errors=[{instancePath:e+"/payoutUnitsPerPayinUnit",schemaPath:"#/properties/payoutUnitsPerPayinUnit/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a)if(t.requiredClaims!==void 0){let m=t.requiredClaims;const E=o;if(!(m&&typeof m=="object"&&!Array.isArray(m)))return ft.errors=[{instancePath:e+"/requiredClaims",schemaPath:"#/properties/requiredClaims/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=E===o}else var a=!0}}}}}else return ft.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ft.errors=i,o===0}const Zle=hd;function hd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.currencyCode===void 0&&(u="currencyCode")||t.available===void 0&&(u="available"))return hd.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return hd.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.currencyCode!==void 0){const l=o;if(typeof t.currencyCode!="string")return hd.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.available!==void 0){let l=t.available;const c=o;if(typeof l=="string"){if(!Os.test(l))return hd.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return hd.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0}}else return hd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return hd.errors=i,o===0}const Yle=pd,Qle={type:"object",additionalProperties:!1,properties:{from:{$ref:"definitions.json#/definitions/did",description:"The sender's DID"},to:{$ref:"definitions.json#/definitions/did",description:"The recipient's DID"},kind:{type:"string",enum:["rfq","quote","order","orderstatus","close"],description:"The message kind (e.g. rfq, quote)"},id:{type:"string",description:"The message ID"},exchangeId:{type:"string",description:"ID for a 'thread' of messages between Alice <-> PFI. Set by the first message in a thread"},externalId:{type:"string",description:"Arbitrary ID for the caller to associate with the message."},createdAt:{type:"string",description:"ISO8601 formatted string representing the timestamp"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","to","kind","id","exchangeId","createdAt","protocol"]},jx=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u");function Zn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.from===void 0&&(u="from")||t.to===void 0&&(u="to")||t.kind===void 0&&(u="kind")||t.id===void 0&&(u="id")||t.exchangeId===void 0&&(u="exchangeId")||t.createdAt===void 0&&(u="createdAt")||t.protocol===void 0&&(u="protocol"))return Zn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;for(const l in t)if(!(l==="from"||l==="to"||l==="kind"||l==="id"||l==="exchangeId"||l==="externalId"||l==="createdAt"||l==="protocol"))return Zn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;{if(t.from!==void 0){let l=t.from;const c=o;if(typeof l=="string"){if(!jx.test(l))return Zn.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Zn.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a){if(t.to!==void 0){let l=t.to;const c=o;if(typeof l=="string"){if(!jx.test(l))return Zn.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Zn.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a){if(t.kind!==void 0){let l=t.kind;const c=o;if(typeof l!="string")return Zn.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(l==="rfq"||l==="quote"||l==="order"||l==="orderstatus"||l==="close"))return Zn.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/enum",keyword:"enum",params:{allowedValues:Qle.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=c===o}else var a=!0;if(a){if(t.id!==void 0){const l=o;if(typeof t.id!="string")return Zn.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.exchangeId!==void 0){const l=o;if(typeof t.exchangeId!="string")return Zn.errors=[{instancePath:e+"/exchangeId",schemaPath:"#/properties/exchangeId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.externalId!==void 0){const l=o;if(typeof t.externalId!="string")return Zn.errors=[{instancePath:e+"/externalId",schemaPath:"#/properties/externalId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.createdAt!==void 0){const l=o;if(typeof t.createdAt!="string")return Zn.errors=[{instancePath:e+"/createdAt",schemaPath:"#/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.protocol!==void 0){const l=o;if(typeof t.protocol!="string")return Zn.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}}}}}}}else return Zn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Zn.errors=i,o===0}function pd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.metadata===void 0&&(u="metadata")||t.data===void 0&&(u="data")||t.signature===void 0&&(u="signature"))return pd.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const l=o;for(const c in t)if(!(c==="metadata"||c==="data"||c==="signature"||c==="privateData"))return pd.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;if(l===o){if(t.metadata!==void 0){const c=o;Zn(t.metadata,{instancePath:e+"/metadata",parentData:t,parentDataProperty:"metadata",rootData:s})||(i=i===null?Zn.errors:i.concat(Zn.errors),o=i.length);var a=c===o}else var a=!0;if(a){if(t.data!==void 0){let c=t.data;const d=o;if(!(c&&typeof c=="object"&&!Array.isArray(c)))return pd.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a){if(t.signature!==void 0){const c=o;if(typeof t.signature!="string")return pd.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(t.privateData!==void 0){let c=t.privateData;const d=o;if(!(c&&typeof c=="object"&&!Array.isArray(c)))return pd.errors=[{instancePath:e+"/privateData",schemaPath:"#/properties/privateData/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}}else return pd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return pd.errors=i,o===0}const ede=y1;function y1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t))for(const a in t)return y1.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;else return y1.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return y1.errors=i,o===0}const tde=ym;function ym(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let a;if(t.orderStatus===void 0&&(a="orderStatus"))return ym.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;for(const u in t)if(u!=="orderStatus")return ym.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;if(t.orderStatus!==void 0&&typeof t.orderStatus!="string")return ym.errors=[{instancePath:e+"/orderStatus",schemaPath:"#/properties/orderStatus/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return ym.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ym.errors=i,o===0}const rde=gm;function jn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.currencyCode===void 0&&(l="currencyCode")||t.amount===void 0&&(l="amount"))return jn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;for(const c in t)if(!(c==="currencyCode"||c==="amount"||c==="fee"||c==="paymentInstruction"))return jn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;{if(t.currencyCode!==void 0){const c=o;if(typeof t.currencyCode!="string")return jn.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a){if(t.amount!==void 0){let c=t.amount;const d=o;if(typeof c=="string"){if(!Os.test(c))return jn.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return jn.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.fee!==void 0){let c=t.fee;const d=o;if(typeof c=="string"){if(!Os.test(c))return jn.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return jn.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a)if(t.paymentInstruction!==void 0){let c=t.paymentInstruction;const d=o;if(c&&typeof c=="object"&&!Array.isArray(c)){for(const f in c)if(!(f==="link"||f==="instruction"))return jn.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;{if(c.link!==void 0){const f=o;if(typeof c.link!="string")return jn.errors=[{instancePath:e+"/paymentInstruction/link",schemaPath:"#/definitions/PaymentInstruction/properties/link/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=f===o}else var u=!0;if(u)if(c.instruction!==void 0){const f=o;if(typeof c.instruction!="string")return jn.errors=[{instancePath:e+"/paymentInstruction/instruction",schemaPath:"#/definitions/PaymentInstruction/properties/instruction/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=f===o}else var u=!0}}else return jn.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return jn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return jn.errors=i,o===0}function gm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.expiresAt===void 0&&(u="expiresAt")||t.payin===void 0&&(u="payin")||t.payout===void 0&&(u="payout"))return gm.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const l=o;for(const c in t)if(!(c==="expiresAt"||c==="payin"||c==="payout"))return gm.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;if(l===o){if(t.expiresAt!==void 0){const c=o;if(typeof t.expiresAt!="string")return gm.errors=[{instancePath:e+"/expiresAt",schemaPath:"#/properties/expiresAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a){if(t.payin!==void 0){const c=o;jn(t.payin,{instancePath:e+"/payin",parentData:t,parentDataProperty:"payin",rootData:s})||(i=i===null?jn.errors:i.concat(jn.errors),o=i.length);var a=c===o}else var a=!0;if(a)if(t.payout!==void 0){const c=o;jn(t.payout,{instancePath:e+"/payout",parentData:t,parentDataProperty:"payout",rootData:s})||(i=i===null?jn.errors:i.concat(jn.errors),o=i.length);var a=c===o}else var a=!0}}}}else return gm.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return gm.errors=i,o===0}const nde=Ei,ide={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/resource.schema.json",type:"object",additionalProperties:!1,properties:{metadata:{type:"object",properties:{from:{$ref:"definitions.json#/definitions/did",description:"The PFI's DID"},kind:{type:"string",enum:["offering","balance"],description:"The resource kind (e.g. Offering)"},id:{type:"string",description:"The resource id"},createdAt:{type:"string",description:"When the resource was created at. Expressed as ISO8601"},updatedAt:{type:"string",description:"When the resource was last updated. Expressed as ISO8601"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","kind","id","createdAt","protocol"],description:"The metadata object contains fields about the resource and is present for every tbdex resources of all types."},data:{description:"The actual resource content",type:"object"},signature:{type:"string",description:"Signature that verifies that authenticity and integrity of a message"}},required:["metadata","data","signature"],description:"ResourceModel"};function Ei(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.metadata===void 0&&(l="metadata")||t.data===void 0&&(l="data")||t.signature===void 0&&(l="signature"))return Ei.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;for(const c in t)if(!(c==="metadata"||c==="data"||c==="signature"))return Ei.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;{if(t.metadata!==void 0){let c=t.metadata;const d=o;if(c&&typeof c=="object"&&!Array.isArray(c)){let h;if(c.from===void 0&&(h="from")||c.kind===void 0&&(h="kind")||c.id===void 0&&(h="id")||c.createdAt===void 0&&(h="createdAt")||c.protocol===void 0&&(h="protocol"))return Ei.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;if(c.from!==void 0){let f=c.from;const p=o;if(typeof f=="string"){if(!jx.test(f))return Ei.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Ei.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(c.kind!==void 0){let f=c.kind;const p=o;if(typeof f!="string")return Ei.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f==="offering"||f==="balance"))return Ei.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/enum",keyword:"enum",params:{allowedValues:ide.properties.metadata.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=p===o}else var a=!0;if(a){if(c.id!==void 0){const f=o;if(typeof c.id!="string")return Ei.errors=[{instancePath:e+"/metadata/id",schemaPath:"#/properties/metadata/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a){if(c.createdAt!==void 0){const f=o;if(typeof c.createdAt!="string")return Ei.errors=[{instancePath:e+"/metadata/createdAt",schemaPath:"#/properties/metadata/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a){if(c.updatedAt!==void 0){const f=o;if(typeof c.updatedAt!="string")return Ei.errors=[{instancePath:e+"/metadata/updatedAt",schemaPath:"#/properties/metadata/properties/updatedAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0;if(a)if(c.protocol!==void 0){const f=o;if(typeof c.protocol!="string")return Ei.errors=[{instancePath:e+"/metadata/protocol",schemaPath:"#/properties/metadata/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=f===o}else var a=!0}}}}}else return Ei.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=d===o}else var u=!0;if(u){if(t.data!==void 0){let c=t.data;const d=o;if(!(c&&typeof c=="object"&&!Array.isArray(c)))return Ei.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=d===o}else var u=!0;if(u)if(t.signature!==void 0){const c=o;if(typeof t.signature!="string")return Ei.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=c===o}else var u=!0}}}else return Ei.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ei.errors=i,o===0}const sde=Ts;function Ts(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.salt===void 0&&(l="salt"))return Ts.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return Ts.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.salt!==void 0){const c=o;if(typeof t.salt!="string")return Ts.errors=[{instancePath:e+"/salt",schemaPath:"#/properties/salt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a){if(t.claims!==void 0){let c=t.claims;const d=o;if(Array.isArray(c)){var u=!0;const f=c.length;for(let p=0;p<f;p++){const m=o;if(typeof c[p]!="string")return Ts.errors=[{instancePath:e+"/claims/"+p,schemaPath:"#/properties/claims/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===o;if(!u)break}}else return Ts.errors=[{instancePath:e+"/claims",schemaPath:"#/properties/claims/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let c=t.payin;const d=o;if(c&&typeof c=="object"&&!Array.isArray(c)){for(const f in c)if(f!=="paymentDetails")return Ts.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(c.paymentDetails!==void 0){let f=c.paymentDetails;if(!(f&&typeof f=="object"&&!Array.isArray(f)))return Ts.errors=[{instancePath:e+"/payin/paymentDetails",schemaPath:"#/properties/payin/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Ts.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a)if(t.payout!==void 0){let c=t.payout;const d=o;if(c&&typeof c=="object"&&!Array.isArray(c)){for(const f in c)if(f!=="paymentDetails")return Ts.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(c.paymentDetails!==void 0){let f=c.paymentDetails;if(!(f&&typeof f=="object"&&!Array.isArray(f)))return Ts.errors=[{instancePath:e+"/payout/paymentDetails",schemaPath:"#/properties/payout/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Ts.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return Ts.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ts.errors=i,o===0}const ode=Ai;function Ai(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.offeringId===void 0&&(c="offeringId")||t.payin===void 0&&(c="payin")||t.payout===void 0&&(c="payout"))return Ai.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return Ai.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.offeringId!==void 0){const d=o;if(typeof t.offeringId!="string")return Ai.errors=[{instancePath:e+"/offeringId",schemaPath:"#/properties/offeringId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.claimsHash!==void 0){const d=o;if(typeof t.claimsHash!="string")return Ai.errors=[{instancePath:e+"/claimsHash",schemaPath:"#/properties/claimsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let d=t.payin;const h=o;if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.amount===void 0&&(p="amount")||d.kind===void 0&&(p="kind"))return Ai.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.amount!==void 0){let m=d.amount;const E=o;if(typeof m=="string"){if(!Os.test(m))return Ai.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ai.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=E===o}else var u=!0;if(u){if(d.kind!==void 0){const m=o;if(typeof d.kind!="string")return Ai.errors=[{instancePath:e+"/payin/kind",schemaPath:"#/properties/payin/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===o}else var u=!0;if(u)if(d.paymentDetailsHash!==void 0){const m=o;if(typeof d.paymentDetailsHash!="string")return Ai.errors=[{instancePath:e+"/payin/paymentDetailsHash",schemaPath:"#/properties/payin/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===o}else var u=!0}}else return Ai.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0;if(a)if(t.payout!==void 0){let d=t.payout;const h=o;if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.kind===void 0&&(p="kind"))return Ai.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.kind!==void 0){const m=o;if(typeof d.kind!="string")return Ai.errors=[{instancePath:e+"/payout/kind",schemaPath:"#/properties/payout/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=m===o}else var l=!0;if(l)if(d.paymentDetailsHash!==void 0){const m=o;if(typeof d.paymentDetailsHash!="string")return Ai.errors=[{instancePath:e+"/payout/paymentDetailsHash",schemaPath:"#/properties/payout/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=m===o}else var l=!0}else return Ai.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}else return Ai.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ai.errors=i,o===0}const ade=Object.freeze(Object.defineProperty({__proto__:null,balance:Zle,close:Hle,definitions:zle,message:Yle,offering:Wle,order:ede,orderstatus:tde,quote:rde,resource:nde,rfq:ode,rfqPrivate:sde},Symbol.toStringTag,{value:"Module"}));function Mv(t,e){let r=ade[e];if(!r)throw new Error(`no validator found for ${e}`);r(t),r.errors&&ude(r.errors)}function ude(t){const[e]=t;let{instancePath:r,message:n,params:s}=e;throw r||(r="message"),n=s.allowedValues?`${n} - ${s.allowedValues.join(", ")}`:n,new Error(`${r}: ${n}`)}class AE{constructor(e,r,n){Se(this,"metadata");Se(this,"data");Se(this,"_signature");this.metadata=e,this.data=r,this._signature=n}static generateId(e){return kC(e).toString()}async sign(e){this._signature=await Yh.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");const e=await Yh.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header to match metadata.from");return e}digest(){return Yh.digest({metadata:this.metadata,data:this.data})}validate(){Mv(this.toJSON(),"resource"),this.validateData()}validateData(){Mv(this.data,this.kind)}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}get signature(){return this._signature}get id(){return this.metadata.id}get from(){return this.metadata.from}get createdAt(){return this.metadata.createdAt}get updatedAt(){return this.metadata.updatedAt}get protocol(){return this.metadata.protocol}isOffering(){return this.metadata.kind==="offering"}isBalance(){return this.metadata.kind==="balance"}}class qu{constructor(e,r,n){Se(this,"metadata");Se(this,"data");Se(this,"_signature");this.metadata=e,this.data=r,this._signature=n}static generateId(e){return kC(e).toString()}async sign(e){this._signature=await Yh.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),await this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");const e=await Yh.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header to match metadata.from");return e}digest(){return Yh.digest({metadata:this.metadata,data:this.data})}validate(){Mv(this.toJSON(),"message"),this.validateData()}validateData(){Mv(this.data,this.kind)}get signature(){return this._signature}get id(){return this.metadata.id}get exchangeId(){return this.metadata.exchangeId}get from(){return this.metadata.from}get to(){return this.metadata.to}get createdAt(){return this.metadata.createdAt}get externalId(){return this.metadata.externalId}get protocol(){return this.metadata.protocol}isRfq(){return this.metadata.kind==="rfq"}isQuote(){return this.metadata.kind==="quote"}isOrder(){return this.metadata.kind==="order"}isOrderStatus(){return this.metadata.kind==="orderstatus"}isClose(){return this.metadata.kind==="close"}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}}var cde=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,lT=Math.ceil,Oo=Math.floor,Cs="[BigNumber Error] ",UB=Cs+"Number primitive has more than 15 significant digits: ",pa=1e14,Ut=14,dT=9007199254740991,fT=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Hl=1e7,Jn=1e9;function bL(t){var e,r,n,s=_.prototype={constructor:_,toString:null,valueOf:null},i=new _(1),o=20,a=4,u=-7,l=21,c=-1e7,d=1e7,h=!1,f=1,p=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},E="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function _(w,b){var T,P,C,k,K,L,q,se,X=this;if(!(X instanceof _))return new _(w,b);if(b==null){if(w&&w._isBigNumber===!0){X.s=w.s,!w.c||w.e>d?X.c=X.e=null:w.e<c?X.c=[X.e=0]:(X.e=w.e,X.c=w.c.slice());return}if((L=typeof w=="number")&&w*0==0){if(X.s=1/w<0?(w=-w,-1):1,w===~~w){for(k=0,K=w;K>=10;K/=10,k++);k>d?X.c=X.e=null:(X.e=k,X.c=[w]);return}se=String(w)}else{if(!cde.test(se=String(w)))return n(X,se,L);X.s=se.charCodeAt(0)==45?(se=se.slice(1),-1):1}(k=se.indexOf("."))>-1&&(se=se.replace(".","")),(K=se.search(/e/i))>0?(k<0&&(k=K),k+=+se.slice(K+1),se=se.substring(0,K)):k<0&&(k=se.length)}else{if(ln(b,2,E.length,"Base"),b==10&&A)return X=new _(w),x(X,o+X.e+1,a);if(se=String(w),L=typeof w=="number"){if(w*0!=0)return n(X,se,L,b);if(X.s=1/w<0?(se=se.slice(1),-1):1,_.DEBUG&&se.replace(/^0\.0*|\./,"").length>15)throw Error(UB+w)}else X.s=se.charCodeAt(0)===45?(se=se.slice(1),-1):1;for(T=E.slice(0,b),k=K=0,q=se.length;K<q;K++)if(T.indexOf(P=se.charAt(K))<0){if(P=="."){if(K>k){k=q;continue}}else if(!C&&(se==se.toUpperCase()&&(se=se.toLowerCase())||se==se.toLowerCase()&&(se=se.toUpperCase()))){C=!0,K=-1,k=0;continue}return n(X,String(w),L,b)}L=!1,se=r(se,b,10,X.s),(k=se.indexOf("."))>-1?se=se.replace(".",""):k=se.length}for(K=0;se.charCodeAt(K)===48;K++);for(q=se.length;se.charCodeAt(--q)===48;);if(se=se.slice(K,++q)){if(q-=K,L&&_.DEBUG&&q>15&&(w>dT||w!==Oo(w)))throw Error(UB+X.s*w);if((k=k-K-1)>d)X.c=X.e=null;else if(k<c)X.c=[X.e=0];else{if(X.e=k,X.c=[],K=(k+1)%Ut,k<0&&(K+=Ut),K<q){for(K&&X.c.push(+se.slice(0,K)),q-=Ut;K<q;)X.c.push(+se.slice(K,K+=Ut));K=Ut-(se=se.slice(K)).length}else K-=q;for(;K--;se+="0");X.c.push(+se)}}else X.c=[X.e=0]}_.clone=bL,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(w){var b,T;if(w!=null)if(typeof w=="object"){if(w.hasOwnProperty(b="DECIMAL_PLACES")&&(T=w[b],ln(T,0,Jn,b),o=T),w.hasOwnProperty(b="ROUNDING_MODE")&&(T=w[b],ln(T,0,8,b),a=T),w.hasOwnProperty(b="EXPONENTIAL_AT")&&(T=w[b],T&&T.pop?(ln(T[0],-Jn,0,b),ln(T[1],0,Jn,b),u=T[0],l=T[1]):(ln(T,-Jn,Jn,b),u=-(l=T<0?-T:T))),w.hasOwnProperty(b="RANGE"))if(T=w[b],T&&T.pop)ln(T[0],-Jn,-1,b),ln(T[1],1,Jn,b),c=T[0],d=T[1];else if(ln(T,-Jn,Jn,b),T)c=-(d=T<0?-T:T);else throw Error(Cs+b+" cannot be zero: "+T);if(w.hasOwnProperty(b="CRYPTO"))if(T=w[b],T===!!T)if(T)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=T;else throw h=!T,Error(Cs+"crypto unavailable");else h=T;else throw Error(Cs+b+" not true or false: "+T);if(w.hasOwnProperty(b="MODULO_MODE")&&(T=w[b],ln(T,0,9,b),f=T),w.hasOwnProperty(b="POW_PRECISION")&&(T=w[b],ln(T,0,Jn,b),p=T),w.hasOwnProperty(b="FORMAT"))if(T=w[b],typeof T=="object")m=T;else throw Error(Cs+b+" not an object: "+T);if(w.hasOwnProperty(b="ALPHABET"))if(T=w[b],typeof T=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(T))A=T.slice(0,10)=="0123456789",E=T;else throw Error(Cs+b+" invalid: "+T)}else throw Error(Cs+"Object expected: "+w);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[u,l],RANGE:[c,d],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:p,FORMAT:m,ALPHABET:E}},_.isBigNumber=function(w){if(!w||w._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var b,T,P=w.c,C=w.e,k=w.s;e:if({}.toString.call(P)=="[object Array]"){if((k===1||k===-1)&&C>=-Jn&&C<=Jn&&C===Oo(C)){if(P[0]===0){if(C===0&&P.length===1)return!0;break e}if(b=(C+1)%Ut,b<1&&(b+=Ut),String(P[0]).length==b){for(b=0;b<P.length;b++)if(T=P[b],T<0||T>=pa||T!==Oo(T))break e;if(T!==0)return!0}}}else if(P===null&&C===null&&(k===null||k===1||k===-1))return!0;throw Error(Cs+"Invalid BigNumber: "+w)},_.maximum=_.max=function(){return v(arguments,-1)},_.minimum=_.min=function(){return v(arguments,1)},_.random=function(){var w=9007199254740992,b=Math.random()*w&2097151?function(){return Oo(Math.random()*w)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(T){var P,C,k,K,L,q=0,se=[],X=new _(i);if(T==null?T=o:ln(T,0,Jn),K=lT(T/Ut),h)if(crypto.getRandomValues){for(P=crypto.getRandomValues(new Uint32Array(K*=2));q<K;)L=P[q]*131072+(P[q+1]>>>11),L>=9e15?(C=crypto.getRandomValues(new Uint32Array(2)),P[q]=C[0],P[q+1]=C[1]):(se.push(L%1e14),q+=2);q=K/2}else if(crypto.randomBytes){for(P=crypto.randomBytes(K*=7);q<K;)L=(P[q]&31)*281474976710656+P[q+1]*1099511627776+P[q+2]*4294967296+P[q+3]*16777216+(P[q+4]<<16)+(P[q+5]<<8)+P[q+6],L>=9e15?crypto.randomBytes(7).copy(P,q):(se.push(L%1e14),q+=7);q=K/7}else throw h=!1,Error(Cs+"crypto unavailable");if(!h)for(;q<K;)L=b(),L<9e15&&(se[q++]=L%1e14);for(K=se[--q],T%=Ut,K&&T&&(L=fT[Ut-T],se[q]=Oo(K/L)*L);se[q]===0;se.pop(),q--);if(q<0)se=[k=0];else{for(k=-1;se[0]===0;se.splice(0,1),k-=Ut);for(q=1,L=se[0];L>=10;L/=10,q++);q<Ut&&(k-=Ut-q)}return X.e=k,X.c=se,X}}(),_.sum=function(){for(var w=1,b=arguments,T=new _(b[0]);w<b.length;)T=T.plus(b[w++]);return T},r=function(){var w="0123456789";function b(T,P,C,k){for(var K,L=[0],q,se=0,X=T.length;se<X;){for(q=L.length;q--;L[q]*=P);for(L[0]+=k.indexOf(T.charAt(se++)),K=0;K<L.length;K++)L[K]>C-1&&(L[K+1]==null&&(L[K+1]=0),L[K+1]+=L[K]/C|0,L[K]%=C)}return L.reverse()}return function(T,P,C,k,K){var L,q,se,X,re,W,B,te,z=T.indexOf("."),$=o,F=a;for(z>=0&&(X=p,p=0,T=T.replace(".",""),te=new _(P),W=te.pow(T.length-z),p=X,te.c=b(vc(Co(W.c),W.e,"0"),10,C,w),te.e=te.c.length),B=b(T,P,C,K?(L=E,w):(L=w,E)),se=X=B.length;B[--X]==0;B.pop());if(!B[0])return L.charAt(0);if(z<0?--se:(W.c=B,W.e=se,W.s=k,W=e(W,te,$,F,C),B=W.c,re=W.r,se=W.e),q=se+$+1,z=B[q],X=C/2,re=re||q<0||B[q+1]!=null,re=F<4?(z!=null||re)&&(F==0||F==(W.s<0?3:2)):z>X||z==X&&(F==4||re||F==6&&B[q-1]&1||F==(W.s<0?8:7)),q<1||!B[0])T=re?vc(L.charAt(1),-$,L.charAt(0)):L.charAt(0);else{if(B.length=q,re)for(--C;++B[--q]>C;)B[q]=0,q||(++se,B=[1].concat(B));for(X=B.length;!B[--X];);for(z=0,T="";z<=X;T+=L.charAt(B[z++]));T=vc(T,se,L.charAt(0))}return T}}(),e=function(){function w(P,C,k){var K,L,q,se,X=0,re=P.length,W=C%Hl,B=C/Hl|0;for(P=P.slice();re--;)q=P[re]%Hl,se=P[re]/Hl|0,K=B*q+se*W,L=W*q+K%Hl*Hl+X,X=(L/k|0)+(K/Hl|0)+B*se,P[re]=L%k;return X&&(P=[X].concat(P)),P}function b(P,C,k,K){var L,q;if(k!=K)q=k>K?1:-1;else for(L=q=0;L<k;L++)if(P[L]!=C[L]){q=P[L]>C[L]?1:-1;break}return q}function T(P,C,k,K){for(var L=0;k--;)P[k]-=L,L=P[k]<C[k]?1:0,P[k]=L*K+P[k]-C[k];for(;!P[0]&&P.length>1;P.splice(0,1));}return function(P,C,k,K,L){var q,se,X,re,W,B,te,z,$,F,ee,ne,le,me,ve,Pe,Ue,M=P.s==C.s?1:-1,V=P.c,oe=C.c;if(!V||!V[0]||!oe||!oe[0])return new _(!P.s||!C.s||(V?oe&&V[0]==oe[0]:!oe)?NaN:V&&V[0]==0||!oe?M*0:M/0);for(z=new _(M),$=z.c=[],se=P.e-C.e,M=k+se+1,L||(L=pa,se=Ro(P.e/Ut)-Ro(C.e/Ut),M=M/Ut|0),X=0;oe[X]==(V[X]||0);X++);if(oe[X]>(V[X]||0)&&se--,M<0)$.push(1),re=!0;else{for(me=V.length,Pe=oe.length,X=0,M+=2,W=Oo(L/(oe[0]+1)),W>1&&(oe=w(oe,W,L),V=w(V,W,L),Pe=oe.length,me=V.length),le=Pe,F=V.slice(0,Pe),ee=F.length;ee<Pe;F[ee++]=0);Ue=oe.slice(),Ue=[0].concat(Ue),ve=oe[0],oe[1]>=L/2&&ve++;do{if(W=0,q=b(oe,F,Pe,ee),q<0){if(ne=F[0],Pe!=ee&&(ne=ne*L+(F[1]||0)),W=Oo(ne/ve),W>1)for(W>=L&&(W=L-1),B=w(oe,W,L),te=B.length,ee=F.length;b(B,F,te,ee)==1;)W--,T(B,Pe<te?Ue:oe,te,L),te=B.length,q=1;else W==0&&(q=W=1),B=oe.slice(),te=B.length;if(te<ee&&(B=[0].concat(B)),T(F,B,ee,L),ee=F.length,q==-1)for(;b(oe,F,Pe,ee)<1;)W++,T(F,Pe<ee?Ue:oe,ee,L),ee=F.length}else q===0&&(W++,F=[0]);$[X++]=W,F[0]?F[ee++]=V[le]||0:(F=[V[le]],ee=1)}while((le++<me||F[0]!=null)&&M--);re=F[0]!=null,$[0]||$.splice(0,1)}if(L==pa){for(X=1,M=$[0];M>=10;M/=10,X++);x(z,k+(z.e=X+se*Ut-1)+1,K,re)}else z.e=se,z.r=+re;return z}}();function g(w,b,T,P){var C,k,K,L,q;if(T==null?T=a:ln(T,0,8),!w.c)return w.toString();if(C=w.c[0],K=w.e,b==null)q=Co(w.c),q=P==1||P==2&&(K<=u||K>=l)?ab(q,K):vc(q,K,"0");else if(w=x(new _(w),b,T),k=w.e,q=Co(w.c),L=q.length,P==1||P==2&&(b<=k||k<=u)){for(;L<b;q+="0",L++);q=ab(q,k)}else if(b-=K,q=vc(q,k,"0"),k+1>L){if(--b>0)for(q+=".";b--;q+="0");}else if(b+=k-L,b>0)for(k+1==L&&(q+=".");b--;q+="0");return w.s<0&&C?"-"+q:q}function v(w,b){for(var T,P,C=1,k=new _(w[0]);C<w.length;C++)P=new _(w[C]),(!P.s||(T=Qf(k,P))===b||T===0&&k.s===b)&&(k=P);return k}function S(w,b,T){for(var P=1,C=b.length;!b[--C];b.pop());for(C=b[0];C>=10;C/=10,P++);return(T=P+T*Ut-1)>d?w.c=w.e=null:T<c?w.c=[w.e=0]:(w.e=T,w.c=b),w}n=function(){var w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,T=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(k,K,L,q){var se,X=L?K:K.replace(C,"");if(P.test(X))k.s=isNaN(X)?null:X<0?-1:1;else{if(!L&&(X=X.replace(w,function(re,W,B){return se=(B=B.toLowerCase())=="x"?16:B=="b"?2:8,!q||q==se?W:re}),q&&(se=q,X=X.replace(b,"$1").replace(T,"0.$1")),K!=X))return new _(X,se);if(_.DEBUG)throw Error(Cs+"Not a"+(q?" base "+q:"")+" number: "+K);k.s=null}k.c=k.e=null}}();function x(w,b,T,P){var C,k,K,L,q,se,X,re=w.c,W=fT;if(re){e:{for(C=1,L=re[0];L>=10;L/=10,C++);if(k=b-C,k<0)k+=Ut,K=b,q=re[se=0],X=Oo(q/W[C-K-1]%10);else if(se=lT((k+1)/Ut),se>=re.length)if(P){for(;re.length<=se;re.push(0));q=X=0,C=1,k%=Ut,K=k-Ut+1}else break e;else{for(q=L=re[se],C=1;L>=10;L/=10,C++);k%=Ut,K=k-Ut+C,X=K<0?0:Oo(q/W[C-K-1]%10)}if(P=P||b<0||re[se+1]!=null||(K<0?q:q%W[C-K-1]),P=T<4?(X||P)&&(T==0||T==(w.s<0?3:2)):X>5||X==5&&(T==4||P||T==6&&(k>0?K>0?q/W[C-K]:0:re[se-1])%10&1||T==(w.s<0?8:7)),b<1||!re[0])return re.length=0,P?(b-=w.e+1,re[0]=W[(Ut-b%Ut)%Ut],w.e=-b||0):re[0]=w.e=0,w;if(k==0?(re.length=se,L=1,se--):(re.length=se+1,L=W[Ut-k],re[se]=K>0?Oo(q/W[C-K]%W[K])*L:0),P)for(;;)if(se==0){for(k=1,K=re[0];K>=10;K/=10,k++);for(K=re[0]+=L,L=1;K>=10;K/=10,L++);k!=L&&(w.e++,re[0]==pa&&(re[0]=1));break}else{if(re[se]+=L,re[se]!=pa)break;re[se--]=0,L=1}for(k=re.length;re[--k]===0;re.pop());}w.e>d?w.c=w.e=null:w.e<c&&(w.c=[w.e=0])}return w}function D(w){var b,T=w.e;return T===null?w.toString():(b=Co(w.c),b=T<=u||T>=l?ab(b,T):vc(b,T,"0"),w.s<0?"-"+b:b)}return s.absoluteValue=s.abs=function(){var w=new _(this);return w.s<0&&(w.s=1),w},s.comparedTo=function(w,b){return Qf(this,new _(w,b))},s.decimalPlaces=s.dp=function(w,b){var T,P,C,k=this;if(w!=null)return ln(w,0,Jn),b==null?b=a:ln(b,0,8),x(new _(k),w+k.e+1,b);if(!(T=k.c))return null;if(P=((C=T.length-1)-Ro(this.e/Ut))*Ut,C=T[C])for(;C%10==0;C/=10,P--);return P<0&&(P=0),P},s.dividedBy=s.div=function(w,b){return e(this,new _(w,b),o,a)},s.dividedToIntegerBy=s.idiv=function(w,b){return e(this,new _(w,b),0,1)},s.exponentiatedBy=s.pow=function(w,b){var T,P,C,k,K,L,q,se,X,re=this;if(w=new _(w),w.c&&!w.isInteger())throw Error(Cs+"Exponent not an integer: "+D(w));if(b!=null&&(b=new _(b)),L=w.e>14,!re.c||!re.c[0]||re.c[0]==1&&!re.e&&re.c.length==1||!w.c||!w.c[0])return X=new _(Math.pow(+D(re),L?w.s*(2-ob(w)):+D(w))),b?X.mod(b):X;if(q=w.s<0,b){if(b.c?!b.c[0]:!b.s)return new _(NaN);P=!q&&re.isInteger()&&b.isInteger(),P&&(re=re.mod(b))}else{if(w.e>9&&(re.e>0||re.e<-1||(re.e==0?re.c[0]>1||L&&re.c[1]>=24e7:re.c[0]<8e13||L&&re.c[0]<=9999975e7)))return k=re.s<0&&ob(w)?-0:0,re.e>-1&&(k=1/k),new _(q?1/k:k);p&&(k=lT(p/Ut+2))}for(L?(T=new _(.5),q&&(w.s=1),se=ob(w)):(C=Math.abs(+D(w)),se=C%2),X=new _(i);;){if(se){if(X=X.times(re),!X.c)break;k?X.c.length>k&&(X.c.length=k):P&&(X=X.mod(b))}if(C){if(C=Oo(C/2),C===0)break;se=C%2}else if(w=w.times(T),x(w,w.e+1,1),w.e>14)se=ob(w);else{if(C=+D(w),C===0)break;se=C%2}re=re.times(re),k?re.c&&re.c.length>k&&(re.c.length=k):P&&(re=re.mod(b))}return P?X:(q&&(X=i.div(X)),b?X.mod(b):k?x(X,p,a,K):X)},s.integerValue=function(w){var b=new _(this);return w==null?w=a:ln(w,0,8),x(b,b.e+1,w)},s.isEqualTo=s.eq=function(w,b){return Qf(this,new _(w,b))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(w,b){return Qf(this,new _(w,b))>0},s.isGreaterThanOrEqualTo=s.gte=function(w,b){return(b=Qf(this,new _(w,b)))===1||b===0},s.isInteger=function(){return!!this.c&&Ro(this.e/Ut)>this.c.length-2},s.isLessThan=s.lt=function(w,b){return Qf(this,new _(w,b))<0},s.isLessThanOrEqualTo=s.lte=function(w,b){return(b=Qf(this,new _(w,b)))===-1||b===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(w,b){var T,P,C,k,K=this,L=K.s;if(w=new _(w,b),b=w.s,!L||!b)return new _(NaN);if(L!=b)return w.s=-b,K.plus(w);var q=K.e/Ut,se=w.e/Ut,X=K.c,re=w.c;if(!q||!se){if(!X||!re)return X?(w.s=-b,w):new _(re?K:NaN);if(!X[0]||!re[0])return re[0]?(w.s=-b,w):new _(X[0]?K:a==3?-0:0)}if(q=Ro(q),se=Ro(se),X=X.slice(),L=q-se){for((k=L<0)?(L=-L,C=X):(se=q,C=re),C.reverse(),b=L;b--;C.push(0));C.reverse()}else for(P=(k=(L=X.length)<(b=re.length))?L:b,L=b=0;b<P;b++)if(X[b]!=re[b]){k=X[b]<re[b];break}if(k&&(C=X,X=re,re=C,w.s=-w.s),b=(P=re.length)-(T=X.length),b>0)for(;b--;X[T++]=0);for(b=pa-1;P>L;){if(X[--P]<re[P]){for(T=P;T&&!X[--T];X[T]=b);--X[T],X[P]+=pa}X[P]-=re[P]}for(;X[0]==0;X.splice(0,1),--se);return X[0]?S(w,X,se):(w.s=a==3?-1:1,w.c=[w.e=0],w)},s.modulo=s.mod=function(w,b){var T,P,C=this;return w=new _(w,b),!C.c||!w.s||w.c&&!w.c[0]?new _(NaN):!w.c||C.c&&!C.c[0]?new _(C):(f==9?(P=w.s,w.s=1,T=e(C,w,0,3),w.s=P,T.s*=P):T=e(C,w,0,f),w=C.minus(T.times(w)),!w.c[0]&&f==1&&(w.s=C.s),w)},s.multipliedBy=s.times=function(w,b){var T,P,C,k,K,L,q,se,X,re,W,B,te,z,$,F=this,ee=F.c,ne=(w=new _(w,b)).c;if(!ee||!ne||!ee[0]||!ne[0])return!F.s||!w.s||ee&&!ee[0]&&!ne||ne&&!ne[0]&&!ee?w.c=w.e=w.s=null:(w.s*=F.s,!ee||!ne?w.c=w.e=null:(w.c=[0],w.e=0)),w;for(P=Ro(F.e/Ut)+Ro(w.e/Ut),w.s*=F.s,q=ee.length,re=ne.length,q<re&&(te=ee,ee=ne,ne=te,C=q,q=re,re=C),C=q+re,te=[];C--;te.push(0));for(z=pa,$=Hl,C=re;--C>=0;){for(T=0,W=ne[C]%$,B=ne[C]/$|0,K=q,k=C+K;k>C;)se=ee[--K]%$,X=ee[K]/$|0,L=B*se+X*W,se=W*se+L%$*$+te[k]+T,T=(se/z|0)+(L/$|0)+B*X,te[k--]=se%z;te[k]=T}return T?++P:te.splice(0,1),S(w,te,P)},s.negated=function(){var w=new _(this);return w.s=-w.s||null,w},s.plus=function(w,b){var T,P=this,C=P.s;if(w=new _(w,b),b=w.s,!C||!b)return new _(NaN);if(C!=b)return w.s=-b,P.minus(w);var k=P.e/Ut,K=w.e/Ut,L=P.c,q=w.c;if(!k||!K){if(!L||!q)return new _(C/0);if(!L[0]||!q[0])return q[0]?w:new _(L[0]?P:C*0)}if(k=Ro(k),K=Ro(K),L=L.slice(),C=k-K){for(C>0?(K=k,T=q):(C=-C,T=L),T.reverse();C--;T.push(0));T.reverse()}for(C=L.length,b=q.length,C-b<0&&(T=q,q=L,L=T,b=C),C=0;b;)C=(L[--b]=L[b]+q[b]+C)/pa|0,L[b]=pa===L[b]?0:L[b]%pa;return C&&(L=[C].concat(L),++K),S(w,L,K)},s.precision=s.sd=function(w,b){var T,P,C,k=this;if(w!=null&&w!==!!w)return ln(w,1,Jn),b==null?b=a:ln(b,0,8),x(new _(k),w,b);if(!(T=k.c))return null;if(C=T.length-1,P=C*Ut+1,C=T[C]){for(;C%10==0;C/=10,P--);for(C=T[0];C>=10;C/=10,P++);}return w&&k.e+1>P&&(P=k.e+1),P},s.shiftedBy=function(w){return ln(w,-dT,dT),this.times("1e"+w)},s.squareRoot=s.sqrt=function(){var w,b,T,P,C,k=this,K=k.c,L=k.s,q=k.e,se=o+4,X=new _("0.5");if(L!==1||!K||!K[0])return new _(!L||L<0&&(!K||K[0])?NaN:K?k:1/0);if(L=Math.sqrt(+D(k)),L==0||L==1/0?(b=Co(K),(b.length+q)%2==0&&(b+="0"),L=Math.sqrt(+b),q=Ro((q+1)/2)-(q<0||q%2),L==1/0?b="5e"+q:(b=L.toExponential(),b=b.slice(0,b.indexOf("e")+1)+q),T=new _(b)):T=new _(L+""),T.c[0]){for(q=T.e,L=q+se,L<3&&(L=0);;)if(C=T,T=X.times(C.plus(e(k,C,se,1))),Co(C.c).slice(0,L)===(b=Co(T.c)).slice(0,L))if(T.e<q&&--L,b=b.slice(L-3,L+1),b=="9999"||!P&&b=="4999"){if(!P&&(x(C,C.e+o+2,0),C.times(C).eq(k))){T=C;break}se+=4,L+=4,P=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(x(T,T.e+o+2,1),w=!T.times(T).eq(k));break}}return x(T,T.e+o+1,a,w)},s.toExponential=function(w,b){return w!=null&&(ln(w,0,Jn),w++),g(this,w,b,1)},s.toFixed=function(w,b){return w!=null&&(ln(w,0,Jn),w=w+this.e+1),g(this,w,b)},s.toFormat=function(w,b,T){var P,C=this;if(T==null)w!=null&&b&&typeof b=="object"?(T=b,b=null):w&&typeof w=="object"?(T=w,w=b=null):T=m;else if(typeof T!="object")throw Error(Cs+"Argument not an object: "+T);if(P=C.toFixed(w,b),C.c){var k,K=P.split("."),L=+T.groupSize,q=+T.secondaryGroupSize,se=T.groupSeparator||"",X=K[0],re=K[1],W=C.s<0,B=W?X.slice(1):X,te=B.length;if(q&&(k=L,L=q,q=k,te-=k),L>0&&te>0){for(k=te%L||L,X=B.substr(0,k);k<te;k+=L)X+=se+B.substr(k,L);q>0&&(X+=se+B.slice(k)),W&&(X="-"+X)}P=re?X+(T.decimalSeparator||"")+((q=+T.fractionGroupSize)?re.replace(new RegExp("\\d{"+q+"}\\B","g"),"$&"+(T.fractionGroupSeparator||"")):re):X}return(T.prefix||"")+P+(T.suffix||"")},s.toFraction=function(w){var b,T,P,C,k,K,L,q,se,X,re,W,B=this,te=B.c;if(w!=null&&(L=new _(w),!L.isInteger()&&(L.c||L.s!==1)||L.lt(i)))throw Error(Cs+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+D(L));if(!te)return new _(B);for(b=new _(i),se=T=new _(i),P=q=new _(i),W=Co(te),k=b.e=W.length-B.e-1,b.c[0]=fT[(K=k%Ut)<0?Ut+K:K],w=!w||L.comparedTo(b)>0?k>0?b:se:L,K=d,d=1/0,L=new _(W),q.c[0]=0;X=e(L,b,0,1),C=T.plus(X.times(P)),C.comparedTo(w)!=1;)T=P,P=C,se=q.plus(X.times(C=se)),q=C,b=L.minus(X.times(C=b)),L=C;return C=e(w.minus(T),P,0,1),q=q.plus(C.times(se)),T=T.plus(C.times(P)),q.s=se.s=B.s,k=k*2,re=e(se,P,k,a).minus(B).abs().comparedTo(e(q,T,k,a).minus(B).abs())<1?[se,P]:[q,T],d=K,re},s.toNumber=function(){return+D(this)},s.toPrecision=function(w,b){return w!=null&&ln(w,1,Jn),g(this,w,b,2)},s.toString=function(w){var b,T=this,P=T.s,C=T.e;return C===null?P?(b="Infinity",P<0&&(b="-"+b)):b="NaN":(w==null?b=C<=u||C>=l?ab(Co(T.c),C):vc(Co(T.c),C,"0"):w===10&&A?(T=x(new _(T),o+C+1,a),b=vc(Co(T.c),T.e,"0")):(ln(w,2,E.length,"Base"),b=r(vc(Co(T.c),C,"0"),10,w,P,!0)),P<0&&T.c[0]&&(b="-"+b)),b},s.valueOf=s.toJSON=function(){return D(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,t!=null&&_.set(t),_}function Ro(t){var e=t|0;return t>0||t===e?e:e-1}function Co(t){for(var e,r,n=1,s=t.length,i=t[0]+"";n<s;){for(e=t[n++]+"",r=Ut-e.length;r--;e="0"+e);i+=e}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function Qf(t,e){var r,n,s=t.c,i=e.c,o=t.s,a=e.s,u=t.e,l=e.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==l,!s||!i)return n?0:!s^r?1:-1;if(!n)return u>l^r?1:-1;for(a=(u=s.length)<(l=i.length)?u:l,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return u==l?0:u>l^r?1:-1}function ln(t,e,r,n){if(t<e||t>r||t!==Oo(t))throw Error(Cs+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function ob(t){var e=t.c.length-1;return Ro(t.e/Ut)==e&&t.c[e]%2!=0}function ab(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function vc(t,e,r){var n,s;if(e<0){for(s=r+".";++e;s+=r);t=s+t}else if(n=t.length,++e>n){for(s=r,e-=n;--e;s+=r);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var ub=bL();function lde(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function dde(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var fde=dde,hde=fde;let pde=class{constructor(e,r,n){Se(this,"name");Se(this,"prefix");Se(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},mde=class{constructor(e,r,n){Se(this,"name");Se(this,"prefix");Se(this,"baseDecode");Se(this,"prefixCodePoint");if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return EL(this,e)}},yde=class{constructor(e){Se(this,"decoders");this.decoders=e}or(e){return EL(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function EL(t,e){return new yde({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let gde=class{constructor(e,r,n,s){Se(this,"name");Se(this,"prefix");Se(this,"baseEncode");Se(this,"baseDecode");Se(this,"encoder");Se(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new pde(e,r,n),this.decoder=new mde(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function AL({name:t,prefix:e,encode:r,decode:n}){return new gde(t,e,r,n)}function SL({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=hde(r,t);return AL({prefix:e,name:t,encode:n,decode:i=>lde(s(i))})}function vde(t,e,r,n){const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function wde(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function yo({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return AL({prefix:e,name:t,encode(s){return wde(s,n,r)},decode(s){return vde(s,n,r,t)}})}yo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});yo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});yo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});yo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});yo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});yo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});yo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});yo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const LB=yo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cb=SL({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});SL({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});yo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});yo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const wc=yo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});yo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function _de(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function bde(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function KB(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Fg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},VB=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const lb=new TextEncoder,eh=new TextDecoder;let zl=class Ds{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Ds(e,"ArrayBuffer")}static asyncIterable(e){if(!bde(e))throw new TypeError("Input must be of type AsyncIterable.");return new Ds(e,"AsyncIterable")}static base32Z(e){return new Ds(e,"Base32Z")}static base58Btc(e){return new Ds(e,"Base58Btc")}static base64Url(e){return new Ds(e,"Base64Url")}static bufferSource(e){return new Ds(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ds(e,"Hex")}static multibase(e){return new Ds(e,"Multibase")}static object(e){return new Ds(e,"Object")}static string(e){return new Ds(e,"String")}static uint8Array(e){return new Ds(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return cb.baseDecode(this.data).buffer;case"Base64Url":return wc.baseDecode(this.data).buffer;case"BufferSource":{if(KB(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return _de(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Fg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return LB.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return cb.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return cb.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return wc.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return wc.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=lb.encode(e);return wc.baseEncode(r)}case"String":{const e=lb.encode(this.data);return wc.baseEncode(e)}case"Uint8Array":return wc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return Fg(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=VB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ds.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ds.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=wc.baseDecode(this.data),r=eh.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=eh.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Fg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return eh.decode(this.data);case"Base64Url":{const e=wc.baseDecode(this.data);return eh.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return eh.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return Fg(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=VB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=eh.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=eh.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return LB.baseDecode(this.data);case"Base58Btc":return cb.baseDecode(this.data);case"Base64Url":return wc.baseDecode(this.data);case"BufferSource":{const e=KB(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return lb.encode(e)}case"String":return lb.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Fg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Ede=TL,qB=128,Ade=127,Sde=~Ade,Tde=Math.pow(2,31);function TL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Tde;)e[r++]=t&255|qB,t/=128;for(;t&Sde;)e[r++]=t&255|qB,t>>>=7;return e[r]=t|0,TL.bytes=r-n+1,e}var Dde=Ux,xde=128,HB=127;function Ux(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Ux.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&HB)<<s:(o&HB)*Math.pow(2,s),s+=7}while(o>=xde);return Ux.bytes=i-n,r}var Pde=Math.pow(2,7),Cde=Math.pow(2,14),Ide=Math.pow(2,21),kde=Math.pow(2,28),$de=Math.pow(2,35),Ode=Math.pow(2,42),Rde=Math.pow(2,49),Nde=Math.pow(2,56),Bde=Math.pow(2,63),Fde=function(t){return t<Pde?1:t<Cde?2:t<Ide?3:t<kde?4:t<$de?5:t<Ode?6:t<Rde?7:t<Nde?8:t<Bde?9:10},Mde={encode:Ede,decode:Dde,encodingLength:Fde},SE=Mde;function zB(t,e=0){return[SE.decode(t,e),SE.decode.bytes]}function jde(t,e,r=0){return SE.encode(t,e,r),e}function Ude(t){return SE.encodingLength(t)}let Df=class md{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=md.codeToName.has(n)?n:md.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=Ude(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),jde(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=zB(r);return n}static getCodeFromName(e){const{name:r}=e,n=md.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=md.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){md.codeToName.set(e.code,e.name),md.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=zB(r),i=md.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Df.codeToName=new Map;Df.nameToCode=new Map;Df.registerCodec({code:237,name:"ed25519-pub"});Df.registerCodec({code:4864,name:"ed25519-priv"});Df.registerCodec({code:236,name:"x25519-pub"});Df.registerCodec({code:4866,name:"x25519-priv"});Df.registerCodec({code:231,name:"secp256k1-pub"});Df.registerCodec({code:4865,name:"secp256k1-priv"});function Lde(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Kde=Lde,Vde=Kde;const qde=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Hde=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},zde=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return DL(this,e)}},Wde=class{constructor(e){this.decoders=e}or(e){return DL(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const DL=(t,e)=>new Wde({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Gde=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Hde(e,r,n),this.decoder=new zde(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const xL=({name:t,prefix:e,encode:r,decode:n})=>new Gde(t,e,r,n),PL=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Vde(r,e);return xL({prefix:t,name:e,encode:n,decode:i=>qde(s(i))})},Jde=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Xde=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},go=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xL({prefix:e,name:t,encode(s){return Xde(s,n,r)},decode(s){return Jde(s,n,r,t)}});go({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});go({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});go({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});go({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});go({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});go({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});go({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});go({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const WB=go({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),db=PL({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});PL({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});go({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});go({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const _c=go({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});go({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Zde(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function Yde(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function GB(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Mg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},JB=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const fb=new TextEncoder,th=new TextDecoder;let gr=class xs{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new xs(e,"ArrayBuffer")}static asyncIterable(e){if(!Yde(e))throw new TypeError("Input must be of type AsyncIterable.");return new xs(e,"AsyncIterable")}static base32Z(e){return new xs(e,"Base32Z")}static base58Btc(e){return new xs(e,"Base58Btc")}static base64Url(e){return new xs(e,"Base64Url")}static bufferSource(e){return new xs(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new xs(e,"Hex")}static multibase(e){return new xs(e,"Multibase")}static object(e){return new xs(e,"Object")}static string(e){return new xs(e,"String")}static uint8Array(e){return new xs(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return db.baseDecode(this.data).buffer;case"Base64Url":return _c.baseDecode(this.data).buffer;case"BufferSource":{if(GB(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Zde(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Mg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return WB.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return db.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return db.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return _c.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return _c.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=fb.encode(e);return _c.baseEncode(r)}case"String":{const e=fb.encode(this.data);return _c.baseEncode(e)}case"Uint8Array":return _c.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return Mg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=JB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return xs.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return xs.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=_c.baseDecode(this.data),r=th.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=th.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Mg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return th.decode(this.data);case"Base64Url":{const e=_c.baseDecode(this.data);return th.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return th.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return Mg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=JB(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=th.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=th.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return WB.baseDecode(this.data);case"Base58Btc":return db.baseDecode(this.data);case"Base64Url":return _c.baseDecode(this.data);case"BufferSource":{const e=GB(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return fb.encode(e)}case"String":return fb.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Mg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Qde=CL,XB=128,efe=127,tfe=~efe,rfe=Math.pow(2,31);function CL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=rfe;)e[r++]=t&255|XB,t/=128;for(;t&tfe;)e[r++]=t&255|XB,t>>>=7;return e[r]=t|0,CL.bytes=r-n+1,e}var nfe=Lx,ife=128,ZB=127;function Lx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Lx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&ZB)<<s:(o&ZB)*Math.pow(2,s),s+=7}while(o>=ife);return Lx.bytes=i-n,r}var sfe=Math.pow(2,7),ofe=Math.pow(2,14),afe=Math.pow(2,21),ufe=Math.pow(2,28),cfe=Math.pow(2,35),lfe=Math.pow(2,42),dfe=Math.pow(2,49),ffe=Math.pow(2,56),hfe=Math.pow(2,63),pfe=function(t){return t<sfe?1:t<ofe?2:t<afe?3:t<ufe?4:t<cfe?5:t<lfe?6:t<dfe?7:t<ffe?8:t<hfe?9:10},mfe={encode:Qde,decode:nfe,encodingLength:pfe},TE=mfe;const YB=(t,e=0)=>[TE.decode(t,e),TE.decode.bytes],yfe=(t,e,r=0)=>(TE.encode(t,e,r),e),gfe=t=>TE.encodingLength(t);let xf=class yd{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=yd.codeToName.has(n)?n:yd.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=gfe(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),yfe(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=YB(r);return n}static getCodeFromName(e){const{name:r}=e,n=yd.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=yd.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){yd.codeToName.set(e.code,e.name),yd.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=YB(r),i=yd.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};xf.codeToName=new Map;xf.nameToCode=new Map;xf.registerCodec({code:237,name:"ed25519-pub"});xf.registerCodec({code:4864,name:"ed25519-priv"});xf.registerCodec({code:236,name:"x25519-pub"});xf.registerCodec({code:4866,name:"x25519-priv"});xf.registerCodec({code:231,name:"secp256k1-pub"});xf.registerCodec({code:4865,name:"secp256k1-priv"});function IL(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&IL(t[e])})}var rh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let vfe=class{constructor(){this.store=new Map}clear(){return rh(this,void 0,void 0,function*(){this.store.clear()})}close(){return rh(this,void 0,void 0,function*(){})}delete(e){return rh(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return rh(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return rh(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return rh(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return rh(this,void 0,void 0,function*(){this.store.set(e,r)})}};function wfe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function kL(t,...e){if(!wfe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function QB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _fe(t,e){kL(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const bfe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Xa=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Efe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $L(t){return typeof t=="string"&&(t=Efe(t)),kL(t),t}let Afe=class{clone(){return this._cloneInto()}};function Sfe(t){const e=n=>t().update($L(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Tfe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}const Dfe=(t,e,r)=>t&e^~t&r,xfe=(t,e,r)=>t&e^t&r^e&r;let Pfe=class extends Afe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=hT(this.buffer)}update(e){QB(this);const{view:r,buffer:n,blockLen:s}=this;e=$L(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=hT(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){QB(this),_fe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Tfe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=hT(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Cfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gl=new Uint32Array(64);let Ife=class extends Pfe{constructor(){super(64,32,8,!1),this.A=Wl[0]|0,this.B=Wl[1]|0,this.C=Wl[2]|0,this.D=Wl[3]|0,this.E=Wl[4]|0,this.F=Wl[5]|0,this.G=Wl[6]|0,this.H=Wl[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Gl[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Gl[d-15],f=Gl[d-2],p=Xa(h,7)^Xa(h,18)^h>>>3,m=Xa(f,17)^Xa(f,19)^f>>>10;Gl[d]=m+Gl[d-7]+p+Gl[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=Xa(a,6)^Xa(a,11)^Xa(a,25),f=c+h+Dfe(a,u,l)+Cfe[d]+Gl[d]|0,m=(Xa(n,2)^Xa(n,13)^Xa(n,22))+xfe(n,s,i)|0;c=l,l=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,i,o,a,u,l,c)}roundClean(){Gl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const jv=Sfe(()=>new Ife);var kfe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let OL=class{static digest(e){return kfe(this,arguments,void 0,function*({data:r}){return jv(r)})}},AI=class{};var $fe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let Ofe=class extends AI{digest(e){return $fe(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield OL.digest({data:n})}})}};function Rfe(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var Nfe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const eF="urn:jwk:";function Kn(t){return Nfe(this,arguments,void 0,function*({jwk:e}){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);IL(n);const s=Rfe(n),i=gr.string(s).toUint8Array(),o=yield OL.digest({data:i});return gr.uint8Array(o).toBase64Url()})}function Qh(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function SI(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function X0(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function RL(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function Bfe(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var yi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Ffe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let jg=class su{static adjustSignatureToLowS(e){return yi(this,arguments,void 0,function*({signature:r}){const n=et.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return yi(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield su.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:gr.uint8Array(r).toBase64Url(),x:gr.uint8Array(n.x).toBase64Url(),y:gr.uint8Array(n.y).toBase64Url()};return s.kid=yield Kn({jwk:s}),s})}static bytesToPublicKey(e){return yi(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield su.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:gr.uint8Array(n.x).toBase64Url(),y:gr.uint8Array(n.y).toBase64Url()};return s.kid=yield Kn({jwk:s}),s})}static compressPublicKey(e){return yi(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return yi(this,arguments,void 0,function*({key:r}){const n=yield su.privateKeyToBytes({privateKey:r}),s=yield su.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:gr.uint8Array(s.x).toBase64Url(),y:gr.uint8Array(s.y).toBase64Url()};return i.kid=yield Kn({jwk:i}),i})}static convertDerToCompactSignature(e){return yi(this,arguments,void 0,function*({derSignature:r}){return et.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return yi(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return yi(this,void 0,void 0,function*(){const e=et.utils.randomPrivateKey(),r=yield su.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Kn({jwk:r}),r})}static getPublicKey(e){return yi(this,arguments,void 0,function*({key:r}){var n;if(!(Qh(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=Ffe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Kn({jwk:s})),s})}static privateKeyToBytes(e){return yi(this,arguments,void 0,function*({privateKey:r}){if(!Qh(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return gr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return yi(this,arguments,void 0,function*({publicKey:r}){if(!(SI(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=gr.base64Url(r.x).toUint8Array(),i=gr.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return yi(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield su.privateKeyToBytes({privateKey:r}),i=yield su.publicKeyToBytes({publicKey:n});return et.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return yi(this,arguments,void 0,function*({data:r,key:n}){const s=yield su.privateKeyToBytes({privateKey:n}),i=jv(r);return et.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return yi(this,arguments,void 0,function*({privateKeyBytes:r}){return et.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return yi(this,arguments,void 0,function*({publicKeyBytes:r}){try{et.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return yi(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield su.publicKeyToBytes({publicKey:r}),o=jv(s);return et.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return yi(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=et.getPublicKey(r));const n=et.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}};var gi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Mfe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Ug=class ou{static adjustSignatureToLowS(e){return gi(this,arguments,void 0,function*({signature:r}){const n=tt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return gi(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield ou.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:gr.uint8Array(r).toBase64Url(),x:gr.uint8Array(n.x).toBase64Url(),y:gr.uint8Array(n.y).toBase64Url()};return s.kid=yield Kn({jwk:s}),s})}static bytesToPublicKey(e){return gi(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield ou.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:gr.uint8Array(n.x).toBase64Url(),y:gr.uint8Array(n.y).toBase64Url()};return s.kid=yield Kn({jwk:s}),s})}static compressPublicKey(e){return gi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return gi(this,arguments,void 0,function*({key:r}){const n=yield ou.privateKeyToBytes({privateKey:r}),s=yield ou.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:gr.uint8Array(s.x).toBase64Url(),y:gr.uint8Array(s.y).toBase64Url()};return i.kid=yield Kn({jwk:i}),i})}static convertDerToCompactSignature(e){return gi(this,arguments,void 0,function*({derSignature:r}){return tt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return gi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return gi(this,void 0,void 0,function*(){const e=tt.utils.randomPrivateKey(),r=yield ou.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Kn({jwk:r}),r})}static getPublicKey(e){return gi(this,arguments,void 0,function*({key:r}){var n;if(!(Qh(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=Mfe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Kn({jwk:s})),s})}static privateKeyToBytes(e){return gi(this,arguments,void 0,function*({privateKey:r}){if(!Qh(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return gr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return gi(this,arguments,void 0,function*({publicKey:r}){if(!(SI(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=gr.base64Url(r.x).toUint8Array(),i=gr.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return gi(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield ou.privateKeyToBytes({privateKey:r}),i=yield ou.publicKeyToBytes({publicKey:n});return tt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return gi(this,arguments,void 0,function*({data:r,key:n}){const s=yield ou.privateKeyToBytes({privateKey:n}),i=jv(r);return tt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return gi(this,arguments,void 0,function*({privateKeyBytes:r}){return tt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return gi(this,arguments,void 0,function*({publicKeyBytes:r}){try{tt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return gi(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield ou.publicKeyToBytes({publicKey:r}),o=jv(s);return tt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return gi(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=tt.getPublicKey(r));const n=tt.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}};var Lg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let tF=class extends AI{computePublicKey(e){return Lg(this,arguments,void 0,function*({key:r}){if(!Qh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield jg.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Ug.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Lg(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield jg.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield Ug.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return Lg(this,arguments,void 0,function*({key:r}){if(!Qh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield jg.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield Ug.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Lg(this,arguments,void 0,function*({key:r,data:n}){if(!Qh(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield jg.sign({key:r,data:n});case"P-256":return yield Ug.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Lg(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!SI(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield jg.verify({key:r,signature:n,data:s});case"P-256":return yield Ug.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var Io=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},jfe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Kg=class gd{static bytesToPrivateKey(e){return Io(this,arguments,void 0,function*({privateKeyBytes:r}){const n=wr.getPublicKey(r),s={crv:"Ed25519",d:gr.uint8Array(r).toBase64Url(),kty:"OKP",x:gr.uint8Array(n).toBase64Url()};return s.kid=yield Kn({jwk:s}),s})}static bytesToPublicKey(e){return Io(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:gr.uint8Array(r).toBase64Url()};return n.kid=yield Kn({jwk:n}),n})}static computePublicKey(e){return Io(this,arguments,void 0,function*({key:r}){const n=yield gd.privateKeyToBytes({privateKey:r}),s=wr.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:gr.uint8Array(s).toBase64Url()};return i.kid=yield Kn({jwk:i}),i})}static convertPrivateKeyToX25519(e){return Io(this,arguments,void 0,function*({privateKey:r}){const n=yield gd.privateKeyToBytes({privateKey:r}),s=xw(n),i=Oi.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:gr.uint8Array(s).toBase64Url(),x:gr.uint8Array(i).toBase64Url()};return o.kid=yield Kn({jwk:o}),o})}static convertPublicKeyToX25519(e){return Io(this,arguments,void 0,function*({publicKey:r}){const n=yield gd.publicKeyToBytes({publicKey:r});if(!(yield gd.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=Dw(n),o={kty:"OKP",crv:"X25519",x:gr.uint8Array(i).toBase64Url()};return o.kid=yield Kn({jwk:o}),o})}static generateKey(){return Io(this,void 0,void 0,function*(){const e=wr.utils.randomPrivateKey(),r=yield gd.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Kn({jwk:r}),r})}static getPublicKey(e){return Io(this,arguments,void 0,function*({key:r}){var n;if(!(X0(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=jfe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Kn({jwk:s})),s})}static privateKeyToBytes(e){return Io(this,arguments,void 0,function*({privateKey:r}){if(!X0(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return gr.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Io(this,arguments,void 0,function*({publicKey:r}){if(!RL(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return gr.base64Url(r.x).toUint8Array()})}static sign(e){return Io(this,arguments,void 0,function*({key:r,data:n}){const s=yield gd.privateKeyToBytes({privateKey:r});return wr.sign(n,s)})}static validatePublicKey(e){return Io(this,arguments,void 0,function*({publicKeyBytes:r}){try{wr.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Io(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield gd.publicKeyToBytes({publicKey:r});return wr.verify(n,s,i)})}};var Vg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let Ufe=class extends AI{computePublicKey(e){return Vg(this,arguments,void 0,function*({key:r}){if(!X0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Kg.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Vg(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield Kg.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return Vg(this,arguments,void 0,function*({key:r}){if(!X0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield Kg.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Vg(this,arguments,void 0,function*({key:r,data:n}){if(!X0(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Kg.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Vg(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!RL(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Kg.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var bc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const pT={Ed25519:{implementation:Ufe,names:["Ed25519"]},secp256k1:{implementation:tF,names:["ES256K","secp256k1"]},secp256r1:{implementation:tF,names:["ES256","secp256r1"]},"SHA-256":{implementation:Ofe,names:["SHA-256"]}};let Lfe=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e==null?void 0:e.keyStore)!==null&&r!==void 0?r:new vfe}digest(e){return bc(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return bc(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return bc(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${eF}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return bc(this,arguments,void 0,function*({key:r}){const n=yield Kn({jwk:r});return`${eF}${n}`})}getPublicKey(e){return bc(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return bc(this,arguments,void 0,function*({key:r}){var n;if(!Bfe(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield Kn({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return bc(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return bc(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;const n=(r=pT[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const s in pT){const i=pT[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return bc(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};function Kfe(){return bfe.randomUUID()}var Uv;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(Uv||(Uv={}));const Ni={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};let br=class NL{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;const r=NL.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){const l={},c=o.slice(1).split("&");for(const d of c){const[h,f]=d.split("=");l[h]=f}u.params=l}return u}};br.METHOD_PATTERN="([a-z0-9]+)";br.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";br.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${br.PCT_ENCODED_PATTERN})`;br.METHOD_ID_PATTERN=`((?:${br.ID_CHAR_PATTERN}*:)*(${br.ID_CHAR_PATTERN}+))`;br.PATH_PATTERN="(/[^#?]*)?";br.QUERY_PATTERN="([?][^#]*)?";br.FRAGMENT_PATTERN="(#.*)?";br.DID_URI_PATTERN=new RegExp(`^did:(?<method>${br.METHOD_PATTERN}):(?<id>${br.METHOD_ID_PATTERN})(?<path>${br.PATH_PATTERN})(?<query>${br.QUERY_PATTERN})(?<fragment>${br.FRAGMENT_PATTERN})$`);let pt=class BL extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BL)}};var ot;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(ot||(ot={}));function Vfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var qfe=Vfe,Hfe=qfe;const zfe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Wfe=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Gfe=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FL(this,e)}},Jfe=class{constructor(e){this.decoders=e}or(e){return FL(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const FL=(t,e)=>new Jfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Xfe=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Wfe(e,r,n),this.decoder=new Gfe(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ML=({name:t,prefix:e,encode:r,decode:n})=>new Xfe(t,e,r,n),jL=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Hfe(r,e);return ML({prefix:t,name:e,encode:n,decode:i=>zfe(s(i))})},Zfe=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Yfe=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},vo=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ML({prefix:e,name:t,encode(s){return Yfe(s,n,r)},decode(s){return Zfe(s,n,r,t)}});vo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});vo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});vo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});vo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});vo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});vo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});vo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});vo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const rF=vo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),hb=jL({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});jL({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});vo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});vo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Ec=vo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});vo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Qfe(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function ehe(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Kx(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var qg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},nF=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const pb=new TextEncoder,nh=new TextDecoder;let _t=class Ps{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Ps(e,"ArrayBuffer")}static asyncIterable(e){if(!ehe(e))throw new TypeError("Input must be of type AsyncIterable.");return new Ps(e,"AsyncIterable")}static base32Z(e){return new Ps(e,"Base32Z")}static base58Btc(e){return new Ps(e,"Base58Btc")}static base64Url(e){return new Ps(e,"Base64Url")}static bufferSource(e){return new Ps(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Ps(e,"Hex")}static multibase(e){return new Ps(e,"Multibase")}static object(e){return new Ps(e,"Object")}static string(e){return new Ps(e,"String")}static uint8Array(e){return new Ps(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return hb.baseDecode(this.data).buffer;case"Base64Url":return Ec.baseDecode(this.data).buffer;case"BufferSource":{if(Kx(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Qfe(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return qg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return rF.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return hb.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return hb.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return Ec.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return Ec.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=pb.encode(e);return Ec.baseEncode(r)}case"String":{const e=pb.encode(this.data);return Ec.baseEncode(e)}case"Uint8Array":return Ec.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return qg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=nF(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Ps.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Ps.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=Ec.baseDecode(this.data),r=nh.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=nh.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return qg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return nh.decode(this.data);case"Base64Url":{const e=Ec.baseDecode(this.data);return nh.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return nh.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return qg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=nF(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=nh.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=nh.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return rF.baseDecode(this.data);case"Base58Btc":return hb.baseDecode(this.data);case"Base64Url":return Ec.baseDecode(this.data);case"BufferSource":{const e=Kx(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return pb.encode(e)}case"String":return pb.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return qg(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var the=UL,iF=128,rhe=127,nhe=~rhe,ihe=Math.pow(2,31);function UL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ihe;)e[r++]=t&255|iF,t/=128;for(;t&nhe;)e[r++]=t&255|iF,t>>>=7;return e[r]=t|0,UL.bytes=r-n+1,e}var she=Vx,ohe=128,sF=127;function Vx(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Vx.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&sF)<<s:(o&sF)*Math.pow(2,s),s+=7}while(o>=ohe);return Vx.bytes=i-n,r}var ahe=Math.pow(2,7),uhe=Math.pow(2,14),che=Math.pow(2,21),lhe=Math.pow(2,28),dhe=Math.pow(2,35),fhe=Math.pow(2,42),hhe=Math.pow(2,49),phe=Math.pow(2,56),mhe=Math.pow(2,63),yhe=function(t){return t<ahe?1:t<uhe?2:t<che?3:t<lhe?4:t<dhe?5:t<fhe?6:t<hhe?7:t<phe?8:t<mhe?9:10},ghe={encode:the,decode:she,encodingLength:yhe},DE=ghe;const oF=(t,e=0)=>[DE.decode(t,e),DE.decode.bytes],vhe=(t,e,r=0)=>(DE.encode(t,e,r),e),whe=t=>DE.encodingLength(t);let ia=class vd{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=vd.codeToName.has(n)?n:vd.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=whe(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),vhe(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=oF(r);return n}static getCodeFromName(e){const{name:r}=e,n=vd.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=vd.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){vd.codeToName.set(e.code,e.name),vd.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=oF(r),i=vd.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};ia.codeToName=new Map;ia.nameToCode=new Map;ia.registerCodec({code:237,name:"ed25519-pub"});ia.registerCodec({code:4864,name:"ed25519-priv"});ia.registerCodec({code:236,name:"x25519-pub"});ia.registerCodec({code:4866,name:"x25519-priv"});ia.registerCodec({code:231,name:"secp256k1-pub"});ia.registerCodec({code:4865,name:"secp256k1-priv"});function LL(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&LL(t[e])})}var ih=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let _he=class{constructor(){this.store=new Map}clear(){return ih(this,void 0,void 0,function*(){this.store.clear()})}close(){return ih(this,void 0,void 0,function*(){})}delete(e){return ih(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return ih(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return ih(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return ih(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return ih(this,void 0,void 0,function*(){this.store.set(e,r)})}};function bhe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ehe(t,...e){if(!bhe(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function aF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ahe(t,e){Ehe(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function She(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const mT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Za=(t,e)=>t<<32-e|t>>>e,The=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!The)throw new Error("Non little-endian hardware is not supported");function Dhe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function KL(t){if(typeof t=="string"&&(t=Dhe(t)),!She(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}let xhe=class{clone(){return this._cloneInto()}};function Phe(t){const e=n=>t().update(KL(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Che(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}class Ihe extends xhe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mT(this.buffer)}update(e){aF(this);const{view:r,buffer:n,blockLen:s}=this;e=KL(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=mT(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aF(this),Ahe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Che(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=mT(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const khe=(t,e,r)=>t&e^~t&r,$he=(t,e,r)=>t&e^t&r^e&r,Ohe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xl=new Uint32Array(64);let Rhe=class extends Ihe{constructor(){super(64,32,8,!1),this.A=Jl[0]|0,this.B=Jl[1]|0,this.C=Jl[2]|0,this.D=Jl[3]|0,this.E=Jl[4]|0,this.F=Jl[5]|0,this.G=Jl[6]|0,this.H=Jl[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Xl[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Xl[d-15],f=Xl[d-2],p=Za(h,7)^Za(h,18)^h>>>3,m=Za(f,17)^Za(f,19)^f>>>10;Xl[d]=m+Xl[d-7]+p+Xl[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=Za(a,6)^Za(a,11)^Za(a,25),f=c+h+khe(a,u,l)+Ohe[d]+Xl[d]|0,m=(Za(n,2)^Za(n,13)^Za(n,22))+$he(n,s,i)|0;c=l,l=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,i,o,a,u,l,c)}roundClean(){Xl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Lv=Phe(()=>new Rhe);var Nhe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let VL=class{static digest({data:e}){return Nhe(this,void 0,void 0,function*(){return Lv(e)})}},TI=class{};var Bhe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let Fhe=class extends TI{digest({algorithm:e,data:r}){return Bhe(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield VL.digest({data:r})}})}};function Mhe(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var jhe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const uF="urn:jwk:";function Nr({jwk:t}){return jhe(this,void 0,void 0,function*(){const e=t.kty;let r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);LL(r);const n=Mhe(r),s=_t.string(n).toUint8Array(),i=yield VL.digest({data:s});return _t.uint8Array(i).toBase64Url()})}function ep(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function DI(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function tp(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function xI(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function Uhe(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var vi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Lhe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let lo=class au{static adjustSignatureToLowS({signature:e}){return vi(this,void 0,void 0,function*(){const r=et.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return vi(this,void 0,void 0,function*(){const r=yield au.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:_t.uint8Array(e).toBase64Url(),x:_t.uint8Array(r.x).toBase64Url(),y:_t.uint8Array(r.y).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return vi(this,void 0,void 0,function*(){const r=yield au.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:_t.uint8Array(r.x).toBase64Url(),y:_t.uint8Array(r.y).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return vi(this,void 0,void 0,function*(){return et.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return vi(this,void 0,void 0,function*(){const r=yield au.privateKeyToBytes({privateKey:e}),n=yield au.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:_t.uint8Array(n.x).toBase64Url(),y:_t.uint8Array(n.y).toBase64Url()};return s.kid=yield Nr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return vi(this,void 0,void 0,function*(){return et.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return vi(this,void 0,void 0,function*(){return et.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return vi(this,void 0,void 0,function*(){const e=et.utils.randomPrivateKey(),r=yield au.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Nr({jwk:r}),r})}static getPublicKey({key:e}){var r;return vi(this,void 0,void 0,function*(){if(!(ep(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let n=Lhe(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Nr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return vi(this,void 0,void 0,function*(){if(!ep(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return _t.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return vi(this,void 0,void 0,function*(){if(!(DI(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=_t.base64Url(e.x).toUint8Array(),s=_t.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return vi(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield au.privateKeyToBytes({privateKey:e}),s=yield au.publicKeyToBytes({publicKey:r});return et.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return vi(this,void 0,void 0,function*(){const n=yield au.privateKeyToBytes({privateKey:r}),s=Lv(e);return et.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return vi(this,void 0,void 0,function*(){return et.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return vi(this,void 0,void 0,function*(){try{et.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return vi(this,void 0,void 0,function*(){const s=yield au.publicKeyToBytes({publicKey:e}),i=Lv(n);return et.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return vi(this,void 0,void 0,function*(){e.byteLength===32&&(e=et.getPublicKey(e));const r=et.ProjectivePoint.fromHex(e),n=Zr(r.x,32),s=Zr(r.y,32);return{x:n,y:s}})}};var wi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Khe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Go=class uu{static adjustSignatureToLowS({signature:e}){return wi(this,void 0,void 0,function*(){const r=tt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return wi(this,void 0,void 0,function*(){const r=yield uu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:_t.uint8Array(e).toBase64Url(),x:_t.uint8Array(r.x).toBase64Url(),y:_t.uint8Array(r.y).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return wi(this,void 0,void 0,function*(){const r=yield uu.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:_t.uint8Array(r.x).toBase64Url(),y:_t.uint8Array(r.y).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return wi(this,void 0,void 0,function*(){return tt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return wi(this,void 0,void 0,function*(){const r=yield uu.privateKeyToBytes({privateKey:e}),n=yield uu.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:_t.uint8Array(n.x).toBase64Url(),y:_t.uint8Array(n.y).toBase64Url()};return s.kid=yield Nr({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return wi(this,void 0,void 0,function*(){return tt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return wi(this,void 0,void 0,function*(){return tt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return wi(this,void 0,void 0,function*(){const e=tt.utils.randomPrivateKey(),r=yield uu.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Nr({jwk:r}),r})}static getPublicKey({key:e}){var r;return wi(this,void 0,void 0,function*(){if(!(ep(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let n=Khe(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Nr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return wi(this,void 0,void 0,function*(){if(!ep(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return _t.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return wi(this,void 0,void 0,function*(){if(!(DI(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=_t.base64Url(e.x).toUint8Array(),s=_t.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return wi(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield uu.privateKeyToBytes({privateKey:e}),s=yield uu.publicKeyToBytes({publicKey:r});return tt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return wi(this,void 0,void 0,function*(){const n=yield uu.privateKeyToBytes({privateKey:r}),s=Lv(e);return tt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return wi(this,void 0,void 0,function*(){return tt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return wi(this,void 0,void 0,function*(){try{tt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return wi(this,void 0,void 0,function*(){const s=yield uu.publicKeyToBytes({publicKey:e}),i=Lv(n);return tt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return wi(this,void 0,void 0,function*(){e.byteLength===32&&(e=tt.getPublicKey(e));const r=tt.ProjectivePoint.fromHex(e),n=Zr(r.x,32),s=Zr(r.y,32);return{x:n,y:s}})}};var Hg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let cF=class extends TI{computePublicKey({key:e}){return Hg(this,void 0,void 0,function*(){if(!ep(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield lo.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Go.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Hg(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{const r=yield lo.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Go.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return Hg(this,void 0,void 0,function*(){if(!ep(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield lo.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Go.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Hg(this,void 0,void 0,function*(){if(!ep(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield lo.sign({key:e,data:r});case"P-256":return yield Go.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Hg(this,void 0,void 0,function*(){if(!DI(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield lo.verify({key:e,signature:r,data:n});case"P-256":return yield Go.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var ko=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Vhe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let Fs=class wd{static bytesToPrivateKey({privateKeyBytes:e}){return ko(this,void 0,void 0,function*(){const r=wr.getPublicKey(e),n={crv:"Ed25519",d:_t.uint8Array(e).toBase64Url(),kty:"OKP",x:_t.uint8Array(r).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return ko(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:_t.uint8Array(e).toBase64Url()};return r.kid=yield Nr({jwk:r}),r})}static computePublicKey({key:e}){return ko(this,void 0,void 0,function*(){const r=yield wd.privateKeyToBytes({privateKey:e}),n=wr.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:_t.uint8Array(n).toBase64Url()};return s.kid=yield Nr({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return ko(this,void 0,void 0,function*(){const r=yield wd.privateKeyToBytes({privateKey:e}),n=xw(r),s=Oi.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:_t.uint8Array(n).toBase64Url(),x:_t.uint8Array(s).toBase64Url()};return i.kid=yield Nr({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return ko(this,void 0,void 0,function*(){const r=yield wd.publicKeyToBytes({publicKey:e});if(!(yield wd.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const s=Dw(r),i={kty:"OKP",crv:"X25519",x:_t.uint8Array(s).toBase64Url()};return i.kid=yield Nr({jwk:i}),i})}static generateKey(){return ko(this,void 0,void 0,function*(){const e=wr.utils.randomPrivateKey(),r=yield wd.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Nr({jwk:r}),r})}static getPublicKey({key:e}){var r;return ko(this,void 0,void 0,function*(){if(!(tp(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let n=Vhe(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Nr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return ko(this,void 0,void 0,function*(){if(!tp(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return _t.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return ko(this,void 0,void 0,function*(){if(!xI(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return _t.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return ko(this,void 0,void 0,function*(){const n=yield wd.privateKeyToBytes({privateKey:e});return wr.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return ko(this,void 0,void 0,function*(){try{wr.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return ko(this,void 0,void 0,function*(){const s=yield wd.publicKeyToBytes({publicKey:e});return wr.verify(r,n,s)})}};var zg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let qhe=class extends TI{computePublicKey({key:e}){return zg(this,void 0,void 0,function*(){if(!tp(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Fs.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return zg(this,void 0,void 0,function*(){switch(e){case"Ed25519":{const r=yield Fs.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return zg(this,void 0,void 0,function*(){if(!tp(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Fs.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return zg(this,void 0,void 0,function*(){if(!tp(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Fs.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return zg(this,void 0,void 0,function*(){if(!xI(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Fs.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Ac=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const yT={Ed25519:{implementation:qhe,names:["Ed25519"]},secp256k1:{implementation:cF,names:["ES256K","secp256k1"]},secp256r1:{implementation:cF,names:["ES256","secp256r1"]},"SHA-256":{implementation:Fhe,names:["SHA-256"]}};let dl=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e==null?void 0:e.keyStore)!==null&&r!==void 0?r:new _he}digest({algorithm:e,data:r}){return Ac(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return Ac(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return Ac(this,void 0,void 0,function*(){const n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if((n==null?void 0:n.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const s=`${uF}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return Ac(this,void 0,void 0,function*(){const r=yield Nr({jwk:e});return`${uF}${r}`})}getPublicKey({keyUri:e}){return Ac(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return Ac(this,void 0,void 0,function*(){if(!Uhe(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield Nr({jwk:n}));const s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return Ac(this,void 0,void 0,function*(){const n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return Ac(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;const n=(r=yT[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const s in yT){const i=yT[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return Ac(this,void 0,void 0,function*(){const r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};function Hhe(t){const e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}var Zl=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},zhe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};let qL=class x0{static bytesToPrivateKey({privateKeyBytes:e}){return Zl(this,void 0,void 0,function*(){const r=Oi.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:_t.uint8Array(e).toBase64Url(),x:_t.uint8Array(r).toBase64Url()};return n.kid=yield Nr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Zl(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:_t.uint8Array(e).toBase64Url()};return r.kid=yield Nr({jwk:r}),r})}static computePublicKey({key:e}){return Zl(this,void 0,void 0,function*(){const r=yield x0.privateKeyToBytes({privateKey:e}),n=Oi.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:_t.uint8Array(n).toBase64Url()};return s.kid=yield Nr({jwk:s}),s})}static generateKey(){return Zl(this,void 0,void 0,function*(){const e=Oi.utils.randomPrivateKey(),r=yield x0.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Nr({jwk:r}),r})}static getPublicKey({key:e}){var r;return Zl(this,void 0,void 0,function*(){if(!(tp(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let n=zhe(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield Nr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return Zl(this,void 0,void 0,function*(){if(!tp(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return _t.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Zl(this,void 0,void 0,function*(){if(!xI(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return _t.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Zl(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield x0.privateKeyToBytes({privateKey:e}),s=yield x0.publicKeyToBytes({publicKey:r});return Oi.getSharedSecret(n,s)})}};function ka(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function HL({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(xE))!==null&&r!==void 0?r:[]),Object.keys(Uv).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(xE))!==null&&o!==void 0?o:[])}),n}function Whe({didDocument:t}){const r=HL({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function Ghe({didDocument:t,methodId:e}){const r=[];return Object.keys(Uv).forEach(n=>{if(Array.isArray(t[n])){const s=t[n],i=ka(e);s.some(a=>{const u=ka(a)===i,l=xE(a)&&ka(a.id)===i;return u||l})&&r.push(n)}}),r}function xE(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function zL({keyBytes:t,multicodecCode:e,multicodecName:r}){const n=ia.addPrefix({code:e,data:t,name:r}),s=_t.uint8Array(n).toBase58Btc();return _t.base58Btc(s).toMultibase()}function lF({multibaseKeyId:t}){try{const e=_t.multibase(t).toBase58Btc(),r=_t.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=ia.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new pt(ot.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Wg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let pf=class WL{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Wg(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return Wg(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var l,c;return ka(u.id)===((l=ka(e==null?void 0:e.methodId))!==null&&l!==void 0?l:ka((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new pt(ot.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:Hhe(i),keyId:n.id,sign(u){return Wg(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(u){return Wg(this,arguments,void 0,function*({data:l,signature:c}){return yield o.verify({data:l,key:i,signature:c})})}}})}static import(e){return Wg(this,arguments,void 0,function*({portableDid:r,keyManager:n=new dl}){var s;const i=HL({didDocument:r.document});if(i.length===0)throw new pt(ot.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new WL({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};var dF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let Rw=class{static getSigningMethod(e){return dF(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return dF(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var ni=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},fF=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const hF="https://diddht.tbddev.org",Jhe=0,Yl=7200,g1=";",ss=",";var qx;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(qx||(qx={}));var hs;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(hs||(hs={}));var Hx;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(Hx||(Hx={}));const GL={Ed25519:hs.Ed25519,ES256K:hs.secp256k1,ES256:hs.secp256r1,"P-256":hs.secp256r1,secp256k1:hs.secp256k1,secp256r1:hs.secp256r1,X25519:hs.X25519},pF={[hs.Ed25519]:"EdDSA",[hs.secp256k1]:"ES256K",[hs.secp256r1]:"ES256",[hs.X25519]:"ECDH-ES+A256KW"};let PE=class zx extends Rw{static create(){return ni(this,arguments,void 0,function*({keyManager:e=new dl,options:r={}}={}){var n,s,i,o,a,u,l,c,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in GL)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const m=yield e.generateKey({algorithm:"Ed25519"}),E=yield e.getPublicKey({keyUri:m}),A=yield Gi.identityKeyToIdentifier({identityKey:E}),_=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(S=>{var x;return((x=S.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const S of g){const x=S.id&&S.id.split("#").pop()==="0"?m:yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});let w=(u=(a=S.id)!==null&&a!==void 0?a:D.kid)!==null&&u!==void 0?u:yield Nr({jwk:D});w=`${A}#${ka(w)}`,(l=_.verificationMethod)!==null&&l!==void 0||(_.verificationMethod=[]),_.verificationMethod.push({id:w,type:"JsonWebKey",controller:(c=S.controller)!==null&&c!==void 0?c:A,publicKeyJwk:D});for(const b of(d=S.purposes)!==null&&d!==void 0?d:[])_[b]||(_[b]=[]),_[b].push(w)}(h=r.services)===null||h===void 0||h.forEach(S=>{var x;(x=_.service)!==null&&x!==void 0||(_.service=[]),S.id=`${A}#${S.id.split("#").pop()}`,_.service.push(S)});const v=new pf({uri:A,document:_,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){const S=yield zx.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static import(e){return ni(this,arguments,void 0,function*({portableDid:r,keyManager:n=new dl}){var s;const i=br.parse(r.uri);if((i==null?void 0:i.method)!==zx.methodName)throw new pt(ot.MethodNotSupported,"Method not supported");const o=yield pf.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new pt(ot.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return ni(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=br.parse(r.id);if(i&&i.method!==this.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u,l;return ka(a.id)===((u=ka(n))!==null&&u!==void 0?u:ka((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new pt(ot.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return ni(this,arguments,void 0,function*({did:r,gatewayUri:n=hF}){return yield mF.put({did:r,gatewayUri:n})})}static resolve(e){return ni(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:hF;try{yield Gi.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield mF.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},Ni),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof pt))throw new Error(o);return Object.assign(Object.assign({},Ni),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};PE.methodName="dht";let mF=class ph{static get(e){return ni(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=Gi.identifierToIdentityKeyBytes({didUri:r}),i=yield ph.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield Gi.parseBep44GetMessage({bep44Message:i}),a=yield ph.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return ni(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield ph.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield Gi.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Gi.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield ph.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return ni(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=_t.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new pt(ot.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof pt?l:new pt(ot.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new pt(ot.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new pt(ot.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new pt(ot.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return ni(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=_t.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(u){throw new pt(ot.InternalError,`Failed to put Pkarr record for identifier ${s}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return ni(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},u={published:!0},l=new Map;for(const c of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(c.type!=="TXT")continue;const d=c.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=Gi.parseTxtDataToString(c.data);a.alsoKnownAs=h.split(ss);break}case d.startsWith("cnt"):{const h=Gi.parseTxtDataToString(c.data);a.controller=h.includes(ss)?h.split(ss):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:m,a:E}=Gi.parseTxtDataToObject(c.data),A=_t.base64Url(p).toUint8Array(),_=hs[Number(f)];let g=yield Gi.keyConverter(_).bytesToPublicKey({publicKeyBytes:A});g.alg=E||pF[Number(f)];const v=d==="k0"?"0":h!==void 0?h:yield Nr({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const S=`${r}#${v}`;a.verificationMethod.push({id:S,type:"JsonWebKey",controller:m??r,publicKeyJwk:g}),l.set(d,S);break}case d.startsWith("s"):{const h=Gi.parseTxtDataToObject(c.data),{id:f,t:p,se:m}=h,E=fF(h,["id","t","se"]),A=m.includes(ss)?m.split(ss):[m],_=Object.fromEntries(Object.entries(E).map(([g,v])=>[g,v.includes(ss)?v.split(ss):v]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},_),{id:`${r}#${f}`,type:p,serviceEndpoint:A}));break}case d.startsWith("typ"):{const{id:h}=Gi.parseTxtDataToObject(c.data);u.types=h.split(ss).map(f=>Number(f));break}case d.startsWith("did"):{const h=_=>_.split(ss).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:m,inv:E,agm:A}=Gi.parseTxtDataToObject(c.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),m&&(a.capabilityDelegation=h(m)),E&&(a.capabilityInvocation=h(E)),A&&(a.keyAgreement=h(A));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return ni(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,u,l,c;const d=[],h=[],f=new Map,p=[],m=[];if(i!==void 0){const{signature:_,previousDid:g}=i;yield Gi.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:Yl,data:`id=${g};s=${_}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:Yl,data:r.alsoKnownAs.join(ss)}),r.controller){const _=Array.isArray(r.controller)?r.controller.join(ss):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:Yl,data:_})}for(const[_,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const v=`k${_}`;m.push(v);let S=g.id.split("#").pop();f.set(S,v);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in GL))throw new pt(ot.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(u=x==null?void 0:x.crv)!==null&&u!==void 0?u:"undefined"}`);const D=hs[x.crv],w=yield Gi.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),b=_t.uint8Array(w).toBase64Url(),T=[`t=${D}`,`k=${b}`];S!=="0"&&(yield Nr({jwk:x}))!==S&&T.unshift(`id=${S}`),x.alg!==pF[D]&&T.push(`a=${x.alg}`),g.controller!==r.id&&T.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${v}._did.`,ttl:Yl,data:T.join(g1)})}(l=r.service)===null||l===void 0||l.forEach((_,g)=>{const v=`s${g}`;p.push(v);let{id:S,type:x,serviceEndpoint:D}=_,w=fF(_,["id","type","serviceEndpoint"]);S=ka(S),D=Array.isArray(D)?D.join(","):D;const T=Object.entries(Object.assign({id:S,t:x,se:D},w)).map(([C,k])=>`${C}=${k}`).join(g1),P=Gi.chunkDataIfNeeded(T);d.push({type:"TXT",name:`_${v}._did.`,ttl:Yl,data:P})});const E=[`v=${Jhe}`];if(m.length&&E.push(`vm=${m.join(ss)}`),Object.keys(Uv).forEach(_=>{var g;const v=(g=r[_])===null||g===void 0?void 0:g.map(S=>f.get(S.split("#").pop()));if(v){const S=Hx[_];E.push(`${S}=${v.join(ss)}`)}}),p.length&&E.push(`svc=${p.join(ss)}`),!((c=n.types)===null||c===void 0)&&c.length){const g=n.types.map(v=>typeof v=="string"?qx[v]:v);d.push({type:"TXT",name:"_typ._did.",ttl:Yl,data:`id=${g.join(ss)}`})}d.push({type:"TXT",name:"_did."+ph.getUniqueDidSuffix(r.id)+".",ttl:Yl,data:E.join(g1)});for(const _ of s||[])h.push({type:"NS",name:"_did."+ph.getUniqueDidSuffix(r.id)+".",ttl:Yl,data:_+"."});return{id:0,type:"response",flags:bI,answers:[...d,...h]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Gi=class v1{static createBep44PutMessage(e){return ni(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Fv(r),a=cy.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new pt(ot.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const u=yield s.sign({data:a});return{k:n,seq:i,sig:u,v:o}})}static identifierToIdentityKey(e){return ni(this,arguments,void 0,function*({didUri:r}){let n=v1.identifierToIdentityKeyBytes({didUri:r});return yield Fs.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){const r=br.parse(e);if(!r)throw new pt(ot.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==PE.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=_t.base32Z(r.id).toUint8Array()}catch{throw new pt(ot.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new pt(ot.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return ni(this,arguments,void 0,function*({identityKey:r}){const n=yield Fs.publicKeyToBytes({publicKey:r}),s=_t.uint8Array(n).toBase32Z();return`did:${PE.methodName}:${s}`})}static keyConverter(e){const n={Ed25519:Fs,"P-256":{publicKeyToBytes:s=>ni(this,[s],void 0,function*({publicKey:i}){const o=yield Go.publicKeyToBytes({publicKey:i});return yield Go.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Go.bytesToPublicKey,privateKeyToBytes:Go.privateKeyToBytes,bytesToPrivateKey:Go.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>ni(this,[s],void 0,function*({publicKey:i}){const o=yield lo.publicKeyToBytes({publicKey:i});return yield lo.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:lo.bytesToPublicKey,privateKeyToBytes:lo.privateKeyToBytes,bytesToPrivateKey:lo.bytesToPrivateKey},X25519:qL}[e];if(!n)throw new pt(ot.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return ni(this,arguments,void 0,function*({bep44Message:r}){const n=yield Fs.bytesToPublicKey({publicKeyBytes:r.k}),s=cy.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Fs.verify({key:n,signature:r.sig,data:s})))throw new pt(ot.InvalidSignature,"Invalid signature for DHT BEP44 message");return EI(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(g1).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return _t.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new pt(ot.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return ni(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield v1.identifierToIdentityKey({didUri:n.previousDid}),i=v1.identifierToIdentityKeyBytes({didUri:r}),o=_t.base64Url(n.signature).toUint8Array();if(!(yield Fs.verify({key:s,data:i,signature:o})))throw new pt(ot.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;const r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};var kd=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},wu;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(wu||(wu={}));const Xhe={Ed25519:wu.Ed25519,ES256K:wu.secp256k1,ES256:wu.secp256r1,"P-256":wu.secp256r1,secp256k1:wu.secp256k1,secp256r1:wu.secp256r1},yF="https://ion.tbd.engineering";let JL=class P0 extends Rw{static create(){return kd(this,arguments,void 0,function*({keyManager:e=new dl,options:r={}}={}){var n,s,i,o,a,u,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in Xhe)))throw new Error("One or more verification method algorithms are not supported");const c=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const S of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});h.push({id:S.id,publicKeyJwk:D,purposes:(a=S.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield e.generateKey({algorithm:wu.secp256k1}),p=yield e.getPublicKey({keyUri:f}),m=yield e.generateKey({algorithm:wu.secp256k1}),E=yield e.getPublicKey({keyUri:m}),A=yield Gg.computeLongFormDidUri({recoveryKey:p,updateKey:E,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:h}),{didDocument:_,didResolutionMetadata:g}=yield P0.resolve(A,{gatewayUri:r.gatewayUri});if(_===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const v=new pf({uri:A,document:_,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:p,updateKey:E},keyManager:e});if(!((l=r.publish)!==null&&l!==void 0)||l){const S=yield P0.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static getSigningMethod(e){return kd(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=br.parse(r.id);if(i&&i.method!==this.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new pt(ot.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return kd(this,arguments,void 0,function*({portableDid:r,keyManager:n=new dl}){const s=br.parse(r.uri);if((s==null?void 0:s.method)!==P0.methodName)throw new pt(ot.MethodNotSupported,"Method not supported");return yield pf.import({portableDid:r,keyManager:n})})}static publish(e){return kd(this,arguments,void 0,function*({did:r,gatewayUri:n=yF}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:Ghe({didDocument:r.document,methodId:c.id})})))!==null&&i!==void 0?i:[],u=yield Gg.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield Gg.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const c=Gg.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:ot.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return kd(this,arguments,void 0,function*(r,n={}){var s,i;const o=br.parse(r);if(!o)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==P0.methodName)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:yF;try{const u=Gg.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(u);if(!l.ok)throw new pt(ot.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:c,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},Ni),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(u){if(!(u instanceof pt))throw new Error(u);return Object.assign(Object.assign({},Ni),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}};JL.methodName="ion";let Gg=class mh{static appendPathToUrl({baseUrl:e,path:r}){const n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return kd(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield mh.createIonDocument({services:s,verificationMethods:i}),a=mh.normalizeJwk(r),u=mh.normalizeJwk(n);return yield $w.createLongFormDid({document:o,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return kd(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield Ji.createCreateRequest({document:r,recoveryKey:mh.normalizeJwk(n),updateKey:mh.normalizeJwk(s)})})}static createIonDocument(e){return kd(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let c=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield Nr({jwk:l.publicKeyJwk});c=`${c.split("#").pop()}`;const d={id:c,publicKeyJwk:mh.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var mb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let XL=class C0 extends Rw{static create(){return mb(this,arguments,void 0,function*({keyManager:e=new dl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=_t.object(l).toBase64Url(),d=`did:${C0.methodName}:${c}`,f=(yield C0.resolve(d)).didDocument;return new pf({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return mb(this,arguments,void 0,function*({didDocument:r}){var n;const s=br.parse(r.id);if(s&&s.method!==this.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new pt(ot.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return mb(this,arguments,void 0,function*({portableDid:r,keyManager:n=new dl}){const s=br.parse(r.uri);if((s==null?void 0:s.method)!==C0.methodName)throw new pt(ot.MethodNotSupported,"Method not supported");const i=yield pf.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new pt(ot.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return mb(this,void 0,void 0,function*(){const n=br.parse(e);let s;try{s=_t.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==C0.methodName)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},Ni),{didDocument:i})})}};XL.methodName="jwk";var Sa=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},$c;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})($c||($c={}));const gT={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},Zhe={Ed25519:$c.Ed25519,ES256K:$c.secp256k1,ES256:$c.secp256r1,"P-256":$c.secp256r1,secp256k1:$c.secp256k1,secp256r1:$c.secp256r1,X25519:$c.X25519};let ZL=class Cc extends Rw{static create(){return Sa(this,arguments,void 0,function*({keyManager:e=new dl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=yield Uo.publicKeyToMultibaseId({publicKey:l}),d=`did:${Cc.methodName}:${c}`,f=(yield Cc.resolve(d,r)).didDocument;return new pf({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return Sa(this,arguments,void 0,function*({didDocument:r}){var n;const s=br.parse(r.id);if(s&&s.method!==this.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new pt(ot.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Sa(this,arguments,void 0,function*({portableDid:r,keyManager:n=new dl}){const s=br.parse(r.uri);if((s==null?void 0:s.method)!==Cc.methodName)throw new pt(ot.MethodNotSupported,"Method not supported");const i=yield pf.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new pt(ot.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return Sa(this,void 0,void 0,function*(){try{const n=yield Cc.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},Ni),{didDocument:n})}catch(n){if(!(n instanceof pt))throw new Error(n);return Object.assign(Object.assign({},Ni),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Sa(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},l=br.parse(r);if(!l)throw new pt(ot.InvalidDid,`Invalid DID URI: ${r}`);const c=l.id;if(l.method!==Cc.methodName)throw new pt(ot.MethodNotSupported,`Method not supported: ${l.method}`);if(!Cc.validateIdentifier(l))throw new pt(ot.InvalidDid,`Invalid DID URI: ${r}`);const d=yield Cc.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(u.id=l.uri,u.verificationMethod=[d],u.authentication=[d.id],u.assertionMethod=[d.id],u.capabilityInvocation=[d.id],u.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",m=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});u.verificationMethod.push(m),u.keyAgreement=[m.id]}const h=[s];return Whe({didDocument:u}).forEach(p=>{const m=gT[p];h.push(m)}),u["@context"]=h,u})}static createEncryptionMethod(e){return Sa(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l}=yield Cc.deriveEncryptionKey({multibaseValue:n}),c=u.byteLength,d=Uo.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(c!==d)throw new pt(ot.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${d}`);const h=zL({keyBytes:u,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new pt(ot.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in gT))throw new pt(ot.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new pt(ot.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield Uo.multicodecToJwk({code:l});a.publicKeyJwk=yield Uo.keyConverter(p).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return Sa(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l,multicodecName:c}=lF({multibaseKeyId:n}),d=u.byteLength,h=Uo.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new pt(ot.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(c){case"secp256k1-pub":f=yield lo.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":f=yield Fs.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":f=!0;break}if(!f)throw new pt(ot.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new pt(ot.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in gT))throw new pt(ot.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new pt(ot.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:m}=yield Uo.multicodecToJwk({code:l});a.publicKeyJwk=yield Uo.keyConverter(m).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return Sa(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=lF({multibaseKeyId:r});if(i===237){const o=yield Uo.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Fs.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Uo.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){const{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Kx(n)==="String"&&n.startsWith("z")}};ZL.methodName="key";let Uo=class vm{static jwkToMulticodec(e){return Sa(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=vm.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:ia.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){const n={"P-256":Go.compressPublicKey,secp256k1:lo.compressPublicKey}[e];if(!n)throw new pt(ot.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){const n={Ed25519:Fs,"P-256":Go,secp256k1:lo,X25519:qL}[e];if(!n)throw new pt(ot.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Sa(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?ia.getNameFromCode({code:r}):n;const s=n,i=vm.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return Sa(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in Zhe))throw new pt(ot.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield vm.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield vm.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield vm.jwkToMulticodec({jwk:r});return zL({keyBytes:s,multicodecName:i})})}};Uo.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Uo.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Uo.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var Yhe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};let YL=class QL extends Rw{static resolve(e,r){return Yhe(this,void 0,void 0,function*(){const n=br.parse(e);if(!n)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==QL.methodName)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},Ni),{didDocument:a})}catch{return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:"notFound"}})}})}};YL.methodName="web";const Qhe={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var gF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class epe{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||Qhe;for(const n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return gF(this,void 0,void 0,function*(){const n=br.parse(e);if(!n)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:ot.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});const s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},Ni),{didResolutionMetadata:{error:ot.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});const i=yield this.cache.get(n.uri);if(i)return i;{const o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return gF(this,void 0,void 0,function*(){const n=br.parse(e);if(!n)return{dereferencingMetadata:{error:ot.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};const{service:a=[],verificationMethod:u=[]}=s,l=new Set([e,n.fragment,`#${n.fragment}`]);let c;for(let d of u)if(l.has(d.id)){c=d;break}for(let d of a)if(l.has(d.id)){c=d;break}return c?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:c,contentMetadata:i}:{dereferencingMetadata:{error:ot.NotFound},contentStream:null,contentMetadata:{}}})}}var vF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const tpe=new Lfe;class Nu{static sign(e){return vF(this,void 0,void 0,function*(){const{signerDid:r,payload:n}=e,s=yield r.getSigner();let i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);const o={typ:"JWT",alg:s.algorithm,kid:i},a=zl.object(o).toBase64Url(),u=zl.object(n).toBase64Url(),l=`${a}.${u}`,c=zl.string(l).toUint8Array(),d=yield s.sign({data:c}),h=zl.uint8Array(d).toBase64Url();return`${l}.${h}`})}static verify(e){return vF(this,void 0,void 0,function*(){const{decoded:r,encoded:n}=Nu.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");const s=yield Nu.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);const i=s.contentStream;if(!i||!xE(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");const o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");const a=`${n.header}.${n.payload}`,u=zl.string(a).toUint8Array(),l=zl.base64Url(n.signature).toUint8Array();if(!(yield tpe.verify({key:o,signature:l,data:u})))throw new Error("Signature verification failed: Integrity mismatch");return r})}static parse(e){const r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);const[n,s,i]=r;let o,a;try{o=zl.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=zl.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}}Nu.didResolver=new epe({didResolvers:[PE,JL,ZL,XL,YL]});const Be={INFO:"info",WARN:"warn",ERROR:"error"},CE=class{constructor(t,e,r){Se(this,"tag");Se(this,"status");Se(this,"message");this.tag=t,this.status=e,this.message=r}},rpe=t=>{function e(r){return r.status===Be.ERROR}return t.filter(r=>e(r)).length>0};var py={},PI={},eK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseDid=t.IProofType=t.IProofPurpose=void 0,function(n){n.verificationMethod="verificationMethod",n.assertionMethod="assertionMethod",n.authentication="authentication",n.keyAgreement="keyAgreement",n.contractAgreement="contactAgreement",n.capabilityInvocation="capabilityInvocation",n.capabilityDelegation="capabilityDelegation"}(t.IProofPurpose||(t.IProofPurpose={})),function(n){n.Ed25519Signature2018="Ed25519Signature2018",n.Ed25519Signature2020="Ed25519Signature2020",n.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",n.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",n.JsonWebSignature2020="JsonWebSignature2020",n.RsaSignature2018="RsaSignature2018",n.GpgSignature2020="GpgSignature2020",n.JcsEd25519Signature2020="JcsEd25519Signature2020",n.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",n.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",n.JwtProof2020="JwtProof2020"}(t.IProofType||(t.IProofType={}));const e=n=>{const s=r(n);if(s===null)throw new Error("invalid did");return s};t.parseDid=e;const r=n=>{const i="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",o="([a-z0-9]+)",a=`((?:${i}*:)*(${i}+))`,u="[a-zA-Z0-9_.:%-]",c=`((${`;${u}+=${u}*`})*)`,d="(/[^#?]*)?",h="([?][^#]*)?",f="(#.*)?",p=new RegExp(`^did:${o}:${a}${c}${d}${h}${f}$`);if(n===""||!n)return null;const m=n.match(p);if(m){const E={did:`did:${m[1]}:${m[2]}`,method:m[1],id:m[2],didUrl:n};if(m[4]){const A=m[4].slice(1).split(";");E.params={};for(const _ of A){const g=_.split("=");E.params[g[0]]=g[1]}}return m[6]&&(E.path=m[6]),m[7]&&(E.query=m[7].slice(1)),m[8]&&(E.fragment=m[8].slice(1)),E}return null}})(eK);var tK={};Object.defineProperty(tK,"__esModule",{value:!0});var rK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JWT_PROOF_TYPE_2020=t.DocumentFormat=t.OriginalType=void 0,function(e){e.JSONLD="json-ld",e.JWT_ENCODED="jwt-encoded",e.JWT_DECODED="jwt-decoded"}(t.OriginalType||(t.OriginalType={})),function(e){e[e.JWT=0]="JWT",e[e.JSONLD=1]="JSONLD",e[e.EIP712=2]="EIP712"}(t.DocumentFormat||(t.DocumentFormat={})),t.JWT_PROOF_TYPE_2020="JwtProof2020"})(rK);var nK={};Object.defineProperty(nK,"__esModule",{value:!0});(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(eK,t),r(tK,t),r(rK,t),r(nK,t)})(PI);var CI={},aS={};Object.defineProperty(aS,"__esModule",{value:!0});aS.ObjectUtils=void 0;let npe=class iK{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){const r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;iK.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};aS.ObjectUtils=npe;(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(aS,t)})(CI);var sK={},uS={};function Wx(t){this.message=t}Wx.prototype=new Error,Wx.prototype.name="InvalidCharacterError";var wF=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Wx("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function ipe(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(wF(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return wF(e)}}function Kv(t){this.message=t}function spe(t,e){if(typeof t!="string")throw new Kv("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(ipe(t.split(".")[r]))}catch(n){throw new Kv("Invalid token specified: "+n.message)}}Kv.prototype=new Error,Kv.prototype.name="InvalidTokenError";const ope=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:Kv,default:spe},Symbol.toStringTag,{value:"Module"})),ape=Bee(ope);var _F=Ar&&Ar.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},upe=Ar&&Ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uS,"__esModule",{value:!0});uS.CredentialMapper=void 0;const Ya=PI,tm=upe(ape),bF=CI;class Bt{static decodeVerifiablePresentation(e){var r;if(Bt.isJwtEncoded(e)){const n=(0,tm.default)(e),s=(0,tm.default)(e,{header:!0});return n.vp.proof={type:Ya.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Ya.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Bt.isJwtDecodedPresentation(e)?e:Bt.isJsonLdAsString(e)?JSON.parse(e):e}static decodeVerifiableCredential(e){var r;if(Bt.isJwtEncoded(e)){const n=(0,tm.default)(e),s=(0,tm.default)(e,{header:!0});return n.vc.proof={type:Ya.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Ya.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Bt.isJwtDecodedCredential(e)?e:Bt.isJsonLdAsString(e)?JSON.parse(e):e}static toWrappedVerifiablePresentation(e,r){const n=Bt.getFirstProof(e),s=typeof e!="string"&&Bt.hasJWTProofType(e)?n==null?void 0:n.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");const i=Bt.decodeVerifiablePresentation(s),o=Bt.isJwtEncoded(s),a=Bt.isJwtDecodedPresentation(s),u=o?Ya.OriginalType.JWT_ENCODED:a?Ya.OriginalType.JWT_DECODED:Ya.OriginalType.JSONLD,l=a||o?"jwt_vp":"ldp_vp";let c;if(o||a?c=Bt.jwtDecodedPresentationToUniformPresentation(i,!1,r):c=i,!c||!("verifiableCredential"in c)||!c.verifiableCredential||c.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");const d=Bt.toWrappedVerifiableCredentials(c.verifiableCredential,r),h=Object.assign(Object.assign({},c),{verifiableCredential:d});return{type:u,format:l,original:s,decoded:i,presentation:h,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>Bt.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;const s=Bt.getFirstProof(e),i=Bt.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");const o=Bt.decodeVerifiableCredential(i),a=Bt.isJwtEncoded(i),u=Bt.isJwtDecodedCredential(i),l=a?Ya.OriginalType.JWT_ENCODED:u?Ya.OriginalType.JWT_DECODED:Ya.OriginalType.JSONLD,c=a||u?Bt.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:l,credential:c}}static isJwtEncoded(e){return bF.ObjectUtils.isString(e)&&e.startsWith("ey")}static isJsonLdAsString(e){return bF.ObjectUtils.isString(e)&&e.includes("@context")}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return Bt.jwtDecodedPresentationToUniformPresentation((0,tm.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){const{iss:s,aud:i,jti:o,vp:a}=e,u=_F(e,["iss","aud","jti","vp"]),l=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");l.verifiableCredential=a.verifiableCredential.map(c=>Bt.toUniformCredential(c,n))}if(s){const c=l.holder;if(c&&c!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${c})`);l.holder=s}if(i){const c=l.verifier;if(c&&c!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${c})`);l.verifier=i}if(o){const c=l.id;if(c&&c!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${c})`);l.id=o}return l}static toUniformCredential(e,r){var n;const s=typeof e!="string"&&Bt.hasJWTProofType(e)?(n=Bt.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");const i=Bt.decodeVerifiableCredential(s),o=Bt.isJwtEncoded(s);return Bt.isJwtDecodedCredential(s)||o?Bt.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;const s=Bt.getFirstProof(e),i=typeof e!="string"&&Bt.hasJWTProofType(e)?s==null?void 0:s.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");const o=Bt.decodeVerifiablePresentation(i),a=Bt.isJwtEncoded(i),u=Bt.isJwtDecodedPresentation(i),l=a||u?Bt.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r!=null&&r.addContextIfMissing&&!l["@context"]&&(l["@context"]=["https://www.w3.org/2018/credentials/v1"]),l.verifiableCredential=(n=l.verifiableCredential)===null||n===void 0?void 0:n.map(c=>Bt.toUniformCredential(c,r)),l}static jwtEncodedCredentialToUniformCredential(e,r){return Bt.jwtDecodedCredentialToUniformCredential((0,tm.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){const{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:u}=e,l=_F(e,["exp","nbf","iss","vc","sub","jti"]),c=Object.assign(Object.assign({},l),o),d=(r==null?void 0:r.maxTimeSkewInMS)!==void 0?r.maxTimeSkewInMS:999;if(n){const h=c.expirationDate,f=parseInt(n.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){const m=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||m>d)throw new Error(`Inconsistent expiration dates between JWT claim (${p}) and VC value (${h})`)}c.expirationDate=p}if(s){const h=c.issuanceDate,f=parseInt(s.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){const m=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||m>d)throw new Error(`Inconsistent issuance dates between JWT claim (${p}) and VC value (${h})`)}c.issuanceDate=p}if(i){const h=c.issuer;if(h){if(typeof h=="string"){if(h!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h})`)}else if(h.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h.id})`)}else c.issuer=i}if(a){const h=Array.isArray(c.credentialSubject)?c.credentialSubject:[c.credentialSubject];for(let f=0;f<h.length;f++){const p=h[f].id;if(p&&p!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${p})`);Array.isArray(c.credentialSubject)?c.credentialSubject[f].id=a:c.credentialSubject.id=a}}if(u){const h=c.id;if(h&&h!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${h})`);c.id=u}return c}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){const r=Bt.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Bt.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static storedPresentationToOriginalFormat(e){const r=Bt.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Bt.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static toCompactJWT(e){if(!e||Bt.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r=e.vp.proof:"vc"in e?r=e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(typeof e=="string")return this.isJsonLdAsString(e)?1:0;const r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n!=null&&n.jwt?0:(n==null?void 0:n.type)==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=Bt.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;const r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}}uS.CredentialMapper=Bt;(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(uS,t)})(sK);(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(PI,t),r(CI,t),r(sK,t)})(py);var Gx;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(Gx||(Gx={}));const On=Gx;var ze,qa,oK,_d,He,II,aK,Le,Ir,ye,Kt,er,Fr,Ie,Ve,ut,je;ze={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};qa={};qa[ze.BooleanLiteral]="Boolean";qa[ze.EOF]="<end>";qa[ze.Identifier]="Identifier";qa[ze.Keyword]="Keyword";qa[ze.NullLiteral]="Null";qa[ze.NumericLiteral]="Numeric";qa[ze.Punctuator]="Punctuator";qa[ze.StringLiteral]="String";qa[ze.RegularExpression]="RegularExpression";oK=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];var yt={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};_d={Data:1,Get:2,Set:4};He={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};II={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function Nw(t,e){if(!t)throw new Error("ASSERT: "+e)}function Mc(t){return t>=48&&t<=57}function uK(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function Z0(t){return"01234567".indexOf(t)>=0}function cpe(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function pp(t){return t===10||t===13||t===8232||t===8233}function jy(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&II.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function IE(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&II.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function lpe(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Bw(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function sa(t){return t==="eval"||t==="arguments"}function dpe(t){if(Ir&&Bw(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function Jx(t,e,r,n,s){var i;Nw(typeof r=="number","Comment must have valid position"),!(ut.lastCommentStart>=r)&&(ut.lastCommentStart=r,i={type:t,value:e},je.range&&(i.range=[r,n]),je.loc&&(i.loc=s),je.comments.push(i),je.attachComment&&(je.leadingComments.push(i),je.trailingComments.push(i)))}function vT(t){var e,r,n,s;for(e=ye-t,r={start:{line:Kt,column:ye-er-t}};ye<Fr;)if(n=Le.charCodeAt(ye),++ye,pp(n)){je.comments&&(s=Le.slice(e+t,ye-1),r.end={line:Kt,column:ye-er-1},Jx("Line",s,e,ye-1,r)),n===13&&Le.charCodeAt(ye)===10&&++ye,++Kt,er=ye;return}je.comments&&(s=Le.slice(e+t,ye),r.end={line:Kt,column:ye-er},Jx("Line",s,e,ye,r))}function fpe(){var t,e,r,n;for(je.comments&&(t=ye-2,e={start:{line:Kt,column:ye-er-2}});ye<Fr;)if(r=Le.charCodeAt(ye),pp(r))r===13&&Le.charCodeAt(ye+1)===10&&++ye,++Kt,++ye,er=ye,ye>=Fr&&Ht({},He.UnexpectedToken,"ILLEGAL");else if(r===42){if(Le.charCodeAt(ye+1)===47){++ye,++ye,je.comments&&(n=Le.slice(t+2,ye-2),e.end={line:Kt,column:ye-er},Jx("Block",n,t,ye,e));return}++ye}else++ye;Ht({},He.UnexpectedToken,"ILLEGAL")}function Pf(){var t,e;for(e=ye===0;ye<Fr;)if(t=Le.charCodeAt(ye),cpe(t))++ye;else if(pp(t))++ye,t===13&&Le.charCodeAt(ye)===10&&++ye,++Kt,er=ye,e=!0;else if(t===47)if(t=Le.charCodeAt(ye+1),t===47)++ye,++ye,vT(2),e=!0;else if(t===42)++ye,++ye,fpe();else break;else if(e&&t===45)if(Le.charCodeAt(ye+1)===45&&Le.charCodeAt(ye+2)===62)ye+=3,vT(3);else break;else if(t===60)if(Le.slice(ye+1,ye+4)==="!--")++ye,++ye,++ye,++ye,vT(4);else break;else break}function kE(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(ye<Fr&&uK(Le[ye]))n=Le[ye++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function cK(){var t,e;for(t=Le.charCodeAt(ye++),e=String.fromCharCode(t),t===92&&(Le.charCodeAt(ye)!==117&&Ht({},He.UnexpectedToken,"ILLEGAL"),++ye,t=kE("u"),(!t||t==="\\"||!jy(t.charCodeAt(0)))&&Ht({},He.UnexpectedToken,"ILLEGAL"),e=t);ye<Fr&&(t=Le.charCodeAt(ye),!!IE(t));)++ye,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Le.charCodeAt(ye)!==117&&Ht({},He.UnexpectedToken,"ILLEGAL"),++ye,t=kE("u"),(!t||t==="\\"||!IE(t.charCodeAt(0)))&&Ht({},He.UnexpectedToken,"ILLEGAL"),e+=t);return e}function hpe(){var t,e;for(t=ye++;ye<Fr;){if(e=Le.charCodeAt(ye),e===92)return ye=t,cK();if(IE(e))++ye;else break}return Le.slice(t,ye)}function ppe(){var t,e,r;return t=ye,e=Le.charCodeAt(ye)===92?cK():hpe(),e.length===1?r=ze.Identifier:dpe(e)?r=ze.Keyword:e==="null"?r=ze.NullLiteral:e==="true"||e==="false"?r=ze.BooleanLiteral:r=ze.Identifier,{type:r,value:e,lineNumber:Kt,lineStart:er,start:t,end:ye}}function jc(){var t=ye,e=Le.charCodeAt(ye),r,n=Le[ye],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ye,je.tokenize&&(e===40?je.openParenToken=je.tokens.length:e===123&&(je.openCurlyToken=je.tokens.length)),{type:ze.Punctuator,value:String.fromCharCode(e),lineNumber:Kt,lineStart:er,start:t,end:ye};default:if(r=Le.charCodeAt(ye+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ye+=2,{type:ze.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:Kt,lineStart:er,start:t,end:ye};case 33:case 61:return ye+=2,Le.charCodeAt(ye)===61&&++ye,{type:ze.Punctuator,value:Le.slice(t,ye),lineNumber:Kt,lineStart:er,start:t,end:ye}}}if(o=Le.substr(ye,4),o===">>>=")return ye+=4,{type:ze.Punctuator,value:o,lineNumber:Kt,lineStart:er,start:t,end:ye};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return ye+=3,{type:ze.Punctuator,value:i,lineNumber:Kt,lineStart:er,start:t,end:ye};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return ye+=2,{type:ze.Punctuator,value:s,lineNumber:Kt,lineStart:er,start:t,end:ye};if("<>=!+-*%&|^/".indexOf(n)>=0)return++ye,{type:ze.Punctuator,value:n,lineNumber:Kt,lineStart:er,start:t,end:ye};Ht({},He.UnexpectedToken,"ILLEGAL")}function mpe(t){for(var e="";ye<Fr&&uK(Le[ye]);)e+=Le[ye++];return e.length===0&&Ht({},He.UnexpectedToken,"ILLEGAL"),jy(Le.charCodeAt(ye))&&Ht({},He.UnexpectedToken,"ILLEGAL"),{type:ze.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:Kt,lineStart:er,start:t,end:ye}}function ype(t){for(var e="0"+Le[ye++];ye<Fr&&Z0(Le[ye]);)e+=Le[ye++];return(jy(Le.charCodeAt(ye))||Mc(Le.charCodeAt(ye)))&&Ht({},He.UnexpectedToken,"ILLEGAL"),{type:ze.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:Kt,lineStart:er,start:t,end:ye}}function EF(){var t,e,r;if(r=Le[ye],Nw(Mc(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=ye,t="",r!=="."){if(t=Le[ye++],r=Le[ye],t==="0"){if(r==="x"||r==="X")return++ye,mpe(e);if(Z0(r))return ype(e);r&&Mc(r.charCodeAt(0))&&Ht({},He.UnexpectedToken,"ILLEGAL")}for(;Mc(Le.charCodeAt(ye));)t+=Le[ye++];r=Le[ye]}if(r==="."){for(t+=Le[ye++];Mc(Le.charCodeAt(ye));)t+=Le[ye++];r=Le[ye]}if(r==="e"||r==="E")if(t+=Le[ye++],r=Le[ye],(r==="+"||r==="-")&&(t+=Le[ye++]),Mc(Le.charCodeAt(ye)))for(;Mc(Le.charCodeAt(ye));)t+=Le[ye++];else Ht({},He.UnexpectedToken,"ILLEGAL");return jy(Le.charCodeAt(ye))&&Ht({},He.UnexpectedToken,"ILLEGAL"),{type:ze.NumericLiteral,value:parseFloat(t),lineNumber:Kt,lineStart:er,start:e,end:ye}}function gpe(){var t="",e,r,n,s,i,o,a=!1,u,l;for(u=Kt,l=er,e=Le[ye],Nw(e==="'"||e==='"',"String literal must starts with a quote"),r=ye,++ye;ye<Fr;)if(n=Le[ye++],n===e){e="";break}else if(n==="\\")if(n=Le[ye++],!n||!pp(n.charCodeAt(0)))switch(n){case"u":case"x":o=ye,i=kE(n),i?t+=i:(ye=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:Z0(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),ye<Fr&&Z0(Le[ye])&&(a=!0,s=s*8+"01234567".indexOf(Le[ye++]),"0123".indexOf(n)>=0&&ye<Fr&&Z0(Le[ye])&&(s=s*8+"01234567".indexOf(Le[ye++]))),t+=String.fromCharCode(s)):t+=n;break}else++Kt,n==="\r"&&Le[ye]===`
`&&++ye,er=ye;else{if(pp(n.charCodeAt(0)))break;t+=n}return e!==""&&Ht({},He.UnexpectedToken,"ILLEGAL"),{type:ze.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:l,lineNumber:Kt,lineStart:er,start:r,end:ye}}function vpe(t,e){var r;try{r=new RegExp(t,e)}catch{Ht({},He.InvalidRegExp)}return r}function wpe(){var t,e,r,n,s;for(t=Le[ye],Nw(t==="/","Regular expression literal must start with a slash"),e=Le[ye++],r=!1,n=!1;ye<Fr;)if(t=Le[ye++],e+=t,t==="\\")t=Le[ye++],pp(t.charCodeAt(0))&&Ht({},He.UnterminatedRegExp),e+=t;else if(pp(t.charCodeAt(0)))Ht({},He.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||Ht({},He.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function _pe(){var t,e,r,n;for(e="",r="";ye<Fr&&(t=Le[ye],!!IE(t.charCodeAt(0)));)if(++ye,t==="\\"&&ye<Fr)if(t=Le[ye],t==="u"){if(++ye,n=ye,t=kE("u"),t)for(r+=t,e+="\\u";n<ye;++n)e+=Le[n];else ye=n,r+="u",e+="\\u";kr({},He.UnexpectedToken,"ILLEGAL")}else e+="\\",kr({},He.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function lK(){var t,e,r,n;return Ve=null,Pf(),t=ye,e=wpe(),r=_pe(),n=vpe(e.value,r.value),je.tokenize?{type:ze.RegularExpression,value:n,lineNumber:Kt,lineStart:er,start:t,end:ye}:{literal:e.literal+r.literal,value:n,start:t,end:ye}}function yh(){var t,e,r,n;return Pf(),t=ye,e={start:{line:Kt,column:ye-er}},r=lK(),e.end={line:Kt,column:ye-er},je.tokenize||(je.tokens.length>0&&(n=je.tokens[je.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&je.tokens.pop()),je.tokens.push({type:"RegularExpression",value:r.literal,range:[t,ye],loc:e})),r}function bpe(t){return t.type===ze.Identifier||t.type===ze.Keyword||t.type===ze.BooleanLiteral||t.type===ze.NullLiteral}function Epe(){var t,e;if(t=je.tokens[je.tokens.length-1],!t)return yh();if(t.type==="Punctuator"){if(t.value==="]")return jc();if(t.value===")")return e=je.tokens[je.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?yh():jc();if(t.value==="}"){if(je.tokens[je.openCurlyToken-3]&&je.tokens[je.openCurlyToken-3].type==="Keyword"){if(e=je.tokens[je.openCurlyToken-4],!e)return jc()}else if(je.tokens[je.openCurlyToken-4]&&je.tokens[je.openCurlyToken-4].type==="Keyword"){if(e=je.tokens[je.openCurlyToken-5],!e)return yh()}else return jc();return oK.indexOf(e.value)>=0?jc():yh()}return yh()}return t.type==="Keyword"?yh():jc()}function kI(){var t;return Pf(),ye>=Fr?{type:ze.EOF,lineNumber:Kt,lineStart:er,start:ye,end:ye}:(t=Le.charCodeAt(ye),jy(t)?ppe():t===40||t===41||t===59?jc():t===39||t===34?gpe():t===46?Mc(Le.charCodeAt(ye+1))?EF():jc():Mc(t)?EF():je.tokenize&&t===47?Epe():jc())}function dK(){var t,e,r;return Pf(),t={start:{line:Kt,column:ye-er}},e=kI(),t.end={line:Kt,column:ye-er},e.type!==ze.EOF&&(r=Le.slice(e.start,e.end),je.tokens.push({type:qa[e.type],value:r,range:[e.start,e.end],loc:t})),e}function tr(){var t;return t=Ve,ye=t.end,Kt=t.lineNumber,er=t.lineStart,Ve=typeof je.tokens<"u"?dK():kI(),ye=t.end,Kt=t.lineNumber,er=t.lineStart,t}function fK(){var t,e,r;t=ye,e=Kt,r=er,Ve=typeof je.tokens<"u"?dK():kI(),ye=t,Kt=e,er=r}function AF(t,e){this.line=t,this.column=e}function Ape(t,e,r,n){this.start=new AF(t,e),this.end=new AF(r,n)}aK={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===yt.Program&&t.body.length>0)){for(je.trailingComments.length>0?je.trailingComments[0].range[0]>=t.range[1]?(r=je.trailingComments,je.trailingComments=[]):je.trailingComments.length=0:je.bottomRightStack.length>0&&je.bottomRightStack[je.bottomRightStack.length-1].trailingComments&&je.bottomRightStack[je.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=je.bottomRightStack[je.bottomRightStack.length-1].trailingComments,delete je.bottomRightStack[je.bottomRightStack.length-1].trailingComments);je.bottomRightStack.length>0&&je.bottomRightStack[je.bottomRightStack.length-1].range[0]>=t.range[0];)e=je.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):je.leadingComments.length>0&&je.leadingComments[je.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=je.leadingComments,je.leadingComments=[]),r&&(t.trailingComments=r),je.bottomRightStack.push(t)}},markEnd:function(t,e){return je.range&&(t.range=[e.start,ye]),je.loc&&(t.loc=new Ape(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),Kt,ye-er),this.postProcess(t)),je.attachComment&&this.processComment(t),t},postProcess:function(t){return je.source&&(t.loc.source=je.source),t},createArrayExpression:function(t){return{type:yt.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:yt.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?yt.LogicalExpression:yt.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:yt.BlockStatement,body:t}},createBreakStatement:function(t){return{type:yt.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:yt.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:yt.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:yt.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:yt.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:yt.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:yt.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:yt.EmptyStatement}},createExpressionStatement:function(t){return{type:yt.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:yt.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:yt.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:yt.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:yt.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:yt.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:yt.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:yt.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:yt.Literal,value:t.value,raw:Le.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:yt.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:yt.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:yt.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:yt.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:yt.Program,body:t}},createProperty:function(t,e,r){return{type:yt.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:yt.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:yt.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:yt.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:yt.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:yt.ThisExpression}},createThrowStatement:function(t){return{type:yt.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:yt.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:yt.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:yt.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:yt.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:yt.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:yt.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:yt.WithStatement,object:t,body:e}}};function Fw(){var t,e,r,n;return t=ye,e=Kt,r=er,Pf(),n=Kt!==e,ye=t,Kt=e,er=r,n}function Ht(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return Nw(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-er+1):(s=new Error("Line "+Kt+": "+i),s.index=ye,s.lineNumber=Kt,s.column=ye-er+1),s.description=i,s}function kr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{Ht.apply(null,t)}catch(r){if(je.errors)je.errors.push(r);else throw r}}function Hu(t){if(t.type===ze.EOF&&Ht(t,He.UnexpectedEOS),t.type===ze.NumericLiteral&&Ht(t,He.UnexpectedNumber),t.type===ze.StringLiteral&&Ht(t,He.UnexpectedString),t.type===ze.Identifier&&Ht(t,He.UnexpectedIdentifier),t.type===ze.Keyword){if(lpe(t.value))Ht(t,He.UnexpectedReserved);else if(Ir&&Bw(t.value)){kr(t,He.StrictReservedWord);return}Ht(t,He.UnexpectedToken,t.value)}Ht(t,He.UnexpectedToken,t.value)}function Tt(t){var e=tr();(e.type!==ze.Punctuator||e.value!==t)&&Hu(e)}function Nn(t){var e=tr();(e.type!==ze.Keyword||e.value!==t)&&Hu(e)}function gt(t){return Ve.type===ze.Punctuator&&Ve.value===t}function Bi(t){return Ve.type===ze.Keyword&&Ve.value===t}function Spe(){var t;return Ve.type!==ze.Punctuator?!1:(t=Ve.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function zu(){var t;if(Le.charCodeAt(ye)===59||gt(";")){tr();return}t=Kt,Pf(),Kt===t&&Ve.type!==ze.EOF&&!gt("}")&&Hu(Ve)}function cS(t){return t.type===yt.Identifier||t.type===yt.MemberExpression}function Tpe(){var t=[],e;for(e=Ve,Tt("[");!gt("]");)gt(",")?(tr(),t.push(null)):(t.push(Va()),gt("]")||Tt(","));return tr(),Ie.markEnd(Ie.createArrayExpression(t),e)}function wT(t,e){var r,n,s;return r=Ir,s=Ve,n=OI(),e&&Ir&&sa(t[0].name)&&kr(e,He.StrictParamName),Ir=r,Ie.markEnd(Ie.createFunctionExpression(null,t,[],n),s)}function yb(){var t,e;return e=Ve,t=tr(),t.type===ze.StringLiteral||t.type===ze.NumericLiteral?(Ir&&t.octal&&kr(t,He.StrictOctalLiteral),Ie.markEnd(Ie.createLiteral(t),e)):Ie.markEnd(Ie.createIdentifier(t.value),e)}function Dpe(){var t,e,r,n,s,i;if(t=Ve,i=Ve,t.type===ze.Identifier)return r=yb(),t.value==="get"&&!gt(":")?(e=yb(),Tt("("),Tt(")"),n=wT([]),Ie.markEnd(Ie.createProperty("get",e,n),i)):t.value==="set"&&!gt(":")?(e=yb(),Tt("("),t=Ve,t.type!==ze.Identifier?(Tt(")"),kr(t,He.UnexpectedToken,t.value),n=wT([])):(s=[Cf()],Tt(")"),n=wT(s,t)),Ie.markEnd(Ie.createProperty("set",e,n),i)):(Tt(":"),n=Va(),Ie.markEnd(Ie.createProperty("init",r,n),i));if(t.type===ze.EOF||t.type===ze.Punctuator)Hu(t);else return e=yb(),Tt(":"),n=Va(),Ie.markEnd(Ie.createProperty("init",e,n),i)}function xpe(){var t=[],e,r,n,s,i={},o=String,a;for(a=Ve,Tt("{");!gt("}");)e=Dpe(),e.key.type===yt.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?_d.Data:e.kind==="get"?_d.Get:_d.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===_d.Data?Ir&&s===_d.Data?kr({},He.StrictDuplicateProperty):s!==_d.Data&&kr({},He.AccessorDataProperty):s===_d.Data?kr({},He.AccessorDataProperty):i[n]&s&&kr({},He.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),gt("}")||Tt(",");return Tt("}"),Ie.markEnd(Ie.createObjectExpression(t),a)}function Ppe(){var t;return Tt("("),t=oi(),Tt(")"),t}function hK(){var t,e,r,n;if(gt("("))return Ppe();if(gt("["))return Tpe();if(gt("{"))return xpe();if(t=Ve.type,n=Ve,t===ze.Identifier)r=Ie.createIdentifier(tr().value);else if(t===ze.StringLiteral||t===ze.NumericLiteral)Ir&&Ve.octal&&kr(Ve,He.StrictOctalLiteral),r=Ie.createLiteral(tr());else if(t===ze.Keyword){if(Bi("function"))return tme();Bi("this")?(tr(),r=Ie.createThisExpression()):Hu(tr())}else t===ze.BooleanLiteral?(e=tr(),e.value=e.value==="true",r=Ie.createLiteral(e)):t===ze.NullLiteral?(e=tr(),e.value=null,r=Ie.createLiteral(e)):gt("/")||gt("/=")?(typeof je.tokens<"u"?r=Ie.createLiteral(yh()):r=Ie.createLiteral(lK()),fK()):Hu(tr());return Ie.markEnd(r,n)}function pK(){var t=[];if(Tt("("),!gt(")"))for(;ye<Fr&&(t.push(Va()),!gt(")"));)Tt(",");return Tt(")"),t}function Cpe(){var t,e;return e=Ve,t=tr(),bpe(t)||Hu(t),Ie.markEnd(Ie.createIdentifier(t.value),e)}function mK(){return Tt("."),Cpe()}function yK(){var t;return Tt("["),t=oi(),Tt("]"),t}function gK(){var t,e,r;return r=Ve,Nn("new"),t=kpe(),e=gt("(")?pK():[],Ie.markEnd(Ie.createNewExpression(t,e),r)}function Ipe(){var t,e,r,n,s;for(s=Ve,t=ut.allowIn,ut.allowIn=!0,e=Bi("new")?gK():hK(),ut.allowIn=t;;){if(gt("."))n=mK(),e=Ie.createMemberExpression(".",e,n);else if(gt("("))r=pK(),e=Ie.createCallExpression(e,r);else if(gt("["))n=yK(),e=Ie.createMemberExpression("[",e,n);else break;Ie.markEnd(e,s)}return e}function kpe(){var t,e,r,n;for(n=Ve,t=ut.allowIn,e=Bi("new")?gK():hK(),ut.allowIn=t;gt(".")||gt("[");)gt("[")?(r=yK(),e=Ie.createMemberExpression("[",e,r)):(r=mK(),e=Ie.createMemberExpression(".",e,r)),Ie.markEnd(e,n);return e}function SF(){var t,e,r=Ve;return t=Ipe(),Ve.type===ze.Punctuator&&(gt("++")||gt("--"))&&!Fw()&&(Ir&&t.type===yt.Identifier&&sa(t.name)&&kr({},He.StrictLHSPostfix),cS(t)||kr({},He.InvalidLHSInAssignment),e=tr(),t=Ie.markEnd(Ie.createPostfixExpression(e.value,t),r)),t}function qm(){var t,e,r;return Ve.type!==ze.Punctuator&&Ve.type!==ze.Keyword?e=SF():gt("++")||gt("--")?(r=Ve,t=tr(),e=qm(),Ir&&e.type===yt.Identifier&&sa(e.name)&&kr({},He.StrictLHSPrefix),cS(e)||kr({},He.InvalidLHSInAssignment),e=Ie.createUnaryExpression(t.value,e),e=Ie.markEnd(e,r)):gt("+")||gt("-")||gt("~")||gt("!")?(r=Ve,t=tr(),e=qm(),e=Ie.createUnaryExpression(t.value,e),e=Ie.markEnd(e,r)):Bi("delete")||Bi("void")||Bi("typeof")?(r=Ve,t=tr(),e=qm(),e=Ie.createUnaryExpression(t.value,e),e=Ie.markEnd(e,r),Ir&&e.operator==="delete"&&e.argument.type===yt.Identifier&&kr({},He.StrictDelete)):e=SF(),e}function TF(t,e){var r=0;if(t.type!==ze.Punctuator&&t.type!==ze.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function $pe(){var t,e,r,n,s,i,o,a,u,l;if(t=Ve,u=qm(),n=Ve,s=TF(n,ut.allowIn),s===0)return u;for(n.prec=s,tr(),e=[t,Ve],o=qm(),i=[u,n,o];(s=TF(Ve,ut.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=Ie.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],Ie.markEnd(r,t),i.push(r);n=tr(),n.prec=s,i.push(n),e.push(Ve),r=qm(),i.push(r)}for(l=i.length-1,r=i[l],e.pop();l>1;)r=Ie.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,t=e.pop(),Ie.markEnd(r,t);return r}function Ope(){var t,e,r,n,s;return s=Ve,t=$pe(),gt("?")&&(tr(),e=ut.allowIn,ut.allowIn=!0,r=Va(),ut.allowIn=e,Tt(":"),n=Va(),t=Ie.createConditionalExpression(t,r,n),Ie.markEnd(t,s)),t}function Va(){var t,e,r,n,s;return t=Ve,s=Ve,n=e=Ope(),Spe()&&(cS(e)||kr({},He.InvalidLHSInAssignment),Ir&&e.type===yt.Identifier&&sa(e.name)&&kr(t,He.StrictLHSAssignment),t=tr(),r=Va(),n=Ie.markEnd(Ie.createAssignmentExpression(t.value,e,r),s)),n}function oi(){var t,e=Ve;if(t=Va(),gt(",")){for(t=Ie.createSequenceExpression([t]);ye<Fr&&gt(",");)tr(),t.expressions.push(Va());Ie.markEnd(t,e)}return t}function Rpe(){for(var t=[],e;ye<Fr&&!(gt("}")||(e=Vv(),typeof e>"u"));)t.push(e);return t}function $E(){var t,e;return e=Ve,Tt("{"),t=Rpe(),Tt("}"),Ie.markEnd(Ie.createBlockStatement(t),e)}function Cf(){var t,e;return e=Ve,t=tr(),t.type!==ze.Identifier&&Hu(t),Ie.markEnd(Ie.createIdentifier(t.value),e)}function Npe(t){var e=null,r,n;return n=Ve,r=Cf(),Ir&&sa(r.name)&&kr({},He.StrictVarName),t==="const"?(Tt("="),e=Va()):gt("=")&&(tr(),e=Va()),Ie.markEnd(Ie.createVariableDeclarator(r,e),n)}function $I(t){var e=[];do{if(e.push(Npe(t)),!gt(","))break;tr()}while(ye<Fr);return e}function Bpe(){var t;return Nn("var"),t=$I(),zu(),Ie.createVariableDeclaration(t,"var")}function Fpe(t){var e,r;return r=Ve,Nn(t),e=$I(t),zu(),Ie.markEnd(Ie.createVariableDeclaration(e,t),r)}function Mpe(){return Tt(";"),Ie.createEmptyStatement()}function jpe(){var t=oi();return zu(),Ie.createExpressionStatement(t)}function Upe(){var t,e,r;return Nn("if"),Tt("("),t=oi(),Tt(")"),e=Wu(),Bi("else")?(tr(),r=Wu()):r=null,Ie.createIfStatement(t,e,r)}function Lpe(){var t,e,r;return Nn("do"),r=ut.inIteration,ut.inIteration=!0,t=Wu(),ut.inIteration=r,Nn("while"),Tt("("),e=oi(),Tt(")"),gt(";")&&tr(),Ie.createDoWhileStatement(t,e)}function Kpe(){var t,e,r;return Nn("while"),Tt("("),t=oi(),Tt(")"),r=ut.inIteration,ut.inIteration=!0,e=Wu(),ut.inIteration=r,Ie.createWhileStatement(t,e)}function Vpe(){var t,e,r;return r=Ve,t=tr(),e=$I(),Ie.markEnd(Ie.createVariableDeclaration(e,t.value),r)}function qpe(){var t,e,r,n,s,i,o;return t=e=r=null,Nn("for"),Tt("("),gt(";")?tr():(Bi("var")||Bi("let")?(ut.allowIn=!1,t=Vpe(),ut.allowIn=!0,t.declarations.length===1&&Bi("in")&&(tr(),n=t,s=oi(),t=null)):(ut.allowIn=!1,t=oi(),ut.allowIn=!0,Bi("in")&&(cS(t)||kr({},He.InvalidLHSInForIn),tr(),n=t,s=oi(),t=null)),typeof n>"u"&&Tt(";")),typeof n>"u"&&(gt(";")||(e=oi()),Tt(";"),gt(")")||(r=oi())),Tt(")"),o=ut.inIteration,ut.inIteration=!0,i=Wu(),ut.inIteration=o,typeof n>"u"?Ie.createForStatement(t,e,r,i):Ie.createForInStatement(n,s,i)}function Hpe(){var t=null,e;return Nn("continue"),Le.charCodeAt(ye)===59?(tr(),ut.inIteration||Ht({},He.IllegalContinue),Ie.createContinueStatement(null)):Fw()?(ut.inIteration||Ht({},He.IllegalContinue),Ie.createContinueStatement(null)):(Ve.type===ze.Identifier&&(t=Cf(),e="$"+t.name,Object.prototype.hasOwnProperty.call(ut.labelSet,e)||Ht({},He.UnknownLabel,t.name)),zu(),t===null&&!ut.inIteration&&Ht({},He.IllegalContinue),Ie.createContinueStatement(t))}function zpe(){var t=null,e;return Nn("break"),Le.charCodeAt(ye)===59?(tr(),ut.inIteration||ut.inSwitch||Ht({},He.IllegalBreak),Ie.createBreakStatement(null)):Fw()?(ut.inIteration||ut.inSwitch||Ht({},He.IllegalBreak),Ie.createBreakStatement(null)):(Ve.type===ze.Identifier&&(t=Cf(),e="$"+t.name,Object.prototype.hasOwnProperty.call(ut.labelSet,e)||Ht({},He.UnknownLabel,t.name)),zu(),t===null&&!(ut.inIteration||ut.inSwitch)&&Ht({},He.IllegalBreak),Ie.createBreakStatement(t))}function Wpe(){var t=null;return Nn("return"),ut.inFunctionBody||kr({},He.IllegalReturn),Le.charCodeAt(ye)===32&&jy(Le.charCodeAt(ye+1))?(t=oi(),zu(),Ie.createReturnStatement(t)):Fw()?Ie.createReturnStatement(null):(gt(";")||!gt("}")&&Ve.type!==ze.EOF&&(t=oi()),zu(),Ie.createReturnStatement(t))}function Gpe(){var t,e;return Ir&&(Pf(),kr({},He.StrictModeWith)),Nn("with"),Tt("("),t=oi(),Tt(")"),e=Wu(),Ie.createWithStatement(t,e)}function Jpe(){var t,e=[],r,n;for(n=Ve,Bi("default")?(tr(),t=null):(Nn("case"),t=oi()),Tt(":");ye<Fr&&!(gt("}")||Bi("default")||Bi("case"));)r=Wu(),e.push(r);return Ie.markEnd(Ie.createSwitchCase(t,e),n)}function Xpe(){var t,e,r,n,s;if(Nn("switch"),Tt("("),t=oi(),Tt(")"),Tt("{"),e=[],gt("}"))return tr(),Ie.createSwitchStatement(t,e);for(n=ut.inSwitch,ut.inSwitch=!0,s=!1;ye<Fr&&!gt("}");)r=Jpe(),r.test===null&&(s&&Ht({},He.MultipleDefaultsInSwitch),s=!0),e.push(r);return ut.inSwitch=n,Tt("}"),Ie.createSwitchStatement(t,e)}function Zpe(){var t;return Nn("throw"),Fw()&&Ht({},He.NewlineAfterThrow),t=oi(),zu(),Ie.createThrowStatement(t)}function Ype(){var t,e,r;return r=Ve,Nn("catch"),Tt("("),gt(")")&&Hu(Ve),t=Cf(),Ir&&sa(t.name)&&kr({},He.StrictCatchVariable),Tt(")"),e=$E(),Ie.markEnd(Ie.createCatchClause(t,e),r)}function Qpe(){var t,e=[],r=null;return Nn("try"),t=$E(),Bi("catch")&&e.push(Ype()),Bi("finally")&&(tr(),r=$E()),e.length===0&&!r&&Ht({},He.NoCatchOrFinally),Ie.createTryStatement(t,[],e,r)}function eme(){return Nn("debugger"),zu(),Ie.createDebuggerStatement()}function Wu(){var t=Ve.type,e,r,n,s;if(t===ze.EOF&&Hu(Ve),t===ze.Punctuator&&Ve.value==="{")return $E();if(s=Ve,t===ze.Punctuator)switch(Ve.value){case";":return Ie.markEnd(Mpe(),s);case"(":return Ie.markEnd(jpe(),s)}if(t===ze.Keyword)switch(Ve.value){case"break":return Ie.markEnd(zpe(),s);case"continue":return Ie.markEnd(Hpe(),s);case"debugger":return Ie.markEnd(eme(),s);case"do":return Ie.markEnd(Lpe(),s);case"for":return Ie.markEnd(qpe(),s);case"function":return Ie.markEnd(wK(),s);case"if":return Ie.markEnd(Upe(),s);case"return":return Ie.markEnd(Wpe(),s);case"switch":return Ie.markEnd(Xpe(),s);case"throw":return Ie.markEnd(Zpe(),s);case"try":return Ie.markEnd(Qpe(),s);case"var":return Ie.markEnd(Bpe(),s);case"while":return Ie.markEnd(Kpe(),s);case"with":return Ie.markEnd(Gpe(),s)}return e=oi(),e.type===yt.Identifier&&gt(":")?(tr(),n="$"+e.name,Object.prototype.hasOwnProperty.call(ut.labelSet,n)&&Ht({},He.Redeclaration,"Label",e.name),ut.labelSet[n]=!0,r=Wu(),delete ut.labelSet[n],Ie.markEnd(Ie.createLabeledStatement(e,r),s)):(zu(),Ie.markEnd(Ie.createExpressionStatement(e),s))}function OI(){var t,e=[],r,n,s,i,o,a,u,l;for(l=Ve,Tt("{");ye<Fr&&!(Ve.type!==ze.StringLiteral||(r=Ve,t=Vv(),e.push(t),t.expression.type!==yt.Literal));)n=Le.slice(r.start+1,r.end-1),n==="use strict"?(Ir=!0,s&&kr(s,He.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=ut.labelSet,o=ut.inIteration,a=ut.inSwitch,u=ut.inFunctionBody,ut.labelSet={},ut.inIteration=!1,ut.inSwitch=!1,ut.inFunctionBody=!0;ye<Fr&&!(gt("}")||(t=Vv(),typeof t>"u"));)e.push(t);return Tt("}"),ut.labelSet=i,ut.inIteration=o,ut.inSwitch=a,ut.inFunctionBody=u,Ie.markEnd(Ie.createBlockStatement(e),l)}function vK(t){var e,r=[],n,s,i,o,a;if(Tt("("),!gt(")"))for(i={};ye<Fr&&(n=Ve,e=Cf(),o="$"+n.value,Ir?(sa(n.value)&&(s=n,a=He.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=He.StrictParamDupe)):t||(sa(n.value)?(t=n,a=He.StrictParamName):Bw(n.value)?(t=n,a=He.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=He.StrictParamDupe)),r.push(e),i[o]=!0,!gt(")"));)Tt(",");return Tt(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function wK(){var t,e=[],r,n,s,i,o,a,u,l;return l=Ve,Nn("function"),n=Ve,t=Cf(),Ir?sa(n.value)&&kr(n,He.StrictFunctionName):sa(n.value)?(o=n,a=He.StrictFunctionName):Bw(n.value)&&(o=n,a=He.StrictReservedWord),i=vK(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=Ir,r=OI(),Ir&&o&&Ht(o,a),Ir&&s&&kr(s,a),Ir=u,Ie.markEnd(Ie.createFunctionDeclaration(t,e,[],r),l)}function tme(){var t,e=null,r,n,s,i,o=[],a,u,l;return l=Ve,Nn("function"),gt("(")||(t=Ve,e=Cf(),Ir?sa(t.value)&&kr(t,He.StrictFunctionName):sa(t.value)?(n=t,s=He.StrictFunctionName):Bw(t.value)&&(n=t,s=He.StrictReservedWord)),i=vK(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=Ir,a=OI(),Ir&&n&&Ht(n,s),Ir&&r&&kr(r,s),Ir=u,Ie.markEnd(Ie.createFunctionExpression(e,o,[],a),l)}function Vv(){if(Ve.type===ze.Keyword)switch(Ve.value){case"const":case"let":return Fpe(Ve.value);case"function":return wK();default:return Wu()}if(Ve.type!==ze.EOF)return Wu()}function rme(){for(var t,e=[],r,n,s;ye<Fr&&(r=Ve,!(r.type!==ze.StringLiteral||(t=Vv(),e.push(t),t.expression.type!==yt.Literal)));)n=Le.slice(r.start+1,r.end-1),n==="use strict"?(Ir=!0,s&&kr(s,He.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;ye<Fr&&(t=Vv(),!(typeof t>"u"));)e.push(t);return e}function nme(){var t,e;return Pf(),fK(),e=Ve,Ir=!1,t=rme(),Ie.markEnd(Ie.createProgram(t),e)}function ime(){var t,e,r,n=[];for(t=0;t<je.tokens.length;++t)e=je.tokens[t],r={type:e.type,value:e.value},je.range&&(r.range=e.range),je.loc&&(r.loc=e.loc),n.push(r);je.tokens=n}function Xx(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),Ie=aK,Le=t,ye=0,Kt=Le.length>0?1:0,er=0,Fr=Le.length,Ve=null,ut={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},je={};try{r=nme(),typeof je.comments<"u"&&(r.comments=je.comments),typeof je.tokens<"u"&&(ime(),r.tokens=je.tokens),typeof je.errors<"u"&&(r.errors=je.errors)}catch(s){throw s}finally{je={}}return r}function sme(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}var _K={},bK={};const ome="estraverse",ame="ECMAScript JS AST traversal functions",ume="https://github.com/estools/estraverse",cme="estraverse.js",lme="4.3.0",dme={node:">=4.0"},fme=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],hme={type:"git",url:"http://github.com/estools/estraverse.git"},pme={"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},mme="BSD-2-Clause",yme={test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"},gme={name:ome,description:ame,homepage:ume,main:cme,version:lme,engines:dme,maintainers:fme,repository:hme,devDependencies:pme,license:mme,scripts:yme};(function(t){(function e(r){var n,s,i,o,a,u;function l(v){var S={},x,D;for(x in v)v.hasOwnProperty(x)&&(D=v[x],typeof D=="object"&&D!==null?S[x]=l(D):S[x]=D);return S}function c(v,S){var x,D,w,b;for(D=v.length,w=0;D;)x=D>>>1,b=w+x,S(v[b])?D=x:(w=b+1,D-=x+1);return w}n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},o={},a={},u={},s={Break:o,Skip:a,Remove:u};function d(v,S){this.parent=v,this.key=S}d.prototype.replace=function(S){this.parent[this.key]=S},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function h(v,S,x,D){this.node=v,this.path=S,this.wrap=x,this.ref=D}function f(){}f.prototype.path=function(){var S,x,D,w,b,T;function P(C,k){if(Array.isArray(k))for(D=0,w=k.length;D<w;++D)C.push(k[D]);else C.push(k)}if(!this.__current.path)return null;for(b=[],S=2,x=this.__leavelist.length;S<x;++S)T=this.__leavelist[S],P(b,T.path);return P(b,this.__current.path),b},f.prototype.type=function(){var v=this.current();return v.type||this.__current.wrap},f.prototype.parents=function(){var S,x,D;for(D=[],S=1,x=this.__leavelist.length;S<x;++S)D.push(this.__leavelist[S].node);return D},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(S,x){var D,w;return w=void 0,D=this.__current,this.__current=x,this.__state=null,S&&(w=S.call(this,x.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=D,w},f.prototype.notify=function(S){this.__state=S},f.prototype.skip=function(){this.notify(a)},f.prototype.break=function(){this.notify(o)},f.prototype.remove=function(){this.notify(u)},f.prototype.__initialize=function(v,S){this.visitor=S,this.root=v,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,S.fallback==="iteration"?this.__fallback=Object.keys:typeof S.fallback=="function"&&(this.__fallback=S.fallback),this.__keys=i,S.keys&&(this.__keys=Object.assign(Object.create(this.__keys),S.keys))};function p(v){return v==null?!1:typeof v=="object"&&typeof v.type=="string"}function m(v,S){return(v===n.ObjectExpression||v===n.ObjectPattern)&&S==="properties"}f.prototype.traverse=function(S,x){var D,w,b,T,P,C,k,K,L,q,se,X;for(this.__initialize(S,x),X={},D=this.__worklist,w=this.__leavelist,D.push(new h(S,null,null,null)),w.push(new h(null,null,null,null));D.length;){if(b=D.pop(),b===X){if(b=w.pop(),C=this.__execute(x.leave,b),this.__state===o||C===o)return;continue}if(b.node){if(C=this.__execute(x.enter,b),this.__state===o||C===o)return;if(D.push(X),w.push(b),this.__state===a||C===a)continue;if(T=b.node,P=T.type||b.wrap,q=this.__keys[P],!q)if(this.__fallback)q=this.__fallback(T);else throw new Error("Unknown node type "+P+".");for(K=q.length;(K-=1)>=0;)if(k=q[K],se=T[k],!!se)if(Array.isArray(se)){for(L=se.length;(L-=1)>=0;)if(se[L]){if(m(P,q[K]))b=new h(se[L],[k,L],"Property",null);else if(p(se[L]))b=new h(se[L],[k,L],null,null);else continue;D.push(b)}}else p(se)&&D.push(new h(se,k,null,null))}}},f.prototype.replace=function(S,x){var D,w,b,T,P,C,k,K,L,q,se,X,re;function W(B){var te,z,$,F;if(B.ref.remove()){for(z=B.ref.key,F=B.ref.parent,te=D.length;te--;)if($=D[te],$.ref&&$.ref.parent===F){if($.ref.key<z)break;--$.ref.key}}}for(this.__initialize(S,x),se={},D=this.__worklist,w=this.__leavelist,X={root:S},C=new h(S,null,null,new d(X,"root")),D.push(C),w.push(C);D.length;){if(C=D.pop(),C===se){if(C=w.pop(),P=this.__execute(x.leave,C),P!==void 0&&P!==o&&P!==a&&P!==u&&C.ref.replace(P),(this.__state===u||P===u)&&W(C),this.__state===o||P===o)return X.root;continue}if(P=this.__execute(x.enter,C),P!==void 0&&P!==o&&P!==a&&P!==u&&(C.ref.replace(P),C.node=P),(this.__state===u||P===u)&&(W(C),C.node=null),this.__state===o||P===o)return X.root;if(b=C.node,!!b&&(D.push(se),w.push(C),!(this.__state===a||P===a))){if(T=b.type||C.wrap,L=this.__keys[T],!L)if(this.__fallback)L=this.__fallback(b);else throw new Error("Unknown node type "+T+".");for(k=L.length;(k-=1)>=0;)if(re=L[k],q=b[re],!!q)if(Array.isArray(q)){for(K=q.length;(K-=1)>=0;)if(q[K]){if(m(T,L[k]))C=new h(q[K],[re,K],"Property",new d(q,K));else if(p(q[K]))C=new h(q[K],[re,K],null,new d(q,K));else continue;D.push(C)}}else p(q)&&D.push(new h(q,re,null,new d(b,re)))}}return X.root};function E(v,S){var x=new f;return x.traverse(v,S)}function A(v,S){var x=new f;return x.replace(v,S)}function _(v,S){var x;return x=c(S,function(w){return w.range[0]>v.range[0]}),v.extendedRange=[v.range[0],v.range[1]],x!==S.length&&(v.extendedRange[1]=S[x].range[0]),x-=1,x>=0&&(v.extendedRange[0]=S[x].range[1]),v}function g(v,S,x){var D=[],w,b,T,P;if(!v.range)throw new Error("attachComments needs range information");if(!x.length){if(S.length){for(T=0,b=S.length;T<b;T+=1)w=l(S[T]),w.extendedRange=[0,v.range[0]],D.push(w);v.leadingComments=D}return v}for(T=0,b=S.length;T<b;T+=1)D.push(_(l(S[T]),x));return P=0,E(v,{enter:function(C){for(var k;P<D.length&&(k=D[P],!(k.extendedRange[1]>C.range[0]));)k.extendedRange[1]===C.range[0]?(C.leadingComments||(C.leadingComments=[]),C.leadingComments.push(k),D.splice(P,1)):P+=1;if(P===D.length)return s.Break;if(D[P].extendedRange[0]>C.range[1])return s.Skip}}),P=0,E(v,{leave:function(C){for(var k;P<D.length&&(k=D[P],!(C.range[1]<k.extendedRange[0]));)C.range[1]===k.extendedRange[0]?(C.trailingComments||(C.trailingComments=[]),C.trailingComments.push(k),D.splice(P,1)):P+=1;if(P===D.length)return s.Break;if(D[P].extendedRange[0]>C.range[1])return s.Skip}}),v}return r.version=gme.version,r.Syntax=n,r.traverse=E,r.replace=A,r.attachComments=g,r.VisitorKeys=i,r.VisitorOption=s,r.Controller=f,r.cloneEnvironment=function(){return e({})},r})(t)})(bK);var w1={},EK={exports:{}};(function(){function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}EK.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})();var vme=EK.exports,AK={exports:{}};(function(){var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(E){return 48<=E&&E<=57}function a(E){return 48<=E&&E<=57||97<=E&&E<=102||65<=E&&E<=70}function u(E){return E>=48&&E<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function l(E){return E===32||E===9||E===11||E===12||E===160||E>=5760&&r.indexOf(E)>=0}function c(E){return E===10||E===13||E===8232||E===8233}function d(E){if(E<=65535)return String.fromCharCode(E);var A=String.fromCharCode(Math.floor((E-65536)/1024)+55296),_=String.fromCharCode((E-65536)%1024+56320);return A+_}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function h(E){return E<128?n[E]:e.NonAsciiIdentifierStart.test(d(E))}function f(E){return E<128?s[E]:e.NonAsciiIdentifierPart.test(d(E))}function p(E){return E<128?n[E]:t.NonAsciiIdentifierStart.test(d(E))}function m(E){return E<128?s[E]:t.NonAsciiIdentifierPart.test(d(E))}AK.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:l,isLineTerminator:c,isIdentifierStartES5:h,isIdentifierPartES5:f,isIdentifierStartES6:p,isIdentifierPartES6:m}})();var SK=AK.exports,TK={exports:{}};(function(){var t=SK;function e(h){switch(h){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(h,f){return!f&&h==="yield"?!1:n(h,f)}function n(h,f){if(f&&e(h))return!0;switch(h.length){case 2:return h==="if"||h==="in"||h==="do";case 3:return h==="var"||h==="for"||h==="new"||h==="try";case 4:return h==="this"||h==="else"||h==="case"||h==="void"||h==="with"||h==="enum";case 5:return h==="while"||h==="break"||h==="catch"||h==="throw"||h==="const"||h==="yield"||h==="class"||h==="super";case 6:return h==="return"||h==="typeof"||h==="delete"||h==="switch"||h==="export"||h==="import";case 7:return h==="default"||h==="finally"||h==="extends";case 8:return h==="function"||h==="continue"||h==="debugger";case 10:return h==="instanceof";default:return!1}}function s(h,f){return h==="null"||h==="true"||h==="false"||r(h,f)}function i(h,f){return h==="null"||h==="true"||h==="false"||n(h,f)}function o(h){return h==="eval"||h==="arguments"}function a(h){var f,p,m;if(h.length===0||(m=h.charCodeAt(0),!t.isIdentifierStartES5(m)))return!1;for(f=1,p=h.length;f<p;++f)if(m=h.charCodeAt(f),!t.isIdentifierPartES5(m))return!1;return!0}function u(h,f){return(h-55296)*1024+(f-56320)+65536}function l(h){var f,p,m,E,A;if(h.length===0)return!1;for(A=t.isIdentifierStartES6,f=0,p=h.length;f<p;++f){if(m=h.charCodeAt(f),55296<=m&&m<=56319){if(++f,f>=p||(E=h.charCodeAt(f),!(56320<=E&&E<=57343)))return!1;m=u(m,E)}if(!A(m))return!1;A=t.isIdentifierPartES6}return!0}function c(h,f){return a(h)&&!s(h,f)}function d(h,f){return l(h)&&!i(h,f)}TK.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:l,isIdentifierES5:c,isIdentifierES6:d}})();var wme=TK.exports;(function(){w1.ast=vme,w1.code=SK,w1.keyword=wme})();var Jg={},_T={},gb={},vb={},DF;function _me(){if(DF)return vb;DF=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return vb.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},vb.decode=function(e){var r=65,n=90,s=97,i=122,o=48,a=57,u=43,l=47,c=26,d=52;return r<=e&&e<=n?e-r:s<=e&&e<=i?e-s+c:o<=e&&e<=a?e-o+d:e==u?62:e==l?63:-1},vb}var xF;function DK(){if(xF)return gb;xF=1;var t=_me(),e=5,r=1<<e,n=r-1,s=r;function i(a){return a<0?(-a<<1)+1:(a<<1)+0}function o(a){var u=(a&1)===1,l=a>>1;return u?-l:l}return gb.encode=function(u){var l="",c,d=i(u);do c=d&n,d>>>=e,d>0&&(c|=s),l+=t.encode(c);while(d>0);return l},gb.decode=function(u,l,c){var d=u.length,h=0,f=0,p,m;do{if(l>=d)throw new Error("Expected more digits in base 64 VLQ value.");if(m=t.decode(u.charCodeAt(l++)),m===-1)throw new Error("Invalid base64 digit: "+u.charAt(l-1));p=!!(m&s),m&=n,h=h+(m<<f),f+=e}while(p);c.value=o(h),c.rest=l},gb}var bT={},PF;function Mw(){return PF||(PF=1,function(t){function e(v,S,x){if(S in v)return v[S];if(arguments.length===3)return x;throw new Error('"'+S+'" is a required argument.')}t.getArg=e;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function s(v){var S=v.match(r);return S?{scheme:S[1],auth:S[2],host:S[3],port:S[4],path:S[5]}:null}t.urlParse=s;function i(v){var S="";return v.scheme&&(S+=v.scheme+":"),S+="//",v.auth&&(S+=v.auth+"@"),v.host&&(S+=v.host),v.port&&(S+=":"+v.port),v.path&&(S+=v.path),S}t.urlGenerate=i;function o(v){var S=v,x=s(v);if(x){if(!x.path)return v;S=x.path}for(var D=t.isAbsolute(S),w=S.split(/\/+/),b,T=0,P=w.length-1;P>=0;P--)b=w[P],b==="."?w.splice(P,1):b===".."?T++:T>0&&(b===""?(w.splice(P+1,T),T=0):(w.splice(P,2),T--));return S=w.join("/"),S===""&&(S=D?"/":"."),x?(x.path=S,i(x)):S}t.normalize=o;function a(v,S){v===""&&(v="."),S===""&&(S=".");var x=s(S),D=s(v);if(D&&(v=D.path||"/"),x&&!x.scheme)return D&&(x.scheme=D.scheme),i(x);if(x||S.match(n))return S;if(D&&!D.host&&!D.path)return D.host=S,i(D);var w=S.charAt(0)==="/"?S:o(v.replace(/\/+$/,"")+"/"+S);return D?(D.path=w,i(D)):w}t.join=a,t.isAbsolute=function(v){return v.charAt(0)==="/"||r.test(v)};function u(v,S){v===""&&(v="."),v=v.replace(/\/$/,"");for(var x=0;S.indexOf(v+"/")!==0;){var D=v.lastIndexOf("/");if(D<0||(v=v.slice(0,D),v.match(/^([^\/]+:\/)?\/*$/)))return S;++x}return Array(x+1).join("../")+S.substr(v.length+1)}t.relative=u;var l=function(){var v=Object.create(null);return!("__proto__"in v)}();function c(v){return v}function d(v){return f(v)?"$"+v:v}t.toSetString=l?c:d;function h(v){return f(v)?v.slice(1):v}t.fromSetString=l?c:h;function f(v){if(!v)return!1;var S=v.length;if(S<9||v.charCodeAt(S-1)!==95||v.charCodeAt(S-2)!==95||v.charCodeAt(S-3)!==111||v.charCodeAt(S-4)!==116||v.charCodeAt(S-5)!==111||v.charCodeAt(S-6)!==114||v.charCodeAt(S-7)!==112||v.charCodeAt(S-8)!==95||v.charCodeAt(S-9)!==95)return!1;for(var x=S-10;x>=0;x--)if(v.charCodeAt(x)!==36)return!1;return!0}function p(v,S,x){var D=E(v.source,S.source);return D!==0||(D=v.originalLine-S.originalLine,D!==0)||(D=v.originalColumn-S.originalColumn,D!==0||x)||(D=v.generatedColumn-S.generatedColumn,D!==0)||(D=v.generatedLine-S.generatedLine,D!==0)?D:E(v.name,S.name)}t.compareByOriginalPositions=p;function m(v,S,x){var D=v.generatedLine-S.generatedLine;return D!==0||(D=v.generatedColumn-S.generatedColumn,D!==0||x)||(D=E(v.source,S.source),D!==0)||(D=v.originalLine-S.originalLine,D!==0)||(D=v.originalColumn-S.originalColumn,D!==0)?D:E(v.name,S.name)}t.compareByGeneratedPositionsDeflated=m;function E(v,S){return v===S?0:v===null?1:S===null?-1:v>S?1:-1}function A(v,S){var x=v.generatedLine-S.generatedLine;return x!==0||(x=v.generatedColumn-S.generatedColumn,x!==0)||(x=E(v.source,S.source),x!==0)||(x=v.originalLine-S.originalLine,x!==0)||(x=v.originalColumn-S.originalColumn,x!==0)?x:E(v.name,S.name)}t.compareByGeneratedPositionsInflated=A;function _(v){return JSON.parse(v.replace(/^\)]}'[^\n]*\n/,""))}t.parseSourceMapInput=_;function g(v,S,x){if(S=S||"",v&&(v[v.length-1]!=="/"&&S[0]!=="/"&&(v+="/"),S=v+S),x){var D=s(x);if(!D)throw new Error("sourceMapURL could not be parsed");if(D.path){var w=D.path.lastIndexOf("/");w>=0&&(D.path=D.path.substring(0,w+1))}S=a(i(D),S)}return o(S)}t.computeSourceURL=g}(bT)),bT}var ET={},CF;function xK(){if(CF)return ET;CF=1;var t=Mw(),e=Object.prototype.hasOwnProperty,r=typeof Map<"u";function n(){this._array=[],this._set=r?new Map:Object.create(null)}return n.fromArray=function(i,o){for(var a=new n,u=0,l=i.length;u<l;u++)a.add(i[u],o);return a},n.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(i,o){var a=r?i:t.toSetString(i),u=r?this.has(i):e.call(this._set,a),l=this._array.length;(!u||o)&&this._array.push(i),u||(r?this._set.set(i,l):this._set[a]=l)},n.prototype.has=function(i){if(r)return this._set.has(i);var o=t.toSetString(i);return e.call(this._set,o)},n.prototype.indexOf=function(i){if(r){var o=this._set.get(i);if(o>=0)return o}else{var a=t.toSetString(i);if(e.call(this._set,a))return this._set[a]}throw new Error('"'+i+'" is not in the set.')},n.prototype.at=function(i){if(i>=0&&i<this._array.length)return this._array[i];throw new Error("No element indexed by "+i)},n.prototype.toArray=function(){return this._array.slice()},ET.ArraySet=n,ET}var AT={},IF;function bme(){if(IF)return AT;IF=1;var t=Mw();function e(n,s){var i=n.generatedLine,o=s.generatedLine,a=n.generatedColumn,u=s.generatedColumn;return o>i||o==i&&u>=a||t.compareByGeneratedPositionsInflated(n,s)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return r.prototype.unsortedForEach=function(s,i){this._array.forEach(s,i)},r.prototype.add=function(s){e(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},AT.MappingList=r,AT}var kF;function PK(){if(kF)return _T;kF=1;var t=DK(),e=Mw(),r=xK().ArraySet,n=bme().MappingList;function s(i){i||(i={}),this._file=e.getArg(i,"file",null),this._sourceRoot=e.getArg(i,"sourceRoot",null),this._skipValidation=e.getArg(i,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new n,this._sourcesContents=null}return s.prototype._version=3,s.fromSourceMap=function(o){var a=o.sourceRoot,u=new s({file:o.file,sourceRoot:a});return o.eachMapping(function(l){var c={generated:{line:l.generatedLine,column:l.generatedColumn}};l.source!=null&&(c.source=l.source,a!=null&&(c.source=e.relative(a,c.source)),c.original={line:l.originalLine,column:l.originalColumn},l.name!=null&&(c.name=l.name)),u.addMapping(c)}),o.sources.forEach(function(l){var c=l;a!==null&&(c=e.relative(a,l)),u._sources.has(c)||u._sources.add(c);var d=o.sourceContentFor(l);d!=null&&u.setSourceContent(l,d)}),u},s.prototype.addMapping=function(o){var a=e.getArg(o,"generated"),u=e.getArg(o,"original",null),l=e.getArg(o,"source",null),c=e.getArg(o,"name",null);this._skipValidation||this._validateMapping(a,u,l,c),l!=null&&(l=String(l),this._sources.has(l)||this._sources.add(l)),c!=null&&(c=String(c),this._names.has(c)||this._names.add(c)),this._mappings.add({generatedLine:a.line,generatedColumn:a.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:l,name:c})},s.prototype.setSourceContent=function(o,a){var u=o;this._sourceRoot!=null&&(u=e.relative(this._sourceRoot,u)),a!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(u)]=a):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(u)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(o,a,u){var l=a;if(a==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);l=o.file}var c=this._sourceRoot;c!=null&&(l=e.relative(c,l));var d=new r,h=new r;this._mappings.unsortedForEach(function(f){if(f.source===l&&f.originalLine!=null){var p=o.originalPositionFor({line:f.originalLine,column:f.originalColumn});p.source!=null&&(f.source=p.source,u!=null&&(f.source=e.join(u,f.source)),c!=null&&(f.source=e.relative(c,f.source)),f.originalLine=p.line,f.originalColumn=p.column,p.name!=null&&(f.name=p.name))}var m=f.source;m!=null&&!d.has(m)&&d.add(m);var E=f.name;E!=null&&!h.has(E)&&h.add(E)},this),this._sources=d,this._names=h,o.sources.forEach(function(f){var p=o.sourceContentFor(f);p!=null&&(u!=null&&(f=e.join(u,f)),c!=null&&(f=e.relative(c,f)),this.setSourceContent(f,p))},this)},s.prototype._validateMapping=function(o,a,u,l){if(a&&typeof a.line!="number"&&typeof a.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!a&&!u&&!l)){if(o&&"line"in o&&"column"in o&&a&&"line"in a&&"column"in a&&o.line>0&&o.column>=0&&a.line>0&&a.column>=0&&u)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:u,original:a,name:l}))}},s.prototype._serializeMappings=function(){for(var o=0,a=1,u=0,l=0,c=0,d=0,h="",f,p,m,E,A=this._mappings.toArray(),_=0,g=A.length;_<g;_++){if(p=A[_],f="",p.generatedLine!==a)for(o=0;p.generatedLine!==a;)f+=";",a++;else if(_>0){if(!e.compareByGeneratedPositionsInflated(p,A[_-1]))continue;f+=","}f+=t.encode(p.generatedColumn-o),o=p.generatedColumn,p.source!=null&&(E=this._sources.indexOf(p.source),f+=t.encode(E-d),d=E,f+=t.encode(p.originalLine-1-l),l=p.originalLine-1,f+=t.encode(p.originalColumn-u),u=p.originalColumn,p.name!=null&&(m=this._names.indexOf(p.name),f+=t.encode(m-c),c=m)),h+=f}return h},s.prototype._generateSourcesContent=function(o,a){return o.map(function(u){if(!this._sourcesContents)return null;a!=null&&(u=e.relative(a,u));var l=e.toSetString(u);return Object.prototype.hasOwnProperty.call(this._sourcesContents,l)?this._sourcesContents[l]:null},this)},s.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},_T.SourceMapGenerator=s,_T}var Xg={},ST={},$F;function Eme(){return $F||($F=1,function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(r,n,s,i,o,a){var u=Math.floor((n-r)/2)+r,l=o(s,i[u],!0);return l===0?u:l>0?n-u>1?e(u,n,s,i,o,a):a==t.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-r>1?e(r,u,s,i,o,a):a==t.LEAST_UPPER_BOUND?u:r<0?-1:r}t.search=function(n,s,i,o){if(s.length===0)return-1;var a=e(-1,s.length,n,s,i,o||t.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&i(s[a],s[a-1],!0)===0;)--a;return a}}(ST)),ST}var TT={},OF;function Ame(){if(OF)return TT;OF=1;function t(n,s,i){var o=n[s];n[s]=n[i],n[i]=o}function e(n,s){return Math.round(n+Math.random()*(s-n))}function r(n,s,i,o){if(i<o){var a=e(i,o),u=i-1;t(n,a,o);for(var l=n[o],c=i;c<o;c++)s(n[c],l)<=0&&(u+=1,t(n,u,c));t(n,u+1,c);var d=u+1;r(n,s,i,d-1),r(n,s,d+1,o)}}return TT.quickSort=function(n,s){r(n,s,0,n.length-1)},TT}var RF;function Sme(){if(RF)return Xg;RF=1;var t=Mw(),e=Eme(),r=xK().ArraySet,n=DK(),s=Ame().quickSort;function i(l,c){var d=l;return typeof l=="string"&&(d=t.parseSourceMapInput(l)),d.sections!=null?new u(d,c):new o(d,c)}i.fromSourceMap=function(l,c){return o.fromSourceMap(l,c)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(c,d){var h=c.charAt(d);return h===";"||h===","},i.prototype._parseMappings=function(c,d){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(c,d,h){var f=d||null,p=h||i.GENERATED_ORDER,m;switch(p){case i.GENERATED_ORDER:m=this._generatedMappings;break;case i.ORIGINAL_ORDER:m=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var E=this.sourceRoot;m.map(function(A){var _=A.source===null?null:this._sources.at(A.source);return _=t.computeSourceURL(E,_,this._sourceMapURL),{source:_,generatedLine:A.generatedLine,generatedColumn:A.generatedColumn,originalLine:A.originalLine,originalColumn:A.originalColumn,name:A.name===null?null:this._names.at(A.name)}},this).forEach(c,f)},i.prototype.allGeneratedPositionsFor=function(c){var d=t.getArg(c,"line"),h={source:t.getArg(c,"source"),originalLine:d,originalColumn:t.getArg(c,"column",0)};if(h.source=this._findSourceIndex(h.source),h.source<0)return[];var f=[],p=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(p>=0){var m=this._originalMappings[p];if(c.column===void 0)for(var E=m.originalLine;m&&m.originalLine===E;)f.push({line:t.getArg(m,"generatedLine",null),column:t.getArg(m,"generatedColumn",null),lastColumn:t.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++p];else for(var A=m.originalColumn;m&&m.originalLine===d&&m.originalColumn==A;)f.push({line:t.getArg(m,"generatedLine",null),column:t.getArg(m,"generatedColumn",null),lastColumn:t.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++p]}return f},Xg.SourceMapConsumer=i;function o(l,c){var d=l;typeof l=="string"&&(d=t.parseSourceMapInput(l));var h=t.getArg(d,"version"),f=t.getArg(d,"sources"),p=t.getArg(d,"names",[]),m=t.getArg(d,"sourceRoot",null),E=t.getArg(d,"sourcesContent",null),A=t.getArg(d,"mappings"),_=t.getArg(d,"file",null);if(h!=this._version)throw new Error("Unsupported version: "+h);m&&(m=t.normalize(m)),f=f.map(String).map(t.normalize).map(function(g){return m&&t.isAbsolute(m)&&t.isAbsolute(g)?t.relative(m,g):g}),this._names=r.fromArray(p.map(String),!0),this._sources=r.fromArray(f,!0),this._absoluteSources=this._sources.toArray().map(function(g){return t.computeSourceURL(m,g,c)}),this.sourceRoot=m,this.sourcesContent=E,this._mappings=A,this._sourceMapURL=c,this.file=_}o.prototype=Object.create(i.prototype),o.prototype.consumer=i,o.prototype._findSourceIndex=function(l){var c=l;if(this.sourceRoot!=null&&(c=t.relative(this.sourceRoot,c)),this._sources.has(c))return this._sources.indexOf(c);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==l)return d;return-1},o.fromSourceMap=function(c,d){var h=Object.create(o.prototype),f=h._names=r.fromArray(c._names.toArray(),!0),p=h._sources=r.fromArray(c._sources.toArray(),!0);h.sourceRoot=c._sourceRoot,h.sourcesContent=c._generateSourcesContent(h._sources.toArray(),h.sourceRoot),h.file=c._file,h._sourceMapURL=d,h._absoluteSources=h._sources.toArray().map(function(x){return t.computeSourceURL(h.sourceRoot,x,d)});for(var m=c._mappings.toArray().slice(),E=h.__generatedMappings=[],A=h.__originalMappings=[],_=0,g=m.length;_<g;_++){var v=m[_],S=new a;S.generatedLine=v.generatedLine,S.generatedColumn=v.generatedColumn,v.source&&(S.source=p.indexOf(v.source),S.originalLine=v.originalLine,S.originalColumn=v.originalColumn,v.name&&(S.name=f.indexOf(v.name)),A.push(S)),E.push(S)}return s(h.__originalMappings,t.compareByOriginalPositions),h},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}o.prototype._parseMappings=function(c,d){for(var h=1,f=0,p=0,m=0,E=0,A=0,_=c.length,g=0,v={},S={},x=[],D=[],w,b,T,P,C;g<_;)if(c.charAt(g)===";")h++,g++,f=0;else if(c.charAt(g)===",")g++;else{for(w=new a,w.generatedLine=h,P=g;P<_&&!this._charIsMappingSeparator(c,P);P++);if(b=c.slice(g,P),T=v[b],T)g+=b.length;else{for(T=[];g<P;)n.decode(c,g,S),C=S.value,g=S.rest,T.push(C);if(T.length===2)throw new Error("Found a source, but no line and column");if(T.length===3)throw new Error("Found a source and line, but no column");v[b]=T}w.generatedColumn=f+T[0],f=w.generatedColumn,T.length>1&&(w.source=E+T[1],E+=T[1],w.originalLine=p+T[2],p=w.originalLine,w.originalLine+=1,w.originalColumn=m+T[3],m=w.originalColumn,T.length>4&&(w.name=A+T[4],A+=T[4])),D.push(w),typeof w.originalLine=="number"&&x.push(w)}s(D,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=D,s(x,t.compareByOriginalPositions),this.__originalMappings=x},o.prototype._findMapping=function(c,d,h,f,p,m){if(c[h]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+c[h]);if(c[f]<0)throw new TypeError("Column must be greater than or equal to 0, got "+c[f]);return e.search(c,d,p,m)},o.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var d=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var h=this._generatedMappings[c+1];if(d.generatedLine===h.generatedLine){d.lastGeneratedColumn=h.generatedColumn-1;continue}}d.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(c){var d={generatedLine:t.getArg(c,"line"),generatedColumn:t.getArg(c,"column")},h=this._findMapping(d,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(h>=0){var f=this._generatedMappings[h];if(f.generatedLine===d.generatedLine){var p=t.getArg(f,"source",null);p!==null&&(p=this._sources.at(p),p=t.computeSourceURL(this.sourceRoot,p,this._sourceMapURL));var m=t.getArg(f,"name",null);return m!==null&&(m=this._names.at(m)),{source:p,line:t.getArg(f,"originalLine",null),column:t.getArg(f,"originalColumn",null),name:m}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(c){return c==null}):!1},o.prototype.sourceContentFor=function(c,d){if(!this.sourcesContent)return null;var h=this._findSourceIndex(c);if(h>=0)return this.sourcesContent[h];var f=c;this.sourceRoot!=null&&(f=t.relative(this.sourceRoot,f));var p;if(this.sourceRoot!=null&&(p=t.urlParse(this.sourceRoot))){var m=f.replace(/^file:\/\//,"");if(p.scheme=="file"&&this._sources.has(m))return this.sourcesContent[this._sources.indexOf(m)];if((!p.path||p.path=="/")&&this._sources.has("/"+f))return this.sourcesContent[this._sources.indexOf("/"+f)]}if(d)return null;throw new Error('"'+f+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(c){var d=t.getArg(c,"source");if(d=this._findSourceIndex(d),d<0)return{line:null,column:null,lastColumn:null};var h={source:d,originalLine:t.getArg(c,"line"),originalColumn:t.getArg(c,"column")},f=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(f>=0){var p=this._originalMappings[f];if(p.source===h.source)return{line:t.getArg(p,"generatedLine",null),column:t.getArg(p,"generatedColumn",null),lastColumn:t.getArg(p,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Xg.BasicSourceMapConsumer=o;function u(l,c){var d=l;typeof l=="string"&&(d=t.parseSourceMapInput(l));var h=t.getArg(d,"version"),f=t.getArg(d,"sections");if(h!=this._version)throw new Error("Unsupported version: "+h);this._sources=new r,this._names=new r;var p={line:-1,column:0};this._sections=f.map(function(m){if(m.url)throw new Error("Support for url field in sections not implemented.");var E=t.getArg(m,"offset"),A=t.getArg(E,"line"),_=t.getArg(E,"column");if(A<p.line||A===p.line&&_<p.column)throw new Error("Section offsets must be ordered and non-overlapping.");return p=E,{generatedOffset:{generatedLine:A+1,generatedColumn:_+1},consumer:new i(t.getArg(m,"map"),c)}})}return u.prototype=Object.create(i.prototype),u.prototype.constructor=i,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var l=[],c=0;c<this._sections.length;c++)for(var d=0;d<this._sections[c].consumer.sources.length;d++)l.push(this._sections[c].consumer.sources[d]);return l}}),u.prototype.originalPositionFor=function(c){var d={generatedLine:t.getArg(c,"line"),generatedColumn:t.getArg(c,"column")},h=e.search(d,this._sections,function(p,m){var E=p.generatedLine-m.generatedOffset.generatedLine;return E||p.generatedColumn-m.generatedOffset.generatedColumn}),f=this._sections[h];return f?f.consumer.originalPositionFor({line:d.generatedLine-(f.generatedOffset.generatedLine-1),column:d.generatedColumn-(f.generatedOffset.generatedLine===d.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(c,d){for(var h=0;h<this._sections.length;h++){var f=this._sections[h],p=f.consumer.sourceContentFor(c,!0);if(p)return p}if(d)return null;throw new Error('"'+c+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(c){for(var d=0;d<this._sections.length;d++){var h=this._sections[d];if(h.consumer._findSourceIndex(t.getArg(c,"source"))!==-1){var f=h.consumer.generatedPositionFor(c);if(f){var p={line:f.line+(h.generatedOffset.generatedLine-1),column:f.column+(h.generatedOffset.generatedLine===f.line?h.generatedOffset.generatedColumn-1:0)};return p}}}return{line:null,column:null}},u.prototype._parseMappings=function(c,d){this.__generatedMappings=[],this.__originalMappings=[];for(var h=0;h<this._sections.length;h++)for(var f=this._sections[h],p=f.consumer._generatedMappings,m=0;m<p.length;m++){var E=p[m],A=f.consumer._sources.at(E.source);A=t.computeSourceURL(f.consumer.sourceRoot,A,this._sourceMapURL),this._sources.add(A),A=this._sources.indexOf(A);var _=null;E.name&&(_=f.consumer._names.at(E.name),this._names.add(_),_=this._names.indexOf(_));var g={source:A,generatedLine:E.generatedLine+(f.generatedOffset.generatedLine-1),generatedColumn:E.generatedColumn+(f.generatedOffset.generatedLine===E.generatedLine?f.generatedOffset.generatedColumn-1:0),originalLine:E.originalLine,originalColumn:E.originalColumn,name:_};this.__generatedMappings.push(g),typeof g.originalLine=="number"&&this.__originalMappings.push(g)}s(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),s(this.__originalMappings,t.compareByOriginalPositions)},Xg.IndexedSourceMapConsumer=u,Xg}var DT={},NF;function Tme(){if(NF)return DT;NF=1;var t=PK().SourceMapGenerator,e=Mw(),r=/(\r?\n)/,n=10,s="$$$isSourceNode$$$";function i(o,a,u,l,c){this.children=[],this.sourceContents={},this.line=o??null,this.column=a??null,this.source=u??null,this.name=c??null,this[s]=!0,l!=null&&this.add(l)}return i.fromStringWithSourceMap=function(a,u,l){var c=new i,d=a.split(r),h=0,f=function(){var _=v(),g=v()||"";return _+g;function v(){return h<d.length?d[h++]:void 0}},p=1,m=0,E=null;return u.eachMapping(function(_){if(E!==null)if(p<_.generatedLine)A(E,f()),p++,m=0;else{var g=d[h]||"",v=g.substr(0,_.generatedColumn-m);d[h]=g.substr(_.generatedColumn-m),m=_.generatedColumn,A(E,v),E=_;return}for(;p<_.generatedLine;)c.add(f()),p++;if(m<_.generatedColumn){var g=d[h]||"";c.add(g.substr(0,_.generatedColumn)),d[h]=g.substr(_.generatedColumn),m=_.generatedColumn}E=_},this),h<d.length&&(E&&A(E,f()),c.add(d.splice(h).join(""))),u.sources.forEach(function(_){var g=u.sourceContentFor(_);g!=null&&(l!=null&&(_=e.join(l,_)),c.setSourceContent(_,g))}),c;function A(_,g){if(_===null||_.source===void 0)c.add(g);else{var v=l?e.join(l,_.source):_.source;c.add(new i(_.originalLine,_.originalColumn,v,g,_.name))}}},i.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(u){this.add(u)},this);else if(a[s]||typeof a=="string")a&&this.children.push(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.prepend=function(a){if(Array.isArray(a))for(var u=a.length-1;u>=0;u--)this.prepend(a[u]);else if(a[s]||typeof a=="string")this.children.unshift(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.walk=function(a){for(var u,l=0,c=this.children.length;l<c;l++)u=this.children[l],u[s]?u.walk(a):u!==""&&a(u,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(a){var u,l,c=this.children.length;if(c>0){for(u=[],l=0;l<c-1;l++)u.push(this.children[l]),u.push(a);u.push(this.children[l]),this.children=u}return this},i.prototype.replaceRight=function(a,u){var l=this.children[this.children.length-1];return l[s]?l.replaceRight(a,u):typeof l=="string"?this.children[this.children.length-1]=l.replace(a,u):this.children.push("".replace(a,u)),this},i.prototype.setSourceContent=function(a,u){this.sourceContents[e.toSetString(a)]=u},i.prototype.walkSourceContents=function(a){for(var u=0,l=this.children.length;u<l;u++)this.children[u][s]&&this.children[u].walkSourceContents(a);for(var c=Object.keys(this.sourceContents),u=0,l=c.length;u<l;u++)a(e.fromSetString(c[u]),this.sourceContents[c[u]])},i.prototype.toString=function(){var a="";return this.walk(function(u){a+=u}),a},i.prototype.toStringWithSourceMap=function(a){var u={code:"",line:1,column:0},l=new t(a),c=!1,d=null,h=null,f=null,p=null;return this.walk(function(m,E){u.code+=m,E.source!==null&&E.line!==null&&E.column!==null?((d!==E.source||h!==E.line||f!==E.column||p!==E.name)&&l.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:u.line,column:u.column},name:E.name}),d=E.source,h=E.line,f=E.column,p=E.name,c=!0):c&&(l.addMapping({generated:{line:u.line,column:u.column}}),d=null,c=!1);for(var A=0,_=m.length;A<_;A++)m.charCodeAt(A)===n?(u.line++,u.column=0,A+1===_?(d=null,c=!1):c&&l.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:u.line,column:u.column},name:E.name})):u.column++}),this.walkSourceContents(function(m,E){l.setSourceContent(m,E)}),{code:u.code,map:l}},DT.SourceNode=i,DT}var BF;function Dme(){return BF||(BF=1,Jg.SourceMapGenerator=PK().SourceMapGenerator,Jg.SourceMapConsumer=Sme().SourceMapConsumer,Jg.SourceNode=Tme().SourceNode),Jg}const xme="escodegen",Pme="ECMAScript code generator",Cme="http://github.com/estools/escodegen",Ime="escodegen.js",kme={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},$me=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],Ome="1.14.3",Rme={node:">=4.0"},Nme=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],Bme={type:"git",url:"http://github.com/estools/escodegen.git"},Fme={estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},Mme={"source-map":"~0.6.1"},jme={acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},Ume="BSD-2-Clause",Lme={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},Kme={name:xme,description:Pme,homepage:Cme,main:Ime,bin:kme,files:$me,version:Ome,engines:Rme,maintainers:Nme,repository:Bme,dependencies:Fme,optionalDependencies:Mme,devDependencies:jme,license:Ume,scripts:Lme};(function(t){(function(){var e,r,n,s,i,o,a,u,l,c,d,h,f,p,m,E,A,_,g,v,S,x,D,w,b,T;i=bK,o=w1,e=i.Syntax;function P(O){return Ct.Expression.hasOwnProperty(O.type)}function C(O){return Ct.Statement.hasOwnProperty(O.type)}r={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},n={"||":r.LogicalOR,"&&":r.LogicalAND,"|":r.BitwiseOR,"^":r.BitwiseXOR,"&":r.BitwiseAND,"==":r.Equality,"!=":r.Equality,"===":r.Equality,"!==":r.Equality,is:r.Equality,isnt:r.Equality,"<":r.Relational,">":r.Relational,"<=":r.Relational,">=":r.Relational,in:r.Relational,instanceof:r.Relational,"<<":r.BitwiseSHIFT,">>":r.BitwiseSHIFT,">>>":r.BitwiseSHIFT,"+":r.Additive,"-":r.Additive,"*":r.Multiplicative,"%":r.Multiplicative,"/":r.Multiplicative,"**":r.Exponentiation};var k=1,K=2,L=4,q=8,se=16,X=32,re=K|L,W=k|K,B=k|K|L,te=k,z=L,$=k|L,F=k,ee=k|X,ne=0,le=k|se,me=k|q;function ve(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Pe(O,Z){var H="";for(Z|=0;Z>0;Z>>>=1,O+=O)Z&1&&(H+=O);return H}function Ue(O){return/[\r\n]/g.test(O)}function M(O){var Z=O.length;return Z&&o.code.isLineTerminator(O.charCodeAt(Z-1))}function V(O,Z){var H;for(H in Z)Z.hasOwnProperty(H)&&(O[H]=Z[H]);return O}function oe(O,Z){var H,Y;function ae(Te){return typeof Te=="object"&&Te instanceof Object&&!(Te instanceof RegExp)}for(H in Z)Z.hasOwnProperty(H)&&(Y=Z[H],ae(Y)?ae(O[H])?oe(O[H],Y):O[H]=oe({},Y):O[H]=Y);return O}function j(O){var Z,H,Y,ae,Te;if(O!==O)throw new Error("Numeric literal whose value is NaN");if(O<0||O===0&&1/O<0)throw new Error("Numeric literal whose value is negative");if(O===1/0)return l?"null":c?"1e400":"1e+400";if(Z=""+O,!c||Z.length<3)return Z;for(H=Z.indexOf("."),!l&&Z.charCodeAt(0)===48&&H===1&&(H=0,Z=Z.slice(1)),Y=Z,Z=Z.replace("e+","e"),ae=0,(Te=Y.indexOf("e"))>0&&(ae=+Y.slice(Te+1),Y=Y.slice(0,Te)),H>=0&&(ae-=Y.length-H-1,Y=+(Y.slice(0,H)+Y.slice(H+1))+""),Te=0;Y.charCodeAt(Y.length+Te-1)===48;)--Te;return Te!==0&&(ae-=Te,Y=Y.slice(0,Te)),ae!==0&&(Y+="e"+ae),(Y.length<Z.length||d&&O>1e12&&Math.floor(O)===O&&(Y="0x"+O.toString(16)).length<Z.length)&&+Y===O&&(Z=Y),Z}function I(O,Z){return(O&-2)===8232?(Z?"u":"\\u")+(O===8232?"2028":"2029"):O===10||O===13?(Z?"":"\\")+(O===10?"n":"r"):String.fromCharCode(O)}function N(O){var Z,H,Y,ae,Te,xe,$e,qe;if(H=O.toString(),O.source){if(Z=H.match(/\/([^/]*)$/),!Z)return H;for(Y=Z[1],H="",$e=!1,qe=!1,ae=0,Te=O.source.length;ae<Te;++ae)xe=O.source.charCodeAt(ae),qe?(H+=I(xe,qe),qe=!1):($e?xe===93&&($e=!1):xe===47?H+="\\":xe===91&&($e=!0),H+=I(xe,qe),qe=xe===92);return"/"+H+"/"+Y}return H}function Q(O,Z){var H;return O===8?"\\b":O===12?"\\f":O===9?"\\t":(H=O.toString(16).toUpperCase(),l||O>255?"\\u"+"0000".slice(H.length)+H:O===0&&!o.code.isDecimalDigit(Z)?"\\0":O===11?"\\x0B":"\\x"+"00".slice(H.length)+H)}function ce(O){if(O===92)return"\\\\";if(O===10)return"\\n";if(O===13)return"\\r";if(O===8232)return"\\u2028";if(O===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function pe(O){var Z,H,Y,ae;for(ae=h==="double"?'"':"'",Z=0,H=O.length;Z<H;++Z)if(Y=O.charCodeAt(Z),Y===39){ae='"';break}else if(Y===34){ae="'";break}else Y===92&&++Z;return ae+O+ae}function he(O){var Z="",H,Y,ae,Te=0,xe=0,$e,qe;for(H=0,Y=O.length;H<Y;++H){if(ae=O.charCodeAt(H),ae===39)++Te;else if(ae===34)++xe;else if(ae===47&&l)Z+="\\";else if(o.code.isLineTerminator(ae)||ae===92){Z+=ce(ae);continue}else if(!o.code.isIdentifierPartES5(ae)&&(l&&ae<32||!l&&!f&&(ae<32||ae>126))){Z+=Q(ae,O.charCodeAt(H+1));continue}Z+=String.fromCharCode(ae)}if($e=!(h==="double"||h==="auto"&&xe<Te),qe=$e?"'":'"',!($e?Te:xe))return qe+Z+qe;for(O=Z,Z=qe,H=0,Y=O.length;H<Y;++H)ae=O.charCodeAt(H),(ae===39&&$e||ae===34&&!$e)&&(Z+="\\"),Z+=String.fromCharCode(ae);return Z+qe}function Ce(O){var Z,H,Y,ae="";for(Z=0,H=O.length;Z<H;++Z)Y=O[Z],ae+=Array.isArray(Y)?Ce(Y):Y;return ae}function _e(O,Z){if(!x)return Array.isArray(O)?Ce(O):O;if(Z==null){if(O instanceof s)return O;Z={}}return Z.loc==null?new s(null,null,x,O,Z.name||null):new s(Z.loc.start.line,Z.loc.start.column,x===!0?Z.loc.source||null:x,O,Z.name||null)}function G(){return m||" "}function J(O,Z){var H,Y,ae,Te;return H=_e(O).toString(),H.length===0?[Z]:(Y=_e(Z).toString(),Y.length===0?[O]:(ae=H.charCodeAt(H.length-1),Te=Y.charCodeAt(0),(ae===43||ae===45)&&ae===Te||o.code.isIdentifierPartES5(ae)&&o.code.isIdentifierPartES5(Te)||ae===47&&Te===105?[O,G(),Z]:o.code.isWhiteSpace(ae)||o.code.isLineTerminator(ae)||o.code.isWhiteSpace(Te)||o.code.isLineTerminator(Te)?[O,Z]:[O,m,Z]))}function ge(O){return[a,O]}function be(O){var Z;Z=a,a+=u,O(a),a=Z}function ke(O){var Z;for(Z=O.length-1;Z>=0&&!o.code.isLineTerminator(O.charCodeAt(Z));--Z);return O.length-1-Z}function At(O,Z){var H,Y,ae,Te,xe,$e,qe,Nt;for(H=O.split(/\r\n|[\r\n]/),$e=Number.MAX_VALUE,Y=1,ae=H.length;Y<ae;++Y){for(Te=H[Y],xe=0;xe<Te.length&&o.code.isWhiteSpace(Te.charCodeAt(xe));)++xe;$e>xe&&($e=xe)}for(typeof Z<"u"?(qe=a,H[1][$e]==="*"&&(Z+=" "),a=Z):($e&1&&--$e,qe=a),Y=1,ae=H.length;Y<ae;++Y)Nt=_e(ge(H[Y].slice($e))),H[Y]=x?Nt.join(""):Nt;return a=qe,H.join(`
`)}function kt(O,Z){if(O.type==="Line"){if(M(O.value))return"//"+O.value;var H="//"+O.value;return w||(H+=`
`),H}return v.format.indent.adjustMultilineComment&&/[\n\r]/.test(O.value)?At("/*"+O.value+"*/",Z):"/*"+O.value+"*/"}function $r(O,Z){var H,Y,ae,Te,xe,$e,qe,Nt,de,ue,fe,Ae,Ee,We;if(O.leadingComments&&O.leadingComments.length>0){if(Te=Z,w){for(ae=O.leadingComments[0],Z=[],Nt=ae.extendedRange,de=ae.range,fe=D.substring(Nt[0],de[0]),We=(fe.match(/\n/g)||[]).length,We>0?(Z.push(Pe(`
`,We)),Z.push(ge(kt(ae)))):(Z.push(fe),Z.push(kt(ae))),ue=de,H=1,Y=O.leadingComments.length;H<Y;H++)ae=O.leadingComments[H],de=ae.range,Ae=D.substring(ue[1],de[0]),We=(Ae.match(/\n/g)||[]).length,Z.push(Pe(`
`,We)),Z.push(ge(kt(ae))),ue=de;Ee=D.substring(de[1],Nt[1]),We=(Ee.match(/\n/g)||[]).length,Z.push(Pe(`
`,We))}else for(ae=O.leadingComments[0],Z=[],_&&O.type===e.Program&&O.body.length===0&&Z.push(`
`),Z.push(kt(ae)),M(_e(Z).toString())||Z.push(`
`),H=1,Y=O.leadingComments.length;H<Y;++H)ae=O.leadingComments[H],qe=[kt(ae)],M(_e(qe).toString())||qe.push(`
`),Z.push(ge(qe));Z.push(ge(Te))}if(O.trailingComments)if(w)ae=O.trailingComments[0],Nt=ae.extendedRange,de=ae.range,fe=D.substring(Nt[0],de[0]),We=(fe.match(/\n/g)||[]).length,We>0?(Z.push(Pe(`
`,We)),Z.push(ge(kt(ae)))):(Z.push(fe),Z.push(kt(ae)));else for(xe=!M(_e(Z).toString()),$e=Pe(" ",ke(_e([a,Z,u]).toString())),H=0,Y=O.trailingComments.length;H<Y;++H)ae=O.trailingComments[H],xe?(H===0?Z=[Z,u]:Z=[Z,$e],Z.push(kt(ae,$e))):Z=[Z,ge(kt(ae))],H!==Y-1&&!M(_e(Z).toString())&&(Z=[Z,`
`]);return Z}function Wt(O,Z,H){var Y,ae=0;for(Y=O;Y<Z;Y++)D[Y]===`
`&&ae++;for(Y=1;Y<ae;Y++)H.push(p)}function cr(O,Z,H){return Z<H?["(",O,")"]:O}function qs(O){var Z,H,Y;for(Y=O.split(/\r\n|\n/),Z=1,H=Y.length;Z<H;Z++)Y[Z]=p+a+Y[Z];return Y}function un(O,Z){var H,Y,ae;return H=O[v.verbatim],typeof H=="string"?Y=cr(qs(H),r.Sequence,Z):(Y=qs(H.content),ae=H.precedence!=null?H.precedence:r.Sequence,Y=cr(Y,ae,Z)),_e(Y,O)}function Ct(){}Ct.prototype.maybeBlock=function(O,Z){var H,Y,ae=this;return Y=!v.comment||!O.leadingComments,O.type===e.BlockStatement&&Y?[m,this.generateStatement(O,Z)]:O.type===e.EmptyStatement&&Y?";":(be(function(){H=[p,ge(ae.generateStatement(O,Z))]}),H)},Ct.prototype.maybeBlockSuffix=function(O,Z){var H=M(_e(Z).toString());return O.type===e.BlockStatement&&(!v.comment||!O.leadingComments)&&!H?[Z,m]:H?[Z,a]:[Z,p,a]};function Wr(O){return _e(O.name,O)}function _s(O,Z){return O.async?"async"+(Z?G():m):""}function Hs(O){var Z=O.generator&&!v.moz.starlessGenerator;return Z?"*"+m:""}function Ui(O){var Z=O.value,H="";return Z.async&&(H+=_s(Z,!O.computed)),Z.generator&&(H+=Hs(Z)?"*":""),H}Ct.prototype.generatePattern=function(O,Z,H){return O.type===e.Identifier?Wr(O):this.generateExpression(O,Z,H)},Ct.prototype.generateFunctionParams=function(O){var Z,H,Y,ae;if(ae=!1,O.type===e.ArrowFunctionExpression&&!O.rest&&(!O.defaults||O.defaults.length===0)&&O.params.length===1&&O.params[0].type===e.Identifier)Y=[_s(O,!0),Wr(O.params[0])];else{for(Y=O.type===e.ArrowFunctionExpression?[_s(O,!1)]:[],Y.push("("),O.defaults&&(ae=!0),Z=0,H=O.params.length;Z<H;++Z)ae&&O.defaults[Z]?Y.push(this.generateAssignment(O.params[Z],O.defaults[Z],"=",r.Assignment,B)):Y.push(this.generatePattern(O.params[Z],r.Assignment,B)),Z+1<H&&Y.push(","+m);O.rest&&(O.params.length&&Y.push(","+m),Y.push("..."),Y.push(Wr(O.rest))),Y.push(")")}return Y},Ct.prototype.generateFunctionBody=function(O){var Z,H;return Z=this.generateFunctionParams(O),O.type===e.ArrowFunctionExpression&&(Z.push(m),Z.push("=>")),O.expression?(Z.push(m),H=this.generateExpression(O.body,r.Assignment,B),H.toString().charAt(0)==="{"&&(H=["(",H,")"]),Z.push(H)):Z.push(this.maybeBlock(O.body,me)),Z},Ct.prototype.generateIterationForStatement=function(O,Z,H){var Y=["for"+(Z.await?G()+"await":"")+m+"("],ae=this;return be(function(){Z.left.type===e.VariableDeclaration?be(function(){Y.push(Z.left.kind+G()),Y.push(ae.generateStatement(Z.left.declarations[0],ne))}):Y.push(ae.generateExpression(Z.left,r.Call,B)),Y=J(Y,O),Y=[J(Y,ae.generateExpression(Z.right,r.Assignment,B)),")"]}),Y.push(this.maybeBlock(Z.body,H)),Y},Ct.prototype.generatePropertyKey=function(O,Z){var H=[];return Z&&H.push("["),H.push(this.generateExpression(O,r.Assignment,B)),Z&&H.push("]"),H},Ct.prototype.generateAssignment=function(O,Z,H,Y,ae){return r.Assignment<Y&&(ae|=k),cr([this.generateExpression(O,r.Call,ae),m+H+m,this.generateExpression(Z,r.Assignment,ae)],r.Assignment,Y)},Ct.prototype.semicolon=function(O){return!A&&O&X?"":";"},Ct.Statement={BlockStatement:function(O,Z){var H,Y,ae=["{",p],Te=this;return be(function(){O.body.length===0&&w&&(H=O.range,H[1]-H[0]>2&&(Y=D.substring(H[0]+1,H[1]-1),Y[0]===`
`&&(ae=["{"]),ae.push(Y)));var xe,$e,qe,Nt;for(Nt=F,Z&q&&(Nt|=se),xe=0,$e=O.body.length;xe<$e;++xe)w&&(xe===0&&(O.body[0].leadingComments&&(H=O.body[0].leadingComments[0].extendedRange,Y=D.substring(H[0],H[1]),Y[0]===`
`&&(ae=["{"])),O.body[0].leadingComments||Wt(O.range[0],O.body[0].range[0],ae)),xe>0&&!O.body[xe-1].trailingComments&&!O.body[xe].leadingComments&&Wt(O.body[xe-1].range[1],O.body[xe].range[0],ae)),xe===$e-1&&(Nt|=X),O.body[xe].leadingComments&&w?qe=Te.generateStatement(O.body[xe],Nt):qe=ge(Te.generateStatement(O.body[xe],Nt)),ae.push(qe),M(_e(qe).toString())||w&&xe<$e-1&&O.body[xe+1].leadingComments||ae.push(p),w&&xe===$e-1&&(O.body[xe].trailingComments||Wt(O.body[xe].range[1],O.range[1],ae))}),ae.push(ge("}")),ae},BreakStatement:function(O,Z){return O.label?"break "+O.label.name+this.semicolon(Z):"break"+this.semicolon(Z)},ContinueStatement:function(O,Z){return O.label?"continue "+O.label.name+this.semicolon(Z):"continue"+this.semicolon(Z)},ClassBody:function(O,Z){var H=["{",p],Y=this;return be(function(ae){var Te,xe;for(Te=0,xe=O.body.length;Te<xe;++Te)H.push(ae),H.push(Y.generateExpression(O.body[Te],r.Sequence,B)),Te+1<xe&&H.push(p)}),M(_e(H).toString())||H.push(p),H.push(a),H.push("}"),H},ClassDeclaration:function(O,Z){var H,Y;return H=["class"],O.id&&(H=J(H,this.generateExpression(O.id,r.Sequence,B))),O.superClass&&(Y=J("extends",this.generateExpression(O.superClass,r.Unary,B)),H=J(H,Y)),H.push(m),H.push(this.generateStatement(O.body,ee)),H},DirectiveStatement:function(O,Z){return v.raw&&O.raw?O.raw+this.semicolon(Z):pe(O.directive)+this.semicolon(Z)},DoWhileStatement:function(O,Z){var H=J("do",this.maybeBlock(O.body,F));return H=this.maybeBlockSuffix(O.body,H),J(H,["while"+m+"(",this.generateExpression(O.test,r.Sequence,B),")"+this.semicolon(Z)])},CatchClause:function(O,Z){var H,Y=this;return be(function(){var ae;O.param?(H=["catch"+m+"(",Y.generateExpression(O.param,r.Sequence,B),")"],O.guard&&(ae=Y.generateExpression(O.guard,r.Sequence,B),H.splice(2,0," if ",ae))):H=["catch"]}),H.push(this.maybeBlock(O.body,F)),H},DebuggerStatement:function(O,Z){return"debugger"+this.semicolon(Z)},EmptyStatement:function(O,Z){return";"},ExportDefaultDeclaration:function(O,Z){var H=["export"],Y;return Y=Z&X?ee:F,H=J(H,"default"),C(O.declaration)?H=J(H,this.generateStatement(O.declaration,Y)):H=J(H,this.generateExpression(O.declaration,r.Assignment,B)+this.semicolon(Z)),H},ExportNamedDeclaration:function(O,Z){var H=["export"],Y,ae=this;return Y=Z&X?ee:F,O.declaration?J(H,this.generateStatement(O.declaration,Y)):(O.specifiers&&(O.specifiers.length===0?H=J(H,"{"+m+"}"):O.specifiers[0].type===e.ExportBatchSpecifier?H=J(H,this.generateExpression(O.specifiers[0],r.Sequence,B)):(H=J(H,"{"),be(function(Te){var xe,$e;for(H.push(p),xe=0,$e=O.specifiers.length;xe<$e;++xe)H.push(Te),H.push(ae.generateExpression(O.specifiers[xe],r.Sequence,B)),xe+1<$e&&H.push(","+p)}),M(_e(H).toString())||H.push(p),H.push(a+"}")),O.source?H=J(H,["from"+m,this.generateExpression(O.source,r.Sequence,B),this.semicolon(Z)]):H.push(this.semicolon(Z))),H)},ExportAllDeclaration:function(O,Z){return["export"+m,"*"+m,"from"+m,this.generateExpression(O.source,r.Sequence,B),this.semicolon(Z)]},ExpressionStatement:function(O,Z){var H,Y;function ae($e){var qe;return $e.slice(0,5)!=="class"?!1:(qe=$e.charCodeAt(5),qe===123||o.code.isWhiteSpace(qe)||o.code.isLineTerminator(qe))}function Te($e){var qe;return $e.slice(0,8)!=="function"?!1:(qe=$e.charCodeAt(8),qe===40||o.code.isWhiteSpace(qe)||qe===42||o.code.isLineTerminator(qe))}function xe($e){var qe,Nt,de;if($e.slice(0,5)!=="async"||!o.code.isWhiteSpace($e.charCodeAt(5)))return!1;for(Nt=6,de=$e.length;Nt<de&&o.code.isWhiteSpace($e.charCodeAt(Nt));++Nt);return Nt===de||$e.slice(Nt,Nt+8)!=="function"?!1:(qe=$e.charCodeAt(Nt+8),qe===40||o.code.isWhiteSpace(qe)||qe===42||o.code.isLineTerminator(qe))}return H=[this.generateExpression(O.expression,r.Sequence,B)],Y=_e(H).toString(),Y.charCodeAt(0)===123||ae(Y)||Te(Y)||xe(Y)||g&&Z&se&&O.expression.type===e.Literal&&typeof O.expression.value=="string"?H=["(",H,")"+this.semicolon(Z)]:H.push(this.semicolon(Z)),H},ImportDeclaration:function(O,Z){var H,Y,ae=this;return O.specifiers.length===0?["import",m,this.generateExpression(O.source,r.Sequence,B),this.semicolon(Z)]:(H=["import"],Y=0,O.specifiers[Y].type===e.ImportDefaultSpecifier&&(H=J(H,[this.generateExpression(O.specifiers[Y],r.Sequence,B)]),++Y),O.specifiers[Y]&&(Y!==0&&H.push(","),O.specifiers[Y].type===e.ImportNamespaceSpecifier?H=J(H,[m,this.generateExpression(O.specifiers[Y],r.Sequence,B)]):(H.push(m+"{"),O.specifiers.length-Y===1?(H.push(m),H.push(this.generateExpression(O.specifiers[Y],r.Sequence,B)),H.push(m+"}"+m)):(be(function(Te){var xe,$e;for(H.push(p),xe=Y,$e=O.specifiers.length;xe<$e;++xe)H.push(Te),H.push(ae.generateExpression(O.specifiers[xe],r.Sequence,B)),xe+1<$e&&H.push(","+p)}),M(_e(H).toString())||H.push(p),H.push(a+"}"+m)))),H=J(H,["from"+m,this.generateExpression(O.source,r.Sequence,B),this.semicolon(Z)]),H)},VariableDeclarator:function(O,Z){var H=Z&k?B:re;return O.init?[this.generateExpression(O.id,r.Assignment,H),m,"=",m,this.generateExpression(O.init,r.Assignment,H)]:this.generatePattern(O.id,r.Assignment,H)},VariableDeclaration:function(O,Z){var H,Y,ae,Te,xe,$e=this;H=[O.kind],xe=Z&k?F:ne;function qe(){for(Te=O.declarations[0],v.comment&&Te.leadingComments?(H.push(`
`),H.push(ge($e.generateStatement(Te,xe)))):(H.push(G()),H.push($e.generateStatement(Te,xe))),Y=1,ae=O.declarations.length;Y<ae;++Y)Te=O.declarations[Y],v.comment&&Te.leadingComments?(H.push(","+p),H.push(ge($e.generateStatement(Te,xe)))):(H.push(","+m),H.push($e.generateStatement(Te,xe)))}return O.declarations.length>1?be(qe):qe(),H.push(this.semicolon(Z)),H},ThrowStatement:function(O,Z){return[J("throw",this.generateExpression(O.argument,r.Sequence,B)),this.semicolon(Z)]},TryStatement:function(O,Z){var H,Y,ae,Te;if(H=["try",this.maybeBlock(O.block,F)],H=this.maybeBlockSuffix(O.block,H),O.handlers)for(Y=0,ae=O.handlers.length;Y<ae;++Y)H=J(H,this.generateStatement(O.handlers[Y],F)),(O.finalizer||Y+1!==ae)&&(H=this.maybeBlockSuffix(O.handlers[Y].body,H));else{for(Te=O.guardedHandlers||[],Y=0,ae=Te.length;Y<ae;++Y)H=J(H,this.generateStatement(Te[Y],F)),(O.finalizer||Y+1!==ae)&&(H=this.maybeBlockSuffix(Te[Y].body,H));if(O.handler)if(Array.isArray(O.handler))for(Y=0,ae=O.handler.length;Y<ae;++Y)H=J(H,this.generateStatement(O.handler[Y],F)),(O.finalizer||Y+1!==ae)&&(H=this.maybeBlockSuffix(O.handler[Y].body,H));else H=J(H,this.generateStatement(O.handler,F)),O.finalizer&&(H=this.maybeBlockSuffix(O.handler.body,H))}return O.finalizer&&(H=J(H,["finally",this.maybeBlock(O.finalizer,F)])),H},SwitchStatement:function(O,Z){var H,Y,ae,Te,xe,$e=this;if(be(function(){H=["switch"+m+"(",$e.generateExpression(O.discriminant,r.Sequence,B),")"+m+"{"+p]}),O.cases)for(xe=F,ae=0,Te=O.cases.length;ae<Te;++ae)ae===Te-1&&(xe|=X),Y=ge(this.generateStatement(O.cases[ae],xe)),H.push(Y),M(_e(Y).toString())||H.push(p);return H.push(ge("}")),H},SwitchCase:function(O,Z){var H,Y,ae,Te,xe,$e=this;return be(function(){for(O.test?H=[J("case",$e.generateExpression(O.test,r.Sequence,B)),":"]:H=["default:"],ae=0,Te=O.consequent.length,Te&&O.consequent[0].type===e.BlockStatement&&(Y=$e.maybeBlock(O.consequent[0],F),H.push(Y),ae=1),ae!==Te&&!M(_e(H).toString())&&H.push(p),xe=F;ae<Te;++ae)ae===Te-1&&Z&X&&(xe|=X),Y=ge($e.generateStatement(O.consequent[ae],xe)),H.push(Y),ae+1!==Te&&!M(_e(Y).toString())&&H.push(p)}),H},IfStatement:function(O,Z){var H,Y,ae,Te=this;return be(function(){H=["if"+m+"(",Te.generateExpression(O.test,r.Sequence,B),")"]}),ae=Z&X,Y=F,ae&&(Y|=X),O.alternate?(H.push(this.maybeBlock(O.consequent,F)),H=this.maybeBlockSuffix(O.consequent,H),O.alternate.type===e.IfStatement?H=J(H,["else ",this.generateStatement(O.alternate,Y)]):H=J(H,J("else",this.maybeBlock(O.alternate,Y)))):H.push(this.maybeBlock(O.consequent,Y)),H},ForStatement:function(O,Z){var H,Y=this;return be(function(){H=["for"+m+"("],O.init?O.init.type===e.VariableDeclaration?H.push(Y.generateStatement(O.init,ne)):(H.push(Y.generateExpression(O.init,r.Sequence,re)),H.push(";")):H.push(";"),O.test&&(H.push(m),H.push(Y.generateExpression(O.test,r.Sequence,B))),H.push(";"),O.update&&(H.push(m),H.push(Y.generateExpression(O.update,r.Sequence,B))),H.push(")")}),H.push(this.maybeBlock(O.body,Z&X?ee:F)),H},ForInStatement:function(O,Z){return this.generateIterationForStatement("in",O,Z&X?ee:F)},ForOfStatement:function(O,Z){return this.generateIterationForStatement("of",O,Z&X?ee:F)},LabeledStatement:function(O,Z){return[O.label.name+":",this.maybeBlock(O.body,Z&X?ee:F)]},Program:function(O,Z){var H,Y,ae,Te,xe;for(Te=O.body.length,H=[_&&Te>0?`
`:""],xe=le,ae=0;ae<Te;++ae)!_&&ae===Te-1&&(xe|=X),w&&(ae===0&&(O.body[0].leadingComments||Wt(O.range[0],O.body[ae].range[0],H)),ae>0&&!O.body[ae-1].trailingComments&&!O.body[ae].leadingComments&&Wt(O.body[ae-1].range[1],O.body[ae].range[0],H)),Y=ge(this.generateStatement(O.body[ae],xe)),H.push(Y),ae+1<Te&&!M(_e(Y).toString())&&(w&&O.body[ae+1].leadingComments||H.push(p)),w&&ae===Te-1&&(O.body[ae].trailingComments||Wt(O.body[ae].range[1],O.range[1],H));return H},FunctionDeclaration:function(O,Z){return[_s(O,!0),"function",Hs(O)||G(),O.id?Wr(O.id):"",this.generateFunctionBody(O)]},ReturnStatement:function(O,Z){return O.argument?[J("return",this.generateExpression(O.argument,r.Sequence,B)),this.semicolon(Z)]:["return"+this.semicolon(Z)]},WhileStatement:function(O,Z){var H,Y=this;return be(function(){H=["while"+m+"(",Y.generateExpression(O.test,r.Sequence,B),")"]}),H.push(this.maybeBlock(O.body,Z&X?ee:F)),H},WithStatement:function(O,Z){var H,Y=this;return be(function(){H=["with"+m+"(",Y.generateExpression(O.object,r.Sequence,B),")"]}),H.push(this.maybeBlock(O.body,Z&X?ee:F)),H}},V(Ct.prototype,Ct.Statement),Ct.Expression={SequenceExpression:function(O,Z,H){var Y,ae,Te;for(r.Sequence<Z&&(H|=k),Y=[],ae=0,Te=O.expressions.length;ae<Te;++ae)Y.push(this.generateExpression(O.expressions[ae],r.Assignment,H)),ae+1<Te&&Y.push(","+m);return cr(Y,r.Sequence,Z)},AssignmentExpression:function(O,Z,H){return this.generateAssignment(O.left,O.right,O.operator,Z,H)},ArrowFunctionExpression:function(O,Z,H){return cr(this.generateFunctionBody(O),r.ArrowFunction,Z)},ConditionalExpression:function(O,Z,H){return r.Conditional<Z&&(H|=k),cr([this.generateExpression(O.test,r.LogicalOR,H),m+"?"+m,this.generateExpression(O.consequent,r.Assignment,H),m+":"+m,this.generateExpression(O.alternate,r.Assignment,H)],r.Conditional,Z)},LogicalExpression:function(O,Z,H){return this.BinaryExpression(O,Z,H)},BinaryExpression:function(O,Z,H){var Y,ae,Te,xe,$e,qe;return xe=n[O.operator],ae=O.operator==="**"?r.Postfix:xe,Te=O.operator==="**"?xe:xe+1,xe<Z&&(H|=k),$e=this.generateExpression(O.left,ae,H),qe=$e.toString(),qe.charCodeAt(qe.length-1)===47&&o.code.isIdentifierPartES5(O.operator.charCodeAt(0))?Y=[$e,G(),O.operator]:Y=J($e,O.operator),$e=this.generateExpression(O.right,Te,H),O.operator==="/"&&$e.toString().charAt(0)==="/"||O.operator.slice(-1)==="<"&&$e.toString().slice(0,3)==="!--"?(Y.push(G()),Y.push($e)):Y=J(Y,$e),O.operator==="in"&&!(H&k)?["(",Y,")"]:cr(Y,xe,Z)},CallExpression:function(O,Z,H){var Y,ae,Te;for(Y=[this.generateExpression(O.callee,r.Call,W)],Y.push("("),ae=0,Te=O.arguments.length;ae<Te;++ae)Y.push(this.generateExpression(O.arguments[ae],r.Assignment,B)),ae+1<Te&&Y.push(","+m);return Y.push(")"),H&K?cr(Y,r.Call,Z):["(",Y,")"]},NewExpression:function(O,Z,H){var Y,ae,Te,xe,$e;if(ae=O.arguments.length,$e=H&L&&!E&&ae===0?$:te,Y=J("new",this.generateExpression(O.callee,r.New,$e)),!(H&L)||E||ae>0){for(Y.push("("),Te=0,xe=ae;Te<xe;++Te)Y.push(this.generateExpression(O.arguments[Te],r.Assignment,B)),Te+1<xe&&Y.push(","+m);Y.push(")")}return cr(Y,r.New,Z)},MemberExpression:function(O,Z,H){var Y,ae;return Y=[this.generateExpression(O.object,r.Call,H&K?W:te)],O.computed?(Y.push("["),Y.push(this.generateExpression(O.property,r.Sequence,H&K?B:$)),Y.push("]")):(O.object.type===e.Literal&&typeof O.object.value=="number"&&(ae=_e(Y).toString(),ae.indexOf(".")<0&&!/[eExX]/.test(ae)&&o.code.isDecimalDigit(ae.charCodeAt(ae.length-1))&&!(ae.length>=2&&ae.charCodeAt(0)===48)&&Y.push(" ")),Y.push("."),Y.push(Wr(O.property))),cr(Y,r.Member,Z)},MetaProperty:function(O,Z,H){var Y;return Y=[],Y.push(typeof O.meta=="string"?O.meta:Wr(O.meta)),Y.push("."),Y.push(typeof O.property=="string"?O.property:Wr(O.property)),cr(Y,r.Member,Z)},UnaryExpression:function(O,Z,H){var Y,ae,Te,xe,$e;return ae=this.generateExpression(O.argument,r.Unary,B),m===""?Y=J(O.operator,ae):(Y=[O.operator],O.operator.length>2?Y=J(Y,ae):(xe=_e(Y).toString(),$e=xe.charCodeAt(xe.length-1),Te=ae.toString().charCodeAt(0),(($e===43||$e===45)&&$e===Te||o.code.isIdentifierPartES5($e)&&o.code.isIdentifierPartES5(Te))&&Y.push(G()),Y.push(ae))),cr(Y,r.Unary,Z)},YieldExpression:function(O,Z,H){var Y;return O.delegate?Y="yield*":Y="yield",O.argument&&(Y=J(Y,this.generateExpression(O.argument,r.Yield,B))),cr(Y,r.Yield,Z)},AwaitExpression:function(O,Z,H){var Y=J(O.all?"await*":"await",this.generateExpression(O.argument,r.Await,B));return cr(Y,r.Await,Z)},UpdateExpression:function(O,Z,H){return O.prefix?cr([O.operator,this.generateExpression(O.argument,r.Unary,B)],r.Unary,Z):cr([this.generateExpression(O.argument,r.Postfix,B),O.operator],r.Postfix,Z)},FunctionExpression:function(O,Z,H){var Y=[_s(O,!0),"function"];return O.id?(Y.push(Hs(O)||G()),Y.push(Wr(O.id))):Y.push(Hs(O)||m),Y.push(this.generateFunctionBody(O)),Y},ArrayPattern:function(O,Z,H){return this.ArrayExpression(O,Z,H,!0)},ArrayExpression:function(O,Z,H,Y){var ae,Te,xe=this;return O.elements.length?(Te=Y?!1:O.elements.length>1,ae=["[",Te?p:""],be(function($e){var qe,Nt;for(qe=0,Nt=O.elements.length;qe<Nt;++qe)O.elements[qe]?(ae.push(Te?$e:""),ae.push(xe.generateExpression(O.elements[qe],r.Assignment,B))):(Te&&ae.push($e),qe+1===Nt&&ae.push(",")),qe+1<Nt&&ae.push(","+(Te?p:m))}),Te&&!M(_e(ae).toString())&&ae.push(p),ae.push(Te?a:""),ae.push("]"),ae):"[]"},RestElement:function(O,Z,H){return"..."+this.generatePattern(O.argument)},ClassExpression:function(O,Z,H){var Y,ae;return Y=["class"],O.id&&(Y=J(Y,this.generateExpression(O.id,r.Sequence,B))),O.superClass&&(ae=J("extends",this.generateExpression(O.superClass,r.Unary,B)),Y=J(Y,ae)),Y.push(m),Y.push(this.generateStatement(O.body,ee)),Y},MethodDefinition:function(O,Z,H){var Y,ae;return O.static?Y=["static"+m]:Y=[],O.kind==="get"||O.kind==="set"?ae=[J(O.kind,this.generatePropertyKey(O.key,O.computed)),this.generateFunctionBody(O.value)]:ae=[Ui(O),this.generatePropertyKey(O.key,O.computed),this.generateFunctionBody(O.value)],J(Y,ae)},Property:function(O,Z,H){return O.kind==="get"||O.kind==="set"?[O.kind,G(),this.generatePropertyKey(O.key,O.computed),this.generateFunctionBody(O.value)]:O.shorthand?O.value.type==="AssignmentPattern"?this.AssignmentPattern(O.value,r.Sequence,B):this.generatePropertyKey(O.key,O.computed):O.method?[Ui(O),this.generatePropertyKey(O.key,O.computed),this.generateFunctionBody(O.value)]:[this.generatePropertyKey(O.key,O.computed),":"+m,this.generateExpression(O.value,r.Assignment,B)]},ObjectExpression:function(O,Z,H){var Y,ae,Te,xe=this;return O.properties.length?(Y=O.properties.length>1,be(function(){Te=xe.generateExpression(O.properties[0],r.Sequence,B)}),!Y&&!Ue(_e(Te).toString())?["{",m,Te,m,"}"]:(be(function($e){var qe,Nt;if(ae=["{",p,$e,Te],Y)for(ae.push(","+p),qe=1,Nt=O.properties.length;qe<Nt;++qe)ae.push($e),ae.push(xe.generateExpression(O.properties[qe],r.Sequence,B)),qe+1<Nt&&ae.push(","+p)}),M(_e(ae).toString())||ae.push(p),ae.push(a),ae.push("}"),ae)):"{}"},AssignmentPattern:function(O,Z,H){return this.generateAssignment(O.left,O.right,"=",Z,H)},ObjectPattern:function(O,Z,H){var Y,ae,Te,xe,$e,qe=this;if(!O.properties.length)return"{}";if(xe=!1,O.properties.length===1)$e=O.properties[0],$e.type===e.Property&&$e.value.type!==e.Identifier&&(xe=!0);else for(ae=0,Te=O.properties.length;ae<Te;++ae)if($e=O.properties[ae],$e.type===e.Property&&!$e.shorthand){xe=!0;break}return Y=["{",xe?p:""],be(function(Nt){var de,ue;for(de=0,ue=O.properties.length;de<ue;++de)Y.push(xe?Nt:""),Y.push(qe.generateExpression(O.properties[de],r.Sequence,B)),de+1<ue&&Y.push(","+(xe?p:m))}),xe&&!M(_e(Y).toString())&&Y.push(p),Y.push(xe?a:""),Y.push("}"),Y},ThisExpression:function(O,Z,H){return"this"},Super:function(O,Z,H){return"super"},Identifier:function(O,Z,H){return Wr(O)},ImportDefaultSpecifier:function(O,Z,H){return Wr(O.id||O.local)},ImportNamespaceSpecifier:function(O,Z,H){var Y=["*"],ae=O.id||O.local;return ae&&Y.push(m+"as"+G()+Wr(ae)),Y},ImportSpecifier:function(O,Z,H){var Y=O.imported,ae=[Y.name],Te=O.local;return Te&&Te.name!==Y.name&&ae.push(G()+"as"+G()+Wr(Te)),ae},ExportSpecifier:function(O,Z,H){var Y=O.local,ae=[Y.name],Te=O.exported;return Te&&Te.name!==Y.name&&ae.push(G()+"as"+G()+Wr(Te)),ae},Literal:function(O,Z,H){var Y;if(O.hasOwnProperty("raw")&&S&&v.raw)try{if(Y=S(O.raw).body[0].expression,Y.type===e.Literal&&Y.value===O.value)return O.raw}catch{}return O.regex?"/"+O.regex.pattern+"/"+O.regex.flags:O.value===null?"null":typeof O.value=="string"?he(O.value):typeof O.value=="number"?j(O.value):typeof O.value=="boolean"?O.value?"true":"false":N(O.value)},GeneratorExpression:function(O,Z,H){return this.ComprehensionExpression(O,Z,H)},ComprehensionExpression:function(O,Z,H){var Y,ae,Te,xe,$e=this;return Y=O.type===e.GeneratorExpression?["("]:["["],v.moz.comprehensionExpressionStartsWithAssignment&&(xe=this.generateExpression(O.body,r.Assignment,B),Y.push(xe)),O.blocks&&be(function(){for(ae=0,Te=O.blocks.length;ae<Te;++ae)xe=$e.generateExpression(O.blocks[ae],r.Sequence,B),ae>0||v.moz.comprehensionExpressionStartsWithAssignment?Y=J(Y,xe):Y.push(xe)}),O.filter&&(Y=J(Y,"if"+m),xe=this.generateExpression(O.filter,r.Sequence,B),Y=J(Y,["(",xe,")"])),v.moz.comprehensionExpressionStartsWithAssignment||(xe=this.generateExpression(O.body,r.Assignment,B),Y=J(Y,xe)),Y.push(O.type===e.GeneratorExpression?")":"]"),Y},ComprehensionBlock:function(O,Z,H){var Y;return O.left.type===e.VariableDeclaration?Y=[O.left.kind,G(),this.generateStatement(O.left.declarations[0],ne)]:Y=this.generateExpression(O.left,r.Call,B),Y=J(Y,O.of?"of":"in"),Y=J(Y,this.generateExpression(O.right,r.Sequence,B)),["for"+m+"(",Y,")"]},SpreadElement:function(O,Z,H){return["...",this.generateExpression(O.argument,r.Assignment,B)]},TaggedTemplateExpression:function(O,Z,H){var Y=W;H&K||(Y=te);var ae=[this.generateExpression(O.tag,r.Call,Y),this.generateExpression(O.quasi,r.Primary,z)];return cr(ae,r.TaggedTemplate,Z)},TemplateElement:function(O,Z,H){return O.value.raw},TemplateLiteral:function(O,Z,H){var Y,ae,Te;for(Y=["`"],ae=0,Te=O.quasis.length;ae<Te;++ae)Y.push(this.generateExpression(O.quasis[ae],r.Primary,B)),ae+1<Te&&(Y.push("${"+m),Y.push(this.generateExpression(O.expressions[ae],r.Sequence,B)),Y.push(m+"}"));return Y.push("`"),Y},ModuleSpecifier:function(O,Z,H){return this.Literal(O,Z,H)},ImportExpression:function(O,Z,H){return cr(["import(",this.generateExpression(O.source,r.Assignment,B),")"],r.Call,Z)}},V(Ct.prototype,Ct.Expression),Ct.prototype.generateExpression=function(O,Z,H){var Y,ae;return ae=O.type||e.Property,v.verbatim&&O.hasOwnProperty(v.verbatim)?un(O,Z):(Y=this[ae](O,Z,H),v.comment&&(Y=$r(O,Y)),_e(Y,O))},Ct.prototype.generateStatement=function(O,Z){var H,Y;return H=this[O.type](O,Z),v.comment&&(H=$r(O,H)),Y=_e(H).toString(),O.type===e.Program&&!_&&p===""&&Y.charAt(Y.length-1)===`
`&&(H=x?_e(H).replaceRight(/\s+$/,""):Y.replace(/\s+$/,"")),_e(H,O)};function rs(O){var Z;if(Z=new Ct,C(O))return Z.generateStatement(O,F);if(P(O))return Z.generateExpression(O,r.Sequence,B);throw new Error("Unknown node type: "+O.type)}function ci(O,Z){var H=ve(),Y,ae;return Z!=null?(typeof Z.indent=="string"&&(H.format.indent.style=Z.indent),typeof Z.base=="number"&&(H.format.indent.base=Z.base),Z=oe(H,Z),u=Z.format.indent.style,typeof Z.base=="string"?a=Z.base:a=Pe(u,Z.format.indent.base)):(Z=H,u=Z.format.indent.style,a=Pe(u,Z.format.indent.base)),l=Z.format.json,c=Z.format.renumber,d=l?!1:Z.format.hexadecimal,h=l?"double":Z.format.quotes,f=Z.format.escapeless,p=Z.format.newline,m=Z.format.space,Z.format.compact&&(p=m=u=a=""),E=Z.format.parentheses,A=Z.format.semicolons,_=Z.format.safeConcatenation,g=Z.directive,S=l?null:Z.parse,x=Z.sourceMap,D=Z.sourceCode,w=Z.format.preserveBlankLines&&D!==null,v=Z,x&&(t.browser?s=Ar.sourceMap.SourceNode:s=Dme().SourceNode),Y=rs(O),x?(ae=Y.toStringWithSourceMap({file:Z.file,sourceRoot:Z.sourceMapRoot}),Z.sourceContent&&ae.map.setSourceContent(Z.sourceMap,Z.sourceContent),Z.sourceMapWithCode?ae:ae.map.toString()):(ae={code:Y.toString(),map:null},Z.sourceMapWithCode?ae:ae.code)}b={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},T=ve().format,t.version=Kme.version,t.generate=ci,t.attachComments=i.attachComments,t.Precedence=oe({},r),t.browser=!1,t.FORMAT_MINIFY=b,t.FORMAT_DEFAULTS=T})()})(_K);var Vme=_K.generate,qme=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],l=0,c=i.elements.length;l<c;l++){var d=s(i.elements[l]);if(d===r)return r;u.push(d)}return u}else if(i.type==="ObjectExpression"){for(var h={},l=0;l<i.properties.length;l++){var f=i.properties[l],p=f.value===null?f.value:s(f.value);if(p===r)return r;h[f.key.value||f.key.name]=p}return h}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var c=s(i.left);if(c===r)return r;var m=s(i.right);if(m===r)return r;var E=i.operator;return E==="=="?c==m:E==="==="?c===m:E==="!="?c!=m:E==="!=="?c!==m:E==="+"?c+m:E==="-"?c-m:E==="*"?c*m:E==="/"?c/m:E==="%"?c%m:E==="<"?c<m:E==="<="?c<=m:E===">"?c>m:E===">="?c>=m:E==="|"?c|m:E==="&"?c&m:E==="^"?c^m:E==="&&"?c&&m:E==="||"?c||m:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var A=s(i.callee);if(A===r||typeof A!="function")return r;var _=i.callee.object?s(i.callee.object):r;_===r&&(_=null);for(var g=[],l=0,c=i.arguments.length;l<c;l++){var d=s(i.arguments[l]);if(d===r)return r;g.push(d)}return A.apply(_,g)}else if(i.type==="MemberExpression"){var h=s(i.object);if(h===r||typeof h=="function")return r;if(i.property.type==="Identifier")return h[i.property.name];var f=s(i.property);return f===r?r:h[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var v=i.body.body,S={};Object.keys(e).forEach(function(K){S[K]=e[K]});for(var l=0;l<i.params.length;l++){var x=i.params[l];if(x.type=="Identifier")e[x.name]=null;else return r}for(var l in v)if(s(v[l])===r)return r;e=S;var D=Object.keys(e),w=D.map(function(K){return e[K]});return Function(D.join(", "),"return "+Vme(i)).apply(null,w)}else if(i.type==="TemplateLiteral"){for(var b="",l=0;l<i.expressions.length;l++)b+=s(i.quasis[l]),b+=s(i.expressions[l]);return b+=s(i.quasis[l]),b}else if(i.type==="TaggedTemplateExpression"){var T=s(i.tag),P=i.quasi,C=P.quasis.map(s),k=P.expressions.map(s);return T.apply(null,[C].concat(k))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n};const Hme=Zu(qme);function FF(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=(function(l,c){CK(l)?(l.forEach(function(d,h){a.length>=s||n(h,d,r)&&a.push({path:c.concat(h),value:d})}),l.forEach(function(d,h){a.length>=s||t&&u(d,c.concat(h))})):Wme(l)&&(Object.keys(l).forEach(function(d){a.length>=s||n(d,l[d],r)&&a.push({path:c.concat(d),value:l[d]})}),Object.keys(l).forEach(function(d){a.length>=s||t&&u(l[d],c.concat(d))}))}).bind(this);return u(i,o),a}}function Zx(t,e){try{return Hme(t,e)}catch{}}function wb(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function _b(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function MF(t){return t=t.filter(function(e){return e}),Jme(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function zme(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function CK(t){return Array.isArray(t)}function Wme(t){return t&&!(t instanceof Array)&&t instanceof Object}function xT(t,e,r){var n=Xx(e).body[0].expression,s=Zx(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=vr.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var Gme=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":_b(function(e,r,n){return e==n}),"subscript-child-numeric_literal":wb(function(e,r,n){return e===n}),"member-child-numeric_literal":wb(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":_b(function(e,r,n){return e===n}),"member-child-wildcard":wb(function(){return!0}),"member-descendant-wildcard":_b(function(){return!0}),"subscript-descendant-wildcard":_b(function(){return!0}),"subscript-child-wildcard":wb(function(){return!0}),"subscript-child-slice":function(e,r){if(CK(r.value)){var n=e.expression.value.split(":").map(zme),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return sme.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),MF(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=vr.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var l={operation:"subscript",scope:"child",expression:u.expression},c=s.resolve(l),d=c(l,a);i=i.concat(d)})}),MF(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=Xx(s).body[0].expression,o=function(a,u){return Zx(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=Xx(s).body[0].expression,o=function(a,u){return Zx(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return xT(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return xT(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return xT(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=FF(!0),this.descend=FF(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();function Jme(t,e){for(var r=[],n=[],s=0,i=t==null?void 0:t.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}var Xme={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"};function Zme(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var IK={};(function(t){var e=function(){var r=function(w,b,T,P){for(T=T||{},P=w.length;P--;T[w[P]]=b);return T},n=[1,5],s=[1,6],i=[1,7],o=[1,8],a=[1,9],u=[1,18],l=[1,19],c=[1,20],d=[1,12,14,22],h=[1,29],f=[1,30],p=[1,33],m=[1,35],E=[1,31],A=[1,36],_=[1,37],g=[24,28],v={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(b,T,P,C,k,K,L){C.ast||(C.ast=S,S.initialize());var q=K.length-1;switch(k){case 1:return C.ast.set({expression:{type:"root",value:K[q]}}),C.ast.unshift(),C.ast.yield();case 2:return C.ast.set({expression:{type:"root",value:K[q-1]}}),C.ast.unshift(),C.ast.yield();case 3:return C.ast.unshift(),C.ast.yield();case 4:return C.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:K[q-1]}}),C.ast.unshift(),C.ast.yield();case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:C.ast.set({operation:"member"}),C.ast.push();break;case 8:C.ast.set({operation:"subscript"}),C.ast.push();break;case 9:case 19:C.ast.set({scope:"child"});break;case 10:case 20:C.ast.set({scope:"descendant"});break;case 12:C.ast.set({scope:"child",operation:"member"});break;case 14:C.ast.set({expression:{type:"wildcard",value:K[q]}});break;case 15:C.ast.set({expression:{type:"identifier",value:K[q]}});break;case 16:C.ast.set({expression:{type:"script_expression",value:K[q]}});break;case 17:C.ast.set({expression:{type:"numeric_literal",value:parseInt(K[q])}});break;case 24:K[q].length>1?C.ast.set({expression:{type:"union",value:K[q]}}):this.$=K[q];break;case 25:this.$=[K[q]];break;case 26:this.$=K[q-2].concat(K[q]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(K[q])}},C.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:K[q]}},C.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:K[q]}},C.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:K[q]}},C.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:K[q]}},C.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:K[q]}},C.ast.set(this.$);break;case 33:case 34:this.$=K[q];break}},table:[{3:1,4:[1,2],6:3,13:4,15:n,16:s,17:i,18:o,19:a},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:u,14:l,20:16,21:17,22:c},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:u,14:l,20:16,21:17,22:c},r(d,[2,12]),r(d,[2,14]),r(d,[2,15]),r(d,[2,16]),r(d,[2,17]),r(d,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:u,14:l,20:16,21:17,22:c},r(d,[2,5]),r(d,[2,7]),r(d,[2,8]),r(d,[2,9]),r(d,[2,10]),r(d,[2,19]),r(d,[2,20]),{13:23,15:n,16:s,17:i,18:o,19:a},{13:24,15:n,16:s,17:i,18:o,19:a,22:[1,25]},{15:h,17:f,18:p,23:26,25:27,26:28,27:32,29:34,30:m,31:E,32:A,33:_},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:u,14:l,20:16,21:17,22:c},r(d,[2,6]),r(d,[2,11]),r(d,[2,13]),{15:h,17:f,18:p,23:38,25:27,26:28,27:32,29:34,30:m,31:E,32:A,33:_},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},r(g,[2,25]),r(g,[2,27]),r(g,[2,28]),r(g,[2,29]),r(g,[2,33]),r(g,[2,34]),{24:[1,41]},r(d,[2,21]),{18:p,27:42,29:34,30:m,32:A,33:_},r(d,[2,22]),r(g,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(b,T){if(T.recoverable)this.trace(b);else{var P=new Error(b);throw P.hash=T,P}},parse:function(b){var T=this,P=[0],C=[null],k=[],K=this.table,L="",q=0,se=0,X=2,re=1,W=k.slice.call(arguments,1),B=Object.create(this.lexer),te={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(te.yy[z]=this.yy[z]);B.setInput(b,te.yy),te.yy.lexer=B,te.yy.parser=this,typeof B.yylloc>"u"&&(B.yylloc={});var $=B.yylloc;k.push($);var F=B.options&&B.options.ranges;typeof te.yy.parseError=="function"?this.parseError=te.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var ee=function(){var I;return I=B.lex()||re,typeof I!="number"&&(I=T.symbols_[I]||I),I},ne,le,me,ve,Pe={},Ue,M,V,oe;;){if(le=P[P.length-1],this.defaultActions[le]?me=this.defaultActions[le]:((ne===null||typeof ne>"u")&&(ne=ee()),me=K[le]&&K[le][ne]),typeof me>"u"||!me.length||!me[0]){var j="";oe=[];for(Ue in K[le])this.terminals_[Ue]&&Ue>X&&oe.push("'"+this.terminals_[Ue]+"'");B.showPosition?j="Parse error on line "+(q+1)+`:
`+B.showPosition()+`
Expecting `+oe.join(", ")+", got '"+(this.terminals_[ne]||ne)+"'":j="Parse error on line "+(q+1)+": Unexpected "+(ne==re?"end of input":"'"+(this.terminals_[ne]||ne)+"'"),this.parseError(j,{text:B.match,token:this.terminals_[ne]||ne,line:B.yylineno,loc:$,expected:oe})}if(me[0]instanceof Array&&me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+le+", token: "+ne);switch(me[0]){case 1:P.push(ne),C.push(B.yytext),k.push(B.yylloc),P.push(me[1]),ne=null,se=B.yyleng,L=B.yytext,q=B.yylineno,$=B.yylloc;break;case 2:if(M=this.productions_[me[1]][1],Pe.$=C[C.length-M],Pe._$={first_line:k[k.length-(M||1)].first_line,last_line:k[k.length-1].last_line,first_column:k[k.length-(M||1)].first_column,last_column:k[k.length-1].last_column},F&&(Pe._$.range=[k[k.length-(M||1)].range[0],k[k.length-1].range[1]]),ve=this.performAction.apply(Pe,[L,se,q,te.yy,me[1],C,k].concat(W)),typeof ve<"u")return ve;M&&(P=P.slice(0,-1*M*2),C=C.slice(0,-1*M),k=k.slice(0,-1*M)),P.push(this.productions_[me[1]][0]),C.push(Pe.$),k.push(Pe._$),V=K[P[P.length-2]][P[P.length-1]],P.push(V);break;case 3:return!0}}return!0}},S={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(w){for(var b in w)this._node[b]=w[b];return this._node},node:function(w){return arguments.length&&(this._node=w),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var w=this._nodes;return this.initialize(),w}},x=function(){var w={EOF:1,parseError:function(T,P){if(this.yy.parser)this.yy.parser.parseError(T,P);else throw new Error(T)},setInput:function(b,T){return this.yy=T||this.yy||{},this._input=b,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var b=this._input[0];this.yytext+=b,this.yyleng++,this.offset++,this.match+=b,this.matched+=b;var T=b.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),b},unput:function(b){var T=b.length,P=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var C=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var k=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===C.length?this.yylloc.first_column:0)+C[C.length-P.length].length-P[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[k[0],k[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(b.length>20?"...":"")+b.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var b=this.match;return b.length<20&&(b+=this._input.substr(0,20-b.length)),(b.substr(0,20)+(b.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),T=new Array(b.length+1).join("-");return b+this.upcomingInput()+`
`+T+"^"},test_match:function(b,T){var P,C,k;if(this.options.backtrack_lexer&&(k={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(k.yylloc.range=this.yylloc.range.slice(0))),C=b[0].match(/(?:\r\n?|\n).*/g),C&&(this.yylineno+=C.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:C?C[C.length-1].length-C[C.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],P=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var K in k)this[K]=k[K];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,T,P,C;this._more||(this.yytext="",this.match="");for(var k=this._currentRules(),K=0;K<k.length;K++)if(P=this._input.match(this.rules[k[K]]),P&&(!T||P[0].length>T[0].length)){if(T=P,C=K,this.options.backtrack_lexer){if(b=this.test_match(P,k[K]),b!==!1)return b;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(b=this.test_match(T,k[C]),b!==!1?b:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(T,P,C,k){switch(C){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return P.yytext=P.yytext.substr(1,P.yyleng-2),32;case 11:return P.yytext=P.yytext.substr(1,P.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return w}();v.lexer=x;function D(){this.yy={}}return D.prototype=v,v.Parser=D,new D}();typeof Zme<"u"&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)})})(IK);function bb(){var t=new IK.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}var Xn=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}(),vr=function(){function t(){}return t.parse=function(e){return Xn.ok(typeof e=="string","we need a path"),new bb().parse(e)},t.parent=function(e,r){Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path");var n=this.nodes(e,r)[0];return n.path.pop(),this.value(e,n.path)},t.apply=function(e,r,n){Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path"),Xn.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path");var i=new bb().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var l=a.pop(),c=s.value(e,a);c||(o(a.concat(),typeof l=="string"?{}:[]),c=s.value(e,a)),c[l]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(Xn.ok(e instanceof Object,"obj needs to be an object"),Xn.ok(r,"we need a path"),n===0)return[];var s=new bb().parse(r),i=new Gme,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,l){if(!(a.length>=n)){var c=i.resolve(u),d=[];o.forEach(function(h){if(!(a.length>=n)){var f=c(u,h,n);l==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){Xn.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(Xn.ok(e,"we need a path"),typeof e=="string")return new bb().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+Xme.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();const $m=class $m{static extractInputField(e,r){let n=[];if(r){for(const s of r)if(n=vr.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){const s=$m.extractInputField(e,["$.."+r]);for(const i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){const r=$m.extractInputField(e,["$..path"]);for(const n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){const i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){const r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){const i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;const o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};Se($m,"matchAll",require("string.prototype.matchall")),Se($m,"REGEX_PATH",/@\w+/g);let ta=$m;class no{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){const r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;no.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){const n=e.map(s=>s[r]);return Array.from(new Set(n))}}class $d{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){const n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+"[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]"+")*)?";return new RegExp(n).test(e)}}class Yme{constructor(e,r,n,s,i,o){Se(this,"input_descriptors");Se(this,"format");Se(this,"id");Se(this,"name");Se(this,"purpose");Se(this,"submission_requirements");this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return Na.v1}}class Qme{constructor(e,r,n,s,i,o,a){Se(this,"format");Se(this,"frame");Se(this,"id");Se(this,"input_descriptors");Se(this,"name");Se(this,"purpose");Se(this,"submission_requirements");this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return Na.v2}}var Na;(function(t){t.v1="v1",t.v2="v2"})(Na||(Na={}));class cs{static modelEntityToInternalPresentationDefinitionV1(e){const r=cs.createCopyAndModifyPresentationDefinition(e);return new Yme(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){const r=cs.createCopyAndModifyPresentationDefinition(e);return new Qme(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){const r=JSON.parse(JSON.stringify(e));return ta.changePropertyNameRecursively(r,"_const","const"),ta.changePropertyNameRecursively(r,"_enum","enum"),ta.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e){return py.CredentialMapper.toWrappedVerifiablePresentation(e)}static mapExternalVerifiableCredentialsToWrappedVcs(e){return py.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e])}static toInternalPresentationDefinition(e){const r=JSON.parse(JSON.stringify(e)),n=Yx(r);if(n.error)throw n.error;return n.version==Na.v1?cs.modelEntityToInternalPresentationDefinitionV1(r):cs.modelEntityInternalPresentationDefinitionV2(r)}}var RI={exports:{}};RI.exports=NI;RI.exports.default=NI;const Bn={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},rn={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},jF=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),UF=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),LF=new RegExp("additionalProperties","u");function _1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(const a in t)if(!(jF.test(a)||UF.test(a)||LF.test(a))){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:rn,data:t};i===null?i=[u]:i.push(u),o++}for(const a in t)if(jF.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}for(const l in u)if(l!=="alg"){const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.alg!==void 0){let l=u.alg;if(Array.isArray(l)){if(l.length<1){const d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:l};i===null?i=[d]:i.push(d),o++}const c=l.length;for(let d=0;d<c;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:rn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}}for(const a in t)if(UF.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}for(const l in u)if(l!=="proof_type"){const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.proof_type!==void 0){let l=u.proof_type;if(Array.isArray(l)){if(l.length<1){const d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[d]:i.push(d),o++}const c=l.length;for(let d=0;d<c;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:rn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}}for(const a in t)if(LF.test(a)){const u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:rn.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rn.type,parentSchema:rn,data:t};i===null?i=[a]:i.push(a),o++}return _1.errors=i,o===0}const ct={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},PT={validate:Y0};function Y0(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){const f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ct.type,parentSchema:ct,data:t};i===null?i=[f]:i.push(f),o++}const a=o;let u=!1,l=null;const c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:ct.oneOf[0].required,parentSchema:ct.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:ct.oneOf[0].required,parentSchema:ct.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){const p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ct.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[0].properties.name.type,parentSchema:ct.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[0].properties.purpose.type,parentSchema:ct.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[0].properties.rule.type,parentSchema:ct.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:ct.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:ct.oneOf[0].properties.rule.enum,parentSchema:ct.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[0].properties.count.type,parentSchema:ct.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:ct.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[0].properties.min.type,parentSchema:ct.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:ct.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[0].properties.max.type,parentSchema:ct.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:ct.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){const p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[0].properties.from.type,parentSchema:ct.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=c===o;h&&(u=!0,l=0);const d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:ct.oneOf[1].required,parentSchema:ct.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:ct.oneOf[1].required,parentSchema:ct.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){const p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ct.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[1].properties.name.type,parentSchema:ct.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[1].properties.purpose.type,parentSchema:ct.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ct.oneOf[1].properties.rule.type,parentSchema:ct.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:ct.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:ct.oneOf[1].properties.rule.enum,parentSchema:ct.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[1].properties.count.type,parentSchema:ct.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:ct.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[1].properties.min.type,parentSchema:ct.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:ct.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ct.oneOf[1].properties.max.type,parentSchema:ct.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:ct.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){const m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ct.oneOf[1].properties.from_nested,data:f};i===null?i=[m]:i.push(m),o++}const p=f.length;for(let m=0;m<p;m++)PT.validate(f[m],{instancePath:e+"/from_nested/"+m,parentData:f,parentDataProperty:m,rootData:s})||(i=i===null?PT.validate.errors:i.concat(PT.validate.errors),o=i.length)}else{const p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ct.oneOf[1].properties.from_nested.type,parentSchema:ct.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:ct.oneOf,parentSchema:ct,data:t};i===null?i=[f]:i.push(f),o++}return Y0.errors=i,o===0}const Re={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},Sc={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function b1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:Sc.required,parentSchema:Sc,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!(a==="uri"||a==="required")){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Sc,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){const u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Sc.properties.uri.type,parentSchema:Sc.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){const u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Sc.properties.required.type,parentSchema:Sc.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Sc.type,parentSchema:Sc,data:t};i===null?i=[a]:i.push(a),o++}return b1.errors=i,o===0}const Eb={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function E1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){const u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Eb.properties.manifest.type,parentSchema:Eb.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Eb.type,parentSchema:Eb,data:t};i===null?i=[a]:i.push(a),o++}return E1.errors=i,o===0}const sr={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},Jt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},eye=Object.prototype.hasOwnProperty;function gh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Jt.required,parentSchema:Jt,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!eye.call(Jt.properties,a)){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Jt,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){const u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jt.properties.type.type,parentSchema:Jt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){const u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jt.properties.format.type,parentSchema:Jt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){const u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jt.properties.pattern.type,parentSchema:Jt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){const u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:Jt.properties.minimum.type},message:"must be number,string",schema:Jt.properties.minimum.type,parentSchema:Jt.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){const u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Jt.properties.minLength.type,parentSchema:Jt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){const u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Jt.properties.maxLength.type,parentSchema:Jt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){const u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:Jt.properties.exclusiveMinimum.type},message:"must be number,string",schema:Jt.properties.exclusiveMinimum.type,parentSchema:Jt.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){const u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:Jt.properties.exclusiveMaximum.type},message:"must be number,string",schema:Jt.properties.exclusiveMaximum.type,parentSchema:Jt.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){const u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:Jt.properties.maximum.type},message:"must be number,string",schema:Jt.properties.maximum.type,parentSchema:Jt.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){const u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:Jt.properties.const.type},message:"must be number,string",schema:Jt.properties.const.type,parentSchema:Jt.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++){let c=a[l];if(typeof c!="number"&&typeof c!="string"){const d={instancePath:e+"/enum/"+l,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:Jt.properties.enum.items.type},message:"must be number,string",schema:Jt.properties.enum.items.type,parentSchema:Jt.properties.enum.items,data:c};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jt.properties.enum.type,parentSchema:Jt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){const u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:Jt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{const u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jt.properties.not.type,parentSchema:Jt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jt.type,parentSchema:Jt,data:t};i===null?i=[a]:i.push(a),o++}return gh.errors=i,o===0}function A1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){const f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:sr.type,parentSchema:sr,data:t};i===null?i=[f]:i.push(f),o++}const a=o;let u=!1,l=null;const c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:sr.oneOf[0].required,parentSchema:sr.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){const p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:sr.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){const p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[0].properties.id.type,parentSchema:sr.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){const p=f.length;for(let m=0;m<p;m++){let E=f[m];if(typeof E!="string"){const A={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[0].properties.path.items.type,parentSchema:sr.oneOf[0].properties.path.items,data:E};i===null?i=[A]:i.push(A),o++}}}else{const p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:sr.oneOf[0].properties.path.type,parentSchema:sr.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[0].properties.purpose.type,parentSchema:sr.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}t.filter!==void 0&&(gh(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?gh.errors:i.concat(gh.errors),o=i.length))}var h=c===o;h&&(u=!0,l=0);const d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:sr.oneOf[1].required,parentSchema:sr.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:sr.oneOf[1].required,parentSchema:sr.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:sr.oneOf[1].required,parentSchema:sr.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){const p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:sr.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){const p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[1].properties.id.type,parentSchema:sr.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){const p=f.length;for(let m=0;m<p;m++){let E=f[m];if(typeof E!="string"){const A={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[1].properties.path.items.type,parentSchema:sr.oneOf[1].properties.path.items,data:E};i===null?i=[A]:i.push(A),o++}}}else{const p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:sr.oneOf[1].properties.path.type,parentSchema:sr.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[1].properties.purpose.type,parentSchema:sr.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(gh(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?gh.errors:i.concat(gh.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){const p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:sr.oneOf[1].properties.predicate.type,parentSchema:sr.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){const p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:sr.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:sr.oneOf[1].properties.predicate.enum,parentSchema:sr.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:sr.oneOf,parentSchema:sr,data:t};i===null?i=[f]:i.push(f),o++}return A1.errors=i,o===0}function S1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Re.required,parentSchema:Re,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:Re.required,parentSchema:Re,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Re,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){const u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.id.type,parentSchema:Re.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){const u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.name.type,parentSchema:Re.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){const u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.purpose.type,parentSchema:Re.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++){let c=a[l];if(typeof c!="string"){const d={instancePath:e+"/group/"+l,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.group.items.type,parentSchema:Re.properties.group.items,data:c};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.group.type,parentSchema:Re.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++)b1(a[l],{instancePath:e+"/schema/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?b1.errors:i.concat(b1.errors),o=i.length)}else{const u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.schema.type,parentSchema:Re.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++)E1(a[l],{instancePath:e+"/issuance/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?E1.errors:i.concat(E1.errors),o=i.length)}else{const u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.issuance.type,parentSchema:Re.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(const u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){const l={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Re.properties.constraints,data:a};i===null?i=[l]:i.push(l),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){const l={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.limit_disclosure.type,parentSchema:Re.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[l]:i.push(l),o++}if(!(u==="required"||u==="preferred")){const l={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.limit_disclosure.enum,parentSchema:Re.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[l]:i.push(l),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let l=u.active;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:Re.properties.constraints.properties.statuses.properties.active.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:Re.properties.constraints.properties.statuses.properties.active.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.statuses.properties.active.type,parentSchema:Re.properties.constraints.properties.statuses.properties.active,data:l};i===null?i=[c]:i.push(c),o++}}if(u.suspended!==void 0){let l=u.suspended;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:Re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:Re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:Re.properties.constraints.properties.statuses.properties.suspended,data:l};i===null?i=[c]:i.push(c),o++}}if(u.revoked!==void 0){let l=u.revoked;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:Re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:Re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:Re.properties.constraints.properties.statuses.properties.revoked,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.statuses.type,parentSchema:Re.properties.constraints.properties.statuses,data:u};i===null?i=[l]:i.push(l),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)A1(u[c],{instancePath:e+"/constraints/fields/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?A1.errors:i.concat(A1.errors),o=i.length)}else{const l={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.constraints.properties.fields.type,parentSchema:Re.properties.constraints.properties.fields,data:u};i===null?i=[l]:i.push(l),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){const l={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.subject_is_issuer.type,parentSchema:Re.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[l]:i.push(l),o++}if(!(u==="required"||u==="preferred")){const l={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.subject_is_issuer.enum,parentSchema:Re.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[l]:i.push(l),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++){let d=u[c];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Re.properties.constraints.properties.is_holder.items.required,parentSchema:Re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Re.properties.constraints.properties.is_holder.items.required,parentSchema:Re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let m=h[p];if(typeof m!="string"){const E={instancePath:e+"/constraints/is_holder/"+c+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:Re.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[E]:i.push(E),o++}}}else{const f={instancePath:e+"/constraints/is_holder/"+c+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:Re.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:e+"/constraints/is_holder/"+c+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:Re.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:e+"/constraints/is_holder/"+c+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:Re.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.is_holder.items.type,parentSchema:Re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.constraints.properties.is_holder.type,parentSchema:Re.properties.constraints.properties.is_holder,data:u};i===null?i=[l]:i.push(l),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++){let d=u[c];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Re.properties.constraints.properties.same_subject.items.required,parentSchema:Re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Re.properties.constraints.properties.same_subject.items.required,parentSchema:Re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let m=h[p];if(typeof m!="string"){const E={instancePath:e+"/constraints/same_subject/"+c+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:Re.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[E]:i.push(E),o++}}}else{const f={instancePath:e+"/constraints/same_subject/"+c+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:Re.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:e+"/constraints/same_subject/"+c+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Re.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:Re.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:e+"/constraints/same_subject/"+c+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Re.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Re.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:Re.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.properties.same_subject.items.type,parentSchema:Re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Re.properties.constraints.properties.same_subject.type,parentSchema:Re.properties.constraints.properties.same_subject,data:u};i===null?i=[l]:i.push(l),o++}}}else{const u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.properties.constraints.type,parentSchema:Re.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Re.type,parentSchema:Re,data:t};i===null?i=[a]:i.push(a),o++}return S1.errors=i,o===0}function NI(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Bn.properties.presentation_definition.required,parentSchema:Bn.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Bn.properties.presentation_definition.required,parentSchema:Bn.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(const u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){const l={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Bn.properties.presentation_definition,data:a};i===null?i=[l]:i.push(l),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Bn.properties.presentation_definition.properties.id.type,parentSchema:Bn.properties.presentation_definition.properties.id,data:u};i===null?i=[l]:i.push(l),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Bn.properties.presentation_definition.properties.name.type,parentSchema:Bn.properties.presentation_definition.properties.name,data:u};i===null?i=[l]:i.push(l),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Bn.properties.presentation_definition.properties.purpose.type,parentSchema:Bn.properties.presentation_definition.properties.purpose,data:u};i===null?i=[l]:i.push(l),o++}}if(a.format!==void 0&&(_1(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?_1.errors:i.concat(_1.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)Y0(u[c],{instancePath:e+"/presentation_definition/submission_requirements/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?Y0.errors:i.concat(Y0.errors),o=i.length)}else{const l={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Bn.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Bn.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[l]:i.push(l),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)S1(u[c],{instancePath:e+"/presentation_definition/input_descriptors/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?S1.errors:i.concat(S1.errors),o=i.length)}else{const l={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Bn.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Bn.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[l]:i.push(l),o++}}}else{const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Bn.properties.presentation_definition.type,parentSchema:Bn.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Bn.type,parentSchema:Bn,data:t};i===null?i=[a]:i.push(a),o++}return NI.errors=i,o===0}var tye=RI.exports;const kK=Zu(tye);var BI={exports:{}},Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});const $K=oS;$K.code='require("ajv/dist/runtime/equal").default';Uy.default=$K;BI.exports=FI;BI.exports.default=FI;const _n={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},nn={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},KF=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),VF=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),qF=new RegExp("additionalProperties","u");function rp(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(const a in t)if(!(KF.test(a)||VF.test(a)||qF.test(a))){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:nn,data:t};i===null?i=[u]:i.push(u),o++}for(const a in t)if(KF.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}for(const l in u)if(l!=="alg"){const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.alg!==void 0){let l=u.alg;if(Array.isArray(l)){if(l.length<1){const d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:l};i===null?i=[d]:i.push(d),o++}const c=l.length;for(let d=0;d<c;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:nn.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}}for(const a in t)if(VF.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}for(const l in u)if(l!=="proof_type"){const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties",schema:!1,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.proof_type!==void 0){let l=u.proof_type;if(Array.isArray(l)){if(l.length<1){const d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[d]:i.push(d),o++}const c=l.length;for(let d=0;d<c;d++){let h=l[d];if(typeof h!="string"){const f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{const c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:nn.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}}for(const a in t)if(qF.test(a)){const u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:nn.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nn.type,parentSchema:nn,data:t};i===null?i=[a]:i.push(a),o++}return rp.errors=i,o===0}const lt={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},CT={validate:Q0};function Q0(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){const f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lt.type,parentSchema:lt,data:t};i===null?i=[f]:i.push(f),o++}const a=o;let u=!1,l=null;const c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:lt.oneOf[0].required,parentSchema:lt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:lt.oneOf[0].required,parentSchema:lt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){const p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:lt.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[0].properties.name.type,parentSchema:lt.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[0].properties.purpose.type,parentSchema:lt.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[0].properties.rule.type,parentSchema:lt.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:lt.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:lt.oneOf[0].properties.rule.enum,parentSchema:lt.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[0].properties.count.type,parentSchema:lt.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:lt.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[0].properties.min.type,parentSchema:lt.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:lt.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[0].properties.max.type,parentSchema:lt.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:lt.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){const p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[0].properties.from.type,parentSchema:lt.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=c===o;h&&(u=!0,l=0);const d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:lt.oneOf[1].required,parentSchema:lt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:lt.oneOf[1].required,parentSchema:lt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){const p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:lt.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[1].properties.name.type,parentSchema:lt.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[1].properties.purpose.type,parentSchema:lt.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.oneOf[1].properties.rule.type,parentSchema:lt.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){const p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:lt.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:lt.oneOf[1].properties.rule.enum,parentSchema:lt.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[1].properties.count.type,parentSchema:lt.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){const p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:lt.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[1].properties.min.type,parentSchema:lt.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:lt.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.oneOf[1].properties.max.type,parentSchema:lt.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){const p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:lt.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){const m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:lt.oneOf[1].properties.from_nested,data:f};i===null?i=[m]:i.push(m),o++}const p=f.length;for(let m=0;m<p;m++)CT.validate(f[m],{instancePath:e+"/from_nested/"+m,parentData:f,parentDataProperty:m,rootData:s})||(i=i===null?CT.validate.errors:i.concat(CT.validate.errors),o=i.length)}else{const p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:lt.oneOf[1].properties.from_nested.type,parentSchema:lt.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:lt.oneOf,parentSchema:lt,data:t};i===null?i=[f]:i.push(f),o++}return Q0.errors=i,o===0}const Fe={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},Ab={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function T1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){const u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ab.properties.manifest.type,parentSchema:Ab.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ab.type,parentSchema:Ab,data:t};i===null?i=[a]:i.push(a),o++}return T1.errors=i,o===0}const jt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},Ze={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},IT={type:"integer",minimum:0};function ro(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:IT.type,parentSchema:IT,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){const a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:IT,data:t};i===null?i=[a]:i.push(a),o++}return ro.errors=i,o===0}function cu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return ro(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?ro.errors:i.concat(ro.errors),o=i.length),cu.errors=i,o===0}const kT={type:"array",minItems:1,items:{$ref:"#"}},$T={validate:It};function Ys(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){const u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:kT,data:t};i===null?i=[u]:i.push(u),o++}const a=t.length;for(let u=0;u<a;u++)$T.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?$T.validate.errors:i.concat($T.validate.errors),o=i.length)}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:kT.type,parentSchema:kT,data:t};i===null?i=[a]:i.push(a),o++}return Ys.errors=i,o===0}const Zg={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function vh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){const a=t.length;for(let c=0;c<a;c++){let d=t[c];if(typeof d!="string"){const h={instancePath:e+"/"+c,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Zg.items.type,parentSchema:Zg.items,data:d};i===null?i=[h]:i.push(h),o++}}let u=t.length,l;if(u>1){const c={};for(;u--;){let d=t[u];if(typeof d=="string"){if(typeof c[d]=="number"){l=c[d];const h={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:l},message:"must NOT have duplicate items (items ## "+l+" and "+u+" are identical)",schema:!0,parentSchema:Zg,data:t};i===null?i=[h]:i.push(h),o++;break}c[d]=u}}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Zg.type,parentSchema:Zg,data:t};i===null?i=[a]:i.push(a),o++}return vh.errors=i,o===0}const OT={enum:["array","boolean","integer","null","number","object","string"]};function wh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){const a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:OT.enum},message:"must be equal to one of the allowed values",schema:OT.enum,parentSchema:OT,data:t};i===null?i=[a]:i.push(a),o++}return wh.errors=i,o===0}const HF=Uy.default;function It(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){const d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:Ze.type},message:"must be object,boolean",schema:Ze.type,parentSchema:Ze,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){const h={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.$id.type,parentSchema:Ze.properties.$id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){const h={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.$schema.type,parentSchema:Ze.properties.$schema,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){const h={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.$ref.type,parentSchema:Ze.properties.$ref,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){const h={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.$comment.type,parentSchema:Ze.properties.$comment,data:d};i===null?i=[h]:i.push(h),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){const h={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.title.type,parentSchema:Ze.properties.title,data:d};i===null?i=[h]:i.push(h),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){const h={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.description.type,parentSchema:Ze.properties.description,data:d};i===null?i=[h]:i.push(h),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){const h={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Ze.properties.readOnly.type,parentSchema:Ze.properties.readOnly,data:d};i===null?i=[h]:i.push(h),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){const h={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ze.properties.examples.type,parentSchema:Ze.properties.examples,data:d};i===null?i=[h]:i.push(h),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){const h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:Ze.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}else{const h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ze.properties.multipleOf.type,parentSchema:Ze.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){const h={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ze.properties.maximum.type,parentSchema:Ze.properties.maximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){const h={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ze.properties.exclusiveMaximum.type,parentSchema:Ze.properties.exclusiveMaximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){const h={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ze.properties.minimum.type,parentSchema:Ze.properties.minimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){const h={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ze.properties.exclusiveMinimum.type,parentSchema:Ze.properties.exclusiveMinimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maxLength!==void 0&&(ro(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?ro.errors:i.concat(ro.errors),o=i.length)),t.minLength!==void 0&&(cu(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?cu.errors:i.concat(cu.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){const h={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.pattern.type,parentSchema:Ze.properties.pattern,data:d};i===null?i=[h]:i.push(h),o++}}if(t.additionalItems!==void 0&&(It(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.items!==void 0){let d=t.items;const h=o;let f=!1;const p=o;It(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length);var a=p===o;if(f=f||a,!f){const m=o;Ys(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Ys.errors:i.concat(Ys.errors),o=i.length);var a=m===o;f=f||a}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{const m={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Ze.properties.items.anyOf,parentSchema:Ze.properties.items,data:d};i===null?i=[m]:i.push(m),o++}}if(t.maxItems!==void 0&&(ro(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?ro.errors:i.concat(ro.errors),o=i.length)),t.minItems!==void 0&&(cu(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?cu.errors:i.concat(cu.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){const h={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Ze.properties.uniqueItems.type,parentSchema:Ze.properties.uniqueItems,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contains!==void 0&&(It(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.maxProperties!==void 0&&(ro(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?ro.errors:i.concat(ro.errors),o=i.length)),t.minProperties!==void 0&&(cu(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?cu.errors:i.concat(cu.errors),o=i.length)),t.required!==void 0&&(vh(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?vh.errors:i.concat(vh.errors),o=i.length)),t.additionalProperties!==void 0&&(It(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d)It(d[h],{instancePath:e+"/definitions/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length);else{const h={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ze.properties.definitions.type,parentSchema:Ze.properties.definitions,data:d};i===null?i=[h]:i.push(h),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d)It(d[h],{instancePath:e+"/properties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length);else{const h={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ze.properties.properties.type,parentSchema:Ze.properties.properties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(const h in d){var u=o===o;if(!u){const p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:h},message:"property name must be valid",schema:Ze.properties.patternProperties.propertyNames,parentSchema:Ze.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}for(const h in d)It(d[h],{instancePath:e+"/patternProperties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)}else{const h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ze.properties.patternProperties.type,parentSchema:Ze.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(const h in d){let f=d[h];const p=o;let m=!1;const E=o;It(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length);var l=E===o;if(m=m||l,!m){const A=o;vh(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?vh.errors:i.concat(vh.errors),o=i.length);var l=A===o;m=m||l}if(m)o=p,i!==null&&(p?i.length=p:i=null);else{const A={instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Ze.properties.dependencies.additionalProperties.anyOf,parentSchema:Ze.properties.dependencies.additionalProperties,data:f};i===null?i=[A]:i.push(A),o++}}else{const h={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ze.properties.dependencies.type,parentSchema:Ze.properties.dependencies,data:d};i===null?i=[h]:i.push(h),o++}}if(t.propertyNames!==void 0&&(It(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){const p={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ze.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}let h=d.length,f;if(h>1){e:for(;h--;)for(f=h;f--;)if(HF(d[h],d[f])){const p={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:h,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+h+" are identical)",schema:!0,parentSchema:Ze.properties.enum,data:d};i===null?i=[p]:i.push(p),o++;break e}}}else{const h={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ze.properties.enum.type,parentSchema:Ze.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.type!==void 0){let d=t.type;const h=o;let f=!1;const p=o;wh(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?wh.errors:i.concat(wh.errors),o=i.length);var c=p===o;if(f=f||c,!f){const m=o;if(Array.isArray(d)){if(d.length<1){const v={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ze.properties.type.anyOf[1],data:d};i===null?i=[v]:i.push(v),o++}const A=d.length;for(let v=0;v<A;v++)wh(d[v],{instancePath:e+"/type/"+v,parentData:d,parentDataProperty:v,rootData:s})||(i=i===null?wh.errors:i.concat(wh.errors),o=i.length);let _=d.length,g;if(_>1){e:for(;_--;)for(g=_;g--;)if(HF(d[_],d[g])){const v={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:_,j:g},message:"must NOT have duplicate items (items ## "+g+" and "+_+" are identical)",schema:!0,parentSchema:Ze.properties.type.anyOf[1],data:d};i===null?i=[v]:i.push(v),o++;break e}}}else{const A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ze.properties.type.anyOf[1].type,parentSchema:Ze.properties.type.anyOf[1],data:d};i===null?i=[A]:i.push(A),o++}var c=m===o;f=f||c}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{const m={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Ze.properties.type.anyOf,parentSchema:Ze.properties.type,data:d};i===null?i=[m]:i.push(m),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){const h={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.format.type,parentSchema:Ze.properties.format,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){const h={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.contentMediaType.type,parentSchema:Ze.properties.contentMediaType,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){const h={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ze.properties.contentEncoding.type,parentSchema:Ze.properties.contentEncoding,data:d};i===null?i=[h]:i.push(h),o++}}t.if!==void 0&&(It(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.then!==void 0&&(It(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.else!==void 0&&(It(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.allOf!==void 0&&(Ys(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Ys.errors:i.concat(Ys.errors),o=i.length)),t.anyOf!==void 0&&(Ys(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Ys.errors:i.concat(Ys.errors),o=i.length)),t.oneOf!==void 0&&(Ys(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Ys.errors:i.concat(Ys.errors),o=i.length)),t.not!==void 0&&(It(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length))}return It.errors=i,o===0}function D1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){const f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:jt.type,parentSchema:jt,data:t};i===null?i=[f]:i.push(f),o++}const a=o;let u=!1,l=null;const c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){const f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:jt.oneOf[0].required,parentSchema:jt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){const p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:jt.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){const p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[0].properties.id.type,parentSchema:jt.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){const p=f.length;for(let m=0;m<p;m++){let E=f[m];if(typeof E!="string"){const A={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[0].properties.path.items.type,parentSchema:jt.oneOf[0].properties.path.items,data:E};i===null?i=[A]:i.push(A),o++}}}else{const p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:jt.oneOf[0].properties.path.type,parentSchema:jt.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[0].properties.purpose.type,parentSchema:jt.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){const p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:jt.oneOf[0].properties.intent_to_retain.type,parentSchema:jt.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(It(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[0].properties.name.type,parentSchema:jt.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=c===o;h&&(u=!0,l=0);const d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:jt.oneOf[1].required,parentSchema:jt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:jt.oneOf[1].required,parentSchema:jt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){const f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:jt.oneOf[1].required,parentSchema:jt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(const f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){const p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:jt.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){const p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[1].properties.id.type,parentSchema:jt.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){const p=f.length;for(let m=0;m<p;m++){let E=f[m];if(typeof E!="string"){const A={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[1].properties.path.items.type,parentSchema:jt.oneOf[1].properties.path.items,data:E};i===null?i=[A]:i.push(A),o++}}}else{const p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:jt.oneOf[1].properties.path.type,parentSchema:jt.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){const p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[1].properties.purpose.type,parentSchema:jt.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){const p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:jt.oneOf[1].properties.intent_to_retain.type,parentSchema:jt.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(It(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?It.errors:i.concat(It.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){const p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[1].properties.predicate.type,parentSchema:jt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){const p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:jt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:jt.oneOf[1].properties.predicate.enum,parentSchema:jt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){const p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jt.oneOf[1].properties.name.type,parentSchema:jt.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{const f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf",schema:jt.oneOf,parentSchema:jt,data:t};i===null?i=[f]:i.push(f),o++}return D1.errors=i,o===0}function x1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Fe.required,parentSchema:Fe,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Fe,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){const u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.id.type,parentSchema:Fe.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){const u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.name.type,parentSchema:Fe.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){const u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.purpose.type,parentSchema:Fe.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++)T1(a[l],{instancePath:e+"/issuance/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?T1.errors:i.concat(T1.errors),o=i.length)}else{const u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.issuance.type,parentSchema:Fe.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++){let c=a[l];if(typeof c!="string"){const d={instancePath:e+"/group/"+l,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.group.items.type,parentSchema:Fe.properties.group.items,data:c};i===null?i=[d]:i.push(d),o++}}}else{const u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.group.type,parentSchema:Fe.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(rp(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?rp.errors:i.concat(rp.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(const u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){const l={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.properties.constraints,data:a};i===null?i=[l]:i.push(l),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){const l={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.limit_disclosure.type,parentSchema:Fe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[l]:i.push(l),o++}if(!(u==="required"||u==="preferred")){const l={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.limit_disclosure.enum,parentSchema:Fe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[l]:i.push(l),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let l=u.active;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.active.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:Fe.properties.constraints.properties.statuses.properties.active.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.statuses.properties.active.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.active,data:l};i===null?i=[c]:i.push(c),o++}}if(u.suspended!==void 0){let l=u.suspended;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:Fe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.suspended,data:l};i===null?i=[c]:i.push(c),o++}}if(u.revoked!==void 0){let l=u.revoked;if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.directive!==void 0){let c=l.directive;if(typeof c!="string"){const d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}if(!(c==="required"||c==="allowed"||c==="disallowed")){const d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:Fe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:c};i===null?i=[d]:i.push(d),o++}}}else{const c={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:Fe.properties.constraints.properties.statuses.properties.revoked,data:l};i===null?i=[c]:i.push(c),o++}}}else{const l={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.statuses.type,parentSchema:Fe.properties.constraints.properties.statuses,data:u};i===null?i=[l]:i.push(l),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)D1(u[c],{instancePath:e+"/constraints/fields/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?D1.errors:i.concat(D1.errors),o=i.length)}else{const l={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.constraints.properties.fields.type,parentSchema:Fe.properties.constraints.properties.fields,data:u};i===null?i=[l]:i.push(l),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){const l={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.subject_is_issuer.type,parentSchema:Fe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[l]:i.push(l),o++}if(!(u==="required"||u==="preferred")){const l={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.subject_is_issuer.enum,parentSchema:Fe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[l]:i.push(l),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++){let d=u[c];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Fe.properties.constraints.properties.is_holder.items.required,parentSchema:Fe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Fe.properties.constraints.properties.is_holder.items.required,parentSchema:Fe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let m=h[p];if(typeof m!="string"){const E={instancePath:e+"/constraints/is_holder/"+c+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:Fe.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[E]:i.push(E),o++}}}else{const f={instancePath:e+"/constraints/is_holder/"+c+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:Fe.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:e+"/constraints/is_holder/"+c+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:Fe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:e+"/constraints/is_holder/"+c+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:Fe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:e+"/constraints/is_holder/"+c,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.is_holder.items.type,parentSchema:Fe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.constraints.properties.is_holder.type,parentSchema:Fe.properties.constraints.properties.is_holder,data:u};i===null?i=[l]:i.push(l),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++){let d=u[c];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:Fe.properties.constraints.properties.same_subject.items.required,parentSchema:Fe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:Fe.properties.constraints.properties.same_subject.items.required,parentSchema:Fe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(const h in d)if(!(h==="field_id"||h==="directive")){const f={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){const f=h.length;for(let p=0;p<f;p++){let m=h[p];if(typeof m!="string"){const E={instancePath:e+"/constraints/same_subject/"+c+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:Fe.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[E]:i.push(E),o++}}}else{const f={instancePath:e+"/constraints/same_subject/"+c+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:Fe.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){const f={instancePath:e+"/constraints/same_subject/"+c+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:Fe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){const f={instancePath:e+"/constraints/same_subject/"+c+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:Fe.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:Fe.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:Fe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{const h={instancePath:e+"/constraints/same_subject/"+c,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.properties.same_subject.items.type,parentSchema:Fe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{const l={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties.constraints.properties.same_subject.type,parentSchema:Fe.properties.constraints.properties.same_subject,data:u};i===null?i=[l]:i.push(l),o++}}}else{const u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties.constraints.type,parentSchema:Fe.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.type,parentSchema:Fe,data:t};i===null?i=[a]:i.push(a),o++}return x1.errors=i,o===0}function FI(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:_n.properties.presentation_definition.required,parentSchema:_n.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:_n.properties.presentation_definition.required,parentSchema:_n.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(const u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){const l={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:_n.properties.presentation_definition,data:a};i===null?i=[l]:i.push(l),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_n.properties.presentation_definition.properties.id.type,parentSchema:_n.properties.presentation_definition.properties.id,data:u};i===null?i=[l]:i.push(l),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_n.properties.presentation_definition.properties.name.type,parentSchema:_n.properties.presentation_definition.properties.name,data:u};i===null?i=[l]:i.push(l),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){const l={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_n.properties.presentation_definition.properties.purpose.type,parentSchema:_n.properties.presentation_definition.properties.purpose,data:u};i===null?i=[l]:i.push(l),o++}}if(a.format!==void 0&&(rp(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?rp.errors:i.concat(rp.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){const l={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:_n.properties.presentation_definition.properties.frame.type,parentSchema:_n.properties.presentation_definition.properties.frame,data:u};i===null?i=[l]:i.push(l),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)Q0(u[c],{instancePath:e+"/presentation_definition/submission_requirements/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?Q0.errors:i.concat(Q0.errors),o=i.length)}else{const l={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:_n.properties.presentation_definition.properties.submission_requirements.type,parentSchema:_n.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[l]:i.push(l),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){const l=u.length;for(let c=0;c<l;c++)x1(u[c],{instancePath:e+"/presentation_definition/input_descriptors/"+c,parentData:u,parentDataProperty:c,rootData:s})||(i=i===null?x1.errors:i.concat(x1.errors),o=i.length)}else{const l={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:_n.properties.presentation_definition.properties.input_descriptors.type,parentSchema:_n.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[l]:i.push(l),o++}}}else{const u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:_n.properties.presentation_definition.type,parentSchema:_n.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:_n.type,parentSchema:_n,data:t};i===null?i=[a]:i.push(a),o++}return FI.errors=i,o===0}var rye=BI.exports;const OK=Zu(rye);function nye(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}function iye(t){return no.isString(t.issuer)?t.issuer:t.issuer.id}function Yx(t){const e=JSON.parse(JSON.stringify(t));ta.changePropertyNameRecursively(e,"_const","const"),ta.changePropertyNameRecursively(e,"_enum","enum");const r={presentation_definition:e};let n=OK(r);return n?{version:Na.v2}:(n=kK(r),n?{version:Na.v1}:{error:"This is not a valid PresentationDefinition"})}function OE(t,e){let r=(t==null?void 0:t.map(n=>n.toLowerCase()).map(n=>n.startsWith("did:")?n:`did:${n}`))??[];return r.includes("did")?[]:r}function sye(t,e){const r=OE(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}function oye(t,e){const r=OE(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}class tc{constructor(e){Se(this,"_client");Se(this,"nextHandler");this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===Be.ERROR&&a.evaluator===this.getName()).find(a=>(i=vr.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&(i==null?void 0:i.id)===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}}var Qx={exports:{}},RK={},Ba={},my={},jw={},zt={},qv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(_){if(super(),!t.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((g,v)=>`${g}${v}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((g,v)=>(v instanceof r&&(g[v.str]=(g[v.str]||0)+1),g),{})}}t._Code=n,t.nil=new n("");function s(A,..._){const g=[A[0]];let v=0;for(;v<_.length;)a(g,_[v]),g.push(A[++v]);return new n(g)}t._=s;const i=new n("+");function o(A,..._){const g=[f(A[0])];let v=0;for(;v<_.length;)g.push(i),a(g,_[v]),g.push(i,f(A[++v]));return u(g),new n(g)}t.str=o;function a(A,_){_ instanceof n?A.push(..._._items):_ instanceof r?A.push(_):A.push(d(_))}t.addCodeArg=a;function u(A){let _=1;for(;_<A.length-1;){if(A[_]===i){const g=l(A[_-1],A[_+1]);if(g!==void 0){A.splice(_-1,3,g);continue}A[_++]="+"}_++}}function l(A,_){if(_==='""')return A;if(A==='""')return _;if(typeof A=="string")return _ instanceof r||A[A.length-1]!=='"'?void 0:typeof _!="string"?`${A.slice(0,-1)}${_}"`:_[0]==='"'?A.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(A instanceof r))return`"${A}${_.slice(1)}`}function c(A,_){return _.emptyStr()?A:A.emptyStr()?_:o`${A}${_}`}t.strConcat=c;function d(A){return typeof A=="number"||typeof A=="boolean"||A===null?A:f(Array.isArray(A)?A.join(","):A)}function h(A){return new n(f(A))}t.stringify=h;function f(A){return JSON.stringify(A).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=f;function p(A){return typeof A=="string"&&t.IDENTIFIER.test(A)?new n(`.${A}`):s`[${A}]`}t.getProperty=p;function m(A){if(typeof A=="string"&&t.IDENTIFIER.test(A))return new n(`${A}`);throw new Error(`CodeGen: invalid export name: ${A}, use explicit $id name mapping`)}t.getEsmExportName=m;function E(A){return new n(A.toString())}t.regexpCode=E})(qv);var eP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=qv;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof e.Name?l:this.name(l)}name(l){return new e.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}t.Scope=s;class i extends e.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:d}){this.value=l,this.scopePath=(0,e._)`.${new e.Name(c)}[${d}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:e.nil}}get(){return this._scope}name(l){return new i(l,this._newName(l))}value(l,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:f}=h,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[f];if(m){const _=m.get(p);if(_)return _}else m=this._values[f]=new Map;m.set(p,h);const E=this._scope[f]||(this._scope[f]=[]),A=E.length;return E[A]=c.ref,h.setValue(c,{property:f,itemIndex:A}),h}getValue(l,c){const d=this._values[l];if(d)return d.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,e._)`${l}${d.scopePath}`})}scopeCode(l=this._values,c,d){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},c,d)}_reduceValues(l,c,d={},h){let f=e.nil;for(const p in l){const m=l[p];if(!m)continue;const E=d[p]=d[p]||new Map;m.forEach(A=>{if(E.has(A))return;E.set(A,n.Started);let _=c(A);if(_){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;f=(0,e._)`${f}${g} ${A} = ${_};${this.opts._n}`}else if(_=h==null?void 0:h(A))f=(0,e._)`${f}${_}${this.opts._n}`;else throw new r(A);E.set(A,n.Completed)})}return f}}t.ValueScope=a})(eP);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=qv,r=eP;var n=qv;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=eP;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames($,F){return this}}class o extends i{constructor($,F,ee){super(),this.varKind=$,this.name=F,this.rhs=ee}render({es5:$,_n:F}){const ee=$?r.varKinds.var:this.varKind,ne=this.rhs===void 0?"":` = ${this.rhs}`;return`${ee} ${this.name}${ne};`+F}optimizeNames($,F){if($[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,$,F)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor($,F,ee){super(),this.lhs=$,this.rhs=F,this.sideEffects=ee}render({_n:$}){return`${this.lhs} = ${this.rhs};`+$}optimizeNames($,F){if(!(this.lhs instanceof e.Name&&!$[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,$,F),this}get names(){const $=this.lhs instanceof e.Name?{}:{...this.lhs.names};return k($,this.rhs)}}class u extends a{constructor($,F,ee,ne){super($,ee,ne),this.op=F}render({_n:$}){return`${this.lhs} ${this.op}= ${this.rhs};`+$}}class l extends i{constructor($){super(),this.label=$,this.names={}}render({_n:$}){return`${this.label}:`+$}}class c extends i{constructor($){super(),this.label=$,this.names={}}render({_n:$}){return`break${this.label?` ${this.label}`:""};`+$}}class d extends i{constructor($){super(),this.error=$}render({_n:$}){return`throw ${this.error};`+$}get names(){return this.error.names}}class h extends i{constructor($){super(),this.code=$}render({_n:$}){return`${this.code};`+$}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames($,F){return this.code=K(this.code,$,F),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class f extends i{constructor($=[]){super(),this.nodes=$}render($){return this.nodes.reduce((F,ee)=>F+ee.render($),"")}optimizeNodes(){const{nodes:$}=this;let F=$.length;for(;F--;){const ee=$[F].optimizeNodes();Array.isArray(ee)?$.splice(F,1,...ee):ee?$[F]=ee:$.splice(F,1)}return $.length>0?this:void 0}optimizeNames($,F){const{nodes:ee}=this;let ne=ee.length;for(;ne--;){const le=ee[ne];le.optimizeNames($,F)||(L($,le.names),ee.splice(ne,1))}return ee.length>0?this:void 0}get names(){return this.nodes.reduce(($,F)=>C($,F.names),{})}}class p extends f{render($){return"{"+$._n+super.render($)+"}"+$._n}}class m extends f{}class E extends p{}E.kind="else";class A extends p{constructor($,F){super(F),this.condition=$}render($){let F=`if(${this.condition})`+super.render($);return this.else&&(F+="else "+this.else.render($)),F}optimizeNodes(){super.optimizeNodes();const $=this.condition;if($===!0)return this.nodes;let F=this.else;if(F){const ee=F.optimizeNodes();F=this.else=Array.isArray(ee)?new E(ee):ee}if(F)return $===!1?F instanceof A?F:F.nodes:this.nodes.length?this:new A(q($),F instanceof A?[F]:F.nodes);if(!($===!1||!this.nodes.length))return this}optimizeNames($,F){var ee;if(this.else=(ee=this.else)===null||ee===void 0?void 0:ee.optimizeNames($,F),!!(super.optimizeNames($,F)||this.else))return this.condition=K(this.condition,$,F),this}get names(){const $=super.names;return k($,this.condition),this.else&&C($,this.else.names),$}}A.kind="if";class _ extends p{}_.kind="for";class g extends _{constructor($){super(),this.iteration=$}render($){return`for(${this.iteration})`+super.render($)}optimizeNames($,F){if(super.optimizeNames($,F))return this.iteration=K(this.iteration,$,F),this}get names(){return C(super.names,this.iteration.names)}}class v extends _{constructor($,F,ee,ne){super(),this.varKind=$,this.name=F,this.from=ee,this.to=ne}render($){const F=$.es5?r.varKinds.var:this.varKind,{name:ee,from:ne,to:le}=this;return`for(${F} ${ee}=${ne}; ${ee}<${le}; ${ee}++)`+super.render($)}get names(){const $=k(super.names,this.from);return k($,this.to)}}class S extends _{constructor($,F,ee,ne){super(),this.loop=$,this.varKind=F,this.name=ee,this.iterable=ne}render($){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render($)}optimizeNames($,F){if(super.optimizeNames($,F))return this.iterable=K(this.iterable,$,F),this}get names(){return C(super.names,this.iterable.names)}}class x extends p{constructor($,F,ee){super(),this.name=$,this.args=F,this.async=ee}render($){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render($)}}x.kind="func";class D extends f{render($){return"return "+super.render($)}}D.kind="return";class w extends p{render($){let F="try"+super.render($);return this.catch&&(F+=this.catch.render($)),this.finally&&(F+=this.finally.render($)),F}optimizeNodes(){var $,F;return super.optimizeNodes(),($=this.catch)===null||$===void 0||$.optimizeNodes(),(F=this.finally)===null||F===void 0||F.optimizeNodes(),this}optimizeNames($,F){var ee,ne;return super.optimizeNames($,F),(ee=this.catch)===null||ee===void 0||ee.optimizeNames($,F),(ne=this.finally)===null||ne===void 0||ne.optimizeNames($,F),this}get names(){const $=super.names;return this.catch&&C($,this.catch.names),this.finally&&C($,this.finally.names),$}}class b extends p{constructor($){super(),this.error=$}render($){return`catch(${this.error})`+super.render($)}}b.kind="catch";class T extends p{render($){return"finally"+super.render($)}}T.kind="finally";class P{constructor($,F={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...F,_n:F.lines?`
`:""},this._extScope=$,this._scope=new r.Scope({parent:$}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name($){return this._scope.name($)}scopeName($){return this._extScope.name($)}scopeValue($,F){const ee=this._extScope.value($,F);return(this._values[ee.prefix]||(this._values[ee.prefix]=new Set)).add(ee),ee}getScopeValue($,F){return this._extScope.getValue($,F)}scopeRefs($){return this._extScope.scopeRefs($,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def($,F,ee,ne){const le=this._scope.toName(F);return ee!==void 0&&ne&&(this._constants[le.str]=ee),this._leafNode(new o($,le,ee)),le}const($,F,ee){return this._def(r.varKinds.const,$,F,ee)}let($,F,ee){return this._def(r.varKinds.let,$,F,ee)}var($,F,ee){return this._def(r.varKinds.var,$,F,ee)}assign($,F,ee){return this._leafNode(new a($,F,ee))}add($,F){return this._leafNode(new u($,t.operators.ADD,F))}code($){return typeof $=="function"?$():$!==e.nil&&this._leafNode(new h($)),this}object(...$){const F=["{"];for(const[ee,ne]of $)F.length>1&&F.push(","),F.push(ee),(ee!==ne||this.opts.es5)&&(F.push(":"),(0,e.addCodeArg)(F,ne));return F.push("}"),new e._Code(F)}if($,F,ee){if(this._blockNode(new A($)),F&&ee)this.code(F).else().code(ee).endIf();else if(F)this.code(F).endIf();else if(ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf($){return this._elseNode(new A($))}else(){return this._elseNode(new E)}endIf(){return this._endBlockNode(A,E)}_for($,F){return this._blockNode($),F&&this.code(F).endFor(),this}for($,F){return this._for(new g($),F)}forRange($,F,ee,ne,le=this.opts.es5?r.varKinds.var:r.varKinds.let){const me=this._scope.toName($);return this._for(new v(le,me,F,ee),()=>ne(me))}forOf($,F,ee,ne=r.varKinds.const){const le=this._scope.toName($);if(this.opts.es5){const me=F instanceof e.Name?F:this.var("_arr",F);return this.forRange("_i",0,(0,e._)`${me}.length`,ve=>{this.var(le,(0,e._)`${me}[${ve}]`),ee(le)})}return this._for(new S("of",ne,le,F),()=>ee(le))}forIn($,F,ee,ne=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf($,(0,e._)`Object.keys(${F})`,ee);const le=this._scope.toName($);return this._for(new S("in",ne,le,F),()=>ee(le))}endFor(){return this._endBlockNode(_)}label($){return this._leafNode(new l($))}break($){return this._leafNode(new c($))}return($){const F=new D;if(this._blockNode(F),this.code($),F.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(D)}try($,F,ee){if(!F&&!ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const ne=new w;if(this._blockNode(ne),this.code($),F){const le=this.name("e");this._currNode=ne.catch=new b(le),F(le)}return ee&&(this._currNode=ne.finally=new T,this.code(ee)),this._endBlockNode(b,T)}throw($){return this._leafNode(new d($))}block($,F){return this._blockStarts.push(this._nodes.length),$&&this.code($).endBlock(F),this}endBlock($){const F=this._blockStarts.pop();if(F===void 0)throw new Error("CodeGen: not in self-balancing block");const ee=this._nodes.length-F;if(ee<0||$!==void 0&&ee!==$)throw new Error(`CodeGen: wrong number of nodes: ${ee} vs ${$} expected`);return this._nodes.length=F,this}func($,F=e.nil,ee,ne){return this._blockNode(new x($,F,ee)),ne&&this.code(ne).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize($=1){for(;$-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode($){return this._currNode.nodes.push($),this}_blockNode($){this._currNode.nodes.push($),this._nodes.push($)}_endBlockNode($,F){const ee=this._currNode;if(ee instanceof $||F&&ee instanceof F)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${F?`${$.kind}/${F.kind}`:$.kind}"`)}_elseNode($){const F=this._currNode;if(!(F instanceof A))throw new Error('CodeGen: "else" without "if"');return this._currNode=F.else=$,this}get _root(){return this._nodes[0]}get _currNode(){const $=this._nodes;return $[$.length-1]}set _currNode($){const F=this._nodes;F[F.length-1]=$}}t.CodeGen=P;function C(z,$){for(const F in $)z[F]=(z[F]||0)+($[F]||0);return z}function k(z,$){return $ instanceof e._CodeOrName?C(z,$.names):z}function K(z,$,F){if(z instanceof e.Name)return ee(z);if(!ne(z))return z;return new e._Code(z._items.reduce((le,me)=>(me instanceof e.Name&&(me=ee(me)),me instanceof e._Code?le.push(...me._items):le.push(me),le),[]));function ee(le){const me=F[le.str];return me===void 0||$[le.str]!==1?le:(delete $[le.str],me)}function ne(le){return le instanceof e._Code&&le._items.some(me=>me instanceof e.Name&&$[me.str]===1&&F[me.str]!==void 0)}}function L(z,$){for(const F in $)z[F]=(z[F]||0)-($[F]||0)}function q(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${te(z)}`}t.not=q;const se=B(t.operators.AND);function X(...z){return z.reduce(se)}t.and=X;const re=B(t.operators.OR);function W(...z){return z.reduce(re)}t.or=W;function B(z){return($,F)=>$===e.nil?F:F===e.nil?$:(0,e._)`${te($)} ${z} ${te(F)}`}function te(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(zt);var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.checkStrictMode=Ge.getErrorPath=Ge.Type=Ge.useFunc=Ge.setEvaluated=Ge.evaluatedPropsToName=Ge.mergeEvaluated=Ge.eachItem=Ge.unescapeJsonPointer=Ge.escapeJsonPointer=Ge.escapeFragment=Ge.unescapeFragment=Ge.schemaRefOrVal=Ge.schemaHasRulesButRef=Ge.schemaHasRules=Ge.checkUnknownRules=Ge.alwaysValidSchema=Ge.toHash=void 0;const Vr=zt,aye=qv;function uye(t){const e={};for(const r of t)e[r]=!0;return e}Ge.toHash=uye;function cye(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(NK(t,e),!BK(e,t.self.RULES.all))}Ge.alwaysValidSchema=cye;function NK(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const s=n.RULES.keywords;for(const i in e)s[i]||jK(t,`unknown keyword: "${i}"`)}Ge.checkUnknownRules=NK;function BK(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}Ge.schemaHasRules=BK;function lye(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ge.schemaHasRulesButRef=lye;function dye({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Vr._)`${r}`}return(0,Vr._)`${t}${e}${(0,Vr.getProperty)(n)}`}Ge.schemaRefOrVal=dye;function fye(t){return FK(decodeURIComponent(t))}Ge.unescapeFragment=fye;function hye(t){return encodeURIComponent(MI(t))}Ge.escapeFragment=hye;function MI(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ge.escapeJsonPointer=MI;function FK(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ge.unescapeJsonPointer=FK;function pye(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}Ge.eachItem=pye;function zF({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{const u=o===void 0?i:o instanceof Vr.Name?(i instanceof Vr.Name?t(s,i,o):e(s,i,o),o):i instanceof Vr.Name?(e(s,o,i),i):r(i,o);return a===Vr.Name&&!(u instanceof Vr.Name)?n(s,u):u}}Ge.mergeEvaluated={props:zF({mergeNames:(t,e,r)=>t.if((0,Vr._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Vr._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Vr._)`${r} || {}`).code((0,Vr._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Vr._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Vr._)`${r} || {}`),jI(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:MK}),items:zF({mergeNames:(t,e,r)=>t.if((0,Vr._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Vr._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Vr._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Vr._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function MK(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,Vr._)`{}`);return e!==void 0&&jI(t,r,e),r}Ge.evaluatedPropsToName=MK;function jI(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Vr._)`${e}${(0,Vr.getProperty)(n)}`,!0))}Ge.setEvaluated=jI;const WF={};function mye(t,e){return t.scopeValue("func",{ref:e,code:WF[e.code]||(WF[e.code]=new aye._Code(e.code))})}Ge.useFunc=mye;var tP;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(tP||(Ge.Type=tP={}));function yye(t,e,r){if(t instanceof Vr.Name){const n=e===tP.Num;return r?n?(0,Vr._)`"[" + ${t} + "]"`:(0,Vr._)`"['" + ${t} + "']"`:n?(0,Vr._)`"/" + ${t}`:(0,Vr._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Vr.getProperty)(t).toString():"/"+MI(t)}Ge.getErrorPath=yye;function jK(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ge.checkStrictMode=jK;var rc={};Object.defineProperty(rc,"__esModule",{value:!0});const qi=zt,gye={data:new qi.Name("data"),valCxt:new qi.Name("valCxt"),instancePath:new qi.Name("instancePath"),parentData:new qi.Name("parentData"),parentDataProperty:new qi.Name("parentDataProperty"),rootData:new qi.Name("rootData"),dynamicAnchors:new qi.Name("dynamicAnchors"),vErrors:new qi.Name("vErrors"),errors:new qi.Name("errors"),this:new qi.Name("this"),self:new qi.Name("self"),scope:new qi.Name("scope"),json:new qi.Name("json"),jsonPos:new qi.Name("jsonPos"),jsonLen:new qi.Name("jsonLen"),jsonPart:new qi.Name("jsonPart")};rc.default=gye;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=zt,r=Ge,n=rc;t.keywordError={message:({keyword:E})=>(0,e.str)`must pass "${E}" keyword validation`},t.keyword$DataError={message:({keyword:E,schemaType:A})=>A?(0,e.str)`"${E}" keyword must be ${A} ($data)`:(0,e.str)`"${E}" keyword is invalid ($data)`};function s(E,A=t.keywordError,_,g){const{it:v}=E,{gen:S,compositeRule:x,allErrors:D}=v,w=d(E,A,_);g??(x||D)?u(S,w):l(v,(0,e._)`[${w}]`)}t.reportError=s;function i(E,A=t.keywordError,_){const{it:g}=E,{gen:v,compositeRule:S,allErrors:x}=g,D=d(E,A,_);u(v,D),S||x||l(g,n.default.vErrors)}t.reportExtraError=i;function o(E,A){E.assign(n.default.errors,A),E.if((0,e._)`${n.default.vErrors} !== null`,()=>E.if(A,()=>E.assign((0,e._)`${n.default.vErrors}.length`,A),()=>E.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:E,keyword:A,schemaValue:_,data:g,errsCount:v,it:S}){if(v===void 0)throw new Error("ajv implementation error");const x=E.name("err");E.forRange("i",v,n.default.errors,D=>{E.const(x,(0,e._)`${n.default.vErrors}[${D}]`),E.if((0,e._)`${x}.instancePath === undefined`,()=>E.assign((0,e._)`${x}.instancePath`,(0,e.strConcat)(n.default.instancePath,S.errorPath))),E.assign((0,e._)`${x}.schemaPath`,(0,e.str)`${S.errSchemaPath}/${A}`),S.opts.verbose&&(E.assign((0,e._)`${x}.schema`,_),E.assign((0,e._)`${x}.data`,g))})}t.extendErrors=a;function u(E,A){const _=E.const("err",A);E.if((0,e._)`${n.default.vErrors} === null`,()=>E.assign(n.default.vErrors,(0,e._)`[${_}]`),(0,e._)`${n.default.vErrors}.push(${_})`),E.code((0,e._)`${n.default.errors}++`)}function l(E,A){const{gen:_,validateName:g,schemaEnv:v}=E;v.$async?_.throw((0,e._)`new ${E.ValidationError}(${A})`):(_.assign((0,e._)`${g}.errors`,A),_.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function d(E,A,_){const{createErrors:g}=E.it;return g===!1?(0,e._)`{}`:h(E,A,_)}function h(E,A,_={}){const{gen:g,it:v}=E,S=[f(v,_),p(E,_)];return m(E,A,S),g.object(...S)}function f({errorPath:E},{instancePath:A}){const _=A?(0,e.str)`${E}${(0,r.getErrorPath)(A,r.Type.Str)}`:E;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,_)]}function p({keyword:E,it:{errSchemaPath:A}},{schemaPath:_,parentSchema:g}){let v=g?A:(0,e.str)`${A}/${E}`;return _&&(v=(0,e.str)`${v}${(0,r.getErrorPath)(_,r.Type.Str)}`),[c.schemaPath,v]}function m(E,{params:A,message:_},g){const{keyword:v,data:S,schemaValue:x,it:D}=E,{opts:w,propertyName:b,topSchemaRef:T,schemaPath:P}=D;g.push([c.keyword,v],[c.params,typeof A=="function"?A(E):A||(0,e._)`{}`]),w.messages&&g.push([c.message,typeof _=="function"?_(E):_]),w.verbose&&g.push([c.schema,x],[c.parentSchema,(0,e._)`${T}${P}`],[n.default.data,S]),b&&g.push([c.propertyName,b])}})(jw);Object.defineProperty(my,"__esModule",{value:!0});my.boolOrEmptySchema=my.topBoolOrEmptySchema=void 0;const vye=jw,wye=zt,_ye=rc,bye={message:"boolean schema is false"};function Eye(t){const{gen:e,schema:r,validateName:n}=t;r===!1?UK(t,!1):typeof r=="object"&&r.$async===!0?e.return(_ye.default.data):(e.assign((0,wye._)`${n}.errors`,null),e.return(!0))}my.topBoolOrEmptySchema=Eye;function Aye(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),UK(t)):r.var(e,!0)}my.boolOrEmptySchema=Aye;function UK(t,e){const{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,vye.reportError)(s,bye,void 0,e)}var Vn={},mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.getRules=mp.isJSONType=void 0;const Sye=["string","number","integer","boolean","null","object","array"],Tye=new Set(Sye);function Dye(t){return typeof t=="string"&&Tye.has(t)}mp.isJSONType=Dye;function xye(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}mp.getRules=xye;var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.shouldUseRule=tl.shouldUseGroup=tl.schemaHasRulesForType=void 0;function Pye({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&LK(t,n)}tl.schemaHasRulesForType=Pye;function LK(t,e){return e.rules.some(r=>KK(t,r))}tl.shouldUseGroup=LK;function KK(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}tl.shouldUseRule=KK;Object.defineProperty(Vn,"__esModule",{value:!0});Vn.reportTypeError=Vn.checkDataTypes=Vn.checkDataType=Vn.coerceAndCheckDataType=Vn.getJSONTypes=Vn.getSchemaTypes=Vn.DataType=void 0;const Cye=mp,Iye=tl,kye=jw,Lt=zt,VK=Ge;var Hm;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Hm||(Vn.DataType=Hm={}));function $ye(t){const e=qK(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Vn.getSchemaTypes=$ye;function qK(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(Cye.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Vn.getJSONTypes=qK;function Oye(t,e){const{gen:r,data:n,opts:s}=t,i=Rye(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Iye.schemaHasRulesForType)(t,e[0]));if(o){const a=UI(e,n,s.strictNumbers,Hm.Wrong);r.if(a,()=>{i.length?Nye(t,e,i):LI(t)})}return o}Vn.coerceAndCheckDataType=Oye;const HK=new Set(["string","number","integer","boolean","null"]);function Rye(t,e){return e?t.filter(r=>HK.has(r)||e==="array"&&r==="array"):[]}function Nye(t,e,r){const{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,Lt._)`typeof ${s}`),a=n.let("coerced",(0,Lt._)`undefined`);i.coerceTypes==="array"&&n.if((0,Lt._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Lt._)`${s}[0]`).assign(o,(0,Lt._)`typeof ${s}`).if(UI(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,Lt._)`${a} !== undefined`);for(const l of r)(HK.has(l)||l==="array"&&i.coerceTypes==="array")&&u(l);n.else(),LI(t),n.endIf(),n.if((0,Lt._)`${a} !== undefined`,()=>{n.assign(s,a),Bye(t,a)});function u(l){switch(l){case"string":n.elseIf((0,Lt._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Lt._)`"" + ${s}`).elseIf((0,Lt._)`${s} === null`).assign(a,(0,Lt._)`""`);return;case"number":n.elseIf((0,Lt._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Lt._)`+${s}`);return;case"integer":n.elseIf((0,Lt._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Lt._)`+${s}`);return;case"boolean":n.elseIf((0,Lt._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Lt._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,Lt._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,Lt._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Lt._)`[${s}]`)}}}function Bye({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Lt._)`${e} !== undefined`,()=>t.assign((0,Lt._)`${e}[${r}]`,n))}function rP(t,e,r,n=Hm.Correct){const s=n===Hm.Correct?Lt.operators.EQ:Lt.operators.NEQ;let i;switch(t){case"null":return(0,Lt._)`${e} ${s} null`;case"array":i=(0,Lt._)`Array.isArray(${e})`;break;case"object":i=(0,Lt._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Lt._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Lt._)`typeof ${e} ${s} ${t}`}return n===Hm.Correct?i:(0,Lt.not)(i);function o(a=Lt.nil){return(0,Lt.and)((0,Lt._)`typeof ${e} == "number"`,a,r?(0,Lt._)`isFinite(${e})`:Lt.nil)}}Vn.checkDataType=rP;function UI(t,e,r,n){if(t.length===1)return rP(t[0],e,r,n);let s;const i=(0,VK.toHash)(t);if(i.array&&i.object){const o=(0,Lt._)`typeof ${e} != "object"`;s=i.null?o:(0,Lt._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Lt.nil;i.number&&delete i.integer;for(const o in i)s=(0,Lt.and)(s,rP(o,e,r,n));return s}Vn.checkDataTypes=UI;const Fye={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Lt._)`{type: ${t}}`:(0,Lt._)`{type: ${e}}`};function LI(t){const e=Mye(t);(0,kye.reportError)(e,Fye)}Vn.reportTypeError=LI;function Mye(t){const{gen:e,data:r,schema:n}=t,s=(0,VK.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}var lS={};Object.defineProperty(lS,"__esModule",{value:!0});lS.assignDefaults=void 0;const rm=zt,jye=Ge;function Uye(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const s in r)GF(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>GF(t,i,s.default))}lS.assignDefaults=Uye;function GF(t,e,r){const{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;const a=(0,rm._)`${i}${(0,rm.getProperty)(e)}`;if(s){(0,jye.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,rm._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,rm._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,rm._)`${a} = ${(0,rm.stringify)(r)}`)}var Du={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.validateUnion=Yt.validateArray=Yt.usePattern=Yt.callValidateCode=Yt.schemaProperties=Yt.allSchemaProperties=Yt.noPropertyInData=Yt.propertyInData=Yt.isOwnProperty=Yt.hasPropFunc=Yt.reportMissingProp=Yt.checkMissingProp=Yt.checkReportMissingProp=void 0;const en=zt,KI=Ge,Ql=rc,Lye=Ge;function Kye(t,e){const{gen:r,data:n,it:s}=t;r.if(qI(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,en._)`${e}`},!0),t.error()})}Yt.checkReportMissingProp=Kye;function Vye({gen:t,data:e,it:{opts:r}},n,s){return(0,en.or)(...n.map(i=>(0,en.and)(qI(t,e,i,r.ownProperties),(0,en._)`${s} = ${i}`)))}Yt.checkMissingProp=Vye;function qye(t,e){t.setParams({missingProperty:e},!0),t.error()}Yt.reportMissingProp=qye;function zK(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,en._)`Object.prototype.hasOwnProperty`})}Yt.hasPropFunc=zK;function VI(t,e,r){return(0,en._)`${zK(t)}.call(${e}, ${r})`}Yt.isOwnProperty=VI;function Hye(t,e,r,n){const s=(0,en._)`${e}${(0,en.getProperty)(r)} !== undefined`;return n?(0,en._)`${s} && ${VI(t,e,r)}`:s}Yt.propertyInData=Hye;function qI(t,e,r,n){const s=(0,en._)`${e}${(0,en.getProperty)(r)} === undefined`;return n?(0,en.or)(s,(0,en.not)(VI(t,e,r))):s}Yt.noPropertyInData=qI;function WK(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Yt.allSchemaProperties=WK;function zye(t,e){return WK(e).filter(r=>!(0,KI.alwaysValidSchema)(t,e[r]))}Yt.schemaProperties=zye;function Wye({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,l){const c=l?(0,en._)`${t}, ${e}, ${n}${s}`:e,d=[[Ql.default.instancePath,(0,en.strConcat)(Ql.default.instancePath,i)],[Ql.default.parentData,o.parentData],[Ql.default.parentDataProperty,o.parentDataProperty],[Ql.default.rootData,Ql.default.rootData]];o.opts.dynamicRef&&d.push([Ql.default.dynamicAnchors,Ql.default.dynamicAnchors]);const h=(0,en._)`${c}, ${r.object(...d)}`;return u!==en.nil?(0,en._)`${a}.call(${u}, ${h})`:(0,en._)`${a}(${h})`}Yt.callValidateCode=Wye;const Gye=(0,en._)`new RegExp`;function Jye({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,en._)`${s.code==="new RegExp"?Gye:(0,Lye.useFunc)(t,s)}(${r}, ${n})`})}Yt.usePattern=Jye;function Xye(t){const{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const u=e.const("len",(0,en._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:KI.Type.Num},i),e.if((0,en.not)(i),a)})}}Yt.validateArray=Xye;function Zye(t){const{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,KI.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,l)=>{const c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,en._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,en.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Yt.validateUnion=Zye;Object.defineProperty(Du,"__esModule",{value:!0});Du.validateKeywordUsage=Du.validSchemaType=Du.funcKeywordCode=Du.macroKeywordCode=void 0;const ls=zt,Th=rc,Yye=Yt,Qye=jw;function ege(t,e){const{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=GK(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=r.name("valid");t.subschema({schema:a,schemaPath:ls.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Du.macroKeywordCode=ege;function tge(t,e){var r;const{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;nge(u,e);const l=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,c=GK(n,s,l),d=n.let("valid");t.block$data(d,h),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function h(){if(e.errors===!1)m(),e.modifying&&JF(t),E(()=>t.error());else{const A=e.async?f():p();e.modifying&&JF(t),E(()=>rge(t,A))}}function f(){const A=n.let("ruleErrs",null);return n.try(()=>m((0,ls._)`await `),_=>n.assign(d,!1).if((0,ls._)`${_} instanceof ${u.ValidationError}`,()=>n.assign(A,(0,ls._)`${_}.errors`),()=>n.throw(_))),A}function p(){const A=(0,ls._)`${c}.errors`;return n.assign(A,null),m(ls.nil),A}function m(A=e.async?(0,ls._)`await `:ls.nil){const _=u.opts.passContext?Th.default.this:Th.default.self,g=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,ls._)`${A}${(0,Yye.callValidateCode)(t,c,_,g)}`,e.modifying)}function E(A){var _;n.if((0,ls.not)((_=e.valid)!==null&&_!==void 0?_:d),A)}}Du.funcKeywordCode=tge;function JF(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,ls._)`${n.parentData}[${n.parentDataProperty}]`))}function rge(t,e){const{gen:r}=t;r.if((0,ls._)`Array.isArray(${e})`,()=>{r.assign(Th.default.vErrors,(0,ls._)`${Th.default.vErrors} === null ? ${e} : ${Th.default.vErrors}.concat(${e})`).assign(Th.default.errors,(0,ls._)`${Th.default.vErrors}.length`),(0,Qye.extendErrors)(t)},()=>t.error())}function nge({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function GK(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ls.stringify)(r)})}function ige(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Du.validSchemaType=ige;function sge({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Du.validateKeywordUsage=sge;var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.extendSubschemaMode=Xd.extendSubschemaData=Xd.getSubschema=void 0;const Eu=zt,JK=Ge;function oge(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Eu._)`${t.schemaPath}${(0,Eu.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Eu._)`${t.schemaPath}${(0,Eu.getProperty)(e)}${(0,Eu.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,JK.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Xd.getSubschema=oge;function age(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(r!==void 0){const{errorPath:l,dataPathArr:c,opts:d}=e,h=a.let("data",(0,Eu._)`${e.data}${(0,Eu.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Eu.str)`${l}${(0,JK.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Eu._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){const l=s instanceof Eu.Name?s:a.let("data",s,!0);u(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Xd.extendSubschemaData=age;function uge(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Xd.extendSubschemaMode=uge;var Ii={},XK={exports:{}},Vd=XK.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};P1(e,n,s,t,"",t)};Vd.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Vd.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Vd.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Vd.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function P1(t,e,r,n,s,i,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,l);for(var c in n){var d=n[c];if(Array.isArray(d)){if(c in Vd.arrayKeywords)for(var h=0;h<d.length;h++)P1(t,e,r,d[h],s+"/"+c+"/"+h,i,s,c,n,h)}else if(c in Vd.propsKeywords){if(d&&typeof d=="object")for(var f in d)P1(t,e,r,d[f],s+"/"+c+"/"+cge(f),i,s,c,n,f)}else(c in Vd.keywords||t.allKeys&&!(c in Vd.skipKeywords))&&P1(t,e,r,d,s+"/"+c,i,s,c,n)}r(n,s,i,o,a,u,l)}}function cge(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var ZK=XK.exports;Object.defineProperty(Ii,"__esModule",{value:!0});Ii.getSchemaRefs=Ii.resolveUrl=Ii.normalizeId=Ii._getFullPath=Ii.getFullPath=Ii.inlineRef=void 0;const lge=Ge,dge=oS,fge=ZK,hge=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function pge(t,e=!0){return typeof t=="boolean"?!0:e===!0?!nP(t):e?YK(t)<=e:!1}Ii.inlineRef=pge;const mge=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function nP(t){for(const e in t){if(mge.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(nP)||typeof r=="object"&&nP(r))return!0}return!1}function YK(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!hge.has(r)&&(typeof t[r]=="object"&&(0,lge.eachItem)(t[r],n=>e+=YK(n)),e===1/0))return 1/0}return e}function QK(t,e="",r){r!==!1&&(e=zm(e));const n=t.parse(e);return eV(t,n)}Ii.getFullPath=QK;function eV(t,e){return t.serialize(e).split("#")[0]+"#"}Ii._getFullPath=eV;const yge=/#\/?$/;function zm(t){return t?t.replace(yge,""):""}Ii.normalizeId=zm;function gge(t,e,r){return r=zm(r),t.resolve(e,r)}Ii.resolveUrl=gge;const vge=/^[a-z_][-a-z0-9._]*$/i;function wge(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=zm(t[r]||e),i={"":s},o=QK(n,s,!1),a={},u=new Set;return fge(t,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;const m=o+h;let E=i[p];typeof d[r]=="string"&&(E=A.call(this,d[r])),_.call(this,d.$anchor),_.call(this,d.$dynamicAnchor),i[h]=E;function A(g){const v=this.opts.uriResolver.resolve;if(g=zm(E?v(E,g):g),u.has(g))throw c(g);u.add(g);let S=this.refs[g];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,g):g!==zm(m)&&(g[0]==="#"?(l(d,a[g],g),a[g]=d):this.refs[g]=m),g}function _(g){if(typeof g=="string"){if(!vge.test(g))throw new Error(`invalid anchor "${g}"`);A.call(this,`#${g}`)}}}),a;function l(d,h,f){if(h!==void 0&&!dge(d,h))throw c(f)}function c(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Ii.getSchemaRefs=wge;Object.defineProperty(Ba,"__esModule",{value:!0});Ba.getData=Ba.KeywordCxt=Ba.validateFunctionCode=void 0;const tV=my,XF=Vn,HI=tl,RE=Vn,_ge=lS,ev=Du,RT=Xd,rt=zt,$t=rc,bge=Ii,rl=Ge,Yg=jw;function Ege(t){if(iV(t)&&(sV(t),nV(t))){Tge(t);return}rV(t,()=>(0,tV.topBoolOrEmptySchema)(t))}Ba.validateFunctionCode=Ege;function rV({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,rt._)`${$t.default.data}, ${$t.default.valCxt}`,n.$async,()=>{t.code((0,rt._)`"use strict"; ${ZF(r,s)}`),Sge(t,s),t.code(i)}):t.func(e,(0,rt._)`${$t.default.data}, ${Age(s)}`,n.$async,()=>t.code(ZF(r,s)).code(i))}function Age(t){return(0,rt._)`{${$t.default.instancePath}="", ${$t.default.parentData}, ${$t.default.parentDataProperty}, ${$t.default.rootData}=${$t.default.data}${t.dynamicRef?(0,rt._)`, ${$t.default.dynamicAnchors}={}`:rt.nil}}={}`}function Sge(t,e){t.if($t.default.valCxt,()=>{t.var($t.default.instancePath,(0,rt._)`${$t.default.valCxt}.${$t.default.instancePath}`),t.var($t.default.parentData,(0,rt._)`${$t.default.valCxt}.${$t.default.parentData}`),t.var($t.default.parentDataProperty,(0,rt._)`${$t.default.valCxt}.${$t.default.parentDataProperty}`),t.var($t.default.rootData,(0,rt._)`${$t.default.valCxt}.${$t.default.rootData}`),e.dynamicRef&&t.var($t.default.dynamicAnchors,(0,rt._)`${$t.default.valCxt}.${$t.default.dynamicAnchors}`)},()=>{t.var($t.default.instancePath,(0,rt._)`""`),t.var($t.default.parentData,(0,rt._)`undefined`),t.var($t.default.parentDataProperty,(0,rt._)`undefined`),t.var($t.default.rootData,$t.default.data),e.dynamicRef&&t.var($t.default.dynamicAnchors,(0,rt._)`{}`)})}function Tge(t){const{schema:e,opts:r,gen:n}=t;rV(t,()=>{r.$comment&&e.$comment&&aV(t),Ige(t),n.let($t.default.vErrors,null),n.let($t.default.errors,0),r.unevaluated&&Dge(t),oV(t),Oge(t)})}function Dge(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,rt._)`${r}.evaluated`),e.if((0,rt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,rt._)`${t.evaluated}.props`,(0,rt._)`undefined`)),e.if((0,rt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,rt._)`${t.evaluated}.items`,(0,rt._)`undefined`))}function ZF(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,rt._)`/*# sourceURL=${r} */`:rt.nil}function xge(t,e){if(iV(t)&&(sV(t),nV(t))){Pge(t,e);return}(0,tV.boolOrEmptySchema)(t,e)}function nV({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function iV(t){return typeof t.schema!="boolean"}function Pge(t,e){const{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&aV(t),kge(t),$ge(t);const i=n.const("_errs",$t.default.errors);oV(t,i),n.var(e,(0,rt._)`${i} === ${$t.default.errors}`)}function sV(t){(0,rl.checkUnknownRules)(t),Cge(t)}function oV(t,e){if(t.opts.jtd)return YF(t,[],!1,e);const r=(0,XF.getSchemaTypes)(t.schema),n=(0,XF.coerceAndCheckDataType)(t,r);YF(t,r,!n,e)}function Cge(t){const{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,rl.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ige(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,rl.checkStrictMode)(t,"default is ignored in the schema root")}function kge(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,bge.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function $ge(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function aV({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)t.code((0,rt._)`${$t.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,rt.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,rt._)`${$t.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Oge(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,rt._)`${$t.default.errors} === 0`,()=>e.return($t.default.data),()=>e.throw((0,rt._)`new ${s}(${$t.default.vErrors})`)):(e.assign((0,rt._)`${n}.errors`,$t.default.vErrors),i.unevaluated&&Rge(t),e.return((0,rt._)`${$t.default.errors} === 0`))}function Rge({gen:t,evaluated:e,props:r,items:n}){r instanceof rt.Name&&t.assign((0,rt._)`${e}.props`,r),n instanceof rt.Name&&t.assign((0,rt._)`${e}.items`,n)}function YF(t,e,r,n){const{gen:s,schema:i,data:o,allErrors:a,opts:u,self:l}=t,{RULES:c}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,rl.schemaHasRulesButRef)(i,c))){s.block(()=>lV(t,"$ref",c.all.$ref.definition));return}u.jtd||Nge(t,e),s.block(()=>{for(const h of c.rules)d(h);d(c.post)});function d(h){(0,HI.shouldUseGroup)(i,h)&&(h.type?(s.if((0,RE.checkDataType)(h.type,o,u.strictNumbers)),QF(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,RE.reportTypeError)(t)),s.endIf()):QF(t,h),a||s.if((0,rt._)`${$t.default.errors} === ${n||0}`))}}function QF(t,e){const{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,_ge.assignDefaults)(t,e.type),r.block(()=>{for(const i of e.rules)(0,HI.shouldUseRule)(n,i)&&lV(t,i.keyword,i.definition,e.type)})}function Nge(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Bge(t,e),t.opts.allowUnionTypes||Fge(t,e),Mge(t,t.dataTypes))}function Bge(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{uV(t.dataTypes,r)||zI(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Uge(t,e)}}function Fge(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&zI(t,"use allowUnionTypes to allow union type keyword")}function Mge(t,e){const r=t.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,HI.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>jge(e,o))&&zI(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function jge(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function uV(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Uge(t,e){const r=[];for(const n of t.dataTypes)uV(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function zI(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,rl.checkStrictMode)(t,e,t.opts.strictTypes)}let cV=class{constructor(e,r,n){if((0,ev.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,rl.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",dV(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ev.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",$t.default.errors))}result(e,r,n){this.failResult((0,rt.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,rt.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,rt._)`${r} !== undefined && (${(0,rt.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Yg.reportExtraError:Yg.reportError)(this,this.def.error,r)}$dataError(){(0,Yg.reportError)(this,this.def.$dataError||Yg.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Yg.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=rt.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=rt.nil,r=rt.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,rt.or)((0,rt._)`${s} === undefined`,r)),e!==rt.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==rt.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,rt.or)(o(),a());function o(){if(n.length){if(!(r instanceof rt.Name))throw new Error("ajv implementation error");const u=Array.isArray(n)?n:[n];return(0,rt._)`${(0,RE.checkDataTypes)(u,r,i.opts.strictNumbers,RE.DataType.Wrong)}`}return rt.nil}function a(){if(s.validateSchema){const u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,rt._)`!${u}(${r})`}return rt.nil}}subschema(e,r){const n=(0,RT.getSubschema)(this.it,e);(0,RT.extendSubschemaData)(n,this.it,e),(0,RT.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return xge(s,r),s}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=rl.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=rl.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,rt.Name)),!0}};Ba.KeywordCxt=cV;function lV(t,e,r,n){const s=new cV(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ev.funcKeywordCode)(s,r):"macro"in r?(0,ev.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ev.funcKeywordCode)(s,r)}const Lge=/^\/(?:[^~]|~0|~1)*$/,Kge=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dV(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return $t.default.rootData;if(t[0]==="/"){if(!Lge.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=$t.default.rootData}else{const l=Kge.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+l[1];if(s=l[2],s==="#"){if(c>=e)throw new Error(u("property/index",c));return n[e-c]}if(c>e)throw new Error(u("data",c));if(i=r[e-c],!s)return i}let o=i;const a=s.split("/");for(const l of a)l&&(i=(0,rt._)`${i}${(0,rt.getProperty)((0,rl.unescapeJsonPointer)(l))}`,o=(0,rt._)`${o} && ${i}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}Ba.getData=dV;var Uw={};Object.defineProperty(Uw,"__esModule",{value:!0});let Vge=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Uw.default=Vge;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});const NT=Ii;let qge=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,NT.resolveUrl)(e,r,n),this.missingSchema=(0,NT.normalizeId)((0,NT.getFullPath)(e,this.missingRef))}};Ly.default=qge;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.resolveSchema=Ms.getCompilingSchema=Ms.resolveRef=Ms.compileSchema=Ms.SchemaEnv=void 0;const ma=zt,Hge=Uw,sh=rc,Pa=Ii,e6=Ge,zge=Ba;let dS=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Pa.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Ms.SchemaEnv=dS;function WI(t){const e=fV.call(this,t);if(e)return e;const r=(0,Pa.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ma.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:Hge.default,code:(0,ma._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");t.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:sh.default.data,parentData:sh.default.parentData,parentDataProperty:sh.default.parentDataProperty,dataNames:[sh.default.data],dataPathArr:[ma.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ma.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ma.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ma._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,zge.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const d=o.toString();c=`${o.scopeRefs(sh.default.scope)}return ${d}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const f=new Function(`${sh.default.self}`,`${sh.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;f.evaluated={props:p instanceof ma.Name?void 0:p,items:m instanceof ma.Name?void 0:m,dynamicProps:p instanceof ma.Name,dynamicItems:m instanceof ma.Name},f.source&&(f.source.evaluated=(0,ma.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),d}finally{this._compilations.delete(t)}}Ms.compileSchema=WI;function Wge(t,e,r){var n;r=(0,Pa.resolveUrl)(this.opts.uriResolver,e,r);const s=t.refs[r];if(s)return s;let i=Xge.call(this,t,r);if(i===void 0){const o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new dS({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Gge.call(this,i)}Ms.resolveRef=Wge;function Gge(t){return(0,Pa.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:WI.call(this,t)}function fV(t){for(const e of this._compilations)if(Jge(e,t))return e}Ms.getCompilingSchema=fV;function Jge(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Xge(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||fS.call(this,t,e)}function fS(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Pa._getFullPath)(this.opts.uriResolver,r);let s=(0,Pa.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return BT.call(this,r,t);const i=(0,Pa.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=fS.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:BT.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||WI.call(this,o),i===(0,Pa.normalizeId)(e)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(s=(0,Pa.resolveUrl)(this.opts.uriResolver,s,l)),new dS({schema:a,schemaId:u,root:t,baseId:s})}return BT.call(this,r,o)}}Ms.resolveSchema=fS;const Zge=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function BT(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const u=r[(0,e6.unescapeFragment)(a)];if(u===void 0)return;r=u;const l=typeof r=="object"&&r[this.opts.schemaId];!Zge.has(a)&&l&&(e=(0,Pa.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,e6.schemaHasRulesButRef)(r,this.RULES)){const a=(0,Pa.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=fS.call(this,n,a)}const{schemaId:o}=this.opts;if(i=i||new dS({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}const Yge="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Qge="Meta-schema for $data reference (JSON AnySchema extension proposal)",e0e="object",t0e=["$data"],r0e={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},n0e=!1,i0e={$id:Yge,description:Qge,type:e0e,required:t0e,properties:r0e,additionalProperties:n0e};var GI={},hS={exports:{}};const s0e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var o0e={HEX:s0e};const{HEX:a0e}=o0e;function hV(t){if(mV(t,".")<3)return{host:t,isIPV4:!1};const e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:c0e(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function iP(t,e=!1){let r="",n=!0;for(const s of t){if(a0e[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return e&&r.length===0&&(r="0"),r}function u0e(t){let e=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){const l=iP(s);if(l!==void 0)n.push(l);else return r.error=!0,!1}s.length=0}return!0}for(let l=0;l<t.length;l++){const c=t[l];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(a=!0),!u())break;if(e++,n.push(":"),e>7){r.error=!0;break}l-1>=0&&t[l-1]===":"&&(o=!0);continue}else if(c==="%"){if(!u())break;i=!0}else{s.push(c);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(iP(s))),r.address=n.join(""),r}function pV(t,e={}){if(mV(t,":")<2)return{host:t,isIPV6:!1};const r=u0e(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function c0e(t,e){let r="",n=!0;const s=t.length;for(let i=0;i<s;i++){const o=t[i];o==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function mV(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}const t6=/^\.\.?\//u,r6=/^\/\.(?:\/|$)/u,n6=/^\/\.\.(?:\/|$)/u,l0e=/^\/?(?:.|\n)*?(?=\/|$)/u;function d0e(t){const e=[];for(;t.length;)if(t.match(t6))t=t.replace(t6,"");else if(t.match(r6))t=t.replace(r6,"/");else if(t.match(n6))t=t.replace(n6,"/"),e.pop();else if(t==="."||t==="..")t="";else{const r=t.match(l0e);if(r){const n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function f0e(t,e){const r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function h0e(t,e){const r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host);const s=hV(n);if(s.isIPV4)n=s.host;else{const i=pV(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}var p0e={recomposeAuthority:h0e,normalizeComponentEncoding:f0e,removeDotSegments:d0e,normalizeIPv4:hV,normalizeIPv6:pV,stringArrayToHexStripped:iP};const m0e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,y0e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function yV(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function gV(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function vV(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function g0e(t){return t.secure=yV(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function v0e(t){if((t.port===(yV(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function w0e(t,e){if(!t.path)return t.error="URN can not be parsed",t;const r=t.path.match(y0e);if(r){const n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];const s=`${n}:${e.nid||t.nid}`,i=JI[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function _0e(t,e){const r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=JI[s];i&&(t=i.serialize(t,e));const o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function b0e(t,e){const r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!m0e.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function E0e(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const wV={scheme:"http",domainHost:!0,parse:gV,serialize:vV},A0e={scheme:"https",domainHost:wV.domainHost,parse:gV,serialize:vV},C1={scheme:"ws",domainHost:!0,parse:g0e,serialize:v0e},S0e={scheme:"wss",domainHost:C1.domainHost,parse:C1.parse,serialize:C1.serialize},T0e={scheme:"urn",parse:w0e,serialize:_0e,skipNormalize:!0},D0e={scheme:"urn:uuid",parse:b0e,serialize:E0e,skipNormalize:!0},JI={http:wV,https:A0e,ws:C1,wss:S0e,urn:T0e,"urn:uuid":D0e};var x0e=JI;const{normalizeIPv6:P0e,normalizeIPv4:C0e,removeDotSegments:I0,recomposeAuthority:I0e,normalizeComponentEncoding:Sb}=p0e,XI=x0e;function k0e(t,e){return typeof t=="string"?t=xu(fl(t,e),e):typeof t=="object"&&(t=fl(xu(t,e),e)),t}function $0e(t,e,r){const n=Object.assign({scheme:"null"},r),s=_V(fl(t,n),fl(e,n),n,!0);return xu(s,{...n,skipEscape:!0})}function _V(t,e,r,n){const s={};return n||(t=fl(xu(t,r),r),e=fl(xu(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=I0(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=I0(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=I0(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=I0(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function O0e(t,e,r){return typeof t=="string"?(t=unescape(t),t=xu(Sb(fl(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=xu(Sb(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=xu(Sb(fl(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=xu(Sb(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function xu(t,e){const r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=XI[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));const o=I0e(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=I0(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}const R0e=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function N0e(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||R0e[e])return!0;return!1}const B0e=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function fl(t,e){const r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);const o=t.match(B0e);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){const u=C0e(n.host);if(u.isIPV4===!1){const l=P0e(u.host,{isIPV4:!1});n.host=l.host.toLowerCase(),i=l.isIPV6}else n.host=u.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const a=XI[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&N0e(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(u){n.error=n.error||"Host's domain name can not be converted to ASCII: "+u}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const ZI={SCHEMES:XI,normalize:k0e,resolve:$0e,resolveComponents:_V,equal:O0e,serialize:xu,parse:fl};hS.exports=ZI;hS.exports.default=ZI;hS.exports.fastUri=ZI;var F0e=hS.exports;Object.defineProperty(GI,"__esModule",{value:!0});const bV=F0e;bV.code='require("ajv/dist/runtime/uri").default';GI.default=bV;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Ba;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=zt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Uw,s=Ly,i=mp,o=Ms,a=zt,u=Ii,l=Vn,c=Ge,d=i0e,h=GI,f=(W,B)=>new RegExp(W,B);f.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function g(W){var B,te,z,$,F,ee,ne,le,me,ve,Pe,Ue,M,V,oe,j,I,N,Q,ce,pe,he,Ce,_e,G;const J=W.strict,ge=(B=W.code)===null||B===void 0?void 0:B.optimize,be=ge===!0||ge===void 0?1:ge||0,ke=(z=(te=W.code)===null||te===void 0?void 0:te.regExp)!==null&&z!==void 0?z:f,At=($=W.uriResolver)!==null&&$!==void 0?$:h.default;return{strictSchema:(ee=(F=W.strictSchema)!==null&&F!==void 0?F:J)!==null&&ee!==void 0?ee:!0,strictNumbers:(le=(ne=W.strictNumbers)!==null&&ne!==void 0?ne:J)!==null&&le!==void 0?le:!0,strictTypes:(ve=(me=W.strictTypes)!==null&&me!==void 0?me:J)!==null&&ve!==void 0?ve:"log",strictTuples:(Ue=(Pe=W.strictTuples)!==null&&Pe!==void 0?Pe:J)!==null&&Ue!==void 0?Ue:"log",strictRequired:(V=(M=W.strictRequired)!==null&&M!==void 0?M:J)!==null&&V!==void 0?V:!1,code:W.code?{...W.code,optimize:be,regExp:ke}:{optimize:be,regExp:ke},loopRequired:(oe=W.loopRequired)!==null&&oe!==void 0?oe:_,loopEnum:(j=W.loopEnum)!==null&&j!==void 0?j:_,meta:(I=W.meta)!==null&&I!==void 0?I:!0,messages:(N=W.messages)!==null&&N!==void 0?N:!0,inlineRefs:(Q=W.inlineRefs)!==null&&Q!==void 0?Q:!0,schemaId:(ce=W.schemaId)!==null&&ce!==void 0?ce:"$id",addUsedSchema:(pe=W.addUsedSchema)!==null&&pe!==void 0?pe:!0,validateSchema:(he=W.validateSchema)!==null&&he!==void 0?he:!0,validateFormats:(Ce=W.validateFormats)!==null&&Ce!==void 0?Ce:!0,unicodeRegExp:(_e=W.unicodeRegExp)!==null&&_e!==void 0?_e:!0,int32range:(G=W.int32range)!==null&&G!==void 0?G:!0,uriResolver:At}}class v{constructor(B={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,B=this.opts={...B,...g(B)};const{es5:te,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:te,lines:z}),this.logger=C(B.logger);const $=B.validateFormats;B.validateFormats=!1,this.RULES=(0,i.getRules)(),S.call(this,E,B,"NOT SUPPORTED"),S.call(this,A,B,"DEPRECATED","warn"),this._metaOpts=T.call(this),B.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),B.keywords&&b.call(this,B.keywords),typeof B.meta=="object"&&this.addMetaSchema(B.meta),D.call(this),B.validateFormats=$}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:B,meta:te,schemaId:z}=this.opts;let $=d;z==="id"&&($={...d},$.id=$.$id,delete $.$id),te&&B&&this.addMetaSchema($,$[z],!1)}defaultMeta(){const{meta:B,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof B=="object"?B[te]||B:void 0}validate(B,te){let z;if(typeof B=="string"){if(z=this.getSchema(B),!z)throw new Error(`no schema with key or ref "${B}"`)}else z=this.compile(B);const $=z(te);return"$async"in z||(this.errors=z.errors),$}compile(B,te){const z=this._addSchema(B,te);return z.validate||this._compileSchemaEnv(z)}compileAsync(B,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return $.call(this,B,te);async function $(ve,Pe){await F.call(this,ve.$schema);const Ue=this._addSchema(ve,Pe);return Ue.validate||ee.call(this,Ue)}async function F(ve){ve&&!this.getSchema(ve)&&await $.call(this,{$ref:ve},!0)}async function ee(ve){try{return this._compileSchemaEnv(ve)}catch(Pe){if(!(Pe instanceof s.default))throw Pe;return ne.call(this,Pe),await le.call(this,Pe.missingSchema),ee.call(this,ve)}}function ne({missingSchema:ve,missingRef:Pe}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Pe} cannot be resolved`)}async function le(ve){const Pe=await me.call(this,ve);this.refs[ve]||await F.call(this,Pe.$schema),this.refs[ve]||this.addSchema(Pe,ve,te)}async function me(ve){const Pe=this._loading[ve];if(Pe)return Pe;try{return await(this._loading[ve]=z(ve))}finally{delete this._loading[ve]}}}addSchema(B,te,z,$=this.opts.validateSchema){if(Array.isArray(B)){for(const ee of B)this.addSchema(ee,void 0,z,$);return this}let F;if(typeof B=="object"){const{schemaId:ee}=this.opts;if(F=B[ee],F!==void 0&&typeof F!="string")throw new Error(`schema ${ee} must be string`)}return te=(0,u.normalizeId)(te||F),this._checkUnique(te),this.schemas[te]=this._addSchema(B,z,te,$,!0),this}addMetaSchema(B,te,z=this.opts.validateSchema){return this.addSchema(B,te,!0,z),this}validateSchema(B,te){if(typeof B=="boolean")return!0;let z;if(z=B.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const $=this.validate(z,B);if(!$&&te){const F="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(F);else throw new Error(F)}return $}getSchema(B){let te;for(;typeof(te=x.call(this,B))=="string";)B=te;if(te===void 0){const{schemaId:z}=this.opts,$=new o.SchemaEnv({schema:{},schemaId:z});if(te=o.resolveSchema.call(this,$,B),!te)return;this.refs[B]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(B){if(B instanceof RegExp)return this._removeAllSchemas(this.schemas,B),this._removeAllSchemas(this.refs,B),this;switch(typeof B){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=x.call(this,B);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[B],delete this.refs[B],this}case"object":{const te=B;this._cache.delete(te);let z=B[this.opts.schemaId];return z&&(z=(0,u.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(B){for(const te of B)this.addKeyword(te);return this}addKeyword(B,te){let z;if(typeof B=="string")z=B,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=z);else if(typeof B=="object"&&te===void 0){if(te=B,z=te.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,z,te),!te)return(0,c.eachItem)(z,F=>L.call(this,F)),this;se.call(this,te);const $={...te,type:(0,l.getJSONTypes)(te.type),schemaType:(0,l.getJSONTypes)(te.schemaType)};return(0,c.eachItem)(z,$.type.length===0?F=>L.call(this,F,$):F=>$.type.forEach(ee=>L.call(this,F,$,ee))),this}getKeyword(B){const te=this.RULES.all[B];return typeof te=="object"?te.definition:!!te}removeKeyword(B){const{RULES:te}=this;delete te.keywords[B],delete te.all[B];for(const z of te.rules){const $=z.rules.findIndex(F=>F.keyword===B);$>=0&&z.rules.splice($,1)}return this}addFormat(B,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[B]=te,this}errorsText(B=this.errors,{separator:te=", ",dataVar:z="data"}={}){return!B||B.length===0?"No errors":B.map($=>`${z}${$.instancePath} ${$.message}`).reduce(($,F)=>$+te+F)}$dataMetaSchema(B,te){const z=this.RULES.all;B=JSON.parse(JSON.stringify(B));for(const $ of te){const F=$.split("/").slice(1);let ee=B;for(const ne of F)ee=ee[ne];for(const ne in z){const le=z[ne];if(typeof le!="object")continue;const{$data:me}=le.definition,ve=ee[ne];me&&ve&&(ee[ne]=re(ve))}}return B}_removeAllSchemas(B,te){for(const z in B){const $=B[z];(!te||te.test(z))&&(typeof $=="string"?delete B[z]:$&&!$.meta&&(this._cache.delete($.schema),delete B[z]))}}_addSchema(B,te,z,$=this.opts.validateSchema,F=this.opts.addUsedSchema){let ee;const{schemaId:ne}=this.opts;if(typeof B=="object")ee=B[ne];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof B!="boolean")throw new Error("schema must be object or boolean")}let le=this._cache.get(B);if(le!==void 0)return le;z=(0,u.normalizeId)(ee||z);const me=u.getSchemaRefs.call(this,B,z);return le=new o.SchemaEnv({schema:B,schemaId:ne,meta:te,baseId:z,localRefs:me}),this._cache.set(le.schema,le),F&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=le),$&&this.validateSchema(B,!0),le}_checkUnique(B){if(this.schemas[B]||this.refs[B])throw new Error(`schema with key or id "${B}" already exists`)}_compileSchemaEnv(B){if(B.meta?this._compileMetaSchema(B):o.compileSchema.call(this,B),!B.validate)throw new Error("ajv implementation error");return B.validate}_compileMetaSchema(B){const te=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,B)}finally{this.opts=te}}}v.ValidationError=n.default,v.MissingRefError=s.default,t.default=v;function S(W,B,te,z="error"){for(const $ in W){const F=$;F in B&&this.logger[z](`${te}: option ${$}. ${W[F]}`)}}function x(W){return W=(0,u.normalizeId)(W),this.schemas[W]||this.refs[W]}function D(){const W=this.opts.schemas;if(W)if(Array.isArray(W))this.addSchema(W);else for(const B in W)this.addSchema(W[B],B)}function w(){for(const W in this.opts.formats){const B=this.opts.formats[W];B&&this.addFormat(W,B)}}function b(W){if(Array.isArray(W)){this.addVocabulary(W);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const B in W){const te=W[B];te.keyword||(te.keyword=B),this.addKeyword(te)}}function T(){const W={...this.opts};for(const B of p)delete W[B];return W}const P={log(){},warn(){},error(){}};function C(W){if(W===!1)return P;if(W===void 0)return console;if(W.log&&W.warn&&W.error)return W;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function K(W,B){const{RULES:te}=this;if((0,c.eachItem)(W,z=>{if(te.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!k.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!B&&B.$data&&!("code"in B||"validate"in B))throw new Error('$data keyword must have "code" or "validate" function')}function L(W,B,te){var z;const $=B==null?void 0:B.post;if(te&&$)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:F}=this;let ee=$?F.post:F.rules.find(({type:le})=>le===te);if(ee||(ee={type:te,rules:[]},F.rules.push(ee)),F.keywords[W]=!0,!B)return;const ne={keyword:W,definition:{...B,type:(0,l.getJSONTypes)(B.type),schemaType:(0,l.getJSONTypes)(B.schemaType)}};B.before?q.call(this,ee,ne,B.before):ee.rules.push(ne),F.all[W]=ne,(z=B.implements)===null||z===void 0||z.forEach(le=>this.addKeyword(le))}function q(W,B,te){const z=W.rules.findIndex($=>$.keyword===te);z>=0?W.rules.splice(z,0,B):(W.rules.push(B),this.logger.warn(`rule ${te} is not defined`))}function se(W){let{metaSchema:B}=W;B!==void 0&&(W.$data&&this.opts.$data&&(B=re(B)),W.validateSchema=this.compile(B,!0))}const X={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function re(W){return{anyOf:[W,X]}}})(RK);var YI={},QI={},ek={};Object.defineProperty(ek,"__esModule",{value:!0});const M0e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ek.default=M0e;var yp={};Object.defineProperty(yp,"__esModule",{value:!0});yp.callRef=yp.getValidate=void 0;const j0e=Ly,i6=Yt,Rs=zt,nm=rc,s6=Ms,Tb=Ge,U0e={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();const c=s6.resolveRef.call(u,l,s,r);if(c===void 0)throw new j0e.default(n.opts.uriResolver,s,r);if(c instanceof s6.SchemaEnv)return h(c);return f(c);function d(){if(i===l)return I1(t,o,i,i.$async);const p=e.scopeValue("root",{ref:l});return I1(t,(0,Rs._)`${p}.validate`,l,l.$async)}function h(p){const m=EV(t,p);I1(t,m,p,p.$async)}function f(p){const m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Rs.stringify)(p)}:{ref:p}),E=e.name("valid"),A=t.subschema({schema:p,dataTypes:[],schemaPath:Rs.nil,topSchemaRef:m,errSchemaPath:r},E);t.mergeEvaluated(A),t.ok(E)}}};function EV(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Rs._)`${r.scopeValue("wrapper",{ref:e})}.validate`}yp.getValidate=EV;function I1(t,e,r,n){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,l=u.passContext?nm.default.this:Rs.nil;n?c():d();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=s.let("valid");s.try(()=>{s.code((0,Rs._)`await ${(0,i6.callValidateCode)(t,e,l)}`),f(e),o||s.assign(p,!0)},m=>{s.if((0,Rs._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function d(){t.result((0,i6.callValidateCode)(t,e,l),()=>f(e),()=>h(e))}function h(p){const m=(0,Rs._)`${p}.errors`;s.assign(nm.default.vErrors,(0,Rs._)`${nm.default.vErrors} === null ? ${m} : ${nm.default.vErrors}.concat(${m})`),s.assign(nm.default.errors,(0,Rs._)`${nm.default.vErrors}.length`)}function f(p){var m;if(!i.opts.unevaluated)return;const E=(m=r==null?void 0:r.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(i.props=Tb.mergeEvaluated.props(s,E.props,i.props));else{const A=s.var("props",(0,Rs._)`${p}.evaluated.props`);i.props=Tb.mergeEvaluated.props(s,A,i.props,Rs.Name)}if(i.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(i.items=Tb.mergeEvaluated.items(s,E.items,i.items));else{const A=s.var("items",(0,Rs._)`${p}.evaluated.items`);i.items=Tb.mergeEvaluated.items(s,A,i.items,Rs.Name)}}}yp.callRef=I1;yp.default=U0e;Object.defineProperty(QI,"__esModule",{value:!0});const L0e=ek,K0e=yp,V0e=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",L0e.default,K0e.default];QI.default=V0e;var tk={},rk={};Object.defineProperty(rk,"__esModule",{value:!0});const NE=zt,ed=NE.operators,BE={maximum:{okStr:"<=",ok:ed.LTE,fail:ed.GT},minimum:{okStr:">=",ok:ed.GTE,fail:ed.LT},exclusiveMaximum:{okStr:"<",ok:ed.LT,fail:ed.GTE},exclusiveMinimum:{okStr:">",ok:ed.GT,fail:ed.LTE}},q0e={message:({keyword:t,schemaCode:e})=>(0,NE.str)`must be ${BE[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,NE._)`{comparison: ${BE[t].okStr}, limit: ${e}}`},H0e={keyword:Object.keys(BE),type:"number",schemaType:"number",$data:!0,error:q0e,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,NE._)`${r} ${BE[e].fail} ${n} || isNaN(${r})`)}};rk.default=H0e;var nk={};Object.defineProperty(nk,"__esModule",{value:!0});const tv=zt,z0e={message:({schemaCode:t})=>(0,tv.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,tv._)`{multipleOf: ${t}}`},W0e={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:z0e,code(t){const{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,tv._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,tv._)`${o} !== parseInt(${o})`;t.fail$data((0,tv._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};nk.default=W0e;var ik={},sk={};Object.defineProperty(sk,"__esModule",{value:!0});function AV(t){const e=t.length;let r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}sk.default=AV;AV.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(ik,"__esModule",{value:!0});const Dh=zt,G0e=Ge,J0e=sk,X0e={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,Dh.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Dh._)`{limit: ${t}}`},Z0e={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:X0e,code(t){const{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Dh.operators.GT:Dh.operators.LT,o=s.opts.unicode===!1?(0,Dh._)`${r}.length`:(0,Dh._)`${(0,G0e.useFunc)(t.gen,J0e.default)}(${r})`;t.fail$data((0,Dh._)`${o} ${i} ${n}`)}};ik.default=Z0e;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});const Y0e=Yt,FE=zt,Q0e={message:({schemaCode:t})=>(0,FE.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,FE._)`{pattern: ${t}}`},eve={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Q0e,code(t){const{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,FE._)`(new RegExp(${s}, ${o}))`:(0,Y0e.usePattern)(t,n);t.fail$data((0,FE._)`!${a}.test(${e})`)}};ok.default=eve;var ak={};Object.defineProperty(ak,"__esModule",{value:!0});const rv=zt,tve={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,rv.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,rv._)`{limit: ${t}}`},rve={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:tve,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?rv.operators.GT:rv.operators.LT;t.fail$data((0,rv._)`Object.keys(${r}).length ${s} ${n}`)}};ak.default=rve;var uk={};Object.defineProperty(uk,"__esModule",{value:!0});const Qg=Yt,nv=zt,nve=Ge,ive={message:({params:{missingProperty:t}})=>(0,nv.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,nv._)`{missingProperty: ${t}}`},sve={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ive,code(t){const{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;const u=r.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const f=t.parentSchema.properties,{definedProperties:p}=t.it;for(const m of r)if((f==null?void 0:f[m])===void 0&&!p.has(m)){const E=o.schemaEnv.baseId+o.errSchemaPath,A=`required property "${m}" is not defined at "${E}" (strictRequired)`;(0,nve.checkStrictMode)(o,A,o.opts.strictRequired)}}function l(){if(u||i)t.block$data(nv.nil,d);else for(const f of r)(0,Qg.checkReportMissingProp)(t,f)}function c(){const f=e.let("missing");if(u||i){const p=e.let("valid",!0);t.block$data(p,()=>h(f,p)),t.ok(p)}else e.if((0,Qg.checkMissingProp)(t,r,f)),(0,Qg.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Qg.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function h(f,p){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(p,(0,Qg.propertyInData)(e,s,f,a.ownProperties)),e.if((0,nv.not)(p),()=>{t.error(),e.break()})},nv.nil)}}};uk.default=sve;var ck={};Object.defineProperty(ck,"__esModule",{value:!0});const iv=zt,ove={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,iv.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,iv._)`{limit: ${t}}`},ave={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ove,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?iv.operators.GT:iv.operators.LT;t.fail$data((0,iv._)`${r}.length ${s} ${n}`)}};ck.default=ave;var lk={};Object.defineProperty(lk,"__esModule",{value:!0});const FT=Vn,Si=zt,uve=Ge,cve=Uy,lve={message:({params:{i:t,j:e}})=>(0,Si.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Si._)`{i: ${t}, j: ${e}}`},dve={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lve,code(t){const{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;const u=e.let("valid"),l=i.items?(0,FT.getSchemaTypes)(i.items):[];t.block$data(u,c,(0,Si._)`${o} === false`),t.ok(u);function c(){const p=e.let("i",(0,Si._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Si._)`${p} > 1`,()=>(d()?h:f)(p,m))}function d(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){const E=e.name("item"),A=(0,FT.checkDataTypes)(l,E,a.opts.strictNumbers,FT.DataType.Wrong),_=e.const("indices",(0,Si._)`{}`);e.for((0,Si._)`;${p}--;`,()=>{e.let(E,(0,Si._)`${r}[${p}]`),e.if(A,(0,Si._)`continue`),l.length>1&&e.if((0,Si._)`typeof ${E} == "string"`,(0,Si._)`${E} += "_"`),e.if((0,Si._)`typeof ${_}[${E}] == "number"`,()=>{e.assign(m,(0,Si._)`${_}[${E}]`),t.error(),e.assign(u,!1).break()}).code((0,Si._)`${_}[${E}] = ${p}`)})}function f(p,m){const E=(0,uve.useFunc)(e,cve.default),A=e.name("outer");e.label(A).for((0,Si._)`;${p}--;`,()=>e.for((0,Si._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Si._)`${E}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(A)})))}}};lk.default=dve;var dk={};Object.defineProperty(dk,"__esModule",{value:!0});const sP=zt,fve=Ge,hve=Uy,pve={message:"must be equal to constant",params:({schemaCode:t})=>(0,sP._)`{allowedValue: ${t}}`},mve={keyword:"const",$data:!0,error:pve,code(t){const{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,sP._)`!${(0,fve.useFunc)(e,hve.default)}(${r}, ${s})`):t.fail((0,sP._)`${i} !== ${r}`)}};dk.default=mve;var fk={};Object.defineProperty(fk,"__esModule",{value:!0});const k0=zt,yve=Ge,gve=Uy,vve={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,k0._)`{allowedValues: ${t}}`},wve={keyword:"enum",schemaType:"array",$data:!0,error:vve,code(t){const{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,yve.useFunc)(e,gve.default));let c;if(a||n)c=e.let("valid"),t.block$data(c,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const f=e.const("vSchema",i);c=(0,k0.or)(...s.map((p,m)=>h(f,m)))}t.pass(c);function d(){e.assign(c,!1),e.forOf("v",i,f=>e.if((0,k0._)`${l()}(${r}, ${f})`,()=>e.assign(c,!0).break()))}function h(f,p){const m=s[p];return typeof m=="object"&&m!==null?(0,k0._)`${l()}(${r}, ${f}[${p}])`:(0,k0._)`${r} === ${m}`}}};fk.default=wve;Object.defineProperty(tk,"__esModule",{value:!0});const _ve=rk,bve=nk,Eve=ik,Ave=ok,Sve=ak,Tve=uk,Dve=ck,xve=lk,Pve=dk,Cve=fk,Ive=[_ve.default,bve.default,Eve.default,Ave.default,Sve.default,Tve.default,Dve.default,xve.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Pve.default,Cve.default];tk.default=Ive;var hk={},Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.validateAdditionalItems=void 0;const xh=zt,oP=Ge,kve={message:({params:{len:t}})=>(0,xh.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,xh._)`{limit: ${t}}`},$ve={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kve,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,oP.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}SV(t,n)}};function SV(t,e){const{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;const a=r.const("len",(0,xh._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,xh._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,oP.alwaysValidSchema)(o,n)){const l=r.var("valid",(0,xh._)`${a} <= ${e.length}`);r.if((0,xh.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,a,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:oP.Type.Num},l),o.allErrors||r.if((0,xh.not)(l),()=>r.break())})}}Ky.validateAdditionalItems=SV;Ky.default=$ve;var pk={},Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.validateTuple=void 0;const o6=zt,k1=Ge,Ove=Yt,Rve={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return TV(t,"additionalItems",e);r.items=!0,!(0,k1.alwaysValidSchema)(r,e)&&t.ok((0,Ove.validateArray)(t))}};function TV(t,e,r=t.schema){const{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=k1.mergeEvaluated.items(n,r.length,a.items));const u=n.name("valid"),l=n.const("len",(0,o6._)`${i}.length`);r.forEach((d,h)=>{(0,k1.alwaysValidSchema)(a,d)||(n.if((0,o6._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function c(d){const{opts:h,errSchemaPath:f}=a,p=r.length,m=p===d.minItems&&(p===d.maxItems||d[e]===!1);if(h.strictTuples&&!m){const E=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,k1.checkStrictMode)(a,E,h.strictTuples)}}}Vy.validateTuple=TV;Vy.default=Rve;Object.defineProperty(pk,"__esModule",{value:!0});const Nve=Vy,Bve={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Nve.validateTuple)(t,"items")};pk.default=Bve;var mk={};Object.defineProperty(mk,"__esModule",{value:!0});const a6=zt,Fve=Ge,Mve=Yt,jve=Ky,Uve={message:({params:{len:t}})=>(0,a6.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,a6._)`{limit: ${t}}`},Lve={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Uve,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Fve.alwaysValidSchema)(n,e)&&(s?(0,jve.validateAdditionalItems)(t,s):t.ok((0,Mve.validateArray)(t)))}};mk.default=Lve;var yk={};Object.defineProperty(yk,"__esModule",{value:!0});const Vo=zt,Db=Ge,Kve={message:({params:{min:t,max:e}})=>e===void 0?(0,Vo.str)`must contain at least ${t} valid item(s)`:(0,Vo.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Vo._)`{minContains: ${t}}`:(0,Vo._)`{minContains: ${t}, maxContains: ${e}}`},Vve={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Kve,code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;let o,a;const{minContains:u,maxContains:l}=n;i.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=e.const("len",(0,Vo._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Db.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Db.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Db.alwaysValidSchema)(i,r)){let m=(0,Vo._)`${c} >= ${o}`;a!==void 0&&(m=(0,Vo._)`${m} && ${c} <= ${a}`),t.pass(m);return}i.items=!0;const d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Vo._)`${s}.length > 0`,h)):(e.let(d,!1),h()),t.result(d,()=>t.reset());function h(){const m=e.name("_valid"),E=e.let("count",0);f(m,()=>e.if(m,()=>p(E)))}function f(m,E){e.forRange("i",0,c,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:Db.Type.Num,compositeRule:!0},m),E()})}function p(m){e.code((0,Vo._)`${m}++`),a===void 0?e.if((0,Vo._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Vo._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Vo._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};yk.default=Vve;var DV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=zt,r=Ge,n=Yt;t.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const d=l===1?"property":"properties";return(0,e.str)`must have ${d} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:d}})=>(0,e._)`{property: ${u},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${c}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(u){const[l,c]=i(u);o(u,l),a(u,c)}};function i({schema:u}){const l={},c={};for(const d in u){if(d==="__proto__")continue;const h=Array.isArray(u[d])?l:c;h[d]=u[d]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:d,it:h}=u;if(Object.keys(l).length===0)return;const f=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const E=(0,n.propertyInData)(c,d,p,h.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),h.allErrors?c.if(E,()=>{for(const A of m)(0,n.checkReportMissingProp)(u,A)}):(c.if((0,e._)`${E} && (${(0,n.checkMissingProp)(u,m,f)})`),(0,n.reportMissingProp)(u,f),c.else())}}t.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:d,keyword:h,it:f}=u,p=c.name("valid");for(const m in l)(0,r.alwaysValidSchema)(f,l[m])||(c.if((0,n.propertyInData)(c,d,m,f.opts.ownProperties),()=>{const E=u.subschema({keyword:h,schemaProp:m},p);u.mergeValidEvaluated(E,p)},()=>c.var(p,!0)),u.ok(p))}t.validateSchemaDeps=a,t.default=s})(DV);var gk={};Object.defineProperty(gk,"__esModule",{value:!0});const xV=zt,qve=Ge,Hve={message:"property name must be valid",params:({params:t})=>(0,xV._)`{propertyName: ${t.propertyName}}`},zve={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Hve,code(t){const{gen:e,schema:r,data:n,it:s}=t;if((0,qve.alwaysValidSchema)(s,r))return;const i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,xV.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};gk.default=zve;var pS={};Object.defineProperty(pS,"__esModule",{value:!0});const xb=Yt,va=zt,Wve=rc,Pb=Ge,Gve={message:"must NOT have additional properties",params:({params:t})=>(0,va._)`{additionalProperty: ${t.additionalProperty}}`},Jve={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Gve,code(t){const{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Pb.alwaysValidSchema)(o,r))return;const l=(0,xb.allSchemaProperties)(n.properties),c=(0,xb.allSchemaProperties)(n.patternProperties);d(),t.ok((0,va._)`${i} === ${Wve.default.errors}`);function d(){e.forIn("key",s,E=>{!l.length&&!c.length?p(E):e.if(h(E),()=>p(E))})}function h(E){let A;if(l.length>8){const _=(0,Pb.schemaRefOrVal)(o,n.properties,"properties");A=(0,xb.isOwnProperty)(e,_,E)}else l.length?A=(0,va.or)(...l.map(_=>(0,va._)`${E} === ${_}`)):A=va.nil;return c.length&&(A=(0,va.or)(A,...c.map(_=>(0,va._)`${(0,xb.usePattern)(t,_)}.test(${E})`))),(0,va.not)(A)}function f(E){e.code((0,va._)`delete ${s}[${E}]`)}function p(E){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Pb.alwaysValidSchema)(o,r)){const A=e.name("valid");u.removeAdditional==="failing"?(m(E,A,!1),e.if((0,va.not)(A),()=>{t.reset(),f(E)})):(m(E,A),a||e.if((0,va.not)(A),()=>e.break()))}}function m(E,A,_){const g={keyword:"additionalProperties",dataProp:E,dataPropType:Pb.Type.Str};_===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,A)}}};pS.default=Jve;var vk={};Object.defineProperty(vk,"__esModule",{value:!0});const Xve=Ba,u6=Yt,MT=Ge,c6=pS,Zve={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&c6.default.code(new Xve.KeywordCxt(i,c6.default,"additionalProperties"));const o=(0,u6.allSchemaProperties)(r);for(const d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=MT.mergeEvaluated.props(e,(0,MT.toHash)(o),i.props));const a=o.filter(d=>!(0,MT.alwaysValidSchema)(i,r[d]));if(a.length===0)return;const u=e.name("valid");for(const d of a)l(d)?c(d):(e.if((0,u6.propertyInData)(e,s,d,i.opts.ownProperties)),c(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function c(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};vk.default=Zve;var wk={};Object.defineProperty(wk,"__esModule",{value:!0});const l6=Yt,Cb=zt,d6=Ge,f6=Ge,Yve={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,l6.allSchemaProperties)(r),u=a.filter(m=>(0,d6.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");i.props!==!0&&!(i.props instanceof Cb.Name)&&(i.props=(0,f6.evaluatedPropsToName)(e,i.props));const{props:d}=i;h();function h(){for(const m of a)l&&f(m),i.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function f(m){for(const E in l)new RegExp(m).test(E)&&(0,d6.checkStrictMode)(i,`property ${E} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,E=>{e.if((0,Cb._)`${(0,l6.usePattern)(t,m)}.test(${E})`,()=>{const A=u.includes(m);A||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:E,dataPropType:f6.Type.Str},c),i.opts.unevaluated&&d!==!0?e.assign((0,Cb._)`${d}[${E}]`,!0):!A&&!i.allErrors&&e.if((0,Cb.not)(c),()=>e.break())})})}}};wk.default=Yve;var _k={};Object.defineProperty(_k,"__esModule",{value:!0});const Qve=Ge,ewe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,Qve.alwaysValidSchema)(n,r)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};_k.default=ewe;var bk={};Object.defineProperty(bk,"__esModule",{value:!0});const twe=Yt,rwe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:twe.validateUnion,error:{message:"must match a schema in anyOf"}};bk.default=rwe;var Ek={};Object.defineProperty(Ek,"__esModule",{value:!0});const $1=zt,nwe=Ge,iwe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,$1._)`{passingSchemas: ${t.passing}}`},swe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:iwe,code(t){const{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((c,d)=>{let h;(0,nwe.alwaysValidSchema)(s,c)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,$1._)`${u} && ${o}`).assign(o,!1).assign(a,(0,$1._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),h&&t.mergeEvaluated(h,$1.Name)})})}}};Ek.default=swe;var Ak={};Object.defineProperty(Ak,"__esModule",{value:!0});const owe=Ge,awe={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=e.name("valid");r.forEach((i,o)=>{if((0,owe.alwaysValidSchema)(n,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};Ak.default=awe;var Sk={};Object.defineProperty(Sk,"__esModule",{value:!0});const ME=zt,PV=Ge,uwe={message:({params:t})=>(0,ME.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,ME._)`{failingKeyword: ${t.ifClause}}`},cwe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:uwe,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,PV.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=h6(n,"then"),i=h6(n,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,l("then",c),l("else",c))}else s?e.if(a,l("then")):e.if((0,ME.not)(a),l("else"));t.pass(o,()=>t.error(!0));function u(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function l(c,d){return()=>{const h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),d?e.assign(d,(0,ME._)`${c}`):t.setParams({ifClause:c})}}}};function h6(t,e){const r=t.schema[e];return r!==void 0&&!(0,PV.alwaysValidSchema)(t,r)}Sk.default=cwe;var Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});const lwe=Ge,dwe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,lwe.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Tk.default=dwe;Object.defineProperty(hk,"__esModule",{value:!0});const fwe=Ky,hwe=pk,pwe=Vy,mwe=mk,ywe=yk,gwe=DV,vwe=gk,wwe=pS,_we=vk,bwe=wk,Ewe=_k,Awe=bk,Swe=Ek,Twe=Ak,Dwe=Sk,xwe=Tk;function Pwe(t=!1){const e=[Ewe.default,Awe.default,Swe.default,Twe.default,Dwe.default,xwe.default,vwe.default,wwe.default,gwe.default,_we.default,bwe.default];return t?e.push(hwe.default,mwe.default):e.push(fwe.default,pwe.default),e.push(ywe.default),e}hk.default=Pwe;var Dk={},xk={};Object.defineProperty(xk,"__esModule",{value:!0});const bn=zt,Cwe={message:({schemaCode:t})=>(0,bn.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,bn._)`{format: ${t}}`},Iwe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Cwe,code(t,e){const{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:l,schemaEnv:c,self:d}=a;if(!u.validateFormats)return;s?h():f();function h(){const p=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),m=r.const("fDef",(0,bn._)`${p}[${o}]`),E=r.let("fType"),A=r.let("format");r.if((0,bn._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(E,(0,bn._)`${m}.type || "string"`).assign(A,(0,bn._)`${m}.validate`),()=>r.assign(E,(0,bn._)`"string"`).assign(A,m)),t.fail$data((0,bn.or)(_(),g()));function _(){return u.strictSchema===!1?bn.nil:(0,bn._)`${o} && !${A}`}function g(){const v=c.$async?(0,bn._)`(${m}.async ? await ${A}(${n}) : ${A}(${n}))`:(0,bn._)`${A}(${n})`,S=(0,bn._)`(typeof ${A} == "function" ? ${v} : ${A}.test(${n}))`;return(0,bn._)`${A} && ${A} !== true && ${E} === ${e} && !${S}`}}function f(){const p=d.formats[i];if(!p){_();return}if(p===!0)return;const[m,E,A]=g(p);m===e&&t.pass(v());function _(){if(u.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function g(S){const x=S instanceof RegExp?(0,bn.regexpCode)(S):u.code.formats?(0,bn._)`${u.code.formats}${(0,bn.getProperty)(i)}`:void 0,D=r.scopeValue("formats",{key:i,ref:S,code:x});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,bn._)`${D}.validate`]:["string",S,D]}function v(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,bn._)`await ${A}(${n})`}return typeof E=="function"?(0,bn._)`${A}(${n})`:(0,bn._)`${A}.test(${n})`}}}};xk.default=Iwe;Object.defineProperty(Dk,"__esModule",{value:!0});const kwe=xk,$we=[kwe.default];Dk.default=$we;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.contentVocabulary=yy.metadataVocabulary=void 0;yy.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];yy.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(YI,"__esModule",{value:!0});const Owe=QI,Rwe=tk,Nwe=hk,Bwe=Dk,p6=yy,Fwe=[Owe.default,Rwe.default,(0,Nwe.default)(),Bwe.default,p6.metadataVocabulary,p6.contentVocabulary];YI.default=Fwe;var Pk={},mS={};Object.defineProperty(mS,"__esModule",{value:!0});mS.DiscrError=void 0;var m6;(function(t){t.Tag="tag",t.Mapping="mapping"})(m6||(mS.DiscrError=m6={}));Object.defineProperty(Pk,"__esModule",{value:!0});const wm=zt,aP=mS,y6=Ms,Mwe=Ly,jwe=Ge,Uwe={message:({params:{discrError:t,tagName:e}})=>t===aP.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,wm._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Lwe={keyword:"discriminator",type:"object",schemaType:"object",error:Uwe,code(t){const{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=e.let("valid",!1),l=e.const("tag",(0,wm._)`${r}${(0,wm.getProperty)(a)}`);e.if((0,wm._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:aP.DiscrError.Tag,tag:l,tagName:a})),t.ok(u);function c(){const f=h();e.if(!1);for(const p in f)e.elseIf((0,wm._)`${l} === ${p}`),e.assign(u,d(f[p]));e.else(),t.error(!1,{discrError:aP.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){const p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},p);return t.mergeEvaluated(m,wm.Name),p}function h(){var f;const p={},m=A(s);let E=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S!=null&&S.$ref&&!(0,jwe.schemaHasRulesButRef)(S,i.self.RULES)){const D=S.$ref;if(S=y6.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,D),S instanceof y6.SchemaEnv&&(S=S.schema),S===void 0)throw new Mwe.default(i.opts.uriResolver,i.baseId,D)}const x=(f=S==null?void 0:S.properties)===null||f===void 0?void 0:f[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);E=E&&(m||A(S)),_(x,v)}if(!E)throw new Error(`discriminator: "${a}" must be required`);return p;function A({required:v}){return Array.isArray(v)&&v.includes(a)}function _(v,S){if(v.const)g(v.const,S);else if(v.enum)for(const x of v.enum)g(x,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(v,S){if(typeof v!="string"||v in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[v]=S}}}};Pk.default=Lwe;const Kwe="http://json-schema.org/draft-07/schema#",Vwe="http://json-schema.org/draft-07/schema#",qwe="Core schema meta-schema",Hwe={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zwe=["object","boolean"],Wwe={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Gwe={$schema:Kwe,$id:Vwe,title:qwe,definitions:Hwe,type:zwe,properties:Wwe,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=RK,n=YI,s=Pk,i=Gwe,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=u,t.exports=e=u,t.exports.Ajv=u,Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var l=Ba;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=zt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=Uw;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=Ly;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(Qx,Qx.exports);var CV=Qx.exports;const Jwe=Zu(CV);var uP={exports:{}},IV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(b,T){return{validate:b,compare:T}}t.fullFormats={date:e(i,o),time:e(u,l),"date-time":e(d,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:m,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:w,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:A,int32:{type:"number",validate:v},int64:{type:"number",validate:S},float:{type:"number",validate:x},double:{type:"number",validate:x},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(b){return b%4===0&&(b%100!==0||b%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(b){const T=n.exec(b);if(!T)return!1;const P=+T[1],C=+T[2],k=+T[3];return C>=1&&C<=12&&k>=1&&k<=(C===2&&r(P)?29:s[C])}function o(b,T){if(b&&T)return b>T?1:b<T?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function u(b,T){const P=a.exec(b);if(!P)return!1;const C=+P[1],k=+P[2],K=+P[3],L=P[5];return(C<=23&&k<=59&&K<=59||C===23&&k===59&&K===60)&&(!T||L!=="")}function l(b,T){if(!(b&&T))return;const P=a.exec(b),C=a.exec(T);if(P&&C)return b=P[1]+P[2]+P[3]+(P[4]||""),T=C[1]+C[2]+C[3]+(C[4]||""),b>T?1:b<T?-1:0}const c=/t|\s/i;function d(b){const T=b.split(c);return T.length===2&&i(T[0])&&u(T[1],!0)}function h(b,T){if(!(b&&T))return;const[P,C]=b.split(c),[k,K]=T.split(c),L=o(P,k);if(L!==void 0)return L||l(C,K)}const f=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function m(b){return f.test(b)&&p.test(b)}const E=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function A(b){return E.lastIndex=0,E.test(b)}const _=-(2**31),g=2**31-1;function v(b){return Number.isInteger(b)&&b<=g&&b>=_}function S(b){return Number.isInteger(b)}function x(){return!0}const D=/[^\\]\\Z/;function w(b){if(D.test(b))return!1;try{return new RegExp(b),!0}catch{return!1}}})(IV);var kV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=CV,r=zt,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},i={message:({keyword:a,schemaCode:u})=>r.str`should be ${s[a].okStr} ${u}`,params:({keyword:a,schemaCode:u})=>r._`{comparison: ${s[a].okStr}, limit: ${u}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(a){const{gen:u,data:l,schemaCode:c,keyword:d,it:h}=a,{opts:f,self:p}=h;if(!f.validateFormats)return;const m=new e.KeywordCxt(h,p.RULES.all.format.definition,"format");m.$data?E():A();function E(){const g=u.scopeValue("formats",{ref:p.formats,code:f.code.formats}),v=u.const("fmt",r._`${g}[${m.schemaCode}]`);a.fail$data(r.or(r._`typeof ${v} != "object"`,r._`${v} instanceof RegExp`,r._`typeof ${v}.compare != "function"`,_(v)))}function A(){const g=m.schema,v=p.formats[g];if(!v||v===!0)return;if(typeof v!="object"||v instanceof RegExp||typeof v.compare!="function")throw new Error(`"${d}": format "${g}" does not define "compare" function`);const S=u.scopeValue("formats",{key:g,ref:v,code:f.code.formats?r._`${f.code.formats}${r.getProperty(g)}`:void 0});a.fail$data(_(S))}function _(g){return r._`${g}.compare(${l}, ${c}) ${s[d].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(t.formatLimitDefinition),a);t.default=o})(kV);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=IV,n=kV,s=zt,i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(l,c={keywords:!0})=>{if(Array.isArray(c))return u(l,c,r.fullFormats,i),l;const[d,h]=c.mode==="fast"?[r.fastFormats,o]:[r.fullFormats,i],f=c.formats||r.formatNames;return u(l,f,d,h),c.keywords&&n.default(l),l};a.get=(l,c="full")=>{const h=(c==="fast"?r.fastFormats:r.fullFormats)[l];if(!h)throw new Error(`Unknown format "${l}"`);return h};function u(l,c,d,h){var f,p;(f=(p=l.opts.code).formats)!==null&&f!==void 0||(p.formats=s._`require("ajv-formats/dist/formats").${h}`);for(const m of c)l.addFormat(m,d[m])}t.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a})(uP,uP.exports);var Xwe=uP.exports;const Zwe=Zu(Xwe);class Ywe extends tc{constructor(e){super(e)}getName(){return"FilterEvaluation"}handle(e,r){const n=vr.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=ta.extractInputField(s.credential,o.value.path));let u=!1;for(const l of a)if(this.evaluateFilter(l,o.value)){u=!0;const c={result:{...a[0]},valid:!0,format:s.format};this.getResults().push({...this.createResultObject(vr.stringify(o.path.slice(0,3)),i,c)})}if(!u)if(a.length){const l={result:{...a[0]},valid:!1,format:s.format};this.createResponse(o,i,l,On.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{const l={valid:!1,format:s.format};this.createResponse(o,i,l,On.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)==null?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)==null?void 0:a.fields)==null?void 0:u.length)===0}).forEach(i=>{const o={result:[],valid:!0,format:n.format};this.getResults().push({...this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)})})}createResponse(e,r,n,s){this.getResults().push({...this.createResultObject(vr.stringify(e.path.slice(0,3)),r,n),status:Be.ERROR,message:s})}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Be.INFO,message:On.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var s;(s=r.filter)!=null&&s.format&&r.filter.format==="date"&&this.transformDateFormat(e);const n=new Jwe({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return Zwe(n),r.filter?n.validate(r.filter,e.value):!0}transformDateFormat(e){const r=new Date(e.value);let n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}}var xr={},$V={},OV={};Object.defineProperty(OV,"__esModule",{value:!0});var RV={};Object.defineProperty(RV,"__esModule",{value:!0});var NV={};Object.defineProperty(NV,"__esModule",{value:!0});var BV={};Object.defineProperty(BV,"__esModule",{value:!0});var FV={};Object.defineProperty(FV,"__esModule",{value:!0});var MV={};Object.defineProperty(MV,"__esModule",{value:!0});var yS={};Object.defineProperty(yS,"__esModule",{value:!0});yS.Directives=void 0;yS.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"};var gS={};Object.defineProperty(gS,"__esModule",{value:!0});gS.ExchangeStatus=void 0;gS.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"};var jV={};Object.defineProperty(jV,"__esModule",{value:!0});var UV={};Object.defineProperty(UV,"__esModule",{value:!0});var LV={};Object.defineProperty(LV,"__esModule",{value:!0});var KV={};Object.defineProperty(KV,"__esModule",{value:!0});var VV={};Object.defineProperty(VV,"__esModule",{value:!0});var qV={};Object.defineProperty(qV,"__esModule",{value:!0});var HV={};Object.defineProperty(HV,"__esModule",{value:!0});var zV={};Object.defineProperty(zV,"__esModule",{value:!0});var WV={};Object.defineProperty(WV,"__esModule",{value:!0});var GV={};Object.defineProperty(GV,"__esModule",{value:!0});var JV={};Object.defineProperty(JV,"__esModule",{value:!0});var XV={};Object.defineProperty(XV,"__esModule",{value:!0});var ZV={};Object.defineProperty(ZV,"__esModule",{value:!0});var YV={};Object.defineProperty(YV,"__esModule",{value:!0});var QV={};Object.defineProperty(QV,"__esModule",{value:!0});var e7={};Object.defineProperty(e7,"__esModule",{value:!0});var t7={};Object.defineProperty(t7,"__esModule",{value:!0});var r7={};Object.defineProperty(r7,"__esModule",{value:!0});var vS={};Object.defineProperty(vS,"__esModule",{value:!0});vS.Optionality=void 0;vS.Optionality={Required:"required",Preferred:"preferred"};var n7={};Object.defineProperty(n7,"__esModule",{value:!0});var i7={};Object.defineProperty(i7,"__esModule",{value:!0});var s7={};Object.defineProperty(s7,"__esModule",{value:!0});var o7={};Object.defineProperty(o7,"__esModule",{value:!0});var a7={};Object.defineProperty(a7,"__esModule",{value:!0});var u7={};Object.defineProperty(u7,"__esModule",{value:!0});var c7={};Object.defineProperty(c7,"__esModule",{value:!0});var l7={};Object.defineProperty(l7,"__esModule",{value:!0});var d7={};Object.defineProperty(d7,"__esModule",{value:!0});var wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.Rules=void 0;wS.Rules={All:"all",Pick:"pick"};var f7={};Object.defineProperty(f7,"__esModule",{value:!0});var h7={};Object.defineProperty(h7,"__esModule",{value:!0});var _S={};Object.defineProperty(_S,"__esModule",{value:!0});_S.Status=void 0;_S.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"};var p7={};Object.defineProperty(p7,"__esModule",{value:!0});var m7={};Object.defineProperty(m7,"__esModule",{value:!0});var y7={};Object.defineProperty(y7,"__esModule",{value:!0});var g7={};Object.defineProperty(g7,"__esModule",{value:!0});(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(OV,t),r(RV,t),r(NV,t),r(BV,t),r(FV,t),r(MV,t),r(yS,t),r(gS,t),r(jV,t),r(UV,t),r(LV,t),r(KV,t),r(VV,t),r(qV,t),r(HV,t),r(zV,t),r(WV,t),r(GV,t),r(JV,t),r(XV,t),r(ZV,t),r(YV,t),r(QV,t),r(e7,t),r(t7,t),r(r7,t),r(vS,t),r(n7,t),r(i7,t),r(s7,t),r(o7,t),r(a7,t),r(u7,t),r(c7,t),r(l7,t),r(d7,t),r(wS,t),r(f7,t),r(h7,t),r(_S,t),r(p7,t),r(m7,t),r(y7,t),r(g7,t)})($V);(function(t){var e=Ar&&Ar.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Ar&&Ar.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r($V,t)})(xr);class Qwe extends tc{constructor(r){super(r);Se(this,"fieldIdzInputDescriptorsSameSubjectRequired");Se(this,"fieldIdzInputDescriptorsSameSubjectPreferred");Se(this,"fieldIds");Se(this,"isHolder");Se(this,"credentialsSubjectsByPath");Se(this,"credentialsByPath");Se(this,"messages");this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(Be.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(Be.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(Be.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(r,n){this.findIsHolderFieldIdsToInputDescriptorsSets(r),this.findAllCredentialSubjects(n),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,Be.INFO,xr.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,Be.WARN,xr.Optionality.Preferred),this.updatePresentationSubmission(r)}findIsHolderFieldIdsToInputDescriptorsSets(r){var i;this.fieldIds.push(...vr.nodes(r,"$..fields[*].id")),this.isHolder.push(...vr.nodes(r,"$..is_holder[*]"));const n=(i=this.fieldIds)==null?void 0:i.map(o=>o.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,xr.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,xr.Optionality.Required)),s.forEach(o=>this.getResults().push(this.createResult(o[1],o[0],["",{}],Be.ERROR,void 0)))}evaluateFields(r,n,s,i){const o=[];return n.filter(a=>a.value.directive===i).filter(a=>a.value.field_id.every(u=>s.includes(u))).forEach(a=>r.set(vr.stringify(a.path.slice(0,3)),a.value.field_id)),n.filter(a=>a.value.directive===i).filter(a=>!a.value.field_id.every(u=>s.includes(u))).forEach(a=>o.push([vr.stringify(a.path.slice(0,3)),a.value.field_id])),o}findAllCredentialSubjects(r){const n=vr.nodes(r.map(s=>s.credential),"$..credentialSubject");for(let s=0;s<n.length;s++){const i=n[s],o=vr.stringify(i.path.slice(0,2));this.credentialsSubjectsByPath.set(o,i.value),this.credentialsByPath.set(o,r[s])}}confirmAllFieldSetHasSameSubject(r,n,s){const i=Array.from(r).flatMap(l=>Array.from(this.credentialsSubjectsByPath).filter(c=>l[1].find(d=>Object.keys(c[1]).includes(d)))),o=this.mapCredentialPathsToInputDescriptors(s),a=Array.from(i).flatMap(l=>Object.keys(l[1]).filter(c=>c!=="id")),u=Array.from(r.values()).flatMap(l=>l.every(c=>a.includes(c)))[0];i.forEach(l=>{const c=o.get(l[0]);u&&l[1].id&&this.client.dids.includes(l[1].id)?this.getResults().push(this.createResult(Object.keys(l[1]).filter(d=>d!=="id"),c,l,n,this.credentialsByPath.get(l[0]))):this.getResults().push(this.createResult(Object.keys(l[1]).filter(d=>d!=="id"),c,l,Be.ERROR,this.credentialsByPath.get(l[0])))})}mapCredentialPathsToInputDescriptors(r){var s;const n=new Map;return(s=this.fieldIds)==null||s.forEach(i=>{const o=vr.stringify(i.path.slice(0,3));this.credentialsSubjectsByPath.forEach((a,u)=>{const l=this.isHolder.find(c=>vr.stringify(c.path.slice(0,3))===o);Object.keys(a).includes(i.value)&&(l==null?void 0:l.value.directive)===r&&n.set(u,o)})}),n}createResult(r,n,s,i,o,a){return{input_descriptor_path:n,verifiable_credential_path:s[0],evaluator:this.getName(),status:i,payload:{fieldIdSet:r,credentialSubject:s[1],...o?{format:o.format}:{}},message:a??this.messages.get(i)}}}class e_e extends tc{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;(i=n.constraints)!=null&&i.fields&&(((o=n.constraints)==null?void 0:o.limit_disclosure)===xr.Optionality.Required||((a=n.constraints)==null?void 0:a.limit_disclosure)===xr.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){const i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i!=null&&i.includes(o.type)?!0:(s==xr.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){const s=r==null?void 0:r.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){const a=this.createVcWithRequiredFields(e,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(const o of r)if(o.path){const a=ta.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s={...r.credentialSubject};return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject={...n.credentialSubject,...s},n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===xr.Optionality.Required?Be.INFO:Be.WARN,message:On.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Be.ERROR,message:On.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Be.ERROR,message:On.LIMIT_DISCLOSURE_NOT_SUPPORTED})}}class t_e extends tc{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){const n=[...this.getResults()],s=n.filter(o=>o.status===Be.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==Be.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{const i=vr.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:Be.INFO,payload:{group:i},message:On.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{const n={...r.payload};n.evaluator=r.evaluator,this.getResults().push({...r,evaluator:this.getName(),message:On.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n})})}}class r_e extends tc{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r!=null&&r.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var a;const o=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===o&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&((a=s.fields[i].path)!=null&&a.includes(this.concatenatePath(e[r].payload.result.path)))){const u={...e[r].payload.result},l=this.createResultObject(n,r,u,e);s.fields[i].predicate===xr.Optionality.Required||(l.payload.value=!0),e.push(l)}}retrieveResultInputDescriptorIdx(e){const r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:Be.INFO,message:On.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}}class n_e extends tc{constructor(r){super(r);Se(this,"fieldIds");Se(this,"sameSubject");Se(this,"messages");this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Be.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Be.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Be.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(r,n){const s=this.mapSameSubjectFieldIdsToInputDescriptors(r),i=this.mapCredentialsToResultObjecs(n,s),o=this.countSameSubjectOccurrences(s,i);this.generateErrorResults(o,i),this.updatePresentationSubmission(r)}mapSameSubjectFieldIdsToInputDescriptors(r){this.fieldIds.push(...vr.nodes(r,"$..fields[*].id")),this.sameSubject.push(...vr.nodes(r,"$..same_subject[*]"));const n=[];return this.fieldIds.forEach(s=>{const i=this.sameSubject.find(o=>o.value.field_id.includes(s.value));i&&n.push([s,i])}),n}generateErrorResults(r,n){r.forEach((s,i)=>{const o=n.filter(a=>i===a.payload.fieldIdSet).map(a=>a.payload.credentialSubject.id);(o.length!==s||new Set(o).size!==1)&&n.forEach((a,u,l)=>{a.payload.fieldIdSet===i&&(a.status=Be.ERROR,a.message=this.messages.get(Be.ERROR),l[u]=a)})}),this.client.results.push(...n)}countSameSubjectOccurrences(r,n){const s=new Map;return r.forEach(i=>{n.filter(a=>i[1].value.field_id===a.payload.fieldIdSet)&&(s.has(i[1].value.field_id)&&s.get(i[1].value.field_id)?s.set(i[1].value.field_id,s.get(i[1].value.field_id)+1):s.set(i[1].value.field_id,1))}),s}mapCredentialsToResultObjecs(r,n){const s=[...vr.nodes(r.map(o=>o.credential),"$..credentialSubject")],i=[];return s.forEach(o=>{const a=n.find(u=>vr.query(o.value,`$..${u[0].value}`).length!==0);a&&a[1].value.directive===xr.Optionality.Required?i.push({input_descriptor_path:vr.stringify(a[0].path.slice(0,3)),status:Be.INFO,evaluator:this.getName(),payload:{fieldIdSet:a[1].value.field_id,credentialSubject:o.value},message:this.messages.get(Be.INFO),verifiable_credential_path:vr.stringify(o.path.slice(0,2))}):a&&a[1].value.directive===xr.Optionality.Preferred&&i.push({input_descriptor_path:vr.stringify(a[0].path.slice(0,3)),status:Be.WARN,evaluator:this.getName(),payload:{fieldIdSet:a[1].value.field_id,credentialSubject:o.value},message:this.messages.get(Be.WARN),verifiable_credential_path:vr.stringify(o.path.slice(0,2))})}),i}}class i_e extends tc{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{const i=n.constraints;(i==null?void 0:i.subject_is_issuer)===xr.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){const i=ta.extractInputField(r.map(o=>o.credential),[s.path]);for(const o of i){const a=iye(o.value);o&&o.value&&nye(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,py.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,py.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.ERROR,message:On.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.INFO,message:s??On.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}}let s_e=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const Nc=class Nc extends tc{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){e.input_descriptors.forEach((s,i)=>{const o=e.getVersion()!==Na.v2?s.schema.map(a=>a.uri):[];r.forEach((a,u)=>{const l=Nc.buildVcContextAndSchemaUris(a.credential,e.getVersion());this.evaluateUris(a,l,o,i,u,e.getVersion())})});const n=this.getResults().filter(s=>s.status===Be.INFO).map(s=>{var o;return{id:vr.nodes(e,s.input_descriptor_path)[0].value.id,format:(o=s.payload)==null?void 0:o.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:s_e(),definition_id:e.id,descriptor_map:n})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===Na.v1){for(let u=0;u<n.length;u++)Nc.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(l=>l===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){const n=[];return Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===Na.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type)),n}createSuccessResultObject(e,r,n,s){const i=this.createResult(n,s);return i.status=Be.INFO,i.message=On.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){const i=this.createResult(n,s);return i.status=Be.ERROR,i.message=On.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(e,r){const n=this.createResult(e,r);return n.status=Be.WARN,n.message=On.URI_EVALUATION_DIDNT_PASS,n.payload=On.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Be.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,Nc.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,Nc.HASHLINK_URL_ENCODED_REGEX).next().done)}};Se(Nc,"matchAll",require("string.prototype.matchall")),Se(Nc,"HASHLINK_URL_ENCODED_REGEX",/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g),Se(Nc,"HASHLINK_QUERY_URL_REGEX",/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g);let cP=Nc;class o_e extends tc{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.ERROR,message:On.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.INFO,message:s??On.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}}class a_e extends tc{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{const a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||sye(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.ERROR,message:On.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Be.INFO,message:s??On.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}}const g6=[py.IProofType.BbsBlsSignatureProof2020];class u_e{constructor(){Se(this,"failed_catched",{tag:"root",status:Be.ERROR,message:On.UNKNOWN_EXCEPTION,stacktrace:""});Se(this,"_results");Se(this,"_wrappedVcs");Se(this,"_presentationSubmission");Se(this,"_dids");Se(this,"_limitDisclosureSignatureSuites");Se(this,"_restrictToFormats");Se(this,"_restrictToDIDMethods");Se(this,"_generatePresentationSubmission");this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=g6,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n!=null&&n.restrictToDIDMethods?OE(n==null?void 0:n.restrictToDIDMethods):[],this._dids=n!=null&&n.holderDIDs?oye(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n==null?void 0:n.limitDisclosureSignatureSuites,this._restrictToFormats=n==null?void 0:n.restrictToFormats,this._generatePresentationSubmission=(n==null?void 0:n.generatePresentationSubmission)!==void 0?n.generatePresentationSubmission:!0,n!=null&&n.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s==null||s.handle(e,r);s!=null&&s.hasNext();){s=s.getNext();try{s==null||s.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||g6}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=OE(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){const e=new cP(this);return e.setNext(new a_e(this)).setNext(new o_e(this)).setNext(new Ywe(this)).setNext(new r_e(this)).setNext(new e_e(this)).setNext(new i_e(this)).setNext(new Qwe(this)).setNext(new n_e(this)).setNext(new t_e(this)),e}}class e0{constructor(){Se(this,"_client");this._client=new u_e}getEvaluationClient(){return this._client}selectFrom(e,r,n){var a;let s;this._client.evaluate(e,r,n);const i=[...this.formatNotInfo(Be.WARN)],o=[...this.formatNotInfo(Be.ERROR)];if(e.submission_requirements){const u=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Be.ERROR),l=Array.from(new Set(u));let c;try{c=this.matchSubmissionRequirements(e,e.submission_requirements,l)}catch(p){const m={status:Be.ERROR,message:JSON.stringify(p),tag:"matchSubmissionRequirements"};return{errors:o?[...o,m]:[m],warnings:i,areRequiredCredentialsPresent:Be.ERROR}}const h=this.extractMatches(c).map(p=>vr.nodes(this._client.wrappedVcs.map(m=>m.original),p)[0].value),f=this.determineAreRequiredCredentialsPresent(e,c);s={errors:f===Be.INFO?[]:o,matches:[...c],areRequiredCredentialsPresent:f,verifiableCredential:h,warnings:i}}else{const u=this._client.results.filter(c=>c.evaluator==="MarkForSubmissionEvaluation"&&c.status!==Be.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:o,matches:[],areRequiredCredentialsPresent:Be.ERROR,verifiableCredential:r.map(c=>c.original),warnings:i};{const c=this.matchWithoutSubmissionRequirements(u,e),h=this.extractMatches(c).map(f=>vr.nodes(this._client.wrappedVcs.map(p=>p.original),f)[0].value);s={errors:[],matches:[...c],areRequiredCredentialsPresent:Be.INFO,verifiableCredential:h,warnings:i}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(s,r),s.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,s==null?void 0:s.matches),this.remapMatches(r.map(u=>u.original),s.matches,s==null?void 0:s.verifiableCredential),(a=s.matches)==null||a.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),s.areRequiredCredentialsPresent===Be.INFO?s.errors=[]:(s.errors=o,s.warnings=i,s.verifiableCredential=r.map(u=>u.original)),s}remapMatches(e,r,n){r==null||r.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{const u=vr.query(e,i)[0],l=n==null?void 0:n.findIndex(c=>JSON.stringify(c)===JSON.stringify(u));if(l===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${l}]`}),s.name)})}extractMatches(e){const r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){const n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Be.ERROR,payload:"Not all the InputDescriptors are addressed"}];const s=r.input_descriptors,i=no.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){const o=i.map(a=>ta.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Be.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){const s=[];for(const i of r){const o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){const a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){const n=[],s=this.createIdToVcMap(e);for(const[i,o]of s.entries())if(!(!o||!o.length))for(const a of o){const u=ta.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:xr.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var i;const s={rule:r.rule,vc_path:[]};if(r!=null&&r.from){s.from=r.from;for(const o of n){const a=vr.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(s.name=a.name||a.id,o.payload.group.includes(r.from)&&((i=s.vc_path)==null?void 0:i.indexOf(o.verifiable_credential_path))===-1&&s.vc_path.push(o.verifiable_credential_path))}}return s}evaluate(e,r,n){var i,o,a,u;this._client.evaluate(e,r,n);const s={areRequiredCredentialsPresent:Be.INFO,verifiableCredential:r.map(l=>l.original)};if(s.warnings=this.formatNotInfo(Be.WARN),s.errors=this.formatNotInfo(Be.ERROR),this._client.assertPresentationSubmission(),(i=this._client.presentationSubmission)!=null&&i.descriptor_map.length){const l=(o=this._client.presentationSubmission)==null?void 0:o.descriptor_map.length;for(let c=0;c<l;c++)this._client.presentationSubmission.descriptor_map[c]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[c]);this._client.presentationSubmission.descriptor_map.splice(0,l),s.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",s.value),s.verifiableCredential=this._client.wrappedVcs.map(l=>l.original),s.areRequiredCredentialsPresent=(u=(a=s.value)==null?void 0:a.descriptor_map)!=null&&u.length?Be.INFO:Be.ERROR,s}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{const n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){const i=this._client.results.filter(d=>d.evaluator==="MarkForSubmissionEvaluation"&&d.payload.group&&d.status!==Be.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(d=>{d.group&&d.group.forEach(h=>{u.has(h)?u.set(h,u.get(h)+1):u.set(h,1)})});const l=this.evaluateRequirements(e.submission_requirements,o,u,0),c=a.filter(d=>l[1].find(h=>h.verifiable_credential_path===d[1]));return this.updatePresentationSubmission(c),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}const n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==Be.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{const n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(e,r){const n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,l)=>{u[1]===o[1]&&i.push([`$[${l}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{const a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0;const o=[];for(const a of e)if(a.from){if(a.rule===xr.Rules.All){const[u,l]=this.countMatchingInputDescriptors(a,r);if(u!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...l)}else if(a.rule===xr.Rules.Pick){const[u,l]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(c){if(s===0)throw c}o.push(...l)}}else if(a.from_nested){const[u,l]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...l),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0;const s=[];for(const i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{const s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)==null||n.forEach(s=>{var o;const i=no.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(i===-1)throw new Error("index is not right");(o=e.vcIndexes)==null||o.push(i)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return Be.ERROR;const s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===xr.Rules.All&&s.includes(Be.ERROR))return Be.ERROR;const i=s.filter(o=>o!==Be.ERROR).length;if(n.count)return n.count>i?Be.ERROR:n.count<i?Be.WARN:Be.INFO;if(n.min&&n.min>i)return Be.ERROR;if(n.max&&n.max<i)return Be.WARN}else return s.includes(Be.ERROR)?Be.ERROR:s.includes(Be.WARN)?Be.WARN:Be.INFO;return Be.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Be.ERROR;if(r.from){const n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case xr.Rules.All:return r.vc_path.length===n?Be.INFO:Be.WARN;case xr.Rules.Pick:return this.getPickRuleStatus(r);default:return Be.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return Be.INFO}getPickRuleStatus(e){return e.vc_path.length===0?Be.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?Be.WARN:Be.ERROR:e.min&&e.vc_path.length<e.min?Be.ERROR:e.max&&e.vc_path.length>e.max?Be.WARN:Be.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){const n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(e,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)})}replacePathWithAlias(e,r){e.path=e.path.replace("$","$."+r),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){const r=new Map,n=new Map;for(let s=0;s<e.length;s++){const i=e[s].input_descriptor_path;if(n.has(i)){const o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(const[s,i]of n.entries()){const o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(const s of e)s.group&&s.group.includes(r)&&n++;return n}}var sv;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(sv||(sv={}));var v6;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(v6||(v6={}));var Ck={exports:{}};Ck.exports=Ik;Ck.exports.default=Ik;const Pn={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},c_e=Object.prototype.hasOwnProperty,jT={type:["number","string"]};function Fn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:jT.type},message:"must be number,string",schema:jT.type,parentSchema:jT,data:t};i===null?i=[a]:i.push(a),o++}return Fn.errors=i,o===0}function O1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Pn.required,parentSchema:Pn,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!c_e.call(Pn.properties,a)){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Pn,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Fn(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++)Fn(a[l],{instancePath:e+"/enum/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)}else{const u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pn.properties.enum.type,parentSchema:Pn.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Fn(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Fn(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){const u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pn.properties.format.type,parentSchema:Pn.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){const u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Pn.properties.maxLength.type,parentSchema:Pn.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Fn(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){const u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Pn.properties.minLength.type,parentSchema:Pn.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Fn(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Fn.errors:i.concat(Fn.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){const u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pn.properties.not.type,parentSchema:Pn.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){const u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pn.properties.pattern.type,parentSchema:Pn.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){const u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pn.properties.type.type,parentSchema:Pn.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pn.type,parentSchema:Pn,data:t};i===null?i=[a]:i.push(a),o++}return O1.errors=i,o===0}function Ik(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return O1(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?O1.errors:i.concat(O1.errors),o=i.length),Ik.errors=i,o===0}var l_e=Ck.exports;const d_e=Zu(l_e);var kk={exports:{}};kk.exports=$k;kk.exports.default=$k;const Or={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},f_e=Object.prototype.hasOwnProperty,UT={type:["number","string"]};function Mn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:UT.type},message:"must be number,string",schema:UT.type,parentSchema:UT,data:t};i===null?i=[a]:i.push(a),o++}return Mn.errors=i,o===0}function R1(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){const a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Or.required,parentSchema:Or,data:t};i===null?i=[a]:i.push(a),o++}for(const a in t)if(!f_e.call(Or.properties,a)){const u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Or,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Mn(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){const u=a.length;for(let l=0;l<u;l++)Mn(a[l],{instancePath:e+"/enum/"+l,parentData:a,parentDataProperty:l,rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)}else{const u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Or.properties.enum.type,parentSchema:Or.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Mn(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Mn(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){const u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.format.type,parentSchema:Or.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let a=t.formatExclusiveMaximum;if(typeof a!="string"){const u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.formatExclusiveMaximum.type,parentSchema:Or.properties.formatExclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let a=t.formatExclusiveMinimum;if(typeof a!="string"){const u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.formatExclusiveMinimum.type,parentSchema:Or.properties.formatExclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let a=t.formatMaximum;if(typeof a!="string"){const u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.formatMaximum.type,parentSchema:Or.properties.formatMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let a=t.formatMinimum;if(typeof a!="string"){const u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.formatMinimum.type,parentSchema:Or.properties.formatMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){const u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Or.properties.maxLength.type,parentSchema:Or.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Mn(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){const u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Or.properties.minLength.type,parentSchema:Or.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Mn(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Mn.errors:i.concat(Mn.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){const u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Or.properties.not.type,parentSchema:Or.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){const u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.pattern.type,parentSchema:Or.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){const u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Or.properties.type.type,parentSchema:Or.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{const a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Or.type,parentSchema:Or,data:t};i===null?i=[a]:i.push(a),o++}return R1.errors=i,o===0}function $k(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return R1(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?R1.errors:i.concat(R1.errors),o=i.length),$k.errors=i,o===0}var h_e=kk.exports;const p_e=Zu(h_e);class Sl{constructor(e,r){Se(this,"parentTag");Se(this,"myTag");this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new CE(this.getTag(),Be.ERROR,e)}}class jE extends Sl{constructor(r){super(r,"fields");Se(this,"mustHaveValidJsonPathsMsg",'field object "path" property must contain array of valid json paths');Se(this,"pathObjMustHaveValidJsonPathMsg",'field object "path" property must contain valid json paths.');Se(this,"filterMustBeValidJsonSchemaMsg",'field object "filter" property must be valid json schema');Se(this,"filterIsMustInPresenceOfPredicateMsg",'field object must have a "filter" property if "predicate" is present');Se(this,"filterIsNotValidJsonSchemaDescriptorMsg",'could not parse "filter" object as a valid json schema descriptor.');Se(this,"purposeShouldBeANonEmptyStringMsg","purpose should be a non empty string");Se(this,"shouldBeKnownOptionMsg","Unknown predicate property")}getValidations(r){let n=[];if(r)for(let s=0;s<r.length;s++)n=[...n,...this.getValidationsFor(r[s],s)];return n}getValidationsFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(n),target:r,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(n),target:r,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(n),target:r,predicate:s=>jE.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>jE.shouldBeKnownOption(s==null?void 0:s.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}mustHaveValidJsonPaths(){return r=>r.path!=null&&r.path.length>0&&this._validateJsonPaths(r.path)}_validateJsonPaths(r){const n=[];if(r.forEach(s=>{try{vr.parse(s)}catch{n.push(s)}}),n.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(n));return!0}filterMustBeValidJsonSchema(){return r=>this._validateFilter(r.filter)}_validateFilter(r){if(r==null)return!0;let n=!1;try{n=p_e(r),n||(n=d_e(r))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(r))}return n}filterIsMustInPresenceOfPredicate(){return r=>!(r.predicate!=null&&r.filter==null)}static optionalNonEmptyString(r){return r==null||r.length>0}static shouldBeKnownOption(r){return r==null||r==xr.Optionality.Required||r==xr.Optionality.Preferred}}class Od extends Sl{constructor(r){super(r,"constraints");Se(this,"disclosureLimitShouldHaveKnownValueMsg","limit_disclosure should have known value");Se(this,"statusShouldHaveKnownValueMsg","Unknown status property");Se(this,"statusDirectiveShouldHaveKnownValueMsg","status directive should have known value");Se(this,"subjectIsIssuerShouldBeKnownValueMsg","subject_is_issuer should be known value");Se(this,"fieldIdIsMandatoryMsg","field_id property is mandatory");Se(this,"fieldIdMustBeArrayOfStringsMsg","field_id property must be an array of strings");Se(this,"fieldIdMustCorrespondToFieldIdMsg","field_id must correspond to a present field object id property");Se(this,"directivePropertyIsMandatoryMsg","directive property is mandatory");Se(this,"oneOfTheKnownDirectivePropertiesMandatoryMsg","directive property must be one of [required, preferred]")}getValidations(r){let n=[];return r&&(n=[{tag:this.getTag(),target:r,predicate:s=>Od.disclosureLimitShouldHaveKnownValue(s.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>Od.statusShouldHaveKnownValue(s.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:Od.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>Od.shouldBeKnownOption(s.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:r,predicate:s=>this.fieldIdInSubjectMustCorrespondToFieldId(s,s.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:r,predicate:s=>this.fieldIdInSubjectMustCorrespondToFieldId(s,s.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(r==null?void 0:r.is_holder),...this.getSubjectsValidations(r==null?void 0:r.same_subject),...this.getFieldsValidations(r)]),n}getFieldsValidations(r){var n;return(n=r==null?void 0:r.fields)!=null&&n.length?new jE(this.getTag()).getValidations(r.fields):[]}static disclosureLimitShouldHaveKnownValue(r){return!r||r===xr.Optionality.Preferred||r===xr.Optionality.Required}static statusShouldHaveKnownValue(r){return r==null||r.active!=null||r.revoked!=null||r.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return r=>{var n,s,i;return this.pdStatusShouldBeKnown((n=r==null?void 0:r.statuses)==null?void 0:n.active)&&this.pdStatusShouldBeKnown((s=r==null?void 0:r.statuses)==null?void 0:s.revoked)&&this.pdStatusShouldBeKnown((i=r==null?void 0:r.statuses)==null?void 0:i.suspended)}}static pdStatusShouldBeKnown(r){return!r||r.directive===xr.Directives.Allowed||r.directive===xr.Directives.Disallowed||r.directive===xr.Directives.Required}static shouldBeKnownOption(r){return r?r.filter(n=>n.directive!==xr.Optionality.Preferred&&n.directive!==xr.Optionality.Required).length===0:!0}getSubjectsValidations(r){if(r){let n=[];for(let s=0;s<r.length;s++)n=[{tag:this.getMyTag(s),target:r[s],predicate:i=>Array.isArray(i.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>!!i.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.field_id.length===i.field_id.filter(o=>typeof o=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(s),target:r[s],predicate:i=>i.directive===xr.Optionality.Preferred||i.directive===xr.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return n}return[]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}fieldIdInSubjectMustCorrespondToFieldId(r,n){if(n){for(const s of n)for(const i of s.field_id)if(!Od.isValidFieldId(r,i))return!1}return!0}static isValidFieldId(r,n){return r!=null&&r.fields?r.fields.map(s=>s.id).includes(n):!1}}class w6 extends Sl{constructor(r){super(r,"input_descriptor");Se(this,"idMustBeNonEmptyStringMsg","input descriptor id must be non-empty string");Se(this,"nameShouldBeNonEmptyStringMsg","input descriptor name should be non-empty string");Se(this,"purposeShouldBeNonEmptyStringMsg","input descriptor purpose should be non-empty string");Se(this,"shouldHaveValidSchemaURIMsg","schema should have valid URI")}getValidations(r){let n=[];return n.push({tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueIds(s),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueFieldsIds(s),message:"fields id must be unique"}),r.forEach((s,i)=>{n=[...n,...this.getValidationFor(s,i),...this.constraintsValidations(s,i)]}),n}getValidationFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:s=>$d.nonEmptyString(s==null?void 0:s.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(n),target:r,predicate:s=>$d.optionalNonEmptyString(s==null?void 0:s.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>$d.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(r){const n=[],s=new Set,i=[];return r.map(o=>{var a;return(a=o.constraints)==null?void 0:a.fields}).forEach(o=>{o&&i.push(...o)}),i.forEach(o=>{o.id&&n.push(o.id)}),n.forEach(o=>s.add(o)),n.length===s.size}shouldHaveUniqueIds(r){const n=[],s=new Set;return r.forEach(i=>n.push(i.id)),n.forEach(i=>s.add(i)),n.length===s.size}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}isValidSchema(){return r=>r.schema.filter(n=>this.isAValidURI(n.uri)&&(n.required==null||typeof n.required=="boolean")).length>0}isAValidURI(r){if(r){if(!$d.nonEmptyString(r))return!1}else return!1;if(r.startsWith("http://")||r.startsWith("https://"))try{new URL(r)}catch{return $d.isValidDIDURI(r)}return!0}constraintsValidations(r,n){return r.constraints?new Od(this.getMyTag(n)).getValidations(r.constraints):[]}}class _6 extends Sl{constructor(r){super(r,"input_descriptor");Se(this,"idMustBeNonEmptyStringMsg","input descriptor id must be non-empty string");Se(this,"nameShouldBeNonEmptyStringMsg","input descriptor name should be non-empty string");Se(this,"purposeShouldBeNonEmptyStringMsg","input descriptor purpose should be non-empty string")}getValidations(r){let n=[];return n.push({tag:this.getTag(),target:r,predicate:s=>this.shouldNotHaveSchema(s),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueIds(s),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:r,predicate:s=>this.shouldHaveUniqueFieldsIds(s),message:"fields id must be unique"}),r.forEach((s,i)=>{n=[...n,...this.getValidationFor(s,i),...this.constraintsValidations(s,i)]}),n}getValidationFor(r,n){return[{tag:this.getMyTag(n),target:r,predicate:s=>$d.nonEmptyString(s==null?void 0:s.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>$d.optionalNonEmptyString(s==null?void 0:s.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(n),target:r,predicate:s=>$d.optionalNonEmptyString(s==null?void 0:s.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(r){const n=[],s=new Set,i=[];return r.map(o=>{var a;return(a=o.constraints)==null?void 0:a.fields}).forEach(o=>{o&&i.push(...o)}),i.forEach(o=>{o.id&&n.push(o.id)}),n.forEach(o=>s.add(o)),n.length===s.size}shouldHaveUniqueIds(r){const n=[],s=new Set;return r.forEach(i=>n.push(i.id)),n.forEach(i=>s.add(i)),n.length===s.size}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}constraintsValidations(r,n){return r.constraints?new Od(this.getMyTag(n)).getValidations(r.constraints):[]}shouldNotHaveSchema(r){let n=!1;return r.forEach(s=>{s.schema&&(n=!0)}),!n}}class v7{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}}class w7{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}}class Rd extends Sl{constructor(r){super(r,"submission_requirements");Se(this,"ruleIsMandatoryMsg","rule is a mandatory field");Se(this,"needsOneFromOrFromNestedMsg","needs exactly one of from or from_nested");Se(this,"fromNestedShouldBeArrayMsg","The value of the from_nested property MUST be an array");Se(this,"isCountPositiveIntMsg","count must be a practical positive number");Se(this,"isMinPositiveIntMsg","min must be a practical positive number");Se(this,"isMaxPositiveIntMsg","max must be a practical positive number");Se(this,"ruleShouldBePickOrAllMsg","rule should be either pick or all")}getValidations(r){let n=[];if(r!=null&&r.length>0)for(let s=0;s<r.length;s++)n=[...n,...this.getMyValidations(s,r),...this.getSubValidations(s,r)];return n}getMyValidations(r,n){return[{tag:this.getMyTag(r),target:n[r],predicate:Rd.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(r),target:n[r],predicate:Rd.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(r),target:n[r],predicate:Rd.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(r),target:n[r],predicate:Rd.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(r){return this.parentTag+"."+this.myTag+"["+r+"]"}getSubValidations(r,n){const s=n[r].from_nested;return s!=null?new Rd(this.getFromNestedTag(r)).getValidations(s):[]}getFromNestedTag(r){return this.getMyTag(r)+".from_nested"}isCountPositiveInt(r){return r.rule!=="pick"||r.count==null||0<r.count}isMinPositiveInt(r){return r.rule!=="pick"||r.min==null||0<=r.min}isMaxPositiveInt(r){return r.rule!=="pick"||r.max==null||0<r.max}static ruleIsMandatory(r){return r.rule!=null}static needsOneFromOrFromNested(r){return r.from==null!=(r.from_nested==null)}static fromNestedShouldBeArray(r){return r.from_nested==null||Array.isArray(r.from_nested)}static ruleShouldBePickOrAll(r){return r.rule==="pick"||r.rule==="all"}}class No extends Sl{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new w6(this.myTag).getValidations(e.input_descriptors),...new Rd(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new w6(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>No.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>No.optionalNonEmptyString(r==null?void 0:r.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>No.optionalNonEmptyString(r==null?void 0:r.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>No.formatValuesShouldNotBeEmpty(r==null?void 0:r.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>No.formatValuesShouldBeAmongKnownValues(r==null?void 0:r.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>No.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>No.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var n,s,i,o,a,u;let r=!0;return(e==null?void 0:e.jwt)!=null&&(r=r&&((n=e.jwt.alg)==null?void 0:n.length)>0),(e==null?void 0:e.jwt_vc)!=null&&(r=r&&((s=e.jwt_vc.alg)==null?void 0:s.length)>0),(e==null?void 0:e.jwt_vp)!=null&&(r=r&&((i=e.jwt_vp.alg)==null?void 0:i.length)>0),(e==null?void 0:e.ldp)!=null&&(r=r&&((o=e.ldp.proof_type)==null?void 0:o.length)>0),(e==null?void 0:e.ldp_vc)!=null&&(r=r&&((a=e.ldp_vc.proof_type)==null?void 0:a.length)>0),(e==null?void 0:e.ldp_vp)!=null&&(r=r&&((u=e.ldp_vp.proof_type)==null?void 0:u.length)>0),r}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){const n=v7.getJwtAlgos(),s=w7.getLdpTypes();r=[];for(const[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...No.isJWTAlgoKnown(o,n)):r.push(...No.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){const n=[];if(e!=null&&e.alg!=null)for(const s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){const n=[];if(e!=null&&e.proof_type!=null)for(const s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){const r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});const n=new Set(r),s=[];No.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});const i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e==null?void 0:e.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>kK({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}}class Ok extends Sl{constructor(r){super(r,"frame");Se(this,"frameIsValidMsg","frame value is not valid")}getValidations(r){let n=[];return n=[...n,...this.getMyValidations(r)],n}getMyValidations(r){return[{tag:this.getMyTag(),target:r,predicate:Ok.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(r){if(!r||Array.isArray(r)||typeof r!="object")return!1;const n=r;if(n&&n["@id"]){for(const s of no.asArray(r["@id"]))if(!(no.isObject(s)||no.isUrlAbsolute(s))||no.isString(s)&&s.indexOf("_:")===0)return!1}if(n["@types"]){for(const s of no.asArray(r["@types"]))if(!(no.isObject(s)||no.isUrlAbsolute(s))||no.isString(s)&&s.indexOf("_:")===0)return!1}return!0}}class ba extends Sl{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new _6(this.myTag).getValidations(e.input_descriptors),...new Rd(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new _6(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new Ok(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>ba.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>ba.optionalNonEmptyString(r==null?void 0:r.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>ba.optionalNonEmptyString(r==null?void 0:r.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>ba.formatValuesShouldNotBeEmpty(r==null?void 0:r.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>ba.formatValuesShouldBeAmongKnownValues(r==null?void 0:r.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>ba.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var n,s,i,o,a,u;let r=!0;return(e==null?void 0:e.jwt)!=null&&(r=r&&((n=e.jwt.alg)==null?void 0:n.length)>0),(e==null?void 0:e.jwt_vc)!=null&&(r=r&&((s=e.jwt_vc.alg)==null?void 0:s.length)>0),(e==null?void 0:e.jwt_vp)!=null&&(r=r&&((i=e.jwt_vp.alg)==null?void 0:i.length)>0),(e==null?void 0:e.ldp)!=null&&(r=r&&((o=e.ldp.proof_type)==null?void 0:o.length)>0),(e==null?void 0:e.ldp_vc)!=null&&(r=r&&((a=e.ldp_vc.proof_type)==null?void 0:a.length)>0),(e==null?void 0:e.ldp_vp)!=null&&(r=r&&((u=e.ldp_vp.proof_type)==null?void 0:u.length)>0),r}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){const n=v7.getJwtAlgos(),s=w7.getLdpTypes();r=[];for(const[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...ba.isJWTAlgoKnown(o,n)):r.push(...ba.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){const n=[];if(e!=null&&e.alg!=null)for(const s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){const n=[];if(e!=null&&e.proof_type!=null)for(const s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){const r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});const n=new Set(r),s=[];ba.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});const i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e==null?void 0:e.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>OK({presentation_definition:e})}}class Is extends Sl{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>Is.nonEmptyString(r==null?void 0:r.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Is.nonEmptyString(r==null?void 0:r.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Is.descriptorMapMustBePresent(r==null?void 0:r.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>Is.idMustBeSameForEachLevelOfNesting(r==null?void 0:r.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>Is.formatsShouldBeKnown(r==null?void 0:r.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>Is.pathsShouldBeValidJsonPaths(r==null?void 0:r.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&Is.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&Is.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){const n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<e.length;s++)r=Is.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&Is.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=Is.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{vr.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&Is.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new CE("",Be.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}}const m_e=t=>{const e=t.map(a=>s(a));function r(a){return new CE(a.tag,Be.ERROR,a.message)}function n(a){return new CE(a,Be.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}const i=(a,u)=>(u.status!==Be.INFO&&a.push(u),a),o=e.reduce(i,[]);return rpe(o)?o:[n("root")]};class b6{validate(e){let r=[];for(const n of e)r=r.concat(n.bundler.getValidations(n.target));return m_e(r)}}class Nd{constructor(){Se(this,"_evaluationClientWrapper");this._evaluationClientWrapper=new e0}evaluatePresentation(e,r,n){const s=(n==null?void 0:n.generatePresentationSubmission)!==void 0?n.generatePresentationSubmission:(n==null?void 0:n.presentationSubmission)!==void 0,i=cs.toInternalPresentationDefinition(e),o=JSON.parse(JSON.stringify(r)),a=cs.mapExternalVerifiablePresentationToWrappedVP(o),u=(n==null?void 0:n.presentationSubmission)||a.presentation.presentation_submission;if(!u&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");const l=a.presentation.holder?[a.presentation.holder]:[],c={...n,holderDIDs:l,presentationSubmission:u,generatePresentationSubmission:s},d=this._evaluationClientWrapper.evaluate(i,a.vcs,c);return d.value&&d.value.descriptor_map.length&&new e0().selectFrom(i,a.vcs,c).areRequiredCredentialsPresent!==Be.ERROR&&(d.errors=[]),d}evaluateCredentials(e,r,n){const s=cs.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new e0;const i=cs.toInternalPresentationDefinition(e),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){const u=new e0().selectFrom(i,s,n);o.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,o.errors=u.errors}else o.areRequiredCredentialsPresent=Be.ERROR;return o}selectFrom(e,r,n){const s=JSON.parse(JSON.stringify(r)),i=cs.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new e0,this._evaluationClientWrapper.selectFrom(i,cs.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(e,r){const n=cs.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(n,cs.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(e,r,n){const s=(n==null?void 0:n.presentationSubmissionLocation)??sv.PRESENTATION,i=this.presentationSubmissionFrom(e,r);return{presentation:Nd.constructPresentation(r,{...n,presentationSubmission:s===sv.PRESENTATION?i:void 0}),presentationSubmissionLocation:s,presentationSubmission:i}}static constructPresentation(e,r){var o,a,u,l;const n=r==null?void 0:r.holderDID,s=Array.isArray((o=r==null?void 0:r.basePresentationPayload)==null?void 0:o.type)?((a=r==null?void 0:r.basePresentationPayload)==null?void 0:a.type)||[]:(u=r==null?void 0:r.basePresentationPayload)!=null&&u.type?[r.basePresentationPayload.type]:[],i=(l=r==null?void 0:r.basePresentationPayload)!=null&&l["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return i.includes("https://www.w3.org/2018/credentials/v1")||i.push("https://www.w3.org/2018/credentials/v1"),s.includes("VerifiablePresentation")||s.push("VerifiablePresentation"),r!=null&&r.presentationSubmission&&(s.includes("PresentationSubmission")||s.push("PresentationSubmission"),i.includes("https://identity.foundation/presentation-exchange/submission/v1")||i.push("https://identity.foundation/presentation-exchange/submission/v1")),{...r==null?void 0:r.basePresentationPayload,"@context":i,type:s,holder:n,...!!(r!=null&&r.presentationSubmission)&&{presentation_submission:r.presentationSubmission},verifiableCredential:Array.isArray(e)?e:[e]}}static validateDefinition(e){const r=Yx(e);if(r.error)throw r.error;const n=[];return r.version===Na.v1?n.push({bundler:new No("root"),target:cs.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new ba("root"),target:cs.modelEntityInternalPresentationDefinitionV2(e)}),new b6().validate(n)}static validateSubmission(e){return new b6().validate([{bundler:new Is("root"),target:e}])}async verifiablePresentationFrom(e,r,n,s){const{holderDID:i,signatureOptions:o,proofOptions:a}=s,u=s.presentationSubmissionLocation??sv.PRESENTATION;function l(){let _=[];if(a!=null&&a.typeSupportsSelectiveDisclosure){if(!(a!=null&&a.type))throw Error("Please provide a proof type if you enable selective disclosure");_=[a.type]}return _}const c=i?[i]:[],d=l(),h=this.evaluateCredentials(e,r,{holderDIDs:c,limitDisclosureSignatureSuites:d}),f=this.presentationFrom(e,h.verifiableCredential,{...s,presentationSubmissionLocation:u}),p=this.evaluatePresentation(e,f.presentation,{limitDisclosureSignatureSuites:d});if(!p.value)throw new Error("Could not get evaluation results from presentationResult");const m={type:a==null?void 0:a.type,verificationMethod:o==null?void 0:o.verificationMethod,created:a!=null&&a.created?a.created:new Date().toISOString(),proofPurpose:a==null?void 0:a.proofPurpose,proofValue:o==null?void 0:o.proofValue,jws:o==null?void 0:o.jws,challenge:a==null?void 0:a.challenge,nonce:a==null?void 0:a.nonce,domain:a==null?void 0:a.domain},E={options:s,presentation:f.presentation,presentationDefinition:e,selectedCredentials:r,proof:m,presentationSubmission:p.value,evaluationResults:p};return{verifiablePresentation:await n(E),presentationSubmissionLocation:u,presentationSubmission:p.value}}static definitionVersionDiscovery(e){return Yx(e)}}class UE{static selectCredentials({vcJwts:e,presentationDefinition:r}){var n,s;this.resetPex();const i=this.pex.selectFrom(r,e);return((n=i.errors)===null||n===void 0?void 0:n.length)!==0?[]:Array.from(new Set((s=i.verifiableCredential)!==null&&s!==void 0?s:[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();const o=this.pex.evaluateCredentials(r,e);if(!((n=o.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(o.warnings)),o.areRequiredCredentialsPresent.toString()!=="info"||!((s=o.errors)===null||s===void 0)&&s.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw o.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(o.areRequiredCredentialsPresent)),!((i=o.errors)===null||i===void 0)&&i.length&&(a+="Errors: "+JSON.stringify(o.errors)),new Error(a)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();const o=Nd.validateDefinition(r);E6(o);const a=this.pex.evaluateCredentials(r,e);if(!((n=a.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(a.warnings)),a.areRequiredCredentialsPresent.toString()!=="info"||!((s=a.errors)===null||s===void 0)&&s.length){let c="Failed to create Verifiable Presentation JWT due to: ";throw a.areRequiredCredentialsPresent&&(c+="Required Credentials Not Present: "+JSON.stringify(a.areRequiredCredentialsPresent)),!((i=a.errors)===null||i===void 0)&&i.length&&(c+="Errors: "+JSON.stringify(a.errors)),new Error(c)}const u=this.pex.presentationFrom(r,e),l=Nd.validateSubmission(u.presentationSubmission);return E6(l),u}static validateDefinition({presentationDefinition:e}){return Nd.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return Nd.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new Nd}}UE.pex=new Nd;function E6(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const y_e=4,A6=0,S6=1,g_e=2;function qy(t){let e=t.length;for(;--e>=0;)t[e]=0}const v_e=0,_7=1,w_e=2,__e=3,b_e=258,Rk=29,Lw=256,Hv=Lw+1+Rk,Wm=30,Nk=19,b7=2*Hv+1,Rh=15,LT=16,E_e=7,Bk=256,E7=16,A7=17,S7=18,lP=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),N1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),A_e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),T7=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S_e=512,Uc=new Array((Hv+2)*2);qy(Uc);const ov=new Array(Wm*2);qy(ov);const zv=new Array(S_e);qy(zv);const Wv=new Array(b_e-__e+1);qy(Wv);const Fk=new Array(Rk);qy(Fk);const LE=new Array(Wm);qy(LE);function KT(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let D7,x7,P7;function VT(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const C7=t=>t<256?zv[t]:zv[256+(t>>>7)],Gv=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Ls=(t,e,r)=>{t.bi_valid>LT-r?(t.bi_buf|=e<<t.bi_valid&65535,Gv(t,t.bi_buf),t.bi_buf=e>>LT-t.bi_valid,t.bi_valid+=r-LT):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},Au=(t,e,r)=>{Ls(t,r[e*2],r[e*2+1])},I7=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},T_e=t=>{t.bi_valid===16?(Gv(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},D_e=(t,e)=>{const r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length;let l,c,d,h,f,p,m=0;for(h=0;h<=Rh;h++)t.bl_count[h]=0;for(r[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<b7;l++)c=t.heap[l],h=r[r[c*2+1]*2+1]+1,h>u&&(h=u,m++),r[c*2+1]=h,!(c>n)&&(t.bl_count[h]++,f=0,c>=a&&(f=o[c-a]),p=r[c*2],t.opt_len+=p*(h+f),i&&(t.static_len+=p*(s[c*2+1]+f)));if(m!==0){do{for(h=u-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[u]--,m-=2}while(m>0);for(h=u;h!==0;h--)for(c=t.bl_count[h];c!==0;)d=t.heap[--l],!(d>n)&&(r[d*2+1]!==h&&(t.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),c--)}},k7=(t,e,r)=>{const n=new Array(Rh+1);let s=0,i,o;for(i=1;i<=Rh;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=I7(n[a]++,a))}},x_e=()=>{let t,e,r,n,s;const i=new Array(Rh+1);for(r=0,n=0;n<Rk-1;n++)for(Fk[n]=r,t=0;t<1<<lP[n];t++)Wv[r++]=n;for(Wv[r-1]=n,s=0,n=0;n<16;n++)for(LE[n]=s,t=0;t<1<<N1[n];t++)zv[s++]=n;for(s>>=7;n<Wm;n++)for(LE[n]=s<<7,t=0;t<1<<N1[n]-7;t++)zv[256+s++]=n;for(e=0;e<=Rh;e++)i[e]=0;for(t=0;t<=143;)Uc[t*2+1]=8,t++,i[8]++;for(;t<=255;)Uc[t*2+1]=9,t++,i[9]++;for(;t<=279;)Uc[t*2+1]=7,t++,i[7]++;for(;t<=287;)Uc[t*2+1]=8,t++,i[8]++;for(k7(Uc,Hv+1,i),t=0;t<Wm;t++)ov[t*2+1]=5,ov[t*2]=I7(t,5);D7=new KT(Uc,lP,Lw+1,Hv,Rh),x7=new KT(ov,N1,0,Wm,Rh),P7=new KT(new Array(0),A_e,0,Nk,E_e)},$7=t=>{let e;for(e=0;e<Hv;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Wm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Nk;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Bk*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},O7=t=>{t.bi_valid>8?Gv(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},T6=(t,e,r,n)=>{const s=e*2,i=r*2;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r]},qT=(t,e,r)=>{const n=t.heap[r];let s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&T6(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!T6(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},D6=(t,e,r)=>{let n,s,i=0,o,a;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+i++]&255,n+=(t.pending_buf[t.sym_buf+i++]&255)<<8,s=t.pending_buf[t.sym_buf+i++],n===0?Au(t,s,e):(o=Wv[s],Au(t,o+Lw+1,e),a=lP[o],a!==0&&(s-=Fk[o],Ls(t,s,a)),n--,o=C7(n),Au(t,o,r),a=N1[o],a!==0&&(n-=LE[o],Ls(t,n,a)));while(i<t.sym_next);Au(t,Bk,e)},dP=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems;let o,a,u=-1,l;for(t.heap_len=0,t.heap_max=b7,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,r[l*2]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=n[l*2+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)qT(t,r,o);l=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],qT(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[l*2]=r[o*2]+r[a*2],t.depth[l]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=l,t.heap[1]=l++,qT(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],D_e(t,e),k7(r,u,t.bl_count)},x6=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,l=4;for(o===0&&(u=138,l=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)&&(a<l?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[E7*2]++):a<=10?t.bl_tree[A7*2]++:t.bl_tree[S7*2]++,a=0,s=i,o===0?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4))},P6=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,l=4;for(o===0&&(u=138,l=3),n=0;n<=r;n++)if(i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)){if(a<l)do Au(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(Au(t,i,t.bl_tree),a--),Au(t,E7,t.bl_tree),Ls(t,a-3,2)):a<=10?(Au(t,A7,t.bl_tree),Ls(t,a-3,3)):(Au(t,S7,t.bl_tree),Ls(t,a-11,7));a=0,s=i,o===0?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4)}},P_e=t=>{let e;for(x6(t,t.dyn_ltree,t.l_desc.max_code),x6(t,t.dyn_dtree,t.d_desc.max_code),dP(t,t.bl_desc),e=Nk-1;e>=3&&t.bl_tree[T7[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},C_e=(t,e,r,n)=>{let s;for(Ls(t,e-257,5),Ls(t,r-1,5),Ls(t,n-4,4),s=0;s<n;s++)Ls(t,t.bl_tree[T7[s]*2+1],3);P6(t,t.dyn_ltree,e-1),P6(t,t.dyn_dtree,r-1)},I_e=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return A6;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return S6;for(r=32;r<Lw;r++)if(t.dyn_ltree[r*2]!==0)return S6;return A6};let C6=!1;const k_e=t=>{C6||(x_e(),C6=!0),t.l_desc=new VT(t.dyn_ltree,D7),t.d_desc=new VT(t.dyn_dtree,x7),t.bl_desc=new VT(t.bl_tree,P7),t.bi_buf=0,t.bi_valid=0,$7(t)},R7=(t,e,r,n)=>{Ls(t,(v_e<<1)+(n?1:0),3),O7(t),Gv(t,r),Gv(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},$_e=t=>{Ls(t,_7<<1,3),Au(t,Bk,Uc),T_e(t)},O_e=(t,e,r,n)=>{let s,i,o=0;t.level>0?(t.strm.data_type===g_e&&(t.strm.data_type=I_e(t)),dP(t,t.l_desc),dP(t,t.d_desc),o=P_e(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&e!==-1?R7(t,e,r,n):t.strategy===y_e||i===s?(Ls(t,(_7<<1)+(n?1:0),3),D6(t,Uc,ov)):(Ls(t,(w_e<<1)+(n?1:0),3),C_e(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),D6(t,t.dyn_ltree,t.dyn_dtree)),$7(t),n&&O7(t)},R_e=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Wv[r]+Lw+1)*2]++,t.dyn_dtree[C7(e)*2]++),t.sym_next===t.sym_end);var N_e=k_e,B_e=R7,F_e=O_e,M_e=R_e,j_e=$_e,U_e={_tr_init:N_e,_tr_stored_block:B_e,_tr_flush_block:F_e,_tr_tally:M_e,_tr_align:j_e};const L_e=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var Jv=L_e;const K_e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},V_e=new Uint32Array(K_e()),q_e=(t,e,r,n)=>{const s=V_e,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1};var Qn=q_e,Xv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:H_e,_tr_stored_block:fP,_tr_flush_block:z_e,_tr_tally:Zd,_tr_align:W_e}=U_e,{Z_NO_FLUSH:Yd,Z_PARTIAL_FLUSH:G_e,Z_FULL_FLUSH:J_e,Z_FINISH:Jo,Z_BLOCK:I6,Z_OK:Di,Z_STREAM_END:k6,Z_STREAM_ERROR:Bu,Z_DATA_ERROR:X_e,Z_BUF_ERROR:HT,Z_DEFAULT_COMPRESSION:Z_e,Z_FILTERED:Y_e,Z_HUFFMAN_ONLY:Ib,Z_RLE:Q_e,Z_FIXED:ebe,Z_DEFAULT_STRATEGY:tbe,Z_UNKNOWN:rbe,Z_DEFLATED:ES}=bS,nbe=9,ibe=15,sbe=8,obe=29,abe=256,hP=abe+1+obe,ube=30,cbe=19,lbe=2*hP+1,dbe=15,or=3,qd=258,Fu=qd+or+1,fbe=32,gy=42,Mk=57,pP=69,mP=73,yP=91,gP=103,Nh=113,$0=666,gs=1,Hy=2,gp=3,zy=4,hbe=3,Bh=(t,e)=>(t.msg=Xv[e],e),$6=t=>t*2-(t>4?9:0),Bd=t=>{let e=t.length;for(;--e>=0;)t[e]=0},pbe=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=s?r-s:0;while(--e);e=s,n=e;do r=t.prev[--n],t.prev[n]=r>=s?r-s:0;while(--e)};let mbe=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,Qd=mbe;const Qs=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},fo=(t,e)=>{z_e(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Qs(t.strm)},pr=(t,e)=>{t.pending_buf[t.pending++]=e},t0=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},vP=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),t.state.wrap===1?t.adler=Jv(t.adler,e,s,r):t.state.wrap===2&&(t.adler=Qn(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},N7=(t,e)=>{let r=t.max_chain_length,n=t.strstart,s,i,o=t.prev_length,a=t.nice_match;const u=t.strstart>t.w_size-Fu?t.strstart-(t.w_size-Fu):0,l=t.window,c=t.w_mask,d=t.prev,h=t.strstart+qd;let f=l[n+o-1],p=l[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(l[s+o]!==p||l[s+o-1]!==f||l[s]!==l[n]||l[++s]!==l[n+1])){n+=2,s++;do;while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<h);if(i=qd-(h-n),n=h-qd,i>o){if(t.match_start=e,o=i,i>=a)break;f=l[n+o-1],p=l[n+o]}}while((e=d[e&c])>u&&--r!==0);return o<=t.lookahead?o:t.lookahead},vy=t=>{const e=t.w_size;let r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Fu)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),pbe(t),n+=e),t.strm.avail_in===0)break;if(r=vP(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=or)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Qd(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Qd(t,t.ins_h,t.window[s+or-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<or)););}while(t.lookahead<Fu&&t.strm.avail_in!==0)},B7=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,i,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&e!==Jo||e===Yd||n!==s+t.strm.avail_in)))break;o=e===Jo&&n===s+t.strm.avail_in?1:0,fP(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Qs(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(vP(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?zy:e!==Yd&&e!==Jo&&t.strm.avail_in===0&&t.strstart===t.block_start?Hy:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(vP(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,r=i>t.w_size?t.w_size:i,s=t.strstart-t.block_start,(s>=r||(s||e===Jo)&&e!==Yd&&t.strm.avail_in===0&&s<=i)&&(n=s>i?i:s,o=e===Jo&&t.strm.avail_in===0&&n===s?1:0,fP(t,t.block_start,n,o),t.block_start+=n,Qs(t.strm)),o?gp:gs)},zT=(t,e)=>{let r,n;for(;;){if(t.lookahead<Fu){if(vy(t),t.lookahead<Fu&&e===Yd)return gs;if(t.lookahead===0)break}if(r=0,t.lookahead>=or&&(t.ins_h=Qd(t,t.ins_h,t.window[t.strstart+or-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Fu&&(t.match_length=N7(t,r)),t.match_length>=or)if(n=Zd(t,t.strstart-t.match_start,t.match_length-or),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=or){t.match_length--;do t.strstart++,t.ins_h=Qd(t,t.ins_h,t.window[t.strstart+or-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Qd(t,t.ins_h,t.window[t.strstart+1]);else n=Zd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(fo(t,!1),t.strm.avail_out===0))return gs}return t.insert=t.strstart<or-1?t.strstart:or-1,e===Jo?(fo(t,!0),t.strm.avail_out===0?gp:zy):t.sym_next&&(fo(t,!1),t.strm.avail_out===0)?gs:Hy},im=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<Fu){if(vy(t),t.lookahead<Fu&&e===Yd)return gs;if(t.lookahead===0)break}if(r=0,t.lookahead>=or&&(t.ins_h=Qd(t,t.ins_h,t.window[t.strstart+or-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=or-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Fu&&(t.match_length=N7(t,r),t.match_length<=5&&(t.strategy===Y_e||t.match_length===or&&t.strstart-t.match_start>4096)&&(t.match_length=or-1)),t.prev_length>=or&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-or,n=Zd(t,t.strstart-1-t.prev_match,t.prev_length-or),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=Qd(t,t.ins_h,t.window[t.strstart+or-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=or-1,t.strstart++,n&&(fo(t,!1),t.strm.avail_out===0))return gs}else if(t.match_available){if(n=Zd(t,0,t.window[t.strstart-1]),n&&fo(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return gs}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Zd(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<or-1?t.strstart:or-1,e===Jo?(fo(t,!0),t.strm.avail_out===0?gp:zy):t.sym_next&&(fo(t,!1),t.strm.avail_out===0)?gs:Hy},ybe=(t,e)=>{let r,n,s,i;const o=t.window;for(;;){if(t.lookahead<=qd){if(vy(t),t.lookahead<=qd&&e===Yd)return gs;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=or&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=t.strstart+qd;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);t.match_length=qd-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=or?(r=Zd(t,1,t.match_length-or),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Zd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(fo(t,!1),t.strm.avail_out===0))return gs}return t.insert=0,e===Jo?(fo(t,!0),t.strm.avail_out===0?gp:zy):t.sym_next&&(fo(t,!1),t.strm.avail_out===0)?gs:Hy},gbe=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(vy(t),t.lookahead===0)){if(e===Yd)return gs;break}if(t.match_length=0,r=Zd(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(fo(t,!1),t.strm.avail_out===0))return gs}return t.insert=0,e===Jo?(fo(t,!0),t.strm.avail_out===0?gp:zy):t.sym_next&&(fo(t,!1),t.strm.avail_out===0)?gs:Hy};function Qa(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}const O0=[new Qa(0,0,0,0,B7),new Qa(4,4,8,4,zT),new Qa(4,5,16,8,zT),new Qa(4,6,32,32,zT),new Qa(4,4,16,16,im),new Qa(8,16,32,32,im),new Qa(8,16,128,128,im),new Qa(8,32,128,256,im),new Qa(32,128,258,1024,im),new Qa(32,258,258,4096,im)],vbe=t=>{t.window_size=2*t.w_size,Bd(t.head),t.max_lazy_match=O0[t.level].max_lazy,t.good_match=O0[t.level].good_length,t.nice_match=O0[t.level].nice_length,t.max_chain_length=O0[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=or-1,t.match_available=0,t.ins_h=0};function wbe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ES,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(lbe*2),this.dyn_dtree=new Uint16Array((2*ube+1)*2),this.bl_tree=new Uint16Array((2*cbe+1)*2),Bd(this.dyn_ltree),Bd(this.dyn_dtree),Bd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(dbe+1),this.heap=new Uint16Array(2*hP+1),Bd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*hP+1),Bd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Kw=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==gy&&e.status!==Mk&&e.status!==pP&&e.status!==mP&&e.status!==yP&&e.status!==gP&&e.status!==Nh&&e.status!==$0?1:0},F7=t=>{if(Kw(t))return Bh(t,Bu);t.total_in=t.total_out=0,t.data_type=rbe;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Mk:e.wrap?gy:Nh,t.adler=e.wrap===2?0:1,e.last_flush=-2,H_e(e),Di},M7=t=>{const e=F7(t);return e===Di&&vbe(t.state),e},_be=(t,e)=>Kw(t)||t.state.wrap!==2?Bu:(t.state.gzhead=e,Di),j7=(t,e,r,n,s,i)=>{if(!t)return Bu;let o=1;if(e===Z_e&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>nbe||r!==ES||n<8||n>15||e<0||e>9||i<0||i>ebe||n===8&&o!==1)return Bh(t,Bu);n===8&&(n=9);const a=new wbe;return t.state=a,a.strm=t,a.status=gy,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+or-1)/or),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=i,a.method=r,M7(t)},bbe=(t,e)=>j7(t,e,ES,ibe,sbe,tbe),Ebe=(t,e)=>{if(Kw(t)||e>I6||e<0)return t?Bh(t,Bu):Bu;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===$0&&e!==Jo)return Bh(t,t.avail_out===0?HT:Bu);const n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(Qs(t),t.avail_out===0)return r.last_flush=-1,Di}else if(t.avail_in===0&&$6(e)<=$6(n)&&e!==Jo)return Bh(t,HT);if(r.status===$0&&t.avail_in!==0)return Bh(t,HT);if(r.status===gy&&r.wrap===0&&(r.status=Nh),r.status===gy){let s=ES+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=Ib||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,s|=i<<6,r.strstart!==0&&(s|=fbe),s+=31-s%31,t0(r,s),r.strstart!==0&&(t0(r,t.adler>>>16),t0(r,t.adler&65535)),t.adler=1,r.status=Nh,Qs(t),r.pending!==0)return r.last_flush=-1,Di}if(r.status===Mk){if(t.adler=0,pr(r,31),pr(r,139),pr(r,8),r.gzhead)pr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),pr(r,r.gzhead.time&255),pr(r,r.gzhead.time>>8&255),pr(r,r.gzhead.time>>16&255),pr(r,r.gzhead.time>>24&255),pr(r,r.level===9?2:r.strategy>=Ib||r.level<2?4:0),pr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(pr(r,r.gzhead.extra.length&255),pr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Qn(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=pP;else if(pr(r,0),pr(r,0),pr(r,0),pr(r,0),pr(r,0),pr(r,r.level===9?2:r.strategy>=Ib||r.level<2?4:0),pr(r,hbe),r.status=Nh,Qs(t),r.pending!==0)return r.last_flush=-1,Di}if(r.status===pP){if(r.gzhead.extra){let s=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex+=a,Qs(t),r.pending!==0)return r.last_flush=-1,Di;s=0,i-=a}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=mP}if(r.status===mP){if(r.gzhead.name){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s)),Qs(t),r.pending!==0)return r.last_flush=-1,Di;s=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,pr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=yP}if(r.status===yP){if(r.gzhead.comment){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s)),Qs(t),r.pending!==0)return r.last_flush=-1,Di;s=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,pr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Qn(t.adler,r.pending_buf,r.pending-s,s))}r.status=gP}if(r.status===gP){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Qs(t),r.pending!==0))return r.last_flush=-1,Di;pr(r,t.adler&255),pr(r,t.adler>>8&255),t.adler=0}if(r.status=Nh,Qs(t),r.pending!==0)return r.last_flush=-1,Di}if(t.avail_in!==0||r.lookahead!==0||e!==Yd&&r.status!==$0){let s=r.level===0?B7(r,e):r.strategy===Ib?gbe(r,e):r.strategy===Q_e?ybe(r,e):O0[r.level].func(r,e);if((s===gp||s===zy)&&(r.status=$0),s===gs||s===gp)return t.avail_out===0&&(r.last_flush=-1),Di;if(s===Hy&&(e===G_e?W_e(r):e!==I6&&(fP(r,0,0,!1),e===J_e&&(Bd(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Qs(t),t.avail_out===0))return r.last_flush=-1,Di}return e!==Jo?Di:r.wrap<=0?k6:(r.wrap===2?(pr(r,t.adler&255),pr(r,t.adler>>8&255),pr(r,t.adler>>16&255),pr(r,t.adler>>24&255),pr(r,t.total_in&255),pr(r,t.total_in>>8&255),pr(r,t.total_in>>16&255),pr(r,t.total_in>>24&255)):(t0(r,t.adler>>>16),t0(r,t.adler&65535)),Qs(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Di:k6)},Abe=t=>{if(Kw(t))return Bu;const e=t.state.status;return t.state=null,e===Nh?Bh(t,X_e):Di},Sbe=(t,e)=>{let r=e.length;if(Kw(t))return Bu;const n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==gy||n.lookahead)return Bu;if(s===1&&(t.adler=Jv(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){s===0&&(Bd(n.head),n.strstart=0,n.block_start=0,n.insert=0);let u=new Uint8Array(n.w_size);u.set(e.subarray(r-n.w_size,r),0),e=u,r=n.w_size}const i=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,vy(n);n.lookahead>=or;){let u=n.strstart,l=n.lookahead-(or-1);do n.ins_h=Qd(n,n.ins_h,n.window[u+or-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--l);n.strstart=u,n.lookahead=or-1,vy(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=or-1,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=i,n.wrap=s,Di};var Tbe=bbe,Dbe=j7,xbe=M7,Pbe=F7,Cbe=_be,Ibe=Ebe,kbe=Abe,$be=Sbe,Obe="pako deflate (from Nodeca project)",av={deflateInit:Tbe,deflateInit2:Dbe,deflateReset:xbe,deflateResetKeep:Pbe,deflateSetHeader:Cbe,deflate:Ibe,deflateEnd:kbe,deflateSetDictionary:$be,deflateInfo:Obe};const Rbe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Nbe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Rbe(r,n)&&(t[n]=r[n])}}return t},Bbe=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let o=t[n];r.set(o,s),s+=o.length}return r},AS={assign:Nbe,flattenChunks:Bbe};let U7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{U7=!1}const Zv=new Uint8Array(256);for(let t=0;t<256;t++)Zv[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Zv[254]=Zv[254]=1;var Fbe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const Mbe=(t,e)=>{if(e<65534&&t.subarray&&U7)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var jbe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let o=t[n++];if(o<128){i[s++]=o;continue}let a=Zv[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|t[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return Mbe(i,s)},Ube=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Zv[t[r]]>e?r:e},Yv={string2buf:Fbe,buf2string:jbe,utf8border:Ube};function Lbe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var L7=Lbe;const K7=Object.prototype.toString,{Z_NO_FLUSH:Kbe,Z_SYNC_FLUSH:Vbe,Z_FULL_FLUSH:qbe,Z_FINISH:Hbe,Z_OK:KE,Z_STREAM_END:zbe,Z_DEFAULT_COMPRESSION:Wbe,Z_DEFAULT_STRATEGY:Gbe,Z_DEFLATED:Jbe}=bS;function jk(t){this.options=AS.assign({level:Wbe,method:Jbe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gbe},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L7,this.strm.avail_out=0;let r=av.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==KE)throw new Error(Xv[r]);if(e.header&&av.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=Yv.string2buf(e.dictionary):K7.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=av.deflateSetDictionary(this.strm,n),r!==KE)throw new Error(Xv[r]);this._dict_set=!0}}jk.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let s,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?Hbe:Kbe,typeof t=="string"?r.input=Yv.string2buf(t):K7.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===Vbe||i===qbe)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(s=av.deflate(r,i),s===zbe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=av.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===KE;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};jk.prototype.onData=function(t){this.chunks.push(t)};jk.prototype.onEnd=function(t){t===KE&&(this.result=AS.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const kb=16209,Xbe=16191;var Zbe=function(e,r){let n,s,i,o,a,u,l,c,d,h,f,p,m,E,A,_,g,v,S,x,D,w,b,T;const P=e.state;n=e.next_in,b=e.input,s=n+(e.avail_in-5),i=e.next_out,T=e.output,o=i-(r-e.avail_out),a=i+(e.avail_out-257),u=P.dmax,l=P.wsize,c=P.whave,d=P.wnext,h=P.window,f=P.hold,p=P.bits,m=P.lencode,E=P.distcode,A=(1<<P.lenbits)-1,_=(1<<P.distbits)-1;e:do{p<15&&(f+=b[n++]<<p,p+=8,f+=b[n++]<<p,p+=8),g=m[f&A];t:for(;;){if(v=g>>>24,f>>>=v,p-=v,v=g>>>16&255,v===0)T[i++]=g&65535;else if(v&16){S=g&65535,v&=15,v&&(p<v&&(f+=b[n++]<<p,p+=8),S+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=b[n++]<<p,p+=8,f+=b[n++]<<p,p+=8),g=E[f&_];r:for(;;){if(v=g>>>24,f>>>=v,p-=v,v=g>>>16&255,v&16){if(x=g&65535,v&=15,p<v&&(f+=b[n++]<<p,p+=8,p<v&&(f+=b[n++]<<p,p+=8)),x+=f&(1<<v)-1,x>u){e.msg="invalid distance too far back",P.mode=kb;break e}if(f>>>=v,p-=v,v=i-o,x>v){if(v=x-v,v>c&&P.sane){e.msg="invalid distance too far back",P.mode=kb;break e}if(D=0,w=h,d===0){if(D+=l-v,v<S){S-=v;do T[i++]=h[D++];while(--v);D=i-x,w=T}}else if(d<v){if(D+=l+d-v,v-=d,v<S){S-=v;do T[i++]=h[D++];while(--v);if(D=0,d<S){v=d,S-=v;do T[i++]=h[D++];while(--v);D=i-x,w=T}}}else if(D+=d-v,v<S){S-=v;do T[i++]=h[D++];while(--v);D=i-x,w=T}for(;S>2;)T[i++]=w[D++],T[i++]=w[D++],T[i++]=w[D++],S-=3;S&&(T[i++]=w[D++],S>1&&(T[i++]=w[D++]))}else{D=i-x;do T[i++]=T[D++],T[i++]=T[D++],T[i++]=T[D++],S-=3;while(S>2);S&&(T[i++]=T[D++],S>1&&(T[i++]=T[D++]))}}else if(v&64){e.msg="invalid distance code",P.mode=kb;break e}else{g=E[(g&65535)+(f&(1<<v)-1)];continue r}break}}else if(v&64)if(v&32){P.mode=Xbe;break e}else{e.msg="invalid literal/length code",P.mode=kb;break e}else{g=m[(g&65535)+(f&(1<<v)-1)];continue t}break}}while(n<s&&i<a);S=p>>3,n-=S,p-=S<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),P.hold=f,P.bits=p};const sm=15,O6=852,R6=592,N6=0,WT=1,B6=2,Ybe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qbe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),e1e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),t1e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),r1e=(t,e,r,n,s,i,o,a)=>{const u=a.bits;let l=0,c=0,d=0,h=0,f=0,p=0,m=0,E=0,A=0,_=0,g,v,S,x,D,w=null,b;const T=new Uint16Array(sm+1),P=new Uint16Array(sm+1);let C=null,k,K,L;for(l=0;l<=sm;l++)T[l]=0;for(c=0;c<n;c++)T[e[r+c]]++;for(f=u,h=sm;h>=1&&T[h]===0;h--);if(f>h&&(f=h),h===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&T[d]===0;d++);for(f<d&&(f=d),E=1,l=1;l<=sm;l++)if(E<<=1,E-=T[l],E<0)return-1;if(E>0&&(t===N6||h!==1))return-1;for(P[1]=0,l=1;l<sm;l++)P[l+1]=P[l]+T[l];for(c=0;c<n;c++)e[r+c]!==0&&(o[P[e[r+c]]++]=c);if(t===N6?(w=C=o,b=20):t===WT?(w=Ybe,C=Qbe,b=257):(w=e1e,C=t1e,b=0),_=0,c=0,l=d,D=i,p=f,m=0,S=-1,A=1<<f,x=A-1,t===WT&&A>O6||t===B6&&A>R6)return 1;for(;;){k=l-m,o[c]+1<b?(K=0,L=o[c]):o[c]>=b?(K=C[o[c]-b],L=w[o[c]-b]):(K=96,L=0),g=1<<l-m,v=1<<p,d=v;do v-=g,s[D+(_>>m)+v]=k<<24|K<<16|L|0;while(v!==0);for(g=1<<l-1;_&g;)g>>=1;if(g!==0?(_&=g-1,_+=g):_=0,c++,--T[l]===0){if(l===h)break;l=e[r+o[c]]}if(l>f&&(_&x)!==S){for(m===0&&(m=f),D+=d,p=l-m,E=1<<p;p+m<h&&(E-=T[p+m],!(E<=0));)p++,E<<=1;if(A+=1<<p,t===WT&&A>O6||t===B6&&A>R6)return 1;S=_&x,s[S]=f<<24|p<<16|D-i|0}}return _!==0&&(s[D+_]=l-m<<24|64<<16|0),a.bits=f,0};var uv=r1e;const n1e=0,V7=1,q7=2,{Z_FINISH:F6,Z_BLOCK:i1e,Z_TREES:$b,Z_OK:vp,Z_STREAM_END:s1e,Z_NEED_DICT:o1e,Z_STREAM_ERROR:oa,Z_DATA_ERROR:H7,Z_MEM_ERROR:z7,Z_BUF_ERROR:a1e,Z_DEFLATED:M6}=bS,SS=16180,j6=16181,U6=16182,L6=16183,K6=16184,V6=16185,q6=16186,H6=16187,z6=16188,W6=16189,VE=16190,Tc=16191,GT=16192,G6=16193,JT=16194,J6=16195,X6=16196,Z6=16197,Y6=16198,Ob=16199,Rb=16200,Q6=16201,e8=16202,t8=16203,r8=16204,n8=16205,XT=16206,i8=16207,s8=16208,sn=16209,W7=16210,G7=16211,u1e=852,c1e=592,l1e=15,d1e=l1e,o8=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function f1e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Op=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<SS||e.mode>G7?1:0},J7=t=>{if(Op(t))return oa;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=SS,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(u1e),e.distcode=e.distdyn=new Int32Array(c1e),e.sane=1,e.back=-1,vp},X7=t=>{if(Op(t))return oa;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,J7(t)},Z7=(t,e)=>{let r;if(Op(t))return oa;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?oa:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,X7(t))},Y7=(t,e)=>{if(!t)return oa;const r=new f1e;t.state=r,r.strm=t,r.window=null,r.mode=SS;const n=Z7(t,e);return n!==vp&&(t.state=null),n},h1e=t=>Y7(t,d1e);let a8=!0,ZT,YT;const p1e=t=>{if(a8){ZT=new Int32Array(512),YT=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(uv(V7,t.lens,0,288,ZT,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;uv(q7,t.lens,0,32,YT,0,t.work,{bits:5}),a8=!1}t.lencode=ZT,t.lenbits=9,t.distcode=YT,t.distbits=5},Q7=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},m1e=(t,e)=>{let r,n,s,i,o,a,u,l,c,d,h,f,p,m,E=0,A,_,g,v,S,x,D,w;const b=new Uint8Array(4);let T,P;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Op(t)||!t.output||!t.input&&t.avail_in!==0)return oa;r=t.state,r.mode===Tc&&(r.mode=GT),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,l=r.hold,c=r.bits,d=a,h=u,w=vp;e:for(;;)switch(r.mode){case SS:if(r.wrap===0){r.mode=GT;break}for(;c<16;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(r.wrap&2&&l===35615){r.wbits===0&&(r.wbits=15),r.check=0,b[0]=l&255,b[1]=l>>>8&255,r.check=Qn(r.check,b,2,0),l=0,c=0,r.mode=j6;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=sn;break}if((l&15)!==M6){t.msg="unknown compression method",r.mode=sn;break}if(l>>>=4,c-=4,D=(l&15)+8,r.wbits===0&&(r.wbits=D),D>15||D>r.wbits){t.msg="invalid window size",r.mode=sn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=l&512?W6:Tc,l=0,c=0;break;case j6:for(;c<16;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(r.flags=l,(r.flags&255)!==M6){t.msg="unknown compression method",r.mode=sn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=sn;break}r.head&&(r.head.text=l>>8&1),r.flags&512&&r.wrap&4&&(b[0]=l&255,b[1]=l>>>8&255,r.check=Qn(r.check,b,2,0)),l=0,c=0,r.mode=U6;case U6:for(;c<32;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.head&&(r.head.time=l),r.flags&512&&r.wrap&4&&(b[0]=l&255,b[1]=l>>>8&255,b[2]=l>>>16&255,b[3]=l>>>24&255,r.check=Qn(r.check,b,4,0)),l=0,c=0,r.mode=L6;case L6:for(;c<16;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.head&&(r.head.xflags=l&255,r.head.os=l>>8),r.flags&512&&r.wrap&4&&(b[0]=l&255,b[1]=l>>>8&255,r.check=Qn(r.check,b,2,0)),l=0,c=0,r.mode=K6;case K6:if(r.flags&1024){for(;c<16;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.length=l,r.head&&(r.head.extra_len=l),r.flags&512&&r.wrap&4&&(b[0]=l&255,b[1]=l>>>8&255,r.check=Qn(r.check,b,2,0)),l=0,c=0}else r.head&&(r.head.extra=null);r.mode=V6;case V6:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),D)),r.flags&512&&r.wrap&4&&(r.check=Qn(r.check,n,f,i)),a-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=q6;case q6:if(r.flags&2048){if(a===0)break e;f=0;do D=n[i+f++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D));while(D&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Qn(r.check,n,f,i)),a-=f,i+=f,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=H6;case H6:if(r.flags&4096){if(a===0)break e;f=0;do D=n[i+f++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D));while(D&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Qn(r.check,n,f,i)),a-=f,i+=f,D)break e}else r.head&&(r.head.comment=null);r.mode=z6;case z6:if(r.flags&512){for(;c<16;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(r.wrap&4&&l!==(r.check&65535)){t.msg="header crc mismatch",r.mode=sn;break}l=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Tc;break;case W6:for(;c<32;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}t.adler=r.check=o8(l),l=0,c=0,r.mode=VE;case VE:if(r.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=l,r.bits=c,o1e;t.adler=r.check=1,r.mode=Tc;case Tc:if(e===i1e||e===$b)break e;case GT:if(r.last){l>>>=c&7,c-=c&7,r.mode=XT;break}for(;c<3;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}switch(r.last=l&1,l>>>=1,c-=1,l&3){case 0:r.mode=G6;break;case 1:if(p1e(r),r.mode=Ob,e===$b){l>>>=2,c-=2;break e}break;case 2:r.mode=X6;break;case 3:t.msg="invalid block type",r.mode=sn}l>>>=2,c-=2;break;case G6:for(l>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=sn;break}if(r.length=l&65535,l=0,c=0,r.mode=JT,e===$b)break e;case JT:r.mode=J6;case J6:if(f=r.length,f){if(f>a&&(f=a),f>u&&(f=u),f===0)break e;s.set(n.subarray(i,i+f),o),a-=f,i+=f,u-=f,o+=f,r.length-=f;break}r.mode=Tc;break;case X6:for(;c<14;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(r.nlen=(l&31)+257,l>>>=5,c-=5,r.ndist=(l&31)+1,l>>>=5,c-=5,r.ncode=(l&15)+4,l>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=sn;break}r.have=0,r.mode=Z6;case Z6:for(;r.have<r.ncode;){for(;c<3;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.lens[C[r.have++]]=l&7,l>>>=3,c-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},w=uv(n1e,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,w){t.msg="invalid code lengths set",r.mode=sn;break}r.have=0,r.mode=Y6;case Y6:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[l&(1<<r.lenbits)-1],A=E>>>24,_=E>>>16&255,g=E&65535,!(A<=c);){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(g<16)l>>>=A,c-=A,r.lens[r.have++]=g;else{if(g===16){for(P=A+2;c<P;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(l>>>=A,c-=A,r.have===0){t.msg="invalid bit length repeat",r.mode=sn;break}D=r.lens[r.have-1],f=3+(l&3),l>>>=2,c-=2}else if(g===17){for(P=A+3;c<P;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}l>>>=A,c-=A,D=0,f=3+(l&7),l>>>=3,c-=3}else{for(P=A+7;c<P;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}l>>>=A,c-=A,D=0,f=11+(l&127),l>>>=7,c-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=sn;break}for(;f--;)r.lens[r.have++]=D}}if(r.mode===sn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=sn;break}if(r.lenbits=9,T={bits:r.lenbits},w=uv(V7,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,w){t.msg="invalid literal/lengths set",r.mode=sn;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},w=uv(q7,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,w){t.msg="invalid distances set",r.mode=sn;break}if(r.mode=Ob,e===$b)break e;case Ob:r.mode=Rb;case Rb:if(a>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=l,r.bits=c,Zbe(t,h),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,l=r.hold,c=r.bits,r.mode===Tc&&(r.back=-1);break}for(r.back=0;E=r.lencode[l&(1<<r.lenbits)-1],A=E>>>24,_=E>>>16&255,g=E&65535,!(A<=c);){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(_&&!(_&240)){for(v=A,S=_,x=g;E=r.lencode[x+((l&(1<<v+S)-1)>>v)],A=E>>>24,_=E>>>16&255,g=E&65535,!(v+A<=c);){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}l>>>=v,c-=v,r.back+=v}if(l>>>=A,c-=A,r.back+=A,r.length=g,_===0){r.mode=n8;break}if(_&32){r.back=-1,r.mode=Tc;break}if(_&64){t.msg="invalid literal/length code",r.mode=sn;break}r.extra=_&15,r.mode=Q6;case Q6:if(r.extra){for(P=r.extra;c<P;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=e8;case e8:for(;E=r.distcode[l&(1<<r.distbits)-1],A=E>>>24,_=E>>>16&255,g=E&65535,!(A<=c);){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(!(_&240)){for(v=A,S=_,x=g;E=r.distcode[x+((l&(1<<v+S)-1)>>v)],A=E>>>24,_=E>>>16&255,g=E&65535,!(v+A<=c);){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}l>>>=v,c-=v,r.back+=v}if(l>>>=A,c-=A,r.back+=A,_&64){t.msg="invalid distance code",r.mode=sn;break}r.offset=g,r.extra=_&15,r.mode=t8;case t8:if(r.extra){for(P=r.extra;c<P;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=sn;break}r.mode=r8;case r8:if(u===0)break e;if(f=h-u,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=sn;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=s,p=o-r.offset,f=r.length;f>u&&(f=u),u-=f,r.length-=f;do s[o++]=m[p++];while(--f);r.length===0&&(r.mode=Rb);break;case n8:if(u===0)break e;s[o++]=r.length,u--,r.mode=Rb;break;case XT:if(r.wrap){for(;c<32;){if(a===0)break e;a--,l|=n[i++]<<c,c+=8}if(h-=u,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Qn(r.check,s,h,o-h):Jv(r.check,s,h,o-h)),h=u,r.wrap&4&&(r.flags?l:o8(l))!==r.check){t.msg="incorrect data check",r.mode=sn;break}l=0,c=0}r.mode=i8;case i8:if(r.wrap&&r.flags){for(;c<32;){if(a===0)break e;a--,l+=n[i++]<<c,c+=8}if(r.wrap&4&&l!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=sn;break}l=0,c=0}r.mode=s8;case s8:w=s1e;break e;case sn:w=H7;break e;case W7:return z7;case G7:default:return oa}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=l,r.bits=c,(r.wsize||h!==t.avail_out&&r.mode<sn&&(r.mode<XT||e!==F6))&&Q7(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Qn(r.check,s,h,t.next_out-h):Jv(r.check,s,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Tc?128:0)+(r.mode===Ob||r.mode===JT?256:0),(d===0&&h===0||e===F6)&&w===vp&&(w=a1e),w},y1e=t=>{if(Op(t))return oa;let e=t.state;return e.window&&(e.window=null),t.state=null,vp},g1e=(t,e)=>{if(Op(t))return oa;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,vp):oa},v1e=(t,e)=>{const r=e.length;let n,s,i;return Op(t)||(n=t.state,n.wrap!==0&&n.mode!==VE)?oa:n.mode===VE&&(s=1,s=Jv(s,e,r,0),s!==n.check)?H7:(i=Q7(t,e,r,r),i?(n.mode=W7,z7):(n.havedict=1,vp))};var w1e=X7,_1e=Z7,b1e=J7,E1e=h1e,A1e=Y7,S1e=m1e,T1e=y1e,D1e=g1e,x1e=v1e,P1e="pako inflate (from Nodeca project)",Lc={inflateReset:w1e,inflateReset2:_1e,inflateResetKeep:b1e,inflateInit:E1e,inflateInit2:A1e,inflate:S1e,inflateEnd:T1e,inflateGetHeader:D1e,inflateSetDictionary:x1e,inflateInfo:P1e};function C1e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var I1e=C1e;const eq=Object.prototype.toString,{Z_NO_FLUSH:k1e,Z_FINISH:$1e,Z_OK:Qv,Z_STREAM_END:QT,Z_NEED_DICT:eD,Z_STREAM_ERROR:O1e,Z_DATA_ERROR:u8,Z_MEM_ERROR:R1e}=bS;function Uk(t){this.options=AS.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L7,this.strm.avail_out=0;let r=Lc.inflateInit2(this.strm,e.windowBits);if(r!==Qv)throw new Error(Xv[r]);if(this.header=new I1e,Lc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Yv.string2buf(e.dictionary):eq.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Lc.inflateSetDictionary(this.strm,e.dictionary),r!==Qv)))throw new Error(Xv[r])}Uk.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?$1e:k1e,eq.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Lc.inflate(r,o),i===eD&&s&&(i=Lc.inflateSetDictionary(r,s),i===Qv?i=Lc.inflate(r,o):i===u8&&(i=eD));r.avail_in>0&&i===QT&&r.state.wrap>0&&t[r.next_in]!==0;)Lc.inflateReset(r),i=Lc.inflate(r,o);switch(i){case O1e:case u8:case eD:case R1e:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===QT))if(this.options.to==="string"){let u=Yv.utf8border(r.output,r.next_out),l=r.next_out-u,c=Yv.buf2string(r.output,u);r.next_out=l,r.avail_out=n-l,l&&r.output.set(r.output.subarray(u,u+l),0),this.onData(c)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Qv&&a===0)){if(i===QT)return i=Lc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Uk.prototype.onData=function(t){this.chunks.push(t)};Uk.prototype.onEnd=function(t){t===Qv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=AS.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function N1e(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function c8(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function B1e(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;const r=new Date(t);return!isNaN(r.getTime())}function F1e(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;const r=new Date(t);return!isNaN(r.getTime())}const l8="VerifiablePresentation";class r0{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){const r=this.asArray(e);if(r.length<1||r.indexOf(wP)===-1)throw new Error(`@context is missing default context "${wP}"`)}static validateVcType(e){const r=this.asArray(e);if(r.length<1||r.indexOf(cv)===-1)throw new Error(`type is missing default "${cv}"`)}static validateVpType(e){const r=this.asArray(e);if(r.length<1||r.indexOf(l8)===-1)throw new Error(`type is missing default "${l8}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!B1e(e)&&!F1e(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(e){return Array.isArray(e)?e:[e]}}var tD=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const wP="https://www.w3.org/2018/credentials/v1",cv="VerifiableCredential";class qE{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}sign(e){return tD(this,void 0,void 0,function*(){return yield Nu.sign({signerDid:e.did,payload:Object.assign({vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3)},this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)})})})}toString(){return JSON.stringify(this.vcDataModel)}static create(e){return tD(this,void 0,void 0,function*(){const{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,credentialStatus:u,credentialSchema:l,evidence:c}=e,d=JSON.parse(JSON.stringify(i));if(typeof d!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");const h=Object.assign({id:s},d),f=[wP];u!==null&&f.push(M1e);const p=Object.assign(Object.assign(Object.assign(Object.assign({"@context":f,type:Array.isArray(r)?[cv,...r]:r?[cv,r]:[cv],id:`urn:uuid:${Kfe()}`,issuer:n,issuanceDate:o||N1e(),credentialSubject:h},a&&{expirationDate:a}),u&&{credentialStatus:u}),l&&{credentialSchema:l}),c&&{evidence:c});return rD(p),new qE(p)})}static verify(e){return tD(this,arguments,void 0,function*({vcJwt:r}){const{payload:n}=yield Nu.verify({jwt:r}),{exp:s,iss:i,nbf:o,jti:a,sub:u,vc:l}=n;if(!l)throw new Error("vc property missing.");const c=n.vc;if(s&&c.expirationDate&&s!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(s&&(c.expirationDate=c8(s)),!i)throw new Error("Verification failed: iss claim is required");if(i!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(o&&o>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(o&&c.issuanceDate&&o!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(o&&(c.issuanceDate=c8(o)),u&&!Array.isArray(c.credentialSubject)&&u!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(u&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=u),a&&a!==c.id)throw new Error("Verification failed: jti claim does not match id");return a&&(c.id=a),rD(c),{issuer:n.iss,subject:n.sub,vc:c}})}static parseJwt({vcJwt:e}){const n=Nu.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return rD(n),new qE(n)}}function rD(t){r0.validateContext(t["@context"]),r0.validateVcType(t.type),r0.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&r0.validateTimestamp(t.issuanceDate),t.expirationDate&&r0.validateTimestamp(t.expirationDate)}const M1e="https://w3id.org/vc/status-list/2021/v1";var d8;(function(t){t.revocation="revocation",t.suspension="suspension"})(d8||(d8={}));var _P={exports:{}},tq={},Fa={},wy={},Vw={},rr={},ew={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(_){if(super(),!t.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((g,v)=>`${g}${v}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((g,v)=>(v instanceof r&&(g[v.str]=(g[v.str]||0)+1),g),{})}}t._Code=n,t.nil=new n("");function s(A,..._){const g=[A[0]];let v=0;for(;v<_.length;)a(g,_[v]),g.push(A[++v]);return new n(g)}t._=s;const i=new n("+");function o(A,..._){const g=[f(A[0])];let v=0;for(;v<_.length;)g.push(i),a(g,_[v]),g.push(i,f(A[++v]));return u(g),new n(g)}t.str=o;function a(A,_){_ instanceof n?A.push(..._._items):_ instanceof r?A.push(_):A.push(d(_))}t.addCodeArg=a;function u(A){let _=1;for(;_<A.length-1;){if(A[_]===i){const g=l(A[_-1],A[_+1]);if(g!==void 0){A.splice(_-1,3,g);continue}A[_++]="+"}_++}}function l(A,_){if(_==='""')return A;if(A==='""')return _;if(typeof A=="string")return _ instanceof r||A[A.length-1]!=='"'?void 0:typeof _!="string"?`${A.slice(0,-1)}${_}"`:_[0]==='"'?A.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(A instanceof r))return`"${A}${_.slice(1)}`}function c(A,_){return _.emptyStr()?A:A.emptyStr()?_:o`${A}${_}`}t.strConcat=c;function d(A){return typeof A=="number"||typeof A=="boolean"||A===null?A:f(Array.isArray(A)?A.join(","):A)}function h(A){return new n(f(A))}t.stringify=h;function f(A){return JSON.stringify(A).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=f;function p(A){return typeof A=="string"&&t.IDENTIFIER.test(A)?new n(`.${A}`):s`[${A}]`}t.getProperty=p;function m(A){if(typeof A=="string"&&t.IDENTIFIER.test(A))return new n(`${A}`);throw new Error(`CodeGen: invalid export name: ${A}, use explicit $id name mapping`)}t.getEsmExportName=m;function E(A){return new n(A.toString())}t.regexpCode=E})(ew);var bP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=ew;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(n=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof e.Name?l:this.name(l)}name(l){return new e.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}t.Scope=s;class i extends e.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:d}){this.value=l,this.scopePath=(0,e._)`.${new e.Name(c)}[${d}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:e.nil}}get(){return this._scope}name(l){return new i(l,this._newName(l))}value(l,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:f}=h,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[f];if(m){const _=m.get(p);if(_)return _}else m=this._values[f]=new Map;m.set(p,h);const E=this._scope[f]||(this._scope[f]=[]),A=E.length;return E[A]=c.ref,h.setValue(c,{property:f,itemIndex:A}),h}getValue(l,c){const d=this._values[l];if(d)return d.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,e._)`${l}${d.scopePath}`})}scopeCode(l=this._values,c,d){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},c,d)}_reduceValues(l,c,d={},h){let f=e.nil;for(const p in l){const m=l[p];if(!m)continue;const E=d[p]=d[p]||new Map;m.forEach(A=>{if(E.has(A))return;E.set(A,n.Started);let _=c(A);if(_){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;f=(0,e._)`${f}${g} ${A} = ${_};${this.opts._n}`}else if(_=h==null?void 0:h(A))f=(0,e._)`${f}${_}${this.opts._n}`;else throw new r(A);E.set(A,n.Completed)})}return f}}t.ValueScope=a})(bP);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=ew,r=bP;var n=ew;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=bP;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames($,F){return this}}class o extends i{constructor($,F,ee){super(),this.varKind=$,this.name=F,this.rhs=ee}render({es5:$,_n:F}){const ee=$?r.varKinds.var:this.varKind,ne=this.rhs===void 0?"":` = ${this.rhs}`;return`${ee} ${this.name}${ne};`+F}optimizeNames($,F){if($[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,$,F)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor($,F,ee){super(),this.lhs=$,this.rhs=F,this.sideEffects=ee}render({_n:$}){return`${this.lhs} = ${this.rhs};`+$}optimizeNames($,F){if(!(this.lhs instanceof e.Name&&!$[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,$,F),this}get names(){const $=this.lhs instanceof e.Name?{}:{...this.lhs.names};return k($,this.rhs)}}class u extends a{constructor($,F,ee,ne){super($,ee,ne),this.op=F}render({_n:$}){return`${this.lhs} ${this.op}= ${this.rhs};`+$}}class l extends i{constructor($){super(),this.label=$,this.names={}}render({_n:$}){return`${this.label}:`+$}}class c extends i{constructor($){super(),this.label=$,this.names={}}render({_n:$}){return`break${this.label?` ${this.label}`:""};`+$}}class d extends i{constructor($){super(),this.error=$}render({_n:$}){return`throw ${this.error};`+$}get names(){return this.error.names}}class h extends i{constructor($){super(),this.code=$}render({_n:$}){return`${this.code};`+$}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames($,F){return this.code=K(this.code,$,F),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class f extends i{constructor($=[]){super(),this.nodes=$}render($){return this.nodes.reduce((F,ee)=>F+ee.render($),"")}optimizeNodes(){const{nodes:$}=this;let F=$.length;for(;F--;){const ee=$[F].optimizeNodes();Array.isArray(ee)?$.splice(F,1,...ee):ee?$[F]=ee:$.splice(F,1)}return $.length>0?this:void 0}optimizeNames($,F){const{nodes:ee}=this;let ne=ee.length;for(;ne--;){const le=ee[ne];le.optimizeNames($,F)||(L($,le.names),ee.splice(ne,1))}return ee.length>0?this:void 0}get names(){return this.nodes.reduce(($,F)=>C($,F.names),{})}}class p extends f{render($){return"{"+$._n+super.render($)+"}"+$._n}}class m extends f{}class E extends p{}E.kind="else";class A extends p{constructor($,F){super(F),this.condition=$}render($){let F=`if(${this.condition})`+super.render($);return this.else&&(F+="else "+this.else.render($)),F}optimizeNodes(){super.optimizeNodes();const $=this.condition;if($===!0)return this.nodes;let F=this.else;if(F){const ee=F.optimizeNodes();F=this.else=Array.isArray(ee)?new E(ee):ee}if(F)return $===!1?F instanceof A?F:F.nodes:this.nodes.length?this:new A(q($),F instanceof A?[F]:F.nodes);if(!($===!1||!this.nodes.length))return this}optimizeNames($,F){var ee;if(this.else=(ee=this.else)===null||ee===void 0?void 0:ee.optimizeNames($,F),!!(super.optimizeNames($,F)||this.else))return this.condition=K(this.condition,$,F),this}get names(){const $=super.names;return k($,this.condition),this.else&&C($,this.else.names),$}}A.kind="if";class _ extends p{}_.kind="for";class g extends _{constructor($){super(),this.iteration=$}render($){return`for(${this.iteration})`+super.render($)}optimizeNames($,F){if(super.optimizeNames($,F))return this.iteration=K(this.iteration,$,F),this}get names(){return C(super.names,this.iteration.names)}}class v extends _{constructor($,F,ee,ne){super(),this.varKind=$,this.name=F,this.from=ee,this.to=ne}render($){const F=$.es5?r.varKinds.var:this.varKind,{name:ee,from:ne,to:le}=this;return`for(${F} ${ee}=${ne}; ${ee}<${le}; ${ee}++)`+super.render($)}get names(){const $=k(super.names,this.from);return k($,this.to)}}class S extends _{constructor($,F,ee,ne){super(),this.loop=$,this.varKind=F,this.name=ee,this.iterable=ne}render($){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render($)}optimizeNames($,F){if(super.optimizeNames($,F))return this.iterable=K(this.iterable,$,F),this}get names(){return C(super.names,this.iterable.names)}}class x extends p{constructor($,F,ee){super(),this.name=$,this.args=F,this.async=ee}render($){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render($)}}x.kind="func";class D extends f{render($){return"return "+super.render($)}}D.kind="return";class w extends p{render($){let F="try"+super.render($);return this.catch&&(F+=this.catch.render($)),this.finally&&(F+=this.finally.render($)),F}optimizeNodes(){var $,F;return super.optimizeNodes(),($=this.catch)===null||$===void 0||$.optimizeNodes(),(F=this.finally)===null||F===void 0||F.optimizeNodes(),this}optimizeNames($,F){var ee,ne;return super.optimizeNames($,F),(ee=this.catch)===null||ee===void 0||ee.optimizeNames($,F),(ne=this.finally)===null||ne===void 0||ne.optimizeNames($,F),this}get names(){const $=super.names;return this.catch&&C($,this.catch.names),this.finally&&C($,this.finally.names),$}}class b extends p{constructor($){super(),this.error=$}render($){return`catch(${this.error})`+super.render($)}}b.kind="catch";class T extends p{render($){return"finally"+super.render($)}}T.kind="finally";class P{constructor($,F={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...F,_n:F.lines?`
`:""},this._extScope=$,this._scope=new r.Scope({parent:$}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name($){return this._scope.name($)}scopeName($){return this._extScope.name($)}scopeValue($,F){const ee=this._extScope.value($,F);return(this._values[ee.prefix]||(this._values[ee.prefix]=new Set)).add(ee),ee}getScopeValue($,F){return this._extScope.getValue($,F)}scopeRefs($){return this._extScope.scopeRefs($,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def($,F,ee,ne){const le=this._scope.toName(F);return ee!==void 0&&ne&&(this._constants[le.str]=ee),this._leafNode(new o($,le,ee)),le}const($,F,ee){return this._def(r.varKinds.const,$,F,ee)}let($,F,ee){return this._def(r.varKinds.let,$,F,ee)}var($,F,ee){return this._def(r.varKinds.var,$,F,ee)}assign($,F,ee){return this._leafNode(new a($,F,ee))}add($,F){return this._leafNode(new u($,t.operators.ADD,F))}code($){return typeof $=="function"?$():$!==e.nil&&this._leafNode(new h($)),this}object(...$){const F=["{"];for(const[ee,ne]of $)F.length>1&&F.push(","),F.push(ee),(ee!==ne||this.opts.es5)&&(F.push(":"),(0,e.addCodeArg)(F,ne));return F.push("}"),new e._Code(F)}if($,F,ee){if(this._blockNode(new A($)),F&&ee)this.code(F).else().code(ee).endIf();else if(F)this.code(F).endIf();else if(ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf($){return this._elseNode(new A($))}else(){return this._elseNode(new E)}endIf(){return this._endBlockNode(A,E)}_for($,F){return this._blockNode($),F&&this.code(F).endFor(),this}for($,F){return this._for(new g($),F)}forRange($,F,ee,ne,le=this.opts.es5?r.varKinds.var:r.varKinds.let){const me=this._scope.toName($);return this._for(new v(le,me,F,ee),()=>ne(me))}forOf($,F,ee,ne=r.varKinds.const){const le=this._scope.toName($);if(this.opts.es5){const me=F instanceof e.Name?F:this.var("_arr",F);return this.forRange("_i",0,(0,e._)`${me}.length`,ve=>{this.var(le,(0,e._)`${me}[${ve}]`),ee(le)})}return this._for(new S("of",ne,le,F),()=>ee(le))}forIn($,F,ee,ne=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf($,(0,e._)`Object.keys(${F})`,ee);const le=this._scope.toName($);return this._for(new S("in",ne,le,F),()=>ee(le))}endFor(){return this._endBlockNode(_)}label($){return this._leafNode(new l($))}break($){return this._leafNode(new c($))}return($){const F=new D;if(this._blockNode(F),this.code($),F.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(D)}try($,F,ee){if(!F&&!ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const ne=new w;if(this._blockNode(ne),this.code($),F){const le=this.name("e");this._currNode=ne.catch=new b(le),F(le)}return ee&&(this._currNode=ne.finally=new T,this.code(ee)),this._endBlockNode(b,T)}throw($){return this._leafNode(new d($))}block($,F){return this._blockStarts.push(this._nodes.length),$&&this.code($).endBlock(F),this}endBlock($){const F=this._blockStarts.pop();if(F===void 0)throw new Error("CodeGen: not in self-balancing block");const ee=this._nodes.length-F;if(ee<0||$!==void 0&&ee!==$)throw new Error(`CodeGen: wrong number of nodes: ${ee} vs ${$} expected`);return this._nodes.length=F,this}func($,F=e.nil,ee,ne){return this._blockNode(new x($,F,ee)),ne&&this.code(ne).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize($=1){for(;$-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode($){return this._currNode.nodes.push($),this}_blockNode($){this._currNode.nodes.push($),this._nodes.push($)}_endBlockNode($,F){const ee=this._currNode;if(ee instanceof $||F&&ee instanceof F)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${F?`${$.kind}/${F.kind}`:$.kind}"`)}_elseNode($){const F=this._currNode;if(!(F instanceof A))throw new Error('CodeGen: "else" without "if"');return this._currNode=F.else=$,this}get _root(){return this._nodes[0]}get _currNode(){const $=this._nodes;return $[$.length-1]}set _currNode($){const F=this._nodes;F[F.length-1]=$}}t.CodeGen=P;function C(z,$){for(const F in $)z[F]=(z[F]||0)+($[F]||0);return z}function k(z,$){return $ instanceof e._CodeOrName?C(z,$.names):z}function K(z,$,F){if(z instanceof e.Name)return ee(z);if(!ne(z))return z;return new e._Code(z._items.reduce((le,me)=>(me instanceof e.Name&&(me=ee(me)),me instanceof e._Code?le.push(...me._items):le.push(me),le),[]));function ee(le){const me=F[le.str];return me===void 0||$[le.str]!==1?le:(delete $[le.str],me)}function ne(le){return le instanceof e._Code&&le._items.some(me=>me instanceof e.Name&&$[me.str]===1&&F[me.str]!==void 0)}}function L(z,$){for(const F in $)z[F]=(z[F]||0)-($[F]||0)}function q(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${te(z)}`}t.not=q;const se=B(t.operators.AND);function X(...z){return z.reduce(se)}t.and=X;const re=B(t.operators.OR);function W(...z){return z.reduce(re)}t.or=W;function B(z){return($,F)=>$===e.nil?F:F===e.nil?$:(0,e._)`${te($)} ${z} ${te(F)}`}function te(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(rr);var lr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=rr,r=ew;function n(x){const D={};for(const w of x)D[w]=!0;return D}t.toHash=n;function s(x,D){return typeof D=="boolean"?D:Object.keys(D).length===0?!0:(i(x,D),!o(D,x.self.RULES.all))}t.alwaysValidSchema=s;function i(x,D=x.schema){const{opts:w,self:b}=x;if(!w.strictSchema||typeof D=="boolean")return;const T=b.RULES.keywords;for(const P in D)T[P]||S(x,`unknown keyword: "${P}"`)}t.checkUnknownRules=i;function o(x,D){if(typeof x=="boolean")return!x;for(const w in x)if(D[w])return!0;return!1}t.schemaHasRules=o;function a(x,D){if(typeof x=="boolean")return!x;for(const w in x)if(w!=="$ref"&&D.all[w])return!0;return!1}t.schemaHasRulesButRef=a;function u({topSchemaRef:x,schemaPath:D},w,b,T){if(!T){if(typeof w=="number"||typeof w=="boolean")return w;if(typeof w=="string")return(0,e._)`${w}`}return(0,e._)`${x}${D}${(0,e.getProperty)(b)}`}t.schemaRefOrVal=u;function l(x){return h(decodeURIComponent(x))}t.unescapeFragment=l;function c(x){return encodeURIComponent(d(x))}t.escapeFragment=c;function d(x){return typeof x=="number"?`${x}`:x.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=d;function h(x){return x.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=h;function f(x,D){if(Array.isArray(x))for(const w of x)D(w);else D(x)}t.eachItem=f;function p({mergeNames:x,mergeToName:D,mergeValues:w,resultToName:b}){return(T,P,C,k)=>{const K=C===void 0?P:C instanceof e.Name?(P instanceof e.Name?x(T,P,C):D(T,P,C),C):P instanceof e.Name?(D(T,C,P),P):w(P,C);return k===e.Name&&!(K instanceof e.Name)?b(T,K):K}}t.mergeEvaluated={props:p({mergeNames:(x,D,w)=>x.if((0,e._)`${w} !== true && ${D} !== undefined`,()=>{x.if((0,e._)`${D} === true`,()=>x.assign(w,!0),()=>x.assign(w,(0,e._)`${w} || {}`).code((0,e._)`Object.assign(${w}, ${D})`))}),mergeToName:(x,D,w)=>x.if((0,e._)`${w} !== true`,()=>{D===!0?x.assign(w,!0):(x.assign(w,(0,e._)`${w} || {}`),E(x,w,D))}),mergeValues:(x,D)=>x===!0?!0:{...x,...D},resultToName:m}),items:p({mergeNames:(x,D,w)=>x.if((0,e._)`${w} !== true && ${D} !== undefined`,()=>x.assign(w,(0,e._)`${D} === true ? true : ${w} > ${D} ? ${w} : ${D}`)),mergeToName:(x,D,w)=>x.if((0,e._)`${w} !== true`,()=>x.assign(w,D===!0?!0:(0,e._)`${w} > ${D} ? ${w} : ${D}`)),mergeValues:(x,D)=>x===!0?!0:Math.max(x,D),resultToName:(x,D)=>x.var("items",D)})};function m(x,D){if(D===!0)return x.var("props",!0);const w=x.var("props",(0,e._)`{}`);return D!==void 0&&E(x,w,D),w}t.evaluatedPropsToName=m;function E(x,D,w){Object.keys(w).forEach(b=>x.assign((0,e._)`${D}${(0,e.getProperty)(b)}`,!0))}t.setEvaluated=E;const A={};function _(x,D){return x.scopeValue("func",{ref:D,code:A[D.code]||(A[D.code]=new r._Code(D.code))})}t.useFunc=_;var g;(function(x){x[x.Num=0]="Num",x[x.Str=1]="Str"})(g=t.Type||(t.Type={}));function v(x,D,w){if(x instanceof e.Name){const b=D===g.Num;return w?b?(0,e._)`"[" + ${x} + "]"`:(0,e._)`"['" + ${x} + "']"`:b?(0,e._)`"/" + ${x}`:(0,e._)`"/" + ${x}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return w?(0,e.getProperty)(x).toString():"/"+d(x)}t.getErrorPath=v;function S(x,D,w=x.opts.strictSchema){if(w){if(D=`strict mode: ${D}`,w===!0)throw new Error(D);x.self.logger.warn(D)}}t.checkStrictMode=S})(lr);var nc={};Object.defineProperty(nc,"__esModule",{value:!0});const Hi=rr,j1e={data:new Hi.Name("data"),valCxt:new Hi.Name("valCxt"),instancePath:new Hi.Name("instancePath"),parentData:new Hi.Name("parentData"),parentDataProperty:new Hi.Name("parentDataProperty"),rootData:new Hi.Name("rootData"),dynamicAnchors:new Hi.Name("dynamicAnchors"),vErrors:new Hi.Name("vErrors"),errors:new Hi.Name("errors"),this:new Hi.Name("this"),self:new Hi.Name("self"),scope:new Hi.Name("scope"),json:new Hi.Name("json"),jsonPos:new Hi.Name("jsonPos"),jsonLen:new Hi.Name("jsonLen"),jsonPart:new Hi.Name("jsonPart")};nc.default=j1e;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=rr,r=lr,n=nc;t.keywordError={message:({keyword:E})=>(0,e.str)`must pass "${E}" keyword validation`},t.keyword$DataError={message:({keyword:E,schemaType:A})=>A?(0,e.str)`"${E}" keyword must be ${A} ($data)`:(0,e.str)`"${E}" keyword is invalid ($data)`};function s(E,A=t.keywordError,_,g){const{it:v}=E,{gen:S,compositeRule:x,allErrors:D}=v,w=d(E,A,_);g??(x||D)?u(S,w):l(v,(0,e._)`[${w}]`)}t.reportError=s;function i(E,A=t.keywordError,_){const{it:g}=E,{gen:v,compositeRule:S,allErrors:x}=g,D=d(E,A,_);u(v,D),S||x||l(g,n.default.vErrors)}t.reportExtraError=i;function o(E,A){E.assign(n.default.errors,A),E.if((0,e._)`${n.default.vErrors} !== null`,()=>E.if(A,()=>E.assign((0,e._)`${n.default.vErrors}.length`,A),()=>E.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:E,keyword:A,schemaValue:_,data:g,errsCount:v,it:S}){if(v===void 0)throw new Error("ajv implementation error");const x=E.name("err");E.forRange("i",v,n.default.errors,D=>{E.const(x,(0,e._)`${n.default.vErrors}[${D}]`),E.if((0,e._)`${x}.instancePath === undefined`,()=>E.assign((0,e._)`${x}.instancePath`,(0,e.strConcat)(n.default.instancePath,S.errorPath))),E.assign((0,e._)`${x}.schemaPath`,(0,e.str)`${S.errSchemaPath}/${A}`),S.opts.verbose&&(E.assign((0,e._)`${x}.schema`,_),E.assign((0,e._)`${x}.data`,g))})}t.extendErrors=a;function u(E,A){const _=E.const("err",A);E.if((0,e._)`${n.default.vErrors} === null`,()=>E.assign(n.default.vErrors,(0,e._)`[${_}]`),(0,e._)`${n.default.vErrors}.push(${_})`),E.code((0,e._)`${n.default.errors}++`)}function l(E,A){const{gen:_,validateName:g,schemaEnv:v}=E;v.$async?_.throw((0,e._)`new ${E.ValidationError}(${A})`):(_.assign((0,e._)`${g}.errors`,A),_.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function d(E,A,_){const{createErrors:g}=E.it;return g===!1?(0,e._)`{}`:h(E,A,_)}function h(E,A,_={}){const{gen:g,it:v}=E,S=[f(v,_),p(E,_)];return m(E,A,S),g.object(...S)}function f({errorPath:E},{instancePath:A}){const _=A?(0,e.str)`${E}${(0,r.getErrorPath)(A,r.Type.Str)}`:E;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,_)]}function p({keyword:E,it:{errSchemaPath:A}},{schemaPath:_,parentSchema:g}){let v=g?A:(0,e.str)`${A}/${E}`;return _&&(v=(0,e.str)`${v}${(0,r.getErrorPath)(_,r.Type.Str)}`),[c.schemaPath,v]}function m(E,{params:A,message:_},g){const{keyword:v,data:S,schemaValue:x,it:D}=E,{opts:w,propertyName:b,topSchemaRef:T,schemaPath:P}=D;g.push([c.keyword,v],[c.params,typeof A=="function"?A(E):A||(0,e._)`{}`]),w.messages&&g.push([c.message,typeof _=="function"?_(E):_]),w.verbose&&g.push([c.schema,x],[c.parentSchema,(0,e._)`${T}${P}`],[n.default.data,S]),b&&g.push([c.propertyName,b])}})(Vw);Object.defineProperty(wy,"__esModule",{value:!0});wy.boolOrEmptySchema=wy.topBoolOrEmptySchema=void 0;const U1e=Vw,L1e=rr,K1e=nc,V1e={message:"boolean schema is false"};function q1e(t){const{gen:e,schema:r,validateName:n}=t;r===!1?rq(t,!1):typeof r=="object"&&r.$async===!0?e.return(K1e.default.data):(e.assign((0,L1e._)`${n}.errors`,null),e.return(!0))}wy.topBoolOrEmptySchema=q1e;function H1e(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),rq(t)):r.var(e,!0)}wy.boolOrEmptySchema=H1e;function rq(t,e){const{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,U1e.reportError)(s,V1e,void 0,e)}var qw={},wp={};Object.defineProperty(wp,"__esModule",{value:!0});wp.getRules=wp.isJSONType=void 0;const z1e=["string","number","integer","boolean","null","object","array"],W1e=new Set(z1e);function G1e(t){return typeof t=="string"&&W1e.has(t)}wp.isJSONType=G1e;function J1e(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}wp.getRules=J1e;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.shouldUseRule=nl.shouldUseGroup=nl.schemaHasRulesForType=void 0;function X1e({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&nq(t,n)}nl.schemaHasRulesForType=X1e;function nq(t,e){return e.rules.some(r=>iq(t,r))}nl.shouldUseGroup=nq;function iq(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}nl.shouldUseRule=iq;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=wp,r=nl,n=Vw,s=rr,i=lr;var o;(function(g){g[g.Correct=0]="Correct",g[g.Wrong=1]="Wrong"})(o=t.DataType||(t.DataType={}));function a(g){const v=u(g.type);if(v.includes("null")){if(g.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!v.length&&g.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');g.nullable===!0&&v.push("null")}return v}t.getSchemaTypes=a;function u(g){const v=Array.isArray(g)?g:g?[g]:[];if(v.every(e.isJSONType))return v;throw new Error("type must be JSONType or JSONType[]: "+v.join(","))}t.getJSONTypes=u;function l(g,v){const{gen:S,data:x,opts:D}=g,w=d(v,D.coerceTypes),b=v.length>0&&!(w.length===0&&v.length===1&&(0,r.schemaHasRulesForType)(g,v[0]));if(b){const T=m(v,x,D.strictNumbers,o.Wrong);S.if(T,()=>{w.length?h(g,v,w):A(g)})}return b}t.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function d(g,v){return v?g.filter(S=>c.has(S)||v==="array"&&S==="array"):[]}function h(g,v,S){const{gen:x,data:D,opts:w}=g,b=x.let("dataType",(0,s._)`typeof ${D}`),T=x.let("coerced",(0,s._)`undefined`);w.coerceTypes==="array"&&x.if((0,s._)`${b} == 'object' && Array.isArray(${D}) && ${D}.length == 1`,()=>x.assign(D,(0,s._)`${D}[0]`).assign(b,(0,s._)`typeof ${D}`).if(m(v,D,w.strictNumbers),()=>x.assign(T,D))),x.if((0,s._)`${T} !== undefined`);for(const C of S)(c.has(C)||C==="array"&&w.coerceTypes==="array")&&P(C);x.else(),A(g),x.endIf(),x.if((0,s._)`${T} !== undefined`,()=>{x.assign(D,T),f(g,T)});function P(C){switch(C){case"string":x.elseIf((0,s._)`${b} == "number" || ${b} == "boolean"`).assign(T,(0,s._)`"" + ${D}`).elseIf((0,s._)`${D} === null`).assign(T,(0,s._)`""`);return;case"number":x.elseIf((0,s._)`${b} == "boolean" || ${D} === null
              || (${b} == "string" && ${D} && ${D} == +${D})`).assign(T,(0,s._)`+${D}`);return;case"integer":x.elseIf((0,s._)`${b} === "boolean" || ${D} === null
              || (${b} === "string" && ${D} && ${D} == +${D} && !(${D} % 1))`).assign(T,(0,s._)`+${D}`);return;case"boolean":x.elseIf((0,s._)`${D} === "false" || ${D} === 0 || ${D} === null`).assign(T,!1).elseIf((0,s._)`${D} === "true" || ${D} === 1`).assign(T,!0);return;case"null":x.elseIf((0,s._)`${D} === "" || ${D} === 0 || ${D} === false`),x.assign(T,null);return;case"array":x.elseIf((0,s._)`${b} === "string" || ${b} === "number"
              || ${b} === "boolean" || ${D} === null`).assign(T,(0,s._)`[${D}]`)}}}function f({gen:g,parentData:v,parentDataProperty:S},x){g.if((0,s._)`${v} !== undefined`,()=>g.assign((0,s._)`${v}[${S}]`,x))}function p(g,v,S,x=o.Correct){const D=x===o.Correct?s.operators.EQ:s.operators.NEQ;let w;switch(g){case"null":return(0,s._)`${v} ${D} null`;case"array":w=(0,s._)`Array.isArray(${v})`;break;case"object":w=(0,s._)`${v} && typeof ${v} == "object" && !Array.isArray(${v})`;break;case"integer":w=b((0,s._)`!(${v} % 1) && !isNaN(${v})`);break;case"number":w=b();break;default:return(0,s._)`typeof ${v} ${D} ${g}`}return x===o.Correct?w:(0,s.not)(w);function b(T=s.nil){return(0,s.and)((0,s._)`typeof ${v} == "number"`,T,S?(0,s._)`isFinite(${v})`:s.nil)}}t.checkDataType=p;function m(g,v,S,x){if(g.length===1)return p(g[0],v,S,x);let D;const w=(0,i.toHash)(g);if(w.array&&w.object){const b=(0,s._)`typeof ${v} != "object"`;D=w.null?b:(0,s._)`!${v} || ${b}`,delete w.null,delete w.array,delete w.object}else D=s.nil;w.number&&delete w.integer;for(const b in w)D=(0,s.and)(D,p(b,v,S,x));return D}t.checkDataTypes=m;const E={message:({schema:g})=>`must be ${g}`,params:({schema:g,schemaValue:v})=>typeof g=="string"?(0,s._)`{type: ${g}}`:(0,s._)`{type: ${v}}`};function A(g){const v=_(g);(0,n.reportError)(v,E)}t.reportTypeError=A;function _(g){const{gen:v,data:S,schema:x}=g,D=(0,i.schemaRefOrVal)(g,x,"type");return{gen:v,keyword:"type",data:S,schema:x.type,schemaCode:D,schemaValue:D,parentSchema:x,params:{},it:g}}})(qw);var TS={};Object.defineProperty(TS,"__esModule",{value:!0});TS.assignDefaults=void 0;const om=rr,Z1e=lr;function Y1e(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const s in r)f8(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>f8(t,i,s.default))}TS.assignDefaults=Y1e;function f8(t,e,r){const{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;const a=(0,om._)`${i}${(0,om.getProperty)(e)}`;if(s){(0,Z1e.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,om._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,om._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,om._)`${a} = ${(0,om.stringify)(r)}`)}var Pu={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.validateUnion=Qt.validateArray=Qt.usePattern=Qt.callValidateCode=Qt.schemaProperties=Qt.allSchemaProperties=Qt.noPropertyInData=Qt.propertyInData=Qt.isOwnProperty=Qt.hasPropFunc=Qt.reportMissingProp=Qt.checkMissingProp=Qt.checkReportMissingProp=void 0;const tn=rr,Lk=lr,td=nc,Q1e=lr;function eEe(t,e){const{gen:r,data:n,it:s}=t;r.if(Vk(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,tn._)`${e}`},!0),t.error()})}Qt.checkReportMissingProp=eEe;function tEe({gen:t,data:e,it:{opts:r}},n,s){return(0,tn.or)(...n.map(i=>(0,tn.and)(Vk(t,e,i,r.ownProperties),(0,tn._)`${s} = ${i}`)))}Qt.checkMissingProp=tEe;function rEe(t,e){t.setParams({missingProperty:e},!0),t.error()}Qt.reportMissingProp=rEe;function sq(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,tn._)`Object.prototype.hasOwnProperty`})}Qt.hasPropFunc=sq;function Kk(t,e,r){return(0,tn._)`${sq(t)}.call(${e}, ${r})`}Qt.isOwnProperty=Kk;function nEe(t,e,r,n){const s=(0,tn._)`${e}${(0,tn.getProperty)(r)} !== undefined`;return n?(0,tn._)`${s} && ${Kk(t,e,r)}`:s}Qt.propertyInData=nEe;function Vk(t,e,r,n){const s=(0,tn._)`${e}${(0,tn.getProperty)(r)} === undefined`;return n?(0,tn.or)(s,(0,tn.not)(Kk(t,e,r))):s}Qt.noPropertyInData=Vk;function oq(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Qt.allSchemaProperties=oq;function iEe(t,e){return oq(e).filter(r=>!(0,Lk.alwaysValidSchema)(t,e[r]))}Qt.schemaProperties=iEe;function sEe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,l){const c=l?(0,tn._)`${t}, ${e}, ${n}${s}`:e,d=[[td.default.instancePath,(0,tn.strConcat)(td.default.instancePath,i)],[td.default.parentData,o.parentData],[td.default.parentDataProperty,o.parentDataProperty],[td.default.rootData,td.default.rootData]];o.opts.dynamicRef&&d.push([td.default.dynamicAnchors,td.default.dynamicAnchors]);const h=(0,tn._)`${c}, ${r.object(...d)}`;return u!==tn.nil?(0,tn._)`${a}.call(${u}, ${h})`:(0,tn._)`${a}(${h})`}Qt.callValidateCode=sEe;const oEe=(0,tn._)`new RegExp`;function aEe({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,tn._)`${s.code==="new RegExp"?oEe:(0,Q1e.useFunc)(t,s)}(${r}, ${n})`})}Qt.usePattern=aEe;function uEe(t){const{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const u=e.const("len",(0,tn._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:Lk.Type.Num},i),e.if((0,tn.not)(i),a)})}}Qt.validateArray=uEe;function cEe(t){const{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Lk.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,l)=>{const c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,tn._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,tn.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Qt.validateUnion=cEe;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.validateKeywordUsage=Pu.validSchemaType=Pu.funcKeywordCode=Pu.macroKeywordCode=void 0;const ds=rr,Ph=nc,lEe=Qt,dEe=Vw;function fEe(t,e){const{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=aq(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=r.name("valid");t.subschema({schema:a,schemaPath:ds.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Pu.macroKeywordCode=fEe;function hEe(t,e){var r;const{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;mEe(u,e);const l=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,c=aq(n,s,l),d=n.let("valid");t.block$data(d,h),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function h(){if(e.errors===!1)m(),e.modifying&&h8(t),E(()=>t.error());else{const A=e.async?f():p();e.modifying&&h8(t),E(()=>pEe(t,A))}}function f(){const A=n.let("ruleErrs",null);return n.try(()=>m((0,ds._)`await `),_=>n.assign(d,!1).if((0,ds._)`${_} instanceof ${u.ValidationError}`,()=>n.assign(A,(0,ds._)`${_}.errors`),()=>n.throw(_))),A}function p(){const A=(0,ds._)`${c}.errors`;return n.assign(A,null),m(ds.nil),A}function m(A=e.async?(0,ds._)`await `:ds.nil){const _=u.opts.passContext?Ph.default.this:Ph.default.self,g=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,ds._)`${A}${(0,lEe.callValidateCode)(t,c,_,g)}`,e.modifying)}function E(A){var _;n.if((0,ds.not)((_=e.valid)!==null&&_!==void 0?_:d),A)}}Pu.funcKeywordCode=hEe;function h8(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,ds._)`${n.parentData}[${n.parentDataProperty}]`))}function pEe(t,e){const{gen:r}=t;r.if((0,ds._)`Array.isArray(${e})`,()=>{r.assign(Ph.default.vErrors,(0,ds._)`${Ph.default.vErrors} === null ? ${e} : ${Ph.default.vErrors}.concat(${e})`).assign(Ph.default.errors,(0,ds._)`${Ph.default.vErrors}.length`),(0,dEe.extendErrors)(t)},()=>t.error())}function mEe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function aq(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ds.stringify)(r)})}function yEe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Pu.validSchemaType=yEe;function gEe({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Pu.validateKeywordUsage=gEe;var ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.extendSubschemaMode=ef.extendSubschemaData=ef.getSubschema=void 0;const Su=rr,uq=lr;function vEe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Su._)`${t.schemaPath}${(0,Su.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Su._)`${t.schemaPath}${(0,Su.getProperty)(e)}${(0,Su.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,uq.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ef.getSubschema=vEe;function wEe(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(r!==void 0){const{errorPath:l,dataPathArr:c,opts:d}=e,h=a.let("data",(0,Su._)`${e.data}${(0,Su.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Su.str)`${l}${(0,uq.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Su._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){const l=s instanceof Su.Name?s:a.let("data",s,!0);u(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}ef.extendSubschemaData=wEe;function _Ee(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}ef.extendSubschemaMode=_Ee;var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.getSchemaRefs=ki.resolveUrl=ki.normalizeId=ki._getFullPath=ki.getFullPath=ki.inlineRef=void 0;const bEe=lr,EEe=oS,AEe=ZK,SEe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function TEe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!EP(t):e?cq(t)<=e:!1}ki.inlineRef=TEe;const DEe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function EP(t){for(const e in t){if(DEe.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(EP)||typeof r=="object"&&EP(r))return!0}return!1}function cq(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!SEe.has(r)&&(typeof t[r]=="object"&&(0,bEe.eachItem)(t[r],n=>e+=cq(n)),e===1/0))return 1/0}return e}function lq(t,e="",r){r!==!1&&(e=Gm(e));const n=t.parse(e);return dq(t,n)}ki.getFullPath=lq;function dq(t,e){return t.serialize(e).split("#")[0]+"#"}ki._getFullPath=dq;const xEe=/#\/?$/;function Gm(t){return t?t.replace(xEe,""):""}ki.normalizeId=Gm;function PEe(t,e,r){return r=Gm(r),t.resolve(e,r)}ki.resolveUrl=PEe;const CEe=/^[a-z_][-a-z0-9._]*$/i;function IEe(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Gm(t[r]||e),i={"":s},o=lq(n,s,!1),a={},u=new Set;return AEe(t,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;const m=o+h;let E=i[p];typeof d[r]=="string"&&(E=A.call(this,d[r])),_.call(this,d.$anchor),_.call(this,d.$dynamicAnchor),i[h]=E;function A(g){const v=this.opts.uriResolver.resolve;if(g=Gm(E?v(E,g):g),u.has(g))throw c(g);u.add(g);let S=this.refs[g];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,g):g!==Gm(m)&&(g[0]==="#"?(l(d,a[g],g),a[g]=d):this.refs[g]=m),g}function _(g){if(typeof g=="string"){if(!CEe.test(g))throw new Error(`invalid anchor "${g}"`);A.call(this,`#${g}`)}}}),a;function l(d,h,f){if(h!==void 0&&!EEe(d,h))throw c(f)}function c(d){return new Error(`reference "${d}" resolves to more than one schema`)}}ki.getSchemaRefs=IEe;Object.defineProperty(Fa,"__esModule",{value:!0});Fa.getData=Fa.KeywordCxt=Fa.validateFunctionCode=void 0;const fq=wy,p8=qw,qk=nl,HE=qw,kEe=TS,lv=Pu,nD=ef,nt=rr,Ot=nc,$Ee=ki,il=lr,n0=Vw;function OEe(t){if(mq(t)&&(yq(t),pq(t))){BEe(t);return}hq(t,()=>(0,fq.topBoolOrEmptySchema)(t))}Fa.validateFunctionCode=OEe;function hq({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,nt._)`${Ot.default.data}, ${Ot.default.valCxt}`,n.$async,()=>{t.code((0,nt._)`"use strict"; ${m8(r,s)}`),NEe(t,s),t.code(i)}):t.func(e,(0,nt._)`${Ot.default.data}, ${REe(s)}`,n.$async,()=>t.code(m8(r,s)).code(i))}function REe(t){return(0,nt._)`{${Ot.default.instancePath}="", ${Ot.default.parentData}, ${Ot.default.parentDataProperty}, ${Ot.default.rootData}=${Ot.default.data}${t.dynamicRef?(0,nt._)`, ${Ot.default.dynamicAnchors}={}`:nt.nil}}={}`}function NEe(t,e){t.if(Ot.default.valCxt,()=>{t.var(Ot.default.instancePath,(0,nt._)`${Ot.default.valCxt}.${Ot.default.instancePath}`),t.var(Ot.default.parentData,(0,nt._)`${Ot.default.valCxt}.${Ot.default.parentData}`),t.var(Ot.default.parentDataProperty,(0,nt._)`${Ot.default.valCxt}.${Ot.default.parentDataProperty}`),t.var(Ot.default.rootData,(0,nt._)`${Ot.default.valCxt}.${Ot.default.rootData}`),e.dynamicRef&&t.var(Ot.default.dynamicAnchors,(0,nt._)`${Ot.default.valCxt}.${Ot.default.dynamicAnchors}`)},()=>{t.var(Ot.default.instancePath,(0,nt._)`""`),t.var(Ot.default.parentData,(0,nt._)`undefined`),t.var(Ot.default.parentDataProperty,(0,nt._)`undefined`),t.var(Ot.default.rootData,Ot.default.data),e.dynamicRef&&t.var(Ot.default.dynamicAnchors,(0,nt._)`{}`)})}function BEe(t){const{schema:e,opts:r,gen:n}=t;hq(t,()=>{r.$comment&&e.$comment&&vq(t),LEe(t),n.let(Ot.default.vErrors,null),n.let(Ot.default.errors,0),r.unevaluated&&FEe(t),gq(t),qEe(t)})}function FEe(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,nt._)`${r}.evaluated`),e.if((0,nt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,nt._)`${t.evaluated}.props`,(0,nt._)`undefined`)),e.if((0,nt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,nt._)`${t.evaluated}.items`,(0,nt._)`undefined`))}function m8(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,nt._)`/*# sourceURL=${r} */`:nt.nil}function MEe(t,e){if(mq(t)&&(yq(t),pq(t))){jEe(t,e);return}(0,fq.boolOrEmptySchema)(t,e)}function pq({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function mq(t){return typeof t.schema!="boolean"}function jEe(t,e){const{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&vq(t),KEe(t),VEe(t);const i=n.const("_errs",Ot.default.errors);gq(t,i),n.var(e,(0,nt._)`${i} === ${Ot.default.errors}`)}function yq(t){(0,il.checkUnknownRules)(t),UEe(t)}function gq(t,e){if(t.opts.jtd)return y8(t,[],!1,e);const r=(0,p8.getSchemaTypes)(t.schema),n=(0,p8.coerceAndCheckDataType)(t,r);y8(t,r,!n,e)}function UEe(t){const{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,il.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function LEe(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,il.checkStrictMode)(t,"default is ignored in the schema root")}function KEe(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,$Ee.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function VEe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function vq({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)t.code((0,nt._)`${Ot.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,nt.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,nt._)`${Ot.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function qEe(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,nt._)`${Ot.default.errors} === 0`,()=>e.return(Ot.default.data),()=>e.throw((0,nt._)`new ${s}(${Ot.default.vErrors})`)):(e.assign((0,nt._)`${n}.errors`,Ot.default.vErrors),i.unevaluated&&HEe(t),e.return((0,nt._)`${Ot.default.errors} === 0`))}function HEe({gen:t,evaluated:e,props:r,items:n}){r instanceof nt.Name&&t.assign((0,nt._)`${e}.props`,r),n instanceof nt.Name&&t.assign((0,nt._)`${e}.items`,n)}function y8(t,e,r,n){const{gen:s,schema:i,data:o,allErrors:a,opts:u,self:l}=t,{RULES:c}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,il.schemaHasRulesButRef)(i,c))){s.block(()=>bq(t,"$ref",c.all.$ref.definition));return}u.jtd||zEe(t,e),s.block(()=>{for(const h of c.rules)d(h);d(c.post)});function d(h){(0,qk.shouldUseGroup)(i,h)&&(h.type?(s.if((0,HE.checkDataType)(h.type,o,u.strictNumbers)),g8(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,HE.reportTypeError)(t)),s.endIf()):g8(t,h),a||s.if((0,nt._)`${Ot.default.errors} === ${n||0}`))}}function g8(t,e){const{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,kEe.assignDefaults)(t,e.type),r.block(()=>{for(const i of e.rules)(0,qk.shouldUseRule)(n,i)&&bq(t,i.keyword,i.definition,e.type)})}function zEe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(WEe(t,e),t.opts.allowUnionTypes||GEe(t,e),JEe(t,t.dataTypes))}function WEe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{wq(t.dataTypes,r)||Hk(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),ZEe(t,e)}}function GEe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Hk(t,"use allowUnionTypes to allow union type keyword")}function JEe(t,e){const r=t.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,qk.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>XEe(e,o))&&Hk(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function XEe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function wq(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ZEe(t,e){const r=[];for(const n of t.dataTypes)wq(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Hk(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,il.checkStrictMode)(t,e,t.opts.strictTypes)}class _q{constructor(e,r,n){if((0,lv.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,il.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Eq(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,lv.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ot.default.errors))}result(e,r,n){this.failResult((0,nt.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,nt.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,nt._)`${r} !== undefined && (${(0,nt.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?n0.reportExtraError:n0.reportError)(this,this.def.error,r)}$dataError(){(0,n0.reportError)(this,this.def.$dataError||n0.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,n0.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=nt.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=nt.nil,r=nt.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,nt.or)((0,nt._)`${s} === undefined`,r)),e!==nt.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==nt.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,nt.or)(o(),a());function o(){if(n.length){if(!(r instanceof nt.Name))throw new Error("ajv implementation error");const u=Array.isArray(n)?n:[n];return(0,nt._)`${(0,HE.checkDataTypes)(u,r,i.opts.strictNumbers,HE.DataType.Wrong)}`}return nt.nil}function a(){if(s.validateSchema){const u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,nt._)`!${u}(${r})`}return nt.nil}}subschema(e,r){const n=(0,nD.getSubschema)(this.it,e);(0,nD.extendSubschemaData)(n,this.it,e),(0,nD.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return MEe(s,r),s}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=il.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=il.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,nt.Name)),!0}}Fa.KeywordCxt=_q;function bq(t,e,r,n){const s=new _q(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,lv.funcKeywordCode)(s,r):"macro"in r?(0,lv.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,lv.funcKeywordCode)(s,r)}const YEe=/^\/(?:[^~]|~0|~1)*$/,QEe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Eq(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Ot.default.rootData;if(t[0]==="/"){if(!YEe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ot.default.rootData}else{const l=QEe.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+l[1];if(s=l[2],s==="#"){if(c>=e)throw new Error(u("property/index",c));return n[e-c]}if(c>e)throw new Error(u("data",c));if(i=r[e-c],!s)return i}let o=i;const a=s.split("/");for(const l of a)l&&(i=(0,nt._)`${i}${(0,nt.getProperty)((0,il.unescapeJsonPointer)(l))}`,o=(0,nt._)`${o} && ${i}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}Fa.getData=Eq;var Hw={};Object.defineProperty(Hw,"__esModule",{value:!0});let eAe=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Hw.default=eAe;var zw={};Object.defineProperty(zw,"__esModule",{value:!0});const iD=ki;class tAe extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,iD.resolveUrl)(e,r,n),this.missingSchema=(0,iD.normalizeId)((0,iD.getFullPath)(e,this.missingRef))}}zw.default=tAe;var js={};Object.defineProperty(js,"__esModule",{value:!0});js.resolveSchema=js.getCompilingSchema=js.resolveRef=js.compileSchema=js.SchemaEnv=void 0;const ya=rr,rAe=Hw,oh=nc,Ca=ki,v8=lr,nAe=Fa;class DS{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ca.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}js.SchemaEnv=DS;function zk(t){const e=Aq.call(this,t);if(e)return e;const r=(0,Ca.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ya.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:rAe.default,code:(0,ya._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");t.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:oh.default.data,parentData:oh.default.parentData,parentDataProperty:oh.default.parentDataProperty,dataNames:[oh.default.data],dataPathArr:[ya.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ya.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ya.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ya._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,nAe.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const d=o.toString();c=`${o.scopeRefs(oh.default.scope)}return ${d}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const f=new Function(`${oh.default.self}`,`${oh.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;f.evaluated={props:p instanceof ya.Name?void 0:p,items:m instanceof ya.Name?void 0:m,dynamicProps:p instanceof ya.Name,dynamicItems:m instanceof ya.Name},f.source&&(f.source.evaluated=(0,ya.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),d}finally{this._compilations.delete(t)}}js.compileSchema=zk;function iAe(t,e,r){var n;r=(0,Ca.resolveUrl)(this.opts.uriResolver,e,r);const s=t.refs[r];if(s)return s;let i=aAe.call(this,t,r);if(i===void 0){const o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new DS({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=sAe.call(this,i)}js.resolveRef=iAe;function sAe(t){return(0,Ca.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:zk.call(this,t)}function Aq(t){for(const e of this._compilations)if(oAe(e,t))return e}js.getCompilingSchema=Aq;function oAe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function aAe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||xS.call(this,t,e)}function xS(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Ca._getFullPath)(this.opts.uriResolver,r);let s=(0,Ca.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return sD.call(this,r,t);const i=(0,Ca.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=xS.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:sD.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||zk.call(this,o),i===(0,Ca.normalizeId)(e)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(s=(0,Ca.resolveUrl)(this.opts.uriResolver,s,l)),new DS({schema:a,schemaId:u,root:t,baseId:s})}return sD.call(this,r,o)}}js.resolveSchema=xS;const uAe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function sD(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const u=r[(0,v8.unescapeFragment)(a)];if(u===void 0)return;r=u;const l=typeof r=="object"&&r[this.opts.schemaId];!uAe.has(a)&&l&&(e=(0,Ca.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,v8.schemaHasRulesButRef)(r,this.RULES)){const a=(0,Ca.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=xS.call(this,n,a)}const{schemaId:o}=this.opts;if(i=i||new DS({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}const cAe="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",lAe="Meta-schema for $data reference (JSON AnySchema extension proposal)",dAe="object",fAe=["$data"],hAe={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},pAe=!1,mAe={$id:cAe,description:lAe,type:dAe,required:fAe,properties:hAe,additionalProperties:pAe};var Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});const Sq=fL;Sq.code='require("ajv/dist/runtime/uri").default';Wk.default=Sq;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Fa;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=rr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Hw,s=zw,i=wp,o=js,a=rr,u=ki,l=qw,c=lr,d=mAe,h=Wk,f=(W,B)=>new RegExp(W,B);f.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function g(W){var B,te,z,$,F,ee,ne,le,me,ve,Pe,Ue,M,V,oe,j,I,N,Q,ce,pe,he,Ce,_e,G;const J=W.strict,ge=(B=W.code)===null||B===void 0?void 0:B.optimize,be=ge===!0||ge===void 0?1:ge||0,ke=(z=(te=W.code)===null||te===void 0?void 0:te.regExp)!==null&&z!==void 0?z:f,At=($=W.uriResolver)!==null&&$!==void 0?$:h.default;return{strictSchema:(ee=(F=W.strictSchema)!==null&&F!==void 0?F:J)!==null&&ee!==void 0?ee:!0,strictNumbers:(le=(ne=W.strictNumbers)!==null&&ne!==void 0?ne:J)!==null&&le!==void 0?le:!0,strictTypes:(ve=(me=W.strictTypes)!==null&&me!==void 0?me:J)!==null&&ve!==void 0?ve:"log",strictTuples:(Ue=(Pe=W.strictTuples)!==null&&Pe!==void 0?Pe:J)!==null&&Ue!==void 0?Ue:"log",strictRequired:(V=(M=W.strictRequired)!==null&&M!==void 0?M:J)!==null&&V!==void 0?V:!1,code:W.code?{...W.code,optimize:be,regExp:ke}:{optimize:be,regExp:ke},loopRequired:(oe=W.loopRequired)!==null&&oe!==void 0?oe:_,loopEnum:(j=W.loopEnum)!==null&&j!==void 0?j:_,meta:(I=W.meta)!==null&&I!==void 0?I:!0,messages:(N=W.messages)!==null&&N!==void 0?N:!0,inlineRefs:(Q=W.inlineRefs)!==null&&Q!==void 0?Q:!0,schemaId:(ce=W.schemaId)!==null&&ce!==void 0?ce:"$id",addUsedSchema:(pe=W.addUsedSchema)!==null&&pe!==void 0?pe:!0,validateSchema:(he=W.validateSchema)!==null&&he!==void 0?he:!0,validateFormats:(Ce=W.validateFormats)!==null&&Ce!==void 0?Ce:!0,unicodeRegExp:(_e=W.unicodeRegExp)!==null&&_e!==void 0?_e:!0,int32range:(G=W.int32range)!==null&&G!==void 0?G:!0,uriResolver:At}}class v{constructor(B={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,B=this.opts={...B,...g(B)};const{es5:te,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:te,lines:z}),this.logger=C(B.logger);const $=B.validateFormats;B.validateFormats=!1,this.RULES=(0,i.getRules)(),S.call(this,E,B,"NOT SUPPORTED"),S.call(this,A,B,"DEPRECATED","warn"),this._metaOpts=T.call(this),B.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),B.keywords&&b.call(this,B.keywords),typeof B.meta=="object"&&this.addMetaSchema(B.meta),D.call(this),B.validateFormats=$}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:B,meta:te,schemaId:z}=this.opts;let $=d;z==="id"&&($={...d},$.id=$.$id,delete $.$id),te&&B&&this.addMetaSchema($,$[z],!1)}defaultMeta(){const{meta:B,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof B=="object"?B[te]||B:void 0}validate(B,te){let z;if(typeof B=="string"){if(z=this.getSchema(B),!z)throw new Error(`no schema with key or ref "${B}"`)}else z=this.compile(B);const $=z(te);return"$async"in z||(this.errors=z.errors),$}compile(B,te){const z=this._addSchema(B,te);return z.validate||this._compileSchemaEnv(z)}compileAsync(B,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return $.call(this,B,te);async function $(ve,Pe){await F.call(this,ve.$schema);const Ue=this._addSchema(ve,Pe);return Ue.validate||ee.call(this,Ue)}async function F(ve){ve&&!this.getSchema(ve)&&await $.call(this,{$ref:ve},!0)}async function ee(ve){try{return this._compileSchemaEnv(ve)}catch(Pe){if(!(Pe instanceof s.default))throw Pe;return ne.call(this,Pe),await le.call(this,Pe.missingSchema),ee.call(this,ve)}}function ne({missingSchema:ve,missingRef:Pe}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Pe} cannot be resolved`)}async function le(ve){const Pe=await me.call(this,ve);this.refs[ve]||await F.call(this,Pe.$schema),this.refs[ve]||this.addSchema(Pe,ve,te)}async function me(ve){const Pe=this._loading[ve];if(Pe)return Pe;try{return await(this._loading[ve]=z(ve))}finally{delete this._loading[ve]}}}addSchema(B,te,z,$=this.opts.validateSchema){if(Array.isArray(B)){for(const ee of B)this.addSchema(ee,void 0,z,$);return this}let F;if(typeof B=="object"){const{schemaId:ee}=this.opts;if(F=B[ee],F!==void 0&&typeof F!="string")throw new Error(`schema ${ee} must be string`)}return te=(0,u.normalizeId)(te||F),this._checkUnique(te),this.schemas[te]=this._addSchema(B,z,te,$,!0),this}addMetaSchema(B,te,z=this.opts.validateSchema){return this.addSchema(B,te,!0,z),this}validateSchema(B,te){if(typeof B=="boolean")return!0;let z;if(z=B.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const $=this.validate(z,B);if(!$&&te){const F="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(F);else throw new Error(F)}return $}getSchema(B){let te;for(;typeof(te=x.call(this,B))=="string";)B=te;if(te===void 0){const{schemaId:z}=this.opts,$=new o.SchemaEnv({schema:{},schemaId:z});if(te=o.resolveSchema.call(this,$,B),!te)return;this.refs[B]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(B){if(B instanceof RegExp)return this._removeAllSchemas(this.schemas,B),this._removeAllSchemas(this.refs,B),this;switch(typeof B){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=x.call(this,B);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[B],delete this.refs[B],this}case"object":{const te=B;this._cache.delete(te);let z=B[this.opts.schemaId];return z&&(z=(0,u.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(B){for(const te of B)this.addKeyword(te);return this}addKeyword(B,te){let z;if(typeof B=="string")z=B,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=z);else if(typeof B=="object"&&te===void 0){if(te=B,z=te.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,z,te),!te)return(0,c.eachItem)(z,F=>L.call(this,F)),this;se.call(this,te);const $={...te,type:(0,l.getJSONTypes)(te.type),schemaType:(0,l.getJSONTypes)(te.schemaType)};return(0,c.eachItem)(z,$.type.length===0?F=>L.call(this,F,$):F=>$.type.forEach(ee=>L.call(this,F,$,ee))),this}getKeyword(B){const te=this.RULES.all[B];return typeof te=="object"?te.definition:!!te}removeKeyword(B){const{RULES:te}=this;delete te.keywords[B],delete te.all[B];for(const z of te.rules){const $=z.rules.findIndex(F=>F.keyword===B);$>=0&&z.rules.splice($,1)}return this}addFormat(B,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[B]=te,this}errorsText(B=this.errors,{separator:te=", ",dataVar:z="data"}={}){return!B||B.length===0?"No errors":B.map($=>`${z}${$.instancePath} ${$.message}`).reduce(($,F)=>$+te+F)}$dataMetaSchema(B,te){const z=this.RULES.all;B=JSON.parse(JSON.stringify(B));for(const $ of te){const F=$.split("/").slice(1);let ee=B;for(const ne of F)ee=ee[ne];for(const ne in z){const le=z[ne];if(typeof le!="object")continue;const{$data:me}=le.definition,ve=ee[ne];me&&ve&&(ee[ne]=re(ve))}}return B}_removeAllSchemas(B,te){for(const z in B){const $=B[z];(!te||te.test(z))&&(typeof $=="string"?delete B[z]:$&&!$.meta&&(this._cache.delete($.schema),delete B[z]))}}_addSchema(B,te,z,$=this.opts.validateSchema,F=this.opts.addUsedSchema){let ee;const{schemaId:ne}=this.opts;if(typeof B=="object")ee=B[ne];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof B!="boolean")throw new Error("schema must be object or boolean")}let le=this._cache.get(B);if(le!==void 0)return le;z=(0,u.normalizeId)(ee||z);const me=u.getSchemaRefs.call(this,B,z);return le=new o.SchemaEnv({schema:B,schemaId:ne,meta:te,baseId:z,localRefs:me}),this._cache.set(le.schema,le),F&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=le),$&&this.validateSchema(B,!0),le}_checkUnique(B){if(this.schemas[B]||this.refs[B])throw new Error(`schema with key or id "${B}" already exists`)}_compileSchemaEnv(B){if(B.meta?this._compileMetaSchema(B):o.compileSchema.call(this,B),!B.validate)throw new Error("ajv implementation error");return B.validate}_compileMetaSchema(B){const te=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,B)}finally{this.opts=te}}}t.default=v,v.ValidationError=n.default,v.MissingRefError=s.default;function S(W,B,te,z="error"){for(const $ in W){const F=$;F in B&&this.logger[z](`${te}: option ${$}. ${W[F]}`)}}function x(W){return W=(0,u.normalizeId)(W),this.schemas[W]||this.refs[W]}function D(){const W=this.opts.schemas;if(W)if(Array.isArray(W))this.addSchema(W);else for(const B in W)this.addSchema(W[B],B)}function w(){for(const W in this.opts.formats){const B=this.opts.formats[W];B&&this.addFormat(W,B)}}function b(W){if(Array.isArray(W)){this.addVocabulary(W);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const B in W){const te=W[B];te.keyword||(te.keyword=B),this.addKeyword(te)}}function T(){const W={...this.opts};for(const B of p)delete W[B];return W}const P={log(){},warn(){},error(){}};function C(W){if(W===!1)return P;if(W===void 0)return console;if(W.log&&W.warn&&W.error)return W;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function K(W,B){const{RULES:te}=this;if((0,c.eachItem)(W,z=>{if(te.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!k.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!B&&B.$data&&!("code"in B||"validate"in B))throw new Error('$data keyword must have "code" or "validate" function')}function L(W,B,te){var z;const $=B==null?void 0:B.post;if(te&&$)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:F}=this;let ee=$?F.post:F.rules.find(({type:le})=>le===te);if(ee||(ee={type:te,rules:[]},F.rules.push(ee)),F.keywords[W]=!0,!B)return;const ne={keyword:W,definition:{...B,type:(0,l.getJSONTypes)(B.type),schemaType:(0,l.getJSONTypes)(B.schemaType)}};B.before?q.call(this,ee,ne,B.before):ee.rules.push(ne),F.all[W]=ne,(z=B.implements)===null||z===void 0||z.forEach(le=>this.addKeyword(le))}function q(W,B,te){const z=W.rules.findIndex($=>$.keyword===te);z>=0?W.rules.splice(z,0,B):(W.rules.push(B),this.logger.warn(`rule ${te} is not defined`))}function se(W){let{metaSchema:B}=W;B!==void 0&&(W.$data&&this.opts.$data&&(B=re(B)),W.validateSchema=this.compile(B,!0))}const X={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function re(W){return{anyOf:[W,X]}}})(tq);var Gk={},Jk={},Xk={};Object.defineProperty(Xk,"__esModule",{value:!0});const yAe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Xk.default=yAe;var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.callRef=_p.getValidate=void 0;const gAe=zw,w8=Qt,Ns=rr,am=nc,_8=js,Nb=lr,vAe={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();const c=_8.resolveRef.call(u,l,s,r);if(c===void 0)throw new gAe.default(n.opts.uriResolver,s,r);if(c instanceof _8.SchemaEnv)return h(c);return f(c);function d(){if(i===l)return B1(t,o,i,i.$async);const p=e.scopeValue("root",{ref:l});return B1(t,(0,Ns._)`${p}.validate`,l,l.$async)}function h(p){const m=Tq(t,p);B1(t,m,p,p.$async)}function f(p){const m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ns.stringify)(p)}:{ref:p}),E=e.name("valid"),A=t.subschema({schema:p,dataTypes:[],schemaPath:Ns.nil,topSchemaRef:m,errSchemaPath:r},E);t.mergeEvaluated(A),t.ok(E)}}};function Tq(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ns._)`${r.scopeValue("wrapper",{ref:e})}.validate`}_p.getValidate=Tq;function B1(t,e,r,n){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,l=u.passContext?am.default.this:Ns.nil;n?c():d();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=s.let("valid");s.try(()=>{s.code((0,Ns._)`await ${(0,w8.callValidateCode)(t,e,l)}`),f(e),o||s.assign(p,!0)},m=>{s.if((0,Ns._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function d(){t.result((0,w8.callValidateCode)(t,e,l),()=>f(e),()=>h(e))}function h(p){const m=(0,Ns._)`${p}.errors`;s.assign(am.default.vErrors,(0,Ns._)`${am.default.vErrors} === null ? ${m} : ${am.default.vErrors}.concat(${m})`),s.assign(am.default.errors,(0,Ns._)`${am.default.vErrors}.length`)}function f(p){var m;if(!i.opts.unevaluated)return;const E=(m=r==null?void 0:r.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(i.props=Nb.mergeEvaluated.props(s,E.props,i.props));else{const A=s.var("props",(0,Ns._)`${p}.evaluated.props`);i.props=Nb.mergeEvaluated.props(s,A,i.props,Ns.Name)}if(i.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(i.items=Nb.mergeEvaluated.items(s,E.items,i.items));else{const A=s.var("items",(0,Ns._)`${p}.evaluated.items`);i.items=Nb.mergeEvaluated.items(s,A,i.items,Ns.Name)}}}_p.callRef=B1;_p.default=vAe;Object.defineProperty(Jk,"__esModule",{value:!0});const wAe=Xk,_Ae=_p,bAe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",wAe.default,_Ae.default];Jk.default=bAe;var Zk={},Yk={};Object.defineProperty(Yk,"__esModule",{value:!0});const zE=rr,rd=zE.operators,WE={maximum:{okStr:"<=",ok:rd.LTE,fail:rd.GT},minimum:{okStr:">=",ok:rd.GTE,fail:rd.LT},exclusiveMaximum:{okStr:"<",ok:rd.LT,fail:rd.GTE},exclusiveMinimum:{okStr:">",ok:rd.GT,fail:rd.LTE}},EAe={message:({keyword:t,schemaCode:e})=>(0,zE.str)`must be ${WE[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,zE._)`{comparison: ${WE[t].okStr}, limit: ${e}}`},AAe={keyword:Object.keys(WE),type:"number",schemaType:"number",$data:!0,error:EAe,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,zE._)`${r} ${WE[e].fail} ${n} || isNaN(${r})`)}};Yk.default=AAe;var Qk={};Object.defineProperty(Qk,"__esModule",{value:!0});const dv=rr,SAe={message:({schemaCode:t})=>(0,dv.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,dv._)`{multipleOf: ${t}}`},TAe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:SAe,code(t){const{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,dv._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,dv._)`${o} !== parseInt(${o})`;t.fail$data((0,dv._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Qk.default=TAe;var e$={},t$={};Object.defineProperty(t$,"__esModule",{value:!0});function Dq(t){const e=t.length;let r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}t$.default=Dq;Dq.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(e$,"__esModule",{value:!0});const Ch=rr,DAe=lr,xAe=t$,PAe={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,Ch.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Ch._)`{limit: ${t}}`},CAe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:PAe,code(t){const{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Ch.operators.GT:Ch.operators.LT,o=s.opts.unicode===!1?(0,Ch._)`${r}.length`:(0,Ch._)`${(0,DAe.useFunc)(t.gen,xAe.default)}(${r})`;t.fail$data((0,Ch._)`${o} ${i} ${n}`)}};e$.default=CAe;var r$={};Object.defineProperty(r$,"__esModule",{value:!0});const IAe=Qt,GE=rr,kAe={message:({schemaCode:t})=>(0,GE.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,GE._)`{pattern: ${t}}`},$Ae={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:kAe,code(t){const{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,GE._)`(new RegExp(${s}, ${o}))`:(0,IAe.usePattern)(t,n);t.fail$data((0,GE._)`!${a}.test(${e})`)}};r$.default=$Ae;var n$={};Object.defineProperty(n$,"__esModule",{value:!0});const fv=rr,OAe={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,fv.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,fv._)`{limit: ${t}}`},RAe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:OAe,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?fv.operators.GT:fv.operators.LT;t.fail$data((0,fv._)`Object.keys(${r}).length ${s} ${n}`)}};n$.default=RAe;var i$={};Object.defineProperty(i$,"__esModule",{value:!0});const i0=Qt,hv=rr,NAe=lr,BAe={message:({params:{missingProperty:t}})=>(0,hv.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,hv._)`{missingProperty: ${t}}`},FAe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:BAe,code(t){const{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;const u=r.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const f=t.parentSchema.properties,{definedProperties:p}=t.it;for(const m of r)if((f==null?void 0:f[m])===void 0&&!p.has(m)){const E=o.schemaEnv.baseId+o.errSchemaPath,A=`required property "${m}" is not defined at "${E}" (strictRequired)`;(0,NAe.checkStrictMode)(o,A,o.opts.strictRequired)}}function l(){if(u||i)t.block$data(hv.nil,d);else for(const f of r)(0,i0.checkReportMissingProp)(t,f)}function c(){const f=e.let("missing");if(u||i){const p=e.let("valid",!0);t.block$data(p,()=>h(f,p)),t.ok(p)}else e.if((0,i0.checkMissingProp)(t,r,f)),(0,i0.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,i0.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function h(f,p){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(p,(0,i0.propertyInData)(e,s,f,a.ownProperties)),e.if((0,hv.not)(p),()=>{t.error(),e.break()})},hv.nil)}}};i$.default=FAe;var s$={};Object.defineProperty(s$,"__esModule",{value:!0});const pv=rr,MAe={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,pv.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,pv._)`{limit: ${t}}`},jAe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:MAe,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?pv.operators.GT:pv.operators.LT;t.fail$data((0,pv._)`${r}.length ${s} ${n}`)}};s$.default=jAe;var o$={};Object.defineProperty(o$,"__esModule",{value:!0});const oD=qw,Ti=rr,UAe=lr,LAe=Ow,KAe={message:({params:{i:t,j:e}})=>(0,Ti.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Ti._)`{i: ${t}, j: ${e}}`},VAe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:KAe,code(t){const{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;const u=e.let("valid"),l=i.items?(0,oD.getSchemaTypes)(i.items):[];t.block$data(u,c,(0,Ti._)`${o} === false`),t.ok(u);function c(){const p=e.let("i",(0,Ti._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Ti._)`${p} > 1`,()=>(d()?h:f)(p,m))}function d(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){const E=e.name("item"),A=(0,oD.checkDataTypes)(l,E,a.opts.strictNumbers,oD.DataType.Wrong),_=e.const("indices",(0,Ti._)`{}`);e.for((0,Ti._)`;${p}--;`,()=>{e.let(E,(0,Ti._)`${r}[${p}]`),e.if(A,(0,Ti._)`continue`),l.length>1&&e.if((0,Ti._)`typeof ${E} == "string"`,(0,Ti._)`${E} += "_"`),e.if((0,Ti._)`typeof ${_}[${E}] == "number"`,()=>{e.assign(m,(0,Ti._)`${_}[${E}]`),t.error(),e.assign(u,!1).break()}).code((0,Ti._)`${_}[${E}] = ${p}`)})}function f(p,m){const E=(0,UAe.useFunc)(e,LAe.default),A=e.name("outer");e.label(A).for((0,Ti._)`;${p}--;`,()=>e.for((0,Ti._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Ti._)`${E}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(A)})))}}};o$.default=VAe;var a$={};Object.defineProperty(a$,"__esModule",{value:!0});const AP=rr,qAe=lr,HAe=Ow,zAe={message:"must be equal to constant",params:({schemaCode:t})=>(0,AP._)`{allowedValue: ${t}}`},WAe={keyword:"const",$data:!0,error:zAe,code(t){const{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,AP._)`!${(0,qAe.useFunc)(e,HAe.default)}(${r}, ${s})`):t.fail((0,AP._)`${i} !== ${r}`)}};a$.default=WAe;var u$={};Object.defineProperty(u$,"__esModule",{value:!0});const R0=rr,GAe=lr,JAe=Ow,XAe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,R0._)`{allowedValues: ${t}}`},ZAe={keyword:"enum",schemaType:"array",$data:!0,error:XAe,code(t){const{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,GAe.useFunc)(e,JAe.default));let c;if(a||n)c=e.let("valid"),t.block$data(c,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const f=e.const("vSchema",i);c=(0,R0.or)(...s.map((p,m)=>h(f,m)))}t.pass(c);function d(){e.assign(c,!1),e.forOf("v",i,f=>e.if((0,R0._)`${l()}(${r}, ${f})`,()=>e.assign(c,!0).break()))}function h(f,p){const m=s[p];return typeof m=="object"&&m!==null?(0,R0._)`${l()}(${r}, ${f}[${p}])`:(0,R0._)`${r} === ${m}`}}};u$.default=ZAe;Object.defineProperty(Zk,"__esModule",{value:!0});const YAe=Yk,QAe=Qk,eSe=e$,tSe=r$,rSe=n$,nSe=i$,iSe=s$,sSe=o$,oSe=a$,aSe=u$,uSe=[YAe.default,QAe.default,eSe.default,tSe.default,rSe.default,nSe.default,iSe.default,sSe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},oSe.default,aSe.default];Zk.default=uSe;var c$={},Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});Wy.validateAdditionalItems=void 0;const Ih=rr,SP=lr,cSe={message:({params:{len:t}})=>(0,Ih.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ih._)`{limit: ${t}}`},lSe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:cSe,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,SP.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}xq(t,n)}};function xq(t,e){const{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;const a=r.const("len",(0,Ih._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Ih._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,SP.alwaysValidSchema)(o,n)){const l=r.var("valid",(0,Ih._)`${a} <= ${e.length}`);r.if((0,Ih.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,a,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:SP.Type.Num},l),o.allErrors||r.if((0,Ih.not)(l),()=>r.break())})}}Wy.validateAdditionalItems=xq;Wy.default=lSe;var l$={},Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.validateTuple=void 0;const b8=rr,F1=lr,dSe=Qt,fSe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return Pq(t,"additionalItems",e);r.items=!0,!(0,F1.alwaysValidSchema)(r,e)&&t.ok((0,dSe.validateArray)(t))}};function Pq(t,e,r=t.schema){const{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=F1.mergeEvaluated.items(n,r.length,a.items));const u=n.name("valid"),l=n.const("len",(0,b8._)`${i}.length`);r.forEach((d,h)=>{(0,F1.alwaysValidSchema)(a,d)||(n.if((0,b8._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function c(d){const{opts:h,errSchemaPath:f}=a,p=r.length,m=p===d.minItems&&(p===d.maxItems||d[e]===!1);if(h.strictTuples&&!m){const E=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,F1.checkStrictMode)(a,E,h.strictTuples)}}}Gy.validateTuple=Pq;Gy.default=fSe;Object.defineProperty(l$,"__esModule",{value:!0});const hSe=Gy,pSe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,hSe.validateTuple)(t,"items")};l$.default=pSe;var d$={};Object.defineProperty(d$,"__esModule",{value:!0});const E8=rr,mSe=lr,ySe=Qt,gSe=Wy,vSe={message:({params:{len:t}})=>(0,E8.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,E8._)`{limit: ${t}}`},wSe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:vSe,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,mSe.alwaysValidSchema)(n,e)&&(s?(0,gSe.validateAdditionalItems)(t,s):t.ok((0,ySe.validateArray)(t)))}};d$.default=wSe;var f$={};Object.defineProperty(f$,"__esModule",{value:!0});const qo=rr,Bb=lr,_Se={message:({params:{min:t,max:e}})=>e===void 0?(0,qo.str)`must contain at least ${t} valid item(s)`:(0,qo.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,qo._)`{minContains: ${t}}`:(0,qo._)`{minContains: ${t}, maxContains: ${e}}`},bSe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_Se,code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;let o,a;const{minContains:u,maxContains:l}=n;i.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=e.const("len",(0,qo._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Bb.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Bb.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Bb.alwaysValidSchema)(i,r)){let m=(0,qo._)`${c} >= ${o}`;a!==void 0&&(m=(0,qo._)`${m} && ${c} <= ${a}`),t.pass(m);return}i.items=!0;const d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,qo._)`${s}.length > 0`,h)):(e.let(d,!1),h()),t.result(d,()=>t.reset());function h(){const m=e.name("_valid"),E=e.let("count",0);f(m,()=>e.if(m,()=>p(E)))}function f(m,E){e.forRange("i",0,c,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:Bb.Type.Num,compositeRule:!0},m),E()})}function p(m){e.code((0,qo._)`${m}++`),a===void 0?e.if((0,qo._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,qo._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,qo._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};f$.default=bSe;var Cq={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=rr,r=lr,n=Qt;t.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const d=l===1?"property":"properties";return(0,e.str)`must have ${d} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:d}})=>(0,e._)`{property: ${u},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${c}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(u){const[l,c]=i(u);o(u,l),a(u,c)}};function i({schema:u}){const l={},c={};for(const d in u){if(d==="__proto__")continue;const h=Array.isArray(u[d])?l:c;h[d]=u[d]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:d,it:h}=u;if(Object.keys(l).length===0)return;const f=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const E=(0,n.propertyInData)(c,d,p,h.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),h.allErrors?c.if(E,()=>{for(const A of m)(0,n.checkReportMissingProp)(u,A)}):(c.if((0,e._)`${E} && (${(0,n.checkMissingProp)(u,m,f)})`),(0,n.reportMissingProp)(u,f),c.else())}}t.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:d,keyword:h,it:f}=u,p=c.name("valid");for(const m in l)(0,r.alwaysValidSchema)(f,l[m])||(c.if((0,n.propertyInData)(c,d,m,f.opts.ownProperties),()=>{const E=u.subschema({keyword:h,schemaProp:m},p);u.mergeValidEvaluated(E,p)},()=>c.var(p,!0)),u.ok(p))}t.validateSchemaDeps=a,t.default=s})(Cq);var h$={};Object.defineProperty(h$,"__esModule",{value:!0});const Iq=rr,ESe=lr,ASe={message:"property name must be valid",params:({params:t})=>(0,Iq._)`{propertyName: ${t.propertyName}}`},SSe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ASe,code(t){const{gen:e,schema:r,data:n,it:s}=t;if((0,ESe.alwaysValidSchema)(s,r))return;const i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,Iq.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};h$.default=SSe;var PS={};Object.defineProperty(PS,"__esModule",{value:!0});const Fb=Qt,wa=rr,TSe=nc,Mb=lr,DSe={message:"must NOT have additional properties",params:({params:t})=>(0,wa._)`{additionalProperty: ${t.additionalProperty}}`},xSe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:DSe,code(t){const{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Mb.alwaysValidSchema)(o,r))return;const l=(0,Fb.allSchemaProperties)(n.properties),c=(0,Fb.allSchemaProperties)(n.patternProperties);d(),t.ok((0,wa._)`${i} === ${TSe.default.errors}`);function d(){e.forIn("key",s,E=>{!l.length&&!c.length?p(E):e.if(h(E),()=>p(E))})}function h(E){let A;if(l.length>8){const _=(0,Mb.schemaRefOrVal)(o,n.properties,"properties");A=(0,Fb.isOwnProperty)(e,_,E)}else l.length?A=(0,wa.or)(...l.map(_=>(0,wa._)`${E} === ${_}`)):A=wa.nil;return c.length&&(A=(0,wa.or)(A,...c.map(_=>(0,wa._)`${(0,Fb.usePattern)(t,_)}.test(${E})`))),(0,wa.not)(A)}function f(E){e.code((0,wa._)`delete ${s}[${E}]`)}function p(E){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Mb.alwaysValidSchema)(o,r)){const A=e.name("valid");u.removeAdditional==="failing"?(m(E,A,!1),e.if((0,wa.not)(A),()=>{t.reset(),f(E)})):(m(E,A),a||e.if((0,wa.not)(A),()=>e.break()))}}function m(E,A,_){const g={keyword:"additionalProperties",dataProp:E,dataPropType:Mb.Type.Str};_===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,A)}}};PS.default=xSe;var p$={};Object.defineProperty(p$,"__esModule",{value:!0});const PSe=Fa,A8=Qt,aD=lr,S8=PS,CSe={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&S8.default.code(new PSe.KeywordCxt(i,S8.default,"additionalProperties"));const o=(0,A8.allSchemaProperties)(r);for(const d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=aD.mergeEvaluated.props(e,(0,aD.toHash)(o),i.props));const a=o.filter(d=>!(0,aD.alwaysValidSchema)(i,r[d]));if(a.length===0)return;const u=e.name("valid");for(const d of a)l(d)?c(d):(e.if((0,A8.propertyInData)(e,s,d,i.opts.ownProperties)),c(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function c(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};p$.default=CSe;var m$={};Object.defineProperty(m$,"__esModule",{value:!0});const T8=Qt,jb=rr,D8=lr,x8=lr,ISe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,T8.allSchemaProperties)(r),u=a.filter(m=>(0,D8.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");i.props!==!0&&!(i.props instanceof jb.Name)&&(i.props=(0,x8.evaluatedPropsToName)(e,i.props));const{props:d}=i;h();function h(){for(const m of a)l&&f(m),i.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function f(m){for(const E in l)new RegExp(m).test(E)&&(0,D8.checkStrictMode)(i,`property ${E} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,E=>{e.if((0,jb._)`${(0,T8.usePattern)(t,m)}.test(${E})`,()=>{const A=u.includes(m);A||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:E,dataPropType:x8.Type.Str},c),i.opts.unevaluated&&d!==!0?e.assign((0,jb._)`${d}[${E}]`,!0):!A&&!i.allErrors&&e.if((0,jb.not)(c),()=>e.break())})})}}};m$.default=ISe;var y$={};Object.defineProperty(y$,"__esModule",{value:!0});const kSe=lr,$Se={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,kSe.alwaysValidSchema)(n,r)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};y$.default=$Se;var g$={};Object.defineProperty(g$,"__esModule",{value:!0});const OSe=Qt,RSe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:OSe.validateUnion,error:{message:"must match a schema in anyOf"}};g$.default=RSe;var v$={};Object.defineProperty(v$,"__esModule",{value:!0});const M1=rr,NSe=lr,BSe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,M1._)`{passingSchemas: ${t.passing}}`},FSe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:BSe,code(t){const{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((c,d)=>{let h;(0,NSe.alwaysValidSchema)(s,c)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,M1._)`${u} && ${o}`).assign(o,!1).assign(a,(0,M1._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),h&&t.mergeEvaluated(h,M1.Name)})})}}};v$.default=FSe;var w$={};Object.defineProperty(w$,"__esModule",{value:!0});const MSe=lr,jSe={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=e.name("valid");r.forEach((i,o)=>{if((0,MSe.alwaysValidSchema)(n,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};w$.default=jSe;var _$={};Object.defineProperty(_$,"__esModule",{value:!0});const JE=rr,kq=lr,USe={message:({params:t})=>(0,JE.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,JE._)`{failingKeyword: ${t.ifClause}}`},LSe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:USe,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,kq.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=P8(n,"then"),i=P8(n,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,l("then",c),l("else",c))}else s?e.if(a,l("then")):e.if((0,JE.not)(a),l("else"));t.pass(o,()=>t.error(!0));function u(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function l(c,d){return()=>{const h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),d?e.assign(d,(0,JE._)`${c}`):t.setParams({ifClause:c})}}}};function P8(t,e){const r=t.schema[e];return r!==void 0&&!(0,kq.alwaysValidSchema)(t,r)}_$.default=LSe;var b$={};Object.defineProperty(b$,"__esModule",{value:!0});const KSe=lr,VSe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,KSe.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};b$.default=VSe;Object.defineProperty(c$,"__esModule",{value:!0});const qSe=Wy,HSe=l$,zSe=Gy,WSe=d$,GSe=f$,JSe=Cq,XSe=h$,ZSe=PS,YSe=p$,QSe=m$,e2e=y$,t2e=g$,r2e=v$,n2e=w$,i2e=_$,s2e=b$;function o2e(t=!1){const e=[e2e.default,t2e.default,r2e.default,n2e.default,i2e.default,s2e.default,XSe.default,ZSe.default,JSe.default,YSe.default,QSe.default];return t?e.push(HSe.default,WSe.default):e.push(qSe.default,zSe.default),e.push(GSe.default),e}c$.default=o2e;var E$={},A$={};Object.defineProperty(A$,"__esModule",{value:!0});const En=rr,a2e={message:({schemaCode:t})=>(0,En.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,En._)`{format: ${t}}`},u2e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:a2e,code(t,e){const{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:l,schemaEnv:c,self:d}=a;if(!u.validateFormats)return;s?h():f();function h(){const p=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),m=r.const("fDef",(0,En._)`${p}[${o}]`),E=r.let("fType"),A=r.let("format");r.if((0,En._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(E,(0,En._)`${m}.type || "string"`).assign(A,(0,En._)`${m}.validate`),()=>r.assign(E,(0,En._)`"string"`).assign(A,m)),t.fail$data((0,En.or)(_(),g()));function _(){return u.strictSchema===!1?En.nil:(0,En._)`${o} && !${A}`}function g(){const v=c.$async?(0,En._)`(${m}.async ? await ${A}(${n}) : ${A}(${n}))`:(0,En._)`${A}(${n})`,S=(0,En._)`(typeof ${A} == "function" ? ${v} : ${A}.test(${n}))`;return(0,En._)`${A} && ${A} !== true && ${E} === ${e} && !${S}`}}function f(){const p=d.formats[i];if(!p){_();return}if(p===!0)return;const[m,E,A]=g(p);m===e&&t.pass(v());function _(){if(u.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function g(S){const x=S instanceof RegExp?(0,En.regexpCode)(S):u.code.formats?(0,En._)`${u.code.formats}${(0,En.getProperty)(i)}`:void 0,D=r.scopeValue("formats",{key:i,ref:S,code:x});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,En._)`${D}.validate`]:["string",S,D]}function v(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,En._)`await ${A}(${n})`}return typeof E=="function"?(0,En._)`${A}(${n})`:(0,En._)`${A}.test(${n})`}}}};A$.default=u2e;Object.defineProperty(E$,"__esModule",{value:!0});const c2e=A$,l2e=[c2e.default];E$.default=l2e;var _y={};Object.defineProperty(_y,"__esModule",{value:!0});_y.contentVocabulary=_y.metadataVocabulary=void 0;_y.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];_y.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Gk,"__esModule",{value:!0});const d2e=Jk,f2e=Zk,h2e=c$,p2e=E$,C8=_y,m2e=[d2e.default,f2e.default,(0,h2e.default)(),p2e.default,C8.metadataVocabulary,C8.contentVocabulary];Gk.default=m2e;var S$={},$q={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})($q);Object.defineProperty(S$,"__esModule",{value:!0});const _m=rr,TP=$q,I8=js,y2e=lr,g2e={message:({params:{discrError:t,tagName:e}})=>t===TP.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,_m._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},v2e={keyword:"discriminator",type:"object",schemaType:"object",error:g2e,code(t){const{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=e.let("valid",!1),l=e.const("tag",(0,_m._)`${r}${(0,_m.getProperty)(a)}`);e.if((0,_m._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:TP.DiscrError.Tag,tag:l,tagName:a})),t.ok(u);function c(){const f=h();e.if(!1);for(const p in f)e.elseIf((0,_m._)`${l} === ${p}`),e.assign(u,d(f[p]));e.else(),t.error(!1,{discrError:TP.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){const p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},p);return t.mergeEvaluated(m,_m.Name),p}function h(){var f;const p={},m=A(s);let E=!0;for(let v=0;v<o.length;v++){let S=o[v];S!=null&&S.$ref&&!(0,y2e.schemaHasRulesButRef)(S,i.self.RULES)&&(S=I8.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,S==null?void 0:S.$ref),S instanceof I8.SchemaEnv&&(S=S.schema));const x=(f=S==null?void 0:S.properties)===null||f===void 0?void 0:f[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);E=E&&(m||A(S)),_(x,v)}if(!E)throw new Error(`discriminator: "${a}" must be required`);return p;function A({required:v}){return Array.isArray(v)&&v.includes(a)}function _(v,S){if(v.const)g(v.const,S);else if(v.enum)for(const x of v.enum)g(x,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(v,S){if(typeof v!="string"||v in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[v]=S}}}};S$.default=v2e;const w2e="http://json-schema.org/draft-07/schema#",_2e="http://json-schema.org/draft-07/schema#",b2e="Core schema meta-schema",E2e={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},A2e=["object","boolean"],S2e={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},T2e={$schema:w2e,$id:_2e,title:b2e,definitions:E2e,type:A2e,properties:S2e,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const r=tq,n=Gk,s=S$,i=T2e,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.exports=e=u,Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var l=Fa;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=rr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=Hw;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=zw;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(_P,_P.exports);var D2e=_P.exports;const x2e=Zu(D2e);class Lo extends qu{constructor(r,n,s,i){super(r,n,s);Se(this,"validNext",new Set(["quote","close"]));Se(this,"kind","rfq");Se(this,"metadata");Se(this,"data");Se(this,"privateData");this.metadata=r,this.data=n,this.privateData=i}static async parse(r,n){const s=aa.rawToMessageModel(r),i=new Lo(s.metadata,s.data,s.signature,s.privateData);return await i.verify(),n!=null&&n.requireAllPrivateData?i.verifyAllPrivateData():i.verifyPresentPrivateData(),i}validate(){super.validate(),this.privateData!==void 0&&Mv(this.privateData,"rfqPrivate")}static create(r){const n=qu.generateId("rfq"),s={...r.metadata,kind:"rfq",id:n,exchangeId:n,createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},{data:i,privateData:o}=Lo.hashPrivateData(r.data),a=new Lo(s,i,void 0,o);return a.validateData(),a}static hashPrivateData(r){const n=_a.uint8Array(mue(16)).toBase64Url(),{claims:s,payin:i,payout:o,...a}=r,{paymentDetails:u,...l}=i,{paymentDetails:c,...d}=o,h={...a,payin:l,payout:d};return u!==void 0&&(h.payin.paymentDetailsHash=Lo.digestPrivateData(n,u)),c!==void 0&&(h.payout.paymentDetailsHash=Lo.digestPrivateData(n,c)),s!==void 0&&(s==null?void 0:s.length)>0&&(h.claimsHash=Lo.digestPrivateData(n,s)),{data:h,privateData:{salt:n,payin:{paymentDetails:u},payout:{paymentDetails:c},claims:s}}}verifyAllPrivateData(){if(this.privateData===void 0)throw new Error("Could not verify all privateData because privateData property is missing");this.data.payin.paymentDetailsHash!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.verifyClaimsHash()}verifyPresentPrivateData(){var r,n,s,i,o;this.data.payin.paymentDetailsHash!==void 0&&((n=(r=this.privateData)==null?void 0:r.payin)==null?void 0:n.paymentDetails)!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&((i=(s=this.privateData)==null?void 0:s.payout)==null?void 0:i.paymentDetails)!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&((o=this.privateData)==null?void 0:o.claims)!==void 0&&this.verifyClaimsHash()}verifyPayinDetailsHash(){var n,s;if(Lo.digestPrivateData(this.privateData.salt,(s=(n=this.privateData)==null?void 0:n.payin)==null?void 0:s.paymentDetails)!==this.data.payin.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payin.paymentDetailsHash does not match digest of privateData.payin.paymentDetails")}verifyPayoutDetailsHash(){var n,s;if(Lo.digestPrivateData(this.privateData.salt,(s=(n=this.privateData)==null?void 0:n.payout)==null?void 0:s.paymentDetails)!==this.data.payout.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payout.paymentDetailsHash does not match digest of privateData.payout.paymentDetails")}verifyClaimsHash(){var i;const r=this.data.claimsHash,n=(i=this.privateData)==null?void 0:i.claims;if(Lo.digestPrivateData(this.privateData.salt,n)!==r)throw new Error("Private data integrity check failed: data.claimsHash does not match digest of privateData.claims")}static digestPrivateData(r,n){const s=[r,n],i=Yh.digest(s);return _a.uint8Array(i).toBase64Url()}async verifyOfferingRequirements(r){var s,i,o,a;if(r.metadata.protocol!==this.metadata.protocol)throw new Error(`protocol version mismatch. (rfq) ${this.metadata.protocol} !== ${r.metadata.protocol} (offering)`);if(r.metadata.id!==this.data.offeringId)throw new Error(`offering id mismatch. (rfq) ${this.data.offeringId} !== ${r.metadata.id} (offering)`);let n;if(r.data.payin.max){n=ub(this.data.payin.amount);const u=ub(r.data.payin.max);if(n.isGreaterThan(u))throw new Error(`rfq payinAmount exceeds offering's maxAmount. (rfq) ${this.data.payin.amount} > ${r.data.payin.max} (offering)`)}if(r.data.payin.min){n??(n=ub(this.data.payin.amount));const u=ub(r.data.payin.min);if(n.isLessThan(u))throw new Error(`rfq payinAmount is below offering's minAmount. (rfq) ${this.data.payin.amount} > ${r.data.payin.min} (offering)`)}this.verifyPaymentMethod(this.data.payin.kind,this.data.payin.paymentDetailsHash,(i=(s=this.privateData)==null?void 0:s.payin)==null?void 0:i.paymentDetails,r.data.payin.methods,"payin"),this.verifyPaymentMethod(this.data.payout.kind,this.data.payout.paymentDetailsHash,(a=(o=this.privateData)==null?void 0:o.payout)==null?void 0:a.paymentDetails,r.data.payout.methods,"payout"),await this.verifyClaims(r)}verifyPaymentMethod(r,n,s,i,o){const a=i.filter(c=>c.kind===r);if(!a.length){const c=i.map(d=>d.kind).join(", ");throw new Error(`offering does not support rfq's ${o}Method kind. (rfq) ${r} was not found in: [${c}] (offering)`)}const u=new x2e.default,l=new Set;for(const c of a)if(c.requiredPaymentDetails){const d=u.compile(c.requiredPaymentDetails);if(d(s))return;l.add(d.errors)}else{if(n===void 0)return;l.add(new Error("paymentDetails must be omitted when requiredPaymentDetails is omitted"))}throw new Error(`rfq ${o}Method paymentDetails could not be validated against offering requiredPaymentDetails. Schema validation errors: ${Array.from(l).join()}`)}async verifyClaims(r){var s;if(!r.data.requiredClaims)return;const n=UE.selectCredentials({vcJwts:((s=this.privateData)==null?void 0:s.claims)??[],presentationDefinition:r.data.requiredClaims});if(n.length===0)throw new Error("claims do not fulfill the offering's requirements");for(let i of n)await qE.verify({vcJwt:i})}toJSON(){const r=super.toJSON();return this.privateData!==void 0&&(r.privateData=this.privateData),r}}class XE extends qu{constructor(r,n,s){super(r,n,s);Se(this,"validNext",new Set(["order","close"]));Se(this,"kind","quote");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToMessageModel(r),s=new XE(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"quote",id:qu.generateId("quote"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new XE(n,r.data);return s.validateData(),s}}class tw extends qu{constructor(r,n,s){super(r,n,s);Se(this,"validNext",new Set(["orderstatus"]));Se(this,"kind","order");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToMessageModel(r),s=new tw(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"order",id:qu.generateId("order"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new tw(n,{});return s.validateData(),s}}class ZE extends qu{constructor(r,n,s){super(r,n,s);Se(this,"validNext",new Set(["orderstatus","close"]));Se(this,"kind","orderstatus");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToMessageModel(r),s=new ZE(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"orderstatus",id:qu.generateId("orderstatus"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new ZE(n,r.data);return s.validateData(),s}get orderStatus(){return this.data.orderStatus}}class by extends qu{constructor(r,n,s){super(r,n,s);Se(this,"validNext",new Set([]));Se(this,"kind","close");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToMessageModel(r),s=new by(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"close",id:qu.generateId("close"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new by(n,r.data);return s.validateData(),s}get reason(){return this.data.reason}}class aa{constructor(){}static async parseMessage(e){const r=aa.rawToMessageModel(e);let n;switch(r.metadata.kind){case"rfq":n=new Lo(r.metadata,r.data,r.signature,r.privateData);break;case"quote":n=new XE(r.metadata,r.data,r.signature);break;case"order":n=new tw(r.metadata,r.data,r.signature);break;case"orderstatus":n=new ZE(r.metadata,r.data,r.signature);break;case"close":n=new by(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized message kind (${r.metadata.kind})`)}return await n.verify(),n}static async parseResource(e){const r=aa.rawToResourceModel(e);let n;switch(r.metadata.kind){case"offering":n=new rw(r.metadata,r.data,r.signature);break;case"balance":n=new YE(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized resource kind (${r.metadata.kind})`)}return await n.verify(),n}static rawToMessageModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){const n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse message. Error: ${n}`)}}static rawToResourceModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){const n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse resource. Error: ${n}`)}}}class rw extends AE{constructor(r,n,s){super(r,n,s);Se(this,"kind","offering");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToResourceModel(r),s=new rw(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"offering",id:AE.generateId("offering"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new rw(n,r.data);return s.validateData(),s}}class YE extends AE{constructor(r,n,s){super(r,n,s);Se(this,"kind","balance");Se(this,"metadata");Se(this,"data");this.metadata=r,this.data=n}static async parse(r){const n=aa.rawToResourceModel(r),s=new YE(n.metadata,n.data,n.signature);return await s.verify(),s}static create(r){const n={...r.metadata,kind:"balance",id:AE.generateId("balance"),createdAt:new Date().toISOString(),protocol:r.metadata.protocol??"1.0"},s=new YE(n,r.data);return s.validateData(),s}}class s0 extends Error{constructor(r){super(r.message,{cause:r.cause});Se(this,"recipientDid");Se(this,"url");this.name=this.constructor.name,this.recipientDid=r.recipientDid,this.url=r.url}}class o0 extends Error{constructor(r){super();Se(this,"statusCode");Se(this,"details");Se(this,"recipientDid");Se(this,"url");this.name=this.constructor.name,this.statusCode=r.statusCode,this.details=r.details,this.recipientDid=r.recipientDid,this.url=r.url}}class Oq extends Error{constructor(e){super(e),this.name=this.constructor.name}}class P2e extends Oq{}class C2e extends Oq{}class Ww extends Error{constructor(e){super(e.message,{cause:e.cause}),this.name=this.constructor.name}}class I2e extends Ww{}class k2e extends Ww{}class $2e extends Ww{}class O2e extends Ww{}class R2e extends Ww{}var k8;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(k8||(k8={}));var $8;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})($8||($8={}));function N2e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var B2e=N2e,F2e=B2e;const M2e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let j2e=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},U2e=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rq(this,e)}},L2e=class{constructor(e){this.decoders=e}or(e){return Rq(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Rq=(t,e)=>new L2e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let K2e=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new j2e(e,r,n),this.decoder=new U2e(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Nq=({name:t,prefix:e,encode:r,decode:n})=>new K2e(t,e,r,n),Bq=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=F2e(r,e);return Nq({prefix:t,name:e,encode:n,decode:i=>M2e(s(i))})},V2e=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},q2e=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},wo=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Nq({prefix:e,name:t,encode(s){return q2e(s,n,r)},decode(s){return V2e(s,n,r,t)}});wo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});wo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});wo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});wo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});wo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});wo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});wo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});wo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});wo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});Bq({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Bq({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});wo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});wo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});wo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});wo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});new TextEncoder;new TextDecoder;var H2e=Fq,O8=128,z2e=127,W2e=~z2e,G2e=Math.pow(2,31);function Fq(t,e,r){e=e||[],r=r||0;for(var n=r;t>=G2e;)e[r++]=t&255|O8,t/=128;for(;t&W2e;)e[r++]=t&255|O8,t>>>=7;return e[r]=t|0,Fq.bytes=r-n+1,e}var J2e=DP,X2e=128,R8=127;function DP(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw DP.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&R8)<<s:(o&R8)*Math.pow(2,s),s+=7}while(o>=X2e);return DP.bytes=i-n,r}var Z2e=Math.pow(2,7),Y2e=Math.pow(2,14),Q2e=Math.pow(2,21),eTe=Math.pow(2,28),tTe=Math.pow(2,35),rTe=Math.pow(2,42),nTe=Math.pow(2,49),iTe=Math.pow(2,56),sTe=Math.pow(2,63),oTe=function(t){return t<Z2e?1:t<Y2e?2:t<Q2e?3:t<eTe?4:t<tTe?5:t<rTe?6:t<nTe?7:t<iTe?8:t<sTe?9:10},aTe={encode:H2e,decode:J2e,encodingLength:oTe},QE=aTe;const N8=(t,e=0)=>[QE.decode(t,e),QE.decode.bytes],uTe=(t,e,r=0)=>(QE.encode(t,e,r),e),cTe=t=>QE.encodingLength(t);let If=class bd{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=bd.codeToName.has(n)?n:bd.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=cTe(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),uTe(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=N8(r);return n}static getCodeFromName(e){const{name:r}=e,n=bd.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=bd.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){bd.codeToName.set(e.code,e.name),bd.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=N8(r),i=bd.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};If.codeToName=new Map;If.nameToCode=new Map;If.registerCodec({code:237,name:"ed25519-pub"});If.registerCodec({code:4864,name:"ed25519-priv"});If.registerCodec({code:236,name:"x25519-pub"});If.registerCodec({code:4866,name:"x25519-priv"});If.registerCodec({code:231,name:"secp256k1-pub"});If.registerCodec({code:4865,name:"secp256k1-priv"});function lTe({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t==null?void 0:t.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}var B8;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(B8||(B8={}));var io;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(io||(io={}));var F8;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(F8||(F8={}));io.Ed25519,io.secp256k1,io.secp256r1,io.secp256r1,io.secp256k1,io.secp256r1,io.X25519;io.Ed25519+"",io.secp256k1+"",io.secp256r1+"",io.X25519+"";var Cd;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Cd||(Cd={}));Cd.Ed25519,Cd.secp256k1,Cd.secp256r1,Cd.secp256r1,Cd.secp256k1,Cd.secp256r1;var Oc;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Oc||(Oc={}));Oc.Ed25519,Oc.secp256k1,Oc.secp256r1,Oc.secp256r1,Oc.secp256k1,Oc.secp256r1,Oc.X25519;const Mq="%[a-f0-9]{2}",M8=new RegExp("("+Mq+")|([^%]+?)","gi"),j8=new RegExp("("+Mq+")+","gi");function xP(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],xP(r),xP(n))}function dTe(t){try{return decodeURIComponent(t)}catch{let e=t.match(M8)||[];for(let r=1;r<e.length;r++)t=xP(e,r).join(""),e=t.match(M8)||[];return t}}function fTe(t){const e={"%FE%FF":"��","%FF%FE":"��"};let r=j8.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{const s=dTe(r[0]);s!==r[0]&&(e[r[0]]=s)}r=j8.exec(t)}e["%C2"]="�";const n=Object.keys(e);for(const s of n)t=t.replace(new RegExp(s,"g"),e[s]);return t}function hTe(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return fTe(t)}}function jq(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}function pTe(t,e){const r={};if(Array.isArray(e))for(const n of e){const s=Object.getOwnPropertyDescriptor(t,n);s!=null&&s.enumerable&&Object.defineProperty(r,n,s)}else for(const n of Reflect.ownKeys(t)){const s=Object.getOwnPropertyDescriptor(t,n);if(s.enumerable){const i=t[n];e(n,i,t)&&Object.defineProperty(r,n,s)}}return r}const mTe=t=>t==null,yTe=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),PP=Symbol("encodeFragmentIdentifier");function gTe(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const s=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[In(e,t),"[",s,"]"].join("")]:[...r,[In(e,t),"[",In(s,t),"]=",In(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[In(e,t),"[]"].join("")]:[...r,[In(e,t),"[]=",In(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[In(e,t),":list="].join("")]:[...r,[In(e,t),":list=",In(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,s)=>s===void 0||t.skipNull&&s===null||t.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[In(r,t),e,In(s,t)].join("")]:[[n,In(s,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,In(e,t)]:[...r,[In(e,t),"=",In(n,t)].join("")]}}function vTe(t){let e;switch(t.arrayFormat){case"index":return(r,n,s)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){s[r]=n;return}s[r]===void 0&&(s[r]={}),s[r][e[1]]=n};case"bracket":return(r,n,s)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"colon-list-separator":return(r,n,s)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"comma":case"separator":return(r,n,s)=>{const i=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!i&&Kc(n,t).includes(t.arrayFormatSeparator);n=o?Kc(n,t):n;const a=i||o?n.split(t.arrayFormatSeparator).map(u=>Kc(u,t)):n===null?n:Kc(n,t);s[r]=a};case"bracket-separator":return(r,n,s)=>{const i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){s[r]=n&&Kc(n,t);return}const o=n===null?[]:n.split(t.arrayFormatSeparator).map(a=>Kc(a,t));if(s[r]===void 0){s[r]=o;return}s[r]=[...s[r],...o]};default:return(r,n,s)=>{if(s[r]===void 0){s[r]=n;return}s[r]=[...[s[r]].flat(),n]}}}function Uq(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function In(t,e){return e.encode?e.strict?yTe(t):encodeURIComponent(t):t}function Kc(t,e){return e.decode?hTe(t):t}function Lq(t){return Array.isArray(t)?t.sort():typeof t=="object"?Lq(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function Kq(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function wTe(t){let e="";const r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function U8(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function T$(t){t=Kq(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function D$(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},Uq(e.arrayFormatSeparator);const r=vTe(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(const s of t.split("&")){if(s==="")continue;const i=e.decode?s.replace(/\+/g," "):s;let[o,a]=jq(i,"=");o===void 0&&(o=i),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Kc(a,e),r(Kc(o,e),a,n)}for(const[s,i]of Object.entries(n))if(typeof i=="object"&&i!==null)for(const[o,a]of Object.entries(i))i[o]=U8(a,e);else n[s]=U8(i,e);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((s,i)=>{const o=n[i];return s[i]=o&&typeof o=="object"&&!Array.isArray(o)?Lq(o):o,s},Object.create(null))}function Vq(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},Uq(e.arrayFormatSeparator);const r=o=>e.skipNull&&mTe(t[o])||e.skipEmptyString&&t[o]==="",n=gTe(e),s={};for(const[o,a]of Object.entries(t))r(o)||(s[o]=a);const i=Object.keys(s);return e.sort!==!1&&i.sort(e.sort),i.map(o=>{const a=t[o];return a===void 0?"":a===null?In(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?In(o,e)+"[]":a.reduce(n(o),[]).join("&"):In(o,e)+"="+In(a,e)}).filter(o=>o.length>0).join("&")}function qq(t,e){var s;e={decode:!0,...e};let[r,n]=jq(t,"#");return r===void 0&&(r=t),{url:((s=r==null?void 0:r.split("?"))==null?void 0:s[0])??"",query:D$(T$(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Kc(n,e)}:{}}}function Hq(t,e){e={encode:!0,strict:!0,[PP]:!0,...e};const r=Kq(t.url).split("?")[0]||"",n=T$(t.url),s={...D$(n,{sort:!1}),...t.query};let i=Vq(s,e);i&&(i=`?${i}`);let o=wTe(t.url);if(t.fragmentIdentifier){const a=new URL(r);a.hash=t.fragmentIdentifier,o=e[PP]?a.hash:`#${t.fragmentIdentifier}`}return`${r}${i}${o}`}function zq(t,e,r){r={parseFragmentIdentifier:!0,[PP]:!1,...r};const{url:n,query:s,fragmentIdentifier:i}=qq(t,r);return Hq({url:n,query:pTe(s,e),fragmentIdentifier:i},r)}function _Te(t,e,r){const n=Array.isArray(e)?s=>!e.includes(s):(s,i)=>!e(s,i);return zq(t,n,r)}const bTe=Object.freeze(Object.defineProperty({__proto__:null,exclude:_Te,extract:T$,parse:D$,parseUrl:qq,pick:zq,stringify:Vq,stringifyUrl:Hq},Symbol.toStringTag,{value:"Module"})),L8=["aud","iss","exp","iat","jti"];class Pi{static async createExchange(e,r){await e.verify();const{to:n}=e.metadata,s=JSON.stringify({rfq:e,replyTo:r==null?void 0:r.replyTo});await Pi.sendMessage(n,"POST","/exchanges",s)}static async submitOrder(e){await e.verify();const{to:r,exchangeId:n}=e.metadata,s=JSON.stringify(e);await Pi.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async submitClose(e){await e.verify();const{to:r,exchangeId:n}=e.metadata,s=JSON.stringify(e);await Pi.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async sendMessage(e,r,n,s){const o=`${await Pi.getPfiServiceEndpoint(e)}${n}`;let a;try{a=await fetch(o,{method:r,headers:{"content-type":"application/json"},body:s})}catch(u){throw new s0({message:`Failed to send message to ${e}`,recipientDid:e,url:o,cause:u})}if(!a.ok){const u=await a.json();throw new o0({statusCode:a.status,details:u,recipientDid:e,url:o})}}static async getOfferings(e){const{pfiDid:r}=e,s=`${await Pi.getPfiServiceEndpoint(r)}/offerings`;let i;try{i=await fetch(s)}catch(l){throw new s0({message:`Failed to get offerings from ${r}`,recipientDid:r,url:s,cause:l})}const o=[];if(!i.ok){const l=await i.json();throw new o0({statusCode:i.status,details:l,recipientDid:r,url:s})}const u=(await i.json()).data;for(let l of u){const c=await rw.parse(l);o.push(c)}return o}static async getBalances(e){const{pfiDid:r,did:n}=e,i=`${await Pi.getPfiServiceEndpoint(r)}/balances`,o=await Pi.generateRequestToken({requesterDid:n,pfiDid:r});let a;try{a=await fetch(i,{headers:{authorization:`Bearer ${o}`}})}catch(c){throw new s0({message:`Failed to get balances from ${r}`,recipientDid:r,url:i,cause:c})}if(!a.ok){const c=await a.json();throw new o0({statusCode:a.status,details:c,recipientDid:r,url:i})}return(await a.json()).data}static async getExchange(e){const{pfiDid:r,exchangeId:n,did:s}=e,o=`${await Pi.getPfiServiceEndpoint(r)}/exchanges/${n}`,a=await Pi.generateRequestToken({requesterDid:s,pfiDid:r});let u;try{u=await fetch(o,{headers:{authorization:`Bearer ${a}`}})}catch(d){throw new s0({message:`Failed to get exchange from ${r}`,recipientDid:r,url:o,cause:d})}const l=[];if(!u.ok){const d=await u.json();throw new o0({statusCode:u.status,details:d,recipientDid:r,url:o})}const c=await u.json();for(let d of c.data){const h=await aa.parseMessage(d);l.push(h)}return l}static async getExchanges(e){const{pfiDid:r,filter:n,did:s}=e,i=await Pi.getPfiServiceEndpoint(r),o=n?`?${bTe.stringify(n)}`:"",a=`${i}/exchanges${o}`,u=await Pi.generateRequestToken({requesterDid:s,pfiDid:r});let l;try{l=await fetch(a,{headers:{authorization:`Bearer ${u}`}})}catch(h){throw new s0({message:`Failed to get exchanges from ${r}`,recipientDid:r,url:a,cause:h})}const c=[];if(!l.ok){const h=await l.json();throw new o0({statusCode:l.status,details:h,recipientDid:r,url:a})}const d=await l.json();for(let h of d.data){const f=[];for(let p of h){const m=await aa.parseMessage(p);f.push(m)}c.push(f)}return c}static async getPfiServiceEndpoint(e){let r;try{r=await Kle(e)}catch(s){throw new P2e(s.message)}const[n]=lTe({didDocument:r,type:"PFI"});if(!(n!=null&&n.serviceEndpoint))throw new C2e(`${e} has no PFI service entry`);return n.serviceEndpoint}static async generateRequestToken(e){const{pfiDid:r,requesterDid:n}=e,s=Date.now(),i=s+jle("1m"),o={aud:r,iss:n.uri,exp:Math.floor(i/1e3),iat:Math.floor(s/1e3),jti:kC().getSuffix()};try{return await Nu.sign({signerDid:n,payload:o})}catch(a){throw new I2e({message:a.message,cause:a})}}static async verifyRequestToken(e){let r;try{r=await Nu.verify({jwt:e.requestToken})}catch(a){throw new k2e({message:a.message,cause:a})}const{header:n,payload:s}=r;for(let a of L8)if(!s[a])throw new $2e({message:`Request token missing ${a} claim. Expected ${L8}.`});if(s.aud!==e.pfiDid)throw new O2e({message:"Request token contains invalid audience. Expected aud property to be PFI DID."});const i=n.kid,o=s.iss;if(!i.includes(o))throw new R2e({message:"Request token issuer does not match signer"});return o}}var nw;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(nw||(nw={}));const vs={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class Er{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;const r=Er.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;const{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){const l={},c=o.slice(1).split("&");for(const d of c){const[h,f]=d.split("=");l[h]=f}u.params=l}return u}}Er.METHOD_PATTERN="([a-z0-9]+)";Er.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Er.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Er.PCT_ENCODED_PATTERN})`;Er.METHOD_ID_PATTERN=`((?:${Er.ID_CHAR_PATTERN}*:)*(${Er.ID_CHAR_PATTERN}+))`;Er.PATH_PATTERN="(/[^#?]*)?";Er.QUERY_PATTERN="([?][^#]*)?";Er.FRAGMENT_PATTERN="(#.*)?";Er.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Er.METHOD_PATTERN}):(?<id>${Er.METHOD_ID_PATTERN})(?<path>${Er.PATH_PATTERN})(?<query>${Er.QUERY_PATTERN})(?<fragment>${Er.FRAGMENT_PATTERN})$`);class at extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at)}}var mt;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(mt||(mt={}));function ETe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,A=0,_=p.length;A!==_&&p[A]===0;)A++,m++;for(var g=(_-A)*c+1>>>0,v=new Uint8Array(g);A!==_;){for(var S=p[A],x=0,D=g-1;(S!==0||x<E)&&D!==-1;D--,x++)S+=256*v[D]>>>0,v[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");E=x,A++}for(var w=g-E;w!==g&&v[w]===0;)w++;for(var b=u.repeat(m);w<g;++w)b+=t.charAt(v[w]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,A=0;p[m]===u;)E++,m++;for(var _=(p.length-m)*l+1>>>0,g=new Uint8Array(_);p[m];){var v=r[p.charCodeAt(m)];if(v===255)return;for(var S=0,x=_-1;(v!==0||S<A)&&x!==-1;x--,S++)v+=a*g[x]>>>0,g[x]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=S,m++}if(p[m]!==" "){for(var D=_-A;D!==_&&g[D]===0;)D++;for(var w=new Uint8Array(E+(_-D)),b=E;D!==_;)w[b++]=g[D++];return w}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var ATe=ETe,STe=ATe;const TTe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class DTe{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class xTe{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wq(this,e)}}class PTe{constructor(e){this.decoders=e}or(e){return Wq(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wq=(t,e)=>new PTe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class CTe{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new DTe(e,r,n),this.decoder=new xTe(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gq=({name:t,prefix:e,encode:r,decode:n})=>new CTe(t,e,r,n),Jq=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=STe(r,e);return Gq({prefix:t,name:e,encode:n,decode:i=>TTe(s(i))})},ITe=(t,e,r,n)=>{const s={};for(let c=0;c<e.length;++c)s[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,u=0,l=0;for(let c=0;c<i;++c){const d=s[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},kTe=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},_o=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gq({prefix:e,name:t,encode(s){return kTe(s,n,r)},decode(s){return ITe(s,n,r,t)}});_o({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});_o({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});_o({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});_o({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});_o({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});_o({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});_o({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});_o({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const K8=_o({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ub=Jq({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Jq({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_o({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});_o({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Dc=_o({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});_o({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function $Te(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function OTe(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function CP(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var a0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},V8=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(l){i({value:l,done:a})},o)}};const Lb=new TextEncoder,ah=new TextDecoder;class Je{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Je(e,"ArrayBuffer")}static asyncIterable(e){if(!OTe(e))throw new TypeError("Input must be of type AsyncIterable.");return new Je(e,"AsyncIterable")}static base32Z(e){return new Je(e,"Base32Z")}static base58Btc(e){return new Je(e,"Base58Btc")}static base64Url(e){return new Je(e,"Base64Url")}static bufferSource(e){return new Je(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Je(e,"Hex")}static multibase(e){return new Je(e,"Multibase")}static object(e){return new Je(e,"Object")}static string(e){return new Je(e,"String")}static uint8Array(e){return new Je(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Ub.baseDecode(this.data).buffer;case"Base64Url":return Dc.baseDecode(this.data).buffer;case"BufferSource":{if(CP(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return $Te(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return a0(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return K8.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return Ub.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Ub.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return Dc.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return Dc.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=Lb.encode(e);return Dc.baseEncode(r)}case"String":{const e=Lb.encode(this.data);return Dc.baseEncode(e)}case"Uint8Array":return Dc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return a0(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const u=[];try{for(var i=!0,o=V8(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const c=s;u.push(c)}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Je.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Je.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=Dc.baseDecode(this.data),r=ah.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=ah.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return a0(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return ah.decode(this.data);case"Base64Url":{const e=Dc.baseDecode(this.data);return ah.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return ah.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return a0(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=V8(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;const l=s;typeof l=="string"?u+=l:u+=ah.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=ah.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return K8.baseDecode(this.data);case"Base58Btc":return Ub.baseDecode(this.data);case"Base64Url":return Dc.baseDecode(this.data);case"BufferSource":{const e=CP(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return Lb.encode(e)}case"String":return Lb.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return a0(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}}var RTe=Xq,q8=128,NTe=127,BTe=~NTe,FTe=Math.pow(2,31);function Xq(t,e,r){e=e||[],r=r||0;for(var n=r;t>=FTe;)e[r++]=t&255|q8,t/=128;for(;t&BTe;)e[r++]=t&255|q8,t>>>=7;return e[r]=t|0,Xq.bytes=r-n+1,e}var MTe=IP,jTe=128,H8=127;function IP(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw IP.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&H8)<<s:(o&H8)*Math.pow(2,s),s+=7}while(o>=jTe);return IP.bytes=i-n,r}var UTe=Math.pow(2,7),LTe=Math.pow(2,14),KTe=Math.pow(2,21),VTe=Math.pow(2,28),qTe=Math.pow(2,35),HTe=Math.pow(2,42),zTe=Math.pow(2,49),WTe=Math.pow(2,56),GTe=Math.pow(2,63),JTe=function(t){return t<UTe?1:t<LTe?2:t<KTe?3:t<VTe?4:t<qTe?5:t<HTe?6:t<zTe?7:t<WTe?8:t<GTe?9:10},XTe={encode:RTe,decode:MTe,encodingLength:JTe},eA=XTe;const z8=(t,e=0)=>[eA.decode(t,e),eA.decode.bytes],ZTe=(t,e,r=0)=>(eA.encode(t,e,r),e),YTe=t=>eA.encodingLength(t);class $n{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=$n.codeToName.has(n)?n:$n.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=YTe(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),ZTe(n,a),a}static getCodeFromData(e){const{prefixedData:r}=e,[n,s]=z8(r);return n}static getCodeFromName(e){const{name:r}=e,n=$n.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=$n.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){$n.codeToName.set(e.code,e.name),$n.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,s]=z8(r),i=$n.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}}$n.codeToName=new Map;$n.nameToCode=new Map;$n.registerCodec({code:237,name:"ed25519-pub"});$n.registerCodec({code:4864,name:"ed25519-priv"});$n.registerCodec({code:236,name:"x25519-pub"});$n.registerCodec({code:4866,name:"x25519-priv"});$n.registerCodec({code:231,name:"secp256k1-pub"});$n.registerCodec({code:4865,name:"secp256k1-priv"});function Zq(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Zq(t[e])})}var uh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class QTe{constructor(){this.store=new Map}clear(){return uh(this,void 0,void 0,function*(){this.store.clear()})}close(){return uh(this,void 0,void 0,function*(){})}delete(e){return uh(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return uh(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return uh(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return uh(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return uh(this,void 0,void 0,function*(){this.store.set(e,r)})}}function eDe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Yq(t,...e){if(!eDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function W8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tDe(t,e){Yq(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uD=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),eu=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function rDe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Qq(t){return typeof t=="string"&&(t=rDe(t)),Yq(t),t}class nDe{clone(){return this._cloneInto()}}function iDe(t){const e=n=>t().update(Qq(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function sDe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,l=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+l,a,n)}const oDe=(t,e,r)=>t&e^~t&r,aDe=(t,e,r)=>t&e^t&r^e&r;class uDe extends nDe{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uD(this.buffer)}update(e){W8(this);const{view:r,buffer:n,blockLen:s}=this;e=Qq(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=uD(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){W8(this),tDe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;sDe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=uD(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,c[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const cDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),id=new Uint32Array(64);class lDe extends uDe{constructor(){super(64,32,8,!1),this.A=nd[0]|0,this.B=nd[1]|0,this.C=nd[2]|0,this.D=nd[3]|0,this.E=nd[4]|0,this.F=nd[5]|0,this.G=nd[6]|0,this.H=nd[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)id[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=id[d-15],f=id[d-2],p=eu(h,7)^eu(h,18)^h>>>3,m=eu(f,17)^eu(f,19)^f>>>10;id[d]=m+id[d-7]+p+id[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:l,H:c}=this;for(let d=0;d<64;d++){const h=eu(a,6)^eu(a,11)^eu(a,25),f=c+h+oDe(a,u,l)+cDe[d]+id[d]|0,m=(eu(n,2)^eu(n,13)^eu(n,22))+aDe(n,s,i)|0;c=l,l=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,i,o,a,u,l,c)}roundClean(){id.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const iw=iDe(()=>new lDe);var dDe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class eH{static digest(e){return dDe(this,arguments,void 0,function*({data:r}){return iw(r)})}}class x${}var fDe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class hDe extends x${digest(e){return fDe(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield eH.digest({data:n})}})}}function pDe(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n).sort(),i={};for(const o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var mDe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const G8="urn:jwk:";function Br(t){return mDe(this,arguments,void 0,function*({jwk:e}){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);Zq(n);const s=pDe(n),i=Je.string(s).toUint8Array(),o=yield eH.digest({data:i});return Je.uint8Array(o).toBase64Url()})}function np(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function P$(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function ip(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function C$(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function yDe(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var _i=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},gDe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class fn{static adjustSignatureToLowS(e){return _i(this,arguments,void 0,function*({signature:r}){const n=et.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return _i(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield fn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:Je.uint8Array(r).toBase64Url(),x:Je.uint8Array(n.x).toBase64Url(),y:Je.uint8Array(n.y).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static bytesToPublicKey(e){return _i(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield fn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Je.uint8Array(n.x).toBase64Url(),y:Je.uint8Array(n.y).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static compressPublicKey(e){return _i(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return _i(this,arguments,void 0,function*({key:r}){const n=yield fn.privateKeyToBytes({privateKey:r}),s=yield fn.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:Je.uint8Array(s.x).toBase64Url(),y:Je.uint8Array(s.y).toBase64Url()};return i.kid=yield Br({jwk:i}),i})}static convertDerToCompactSignature(e){return _i(this,arguments,void 0,function*({derSignature:r}){return et.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return _i(this,arguments,void 0,function*({publicKeyBytes:r}){return et.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return _i(this,void 0,void 0,function*(){const e=et.utils.randomPrivateKey(),r=yield fn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Br({jwk:r}),r})}static getPublicKey(e){return _i(this,arguments,void 0,function*({key:r}){var n;if(!(np(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=gDe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Br({jwk:s})),s})}static privateKeyToBytes(e){return _i(this,arguments,void 0,function*({privateKey:r}){if(!np(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Je.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return _i(this,arguments,void 0,function*({publicKey:r}){if(!(P$(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Je.base64Url(r.x).toUint8Array(),i=Je.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return _i(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield fn.privateKeyToBytes({privateKey:r}),i=yield fn.publicKeyToBytes({publicKey:n});return et.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return _i(this,arguments,void 0,function*({data:r,key:n}){const s=yield fn.privateKeyToBytes({privateKey:n}),i=iw(r);return et.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return _i(this,arguments,void 0,function*({privateKeyBytes:r}){return et.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return _i(this,arguments,void 0,function*({publicKeyBytes:r}){try{et.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return _i(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield fn.publicKeyToBytes({publicKey:r}),o=iw(s);return et.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return _i(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=et.getPublicKey(r));const n=et.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}}var bi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},vDe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class yn{static adjustSignatureToLowS(e){return bi(this,arguments,void 0,function*({signature:r}){const n=tt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return bi(this,arguments,void 0,function*({privateKeyBytes:r}){const n=yield yn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:Je.uint8Array(r).toBase64Url(),x:Je.uint8Array(n.x).toBase64Url(),y:Je.uint8Array(n.y).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static bytesToPublicKey(e){return bi(this,arguments,void 0,function*({publicKeyBytes:r}){const n=yield yn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Je.uint8Array(n.x).toBase64Url(),y:Je.uint8Array(n.y).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static compressPublicKey(e){return bi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return bi(this,arguments,void 0,function*({key:r}){const n=yield yn.privateKeyToBytes({privateKey:r}),s=yield yn.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:Je.uint8Array(s.x).toBase64Url(),y:Je.uint8Array(s.y).toBase64Url()};return i.kid=yield Br({jwk:i}),i})}static convertDerToCompactSignature(e){return bi(this,arguments,void 0,function*({derSignature:r}){return tt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return bi(this,arguments,void 0,function*({publicKeyBytes:r}){return tt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return bi(this,void 0,void 0,function*(){const e=tt.utils.randomPrivateKey(),r=yield yn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Br({jwk:r}),r})}static getPublicKey(e){return bi(this,arguments,void 0,function*({key:r}){var n;if(!(np(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=vDe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Br({jwk:s})),s})}static privateKeyToBytes(e){return bi(this,arguments,void 0,function*({privateKey:r}){if(!np(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Je.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return bi(this,arguments,void 0,function*({publicKey:r}){if(!(P$(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const n=new Uint8Array([4]),s=Je.base64Url(r.x).toUint8Array(),i=Je.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return bi(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield yn.privateKeyToBytes({privateKey:r}),i=yield yn.publicKeyToBytes({publicKey:n});return tt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return bi(this,arguments,void 0,function*({data:r,key:n}){const s=yield yn.privateKeyToBytes({privateKey:n}),i=iw(r);return tt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return bi(this,arguments,void 0,function*({privateKeyBytes:r}){return tt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return bi(this,arguments,void 0,function*({publicKeyBytes:r}){try{tt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return bi(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield yn.publicKeyToBytes({publicKey:r}),o=iw(s);return tt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return bi(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=tt.getPublicKey(r));const n=tt.ProjectivePoint.fromHex(r),s=Zr(n.x,32),i=Zr(n.y,32);return{x:s,y:i}})}}var u0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class J8 extends x${computePublicKey(e){return u0(this,arguments,void 0,function*({key:r}){if(!np(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield fn.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield yn.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return u0(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{const n=yield fn.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{const n=yield yn.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return u0(this,arguments,void 0,function*({key:r}){if(!np(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{const n=yield fn.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{const n=yield yn.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return u0(this,arguments,void 0,function*({key:r,data:n}){if(!np(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield fn.sign({key:r,data:n});case"P-256":return yield yn.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return u0(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!P$(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield fn.verify({key:r,signature:n,data:s});case"P-256":return yield yn.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}}var $o=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},wDe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class gn{static bytesToPrivateKey(e){return $o(this,arguments,void 0,function*({privateKeyBytes:r}){const n=wr.getPublicKey(r),s={crv:"Ed25519",d:Je.uint8Array(r).toBase64Url(),kty:"OKP",x:Je.uint8Array(n).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static bytesToPublicKey(e){return $o(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"Ed25519",x:Je.uint8Array(r).toBase64Url()};return n.kid=yield Br({jwk:n}),n})}static computePublicKey(e){return $o(this,arguments,void 0,function*({key:r}){const n=yield gn.privateKeyToBytes({privateKey:r}),s=wr.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:Je.uint8Array(s).toBase64Url()};return i.kid=yield Br({jwk:i}),i})}static convertPrivateKeyToX25519(e){return $o(this,arguments,void 0,function*({privateKey:r}){const n=yield gn.privateKeyToBytes({privateKey:r}),s=xw(n),i=Oi.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:Je.uint8Array(s).toBase64Url(),x:Je.uint8Array(i).toBase64Url()};return o.kid=yield Br({jwk:o}),o})}static convertPublicKeyToX25519(e){return $o(this,arguments,void 0,function*({publicKey:r}){const n=yield gn.publicKeyToBytes({publicKey:r});if(!(yield gn.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");const i=Dw(n),o={kty:"OKP",crv:"X25519",x:Je.uint8Array(i).toBase64Url()};return o.kid=yield Br({jwk:o}),o})}static generateKey(){return $o(this,void 0,void 0,function*(){const e=wr.utils.randomPrivateKey(),r=yield gn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Br({jwk:r}),r})}static getPublicKey(e){return $o(this,arguments,void 0,function*({key:r}){var n;if(!(ip(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=wDe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Br({jwk:s})),s})}static privateKeyToBytes(e){return $o(this,arguments,void 0,function*({privateKey:r}){if(!ip(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Je.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return $o(this,arguments,void 0,function*({publicKey:r}){if(!C$(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Je.base64Url(r.x).toUint8Array()})}static sign(e){return $o(this,arguments,void 0,function*({key:r,data:n}){const s=yield gn.privateKeyToBytes({privateKey:r});return wr.sign(n,s)})}static validatePublicKey(e){return $o(this,arguments,void 0,function*({publicKeyBytes:r}){try{wr.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return $o(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=yield gn.publicKeyToBytes({publicKey:r});return wr.verify(n,s,i)})}}var c0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class _De extends x${computePublicKey(e){return c0(this,arguments,void 0,function*({key:r}){if(!ip(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield gn.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return c0(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{const n=yield gn.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return c0(this,arguments,void 0,function*({key:r}){if(!ip(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{const n=yield gn.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return c0(this,arguments,void 0,function*({key:r,data:n}){if(!ip(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield gn.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return c0(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!C$(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield gn.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}}var xc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const cD={Ed25519:{implementation:_De,names:["Ed25519"]},secp256k1:{implementation:J8,names:["ES256K","secp256k1"]},secp256r1:{implementation:J8,names:["ES256","secp256r1"]},"SHA-256":{implementation:hDe,names:["SHA-256"]}};class hl{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e==null?void 0:e.keyStore)!==null&&r!==void 0?r:new QTe}digest(e){return xc(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return xc(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return xc(this,arguments,void 0,function*({algorithm:r}){const s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if((s==null?void 0:s.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${G8}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return xc(this,arguments,void 0,function*({key:r}){const n=yield Br({jwk:r});return`${G8}${n}`})}getPublicKey(e){return xc(this,arguments,void 0,function*({keyUri:r}){const n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return xc(this,arguments,void 0,function*({key:r}){var n;if(!yDe(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield Br({jwk:s}));const i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return xc(this,arguments,void 0,function*({keyUri:r,data:n}){const s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return xc(this,arguments,void 0,function*({key:r,signature:n,data:s}){const i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;const n=(r=cD[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const s in cD){const i=cD[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return xc(this,arguments,void 0,function*({keyUri:r}){const n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}}function bDe(t){const e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}var sd=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},EDe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Fh{static bytesToPrivateKey(e){return sd(this,arguments,void 0,function*({privateKeyBytes:r}){const n=Oi.getPublicKey(r),s={kty:"OKP",crv:"X25519",d:Je.uint8Array(r).toBase64Url(),x:Je.uint8Array(n).toBase64Url()};return s.kid=yield Br({jwk:s}),s})}static bytesToPublicKey(e){return sd(this,arguments,void 0,function*({publicKeyBytes:r}){const n={kty:"OKP",crv:"X25519",x:Je.uint8Array(r).toBase64Url()};return n.kid=yield Br({jwk:n}),n})}static computePublicKey(e){return sd(this,arguments,void 0,function*({key:r}){const n=yield Fh.privateKeyToBytes({privateKey:r}),s=Oi.getPublicKey(n),i={kty:"OKP",crv:"X25519",x:Je.uint8Array(s).toBase64Url()};return i.kid=yield Br({jwk:i}),i})}static generateKey(){return sd(this,void 0,void 0,function*(){const e=Oi.utils.randomPrivateKey(),r=yield Fh.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Br({jwk:r}),r})}static getPublicKey(e){return sd(this,arguments,void 0,function*({key:r}){var n;if(!(ip(r)&&r.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let s=EDe(r,["d"]);return(n=s.kid)!==null&&n!==void 0||(s.kid=yield Br({jwk:s})),s})}static privateKeyToBytes(e){return sd(this,arguments,void 0,function*({privateKey:r}){if(!ip(r))throw new Error("X25519: The provided key is not a valid OKP private key.");return Je.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return sd(this,arguments,void 0,function*({publicKey:r}){if(!C$(r))throw new Error("X25519: The provided key is not a valid OKP public key.");return Je.base64Url(r.x).toUint8Array()})}static sharedSecret(e){return sd(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const s=yield Fh.privateKeyToBytes({privateKey:r}),i=yield Fh.publicKeyToBytes({publicKey:n});return Oi.getSharedSecret(s,i)})}}function $a(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function tH({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(kP))!==null&&r!==void 0?r:[]),Object.keys(nw).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(kP))!==null&&o!==void 0?o:[])}),n}function ADe({didDocument:t}){const r=tH({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function SDe({didDocument:t,methodId:e}){const r=[];return Object.keys(nw).forEach(n=>{if(Array.isArray(t[n])){const s=t[n],i=$a(e);s.some(a=>{const u=$a(a)===i,l=kP(a)&&$a(a.id)===i;return u||l})&&r.push(n)}}),r}function kP(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function rH({keyBytes:t,multicodecCode:e,multicodecName:r}){const n=$n.addPrefix({code:e,data:t,name:r}),s=Je.uint8Array(n).toBase58Btc();return Je.base58Btc(s).toMultibase()}function X8({multibaseKeyId:t}){try{const e=Je.multibase(t).toBase58Btc(),r=Je.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=$n.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new at(mt.InvalidDid,`Invalid multibase identifier: ${t}`)}}var l0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class Gu{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return l0(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return l0(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var l,c;return $a(u.id)===((l=$a(e==null?void 0:e.methodId))!==null&&l!==void 0?l:$a((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new at(mt.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:bDe(i),keyId:n.id,sign(u){return l0(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:s})})},verify(u){return l0(this,arguments,void 0,function*({data:l,signature:c}){return yield o.verify({data:l,key:i,signature:c})})}}})}static import(e){return l0(this,arguments,void 0,function*({portableDid:r,keyManager:n=new hl}){var s;const i=tH({didDocument:r.document});if(i.length===0)throw new at(mt.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);const u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new Gu({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}}var Z8=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class Gw{static getSigningMethod(e){return Z8(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return Z8(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}}var ii=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Y8=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Q8="https://diddht.tbddev.org",TDe=0,od=7200,j1=";",os=",";var $P;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})($P||($P={}));var ps;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(ps||(ps={}));var OP;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(OP||(OP={}));const nH={Ed25519:ps.Ed25519,ES256K:ps.secp256k1,ES256:ps.secp256r1,"P-256":ps.secp256r1,secp256k1:ps.secp256k1,secp256r1:ps.secp256r1,X25519:ps.X25519},eM={[ps.Ed25519]:"EdDSA",[ps.secp256k1]:"ES256K",[ps.secp256r1]:"ES256",[ps.X25519]:"ECDH-ES+A256KW"};class mf extends Gw{static create(){return ii(this,arguments,void 0,function*({keyManager:e=new hl,options:r={}}={}){var n,s,i,o,a,u,l,c,d,h,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in nH)))throw new Error("One or more verification method algorithms are not supported");const p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const m=yield e.generateKey({algorithm:"Ed25519"}),E=yield e.getPublicKey({keyUri:m}),A=yield kn.identityKeyToIdentifier({identityKey:E}),_=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),g=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];g!=null&&g.some(S=>{var x;return((x=S.id)===null||x===void 0?void 0:x.split("#").pop())==="0"})||g.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const S of g){const x=S.id&&S.id.split("#").pop()==="0"?m:yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});let w=(u=(a=S.id)!==null&&a!==void 0?a:D.kid)!==null&&u!==void 0?u:yield Br({jwk:D});w=`${A}#${$a(w)}`,(l=_.verificationMethod)!==null&&l!==void 0||(_.verificationMethod=[]),_.verificationMethod.push({id:w,type:"JsonWebKey",controller:(c=S.controller)!==null&&c!==void 0?c:A,publicKeyJwk:D});for(const b of(d=S.purposes)!==null&&d!==void 0?d:[])_[b]||(_[b]=[]),_[b].push(w)}(h=r.services)===null||h===void 0||h.forEach(S=>{var x;(x=_.service)!==null&&x!==void 0||(_.service=[]),S.id=`${A}#${S.id.split("#").pop()}`,_.service.push(S)});const v=new Gu({uri:A,document:_,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){const S=yield mf.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static import(e){return ii(this,arguments,void 0,function*({portableDid:r,keyManager:n=new hl}){var s;const i=Er.parse(r.uri);if((i==null?void 0:i.method)!==mf.methodName)throw new at(mt.MethodNotSupported,"Method not supported");const o=yield Gu.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new at(mt.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return ii(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;const i=Er.parse(r.id);if(i&&i.method!==this.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u,l;return $a(a.id)===((u=$a(n))!==null&&u!==void 0?u:$a((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new at(mt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return ii(this,arguments,void 0,function*({did:r,gatewayUri:n=Q8}){return yield Vc.put({did:r,gatewayUri:n})})}static resolve(e){return ii(this,arguments,void 0,function*(r,n={}){var s;const i=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:Q8;try{yield kn.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:a}=yield Vc.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},vs),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof at))throw new Error(o);return Object.assign(Object.assign({},vs),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}}mf.methodName="dht";class Vc{static get(e){return ii(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const s=kn.identifierToIdentityKeyBytes({didUri:r}),i=yield Vc.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield kn.parseBep44GetMessage({bep44Message:i}),a=yield Vc.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return ii(this,arguments,void 0,function*({did:r,gatewayUri:n}){const s=yield Vc.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield kn.createBep44PutMessage({dnsPacket:s,publicKeyBytes:kn.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield Vc.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return ii(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const s=Je.uint8Array(n).toBase32Z(),i=new URL(s,r).href;let o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new at(mt.NotFound,`Pkarr record not found for: ${s}`)}catch(l){throw l instanceof at?l:new at(mt.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const a=yield o.arrayBuffer();if(!a)throw new at(mt.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new at(mt.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new at(mt.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return ii(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const s=Je.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(u){throw new at(mt.InternalError,`Failed to put Pkarr record for identifier ${s}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return ii(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;const a={id:r},u={published:!0},l=new Map;for(const c of(s=n==null?void 0:n.answers)!==null&&s!==void 0?s:[]){if(c.type!=="TXT")continue;const d=c.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{const h=kn.parseTxtDataToString(c.data);a.alsoKnownAs=h.split(os);break}case d.startsWith("cnt"):{const h=kn.parseTxtDataToString(c.data);a.controller=h.includes(os)?h.split(os):h;break}case d.startsWith("k"):{const{id:h,t:f,k:p,c:m,a:E}=kn.parseTxtDataToObject(c.data),A=Je.base64Url(p).toUint8Array(),_=ps[Number(f)];let g=yield kn.keyConverter(_).bytesToPublicKey({publicKeyBytes:A});g.alg=E||eM[Number(f)];const v=d==="k0"?"0":h!==void 0?h:yield Br({jwk:g});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);const S=`${r}#${v}`;a.verificationMethod.push({id:S,type:"JsonWebKey",controller:m??r,publicKeyJwk:g}),l.set(d,S);break}case d.startsWith("s"):{const h=kn.parseTxtDataToObject(c.data),{id:f,t:p,se:m}=h,E=Y8(h,["id","t","se"]),A=m.includes(os)?m.split(os):[m],_=Object.fromEntries(Object.entries(E).map(([g,v])=>[g,v.includes(os)?v.split(os):v]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},_),{id:`${r}#${f}`,type:p,serviceEndpoint:A}));break}case d.startsWith("typ"):{const{id:h}=kn.parseTxtDataToObject(c.data);u.types=h.split(os).map(f=>Number(f));break}case d.startsWith("did"):{const h=_=>_.split(os).map(g=>l.get(g)).filter(g=>typeof g=="string"),{auth:f,asm:p,del:m,inv:E,agm:A}=kn.parseTxtDataToObject(c.data);f&&(a.authentication=h(f)),p&&(a.assertionMethod=h(p)),m&&(a.capabilityDelegation=h(m)),E&&(a.capabilityInvocation=h(E)),A&&(a.keyAgreement=h(A));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return ii(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,u,l,c;const d=[],h=[],f=new Map,p=[],m=[];if(i!==void 0){const{signature:_,previousDid:g}=i;yield kn.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:od,data:`id=${g};s=${_}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:od,data:r.alsoKnownAs.join(os)}),r.controller){const _=Array.isArray(r.controller)?r.controller.join(os):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:od,data:_})}for(const[_,g]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){const v=`k${_}`;m.push(v);let S=g.id.split("#").pop();f.set(S,v);const x=g.publicKeyJwk;if(!(x!=null&&x.crv&&x.crv in nH))throw new at(mt.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(u=x==null?void 0:x.crv)!==null&&u!==void 0?u:"undefined"}`);const D=ps[x.crv],w=yield kn.keyConverter(x.crv).publicKeyToBytes({publicKey:x}),b=Je.uint8Array(w).toBase64Url(),T=[`t=${D}`,`k=${b}`];S!=="0"&&(yield Br({jwk:x}))!==S&&T.unshift(`id=${S}`),x.alg!==eM[D]&&T.push(`a=${x.alg}`),g.controller!==r.id&&T.push(`c=${g.controller}`),d.push({type:"TXT",name:`_${v}._did.`,ttl:od,data:T.join(j1)})}(l=r.service)===null||l===void 0||l.forEach((_,g)=>{const v=`s${g}`;p.push(v);let{id:S,type:x,serviceEndpoint:D}=_,w=Y8(_,["id","type","serviceEndpoint"]);S=$a(S),D=Array.isArray(D)?D.join(","):D;const T=Object.entries(Object.assign({id:S,t:x,se:D},w)).map(([C,k])=>`${C}=${k}`).join(j1),P=kn.chunkDataIfNeeded(T);d.push({type:"TXT",name:`_${v}._did.`,ttl:od,data:P})});const E=[`v=${TDe}`];if(m.length&&E.push(`vm=${m.join(os)}`),Object.keys(nw).forEach(_=>{var g;const v=(g=r[_])===null||g===void 0?void 0:g.map(S=>f.get(S.split("#").pop()));if(v){const S=OP[_];E.push(`${S}=${v.join(os)}`)}}),p.length&&E.push(`svc=${p.join(os)}`),!((c=n.types)===null||c===void 0)&&c.length){const g=n.types.map(v=>typeof v=="string"?$P[v]:v);d.push({type:"TXT",name:"_typ._did.",ttl:od,data:`id=${g.join(os)}`})}d.push({type:"TXT",name:"_did."+Vc.getUniqueDidSuffix(r.id)+".",ttl:od,data:E.join(j1)});for(const _ of s||[])h.push({type:"NS",name:"_did."+Vc.getUniqueDidSuffix(r.id)+".",ttl:od,data:_+"."});return{id:0,type:"response",flags:bI,answers:[...d,...h]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}}class kn{static createBep44PutMessage(e){return ii(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){const i=Math.ceil(Date.now()/1e3),o=Fv(r),a=cy.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new at(mt.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);const u=yield s.sign({data:a});return{k:n,seq:i,sig:u,v:o}})}static identifierToIdentityKey(e){return ii(this,arguments,void 0,function*({didUri:r}){let n=kn.identifierToIdentityKeyBytes({didUri:r});return yield gn.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){const r=Er.parse(e);if(!r)throw new at(mt.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==mf.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=Je.base32Z(r.id).toUint8Array()}catch{throw new at(mt.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new at(mt.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return ii(this,arguments,void 0,function*({identityKey:r}){const n=yield gn.publicKeyToBytes({publicKey:r}),s=Je.uint8Array(n).toBase32Z();return`did:${mf.methodName}:${s}`})}static keyConverter(e){const n={Ed25519:gn,"P-256":{publicKeyToBytes:s=>ii(this,[s],void 0,function*({publicKey:i}){const o=yield yn.publicKeyToBytes({publicKey:i});return yield yn.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:yn.bytesToPublicKey,privateKeyToBytes:yn.privateKeyToBytes,bytesToPrivateKey:yn.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>ii(this,[s],void 0,function*({publicKey:i}){const o=yield fn.publicKeyToBytes({publicKey:i});return yield fn.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:fn.bytesToPublicKey,privateKeyToBytes:fn.privateKeyToBytes,bytesToPrivateKey:fn.bytesToPrivateKey},X25519:Fh}[e];if(!n)throw new at(mt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return ii(this,arguments,void 0,function*({bep44Message:r}){const n=yield gn.bytesToPublicKey({publicKeyBytes:r.k}),s=cy.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield gn.verify({key:n,signature:r.sig,data:s})))throw new at(mt.InvalidSignature,"Invalid signature for DHT BEP44 message");return EI(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(j1).reduce((r,n)=>{const[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return Je.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new at(mt.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return ii(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const s=yield kn.identifierToIdentityKey({didUri:n.previousDid}),i=kn.identifierToIdentityKeyBytes({didUri:r}),o=Je.base64Url(n.signature).toUint8Array();if(!(yield gn.verify({key:s,data:i,signature:o})))throw new at(mt.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;const r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}}var Fd=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},_u;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(_u||(_u={}));const DDe={Ed25519:_u.Ed25519,ES256K:_u.secp256k1,ES256:_u.secp256r1,"P-256":_u.secp256r1,secp256k1:_u.secp256k1,secp256r1:_u.secp256r1},tM="https://ion.tbd.engineering";class Im extends Gw{static create(){return Fd(this,arguments,void 0,function*({keyManager:e=new hl,options:r={}}={}){var n,s,i,o,a,u,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in DDe)))throw new Error("One or more verification method algorithms are not supported");const c=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const S of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){const x=yield e.generateKey({algorithm:S.algorithm}),D=yield e.getPublicKey({keyUri:x});h.push({id:S.id,publicKeyJwk:D,purposes:(a=S.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const f=yield e.generateKey({algorithm:_u.secp256k1}),p=yield e.getPublicKey({keyUri:f}),m=yield e.generateKey({algorithm:_u.secp256k1}),E=yield e.getPublicKey({keyUri:m}),A=yield zo.computeLongFormDidUri({recoveryKey:p,updateKey:E,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:h}),{didDocument:_,didResolutionMetadata:g}=yield Im.resolve(A,{gatewayUri:r.gatewayUri});if(_===null)throw new Error(`Unable to resolve DID during creation: ${g==null?void 0:g.error}`);const v=new Gu({uri:A,document:_,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:p,updateKey:E},keyManager:e});if(!((l=r.publish)!==null&&l!==void 0)||l){const S=yield Im.publish({did:v,gatewayUri:r.gatewayUri});v.metadata=S.didDocumentMetadata}return v})}static getSigningMethod(e){return Fd(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;const i=Er.parse(r.id);if(i&&i.method!==this.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${i.method}`);const o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new at(mt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Fd(this,arguments,void 0,function*({portableDid:r,keyManager:n=new hl}){const s=Er.parse(r.uri);if((s==null?void 0:s.method)!==Im.methodName)throw new at(mt.MethodNotSupported,"Method not supported");return yield Gu.import({portableDid:r,keyManager:n})})}static publish(e){return Fd(this,arguments,void 0,function*({did:r,gatewayUri:n=tM}){var s,i,o;const a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:SDe({didDocument:r.document,methodId:c.id})})))!==null&&i!==void 0?i:[],u=yield zo.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),l=yield zo.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const c=zo.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:mt.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Fd(this,arguments,void 0,function*(r,n={}){var s,i;const o=Er.parse(r);if(!o)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==Im.methodName)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"methodNotSupported"}});const a=(s=n==null?void 0:n.gatewayUri)!==null&&s!==void 0?s:tM;try{const u=zo.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),l=yield fetch(u);if(!l.ok)throw new at(mt.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:c,didDocumentMetadata:d}=yield l.json();return Object.assign(Object.assign(Object.assign({},vs),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(i=d==null?void 0:d.method)===null||i===void 0?void 0:i.published},d)})}catch(u){if(!(u instanceof at))throw new Error(u);return Object.assign(Object.assign({},vs),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}}Im.methodName="ion";class zo{static appendPathToUrl({baseUrl:e,path:r}){const n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Fd(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){const o=yield zo.createIonDocument({services:s,verificationMethods:i}),a=zo.normalizeJwk(r),u=zo.normalizeJwk(n);return yield $w.createLongFormDid({document:o,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return Fd(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield Ji.createCreateRequest({document:r,recoveryKey:zo.normalizeJwk(n),updateKey:zo.normalizeJwk(s)})})}static createIonDocument(e){return Fd(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;const o=[];for(const l of n){let c=(i=(s=l.id)!==null&&s!==void 0?s:l.publicKeyJwk.kid)!==null&&i!==void 0?i:yield Br({jwk:l.publicKeyJwk});c=`${c.split("#").pop()}`;const d={id:c,publicKeyJwk:zo.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(d)}const a=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}}var Kb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class km extends Gw{static create(){return Kb(this,arguments,void 0,function*({keyManager:e=new hl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=Je.object(l).toBase64Url(),d=`did:${km.methodName}:${c}`,f=(yield km.resolve(d)).didDocument;return new Gu({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return Kb(this,arguments,void 0,function*({didDocument:r}){var n;const s=Er.parse(r.id);if(s&&s.method!==this.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new at(mt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return Kb(this,arguments,void 0,function*({portableDid:r,keyManager:n=new hl}){const s=Er.parse(r.uri);if((s==null?void 0:s.method)!==km.methodName)throw new at(mt.MethodNotSupported,"Method not supported");const i=yield Gu.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new at(mt.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return Kb(this,void 0,void 0,function*(){const n=Er.parse(e);let s;try{s=Je.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==km.methodName)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"methodNotSupported"}});const i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},vs),{didDocument:i})})}}km.methodName="jwk";var Ta=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Rc;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Rc||(Rc={}));const lD={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},xDe={Ed25519:Rc.Ed25519,ES256K:Rc.secp256k1,ES256:Rc.secp256r1,"P-256":Rc.secp256r1,secp256k1:Rc.secp256k1,secp256r1:Rc.secp256r1,X25519:Rc.X25519};class fu extends Gw{static create(){return Ta(this,arguments,void 0,function*({keyManager:e=new hl,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),l=yield e.getPublicKey({keyUri:u}),c=yield ei.publicKeyToMultibaseId({publicKey:l}),d=`did:${fu.methodName}:${c}`,f=(yield fu.resolve(d,r)).didDocument;return new Gu({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return Ta(this,arguments,void 0,function*({didDocument:r}){var n;const s=Er.parse(r.id);if(s&&s.method!==this.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${s.method}`);const[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new at(mt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Ta(this,arguments,void 0,function*({portableDid:r,keyManager:n=new hl}){const s=Er.parse(r.uri);if((s==null?void 0:s.method)!==fu.methodName)throw new at(mt.MethodNotSupported,"Method not supported");const i=yield Gu.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new at(mt.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return Ta(this,void 0,void 0,function*(){try{const n=yield fu.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},vs),{didDocument:n})}catch(n){if(!(n instanceof at))throw new Error(n);return Object.assign(Object.assign({},vs),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Ta(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},l=Er.parse(r);if(!l)throw new at(mt.InvalidDid,`Invalid DID URI: ${r}`);const c=l.id;if(l.method!==fu.methodName)throw new at(mt.MethodNotSupported,`Method not supported: ${l.method}`);if(!fu.validateIdentifier(l))throw new at(mt.InvalidDid,`Invalid DID URI: ${r}`);const d=yield fu.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(u.id=l.uri,u.verificationMethod=[d],u.authentication=[d.id],u.assertionMethod=[d.id],u.capabilityInvocation=[d.id],u.capabilityDelegation=[d.id],i===!0){const p=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",m=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});u.verificationMethod.push(m),u.keyAgreement=[m.id]}const h=[s];return ADe({didDocument:u}).forEach(p=>{const m=lD[p];h.push(m)}),u["@context"]=h,u})}static createEncryptionMethod(e){return Ta(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l}=yield fu.deriveEncryptionKey({multibaseValue:n}),c=u.byteLength,d=ei.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(c!==d)throw new at(mt.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${d}`);const h=rH({keyBytes:u,multicodecCode:l});a.id=`${r}#${h}`;try{new URL(a.id)}catch{throw new at(mt.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in lD))throw new at(mt.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new at(mt.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield ei.multicodecToJwk({code:l});a.publicKeyJwk=yield ei.keyConverter(p).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return Ta(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){const{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:l,multicodecName:c}=X8({multibaseKeyId:n}),d=u.byteLength,h=ei.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(d!==h)throw new at(mt.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${h}`);let f=!1;switch(c){case"secp256k1-pub":f=yield fn.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":f=yield gn.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":f=!0;break}if(!f)throw new at(mt.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new at(mt.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in lD))throw new at(mt.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new at(mt.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:m}=yield ei.multicodecToJwk({code:l});a.publicKeyJwk=yield ei.keyConverter(m).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return Ta(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:s,multicodecCode:i}=X8({multibaseKeyId:r});if(i===237){const o=yield ei.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield gn.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield ei.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){const{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&CP(n)==="String"&&n.startsWith("z")}}fu.methodName="key";class ei{static jwkToMulticodec(e){return Ta(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const s=n.join(":"),i=ei.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:$n.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){const n={"P-256":yn.compressPublicKey,secp256k1:fn.compressPublicKey}[e];if(!n)throw new at(mt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){const n={Ed25519:gn,"P-256":yn,secp256k1:fn,X25519:Fh}[e];if(!n)throw new at(mt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Ta(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?$n.getNameFromCode({code:r}):n;const s=n,i=ei.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return Ta(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r!=null&&r.crv&&r.crv in xDe))throw new at(mt.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r==null?void 0:r.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield ei.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield ei.keyCompressor(r.crv)({publicKeyBytes:s}));const{name:i}=yield ei.jwkToMulticodec({jwk:r});return rH({keyBytes:s,multicodecName:i})})}}ei.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};ei.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};ei.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var PDe=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?i(c.value):s(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};class I$ extends Gw{static resolve(e,r){return PDe(this,void 0,void 0,function*(){const n=Er.parse(e);if(!n)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==I$.methodName)return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);const i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{const o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");const a=yield o.json();return Object.assign(Object.assign({},vs),{didDocument:a})}catch{return Object.assign(Object.assign({},vs),{didResolutionMetadata:{error:"notFound"}})}})}}I$.methodName="web";var rM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},CDe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],a=t[r++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,l=u?t[s+2]:0,c=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;u||(f=64,o||(h=64)),n.push(r[c],r[d],r[h],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iH(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CDe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const l=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new IDe;const h=i<<2|a>>4;if(n.push(h),l!==64){const f=a<<4&240|l>>2;if(n.push(f),d!==64){const p=l<<6&192|d;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kDe=function(t){const e=iH(t);return sH.encodeByteArray(e,!0)},tA=function(t){return kDe(t).replace(/\./g,"")},oH=function(t){try{return sH.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ODe=()=>$De().__FIREBASE_DEFAULTS__,RDe=()=>{if(typeof process>"u"||typeof rM>"u")return;const t=rM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NDe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oH(t[1]);return e&&JSON.parse(e)},CS=()=>{try{return ODe()||RDe()||NDe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aH=t=>{var e,r;return(r=(e=CS())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},BDe=t=>{const e=aH(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},uH=()=>{var t;return(t=CS())===null||t===void 0?void 0:t.config},cH=t=>{var e;return(e=CS())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FDe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MDe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tA(JSON.stringify(r)),tA(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jDe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ts())}function UDe(){var t;const e=(t=CS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function LDe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KDe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VDe(){const t=ts();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qDe(){return!UDe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HDe(){try{return typeof indexedDB=="object"}catch{return!1}}function zDe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WDe="FirebaseError";class Tl extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=WDe,Object.setPrototypeOf(this,Tl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jw.prototype.create)}}class Jw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?GDe(i,n):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Tl(s,a,n)}}function GDe(t,e){return t.replace(JDe,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const JDe=/\{\$([^}]+)}/g;function XDe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rA(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(nM(i)&&nM(o)){if(!rA(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function nM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function N0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function B0(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ZDe(t,e){const r=new YDe(t,e);return r.subscribe.bind(r)}class YDe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");QDe(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=dD),s.error===void 0&&(s.error=dD),s.complete===void 0&&(s.complete=dD);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QDe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function dD(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){return t&&t._delegate?t._delegate:t}class bp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new FDe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rxe(e))try{this.getOrInitializeService({instanceIdentifier:_h})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=_h){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_h){return this.instances.has(e)}getOptions(e=_h){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);n===a&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:txe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_h){return this.component?this.component.multipleInstances?e:_h:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function txe(t){return t===_h?void 0:t}function rxe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new exe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ar||(ar={}));const ixe={debug:ar.DEBUG,verbose:ar.VERBOSE,info:ar.INFO,warn:ar.WARN,error:ar.ERROR,silent:ar.SILENT},sxe=ar.INFO,oxe={[ar.DEBUG]:"log",[ar.VERBOSE]:"log",[ar.INFO]:"info",[ar.WARN]:"warn",[ar.ERROR]:"error"},axe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=oxe[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k${constructor(e){this.name=e,this._logLevel=sxe,this._logHandler=axe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ar))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ixe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ar.DEBUG,...e),this._logHandler(this,ar.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ar.VERBOSE,...e),this._logHandler(this,ar.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ar.INFO,...e),this._logHandler(this,ar.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ar.WARN,...e),this._logHandler(this,ar.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ar.ERROR,...e),this._logHandler(this,ar.ERROR,...e)}}const uxe=(t,e)=>e.some(r=>t instanceof r);let iM,sM;function cxe(){return iM||(iM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lxe(){return sM||(sM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lH=new WeakMap,RP=new WeakMap,dH=new WeakMap,fD=new WeakMap,$$=new WeakMap;function dxe(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(tf(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&lH.set(r,t)}).catch(()=>{}),$$.set(e,t),e}function fxe(t){if(RP.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});RP.set(t,e)}let NP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return RP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dH.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hxe(t){NP=t(NP)}function pxe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(hD(this),e,...r);return dH.set(n,e.sort?e.sort():[e]),tf(n)}:lxe().includes(t)?function(...e){return t.apply(hD(this),e),tf(lH.get(this))}:function(...e){return tf(t.apply(hD(this),e))}}function mxe(t){return typeof t=="function"?pxe(t):(t instanceof IDBTransaction&&fxe(t),uxe(t,cxe())?new Proxy(t,NP):t)}function tf(t){if(t instanceof IDBRequest)return dxe(t);if(fD.has(t))return fD.get(t);const e=mxe(t);return e!==t&&(fD.set(t,e),$$.set(e,t)),e}const hD=t=>$$.get(t);function yxe(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=tf(o);return n&&o.addEventListener("upgradeneeded",u=>{n(tf(o.result),u.oldVersion,u.newVersion,tf(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const gxe=["get","getKey","getAll","getAllKeys","count"],vxe=["put","add","delete","clear"],pD=new Map;function oM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pD.get(e))return pD.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=vxe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||gxe.includes(r)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(a.shift())),(await Promise.all([l[r](...a),s&&u.done]))[0]};return pD.set(e,i),i}hxe(t=>({...t,get:(e,r,n)=>oM(e,r)||t.get(e,r,n),has:(e,r)=>!!oM(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wxe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(_xe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function _xe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const BP="@firebase/app",aM="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new k$("@firebase/app"),bxe="@firebase/app-compat",Exe="@firebase/analytics-compat",Axe="@firebase/analytics",Sxe="@firebase/app-check-compat",Txe="@firebase/app-check",Dxe="@firebase/auth",xxe="@firebase/auth-compat",Pxe="@firebase/database",Cxe="@firebase/database-compat",Ixe="@firebase/functions",kxe="@firebase/functions-compat",$xe="@firebase/installations",Oxe="@firebase/installations-compat",Rxe="@firebase/messaging",Nxe="@firebase/messaging-compat",Bxe="@firebase/performance",Fxe="@firebase/performance-compat",Mxe="@firebase/remote-config",jxe="@firebase/remote-config-compat",Uxe="@firebase/storage",Lxe="@firebase/storage-compat",Kxe="@firebase/firestore",Vxe="@firebase/vertexai-preview",qxe="@firebase/firestore-compat",Hxe="firebase",zxe="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="[DEFAULT]",Wxe={[BP]:"fire-core",[bxe]:"fire-core-compat",[Axe]:"fire-analytics",[Exe]:"fire-analytics-compat",[Txe]:"fire-app-check",[Sxe]:"fire-app-check-compat",[Dxe]:"fire-auth",[xxe]:"fire-auth-compat",[Pxe]:"fire-rtdb",[Cxe]:"fire-rtdb-compat",[Ixe]:"fire-fn",[kxe]:"fire-fn-compat",[$xe]:"fire-iid",[Oxe]:"fire-iid-compat",[Rxe]:"fire-fcm",[Nxe]:"fire-fcm-compat",[Bxe]:"fire-perf",[Fxe]:"fire-perf-compat",[Mxe]:"fire-rc",[jxe]:"fire-rc-compat",[Uxe]:"fire-gcs",[Lxe]:"fire-gcs-compat",[Kxe]:"fire-fst",[qxe]:"fire-fst-compat",[Vxe]:"fire-vertex","fire-js":"fire-js",[Hxe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Map,Gxe=new Map,MP=new Map;function uM(t,e){try{t.container.addComponent(e)}catch(r){pl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ey(t){const e=t.name;if(MP.has(e))return pl.debug(`There were multiple attempts to register component ${e}.`),!1;MP.set(e,t);for(const r of nA.values())uM(r,t);for(const r of Gxe.values())uM(r,t);return!0}function O$(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Cu(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jxe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rf=new Jw("app","Firebase",Jxe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xxe{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=zxe;function fH(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:FP,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw rf.create("bad-app-name",{appName:String(s)});if(r||(r=uH()),!r)throw rf.create("no-options");const i=nA.get(s);if(i){if(rA(r,i.options)&&rA(n,i.config))return i;throw rf.create("duplicate-app",{appName:s})}const o=new nxe(s);for(const u of MP.values())o.addComponent(u);const a=new Xxe(r,n,o);return nA.set(s,a),a}function hH(t=FP){const e=nA.get(t);if(!e&&t===FP&&uH())return fH();if(!e)throw rf.create("no-app",{appName:t});return e}function nf(t,e,r){var n;let s=(n=Wxe[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pl.warn(a.join(" "));return}Ey(new bp(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zxe="firebase-heartbeat-database",Yxe=1,sw="firebase-heartbeat-store";let mD=null;function pH(){return mD||(mD=yxe(Zxe,Yxe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sw)}catch(r){console.warn(r)}}}}).catch(t=>{throw rf.create("idb-open",{originalErrorMessage:t.message})})),mD}async function Qxe(t){try{const r=(await pH()).transaction(sw),n=await r.objectStore(sw).get(mH(t));return await r.done,n}catch(e){if(e instanceof Tl)pl.warn(e.message);else{const r=rf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pl.warn(r.message)}}}async function cM(t,e){try{const n=(await pH()).transaction(sw,"readwrite");await n.objectStore(sw).put(e,mH(t)),await n.done}catch(r){if(r instanceof Tl)pl.warn(r.message);else{const n=rf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});pl.warn(n.message)}}}function mH(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePe=1024,tPe=30*24*60*60*1e3;class rPe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new iPe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lM();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=tPe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){pl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=lM(),{heartbeatsToSend:n,unsentEntries:s}=nPe(this._heartbeatsCache.heartbeats),i=tA(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return pl.warn(r),""}}}function lM(){return new Date().toISOString().substring(0,10)}function nPe(t,e=ePe){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),dM(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),dM(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class iPe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HDe()?zDe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Qxe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return cM(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return cM(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dM(t){return tA(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sPe(t){Ey(new bp("platform-logger",e=>new wxe(e),"PRIVATE")),Ey(new bp("heartbeat",e=>new rPe(e),"PRIVATE")),nf(BP,aM,t),nf(BP,aM,"esm2017"),nf("fire-js","")}sPe("");function R$(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function yH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oPe=yH,gH=new Jw("auth","Firebase",yH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new k$("@firebase/auth");function aPe(t,...e){iA.logLevel<=ar.WARN&&iA.warn(`Auth (${Jy}): ${t}`,...e)}function U1(t,...e){iA.logLevel<=ar.ERROR&&iA.error(`Auth (${Jy}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t,...e){throw B$(t,...e)}function Ma(t,...e){return B$(t,...e)}function N$(t,e,r){const n=Object.assign(Object.assign({},oPe()),{[e]:r});return new Jw("auth","Firebase",n).create(e,{appName:t.name})}function sf(t){return N$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uPe(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ca(t,"argument-error"),N$(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function B$(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return gH.create(t,...e)}function xt(t,e,...r){if(!t)throw B$(e,...r)}function Zc(t){const e="INTERNAL ASSERTION FAILED: "+t;throw U1(e),new Error(e)}function ml(t,e){t||Zc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cPe(){return fM()==="http:"||fM()==="https:"}function fM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cPe()||LDe()||"connection"in navigator)?navigator.onLine:!0}function dPe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,r){this.shortDelay=e,this.longDelay=r,ml(r>e,"Short delay should be less than long delay!"),this.isMobile=jDe()||KDe()}get(){return lPe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t,e){ml(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hPe=new Zw(3e4,6e4);function Rp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kf(t,e,r,n,s={}){return wH(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const a=Xw(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),vH.fetch()(_H(t,t.config.apiHost,r,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function wH(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},fPe),e);try{const s=new mPe(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vb(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vb(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vb(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vb(t,"user-disabled",o);const c=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw N$(t,c,l);ca(t,c)}}catch(s){if(s instanceof Tl)throw s;ca(t,"network-request-failed",{message:String(s)})}}async function IS(t,e,r,n,s={}){const i=await kf(t,e,r,n,s);return"mfaPendingCredential"in i&&ca(t,"multi-factor-auth-required",{_serverResponse:i}),i}function _H(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?F$(t.config,s):`${t.config.apiScheme}://${s}`}function pPe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mPe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ma(this.auth,"network-request-failed")),hPe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vb(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ma(t,e,n);return s.customData._tokenResponse=r,s}function hM(t){return t!==void 0&&t.enterprise!==void 0}class yPe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return pPe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gPe(t,e){return kf(t,"GET","/v2/recaptchaConfig",Rp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vPe(t,e){return kf(t,"POST","/v1/accounts:delete",e)}async function bH(t,e){return kf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wPe(t,e=!1){const r=ua(t),n=await r.getIdToken(e),s=M$(n);xt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:mv(yD(s.auth_time)),issuedAtTime:mv(yD(s.iat)),expirationTime:mv(yD(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yD(t){return Number(t)*1e3}function M$(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return U1("JWT malformed, contained fewer than 3 sections"),null;try{const s=oH(r);return s?JSON.parse(s):(U1("Failed to decode base64 JWT payload"),null)}catch(s){return U1("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function pM(t){const e=M$(t);return xt(e,"internal-error"),xt(typeof e.exp<"u","internal-error"),xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Tl&&_Pe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _Pe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bPe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=mv(this.lastLoginAt),this.creationTime=mv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t){var e;const r=t.auth,n=await t.getIdToken(),s=await ow(t,bH(r,{idToken:n}));xt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?EH(i.providerUserInfo):[],a=APe(t.providerData,o),u=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new UP(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function EPe(t){const e=ua(t);await sA(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function APe(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function EH(t){return t.map(e=>{var{providerId:r}=e,n=R$(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SPe(t,e){const r=await wH(t,{},async()=>{const n=Xw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=_H(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vH.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function TPe(t,e){return kf(t,"POST","/v2/accounts:revokeToken",Rp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt(typeof e.idToken<"u","internal-error"),xt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){xt(e.length!==0,"internal-error");const r=pM(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await SPe(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new Jm;return n&&(xt(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(xt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(xt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jm,this.toJSON())}_performRefresh(){return Zc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e){xt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yc{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=R$(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bPe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new UP(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ow(this,this.stsTokenManager.getToken(this.auth,e));return xt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return wPe(this,e)}reload(){return EPe(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Yc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await sA(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cu(this.auth.app))return Promise.reject(sf(this.auth));const e=await this.getIdToken();return await ow(this,vPe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,a,u,l,c;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(s=r.email)!==null&&s!==void 0?s:void 0,f=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=r.photoURL)!==null&&o!==void 0?o:void 0,m=(a=r.tenantId)!==null&&a!==void 0?a:void 0,E=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,A=(l=r.createdAt)!==null&&l!==void 0?l:void 0,_=(c=r.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:g,emailVerified:v,isAnonymous:S,providerData:x,stsTokenManager:D}=r;xt(g&&D,e,"internal-error");const w=Jm.fromJSON(this.name,D);xt(typeof g=="string",e,"internal-error"),ad(d,e.name),ad(h,e.name),xt(typeof v=="boolean",e,"internal-error"),xt(typeof S=="boolean",e,"internal-error"),ad(f,e.name),ad(p,e.name),ad(m,e.name),ad(E,e.name),ad(A,e.name),ad(_,e.name);const b=new Yc({uid:g,auth:e,email:h,emailVerified:v,displayName:d,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:w,createdAt:A,lastLoginAt:_});return x&&Array.isArray(x)&&(b.providerData=x.map(T=>Object.assign({},T))),E&&(b._redirectEventId=E),b}static async _fromIdTokenResponse(e,r,n=!1){const s=new Jm;s.updateFromServerResponse(r);const i=new Yc({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await sA(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];xt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?EH(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Jm;a.updateFromIdToken(n);const u=new Yc({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new UP(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new Map;function Qc(t){ml(t instanceof Function,"Expected a class definition");let e=mM.get(t);return e?(ml(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}AH.type="NONE";const yM=AH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e,r){return`firebase:${t}:${e}:${r}`}class Xm{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=L1(this.userKey,s.apiKey,i),this.fullPersistenceKey=L1("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Xm(Qc(yM),e,n);const s=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=s[0]||Qc(yM);const o=L1(n,e.config.apiKey,e.name);let a=null;for(const l of r)try{const c=await l._get(o);if(c){const d=Yc._fromJSON(e,c);l!==i&&(a=d),i=l;break}}catch{}const u=s.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Xm(i,e,n):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(r.map(async l=>{if(l!==i)try{await l._remove(o)}catch{}})),new Xm(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CH(e))return"Blackberry";if(IH(e))return"Webos";if(TH(e))return"Safari";if((e.includes("chrome/")||DH(e))&&!e.includes("edge/"))return"Chrome";if(PH(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function SH(t=ts()){return/firefox\//i.test(t)}function TH(t=ts()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DH(t=ts()){return/crios\//i.test(t)}function xH(t=ts()){return/iemobile/i.test(t)}function PH(t=ts()){return/android/i.test(t)}function CH(t=ts()){return/blackberry/i.test(t)}function IH(t=ts()){return/webos/i.test(t)}function j$(t=ts()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DPe(t=ts()){var e;return j$(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xPe(){return VDe()&&document.documentMode===10}function kH(t=ts()){return j$(t)||PH(t)||IH(t)||CH(t)||/windows phone/i.test(t)||xH(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(t,e=[]){let r;switch(t){case"Browser":r=gM(ts());break;case"Worker":r=`${gM(ts())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Jy}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CPe(t,e={}){return kf(t,"GET","/v2/passwordPolicy",Rp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IPe=6;class kPe{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:IPe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Pe{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vM(this),this.idTokenSubscription=new vM(this),this.beforeStateQueue=new PPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Qc(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Xm.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bH(this,{idToken:e}),n=await Yc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Cu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await sA(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dPe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cu(this.app))return Promise.reject(sf(this));const r=e?ua(e):null;return r&&xt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cu(this.app)?Promise.reject(sf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cu(this.app)?Promise.reject(sf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CPe(this),r=new kPe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await TPe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Qc(e)||this._popupRedirectResolver;xt(r,this,"argument-error"),this.redirectPersistenceManager=await Xm.create(this,[Qc(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$H(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&aPe(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Np(t){return ua(t)}class vM{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZDe(r=>this.observer=r)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OPe(t){kS=t}function OH(t){return kS.loadJS(t)}function RPe(){return kS.recaptchaEnterpriseScript}function NPe(){return kS.gapiScript}function BPe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const FPe="recaptcha-enterprise",MPe="NO_RECAPTCHA";class jPe{constructor(e){this.type=FPe,this.auth=Np(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gPe(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new yPe(u);return i.tenantId==null?i._agentRecaptchaConfig=l:i._tenantRecaptchaConfigs[i.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;hM(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(l=>{o(l)}).catch(()=>{o(MPe)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{n(this.auth).then(a=>{if(!r&&hM(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=RPe();u.length!==0&&(u+=a),OH(u).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function wM(t,e,r,n=!1){const s=new jPe(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _M(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await wM(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await wM(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPe(t,e){const r=O$(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(rA(i,e??{}))return s;ca(s,"already-initialized")}return r.initialize({options:e})}function LPe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Qc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function KPe(t,e,r){const n=Np(t);xt(n._canInitEmulator,n,"emulator-config-failed"),xt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=RH(e),{host:o,port:a}=VPe(e),u=a===null?"":`:${a}`;n.config.emulator={url:`${i}//${o}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),qPe()}function RH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VPe(t){const e=RH(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:bM(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:bM(o)}}}function bM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qPe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Zc("not implemented")}_getIdTokenResponse(e){return Zc("not implemented")}_linkToIdToken(e,r){return Zc("not implemented")}_getReauthenticationResolver(e){return Zc("not implemented")}}async function HPe(t,e){return kf(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zPe(t,e){return IS(t,"POST","/v1/accounts:signInWithPassword",Rp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WPe(t,e){return IS(t,"POST","/v1/accounts:signInWithEmailLink",Rp(t,e))}async function GPe(t,e){return IS(t,"POST","/v1/accounts:signInWithEmailLink",Rp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends U${constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new aw(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new aw(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _M(e,r,"signInWithPassword",zPe);case"emailLink":return WPe(e,{email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _M(e,n,"signUpPassword",HPe);case"emailLink":return GPe(e,{idToken:r,email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t,e){return IS(t,"POST","/v1/accounts:signInWithIdp",Rp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPe="http://localhost";class Ep extends U${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ep(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ca("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=R$(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Ep(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Zm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Zm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Zm(e,r)}buildRequest(){const e={requestUri:JPe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Xw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XPe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZPe(t){const e=N0(B0(t)).link,r=e?N0(B0(e)).deep_link_id:null,n=N0(B0(t)).deep_link_id;return(n?N0(B0(n)).link:null)||n||r||e||t}class L${constructor(e){var r,n,s,i,o,a;const u=N0(B0(e)),l=(r=u.apiKey)!==null&&r!==void 0?r:null,c=(n=u.oobCode)!==null&&n!==void 0?n:null,d=XPe((s=u.mode)!==null&&s!==void 0?s:null);xt(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=ZPe(e);try{return new L$(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.providerId=Xy.PROVIDER_ID}static credential(e,r){return aw._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=L$.parseLink(r);return xt(n,"argument-error"),aw._fromEmailAndCode(e,n.code,n.tenantId)}}Xy.PROVIDER_ID="password";Xy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw extends K${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Yw{constructor(){super("facebook.com")}static credential(e){return Ep._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Md.credential(e.oauthAccessToken)}catch{return null}}}Md.FACEBOOK_SIGN_IN_METHOD="facebook.com";Md.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Yw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ep._fromParams({providerId:jd.PROVIDER_ID,signInMethod:jd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return jd.credentialFromTaggedObject(e)}static credentialFromError(e){return jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return jd.credential(r,n)}catch{return null}}}jd.GOOGLE_SIGN_IN_METHOD="google.com";jd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Yw{constructor(){super("github.com")}static credential(e){return Ep._fromParams({providerId:Ud.PROVIDER_ID,signInMethod:Ud.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ud.credentialFromTaggedObject(e)}static credentialFromError(e){return Ud.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ud.credential(e.oauthAccessToken)}catch{return null}}}Ud.GITHUB_SIGN_IN_METHOD="github.com";Ud.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends Yw{constructor(){super("twitter.com")}static credential(e,r){return Ep._fromParams({providerId:Ld.PROVIDER_ID,signInMethod:Ld.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ld.credentialFromTaggedObject(e)}static credentialFromError(e){return Ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ld.credential(r,n)}catch{return null}}}Ld.TWITTER_SIGN_IN_METHOD="twitter.com";Ld.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Yc._fromIdTokenResponse(e,n,s),o=EM(n);return new Ay({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=EM(n);return new Ay({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function EM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA extends Tl{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,oA.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new oA(e,r,n,s)}}function NH(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?oA._fromErrorAndOperation(t,i,e,n):i})}async function YPe(t,e,r=!1){const n=await ow(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ay._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QPe(t,e,r=!1){const{auth:n}=t;if(Cu(n.app))return Promise.reject(sf(n));const s="reauthenticate";try{const i=await ow(t,NH(n,s,e,t),r);xt(i.idToken,n,"internal-error");const o=M$(i.idToken);xt(o,n,"internal-error");const{sub:a}=o;return xt(t.uid===a,n,"user-mismatch"),Ay._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ca(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BH(t,e,r=!1){if(Cu(t.app))return Promise.reject(sf(t));const n="signIn",s=await NH(t,n,e),i=await Ay._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function eCe(t,e){return BH(Np(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tCe(t){const e=Np(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function NRe(t,e,r){return Cu(t.app)?Promise.reject(sf(t)):eCe(ua(t),Xy.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&tCe(t),n})}function rCe(t,e,r,n){return ua(t).onIdTokenChanged(e,r,n)}function nCe(t,e,r){return ua(t).beforeAuthStateChanged(e,r)}function iCe(t,e,r,n){return ua(t).onAuthStateChanged(e,r,n)}const aA="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(aA,"1"),this.storage.removeItem(aA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sCe=1e3,oCe=10;class MH extends FH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);xPe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oCe):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},sCe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}MH.type="LOCAL";const aCe=MH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH extends FH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}jH.type="SESSION";const UH=jH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uCe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new $S(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(o).map(async l=>l(r.origin,i)),u=await uCe(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$S.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cCe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const l=V$("",20);s.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(c),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(){return window}function lCe(t){Mu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){return typeof Mu().WorkerGlobalScope<"u"&&typeof Mu().importScripts=="function"}async function dCe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fCe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hCe(){return LH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH="firebaseLocalStorageDb",pCe=1,uA="firebaseLocalStorage",VH="fbase_key";class Qw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function OS(t,e){return t.transaction([uA],e?"readwrite":"readonly").objectStore(uA)}function mCe(){const t=indexedDB.deleteDatabase(KH);return new Qw(t).toPromise()}function LP(){const t=indexedDB.open(KH,pCe);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(uA,{keyPath:VH})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(uA)?e(n):(n.close(),await mCe(),e(await LP()))})})}async function AM(t,e,r){const n=OS(t,!0).put({[VH]:e,value:r});return new Qw(n).toPromise()}async function yCe(t,e){const r=OS(t,!1).get(e),n=await new Qw(r).toPromise();return n===void 0?null:n.value}function SM(t,e){const r=OS(t,!0).delete(e);return new Qw(r).toPromise()}const gCe=800,vCe=3;class qH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LP(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>vCe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$S._getInstance(hCe()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await dCe(),!this.activeServiceWorker)return;this.sender=new cCe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fCe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await LP();return await AM(e,aA,"1"),await SM(e,aA),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>AM(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>yCe(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>SM(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=OS(s,!1).getAll();return new Qw(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gCe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qH.type="LOCAL";const wCe=qH;new Zw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t,e){return e?Qc(e):(xt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q$ extends U${constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Zm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Zm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function _Ce(t){return BH(t.auth,new q$(t),t.bypassAuthState)}function bCe(t){const{auth:e,user:r}=t;return xt(r,e,"internal-error"),QPe(r,new q$(t),t.bypassAuthState)}async function ECe(t){const{auth:e,user:r}=t;return xt(r,e,"internal-error"),YPe(r,new q$(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _Ce;case"linkViaPopup":case"linkViaRedirect":return ECe;case"reauthViaPopup":case"reauthViaRedirect":return bCe;default:ca(this.auth,"internal-error")}}resolve(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ACe=new Zw(2e3,1e4);async function BRe(t,e,r){if(Cu(t.app))return Promise.reject(Ma(t,"operation-not-supported-in-this-environment"));const n=Np(t);uPe(t,e,K$);const s=HH(n,r);return new Mh(n,"signInViaPopup",e,s).executeNotNull()}class Mh extends zH{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Mh.currentPopupAction&&Mh.currentPopupAction.cancel(),Mh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){ml(this.filter.length===1,"Popup operations only handle one event");const e=V$();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ACe.get())};e()}}Mh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SCe="pendingRedirect",K1=new Map;class TCe extends zH{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=K1.get(this.auth._key());if(!e){try{const n=await DCe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}K1.set(this.auth._key(),e)}return this.bypassAuthState||K1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DCe(t,e){const r=CCe(e),n=PCe(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function xCe(t,e){K1.set(t._key(),e)}function PCe(t){return Qc(t._redirectPersistence)}function CCe(t){return L1(SCe,t.config.apiKey,t.name)}async function ICe(t,e,r=!1){if(Cu(t.app))return Promise.reject(sf(t));const n=Np(t),s=HH(n,e),o=await new TCe(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kCe=10*60*1e3;class $Ce{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OCe(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!WH(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ma(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kCe&&this.cachedEventUids.clear(),this.cachedEventUids.has(TM(e))}saveEventToCache(e){this.cachedEventUids.add(TM(e)),this.lastProcessedEventTime=Date.now()}}function TM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OCe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RCe(t,e={}){return kf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NCe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BCe=/^https?/;async function FCe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RCe(t);for(const r of e)try{if(MCe(r))return}catch{}ca(t,"unauthorized-domain")}function MCe(t){const e=jP(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!BCe.test(r))return!1;if(NCe.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jCe=new Zw(3e4,6e4);function DM(){const t=Mu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function UCe(t){return new Promise((e,r)=>{var n,s,i;function o(){DM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DM(),r(Ma(t,"network-request-failed"))},timeout:jCe.get()})}if(!((s=(n=Mu().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Mu().gapi)===null||i===void 0)&&i.load)o();else{const a=BPe("iframefcb");return Mu()[a]=()=>{gapi.load?o():r(Ma(t,"network-request-failed"))},OH(`${NPe()}?onload=${a}`).catch(u=>r(u))}}).catch(e=>{throw V1=null,e})}let V1=null;function LCe(t){return V1=V1||UCe(t),V1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KCe=new Zw(5e3,15e3),VCe="__/auth/iframe",qCe="emulator/auth/iframe",HCe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zCe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WCe(t){const e=t.config;xt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?F$(e,qCe):`https://${t.config.authDomain}/${VCe}`,n={apiKey:e.apiKey,appName:t.name,v:Jy},s=zCe.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Xw(n).slice(1)}`}async function GCe(t){const e=await LCe(t),r=Mu().gapi;return xt(r,t,"internal-error"),e.open({where:document.body,url:WCe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HCe,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ma(t,"network-request-failed"),a=Mu().setTimeout(()=>{i(o)},KCe.get());function u(){Mu().clearTimeout(a),s(n)}n.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JCe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XCe=500,ZCe=600,YCe="_blank",QCe="http://localhost";class xM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eIe(t,e,r,n=XCe,s=ZCe){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const u=Object.assign(Object.assign({},JCe),{width:n.toString(),height:s.toString(),top:i,left:o}),l=ts().toLowerCase();r&&(a=DH(l)?YCe:r),SH(l)&&(e=e||QCe,u.scrollbars="yes");const c=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(DPe(l)&&a!=="_self")return tIe(e||"",a),new xM(null);const d=window.open(e||"",a,c);xt(d,t,"popup-blocked");try{d.focus()}catch{}return new xM(d)}function tIe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rIe="__/auth/handler",nIe="emulator/auth/handler",iIe=encodeURIComponent("fac");async function PM(t,e,r,n,s,i){xt(t.config.authDomain,t,"auth-domain-config-required"),xt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Jy,eventId:s};if(e instanceof K$){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XDe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof Yw){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await t._getAppCheckToken(),l=u?`#${iIe}=${encodeURIComponent(u)}`:"";return`${sIe(t)}?${Xw(a).slice(1)}${l}`}function sIe({config:t}){return t.emulator?F$(t,nIe):`https://${t.authDomain}/${rIe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="webStorageSupport";class oIe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UH,this._completeRedirectFn=ICe,this._overrideRedirectResult=xCe}async _openPopup(e,r,n,s){var i;ml((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await PM(e,r,n,jP(),s);return eIe(e,o,V$())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await PM(e,r,n,jP(),s);return lCe(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ml(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await GCe(e),n=new $Ce(e);return r.register("authEvent",s=>(xt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(gD,{type:gD},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[gD];o!==void 0&&r(!!o),ca(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=FCe(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return kH()||TH()||j$()}}const aIe=oIe;var CM="@firebase/auth",IM="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uIe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cIe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lIe(t){Ey(new bp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;xt(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$H(t)},l=new $Pe(n,s,i,u);return LPe(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ey(new bp("auth-internal",e=>{const r=Np(e.getProvider("auth").getImmediate());return(n=>new uIe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),nf(CM,IM,cIe(t)),nf(CM,IM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dIe=5*60,fIe=cH("authIdTokenMaxAge")||dIe;let kM=null;const hIe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>fIe)return;const s=r==null?void 0:r.token;kM!==s&&(kM=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bm(t=hH()){const e=O$(t,"auth");if(e.isInitialized())return e.getImmediate();const r=UPe(t,{popupRedirectResolver:aIe,persistence:[wCe,aCe,UH]}),n=cH("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=hIe(i.toString());nCe(r,o,()=>o(r.currentUser)),rCe(r,a=>o(a))}}const s=aH("auth");return s&&KPe(r,`http://${s}`),r}function pIe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OPe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ma("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",pIe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lIe("Browser");var $M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sp,GH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function b(){}b.prototype=w.prototype,D.D=w.prototype,D.prototype=new b,D.prototype.constructor=D,D.C=function(T,P,C){for(var k=Array(arguments.length-2),K=2;K<arguments.length;K++)k[K-2]=arguments[K];return w.prototype[P].apply(T,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,w,b){b||(b=0);var T=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)T[P]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(P=0;16>P;++P)T[P]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=D.g[0],b=D.g[1],P=D.g[2];var C=D.g[3],k=w+(C^b&(P^C))+T[0]+3614090360&4294967295;w=b+(k<<7&4294967295|k>>>25),k=C+(P^w&(b^P))+T[1]+3905402710&4294967295,C=w+(k<<12&4294967295|k>>>20),k=P+(b^C&(w^b))+T[2]+606105819&4294967295,P=C+(k<<17&4294967295|k>>>15),k=b+(w^P&(C^w))+T[3]+3250441966&4294967295,b=P+(k<<22&4294967295|k>>>10),k=w+(C^b&(P^C))+T[4]+4118548399&4294967295,w=b+(k<<7&4294967295|k>>>25),k=C+(P^w&(b^P))+T[5]+1200080426&4294967295,C=w+(k<<12&4294967295|k>>>20),k=P+(b^C&(w^b))+T[6]+2821735955&4294967295,P=C+(k<<17&4294967295|k>>>15),k=b+(w^P&(C^w))+T[7]+4249261313&4294967295,b=P+(k<<22&4294967295|k>>>10),k=w+(C^b&(P^C))+T[8]+1770035416&4294967295,w=b+(k<<7&4294967295|k>>>25),k=C+(P^w&(b^P))+T[9]+2336552879&4294967295,C=w+(k<<12&4294967295|k>>>20),k=P+(b^C&(w^b))+T[10]+4294925233&4294967295,P=C+(k<<17&4294967295|k>>>15),k=b+(w^P&(C^w))+T[11]+2304563134&4294967295,b=P+(k<<22&4294967295|k>>>10),k=w+(C^b&(P^C))+T[12]+1804603682&4294967295,w=b+(k<<7&4294967295|k>>>25),k=C+(P^w&(b^P))+T[13]+4254626195&4294967295,C=w+(k<<12&4294967295|k>>>20),k=P+(b^C&(w^b))+T[14]+2792965006&4294967295,P=C+(k<<17&4294967295|k>>>15),k=b+(w^P&(C^w))+T[15]+1236535329&4294967295,b=P+(k<<22&4294967295|k>>>10),k=w+(P^C&(b^P))+T[1]+4129170786&4294967295,w=b+(k<<5&4294967295|k>>>27),k=C+(b^P&(w^b))+T[6]+3225465664&4294967295,C=w+(k<<9&4294967295|k>>>23),k=P+(w^b&(C^w))+T[11]+643717713&4294967295,P=C+(k<<14&4294967295|k>>>18),k=b+(C^w&(P^C))+T[0]+3921069994&4294967295,b=P+(k<<20&4294967295|k>>>12),k=w+(P^C&(b^P))+T[5]+3593408605&4294967295,w=b+(k<<5&4294967295|k>>>27),k=C+(b^P&(w^b))+T[10]+38016083&4294967295,C=w+(k<<9&4294967295|k>>>23),k=P+(w^b&(C^w))+T[15]+3634488961&4294967295,P=C+(k<<14&4294967295|k>>>18),k=b+(C^w&(P^C))+T[4]+3889429448&4294967295,b=P+(k<<20&4294967295|k>>>12),k=w+(P^C&(b^P))+T[9]+568446438&4294967295,w=b+(k<<5&4294967295|k>>>27),k=C+(b^P&(w^b))+T[14]+3275163606&4294967295,C=w+(k<<9&4294967295|k>>>23),k=P+(w^b&(C^w))+T[3]+4107603335&4294967295,P=C+(k<<14&4294967295|k>>>18),k=b+(C^w&(P^C))+T[8]+1163531501&4294967295,b=P+(k<<20&4294967295|k>>>12),k=w+(P^C&(b^P))+T[13]+2850285829&4294967295,w=b+(k<<5&4294967295|k>>>27),k=C+(b^P&(w^b))+T[2]+4243563512&4294967295,C=w+(k<<9&4294967295|k>>>23),k=P+(w^b&(C^w))+T[7]+1735328473&4294967295,P=C+(k<<14&4294967295|k>>>18),k=b+(C^w&(P^C))+T[12]+2368359562&4294967295,b=P+(k<<20&4294967295|k>>>12),k=w+(b^P^C)+T[5]+4294588738&4294967295,w=b+(k<<4&4294967295|k>>>28),k=C+(w^b^P)+T[8]+2272392833&4294967295,C=w+(k<<11&4294967295|k>>>21),k=P+(C^w^b)+T[11]+1839030562&4294967295,P=C+(k<<16&4294967295|k>>>16),k=b+(P^C^w)+T[14]+4259657740&4294967295,b=P+(k<<23&4294967295|k>>>9),k=w+(b^P^C)+T[1]+2763975236&4294967295,w=b+(k<<4&4294967295|k>>>28),k=C+(w^b^P)+T[4]+1272893353&4294967295,C=w+(k<<11&4294967295|k>>>21),k=P+(C^w^b)+T[7]+4139469664&4294967295,P=C+(k<<16&4294967295|k>>>16),k=b+(P^C^w)+T[10]+3200236656&4294967295,b=P+(k<<23&4294967295|k>>>9),k=w+(b^P^C)+T[13]+681279174&4294967295,w=b+(k<<4&4294967295|k>>>28),k=C+(w^b^P)+T[0]+3936430074&4294967295,C=w+(k<<11&4294967295|k>>>21),k=P+(C^w^b)+T[3]+3572445317&4294967295,P=C+(k<<16&4294967295|k>>>16),k=b+(P^C^w)+T[6]+76029189&4294967295,b=P+(k<<23&4294967295|k>>>9),k=w+(b^P^C)+T[9]+3654602809&4294967295,w=b+(k<<4&4294967295|k>>>28),k=C+(w^b^P)+T[12]+3873151461&4294967295,C=w+(k<<11&4294967295|k>>>21),k=P+(C^w^b)+T[15]+530742520&4294967295,P=C+(k<<16&4294967295|k>>>16),k=b+(P^C^w)+T[2]+3299628645&4294967295,b=P+(k<<23&4294967295|k>>>9),k=w+(P^(b|~C))+T[0]+4096336452&4294967295,w=b+(k<<6&4294967295|k>>>26),k=C+(b^(w|~P))+T[7]+1126891415&4294967295,C=w+(k<<10&4294967295|k>>>22),k=P+(w^(C|~b))+T[14]+2878612391&4294967295,P=C+(k<<15&4294967295|k>>>17),k=b+(C^(P|~w))+T[5]+4237533241&4294967295,b=P+(k<<21&4294967295|k>>>11),k=w+(P^(b|~C))+T[12]+1700485571&4294967295,w=b+(k<<6&4294967295|k>>>26),k=C+(b^(w|~P))+T[3]+2399980690&4294967295,C=w+(k<<10&4294967295|k>>>22),k=P+(w^(C|~b))+T[10]+4293915773&4294967295,P=C+(k<<15&4294967295|k>>>17),k=b+(C^(P|~w))+T[1]+2240044497&4294967295,b=P+(k<<21&4294967295|k>>>11),k=w+(P^(b|~C))+T[8]+1873313359&4294967295,w=b+(k<<6&4294967295|k>>>26),k=C+(b^(w|~P))+T[15]+4264355552&4294967295,C=w+(k<<10&4294967295|k>>>22),k=P+(w^(C|~b))+T[6]+2734768916&4294967295,P=C+(k<<15&4294967295|k>>>17),k=b+(C^(P|~w))+T[13]+1309151649&4294967295,b=P+(k<<21&4294967295|k>>>11),k=w+(P^(b|~C))+T[4]+4149444226&4294967295,w=b+(k<<6&4294967295|k>>>26),k=C+(b^(w|~P))+T[11]+3174756917&4294967295,C=w+(k<<10&4294967295|k>>>22),k=P+(w^(C|~b))+T[2]+718787259&4294967295,P=C+(k<<15&4294967295|k>>>17),k=b+(C^(P|~w))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+C&4294967295}n.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var b=w-this.blockSize,T=this.B,P=this.h,C=0;C<w;){if(P==0)for(;C<=b;)s(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<w;)if(T[P++]=D.charCodeAt(C++),P==this.blockSize){s(this,T),P=0;break}}else for(;C<w;)if(T[P++]=D[C++],P==this.blockSize){s(this,T),P=0;break}}this.h=P,this.o+=w},n.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var b=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=b&255,b/=256;for(this.u(D),D=Array(16),w=b=0;4>w;++w)for(var T=0;32>T;T+=8)D[b++]=this.g[w]>>>T&255;return D};function i(D,w){var b=a;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=w(D)}function o(D,w){this.h=w;for(var b=[],T=!0,P=D.length-1;0<=P;P--){var C=D[P]|0;T&&C==w||(b[P]=C,T=!1)}this.g=b}var a={};function u(D){return-128<=D&&128>D?i(D,function(w){return new o([w|0],0>w?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return d;if(0>D)return E(l(-D));for(var w=[],b=1,T=0;D>=b;T++)w[T]=D/b|0,b*=4294967296;return new o(w,0)}function c(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return E(c(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(w,8)),T=d,P=0;P<D.length;P+=8){var C=Math.min(8,D.length-P),k=parseInt(D.substring(P,P+C),w);8>C?(C=l(Math.pow(w,C)),T=T.j(C).add(l(k))):(T=T.j(b),T=T.add(l(k)))}return T}var d=u(0),h=u(1),f=u(16777216);t=o.prototype,t.m=function(){if(m(this))return-E(this).m();for(var D=0,w=1,b=0;b<this.g.length;b++){var T=this.i(b);D+=(0<=T?T:4294967296+T)*w,w*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(p(this))return"0";if(m(this))return"-"+E(this).toString(D);for(var w=l(Math.pow(D,6)),b=this,T="";;){var P=v(b,w).g;b=A(b,P.j(w));var C=((0<b.g.length?b.g[0]:b.h)>>>0).toString(D);if(b=P,p(b))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function p(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function m(D){return D.h==-1}t.l=function(D){return D=A(this,D),m(D)?-1:p(D)?0:1};function E(D){for(var w=D.g.length,b=[],T=0;T<w;T++)b[T]=~D.g[T];return new o(b,~D.h).add(h)}t.abs=function(){return m(this)?E(this):this},t.add=function(D){for(var w=Math.max(this.g.length,D.g.length),b=[],T=0,P=0;P<=w;P++){var C=T+(this.i(P)&65535)+(D.i(P)&65535),k=(C>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);T=k>>>16,C&=65535,k&=65535,b[P]=k<<16|C}return new o(b,b[b.length-1]&-2147483648?-1:0)};function A(D,w){return D.add(E(w))}t.j=function(D){if(p(this)||p(D))return d;if(m(this))return m(D)?E(this).j(E(D)):E(E(this).j(D));if(m(D))return E(this.j(E(D)));if(0>this.l(f)&&0>D.l(f))return l(this.m()*D.m());for(var w=this.g.length+D.g.length,b=[],T=0;T<2*w;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var P=0;P<D.g.length;P++){var C=this.i(T)>>>16,k=this.i(T)&65535,K=D.i(P)>>>16,L=D.i(P)&65535;b[2*T+2*P]+=k*L,_(b,2*T+2*P),b[2*T+2*P+1]+=C*L,_(b,2*T+2*P+1),b[2*T+2*P+1]+=k*K,_(b,2*T+2*P+1),b[2*T+2*P+2]+=C*K,_(b,2*T+2*P+2)}for(T=0;T<w;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=w;T<2*w;T++)b[T]=0;return new o(b,0)};function _(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function g(D,w){this.g=D,this.h=w}function v(D,w){if(p(w))throw Error("division by zero");if(p(D))return new g(d,d);if(m(D))return w=v(E(D),w),new g(E(w.g),E(w.h));if(m(w))return w=v(D,E(w)),new g(E(w.g),w.h);if(30<D.g.length){if(m(D)||m(w))throw Error("slowDivide_ only works with positive integers.");for(var b=h,T=w;0>=T.l(D);)b=S(b),T=S(T);var P=x(b,1),C=x(T,1);for(T=x(T,2),b=x(b,2);!p(T);){var k=C.add(T);0>=k.l(D)&&(P=P.add(b),C=k),T=x(T,1),b=x(b,1)}return w=A(D,P.j(w)),new g(P,w)}for(P=d;0<=D.l(w);){for(b=Math.max(1,Math.floor(D.m()/w.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=l(b),k=C.j(w);m(k)||0<k.l(D);)b-=T,C=l(b),k=C.j(w);p(C)&&(C=h),P=P.add(C),D=A(D,k)}return new g(P,D)}t.A=function(D){return v(this,D).h},t.and=function(D){for(var w=Math.max(this.g.length,D.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)&D.i(T);return new o(b,this.h&D.h)},t.or=function(D){for(var w=Math.max(this.g.length,D.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)|D.i(T);return new o(b,this.h|D.h)},t.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),b=[],T=0;T<w;T++)b[T]=this.i(T)^D.i(T);return new o(b,this.h^D.h)};function S(D){for(var w=D.g.length+1,b=[],T=0;T<w;T++)b[T]=D.i(T)<<1|D.i(T-1)>>>31;return new o(b,D.h)}function x(D,w){var b=w>>5;w%=32;for(var T=D.g.length-b,P=[],C=0;C<T;C++)P[C]=0<w?D.i(C+b)>>>w|D.i(C+b+1)<<32-w:D.i(C+b);return new o(P,D.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,GH=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,sp=o}).apply(typeof $M<"u"?$M:typeof self<"u"?self:typeof window<"u"?window:{});var qb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JH,XH,F0,ZH,q1,KP,YH,QH,ez;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,R,U){return y==Array.prototype||y==Object.prototype||(y[R]=U.value),y};function r(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof qb=="object"&&qb];for(var R=0;R<y.length;++R){var U=y[R];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=r(this);function s(y,R){if(R)e:{var U=n;y=y.split(".");for(var ie=0;ie<y.length-1;ie++){var we=y[ie];if(!(we in U))break e;U=U[we]}y=y[y.length-1],ie=U[y],R=R(ie),R!=ie&&R!=null&&e(U,y,{configurable:!0,writable:!0,value:R})}}function i(y,R){y instanceof String&&(y+="");var U=0,ie=!1,we={next:function(){if(!ie&&U<y.length){var De=U++;return{value:R(De,y[De]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}s("Array.prototype.values",function(y){return y||function(){return i(this,function(R,U){return U})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(y){var R=typeof y;return R=R!="object"?R:y?Array.isArray(y)?"array":R:"null",R=="array"||R=="object"&&typeof y.length=="number"}function l(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function c(y,R,U){return y.call.apply(y.bind,arguments)}function d(y,R,U){if(!y)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,ie),y.apply(R,we)}}return function(){return y.apply(R,arguments)}}function h(y,R,U){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,h.apply(null,arguments)}function f(y,R){var U=Array.prototype.slice.call(arguments,1);return function(){var ie=U.slice();return ie.push.apply(ie,arguments),y.apply(this,ie)}}function p(y,R){function U(){}U.prototype=R.prototype,y.aa=R.prototype,y.prototype=new U,y.prototype.constructor=y,y.Qb=function(ie,we,De){for(var Ke=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)Ke[Lr-2]=arguments[Lr];return R.prototype[we].apply(ie,Ke)}}function m(y){const R=y.length;if(0<R){const U=Array(R);for(let ie=0;ie<R;ie++)U[ie]=y[ie];return U}return[]}function E(y,R){for(let U=1;U<arguments.length;U++){const ie=arguments[U];if(u(ie)){const we=y.length||0,De=ie.length||0;y.length=we+De;for(let Ke=0;Ke<De;Ke++)y[we+Ke]=ie[Ke]}else y.push(ie)}}class A{constructor(R,U){this.i=R,this.j=U,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function _(y){return/^[\s\xa0]*$/.test(y)}function g(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function v(y){return v[" "](y),y}v[" "]=function(){};var S=g().indexOf("Gecko")!=-1&&!(g().toLowerCase().indexOf("webkit")!=-1&&g().indexOf("Edge")==-1)&&!(g().indexOf("Trident")!=-1||g().indexOf("MSIE")!=-1)&&g().indexOf("Edge")==-1;function x(y,R,U){for(const ie in y)R.call(U,y[ie],ie,y)}function D(y,R){for(const U in y)R.call(void 0,y[U],U,y)}function w(y){const R={};for(const U in y)R[U]=y[U];return R}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(y,R){let U,ie;for(let we=1;we<arguments.length;we++){ie=arguments[we];for(U in ie)y[U]=ie[U];for(let De=0;De<b.length;De++)U=b[De],Object.prototype.hasOwnProperty.call(ie,U)&&(y[U]=ie[U])}}function P(y){var R=1;y=y.split(":");const U=[];for(;0<R&&y.length;)U.push(y.shift()),R--;return y.length&&U.push(y.join(":")),U}function C(y){a.setTimeout(()=>{throw y},0)}function k(){var y=re;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class K{constructor(){this.h=this.g=null}add(R,U){const ie=L.get();ie.set(R,U),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var L=new A(()=>new q,y=>y.reset());class q{constructor(){this.next=this.g=this.h=null}set(R,U){this.h=R,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let se,X=!1,re=new K,W=()=>{const y=a.Promise.resolve(void 0);se=()=>{y.then(B)}};var B=()=>{for(var y;y=k();){try{y.h.call(y.g)}catch(U){C(U)}var R=L;R.j(y),100>R.h&&(R.h++,y.next=R.g,R.g=y)}X=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const U=()=>{};a.addEventListener("test",U,R),a.removeEventListener("test",U,R)}catch{}return y}();function F(y,R){if(z.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var U=this.type=y.type,ie=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget){if(S){e:{try{v(R.nodeName);var we=!0;break e}catch{}we=!1}we||(R=null)}}else U=="mouseover"?R=y.fromElement:U=="mouseout"&&(R=y.toElement);this.relatedTarget=R,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:ee[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&F.aa.h.call(this)}}p(F,z);var ee={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),le=0;function me(y,R,U,ie,we){this.listener=y,this.proxy=null,this.src=R,this.type=U,this.capture=!!ie,this.ha=we,this.key=++le,this.da=this.fa=!1}function ve(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Pe(y){this.src=y,this.g={},this.h=0}Pe.prototype.add=function(y,R,U,ie,we){var De=y.toString();y=this.g[De],y||(y=this.g[De]=[],this.h++);var Ke=M(y,R,ie,we);return-1<Ke?(R=y[Ke],U||(R.fa=!1)):(R=new me(R,this.src,De,!!ie,we),R.fa=U,y.push(R)),R};function Ue(y,R){var U=R.type;if(U in y.g){var ie=y.g[U],we=Array.prototype.indexOf.call(ie,R,void 0),De;(De=0<=we)&&Array.prototype.splice.call(ie,we,1),De&&(ve(R),y.g[U].length==0&&(delete y.g[U],y.h--))}}function M(y,R,U,ie){for(var we=0;we<y.length;++we){var De=y[we];if(!De.da&&De.listener==R&&De.capture==!!U&&De.ha==ie)return we}return-1}var V="closure_lm_"+(1e6*Math.random()|0),oe={};function j(y,R,U,ie,we){if(Array.isArray(R)){for(var De=0;De<R.length;De++)j(y,R[De],U,ie,we);return null}return U=G(U),y&&y[ne]?y.K(R,U,l(ie)?!!ie.capture:!!ie,we):I(y,R,U,!1,ie,we)}function I(y,R,U,ie,we,De){if(!R)throw Error("Invalid event type");var Ke=l(we)?!!we.capture:!!we,Lr=Ce(y);if(Lr||(y[V]=Lr=new Pe(y)),U=Lr.add(R,U,ie,Ke,De),U.proxy)return U;if(ie=N(),U.proxy=ie,ie.src=y,ie.listener=U,y.addEventListener)$||(we=Ke),we===void 0&&(we=!1),y.addEventListener(R.toString(),ie,we);else if(y.attachEvent)y.attachEvent(pe(R.toString()),ie);else if(y.addListener&&y.removeListener)y.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return U}function N(){function y(U){return R.call(y.src,y.listener,U)}const R=he;return y}function Q(y,R,U,ie,we){if(Array.isArray(R))for(var De=0;De<R.length;De++)Q(y,R[De],U,ie,we);else ie=l(ie)?!!ie.capture:!!ie,U=G(U),y&&y[ne]?(y=y.i,R=String(R).toString(),R in y.g&&(De=y.g[R],U=M(De,U,ie,we),-1<U&&(ve(De[U]),Array.prototype.splice.call(De,U,1),De.length==0&&(delete y.g[R],y.h--)))):y&&(y=Ce(y))&&(R=y.g[R.toString()],y=-1,R&&(y=M(R,U,ie,we)),(U=-1<y?R[y]:null)&&ce(U))}function ce(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[ne])Ue(R.i,y);else{var U=y.type,ie=y.proxy;R.removeEventListener?R.removeEventListener(U,ie,y.capture):R.detachEvent?R.detachEvent(pe(U),ie):R.addListener&&R.removeListener&&R.removeListener(ie),(U=Ce(R))?(Ue(U,y),U.h==0&&(U.src=null,R[V]=null)):ve(y)}}}function pe(y){return y in oe?oe[y]:oe[y]="on"+y}function he(y,R){if(y.da)y=!0;else{R=new F(R,this);var U=y.listener,ie=y.ha||y.src;y.fa&&ce(y),y=U.call(ie,R)}return y}function Ce(y){return y=y[V],y instanceof Pe?y:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(y){return typeof y=="function"?y:(y[_e]||(y[_e]=function(R){return y.handleEvent(R)}),y[_e])}function J(){te.call(this),this.i=new Pe(this),this.M=this,this.F=null}p(J,te),J.prototype[ne]=!0,J.prototype.removeEventListener=function(y,R,U,ie){Q(this,y,R,U,ie)};function ge(y,R){var U,ie=y.F;if(ie)for(U=[];ie;ie=ie.F)U.push(ie);if(y=y.M,ie=R.type||R,typeof R=="string")R=new z(R,y);else if(R instanceof z)R.target=R.target||y;else{var we=R;R=new z(ie,y),T(R,we)}if(we=!0,U)for(var De=U.length-1;0<=De;De--){var Ke=R.g=U[De];we=be(Ke,ie,!0,R)&&we}if(Ke=R.g=y,we=be(Ke,ie,!0,R)&&we,we=be(Ke,ie,!1,R)&&we,U)for(De=0;De<U.length;De++)Ke=R.g=U[De],we=be(Ke,ie,!1,R)&&we}J.prototype.N=function(){if(J.aa.N.call(this),this.i){var y=this.i,R;for(R in y.g){for(var U=y.g[R],ie=0;ie<U.length;ie++)ve(U[ie]);delete y.g[R],y.h--}}this.F=null},J.prototype.K=function(y,R,U,ie){return this.i.add(String(y),R,!1,U,ie)},J.prototype.L=function(y,R,U,ie){return this.i.add(String(y),R,!0,U,ie)};function be(y,R,U,ie){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();for(var we=!0,De=0;De<R.length;++De){var Ke=R[De];if(Ke&&!Ke.da&&Ke.capture==U){var Lr=Ke.listener,li=Ke.ha||Ke.src;Ke.fa&&Ue(y.i,Ke),we=Lr.call(li,ie)!==!1&&we}}return we&&!ie.defaultPrevented}function ke(y,R,U){if(typeof y=="function")U&&(y=h(y,U));else if(y&&typeof y.handleEvent=="function")y=h(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(y,R||0)}function At(y){y.g=ke(()=>{y.g=null,y.i&&(y.i=!1,At(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class kt extends te{constructor(R,U){super(),this.m=R,this.l=U,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(y){te.call(this),this.h=y,this.g={}}p($r,te);var Wt=[];function cr(y){x(y.g,function(R,U){this.g.hasOwnProperty(U)&&ce(R)},y),y.g={}}$r.prototype.N=function(){$r.aa.N.call(this),cr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qs=a.JSON.stringify,un=a.JSON.parse,Ct=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function Wr(){}Wr.prototype.h=null;function _s(y){return y.h||(y.h=y.i())}function Hs(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rs(){z.call(this,"d")}p(rs,z);function ci(){z.call(this,"c")}p(ci,z);var O={},Z=null;function H(){return Z=Z||new J}O.La="serverreachability";function Y(y){z.call(this,O.La,y)}p(Y,z);function ae(y){const R=H();ge(R,new Y(R))}O.STAT_EVENT="statevent";function Te(y,R){z.call(this,O.STAT_EVENT,y),this.stat=R}p(Te,z);function xe(y){const R=H();ge(R,new Te(R,y))}O.Ma="timingevent";function $e(y,R){z.call(this,O.Ma,y),this.size=R}p($e,z);function qe(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},R)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function de(y,R,U,ie,we,De){y.info(function(){if(y.g)if(De)for(var Ke="",Lr=De.split("&"),li=0;li<Lr.length;li++){var dr=Lr[li].split("=");if(1<dr.length){var Ki=dr[0];dr=dr[1];var Vi=Ki.split("_");Ke=2<=Vi.length&&Vi[1]=="type"?Ke+(Ki+"="+dr+"&"):Ke+(Ki+"=redacted&")}}else Ke=null;else Ke=De;return"XMLHTTP REQ ("+ie+") [attempt "+we+"]: "+R+`
`+U+`
`+Ke})}function ue(y,R,U,ie,we,De,Ke){y.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+we+"]: "+R+`
`+U+`
`+De+" "+Ke})}function fe(y,R,U,ie){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+Ee(y,U)+(ie?" "+ie:"")})}function Ae(y,R){y.info(function(){return"TIMEOUT: "+R})}Nt.prototype.info=function(){};function Ee(y,R){if(!y.g)return R;if(!R)return null;try{var U=JSON.parse(R);if(U){for(y=0;y<U.length;y++)if(Array.isArray(U[y])){var ie=U[y];if(!(2>ie.length)){var we=ie[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var Ke=1;Ke<we.length;Ke++)we[Ke]=""}}}}return qs(U)}catch{return R}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},it={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zt;function Sr(){}p(Sr,Wr),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Zt=new Sr;function Tr(y,R,U,ie){this.j=y,this.i=R,this.l=U,this.R=ie||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gt}function Gt(){this.i=null,this.g="",this.h=!1}var Pr={},Yr={};function Dt(y,R,U){y.L=1,y.v=c_(ic(R)),y.m=U,y.P=!0,Ur(y,null)}function Ur(y,R){y.F=Date.now(),zs(y),y.A=ic(y.v);var U=y.A,ie=y.R;Array.isArray(ie)||(ie=[String(ie)]),DO(U.i,"t",ie),y.C=0,U=y.j.J,y.h=new Gt,y.g=qO(y.j,U?R:null,!y.m),0<y.O&&(y.M=new kt(h(y.Y,y,y.g),y.O)),R=y.U,U=y.g,ie=y.ca;var we="readystatechange";Array.isArray(we)||(we&&(Wt[0]=we.toString()),we=Wt);for(var De=0;De<we.length;De++){var Ke=j(U,we[De],ie||R.handleEvent,!1,R.h||R);if(!Ke)break;R.g[Ke.key]=Ke}R=y.H?w(y.H):{},y.m?(y.u||(y.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,R)):(y.u="GET",y.g.ea(y.A,y.u,null,R)),ae(),de(y.i,y.u,y.A,y.l,y.R,y.m)}Tr.prototype.ca=function(y){y=y.target;const R=this.M;R&&sc(y)==3?R.j():this.Y(y)},Tr.prototype.Y=function(y){try{if(y==this.g)e:{const Vi=sc(this.g);var R=this.g.Ba();const Vp=this.g.Z();if(!(3>Vi)&&(Vi!=3||this.g&&(this.h.h||this.g.oa()||OO(this.g)))){this.J||Vi!=4||R==7||(R==8||0>=Vp?ae(3):ae(2)),bs(this);var U=this.g.Z();this.X=U;t:if(cn(this)){var ie=OO(this.g);y="";var we=ie.length,De=sc(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),bo(this);var Ke="";break t}this.h.i=new a.TextDecoder}for(R=0;R<we;R++)this.h.h=!0,y+=this.h.i.decode(ie[R],{stream:!(De&&R==we-1)});ie.length=0,this.h.g+=y,this.C=0,Ke=this.h.g}else Ke=this.g.oa();if(this.o=U==200,ue(this.i,this.u,this.A,this.l,this.R,Vi,U),this.o){if(this.T&&!this.K){t:{if(this.g){var Lr,li=this.g;if((Lr=li.g?li.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Lr)){var dr=Lr;break t}}dr=null}if(U=dr)fe(this.i,this.l,U,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,U);else{this.o=!1,this.s=3,xe(12),ns(this),bo(this);break e}}if(this.P){U=!0;let fa;for(;!this.J&&this.C<Ke.length;)if(fa=Gr(this,Ke),fa==Yr){Vi==4&&(this.s=4,xe(14),U=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(fa==Pr){this.s=4,xe(15),fe(this.i,this.l,Ke,"[Invalid Chunk]"),U=!1;break}else fe(this.i,this.l,fa,null),Li(this,fa);if(cn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vi!=4||Ke.length!=0||this.h.h||(this.s=1,xe(16),U=!1),this.o=this.o&&U,!U)fe(this.i,this.l,Ke,"[Invalid Chunked Response]"),ns(this),bo(this);else if(0<Ke.length&&!this.W){this.W=!0;var Ki=this.j;Ki.g==this&&Ki.ba&&!Ki.M&&(Ki.j.info("Great, no buffering proxy detected. Bytes received: "+Ke.length),WS(Ki),Ki.M=!0,xe(11))}}else fe(this.i,this.l,Ke,null),Li(this,Ke);Vi==4&&ns(this),this.o&&!this.J&&(Vi==4?UO(this.j,this):(this.o=!1,zs(this)))}else xW(this.g),U==400&&0<Ke.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),ns(this),bo(this)}}}catch{}finally{}};function cn(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Gr(y,R){var U=y.C,ie=R.indexOf(`
`,U);return ie==-1?Yr:(U=Number(R.substring(U,ie)),isNaN(U)?Pr:(ie+=1,ie+U>R.length?Yr:(R=R.slice(ie,ie+U),y.C=ie+U,R)))}Tr.prototype.cancel=function(){this.J=!0,ns(this)};function zs(y){y.S=Date.now()+y.I,Ws(y,y.I)}function Ws(y,R){if(y.B!=null)throw Error("WatchDog timer not null");y.B=qe(h(y.ba,y),R)}function bs(y){y.B&&(a.clearTimeout(y.B),y.B=null)}Tr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Ae(this.i,this.A),this.L!=2&&(ae(),xe(17)),ns(this),this.s=2,bo(this)):Ws(this,this.S-y)};function bo(y){y.j.G==0||y.J||UO(y.j,y)}function ns(y){bs(y);var R=y.M;R&&typeof R.ma=="function"&&R.ma(),y.M=null,cr(y.U),y.g&&(R=y.g,y.g=null,R.abort(),R.ma())}function Li(y,R){try{var U=y.j;if(U.G!=0&&(U.g==y||Mp(U.h,y))){if(!y.K&&Mp(U.h,y)&&U.G==3){try{var ie=U.Da.g.parse(R)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var we=ie;if(we[0]==0){e:if(!U.u){if(U.g)if(U.g.F+3e3<y.F)p_(U),f_(U);else break e;zS(U),xe(18)}}else U.za=we[1],0<U.za-U.T&&37500>we[2]&&U.F&&U.v==0&&!U.C&&(U.C=qe(h(U.Za,U),6e3));if(1>=Dl(U.h)&&U.ca){try{U.ca()}catch{}U.ca=void 0}}else Nf(U,11)}else if((y.K||U.g==y)&&p_(U),!_(R))for(we=U.Da.g.parse(R),R=0;R<we.length;R++){let dr=we[R];if(U.T=dr[0],dr=dr[1],U.G==2)if(dr[0]=="c"){U.K=dr[1],U.ia=dr[2];const Ki=dr[3];Ki!=null&&(U.la=Ki,U.j.info("VER="+U.la));const Vi=dr[4];Vi!=null&&(U.Aa=Vi,U.j.info("SVER="+U.Aa));const Vp=dr[5];Vp!=null&&typeof Vp=="number"&&0<Vp&&(ie=1.5*Vp,U.L=ie,U.j.info("backChannelRequestTimeoutMs_="+ie)),ie=U;const fa=y.g;if(fa){const y_=fa.g?fa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y_){var De=ie.h;De.g||y_.indexOf("spdy")==-1&&y_.indexOf("quic")==-1&&y_.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(jp(De,De.h),De.h=null))}if(ie.D){const GS=fa.g?fa.g.getResponseHeader("X-HTTP-Session-Id"):null;GS&&(ie.ya=GS,Qr(ie.I,ie.D,GS))}}U.G=3,U.l&&U.l.ua(),U.ba&&(U.R=Date.now()-y.F,U.j.info("Handshake RTT: "+U.R+"ms")),ie=U;var Ke=y;if(ie.qa=VO(ie,ie.J?ie.ia:null,ie.W),Ke.K){$f(ie.h,Ke);var Lr=Ke,li=ie.L;li&&(Lr.I=li),Lr.B&&(bs(Lr),zs(Lr)),ie.g=Ke}else MO(ie);0<U.i.length&&h_(U)}else dr[0]!="stop"&&dr[0]!="close"||Nf(U,7);else U.G==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?Nf(U,7):HS(U):dr[0]!="noop"&&U.l&&U.l.ta(dr),U.v=0)}}ae(4)}catch{}}var Eo=class{constructor(y,R){this.g=y,this.map=R}};function Ha(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ao(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Dl(y){return y.h?1:y.g?y.g.size:0}function Mp(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function jp(y,R){y.g?y.g.add(R):y.h=R}function $f(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}Ha.prototype.cancel=function(){if(this.i=Of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Of(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const U of y.g.values())R=R.concat(U.D);return R}return m(y.i)}function Up(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(u(y)){for(var R=[],U=y.length,ie=0;ie<U;ie++)R.push(y[ie]);return R}R=[],U=0;for(ie in y)R[U++]=y[ie];return R}function o_(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(u(y)||typeof y=="string"){var R=[];y=y.length;for(var U=0;U<y;U++)R.push(U);return R}R=[],U=0;for(const ie in y)R[U++]=ie;return R}}}function tg(y,R){if(y.forEach&&typeof y.forEach=="function")y.forEach(R,void 0);else if(u(y)||typeof y=="string")Array.prototype.forEach.call(y,R,void 0);else for(var U=o_(y),ie=Up(y),we=ie.length,De=0;De<we;De++)R.call(void 0,ie[De],U&&U[De],y)}var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pW(y,R){if(y){y=y.split("&");for(var U=0;U<y.length;U++){var ie=y[U].indexOf("="),we=null;if(0<=ie){var De=y[U].substring(0,ie);we=y[U].substring(ie+1)}else De=y[U];R(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function Rf(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Rf){this.h=y.h,a_(this,y.j),this.o=y.o,this.g=y.g,u_(this,y.s),this.l=y.l;var R=y.i,U=new ig;U.i=R.i,R.g&&(U.g=new Map(R.g),U.h=R.h),EO(this,U),this.m=y.m}else y&&(R=String(y).match(xl))?(this.h=!1,a_(this,R[1]||"",!0),this.o=rg(R[2]||""),this.g=rg(R[3]||"",!0),u_(this,R[4]),this.l=rg(R[5]||"",!0),EO(this,R[6]||"",!0),this.m=rg(R[7]||"")):(this.h=!1,this.i=new ig(null,this.h))}Rf.prototype.toString=function(){var y=[],R=this.j;R&&y.push(ng(R,AO,!0),":");var U=this.g;return(U||R=="file")&&(y.push("//"),(R=this.o)&&y.push(ng(R,AO,!0),"@"),y.push(encodeURIComponent(String(U)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.s,U!=null&&y.push(":",String(U))),(U=this.l)&&(this.g&&U.charAt(0)!="/"&&y.push("/"),y.push(ng(U,U.charAt(0)=="/"?gW:yW,!0))),(U=this.i.toString())&&y.push("?",U),(U=this.m)&&y.push("#",ng(U,wW)),y.join("")};function ic(y){return new Rf(y)}function a_(y,R,U){y.j=U?rg(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function u_(y,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);y.s=R}else y.s=null}function EO(y,R,U){R instanceof ig?(y.i=R,_W(y.i,y.h)):(U||(R=ng(R,vW)),y.i=new ig(R,y.h))}function Qr(y,R,U){y.i.set(R,U)}function c_(y){return Qr(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function rg(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ng(y,R,U){return typeof y=="string"?(y=encodeURI(y).replace(R,mW),U&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function mW(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var AO=/[#\/\?@]/g,yW=/[#\?:]/g,gW=/[#\?]/g,vW=/[#\?@]/g,wW=/#/g;function ig(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function Pl(y){y.g||(y.g=new Map,y.h=0,y.i&&pW(y.i,function(R,U){y.add(decodeURIComponent(R.replace(/\+/g," ")),U)}))}t=ig.prototype,t.add=function(y,R){Pl(this),this.i=null,y=Lp(this,y);var U=this.g.get(y);return U||this.g.set(y,U=[]),U.push(R),this.h+=1,this};function SO(y,R){Pl(y),R=Lp(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function TO(y,R){return Pl(y),R=Lp(y,R),y.g.has(R)}t.forEach=function(y,R){Pl(this),this.g.forEach(function(U,ie){U.forEach(function(we){y.call(R,we,ie,this)},this)},this)},t.na=function(){Pl(this);const y=Array.from(this.g.values()),R=Array.from(this.g.keys()),U=[];for(let ie=0;ie<R.length;ie++){const we=y[ie];for(let De=0;De<we.length;De++)U.push(R[ie])}return U},t.V=function(y){Pl(this);let R=[];if(typeof y=="string")TO(this,y)&&(R=R.concat(this.g.get(Lp(this,y))));else{y=Array.from(this.g.values());for(let U=0;U<y.length;U++)R=R.concat(y[U])}return R},t.set=function(y,R){return Pl(this),this.i=null,y=Lp(this,y),TO(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},t.get=function(y,R){return y?(y=this.V(y),0<y.length?String(y[0]):R):R};function DO(y,R,U){SO(y,R),0<U.length&&(y.i=null,y.g.set(Lp(y,R),m(U)),y.h+=U.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(var U=0;U<R.length;U++){var ie=R[U];const De=encodeURIComponent(String(ie)),Ke=this.V(ie);for(ie=0;ie<Ke.length;ie++){var we=De;Ke[ie]!==""&&(we+="="+encodeURIComponent(String(Ke[ie]))),y.push(we)}}return this.i=y.join("&")};function Lp(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function _W(y,R){R&&!y.j&&(Pl(y),y.i=null,y.g.forEach(function(U,ie){var we=ie.toLowerCase();ie!=we&&(SO(this,ie),DO(this,we,U))},y)),y.j=R}function bW(y,R){const U=new Nt;if(a.Image){const ie=new Image;ie.onload=f(Cl,U,"TestLoadImage: loaded",!0,R,ie),ie.onerror=f(Cl,U,"TestLoadImage: error",!1,R,ie),ie.onabort=f(Cl,U,"TestLoadImage: abort",!1,R,ie),ie.ontimeout=f(Cl,U,"TestLoadImage: timeout",!1,R,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=y}else R(!1)}function EW(y,R){const U=new Nt,ie=new AbortController,we=setTimeout(()=>{ie.abort(),Cl(U,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:ie.signal}).then(De=>{clearTimeout(we),De.ok?Cl(U,"TestPingServer: ok",!0,R):Cl(U,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(we),Cl(U,"TestPingServer: error",!1,R)})}function Cl(y,R,U,ie,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),ie(U)}catch{}}function AW(){this.g=new Ct}function SW(y,R,U){const ie=U||"";try{tg(y,function(we,De){let Ke=we;l(we)&&(Ke=qs(we)),R.push(ie+De+"="+encodeURIComponent(Ke))})}catch(we){throw R.push(ie+"type="+encodeURIComponent("_badmap")),we}}function sg(y){this.l=y.Ub||null,this.j=y.eb||!1}p(sg,Wr),sg.prototype.g=function(){return new l_(this.l,this.j)},sg.prototype.i=function(y){return function(){return y}}({});function l_(y,R){J.call(this),this.D=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(l_,J),t=l_.prototype,t.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=R,this.readyState=1,ag(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(R.body=y),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,og(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ag(this)),this.g&&(this.readyState=3,ag(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xO(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function xO(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?og(this):ag(this),this.readyState==3&&xO(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,og(this))},t.Qa=function(y){this.g&&(this.response=y,og(this))},t.ga=function(){this.g&&og(this)};function og(y){y.readyState=4,y.l=null,y.j=null,y.v=null,ag(y)}t.setRequestHeader=function(y,R){this.u.append(y,R)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var U=R.next();!U.done;)U=U.value,y.push(U[0]+": "+U[1]),U=R.next();return y.join(`\r
`)};function ag(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(l_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function PO(y){let R="";return x(y,function(U,ie){R+=ie,R+=":",R+=U,R+=`\r
`}),R}function qS(y,R,U){e:{for(ie in U){var ie=!1;break e}ie=!0}ie||(U=PO(U),typeof y=="string"?U!=null&&encodeURIComponent(String(U)):Qr(y,R,U))}function mn(y){J.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(mn,J);var TW=/^https?$/i,DW=["POST","PUT"];t=mn.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,R,U,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zt.g(),this.v=this.o?_s(this.o):_s(Zt),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(De){CO(this,De);return}if(y=U||"",U=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var we in ie)U.set(we,ie[we]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const De of ie.keys())U.set(De,ie.get(De));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(U.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DW,R,void 0))||ie||we||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,Ke]of U)this.g.setRequestHeader(De,Ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$O(this),this.u=!0,this.g.send(y),this.u=!1}catch(De){CO(this,De)}};function CO(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.m=5,IO(y),d_(y)}function IO(y){y.A||(y.A=!0,ge(y,"complete"),ge(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ge(this,"complete"),ge(this,"abort"),d_(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),d_(this,!0)),mn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kO(this):this.bb())},t.bb=function(){kO(this)};function kO(y){if(y.h&&typeof o<"u"&&(!y.v[1]||sc(y)!=4||y.Z()!=2)){if(y.u&&sc(y)==4)ke(y.Ea,0,y);else if(ge(y,"readystatechange"),sc(y)==4){y.h=!1;try{const Ke=y.Z();e:switch(Ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var U;if(!(U=R)){var ie;if(ie=Ke===0){var we=String(y.D).match(xl)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),ie=!TW.test(we?we.toLowerCase():"")}U=ie}if(U)ge(y,"complete"),ge(y,"success");else{y.m=6;try{var De=2<sc(y)?y.g.statusText:""}catch{De=""}y.l=De+" ["+y.Z()+"]",IO(y)}}finally{d_(y)}}}}function d_(y,R){if(y.g){$O(y);const U=y.g,ie=y.v[0]?()=>{}:null;y.g=null,y.v=null,R||ge(y,"ready");try{U.onreadystatechange=ie}catch{}}}function $O(y){y.I&&(a.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function sc(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<sc(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),un(R)}};function OO(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function xW(y){const R={};y=(y.g&&2<=sc(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<y.length;ie++){if(_(y[ie]))continue;var U=P(y[ie]);const we=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const De=R[we]||[];R[we]=De,De.push(U)}D(R,function(ie){return ie.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ug(y,R,U){return U&&U.internalChannelParams&&U.internalChannelParams[y]||R}function RO(y){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ug("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ug("baseRetryDelayMs",5e3,y),this.cb=ug("retryDelaySeedMs",1e4,y),this.Wa=ug("forwardChannelMaxRetries",2,y),this.wa=ug("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Ha(y&&y.concurrentRequestLimit),this.Da=new AW,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=RO.prototype,t.la=8,t.G=1,t.connect=function(y,R,U,ie){xe(0),this.W=y,this.H=R||{},U&&ie!==void 0&&(this.H.OSID=U,this.H.OAID=ie),this.F=this.X,this.I=VO(this,null,this.W),h_(this)};function HS(y){if(NO(y),y.G==3){var R=y.U++,U=ic(y.I);if(Qr(U,"SID",y.K),Qr(U,"RID",R),Qr(U,"TYPE","terminate"),cg(y,U),R=new Tr(y,y.j,R),R.L=2,R.v=c_(ic(U)),U=!1,a.navigator&&a.navigator.sendBeacon)try{U=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!U&&a.Image&&(new Image().src=R.v,U=!0),U||(R.g=qO(R.j,null),R.g.ea(R.v)),R.F=Date.now(),zs(R)}KO(y)}function f_(y){y.g&&(WS(y),y.g.cancel(),y.g=null)}function NO(y){f_(y),y.u&&(a.clearTimeout(y.u),y.u=null),p_(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function h_(y){if(!Ao(y.h)&&!y.s){y.s=!0;var R=y.Ga;se||W(),X||(se(),X=!0),re.add(R,y),y.B=0}}function PW(y,R){return Dl(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=R.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=qe(h(y.Ga,y,R),LO(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const we=new Tr(this,this.j,y);let De=this.o;if(this.S&&(De?(De=w(De),T(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var R=0,U=0;U<this.i.length;U++){t:{var ie=this.i[U];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(R+=ie,4096<R){R=U;break e}if(R===4096||U===this.i.length-1){R=U+1;break e}}R=1e3}else R=1e3;R=FO(this,we,R),U=ic(this.I),Qr(U,"RID",y),Qr(U,"CVER",22),this.D&&Qr(U,"X-HTTP-Session-Id",this.D),cg(this,U),De&&(this.O?R="headers="+encodeURIComponent(String(PO(De)))+"&"+R:this.m&&qS(U,this.m,De)),jp(this.h,we),this.Ua&&Qr(U,"TYPE","init"),this.P?(Qr(U,"$req",R),Qr(U,"SID","null"),we.T=!0,Dt(we,U,null)):Dt(we,U,R),this.G=2}}else this.G==3&&(y?BO(this,y):this.i.length==0||Ao(this.h)||BO(this))};function BO(y,R){var U;R?U=R.l:U=y.U++;const ie=ic(y.I);Qr(ie,"SID",y.K),Qr(ie,"RID",U),Qr(ie,"AID",y.T),cg(y,ie),y.m&&y.o&&qS(ie,y.m,y.o),U=new Tr(y,y.j,U,y.B+1),y.m===null&&(U.H=y.o),R&&(y.i=R.D.concat(y.i)),R=FO(y,U,1e3),U.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),jp(y.h,U),Dt(U,ie,R)}function cg(y,R){y.H&&x(y.H,function(U,ie){Qr(R,ie,U)}),y.l&&tg({},function(U,ie){Qr(R,ie,U)})}function FO(y,R,U){U=Math.min(y.i.length,U);var ie=y.l?h(y.l.Na,y.l,y):null;e:{var we=y.i;let De=-1;for(;;){const Ke=["count="+U];De==-1?0<U?(De=we[0].g,Ke.push("ofs="+De)):De=0:Ke.push("ofs="+De);let Lr=!0;for(let li=0;li<U;li++){let dr=we[li].g;const Ki=we[li].map;if(dr-=De,0>dr)De=Math.max(0,we[li].g-100),Lr=!1;else try{SW(Ki,Ke,"req"+dr+"_")}catch{ie&&ie(Ki)}}if(Lr){ie=Ke.join("&");break e}}}return y=y.i.splice(0,U),R.D=y,ie}function MO(y){if(!y.g&&!y.u){y.Y=1;var R=y.Fa;se||W(),X||(se(),X=!0),re.add(R,y),y.v=0}}function zS(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=qe(h(y.Fa,y),LO(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,jO(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=qe(h(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),f_(this),jO(this))};function WS(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function jO(y){y.g=new Tr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var R=ic(y.qa);Qr(R,"RID","rpc"),Qr(R,"SID",y.K),Qr(R,"AID",y.T),Qr(R,"CI",y.F?"0":"1"),!y.F&&y.ja&&Qr(R,"TO",y.ja),Qr(R,"TYPE","xmlhttp"),cg(y,R),y.m&&y.o&&qS(R,y.m,y.o),y.L&&(y.g.I=y.L);var U=y.g;y=y.ia,U.L=1,U.v=c_(ic(R)),U.m=null,U.P=!0,Ur(U,y)}t.Za=function(){this.C!=null&&(this.C=null,f_(this),zS(this),xe(19))};function p_(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function UO(y,R){var U=null;if(y.g==R){p_(y),WS(y),y.g=null;var ie=2}else if(Mp(y.h,R))U=R.D,$f(y.h,R),ie=1;else return;if(y.G!=0){if(R.o)if(ie==1){U=R.m?R.m.length:0,R=Date.now()-R.F;var we=y.B;ie=H(),ge(ie,new $e(ie,U)),h_(y)}else MO(y);else if(we=R.s,we==3||we==0&&0<R.X||!(ie==1&&PW(y,R)||ie==2&&zS(y)))switch(U&&0<U.length&&(R=y.h,R.i=R.i.concat(U)),we){case 1:Nf(y,5);break;case 4:Nf(y,10);break;case 3:Nf(y,6);break;default:Nf(y,2)}}}function LO(y,R){let U=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(U*=2),U*R}function Nf(y,R){if(y.j.info("Error code "+R),R==2){var U=h(y.fb,y),ie=y.Xa;const we=!ie;ie=new Rf(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||a_(ie,"https"),c_(ie),we?bW(ie.toString(),U):EW(ie.toString(),U)}else xe(2);y.G=0,y.l&&y.l.sa(R),KO(y),NO(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function KO(y){if(y.G=0,y.ka=[],y.l){const R=Of(y.h);(R.length!=0||y.i.length!=0)&&(E(y.ka,R),E(y.ka,y.i),y.h.i.length=0,m(y.i),y.i.length=0),y.l.ra()}}function VO(y,R,U){var ie=U instanceof Rf?ic(U):new Rf(U);if(ie.g!="")R&&(ie.g=R+"."+ie.g),u_(ie,ie.s);else{var we=a.location;ie=we.protocol,R=R?R+"."+we.hostname:we.hostname,we=+we.port;var De=new Rf(null);ie&&a_(De,ie),R&&(De.g=R),we&&u_(De,we),U&&(De.l=U),ie=De}return U=y.D,R=y.ya,U&&R&&Qr(ie,U,R),Qr(ie,"VER",y.la),cg(y,ie),ie}function qO(y,R,U){if(R&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Ca&&!y.pa?new mn(new sg({eb:U})):new mn(y.pa),R.Ha(y.J),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function HO(){}t=HO.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function m_(){}m_.prototype.g=function(y,R){return new Gs(y,R)};function Gs(y,R){J.call(this),this.g=new RO(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(y?y["X-WebChannel-Client-Profile"]=R.va:y={"X-WebChannel-Client-Profile":R.va}),this.g.S=y,(y=R&&R.Sb)&&!_(y)&&(this.g.m=y),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!_(R)&&(this.g.D=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new Kp(this)}p(Gs,J),Gs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gs.prototype.close=function(){HS(this.g)},Gs.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var U={};U.__data__=y,y=U}else this.u&&(U={},U.__data__=qs(y),y=U);R.i.push(new Eo(R.Ya++,y)),R.G==3&&h_(R)},Gs.prototype.N=function(){this.g.l=null,delete this.j,HS(this.g),delete this.g,Gs.aa.N.call(this)};function zO(y){rs.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const U in R){y=U;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}p(zO,rs);function WO(){ci.call(this),this.status=1}p(WO,ci);function Kp(y){this.g=y}p(Kp,HO),Kp.prototype.ua=function(){ge(this.g,"a")},Kp.prototype.ta=function(y){ge(this.g,new zO(y))},Kp.prototype.sa=function(y){ge(this.g,new WO)},Kp.prototype.ra=function(){ge(this.g,"b")},m_.prototype.createWebChannel=m_.prototype.g,Gs.prototype.send=Gs.prototype.o,Gs.prototype.open=Gs.prototype.m,Gs.prototype.close=Gs.prototype.close,ez=function(){return new m_},QH=function(){return H()},YH=O,KP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,q1=We,it.COMPLETE="complete",ZH=it,Hs.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",J.prototype.listen=J.prototype.K,F0=Hs,XH=sg,mn.prototype.listenOnce=mn.prototype.L,mn.prototype.getLastError=mn.prototype.Ka,mn.prototype.getLastErrorCode=mn.prototype.Ba,mn.prototype.getStatus=mn.prototype.Z,mn.prototype.getResponseJson=mn.prototype.Oa,mn.prototype.getResponseText=mn.prototype.oa,mn.prototype.send=mn.prototype.ea,mn.prototype.setWithCredentials=mn.prototype.Ha,JH=mn}).apply(typeof qb<"u"?qb:typeof self<"u"?self:typeof window<"u"?window:{});const OM="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zy="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new k$("@firebase/firestore");function d0(){return Ap.logLevel}function Qe(t,...e){if(Ap.logLevel<=ar.DEBUG){const r=e.map(H$);Ap.debug(`Firestore (${Zy}): ${t}`,...r)}}function yl(t,...e){if(Ap.logLevel<=ar.ERROR){const r=e.map(H$);Ap.error(`Firestore (${Zy}): ${t}`,...r)}}function Sy(t,...e){if(Ap.logLevel<=ar.WARN){const r=e.map(H$);Ap.warn(`Firestore (${Zy}): ${t}`,...r)}}function H$(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t="Unexpected state"){const e=`FIRESTORE (${Zy}) INTERNAL ASSERTION FAILED: `+t;throw yl(e),new Error(e)}function Hr(t,e){t||Rt()}function Mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Tl{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mIe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Xi.UNAUTHENTICATED))}shutdown(){}}class yIe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class gIe{constructor(e){this.t=e,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new of;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new of,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new of)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Hr(typeof n.accessToken=="string"),new tz(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hr(e===null||typeof e=="string"),new Xi(e)}}class vIe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Xi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wIe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new vIe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _Ie{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bIe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=i=>{i.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Hr(typeof r.token=="string"),this.R=r.token,new _Ie(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EIe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=EIe(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function fr(t,e){return t<e?-1:t>e?1:0}function Ty(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new bt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new bt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new bt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new zn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fr(this.nanoseconds,e.nanoseconds):fr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new zn(0,0))}static max(){return new Ft(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,r,n){r===void 0?r=0:r>e.length&&Rt(),n===void 0?n=e.length-r:n>e.length-r&&Rt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return uw.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof uw?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),o=r.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class vn extends uw{construct(e,r,n){return new vn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new bt(Ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new vn(r)}static emptyPath(){return new vn([])}}const AIe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $i extends uw{construct(e,r,n){return new $i(e,r,n)}static isValidIdentifier(e){return AIe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $i(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new bt(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new bt(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(n+=a,s++):(i(),s++)}if(i(),o)throw new bt(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $i(r)}static emptyPath(){return new $i([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.path=e}static fromPath(e){return new Et(vn.fromString(e))}static fromName(e){return new Et(vn.fromString(e).popFirst(5))}static empty(){return new Et(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return vn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new vn(e.slice()))}}function SIe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ft.fromTimestamp(n===1e9?new zn(r+1,0):new zn(r,n));return new yf(s,Et.empty(),e)}function TIe(t){return new yf(t.readTime,t.key,-1)}class yf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new yf(Ft.min(),Et.empty(),-1)}static max(){return new yf(Ft.max(),Et.empty(),-1)}}function DIe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Et.comparator(t.documentKey,e.documentKey),r!==0?r:fr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xIe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PIe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(t){if(t.code!==Ne.FAILED_PRECONDITION||t.message!==xIe)throw t;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Oe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Oe?r:Oe.resolve(r)}catch(r){return Oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Oe.reject(r)}static resolve(e){return new Oe((r,n)=>{r(e)})}static reject(e){return new Oe((r,n)=>{n(e)})}static waitFor(e){return new Oe((r,n)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&r()},u=>n(u))}),o=!0,i===s&&r()})}static or(e){let r=Oe.resolve(!1);for(const n of e)r=r.next(s=>s?Oe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Oe((n,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const l=u;r(e[l]).next(c=>{o[l]=c,++a,a===i&&n(o)},c=>s(c))}})}static doWhile(e,r){return new Oe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function CIe(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function t_(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}z$.oe=-1;function RS(t){return t==null}function cA(t){return t===0&&1/t==-1/0}function IIe(t){return typeof t=="number"&&Number.isInteger(t)&&!cA(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Yy(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r){this.comparator=e,this.root=r||Ci.EMPTY}insert(e,r){return new pn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hb(this.root,e,this.comparator,!0)}}class Hb{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Ci.RED,this.left=s??Ci.EMPTY,this.right=i??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Ci(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Ci.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const e=this.left.check();if(e!==this.right.check())throw Rt();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1;Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Ci(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new NM(this.data.getIterator())}getIteratorFrom(e){return new NM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Fi)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Fi(this.comparator);return r.data=e,r}}class NM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.fields=e,e.sort($i.comparator)}static empty(){return new Oa([])}unionWith(e){let r=new Fi($i.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Oa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ty(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iz("Invalid base64 string: "+i):i}}(e);return new Mi(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Mi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const kIe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gf(t){if(Hr(!!t),typeof t=="string"){let e=0;const r=kIe.exec(t);if(Hr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dn(t.seconds),nanos:Dn(t.nanos)}}function Dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sp(t){return typeof t=="string"?Mi.fromBase64String(t):Mi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function G$(t){const e=t.mapValue.fields.__previous_value__;return W$(e)?G$(e):e}function cw(t){const e=gf(t.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ie{constructor(e,r,n,s,i,o,a,u,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class lw{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new lw("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lw&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?W$(t)?4:RIe(t)?9007199254740991:OIe(t)?10:11:Rt()}function Ju(t,e){if(t===e)return!0;const r=Tp(t);if(r!==Tp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cw(t).isEqual(cw(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gf(s.timestampValue),a=gf(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sp(s.bytesValue).isEqual(Sp(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Dn(s.geoPointValue.latitude)===Dn(i.geoPointValue.latitude)&&Dn(s.geoPointValue.longitude)===Dn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dn(s.integerValue)===Dn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Dn(s.doubleValue),a=Dn(i.doubleValue);return o===a?cA(o)===cA(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ty(t.arrayValue.values||[],e.arrayValue.values||[],Ju);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(RM(o)!==RM(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ju(o[u],a[u])))return!1;return!0}(t,e);default:return Rt()}}function dw(t,e){return(t.values||[]).find(r=>Ju(r,e))!==void 0}function Dy(t,e){if(t===e)return 0;const r=Tp(t),n=Tp(e);if(r!==n)return fr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return fr(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Dn(i.integerValue||i.doubleValue),u=Dn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return BM(t.timestampValue,e.timestampValue);case 4:return BM(cw(t),cw(e));case 5:return fr(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Sp(i),u=Sp(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fr(a[l],u[l]);if(c!==0)return c}return fr(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=fr(Dn(i.latitude),Dn(o.latitude));return a!==0?a:fr(Dn(i.longitude),Dn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return FM(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,l,c;const d=i.fields||{},h=o.fields||{},f=(a=d.value)===null||a===void 0?void 0:a.arrayValue,p=(u=h.value)===null||u===void 0?void 0:u.arrayValue,m=fr(((l=f==null?void 0:f.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:FM(f,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===zb.mapValue&&o===zb.mapValue)return 0;if(i===zb.mapValue)return 1;if(o===zb.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const h=fr(u[d],c[d]);if(h!==0)return h;const f=Dy(a[u[d]],l[c[d]]);if(f!==0)return f}return fr(u.length,c.length)}(t.mapValue,e.mapValue);default:throw Rt()}}function BM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fr(t,e);const r=gf(t),n=gf(e),s=fr(r.seconds,n.seconds);return s!==0?s:fr(r.nanos,n.nanos)}function FM(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Dy(r[s],n[s]);if(i)return i}return fr(r.length,n.length)}function xy(t){return VP(t)}function VP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=gf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Sp(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Et.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=VP(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${VP(r.fields[o])}`;return s+"}"}(t.mapValue):Rt()}function qP(t){return!!t&&"integerValue"in t}function J$(t){return!!t&&"arrayValue"in t}function MM(t){return!!t&&"nullValue"in t}function jM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function H1(t){return!!t&&"mapValue"in t}function OIe(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function yv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yy(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=yv(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=yv(t.arrayValue.values[r]);return e}return Object.assign({},t)}function RIe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.value=e}static empty(){return new Xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!H1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=yv(r)}setAll(e){let r=$i.emptyPath(),n={},s=[];e.forEach((o,a)=>{if(!r.isImmediateParentOf(a)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=a.popLast()}o?n[a.lastSegment()]=yv(o):s.push(a.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());H1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ju(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];H1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Yy(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Xo(yv(this.value))}}function sz(t){const e=[];return Yy(t.fields,(r,n)=>{const s=new $i([r]);if(H1(n)){const i=sz(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Oa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,r,n,s,i,o,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yi(e,0,Ft.min(),Ft.min(),Ft.min(),Xo.empty(),0)}static newFoundDocument(e,r,n,s){return new Yi(e,1,r,Ft.min(),n,s,0)}static newNoDocument(e,r){return new Yi(e,2,r,Ft.min(),Ft.min(),Xo.empty(),0)}static newUnknownDocument(e,r){return new Yi(e,3,r,Ft.min(),Ft.min(),Xo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,r){this.position=e,this.inclusive=r}}function UM(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=Et.comparator(Et.fromName(o.referenceValue),r.key):n=Dy(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function LM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ju(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,r="asc"){this.field=e,this.dir=r}}function NIe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{}class Hn extends oz{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new FIe(e,r,n):r==="array-contains"?new UIe(e,n):r==="in"?new LIe(e,n):r==="not-in"?new KIe(e,n):r==="array-contains-any"?new VIe(e,n):new Hn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new MIe(e,n):new jIe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Dy(r,this.value)):r!==null&&Tp(this.value)===Tp(r)&&this.matchesComparison(Dy(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xu extends oz{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Xu(e,r)}matches(e){return az(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function az(t){return t.op==="and"}function uz(t){return BIe(t)&&az(t)}function BIe(t){for(const e of t.filters)if(e instanceof Xu)return!1;return!0}function HP(t){if(t instanceof Hn)return t.field.canonicalString()+t.op.toString()+xy(t.value);if(uz(t))return t.filters.map(e=>HP(e)).join(",");{const e=t.filters.map(r=>HP(r)).join(",");return`${t.op}(${e})`}}function cz(t,e){return t instanceof Hn?function(n,s){return s instanceof Hn&&n.op===s.op&&n.field.isEqual(s.field)&&Ju(n.value,s.value)}(t,e):t instanceof Xu?function(n,s){return s instanceof Xu&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,a)=>i&&cz(o,s.filters[a]),!0):!1}(t,e):void Rt()}function lz(t){return t instanceof Hn?function(r){return`${r.field.canonicalString()} ${r.op} ${xy(r.value)}`}(t):t instanceof Xu?function(r){return r.op.toString()+" {"+r.getFilters().map(lz).join(" ,")+"}"}(t):"Filter"}class FIe extends Hn{constructor(e,r,n){super(e,r,n),this.key=Et.fromName(n.referenceValue)}matches(e){const r=Et.comparator(e.key,this.key);return this.matchesComparison(r)}}class MIe extends Hn{constructor(e,r){super(e,"in",r),this.keys=dz("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class jIe extends Hn{constructor(e,r){super(e,"not-in",r),this.keys=dz("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function dz(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Et.fromName(n.referenceValue))}class UIe extends Hn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return J$(r)&&dw(r.arrayValue,this.value)}}class LIe extends Hn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&dw(this.value.arrayValue,r)}}class KIe extends Hn{constructor(e,r){super(e,"not-in",r)}matches(e){if(dw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!dw(this.value.arrayValue,r)}}class VIe extends Hn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!J$(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>dw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qIe{constructor(e,r=null,n=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function KM(t,e=null,r=[],n=[],s=null,i=null,o=null){return new qIe(t,e,r,n,s,i,o)}function X$(t){const e=Mt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>HP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),RS(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>xy(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>xy(n)).join(",")),e.ue=r}return e.ue}function Z$(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!NIe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!cz(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LM(t.startAt,e.startAt)&&LM(t.endAt,e.endAt)}function zP(t){return Et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,r=null,n=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HIe(t,e,r,n,s,i,o,a){return new NS(t,e,r,n,s,i,o,a)}function Y$(t){return new NS(t)}function VM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zIe(t){return t.collectionGroup!==null}function gv(t){const e=Mt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fi($i.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new dA(i,n))}),r.has($i.keyField().canonicalString())||e.ce.push(new dA($i.keyField(),n))}return e.ce}function ju(t){const e=Mt(t);return e.le||(e.le=WIe(e,gv(t))),e.le}function WIe(t,e){if(t.limitType==="F")return KM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new dA(s.field,i)});const r=t.endAt?new lA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new lA(t.startAt.position,t.startAt.inclusive):null;return KM(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function WP(t,e,r){return new NS(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function BS(t,e){return Z$(ju(t),ju(e))&&t.limitType===e.limitType}function fz(t){return`${X$(ju(t))}|lt:${t.limitType}`}function Em(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>lz(s)).join(", ")}]`),RS(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>xy(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>xy(s)).join(",")),`Target(${n})`}(ju(t))}; limitType=${t.limitType})`}function FS(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Et.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of gv(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,a,u){const l=UM(o,a,u);return o.inclusive?l<=0:l<0}(n.startAt,gv(n),s)||n.endAt&&!function(o,a,u){const l=UM(o,a,u);return o.inclusive?l>=0:l>0}(n.endAt,gv(n),s))}(t,e)}function GIe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hz(t){return(e,r)=>{let n=!1;for(const s of gv(t)){const i=JIe(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function JIe(t,e,r){const n=t.field.isKeyField()?Et.comparator(e.key,r.key):function(i,o,a){const u=o.data.field(i),l=a.data.field(i);return u!==null&&l!==null?Dy(u,l):Rt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Rt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yy(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return nz(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XIe=new pn(Et.comparator);function gl(){return XIe}const pz=new pn(Et.comparator);function M0(...t){let e=pz;for(const r of t)e=e.insert(r.key,r);return e}function mz(t){let e=pz;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function jh(){return vv()}function yz(){return vv()}function vv(){return new Qy(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZIe=new pn(Et.comparator),YIe=new Fi(Et.comparator);function ir(...t){let e=YIe;for(const r of t)e=e.add(r);return e}const QIe=new Fi(fr);function eke(){return QIe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cA(e)?"-0":e}}function gz(t){return{integerValue:""+t}}function tke(t,e){return IIe(e)?gz(e):Q$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this._=void 0}}function rke(t,e,r){return t instanceof fA?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&W$(i)&&(i=G$(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(r,e):t instanceof fw?wz(t,e):t instanceof hw?_z(t,e):function(s,i){const o=vz(s,i),a=qM(o)+qM(s.Pe);return qP(o)&&qP(s.Pe)?gz(a):Q$(s.serializer,a)}(t,e)}function nke(t,e,r){return t instanceof fw?wz(t,e):t instanceof hw?_z(t,e):r}function vz(t,e){return t instanceof hA?function(n){return qP(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class fA extends MS{}class fw extends MS{constructor(e){super(),this.elements=e}}function wz(t,e){const r=bz(e);for(const n of t.elements)r.some(s=>Ju(s,n))||r.push(n);return{arrayValue:{values:r}}}class hw extends MS{constructor(e){super(),this.elements=e}}function _z(t,e){let r=bz(e);for(const n of t.elements)r=r.filter(s=>!Ju(s,n));return{arrayValue:{values:r}}}class hA extends MS{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function qM(t){return Dn(t.integerValue||t.doubleValue)}function bz(t){return J$(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ike(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof fw&&s instanceof fw||n instanceof hw&&s instanceof hw?Ty(n.elements,s.elements,Ju):n instanceof hA&&s instanceof hA?Ju(n.Pe,s.Pe):n instanceof fA&&s instanceof fA}(t.transform,e.transform)}class ske{constructor(e,r){this.version=e,this.transformResults=r}}class sl{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new sl}static exists(e){return new sl(void 0,e)}static updateTime(e){return new sl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function z1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jS{}function Ez(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sz(t.key,sl.none()):new r_(t.key,t.data,sl.none());{const r=t.data,n=Xo.empty();let s=new Fi($i.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Bp(t.key,n,new Oa(s.toArray()),sl.none())}}function oke(t,e,r){t instanceof r_?function(s,i,o){const a=s.value.clone(),u=zM(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Bp?function(s,i,o){if(!z1(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zM(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Az(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function wv(t,e,r,n){return t instanceof r_?function(i,o,a,u){if(!z1(i.precondition,o))return a;const l=i.value.clone(),c=WM(i.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Bp?function(i,o,a,u){if(!z1(i.precondition,o))return a;const l=WM(i.fieldTransforms,u,o),c=o.data;return c.setAll(Az(i)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,o,a){return z1(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,r)}function ake(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=vz(n.transform,s||null);i!=null&&(r===null&&(r=Xo.empty()),r.set(n.field,i))}return r||null}function HM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ty(n,s,(i,o)=>ike(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class r_ extends jS{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bp extends jS{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Az(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function zM(t,e,r){const n=new Map;Hr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);n.set(i.field,nke(o,a,r[s]))}return n}function WM(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,rke(i,o,e))}return n}class Sz extends jS{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uke extends jS{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cke{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&oke(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=wv(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=wv(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=yz();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=r.has(s.key)?null:a;const u=Ez(o,a);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ft.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ir())}isEqual(e){return this.batchId===e.batchId&&Ty(this.mutations,e.mutations,(r,n)=>HM(r,n))&&Ty(this.baseMutations,e.baseMutations,(r,n)=>HM(r,n))}}class eO{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Hr(e.mutations.length===n.length);let s=function(){return ZIe}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new eO(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lke{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dke{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,ur;function fke(t){switch(t){default:return Rt();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0}}function Tz(t){if(t===void 0)return yl("GRPC error has no .code"),Ne.UNKNOWN;switch(t){case Cn.OK:return Ne.OK;case Cn.CANCELLED:return Ne.CANCELLED;case Cn.UNKNOWN:return Ne.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return Ne.INTERNAL;case Cn.UNAVAILABLE:return Ne.UNAVAILABLE;case Cn.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case Cn.NOT_FOUND:return Ne.NOT_FOUND;case Cn.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case Cn.ABORTED:return Ne.ABORTED;case Cn.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case Cn.DATA_LOSS:return Ne.DATA_LOSS;default:return Rt()}}(ur=Cn||(Cn={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hke(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pke=new sp([4294967295,4294967295],0);function GM(t){const e=hke().encode(t),r=new GH;return r.update(e),new Uint8Array(r.digest())}function JM(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new sp([r,n],0),new sp([s,i],0)]}class tO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new j0(`Invalid padding: ${r}`);if(n<0)throw new j0(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new j0(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new j0(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=sp.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(sp.fromNumber(n)));return s.compare(pke)===1&&(s=new sp([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=GM(e),[n,s]=JM(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tO(i,s,r);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const r=GM(e),[n,s]=JM(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class j0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,n_.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new US(Ft.min(),s,new pn(fr),gl(),ir())}}class n_{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new n_(n,r,ir(),ir(),ir())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class Dz{constructor(e,r){this.targetId=e,this.me=r}}class xz{constructor(e,r,n=Mi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class XM{constructor(){this.fe=0,this.ge=YM(),this.pe=Mi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ir(),r=ir(),n=ir();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Rt()}}),new n_(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=YM()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Hr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mke{constructor(e){this.Le=e,this.Be=new Map,this.ke=gl(),this.qe=ZM(),this.Qe=new pn(fr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Rt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(zP(i))if(n===0){const o=new Et(i.path);this.Ue(r,o,Yi.newNoDocument(o,Ft.min()))}else Hr(n===1);else{const o=this.Ye(r);if(o!==n){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,l)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,a;try{o=Sp(n).toUint8Array()}catch(u){if(u instanceof iz)return Sy("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new tO(o,s,i)}catch(u){return Sy(u instanceof j0?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&zP(a.target)){const u=new Et(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Yi.newNoDocument(u,e))}i.be&&(r.set(o,i.ve()),i.Ce())}});let n=ir();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new US(e,r,this.Qe,this.ke,n);return this.ke=gl(),this.qe=ZM(),this.Qe=new pn(fr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new XM,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Fi(fr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Qe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new XM),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function ZM(){return new pn(Et.comparator)}function YM(){return new pn(Et.comparator)}const yke={asc:"ASCENDING",desc:"DESCENDING"},gke={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vke={and:"AND",or:"OR"};class wke{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function GP(t,e){return t.useProto3Json||RS(e)?e:{value:e}}function pA(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _ke(t,e){return pA(t,e.toTimestamp())}function Uu(t){return Hr(!!t),Ft.fromTimestamp(function(r){const n=gf(r);return new zn(n.seconds,n.nanos)}(t))}function rO(t,e){return JP(t,e).canonicalString()}function JP(t,e){const r=function(s){return new vn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Cz(t){const e=vn.fromString(t);return Hr(Rz(e)),e}function XP(t,e){return rO(t.databaseId,e.path)}function vD(t,e){const r=Cz(e);if(r.get(1)!==t.databaseId.projectId)throw new bt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new bt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Et(kz(r))}function Iz(t,e){return rO(t.databaseId,e)}function bke(t){const e=Cz(t);return e.length===4?vn.emptyPath():kz(e)}function ZP(t){return new vn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kz(t){return Hr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function QM(t,e,r){return{name:XP(t,e),fields:r.value.mapValue.fields}}function Eke(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Rt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,c){return l.useProto3Json?(Hr(c===void 0||typeof c=="string"),Mi.fromBase64String(c||"")):(Hr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Mi.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Ne.UNKNOWN:Tz(l.code);return new bt(c,l.message||"")}(o);r=new xz(n,s,i,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=vD(t,n.document.name),i=Uu(n.document.updateTime),o=n.document.createTime?Uu(n.document.createTime):Ft.min(),a=new Xo({mapValue:{fields:n.document.fields}}),u=Yi.newFoundDocument(s,i,o,a),l=n.targetIds||[],c=n.removedTargetIds||[];r=new W1(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=vD(t,n.document),i=n.readTime?Uu(n.readTime):Ft.min(),o=Yi.newNoDocument(s,i),a=n.removedTargetIds||[];r=new W1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=vD(t,n.document),i=n.removedTargetIds||[];r=new W1([],i,s,null)}else{if(!("filter"in e))return Rt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new dke(s,i),a=n.targetId;r=new Dz(a,o)}}return r}function Ake(t,e){let r;if(e instanceof r_)r={update:QM(t,e.key,e.value)};else if(e instanceof Sz)r={delete:XP(t,e.key)};else if(e instanceof Bp)r={update:QM(t,e.key,e.data),updateMask:$ke(e.fieldMask)};else{if(!(e instanceof uke))return Rt();r={verify:XP(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const a=o.transform;if(a instanceof fA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fw)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hw)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hA)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Rt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:_ke(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Rt()}(t,e.precondition)),r}function Ske(t,e){return t&&t.length>0?(Hr(e!==void 0),t.map(r=>function(s,i){let o=s.updateTime?Uu(s.updateTime):Uu(i);return o.isEqual(Ft.min())&&(o=Uu(i)),new ske(o,s.transformResults||[])}(r,e))):[]}function Tke(t,e){return{documents:[Iz(t,e.path)]}}function Dke(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Iz(t,s);const i=function(l){if(l.length!==0)return Oz(Xu.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Am(h.field),direction:Cke(h.dir)}}(c))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const a=GP(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:r,parent:s}}function xke(t){let e=bke(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Hr(n===1);const c=r.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];r.where&&(i=function(d){const h=$z(d);return h instanceof Xu&&uz(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(d){return d.map(h=>function(p){return new dA(Sm(p.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(r.orderBy));let a=null;r.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,RS(h)?null:h}(r.limit));let u=null;r.startAt&&(u=function(d){const h=!!d.before,f=d.values||[];return new lA(f,h)}(r.startAt));let l=null;return r.endAt&&(l=function(d){const h=!d.before,f=d.values||[];return new lA(f,h)}(r.endAt)),HIe(e,s,o,i,a,"F",u,l)}function Pke(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $z(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Sm(r.unaryFilter.field);return Hn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Sm(r.unaryFilter.field);return Hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sm(r.unaryFilter.field);return Hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sm(r.unaryFilter.field);return Hn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}}(t):t.fieldFilter!==void 0?function(r){return Hn.create(Sm(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Xu.create(r.compositeFilter.filters.map(n=>$z(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Rt()}}(r.compositeFilter.op))}(t):Rt()}function Cke(t){return yke[t]}function Ike(t){return gke[t]}function kke(t){return vke[t]}function Am(t){return{fieldPath:t.canonicalString()}}function Sm(t){return $i.fromServerFormat(t.fieldPath)}function Oz(t){return t instanceof Hn?function(r){if(r.op==="=="){if(jM(r.value))return{unaryFilter:{field:Am(r.field),op:"IS_NAN"}};if(MM(r.value))return{unaryFilter:{field:Am(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(jM(r.value))return{unaryFilter:{field:Am(r.field),op:"IS_NOT_NAN"}};if(MM(r.value))return{unaryFilter:{field:Am(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Am(r.field),op:Ike(r.op),value:r.value}}}(t):t instanceof Xu?function(r){const n=r.getFilters().map(s=>Oz(s));return n.length===1?n[0]:{compositeFilter:{op:kke(r.op),filters:n}}}(t):Rt()}function $ke(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Rz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,s,i=Ft.min(),o=Ft.min(),a=Mi.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oke{constructor(e){this.ct=e}}function Rke(t){const e=xke({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?WP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nke{constructor(){this.un=new Bke}addToCollectionParentIndex(e,r){return this.un.add(r),Oe.resolve()}getCollectionParents(e,r){return Oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Oe.resolve()}deleteFieldIndex(e,r){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,r){return Oe.resolve()}getDocumentsMatchingTarget(e,r){return Oe.resolve(null)}getIndexType(e,r){return Oe.resolve(0)}getFieldIndexes(e,r){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,r){return Oe.resolve(yf.min())}getMinOffsetFromCollectionGroup(e,r){return Oe.resolve(yf.min())}updateCollectionGroup(e,r,n){return Oe.resolve()}updateIndexEntries(e,r){return Oe.resolve()}}class Bke{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Fi(vn.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Fi(vn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Py(0)}static kn(){return new Py(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fke{constructor(){this.changes=new Qy(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Yi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Oe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mke{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jke{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&wv(n.mutation,s,Oa.empty(),zn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ir()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ir()){const s=jh();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=M0();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=jh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ir()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{r.set(o,a)})})}computeViews(e,r,n,s){let i=gl();const o=vv(),a=function(){return vv()}();return r.forEach((u,l)=>{const c=n.get(l.key);s.has(l.key)&&(c===void 0||c.mutation instanceof Bp)?i=i.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),wv(c.mutation,l,c.mutation.getFieldMask(),zn.now())):o.set(l.key,Oa.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((l,c)=>o.set(l,c)),r.forEach((l,c)=>{var d;return a.set(l,new Mke(c,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,r){const n=vv();let s=new pn((o,a)=>o-a),i=ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let c=n.get(u)||Oa.empty();c=a.applyToLocalView(l,c),n.set(u,c);const d=(s.get(a.batchId)||ir()).add(u);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=yz();c.forEach(h=>{if(!i.has(h)){const f=Ez(r.get(h),n.get(h));f!==null&&d.set(h,f),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Oe.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return Et.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):zIe(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Oe.resolve(jh());let a=-1,u=i;return o.next(l=>Oe.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(c)?Oe.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,u,l,ir())).next(c=>({batchId:a,changes:mz(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Et(r)).next(n=>{let s=M0();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=M0();return this.indexManager.getCollectionParents(e,i).next(a=>Oe.forEach(a,u=>{const l=function(d,h){return new NS(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,n,s).next(c=>{c.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Yi.newInvalidDocument(c)))});let a=M0();return o.forEach((u,l)=>{const c=i.get(u);c!==void 0&&wv(c.mutation,l,Oa.empty(),zn.now()),FS(r,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uke{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Uu(s.createTime)}}(r)),Oe.resolve()}getNamedQuery(e,r){return Oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:Rke(s.bundledQuery),readTime:Uu(s.readTime)}}(r)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lke{constructor(){this.overlays=new pn(Et.comparator),this.Ir=new Map}getOverlay(e,r){return Oe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=jh();return Oe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Oe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Oe.resolve()}getOverlaysForCollection(e,r,n){const s=jh(),i=r.length+1,o=new Et(r.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Oe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new pn((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let c=i.get(l.largestBatchId);c===null&&(c=jh(),i=i.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=jh(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=s)););return Oe.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new lke(r,n));let i=this.Ir.get(r);i===void 0&&(i=ir(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kke{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.Tr=new Fi(ti.Er),this.dr=new Fi(ti.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ti(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new ti(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Et(new vn([])),n=new ti(r,e),s=new ti(r,e+1),i=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Et(new vn([])),n=new ti(r,e),s=new ti(r,e+1);let i=ir();return this.dr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new ti(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ti{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Et.comparator(e.key,r.key)||fr(e.wr,r.wr)}static Ar(e,r){return fr(e.wr,r.wr)||Et.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vke{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Fi(ti.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cke(i,r,n,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ti(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,r){return Oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ti(r,0),s=new ti(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],o=>{const a=this.Dr(o.wr);i.push(a)}),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Fi(fr);return r.forEach(s=>{const i=new ti(s,0),o=new ti(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{n=n.add(a.wr)})}),Oe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Et.isDocumentKey(i)||(i=i.child(""));const o=new ti(new Et(i),0);let a=new Fi(fr);return this.br.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===s&&(a=a.add(u.wr)),!0)},o),Oe.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Hr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Oe.forEach(r.mutations,s=>{const i=new ti(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new ti(r,0),s=this.br.firstAfterOrEqual(n);return Oe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qke{constructor(e){this.Mr=e,this.docs=function(){return new pn(Et.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Oe.resolve(n?n.document.mutableCopy():Yi.newInvalidDocument(r))}getEntries(e,r){let n=gl();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Yi.newInvalidDocument(s))}),Oe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=gl();const o=r.path,a=new Et(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||DIe(TIe(c),n)<=0||(s.has(c.key)||FS(r,c))&&(i=i.insert(c.key,c.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Rt()}Or(e,r){return Oe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Hke(this)}getSize(e){return Oe.resolve(this.size)}}class Hke extends Fke{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zke{constructor(e){this.persistence=e,this.Nr=new Qy(r=>X$(r),Z$),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nO,this.targetCount=0,this.kr=Py.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Py(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Oe.resolve()}updateTargetData(e,r){return this.Kn(r),Oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Oe.waitFor(i).next(()=>s)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Oe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Oe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Oe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Oe.resolve(n)}containsKey(e,r){return Oe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wke{constructor(e,r){this.qr={},this.overlays={},this.Qr=new z$(0),this.Kr=!1,this.Kr=!0,this.$r=new Kke,this.referenceDelegate=e(this),this.Ur=new zke(this),this.indexManager=new Nke,this.remoteDocumentCache=function(s){return new qke(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Oke(r),this.Gr=new Uke(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Lke,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Vke(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Qe("MemoryPersistence","Starting transaction:",e);const s=new Gke(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Oe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Gke extends PIe{constructor(e){super(),this.currentSequenceNumber=e}}class iO{constructor(e){this.persistence=e,this.Jr=new nO,this.Yr=null}static Zr(e){return new iO(e)}get Xr(){if(this.Yr)return this.Yr;throw Rt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Oe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,n=>{const s=Et.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ft.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=ir(),s=ir();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sO(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jke{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xke{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qDe()?8:CIe(ts())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Jke;return this.Xi(e,r,o).next(a=>{if(i.result=a,this.zi)return this.es(e,r,o,a.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(d0()<=ar.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Em(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(d0()<=ar.DEBUG&&Qe("QueryEngine","Query:",Em(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(d0()<=ar.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Em(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ju(r))):Oe.resolve())}Yi(e,r){if(VM(r))return Oe.resolve(null);let n=ju(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=WP(r,null,"F"),n=ju(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=ir(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.ts(r,a);return this.ns(r,l,o,u.readTime)?this.Yi(e,WP(r,null,"F")):this.rs(e,l,r,u)}))})))}Zi(e,r,n,s){return VM(r)||s.isEqual(Ft.min())?Oe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(r,i);return this.ns(r,o,n,s)?Oe.resolve(null):(d0()<=ar.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Em(r)),this.rs(e,o,r,SIe(s,-1)).next(a=>a))})}ts(e,r){let n=new Fi(hz(e));return r.forEach((s,i)=>{FS(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return d0()<=ar.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Em(r)),this.Ji.getDocumentsMatchingQuery(e,r,yf.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zke{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new pn(fr),this._s=new Qy(i=>X$(i),Z$),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jke(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Yke(t,e,r,n){return new Zke(t,e,r,n)}async function Nz(t,e){const r=Mt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],a=[];let u=ir();for(const l of s){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of i){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return r.localDocuments.getDocuments(n,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})}function Qke(t,e){const r=Mt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const d=l.batch,h=d.keys();let f=Oe.resolve();return h.forEach(p=>{f=f.next(()=>c.getEntry(u,p)).next(m=>{const E=l.docVersions.get(p);Hr(E!==null),m.version.compareTo(E)<0&&(d.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let u=ir();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Bz(t){const e=Mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function e$e(t,e){const r=Mt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((c,d)=>{const h=s.get(d);if(!h)return;a.push(r.Ur.removeMatchingKeys(i,c.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,c.addedDocuments,d)));let f=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Mi.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,n)),s=s.insert(d,f),function(m,E,A){return m.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,f,c)&&a.push(r.Ur.updateTargetData(i,f))});let u=gl(),l=ir();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(t$e(i,o,e.documentUpdates).next(c=>{u=c.Ps,l=c.Is})),!n.isEqual(Ft.min())){const c=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));a.push(c)}return Oe.waitFor(a).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,l)).next(()=>u)}).then(i=>(r.os=s,i))}function t$e(t,e,r){let n=ir(),s=ir();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=gl();return r.forEach((a,u)=>{const l=i.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Ft.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Qe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function r$e(t,e){const r=Mt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function n$e(t,e){const r=Mt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Oe.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new Hd(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function YP(t,e,r){const n=Mt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!t_(o))throw o;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function e3(t,e,r){const n=Mt(t);let s=Ft.min(),i=ir();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const d=Mt(u),h=d._s.get(c);return h!==void 0?Oe.resolve(d.os.get(h)):d.Ur.getTargetData(l,c)}(n,o,ju(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:Ft.min(),r?i:ir())).next(a=>(i$e(n,GIe(e),a),{documents:a,Ts:i})))}function i$e(t,e,r){let n=t.us.get(e)||Ft.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class t3{constructor(){this.activeTargetIds=eke()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s$e{constructor(){this.so=new t3,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new t3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o$e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wb=null;function wD(){return Wb===null?Wb=function(){return 268435456+Math.round(2147483648*Math.random())}():Wb++,"0x"+Wb.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="WebChannelConnection";class c$e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,o){const a=wD(),u=this.xo(r,n.toUriEncodedString());Qe("RestConnection",`Sending RPC '${r}' ${a}:`,u,s);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,i,o),this.No(r,u,l,s).then(c=>(Qe("RestConnection",`Received RPC '${r}' ${a}: `,c),c),c=>{throw Sy("RestConnection",`RPC '${r}' ${a} failed with error: `,c,"url: ",u,"request:",s),c})}Lo(r,n,s,i,o,a){return this.Mo(r,n,s,i,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zy}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>r[o]=i),s&&s.headers.forEach((i,o)=>r[o]=i)}xo(r,n){const s=a$e[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=wD();return new Promise((o,a)=>{const u=new JH;u.setWithCredentials(!0),u.listenOnce(ZH.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case q1.NO_ERROR:const c=u.getResponseJson();Qe(zi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case q1.TIMEOUT:Qe(zi,`RPC '${e}' ${i} timed out`),a(new bt(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case q1.HTTP_ERROR:const d=u.getStatus();if(Qe(zi,`RPC '${e}' ${i} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(E){const A=E.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(A)>=0?A:Ne.UNKNOWN}(f.status);a(new bt(p,f.message))}else a(new bt(Ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Ne.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{Qe(zi,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);Qe(zi,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",l,n,15)})}Bo(e,r,n){const s=wD(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ez(),a=QH(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new XH({})),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const c=i.join("");Qe(zi,`Creating RPC '${e}' stream ${s}: ${c}`,u);const d=o.createWebChannel(c,u);let h=!1,f=!1;const p=new u$e({Io:E=>{f?Qe(zi,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(h||(Qe(zi,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Qe(zi,`RPC '${e}' stream ${s} sending:`,E),d.send(E))},To:()=>d.close()}),m=(E,A,_)=>{E.listen(A,g=>{try{_(g)}catch(v){setTimeout(()=>{throw v},0)}})};return m(d,F0.EventType.OPEN,()=>{f||(Qe(zi,`RPC '${e}' stream ${s} transport opened.`),p.yo())}),m(d,F0.EventType.CLOSE,()=>{f||(f=!0,Qe(zi,`RPC '${e}' stream ${s} transport closed`),p.So())}),m(d,F0.EventType.ERROR,E=>{f||(f=!0,Sy(zi,`RPC '${e}' stream ${s} transport errored:`,E),p.So(new bt(Ne.UNAVAILABLE,"The operation could not be completed")))}),m(d,F0.EventType.MESSAGE,E=>{var A;if(!f){const _=E.data[0];Hr(!!_);const g=_,v=g.error||((A=g[0])===null||A===void 0?void 0:A.error);if(v){Qe(zi,`RPC '${e}' stream ${s} received error:`,v);const S=v.status;let x=function(b){const T=Cn[b];if(T!==void 0)return Tz(T)}(S),D=v.message;x===void 0&&(x=Ne.INTERNAL,D="Unknown error status: "+S+" with message "+v.message),f=!0,p.So(new bt(x,D)),d.close()}else Qe(zi,`RPC '${e}' stream ${s} received:`,_),p.bo(_)}}),m(a,YH.STAT_EVENT,E=>{E.stat===KP.PROXY?Qe(zi,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===KP.NOPROXY&&Qe(zi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}function _D(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){return new wke(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Qe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,r,n,s,i,o,a,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fz(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ne.RESOURCE_EXHAUSTED?(yl(r.toString()),yl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new bt(Ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l$e extends Mz{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Eke(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ft.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ft.min():o.readTime?Uu(o.readTime):Ft.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=ZP(this.serializer),r.addTarget=function(i,o){let a;const u=o.target;if(a=zP(u)?{documents:Tke(i,u)}:{query:Dke(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Pz(i,o.resumeToken);const l=GP(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ft.min())>0){a.readTime=pA(i,o.snapshotVersion.toTimestamp());const l=GP(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const n=Pke(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=ZP(this.serializer),r.removeTarget=e,this.a_(r)}}class d$e extends Mz{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Hr(!!e.streamToken),this.lastStreamToken=e.streamToken,Hr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Hr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Ske(e.writeResults,e.commitTime),n=Uu(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=ZP(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Ake(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f$e extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new bt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,JP(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new bt(Ne.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,JP(r,n),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Ne.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class h$e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yl(r),this.D_=!1):Qe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p$e{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{n.enqueueAndForget(async()=>{Fp(this)&&(Qe("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Mt(u);l.L_.add(4),await i_(l),l.q_.set("Unknown"),l.L_.delete(4),await KS(l)}(this))})}),this.q_=new h$e(n,s)}}async function KS(t){if(Fp(t))for(const e of t.B_)await e(!0)}async function i_(t){for(const e of t.B_)await e(!1)}function jz(t,e){const r=Mt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),cO(r)?uO(r):eg(r).r_()&&aO(r,e))}function oO(t,e){const r=Mt(t),n=eg(r);r.N_.delete(e),n.r_()&&Uz(r,e),r.N_.size===0&&(n.r_()?n.o_():Fp(r)&&r.q_.set("Unknown"))}function aO(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}eg(t).A_(e)}function Uz(t,e){t.Q_.xe(e),eg(t).R_(e)}function uO(t){t.Q_=new mke({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),eg(t).start(),t.q_.v_()}function cO(t){return Fp(t)&&!eg(t).n_()&&t.N_.size>0}function Fp(t){return Mt(t).L_.size===0}function Lz(t){t.Q_=void 0}async function m$e(t){t.q_.set("Online")}async function y$e(t){t.N_.forEach((e,r)=>{aO(t,e)})}async function g$e(t,e){Lz(t),cO(t)?(t.q_.M_(e),uO(t)):t.q_.set("Unknown")}async function v$e(t,e,r){if(t.q_.set("Online"),e instanceof xz&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await mA(t,n)}else if(e instanceof W1?t.Q_.Ke(e):e instanceof Dz?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ft.min()))try{const n=await Bz(t.localStore);r.compareTo(n)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=i.N_.get(l);c&&i.N_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=i.N_.get(u);if(!c)return;i.N_.set(u,c.withResumeToken(Mi.EMPTY_BYTE_STRING,c.snapshotVersion)),Uz(i,u);const d=new Hd(c.target,u,l,c.sequenceNumber);aO(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){Qe("RemoteStore","Failed to raise snapshot:",n),await mA(t,n)}}async function mA(t,e,r){if(!t_(e))throw e;t.L_.add(1),await i_(t),t.q_.set("Offline"),r||(r=()=>Bz(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Qe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await KS(t)})}function Kz(t,e){return e().catch(r=>mA(t,r,e))}async function VS(t){const e=Mt(t),r=vf(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;w$e(e);)try{const s=await r$e(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,_$e(e,s)}catch(s){await mA(e,s)}Vz(e)&&qz(e)}function w$e(t){return Fp(t)&&t.O_.length<10}function _$e(t,e){t.O_.push(e);const r=vf(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Vz(t){return Fp(t)&&!vf(t).n_()&&t.O_.length>0}function qz(t){vf(t).start()}async function b$e(t){vf(t).p_()}async function E$e(t){const e=vf(t);for(const r of t.O_)e.m_(r.mutations)}async function A$e(t,e,r){const n=t.O_.shift(),s=eO.from(n,e,r);await Kz(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await VS(t)}async function S$e(t,e){e&&vf(t).V_&&await async function(n,s){if(function(o){return fke(o)&&o!==Ne.ABORTED}(s.code)){const i=n.O_.shift();vf(n).s_(),await Kz(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await VS(n)}}(t,e),Vz(t)&&qz(t)}async function n3(t,e){const r=Mt(t);r.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const n=Fp(r);r.L_.add(3),await i_(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await KS(r)}async function T$e(t,e){const r=Mt(t);e?(r.L_.delete(2),await KS(r)):e||(r.L_.add(2),await i_(r),r.q_.set("Unknown"))}function eg(t){return t.K_||(t.K_=function(r,n,s){const i=Mt(r);return i.w_(),new l$e(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:m$e.bind(null,t),Ro:y$e.bind(null,t),mo:g$e.bind(null,t),d_:v$e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cO(t)?uO(t):t.q_.set("Unknown")):(await t.K_.stop(),Lz(t))})),t.K_}function vf(t){return t.U_||(t.U_=function(r,n,s){const i=Mt(r);return i.w_(),new d$e(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b$e.bind(null,t),mo:S$e.bind(null,t),f_:E$e.bind(null,t),g_:A$e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await VS(t)):(await t.U_.stop(),t.O_.length>0&&(Qe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new of,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,a=new lO(e,r,o,s,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dO(t,e){if(yl("AsyncQueue",`${e}: ${t}`),t_(t))return new bt(Ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Et.comparator(r.key,n.key):(r,n)=>Et.comparator(r.key,n.key),this.keyedMap=M0(),this.sortedSet=new pn(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ym;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.W_=new pn(Et.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Rt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Cy{constructor(e,r,n,s,i,o,a,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(a=>{o.push({type:0,doc:a})}),new Cy(e,r,Ym.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&BS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D$e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class x$e{constructor(){this.queries=s3(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Mt(r),i=s.queries;s.queries=s3(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(n)})})(this,new bt(Ne.ABORTED,"Firestore shutting down"))}}function s3(){return new Qy(t=>fz(t),BS)}async function P$e(t,e){const r=Mt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new D$e,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const a=dO(o,`Initialization of query '${Em(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&fO(r)}async function C$e(t,e){const r=Mt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function I$e(t,e){const r=Mt(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(n=!0);o.z_=s}}n&&fO(r)}function k$e(t,e,r){const n=Mt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function fO(t){t.Y_.forEach(e=>{e.next()})}var QP,o3;(o3=QP||(QP={})).ea="default",o3.Cache="cache";class $$e{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Cy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Cy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==QP.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.key=e}}class zz{constructor(e){this.key=e}}class O$e{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ir(),this.mutatedKeys=ir(),this.Aa=hz(e),this.Ra=new Ym(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new i3,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,d)=>{const h=s.get(c),f=FS(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(n.track({type:3,doc:f}),E=!0):this.ga(h,f)||(n.track({type:2,doc:f}),E=!0,(u&&this.Aa(f,u)>0||l&&this.Aa(f,l)<0)&&(a=!0)):!h&&f?(n.track({type:0,doc:f}),E=!0):h&&!f&&(n.track({type:1,doc:h}),E=!0,(u||l)&&(a=!0)),E&&(f?(o=o.add(f),i=m?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),n.track({type:1,doc:c})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,d)=>function(f,p){const m=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return m(f)-m(p)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Cy(this.query,e.Ra,i,o,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new i3,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ir(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new zz(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Hz(n))}),r}ba(e){this.Ta=e.Ts,this.da=ir();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Cy.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class R$e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class N$e{constructor(e){this.key=e,this.va=!1}}class B$e{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qy(a=>fz(a),BS),this.Ma=new Map,this.xa=new Set,this.Oa=new pn(Et.comparator),this.Na=new Map,this.La=new nO,this.Ba={},this.ka=new Map,this.qa=Py.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function F$e(t,e,r=!0){const n=Yz(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Wz(n,e,r,!0),s}async function M$e(t,e){const r=Yz(t);await Wz(r,e,!0,!1)}async function Wz(t,e,r,n){const s=await n$e(t.localStore,ju(e)),i=s.targetId,o=r?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return n&&(a=await j$e(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&jz(t.remoteStore,s),a}async function j$e(t,e,r,n,s){t.Ka=(d,h,f)=>async function(m,E,A,_){let g=E.view.ma(A);g.ns&&(g=await e3(m.localStore,E.query,!1).then(({documents:D})=>E.view.ma(D,g)));const v=_&&_.targetChanges.get(E.targetId),S=_&&_.targetMismatches.get(E.targetId)!=null,x=E.view.applyChanges(g,m.isPrimaryClient,v,S);return u3(m,E.targetId,x.wa),x.snapshot}(t,d,h,f);const i=await e3(t.localStore,e,!0),o=new O$e(e,i.Ts),a=o.ma(i.documents),u=n_.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,u);u3(t,r,l.wa);const c=new R$e(e,r,o);return t.Fa.set(e,c),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),l.snapshot}async function U$e(t,e,r){const n=Mt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(o=>!BS(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await YP(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&oO(n.remoteStore,s.targetId),eC(n,s.targetId)}).catch(e_)):(eC(n,s.targetId),await YP(n.localStore,s.targetId,!0))}async function L$e(t,e){const r=Mt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),oO(r.remoteStore,n.targetId))}async function K$e(t,e,r){const n=J$e(t);try{const s=await function(o,a){const u=Mt(o),l=zn.now(),c=a.reduce((f,p)=>f.add(p.key),ir());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=gl(),m=ir();return u.cs.getEntries(f,c).next(E=>{p=E,p.forEach((A,_)=>{_.isValidDocument()||(m=m.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(E=>{d=E;const A=[];for(const _ of a){const g=ake(_,d.get(_.key).overlayedDocument);g!=null&&A.push(new Bp(_.key,g,sz(g.value.mapValue),sl.exists(!0)))}return u.mutationQueue.addMutationBatch(f,l,A,a)}).next(E=>{h=E;const A=E.applyToLocalDocumentSet(d,m);return u.documentOverlayCache.saveOverlays(f,E.batchId,A)})}).then(()=>({batchId:h.batchId,changes:mz(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new pn(fr)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(n,s.batchId,r),await s_(n,s.changes),await VS(n.remoteStore)}catch(s){const i=dO(s,"Failed to persist write");r.reject(i)}}async function Gz(t,e){const r=Mt(t);try{const n=await e$e(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Na.get(i);o&&(Hr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Hr(o.va):s.removedDocuments.size>0&&(Hr(o.va),o.va=!1))}),await s_(r,n,e)}catch(n){await e_(n)}}function a3(t,e,r){const n=Mt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Mt(o);u.onlineState=a;let l=!1;u.queries.forEach((c,d)=>{for(const h of d.j_)h.Z_(a)&&(l=!0)}),l&&fO(u)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function V$e(t,e,r){const n=Mt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let o=new pn(Et.comparator);o=o.insert(i,Yi.newNoDocument(i,Ft.min()));const a=ir().add(i),u=new US(Ft.min(),new Map,new pn(fr),o,a);await Gz(n,u),n.Oa=n.Oa.remove(i),n.Na.delete(e),hO(n)}else await YP(n.localStore,e,!1).then(()=>eC(n,e,r)).catch(e_)}async function q$e(t,e){const r=Mt(t),n=e.batch.batchId;try{const s=await Qke(r.localStore,e);Xz(r,n,null),Jz(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await s_(r,s)}catch(s){await e_(s)}}async function H$e(t,e,r){const n=Mt(t);try{const s=await function(o,a){const u=Mt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(d=>(Hr(d!==null),c=d.keys(),u.mutationQueue.removeMutationBatch(l,d))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(n.localStore,e);Xz(n,e,r),Jz(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await s_(n,s)}catch(s){await e_(s)}}function Jz(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Xz(t,e,r){const n=Mt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function eC(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Zz(t,n)})}function Zz(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(oO(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),hO(t))}function u3(t,e,r){for(const n of r)n instanceof Hz?(t.La.addReference(n.key,e),z$e(t,n)):n instanceof zz?(Qe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Zz(t,n.key)):Rt()}function z$e(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Qe("SyncEngine","New document in limbo: "+r),t.xa.add(n),hO(t))}function hO(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Et(vn.fromString(e)),n=t.qa.next();t.Na.set(n,new N$e(r)),t.Oa=t.Oa.insert(r,n),jz(t.remoteStore,new Hd(ju(Y$(r.path)),n,"TargetPurposeLimboResolution",z$.oe))}}async function s_(t,e,r){const n=Mt(t),s=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((a,u)=>{o.push(n.Ka(u,e,r).then(l=>{var c;if((l||r)&&n.isPrimaryClient){const d=l?!l.fromCache:(c=r==null?void 0:r.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;n.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(l){s.push(l);const d=sO.Wi(u.targetId,l);i.push(d)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(u,l){const c=Mt(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Oe.forEach(l,h=>Oe.forEach(h.$i,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>Oe.forEach(h.Ui,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!t_(d))throw d;Qe("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.os.get(h),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);c.os=c.os.insert(h,m)}}}(n.localStore,i))}async function W$e(t,e){const r=Mt(t);if(!r.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const n=await Nz(r.localStore,e);r.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new bt(Ne.CANCELLED,o))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await s_(r,n.hs)}}function G$e(t,e){const r=Mt(t),n=r.Na.get(e);if(n&&n.va)return ir().add(n.key);{let s=ir();const i=r.Ma.get(e);if(!i)return s;for(const o of i){const a=r.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function Yz(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G$e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V$e.bind(null,e),e.Ca.d_=I$e.bind(null,e.eventManager),e.Ca.$a=k$e.bind(null,e.eventManager),e}function J$e(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q$e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H$e.bind(null,e),e}class c3{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=LS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return Yke(this.persistence,new Xke,e.initialUser,this.serializer)}createPersistence(e){return new Wke(iO.Zr,this.serializer)}createSharedClientState(e){return new s$e}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class X$e{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>a3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=W$e.bind(null,this.syncEngine),await T$e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x$e}()}createDatastore(e){const r=LS(e.databaseInfo.databaseId),n=function(i){return new c$e(i)}(e.databaseInfo);return function(i,o,a,u){return new f$e(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,a){return new p$e(n,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,r=>a3(this.syncEngine,r,0),function(){return r3.D()?new r3:new o$e}())}createSyncEngine(e,r){return function(s,i,o,a,u,l,c){const d=new B$e(s,i,o,a,u,l);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Mt(s);Qe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await i_(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$e{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):yl("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y$e{constructor(e,r,n,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Xi.UNAUTHENTICATED,this.clientId=rz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async i=>{Qe("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Qe("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new of;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=dO(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function bD(t,e){t.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await Nz(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await eOe(t);Qe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>n3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>n3(e.remoteStore,s)),t._onlineComponents=e}function Q$e(t){return t.name==="FirebaseError"?t.code===Ne.FAILED_PRECONDITION||t.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function eOe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Qe("FirestoreClient","Using user provided OfflineComponentProvider");try{await bD(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!Q$e(r))throw r;Sy("Error using user provided cache. Falling back to memory cache: "+r),await bD(t,new c3)}}else Qe("FirestoreClient","Using default OfflineComponentProvider"),await bD(t,new c3);return t._offlineComponents}async function Qz(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Qe("FirestoreClient","Using user provided OnlineComponentProvider"),await l3(t,t._uninitializedComponentsProvider._online)):(Qe("FirestoreClient","Using default OnlineComponentProvider"),await l3(t,new X$e))),t._onlineComponents}function tOe(t){return Qz(t).then(e=>e.syncEngine)}async function rOe(t){const e=await Qz(t),r=e.eventManager;return r.onListen=F$e.bind(null,e.syncEngine),r.onUnlisten=U$e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=M$e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=L$e.bind(null,e.syncEngine),r}function nOe(t,e,r={}){const n=new of;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,l){const c=new Z$e({next:h=>{o.enqueueAndForget(()=>C$e(i,d));const f=h.docs.has(a);!f&&h.fromCache?l.reject(new bt(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?l.reject(new bt(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new $$e(Y$(a.path),c,{includeMetadataChanges:!0,_a:!0});return P$e(i,d)}(await rOe(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iOe(t,e,r){if(!r)throw new bt(Ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sOe(t,e,r,n){if(e===!0&&n===!0)throw new bt(Ne.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function f3(t){if(!Et.isDocumentKey(t))throw new bt(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pO(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Rt()}function pw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new bt(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=pO(t);throw new bt(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new bt(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new bt(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sOe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eW((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new bt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new bt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new bt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mO{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new bt(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h3(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new mIe;switch(n.type){case"firstParty":return new wIe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new bt(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=d3.get(r);n&&(Qe("ComponentProvider","Removing Datastore"),d3.delete(r),n.terminate())}(this),Promise.resolve()}}function oOe(t,e,r,n={}){var s;const i=(t=pw(t,mO))._getSettings(),o=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Sy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),n.mockUserToken){let a,u;if(typeof n.mockUserToken=="string")a=n.mockUserToken,u=Xi.MOCK_USER;else{a=MDe(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new bt(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xi(l)}t._authCredentials=new yIe(new tz(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yO(this.firestore,e,this._query)}}class ra{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ra(this.firestore,e,this._key)}}class mw extends yO{constructor(e,r,n){super(e,r,Y$(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ra(this.firestore,null,new Et(e))}withConverter(e){return new mw(this.firestore,e,this._path)}}function um(t,e,...r){if(t=ua(t),arguments.length===1&&(e=rz.newId()),iOe("doc","path",e),t instanceof mO){const n=vn.fromString(e,...r);return f3(n),new ra(t,null,new Et(n))}{if(!(t instanceof ra||t instanceof mw))throw new bt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(vn.fromString(e,...r));return f3(n),new ra(t.firestore,t instanceof mw?t.converter:null,new Et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aOe{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Fz(this,"async_queue_retry"),this.Eu=()=>{const r=_D();r&&Qe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const e=_D();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const r=_D();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const r=new of;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!t_(e))throw e;Qe("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const r=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw yl("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.Pu=!1,n))));return this.au=r,r}enqueueAfterDelay(e,r,n){this.du(),this.Tu.indexOf(e)>-1&&(r=0);const s=lO.createAndSchedule(this,e,r,n,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&Rt()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const r of this.lu)if(r.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const r=this.lu.indexOf(e);this.lu.splice(r,1)}}class gO extends mO{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=function(){return new aOe}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rW(this),this._firestoreClient.terminate()}}function uOe(t,e){const r=typeof t=="object"?t:hH(),n=typeof t=="string"?t:"(default)",s=O$(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=BDe("firestore");i&&oOe(s,...i)}return s}function tW(t){return t._firestoreClient||rW(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rW(t){var e,r,n;const s=t._freezeSettings(),i=function(a,u,l,c){return new $Ie(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,eW(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Y$e(t._authCredentials,t._appCheckCredentials,t._queue,i),!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iy(Mi.fromBase64String(e))}catch(r){throw new bt(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Iy(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new bt(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new bt(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new bt(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fr(this._lat,e._lat)||fr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cOe=/^__.*__$/;class lOe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Bp(e,this.data,this.fieldMask,r,this.fieldTransforms):new r_(e,this.data,r,this.fieldTransforms)}}function iW(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class bO{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new bO(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Su({path:n,Du:!1});return s.vu(e),s}Cu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Su({path:n,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return yA(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(iW(this.wu)&&cOe.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class dOe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||LS(e)}Nu(e,r,n,s=!1){return new bO({wu:e,methodName:r,Ou:n,path:$i.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fOe(t){const e=t._freezeSettings(),r=LS(t._databaseId);return new dOe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function hOe(t,e,r,n,s,i={}){const o=t.Nu(i.merge||i.mergeFields?2:0,e,r,s);uW("Data must be an object, but it was:",o,n);const a=oW(n,o);let u,l;if(i.merge)u=new Oa(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const d of i.mergeFields){const h=pOe(e,d,r);if(!o.contains(h))throw new bt(Ne.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);yOe(c,h)||c.push(h)}u=new Oa(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new lOe(new Xo(a),u,l)}function sW(t,e){if(aW(t=ua(t)))return uW("Unsupported field value:",e,t),oW(t,e);if(t instanceof nW)return function(n,s){if(!iW(s.wu))throw s.Mu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const a of n){let u=sW(a,s.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=ua(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tke(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=zn.fromDate(n);return{timestampValue:pA(s.serializer,i)}}if(n instanceof zn){const i=new zn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:pA(s.serializer,i)}}if(n instanceof wO)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Iy)return{bytesValue:Pz(s.serializer,n._byteString)};if(n instanceof ra){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rO(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof _O)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Q$(a.serializer,u)})}}}}}}(n,s);throw s.Mu(`Unsupported field value: ${pO(n)}`)}(t,e)}function oW(t,e){const r={};return nz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yy(t,(n,s)=>{const i=sW(s,e.bu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function aW(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zn||t instanceof wO||t instanceof Iy||t instanceof ra||t instanceof nW||t instanceof _O)}function uW(t,e,r){if(!aW(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=pO(r);throw n==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+n)}}function pOe(t,e,r){if((e=ua(e))instanceof vO)return e._internalPath;if(typeof e=="string")return cW(t,e);throw yA("Field path arguments must be of type string or ",t,!1,void 0,r)}const mOe=new RegExp("[~\\*/\\[\\]]");function cW(t,e,r){if(e.search(mOe)>=0)throw yA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vO(...e.split("."))._internalPath}catch{throw yA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function yA(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new bt(Ne.INVALID_ARGUMENT,a+t+u)}function yOe(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ra(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gOe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(dW("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class gOe extends lW{data(){return super.data()}}function dW(t,e){return typeof e=="string"?cW(t,e):e instanceof vO?e._internalPath:e._delegate._internalPath}class vOe{convertValue(e,r="none"){switch(Tp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Sp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Rt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Yy(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>Dn(o.doubleValue));return new _O(i)}convertGeoPoint(e){return new wO(Dn(e.latitude),Dn(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=G$(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(cw(e));default:return null}}convertTimestamp(e){const r=gf(e);return new zn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=vn.fromString(e);Hr(Rz(n));const s=new lw(n.get(1),n.get(3)),i=new Et(n.popFirst(5));return s.isEqual(r)||yl(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wOe(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Oe{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fW extends lW{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new bOe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(dW("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class bOe extends fW{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){t=pw(t,ra);const e=pw(t.firestore,gO);return nOe(tW(e),t._key).then(r=>SOe(e,t,r))}class EOe extends vOe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iy(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ra(this.firestore,null,r)}}function f0(t,e,r){t=pw(t,ra);const n=pw(t.firestore,gO),s=wOe(t.converter,e,r);return AOe(n,[hOe(fOe(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,sl.none())])}function AOe(t,e){return function(n,s){const i=new of;return n.asyncQueue.enqueueAndForget(async()=>K$e(await tOe(n),s,i)),i.promise}(tW(t),e)}function SOe(t,e,r){const n=r.docs.get(e._key),s=new EOe(t);return new fW(t,s,e._key,n,new _Oe(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Zy=s})(Jy),Ey(new bp("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),a=new gO(new gIe(n.getProvider("auth-internal")),new bIe(n.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lw(l.options.projectId,c)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nf(OM,"4.7.1",e),nf(OM,"4.7.1","esm2017")})();var TOe="firebase",DOe="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nf(TOe,DOe,"app");const xOe={apiKey:"AIzaSyDT2vb-sMcMnDH92HpYe0zFZkB9KeWg0J4",authDomain:"care-cove.firebaseapp.com",projectId:"care-cove",storageBucket:"care-cove.appspot.com",messagingSenderId:"206987749536",appId:"1:206987749536:web:cf0625e1d6a41cb108c1c5",measurementId:"G-7CY3YDPWCV"},hW=fH(xOe);bm(hW);const cm=uOe(hW),Gb={aquafinance_capital:{uri:"did:dht:3fkz5ssfxbriwks3iy5nwys3q5kyx64ettp9wfn1yfekfkiguj1y",name:"AquaFinance Capital",description:"Provides exchanges with the Ghanaian Cedis: GHS to USDC, GHS to KES"},flowback_financial:{uri:"did:dht:zkp5gbsqgzn69b3y5dtt5nnpjtdq6sxyukpzo68npsf79bmtb9zy",name:"Flowback Financial",description:"Offers international rates with various currencies - USD to GBP, GBP to CAD."},vertex_liquid_assets:{uri:"did:dht:enwguxo8uzqexq14xupe4o9ymxw3nzeb9uug5ijkj9rhfbf1oy5y",name:"Vertex Liquid Assets",description:"Offers currency exchanges between African currencies - MAD to EGP, GHS to NGN."},titanium_trust:{uri:"did:dht:ozn5c51ruo7z63u1h748ug7rw5p1mq3853ytrd5gatu9a8mm8f1o",name:"Titanium Trust",description:"Provides offerings to exchange USD to African currencies - USD to GHS, USD to KES."}},POe=()=>{const t=vl({balance:1e3,transactions:[],transactionsLoading:!0,pfiAllowlist:Object.keys(Gb).map(T=>({pfiUri:Gb[T].uri,pfiName:Gb[T].name,pfiDescription:Gb[T].description})),selectedTransaction:null,offering:null,payinCurrencies:[],payoutCurrencies:[],offerings:[],customerDid:null,customerCredentials:[]});if(typeof window<"u"){const T=localStorage.getItem("walletBalance");t.balance=parseFloat(T)||1e4}const e=async()=>{try{const P=bm().currentUser;if(!P){console.log("User is not authenticated, redirecting to login..."),n.push("/login");return}const C=um(cm,"donors",P.email),k=await ED(C);if(k.exists()){const K=k.data();K.balance?(t.balance=K.balance,console.log("Balance loaded from Firestore:",t.balance),localStorage.setItem("walletBalance",t.balance.toString())):(t.balance=1e4,console.log("No balance found, setting to default (1000)"))}else console.log("User document does not exist in Firestore."),t.balance=1e4,await f0(C,{balance:t.balance})}catch(T){console.error("Error loading balance from Firestore:",T)}},r=bm(),n=WQ();iCe(r,T=>{T||n.push("/login")});const s=async()=>{try{const T=[];for(const P of t.pfiAllowlist){const C=P.pfiUri,k=await Pi.getOfferings({pfiDid:C});T.push(...k)}t.offerings=T,x()}catch(T){console.error("Failed to fetch offerings:",T)}},i=async(T,P,C)=>{const k=UE.selectCredentials({vcJwts:t.customerCredentials,presentationDefinition:T.data.requiredClaims}),K=Lo.create({metadata:{from:t.customerDid.uri,to:T.metadata.from,protocol:"1.0"},data:{offeringId:T.id,payin:{amount:P.toString(),kind:T.data.payin.methods[0].kind,paymentDetails:{}},payout:{kind:T.data.payout.methods[0].kind,paymentDetails:C},claims:k}});try{K.verifyOfferingRequirements(T)}catch(L){console.log("Offering requirements not met",L)}await K.sign(t.customerDid),console.log("RFQ:",K);try{await Pi.createExchange(K)}catch(L){console.error("Failed to create exchange:",L)}},o=async T=>{try{const P=await Pi.getExchanges({pfiDid:T,did:t.customerDid});return d(P)}catch(P){console.error("Failed to fetch exchanges:",P)}},a=async(T,P,C)=>{const k=by.create({metadata:{from:t.customerDid.uri,to:P,exchangeId:T},data:{reason:C}});await k.sign(t.customerDid);try{await Pi.submitClose(k)}catch(K){console.error("Failed to close exchange:",K)}},u=async(T,P)=>{const C=tw.create({metadata:{from:t.customerDid.uri,to:P,exchangeId:T}});await C.sign(t.customerDid);try{return await Pi.submitOrder(C)}catch(k){console.error("Failed to submit order:",k)}},l=()=>{const T=async()=>{if(console.log("Polling exchanges again..."),!t.customerDid)return;const P=[];try{for(const C of t.pfiAllowlist){const k=await o(C.pfiUri);P.push(...k)}console.log("All exchanges:",P),b(P.reverse()),t.transactionsLoading=!1}catch(C){console.error("Failed to fetch exchanges:",C)}};T(),bee(T,5e3)},c=async()=>{try{const T=r.currentUser;if(!T){console.error("No user is logged in"),n.push("/login");return}const P=T.email,C=um(cm,"donors",P),k=await ED(C);if(k.exists()){const K=k.data().did;t.customerDid=await mf.import({portableDid:JSON.parse(K)});const L=k.data().credentials;L&&(t.customerCredentials=JSON.parse(L),localStorage.setItem("customerCredentials",JSON.stringify(t.customerCredentials)))}else{t.customerDid=await mf.create({options:{publish:!0}});const K=await t.customerDid.export();await f0(C,{email:P,did:JSON.stringify(K),credentials:JSON.stringify(t.customerCredentials),createdAt:new Date}),localStorage.setItem("customerDid",JSON.stringify(K))}}catch(T){console.error("Failed to initialize DID:",T)}},d=T=>T.map(C=>{var W,B,te,z,$,F;const k=C[C.length-1],K=C.find(ee=>ee.kind==="rfq"),L=C.find(ee=>ee.kind==="quote"),q=m(k),se=(W=L==null?void 0:L.data.payin)==null?void 0:W.fee,X=(B=L==null?void 0:L.data.payin)==null?void 0:B.amount,re=(te=K.privateData)==null?void 0:te.payout.paymentDetails;return{id:k.metadata.exchangeId,payinAmount:(se?Number(X)+Number(se):Number(X)).toString()||K.data.payinAmount,payinCurrency:((z=L.data.payin)==null?void 0:z.currencyCode)??null,payoutAmount:(($=L==null?void 0:L.data.payout)==null?void 0:$.amount)??null,payoutCurrency:(F=L.data.payout)==null?void 0:F.currencyCode,status:q,createdTime:K.createdAt,...k.kind==="quote"&&{expirationTime:L.data.expiresAt??null},from:"You",to:(re==null?void 0:re.address)||(re==null?void 0:re.accountNumber)+", "+(re==null?void 0:re.bankName)||(re==null?void 0:re.phoneNumber)+", "+(re==null?void 0:re.networkProvider)||"Unknown",pfiDid:K.metadata.to}}),h=async()=>{try{const P=bm().currentUser;if(!P){console.error("No user is logged in"),n.push("/login");return}const C=um(cm,"users",P.uid),k=await ED(C);if(k.exists()){const K=k.data();K.credentials?(t.customerCredentials=K.credentials,console.log("Credentials loaded from Firestore:",t.customerCredentials),localStorage.setItem("customerCredentials",JSON.stringify(t.customerCredentials))):console.log("No credentials found in Firestore.")}else console.log("User document does not exist in Firestore.")}catch(T){console.error("Error loading credentials from Firestore:",T)}},f=async T=>{t.customerCredentials.push(T),localStorage.setItem("customerCredentials",JSON.stringify(t.customerCredentials));const P=r.currentUser;if(P){const C=um(cm,"donors",P.email);await f0(C,{credentials:JSON.stringify(t.customerCredentials)},{merge:!0})}},p=T=>{const P=Nu.parse({jwt:T}).decoded.payload.vc;return{title:P.type[P.type.length-1].replace(new RegExp("(?<!^)(?<![A-Z])[A-Z](?=[a-z])","g")," $&"),name:P.credentialSubject.name,countryCode:P.credentialSubject.countryOfResidence,issuanceDate:new Date(P.issuanceDate).toLocaleDateString(void 0,{dateStyle:"medium"})}};zd(()=>t.balance,async T=>{try{const C=bm().currentUser;if(!C){console.log("User is not authenticated, redirecting to login..."),n.push("/login");return}const k=um(cm,"users",C.uid);await f0(k,{balance:T},{merge:!0}),console.log("Balance updated in Firestore:",T),typeof window<"u"&&localStorage.setItem("walletBalance",T.toString())}catch(P){console.error("Error updating balance in Firestore:",P)}});const m=T=>T instanceof by?T.data.reason.toLowerCase().includes("complete")||T.data.reason.toLowerCase().includes("success")?"completed":T.data.reason.toLowerCase().includes("expired")?T.data.reason.toLowerCase():T.data.reason.toLowerCase().includes("cancelled")?"cancelled":"failed":T.kind,E=T=>{const P=m(T);switch(P){case"rfq":return"Requested";case"quote":return"Quoted";case"order":case"orderstatus":return"Pending";case"completed":return"Completed";case"expired":return"Expired";case"cancelled":return"Cancelled";case"failed":return"Failed";default:return P}},A=T=>{t.selectedTransaction=T},_=T=>{t.offering=T},g=async T=>{const P=parseFloat(T);if(!isNaN(P)&&P>0){t.balance-=P;try{const k=bm().currentUser;if(!k){console.log("User is not authenticated, redirecting to login..."),n.push("/login");return}const K=um(cm,"donors",k.email);await f0(K,{balance:t.balance},{merge:!0}),console.log("Balance deducted and updated in Firestore:",t.balance),localStorage.setItem("walletBalance",t.balance.toString())}catch(C){console.error("Error deducting balance in Firestore:",C)}}},v=T=>{if(Math.abs(T)>=1)return T.toFixed(2);const P=Math.abs(T)>=.01?4:6;return parseFloat(T.toFixed(P)).toString()},S=T=>{const P=t.offerings.find(C=>C.id===T);return console.log("Selected offering:",P),P},x=()=>{const T=new Set,P=new Set;t.offerings.forEach(C=>{T.add(C.data.payin.currencyCode),P.add(C.data.payout.currencyCode)}),t.payinCurrencies=Array.from(T),t.payoutCurrencies=Array.from(P)},D=(T,P)=>t.offerings.filter(C=>C.data.payin.currencyCode===T&&C.data.payout.currencyCode===P),w=(T,P)=>{if(P.length===0||!T.data.requiredClaims)return!1;try{return UE.satisfiesPresentationDefinition({vcJwts:P,presentationDefinition:T.data.requiredClaims}),!0}catch{return!1}},b=T=>{t.transactions.map(C=>C.id);const P=[...t.transactions];T.forEach(C=>{const k=P.findIndex(K=>K.id===C.id);k>-1?P[k]=C:P.push(C)}),t.transactions=P};return TA(async()=>{console.log("Fetching offerings..."),s(),console.log("Initializing DID..."),await c(),console.log("Loading credentials..."),h(),console.log("Loading balance..."),await e()}),{state:t,selectTransaction:A,setOffering:_,deductAmount:g,formatAmount:v,fetchOfferings:s,filterOfferings:D,satisfiesOfferingRequirements:w,addCredential:f,renderCredential:p,createExchange:i,fetchExchanges:o,renderOrderStatus:E,addOrder:u,addClose:a,getOfferingById:S,pollExchanges:l}},COe=Ny({__name:"app",setup(t){const e=POe();return qh("store",e),BY({title:"CareCove",meta:[{name:"description",content:"Donation platform using tbDEX SDK"}]}),(r,n)=>{const s=gee;return yu(),$4("div",null,[wn(s)])}}}),IOe={__name:"nuxt-error-page",props:{error:Object},setup(t){const r=t.error;r.stack&&r.stack.split(`
`).splice(1).map(d=>({text:d.replace("webpack:/","").replace(".vue",".js").trim(),internal:d.includes("node_modules")&&!d.includes(".cache")||d.includes("internal")||d.includes("new Promise")})).map(d=>`<span class="stack${d.internal?" internal":""}">${d.text}</span>`).join(`
`);const n=Number(r.statusCode||500),s=n===404,i=r.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=r.message||r.toString(),a=void 0,c=s?o5(()=>xm(()=>import("./BY17uPMb.js"),__vite__mapDeps([10,4,2,11]),import.meta.url).then(d=>d.default||d)):o5(()=>xm(()=>import("./DhNRp_fQ.js"),__vite__mapDeps([12,2,13]),import.meta.url).then(d=>d.default||d));return(d,h)=>(yu(),bh(on(c),LW(N4({statusCode:on(n),statusMessage:on(i),description:on(o),stack:on(a)})),null,16))}},kOe={key:0},p3={__name:"nuxt-root",setup(t){const e=()=>null,r=Rn(),n=r.deferHydration();if(r.isHydrating){const u=r.hooks.hookOnce("app:error",n);La().beforeEach(u)}const s=!1;qh(kA,oj()),r.hooks.callHookWith(u=>u.map(l=>l()),"vue:setup");const i=$A(),o=!1;s4((u,l,c)=>{if(r.hooks.callHook("vue:error",u,l,c).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),qZ(u)&&(u.fatal||u.unhandled))return r.runWithContext(()=>Dm(u)),!1});const a=!1;return(u,l)=>(yu(),bh(x4,{onResolve:on(n)},{default:W3(()=>[on(o)?(yu(),$4("div",kOe)):on(i)?(yu(),bh(on(IOe),{key:1,error:on(i)},null,8,["error"])):on(a)?(yu(),bh(on(e),{key:2,context:on(a)},null,8,["context"])):on(s)?(yu(),bh(qG(on(s)),{key:3})):(yu(),bh(on(COe),{key:4}))]),_:1},8,["onResolve"]))}};let m3;{let t;m3=async function(){var o,a;if(t)return t;const n=!!(((o=window.__NUXT__)==null?void 0:o.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?gX(p3):yX(p3),s=xZ({vueApp:n});async function i(u){await s.callHook("app:error",u),s.payload.error=s.payload.error||OA(u)}n.config.errorHandler=i;try{await IZ(s,mee)}catch(u){i(u)}try{await s.hooks.callHook("app:created",n),await s.hooks.callHook("app:beforeMount",n),n.mount(TZ),await s.hooks.callHook("app:mounted",n),await Ry()}catch(u){i(u)}return n.config.errorHandler===i&&(n.config.errorHandler=void 0),n},t=m3().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{_R as A,DA as B,KOe as C,Tu as D,ROe as E,so as F,RX as G,UOe as H,xp as I,KZ as J,SC as K,LOe as L,IA as M,jD as N,AC as O,zd as P,_A as Q,MOe as R,bm as S,jd as T,BRe as U,NRe as V,BOe as W,R4 as a,wn as b,$4 as c,B4 as d,WQ as e,POe as f,jOe as g,OOe as h,xa as i,on as j,lX as k,ui as l,NOe as m,FOe as n,yu as o,TA as p,bh as q,ku as r,La as s,HW as t,BY as u,R5 as v,W3 as w,Ny as x,Rn as y,IC as z};
